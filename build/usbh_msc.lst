ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 1


   1              		.cpu cortex-m7
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"usbh_msc.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.USBH_MSC_SOFProcess,"ax",%progbits
  18              		.align	1
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu fpv5-sp-d16
  24              	USBH_MSC_SOFProcess:
  25              	.LFB145:
  26              		.file 1 "Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c"
   1:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
   2:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   ******************************************************************************
   3:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @file    usbh_msc.c
   4:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @author  MCD Application Team
   5:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @brief   This file implements the MSC class driver functions
   6:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *          ===================================================================
   7:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *                                MSC Class  Description
   8:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *          ===================================================================
   9:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *           This module manages the MSC class V1.0 following the "Universal
  10:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *           Serial Bus Mass Storage Class (MSC) Bulk-Only Transport (BOT) Version 1.0
  11:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *           Sep. 31, 1999".
  12:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *           This driver implements the following aspects of the specification:
  13:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *             - Bulk-Only Transport protocol
  14:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *             - Subclass : SCSI transparent command set (ref. SCSI Primary Commands - 3 (SPC-3))
  15:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *
  16:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *  @endverbatim
  17:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *
  18:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   ******************************************************************************
  19:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @attention
  20:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *
  21:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * <h2><center>&copy; Copyright (c) 2017 STMicroelectronics International N.V.
  22:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * All rights reserved.</center></h2>
  23:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *
  24:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * Redistribution and use in source and binary forms, with or without
  25:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * modification, are permitted, provided that the following conditions are met:
  26:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *
  27:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * 1. Redistribution of source code must retain the above copyright notice,
  28:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *    this list of conditions and the following disclaimer.
  29:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * 2. Redistributions in binary form must reproduce the above copyright notice,
  30:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *    this list of conditions and the following disclaimer in the documentation
  31:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *    and/or other materials provided with the distribution.
  32:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * 3. Neither the name of STMicroelectronics nor the names of other
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 2


  33:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *    contributors to this software may be used to endorse or promote products
  34:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *    derived from this software without specific written permission.
  35:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * 4. This software, including modifications and/or derivative works of this
  36:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *    software, must execute solely and exclusively on microcontroller or
  37:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *    microprocessor devices manufactured by or for STMicroelectronics.
  38:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * 5. Redistribution and use of this software other than as permitted under
  39:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *    this license is void and will automatically terminate your rights under
  40:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *    this license.
  41:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *
  42:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * THIS SOFTWARE IS PROVIDED BY STMICROELECTRONICS AND CONTRIBUTORS "AS IS"
  43:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * AND ANY EXPRESS, IMPLIED OR STATUTORY WARRANTIES, INCLUDING, BUT NOT
  44:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A
  45:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * PARTICULAR PURPOSE AND NON-INFRINGEMENT OF THIRD PARTY INTELLECTUAL PROPERTY
  46:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * RIGHTS ARE DISCLAIMED TO THE FULLEST EXTENT PERMITTED BY LAW. IN NO EVENT
  47:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * SHALL STMICROELECTRONICS OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
  48:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
  49:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,
  50:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  51:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  52:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
  53:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  54:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *
  55:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   ******************************************************************************
  56:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
  57:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
  58:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   /* BSPDependencies
  59:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   - "stm32xxxxx_{eval}{discovery}{nucleo_144}.c"
  60:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   - "stm32xxxxx_{eval}{discovery}_io.c"
  61:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   - "stm32xxxxx_{eval}{discovery}{adafruit}_lcd.c"
  62:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   - "stm32xxxxx_{eval}{discovery}_sdram.c"
  63:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   EndBSPDependencies */
  64:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
  65:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /* Includes ------------------------------------------------------------------*/
  66:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
  67:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #include "usbh_msc.h"
  68:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #include "usbh_msc_bot.h"
  69:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #include "usbh_msc_scsi.h"
  70:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
  71:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
  72:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /** @addtogroup USBH_LIB
  73:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @{
  74:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
  75:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
  76:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /** @addtogroup USBH_CLASS
  77:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @{
  78:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
  79:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
  80:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /** @addtogroup USBH_MSC_CLASS
  81:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @{
  82:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
  83:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
  84:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /** @defgroup USBH_MSC_CORE
  85:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @brief    This file includes the mass storage related functions
  86:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @{
  87:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
  88:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
  89:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 3


  90:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /** @defgroup USBH_MSC_CORE_Private_TypesDefinitions
  91:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @{
  92:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
  93:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
  94:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @}
  95:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
  96:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
  97:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /** @defgroup USBH_MSC_CORE_Private_Defines
  98:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @{
  99:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 100:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
 101:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @}
 102:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 103:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 104:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /** @defgroup USBH_MSC_CORE_Private_Macros
 105:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @{
 106:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 107:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
 108:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @}
 109:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 110:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 111:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 112:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /** @defgroup USBH_MSC_CORE_Private_Variables
 113:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @{
 114:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 115:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
 116:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @}
 117:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 118:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 119:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 120:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /** @defgroup USBH_MSC_CORE_Private_FunctionPrototypes
 121:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @{
 122:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 123:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 124:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** static USBH_StatusTypeDef USBH_MSC_InterfaceInit  (USBH_HandleTypeDef *phost);
 125:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 126:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** static USBH_StatusTypeDef USBH_MSC_InterfaceDeInit  (USBH_HandleTypeDef *phost);
 127:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 128:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** static USBH_StatusTypeDef USBH_MSC_Process(USBH_HandleTypeDef *phost);
 129:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 130:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** static USBH_StatusTypeDef USBH_MSC_ClassRequest(USBH_HandleTypeDef *phost);
 131:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 132:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** static USBH_StatusTypeDef USBH_MSC_SOFProcess(USBH_HandleTypeDef *phost);
 133:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 134:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** static USBH_StatusTypeDef USBH_MSC_RdWrProcess(USBH_HandleTypeDef *phost, uint8_t lun);
 135:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 136:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** USBH_ClassTypeDef  USBH_msc =
 137:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** {
 138:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   "MSC",
 139:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USB_MSC_CLASS,
 140:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_MSC_InterfaceInit,
 141:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_MSC_InterfaceDeInit,
 142:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_MSC_ClassRequest,
 143:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_MSC_Process,
 144:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_MSC_SOFProcess,
 145:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   NULL,
 146:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** };
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 4


 147:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 148:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 149:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
 150:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @}
 151:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 152:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 153:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 154:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /** @defgroup USBH_MSC_CORE_Exported_Variables
 155:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @{
 156:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 157:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 158:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
 159:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @}
 160:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 161:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 162:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 163:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /** @defgroup USBH_MSC_CORE_Private_Functions
 164:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @{
 165:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 166:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 167:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 168:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
 169:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @brief  USBH_MSC_InterfaceInit
 170:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *         The function init the MSC class.
 171:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  phost: Host handle
 172:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @retval USBH Status
 173:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 174:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** static USBH_StatusTypeDef USBH_MSC_InterfaceInit (USBH_HandleTypeDef *phost)
 175:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** {
 176:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   uint8_t interface = 0U;
 177:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_StatusTypeDef status = USBH_FAIL;
 178:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_HandleTypeDef *MSC_Handle;
 179:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 180:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   interface = USBH_FindInterface(phost, phost->pActiveClass->ClassCode, MSC_TRANSPARENT, MSC_BOT);
 181:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 182:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   if(interface == 0xFFU) /* Not Valid Interface */
 183:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 184:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     USBH_DbgLog ("Cannot Find the interface for %s class.", phost->pActiveClass->Name);
 185:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     status = USBH_FAIL;
 186:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 187:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   else
 188:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 189:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     USBH_SelectInterface (phost, interface);
 190:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 191:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     phost->pActiveClass->pData = (MSC_HandleTypeDef *)USBH_malloc (sizeof(MSC_HandleTypeDef));
 192:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle =  (MSC_HandleTypeDef *) phost->pActiveClass->pData;
 193:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 194:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     if(phost->device.CfgDesc.Itf_Desc[phost->device.current_interface].Ep_Desc[0].bEndpointAddress 
 195:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 196:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->InEp = (phost->device.CfgDesc.Itf_Desc[phost->device.current_interface].Ep_Desc[0
 197:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->InEpSize  = phost->device.CfgDesc.Itf_Desc[phost->device.current_interface].Ep_De
 198:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 199:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     else
 200:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 201:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->OutEp = (phost->device.CfgDesc.Itf_Desc[phost->device.current_interface].Ep_Desc[
 202:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->OutEpSize  = phost->device.CfgDesc.Itf_Desc[phost->device.current_interface].Ep_D
 203:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 5


 204:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 205:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     if(phost->device.CfgDesc.Itf_Desc[phost->device.current_interface].Ep_Desc[1].bEndpointAddress 
 206:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 207:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->InEp = (phost->device.CfgDesc.Itf_Desc[phost->device.current_interface].Ep_Desc[1
 208:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->InEpSize  = phost->device.CfgDesc.Itf_Desc[phost->device.current_interface].Ep_De
 209:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 210:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     else
 211:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 212:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->OutEp = (phost->device.CfgDesc.Itf_Desc[phost->device.current_interface].Ep_Desc[
 213:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->OutEpSize  = phost->device.CfgDesc.Itf_Desc[phost->device.current_interface].Ep_D
 214:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 215:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 216:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->current_lun = 0U;
 217:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->rw_lun = 0U;
 218:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->state = MSC_INIT;
 219:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->error = MSC_OK;
 220:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->req_state = MSC_REQ_IDLE;
 221:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->OutPipe = USBH_AllocPipe(phost, MSC_Handle->OutEp);
 222:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->InPipe = USBH_AllocPipe(phost, MSC_Handle->InEp);
 223:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 224:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     USBH_MSC_BOT_Init(phost);
 225:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 226:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     /* De-Initialize LUNs information */
 227:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     USBH_memset(MSC_Handle->unit, 0, sizeof(MSC_Handle->unit));
 228:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 229:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     /* Open the new channels */
 230:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     USBH_OpenPipe  (phost,
 231:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                     MSC_Handle->OutPipe,
 232:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                     MSC_Handle->OutEp,
 233:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                     phost->device.address,
 234:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                     phost->device.speed,
 235:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                     USB_EP_TYPE_BULK,
 236:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                     MSC_Handle->OutEpSize);
 237:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 238:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     USBH_OpenPipe  (phost,
 239:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                     MSC_Handle->InPipe,
 240:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                     MSC_Handle->InEp,
 241:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                     phost->device.address,
 242:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                     phost->device.speed,
 243:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                     USB_EP_TYPE_BULK,
 244:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                     MSC_Handle->InEpSize);
 245:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 246:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     USBH_LL_SetToggle (phost, MSC_Handle->InPipe, 0U);
 247:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     USBH_LL_SetToggle (phost, MSC_Handle->OutPipe, 0U);
 248:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     status = USBH_OK;
 249:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 250:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   return status;
 251:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** }
 252:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 253:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
 254:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @brief  USBH_MSC_InterfaceDeInit
 255:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *         The function DeInit the Pipes used for the MSC class.
 256:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  phost: Host handle
 257:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @retval USBH Status
 258:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 259:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** static USBH_StatusTypeDef USBH_MSC_InterfaceDeInit (USBH_HandleTypeDef *phost)
 260:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** {
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 6


 261:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_HandleTypeDef *MSC_Handle =  (MSC_HandleTypeDef *) phost->pActiveClass->pData;
 262:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 263:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   if ( MSC_Handle->OutPipe)
 264:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 265:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     USBH_ClosePipe(phost, MSC_Handle->OutPipe);
 266:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     USBH_FreePipe  (phost, MSC_Handle->OutPipe);
 267:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->OutPipe = 0U;     /* Reset the Channel as Free */
 268:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 269:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 270:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   if ( MSC_Handle->InPipe)
 271:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 272:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     USBH_ClosePipe(phost, MSC_Handle->InPipe);
 273:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     USBH_FreePipe  (phost, MSC_Handle->InPipe);
 274:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->InPipe = 0U;     /* Reset the Channel as Free */
 275:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 276:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 277:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   if(phost->pActiveClass->pData)
 278:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 279:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     USBH_free (phost->pActiveClass->pData);
 280:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     phost->pActiveClass->pData = 0;
 281:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 282:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 283:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   return USBH_OK;
 284:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** }
 285:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 286:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
 287:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @brief  USBH_MSC_ClassRequest
 288:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *         The function is responsible for handling Standard requests
 289:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *         for MSC class.
 290:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  phost: Host handle
 291:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @retval USBH Status
 292:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 293:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** static USBH_StatusTypeDef USBH_MSC_ClassRequest(USBH_HandleTypeDef *phost)
 294:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** {
 295:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_HandleTypeDef *MSC_Handle =  (MSC_HandleTypeDef *) phost->pActiveClass->pData;
 296:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_StatusTypeDef status = USBH_BUSY;
 297:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   uint8_t i;
 298:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 299:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   /* Switch MSC REQ state machine */
 300:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   switch (MSC_Handle->req_state)
 301:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 302:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   case MSC_REQ_IDLE:
 303:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   case MSC_REQ_GET_MAX_LUN:
 304:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     /* Issue GetMaxLUN request */
 305:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     status = USBH_MSC_BOT_REQ_GetMaxLUN(phost, (uint8_t *)(void *)&MSC_Handle->max_lun);
 306:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 307:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     /* When devices do not support the GetMaxLun request, this should
 308:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****        be considred as only one logical unit is supported */
 309:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     if(status == USBH_NOT_SUPPORTED)
 310:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 311:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->max_lun = 0U;
 312:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       status = USBH_OK;
 313:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 314:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 315:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     if(status == USBH_OK)
 316:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 317:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->max_lun = (MSC_Handle->max_lun > MAX_SUPPORTED_LUN)? MAX_SUPPORTED_LUN : (uint8_t
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 7


 318:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       USBH_UsrLog ("Number of supported LUN: %lu", (int32_t)(MSC_Handle->max_lun));
 319:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 320:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       for(i = 0U; i < MSC_Handle->max_lun; i++)
 321:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       {
 322:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         MSC_Handle->unit[i].prev_ready_state = USBH_FAIL;
 323:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         MSC_Handle->unit[i].state_changed = 0U;
 324:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       }
 325:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 326:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     break;
 327:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 328:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   case MSC_REQ_ERROR :
 329:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     /* a Clear Feature should be issued here */
 330:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     if(USBH_ClrFeature(phost, 0x00U) == USBH_OK)
 331:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 332:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->req_state = MSC_Handle->prev_req_state;
 333:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 334:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     break;
 335:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 336:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   default:
 337:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     break;
 338:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 339:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 340:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   return status;
 341:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** }
 342:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 343:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
 344:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @brief  USBH_MSC_Process
 345:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *         The function is for managing state machine for MSC data transfers
 346:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  phost: Host handle
 347:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @retval USBH Status
 348:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 349:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** static USBH_StatusTypeDef USBH_MSC_Process(USBH_HandleTypeDef *phost)
 350:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** {
 351:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_HandleTypeDef *MSC_Handle =  (MSC_HandleTypeDef *) phost->pActiveClass->pData;
 352:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_StatusTypeDef error = USBH_BUSY ;
 353:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_StatusTypeDef scsi_status = USBH_BUSY ;
 354:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_StatusTypeDef ready_status = USBH_BUSY ;
 355:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 356:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   switch (MSC_Handle->state)
 357:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 358:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   case MSC_INIT:
 359:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 360:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     if(MSC_Handle->current_lun < MSC_Handle->max_lun)
 361:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 362:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 363:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_NOT_READY;
 364:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       /* Switch MSC REQ state machine */
 365:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       switch (MSC_Handle->unit[MSC_Handle->current_lun].state)
 366:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       {
 367:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       case MSC_INIT:
 368:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         USBH_UsrLog ("LUN #%d: ", MSC_Handle->current_lun);
 369:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_READ_INQUIRY;
 370:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         MSC_Handle->timer = phost->Timer;
 371:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         break;
 372:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 373:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       case MSC_READ_INQUIRY:
 374:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         scsi_status = USBH_MSC_SCSI_Inquiry(phost, (uint8_t)MSC_Handle->current_lun, &MSC_Handle->u
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 8


 375:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 376:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         if (scsi_status == USBH_OK)
 377:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 378:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           USBH_UsrLog ("Inquiry Vendor  : %s", MSC_Handle->unit[MSC_Handle->current_lun].inquiry.ve
 379:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           USBH_UsrLog ("Inquiry Product : %s", MSC_Handle->unit[MSC_Handle->current_lun].inquiry.pr
 380:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           USBH_UsrLog ("Inquiry Version : %s", MSC_Handle->unit[MSC_Handle->current_lun].inquiry.re
 381:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_TEST_UNIT_READY;
 382:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 383:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         if (scsi_status == USBH_FAIL)
 384:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 385:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_REQUEST_SENSE;
 386:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 387:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         else
 388:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 389:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           if(scsi_status == USBH_UNRECOVERED_ERROR)
 390:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           {
 391:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_IDLE;
 392:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_ERROR;
 393:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           }
 394:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 395:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         break;
 396:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 397:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       case MSC_TEST_UNIT_READY:
 398:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         ready_status = USBH_MSC_SCSI_TestUnitReady(phost, (uint8_t)MSC_Handle->current_lun);
 399:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 400:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         if (ready_status == USBH_OK)
 401:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 402:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           if(MSC_Handle->unit[MSC_Handle->current_lun].prev_ready_state != USBH_OK)
 403:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           {
 404:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             MSC_Handle->unit[MSC_Handle->current_lun].state_changed = 1U;
 405:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             USBH_UsrLog ("MSC Device ready");
 406:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           }
 407:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           else
 408:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           {
 409:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             MSC_Handle->unit[MSC_Handle->current_lun].state_changed = 0U;
 410:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           }
 411:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_READ_CAPACITY10;
 412:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_OK;
 413:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].prev_ready_state = USBH_OK;
 414:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 415:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         if (ready_status == USBH_FAIL)
 416:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 417:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           /* Media not ready, so try to check again during 10s */
 418:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           if( MSC_Handle->unit[MSC_Handle->current_lun].prev_ready_state != USBH_FAIL)
 419:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           {
 420:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             MSC_Handle->unit[MSC_Handle->current_lun].state_changed = 1U;
 421:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             USBH_UsrLog ("MSC Device NOT ready");
 422:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           }
 423:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           else
 424:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           {
 425:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             MSC_Handle->unit[MSC_Handle->current_lun].state_changed = 0U;
 426:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           }
 427:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_REQUEST_SENSE;
 428:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_NOT_READY;
 429:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].prev_ready_state = USBH_FAIL;
 430:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 431:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         else
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 9


 432:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 433:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           if (ready_status == USBH_UNRECOVERED_ERROR)
 434:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           {
 435:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_IDLE;
 436:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_ERROR;
 437:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           }
 438:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 439:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         break;
 440:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 441:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       case MSC_READ_CAPACITY10:
 442:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         scsi_status = USBH_MSC_SCSI_ReadCapacity(phost, (uint8_t)MSC_Handle->current_lun, &MSC_Hand
 443:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 444:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         if(scsi_status == USBH_OK)
 445:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 446:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           if(MSC_Handle->unit[MSC_Handle->current_lun].state_changed == 1U)
 447:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           {
 448:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             USBH_UsrLog ("MSC Device capacity : %lu Bytes", \
 449:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               (int32_t)(MSC_Handle->unit[MSC_Handle->current_lun].capacity.block_nbr * MSC_Handle->
 450:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             USBH_UsrLog ("Block number : %lu", (int32_t)(MSC_Handle->unit[MSC_Handle->current_lun].
 451:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             USBH_UsrLog ("Block Size   : %lu", (int32_t)(MSC_Handle->unit[MSC_Handle->current_lun].
 452:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           }
 453:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_IDLE;
 454:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_OK;
 455:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->current_lun++;
 456:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 457:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         else if(scsi_status == USBH_FAIL)
 458:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 459:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_REQUEST_SENSE;
 460:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 461:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         else
 462:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 463:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           if(scsi_status == USBH_UNRECOVERED_ERROR)
 464:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           {
 465:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_IDLE;
 466:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_ERROR;
 467:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           }
 468:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 469:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         break;
 470:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 471:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       case MSC_REQUEST_SENSE:
 472:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         scsi_status = USBH_MSC_SCSI_RequestSense(phost, (uint8_t)MSC_Handle->current_lun, &MSC_Hand
 473:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 474:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         if( scsi_status == USBH_OK)
 475:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 476:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           if((MSC_Handle->unit[MSC_Handle->current_lun].sense.key == SCSI_SENSE_KEY_UNIT_ATTENTION)
 477:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****              (MSC_Handle->unit[MSC_Handle->current_lun].sense.key == SCSI_SENSE_KEY_NOT_READY) )
 478:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           {
 479:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 480:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             if((phost->Timer - MSC_Handle->timer) < 10000U)
 481:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             {
 482:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_TEST_UNIT_READY;
 483:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               break;
 484:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             }
 485:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           }
 486:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 487:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           USBH_UsrLog ("Sense Key  : %x", MSC_Handle->unit[MSC_Handle->current_lun].sense.key);
 488:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           USBH_UsrLog ("Additional Sense Code : %x", MSC_Handle->unit[MSC_Handle->current_lun].sens
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 10


 489:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           USBH_UsrLog ("Additional Sense Code Qualifier: %x", MSC_Handle->unit[MSC_Handle->current_
 490:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_IDLE;
 491:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->current_lun++;
 492:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 493:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         if(scsi_status == USBH_FAIL)
 494:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 495:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           USBH_UsrLog ("MSC Device NOT ready");
 496:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_UNRECOVERED_ERROR;
 497:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 498:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         else
 499:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 500:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           if(scsi_status == USBH_UNRECOVERED_ERROR)
 501:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           {
 502:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_IDLE;
 503:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_ERROR;
 504:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           }
 505:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 506:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         break;
 507:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 508:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       case MSC_UNRECOVERED_ERROR:
 509:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         MSC_Handle->current_lun++;
 510:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         break;
 511:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 512:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       default:
 513:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         break;
 514:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       }
 515:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 516:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #if (USBH_USE_OS == 1U)
 517:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     osMessagePut ( phost->os_event, USBH_CLASS_EVENT, 0U);
 518:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #endif
 519:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 520:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     else
 521:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 522:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->current_lun = 0U;
 523:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->state = MSC_IDLE;
 524:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #if (USBH_USE_OS == 1U)
 525:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     osMessagePut ( phost->os_event, USBH_CLASS_EVENT, 0U);
 526:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #endif
 527:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     phost->pUser(phost, HOST_USER_CLASS_ACTIVE);
 528:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 529:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     break;
 530:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 531:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   case MSC_IDLE:
 532:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     error = USBH_OK;
 533:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     break;
 534:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 535:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   default:
 536:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     break;
 537:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 538:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   return error;
 539:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** }
 540:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 541:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 542:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
 543:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @brief  USBH_MSC_SOFProcess
 544:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *         The function is for SOF state
 545:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  phost: Host handle
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 11


 546:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @retval USBH Status
 547:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 548:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** static USBH_StatusTypeDef USBH_MSC_SOFProcess(USBH_HandleTypeDef *phost)
 549:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** {
  27              		.loc 1 549 0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              		@ link register save eliminated.
  32              	.LVL0:
 550:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 551:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   return USBH_OK;
 552:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** }
  33              		.loc 1 552 0
  34 0000 0020     		movs	r0, #0
  35              	.LVL1:
  36 0002 7047     		bx	lr
  37              		.cfi_endproc
  38              	.LFE145:
  40              		.section	.text.USBH_MSC_Process,"ax",%progbits
  41              		.align	1
  42              		.syntax unified
  43              		.thumb
  44              		.thumb_func
  45              		.fpu fpv5-sp-d16
  47              	USBH_MSC_Process:
  48              	.LFB144:
 350:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_HandleTypeDef *MSC_Handle =  (MSC_HandleTypeDef *) phost->pActiveClass->pData;
  49              		.loc 1 350 0
  50              		.cfi_startproc
  51              		@ args = 0, pretend = 0, frame = 0
  52              		@ frame_needed = 0, uses_anonymous_args = 0
  53              	.LVL2:
  54 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
  55              	.LCFI0:
  56              		.cfi_def_cfa_offset 24
  57              		.cfi_offset 3, -24
  58              		.cfi_offset 4, -20
  59              		.cfi_offset 5, -16
  60              		.cfi_offset 6, -12
  61              		.cfi_offset 7, -8
  62              		.cfi_offset 14, -4
 351:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_StatusTypeDef error = USBH_BUSY ;
  63              		.loc 1 351 0
  64 0002 D0F87833 		ldr	r3, [r0, #888]
  65 0006 DC69     		ldr	r4, [r3, #28]
  66              	.LVL3:
 356:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
  67              		.loc 1 356 0
  68 0008 237B     		ldrb	r3, [r4, #12]	@ zero_extendqisi2
  69 000a 23B1     		cbz	r3, .L4
  70 000c 012B     		cmp	r3, #1
  71 000e 00F0F781 		beq	.L29
 352:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_StatusTypeDef scsi_status = USBH_BUSY ;
  72              		.loc 1 352 0
  73 0012 0120     		movs	r0, #1
  74              	.LVL4:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 12


  75 0014 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
  76              	.LVL5:
  77              	.L4:
  78 0016 0546     		mov	r5, r0
 360:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
  79              		.loc 1 360 0
  80 0018 B4F8F810 		ldrh	r1, [r4, #248]
  81 001c 2368     		ldr	r3, [r4]
  82 001e 9942     		cmp	r1, r3
  83 0020 80F0C581 		bcs	.L6
 363:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       /* Switch MSC REQ state machine */
  84              		.loc 1 363 0
  85 0024 3423     		movs	r3, #52
  86 0026 03FB0143 		mla	r3, r3, r1, r4
  87 002a 0122     		movs	r2, #1
  88 002c 83F89120 		strb	r2, [r3, #145]
 365:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       {
  89              		.loc 1 365 0
  90 0030 93F89030 		ldrb	r3, [r3, #144]	@ zero_extendqisi2
  91 0034 082B     		cmp	r3, #8
  92 0036 1CD8     		bhi	.L7
  93 0038 DFE813F0 		tbh	[pc, r3, lsl #1]
  94              	.L9:
  95 003c 0900     		.2byte	(.L8-.L9)/2
  96 003e 1B00     		.2byte	(.L7-.L9)/2
  97 0040 7700     		.2byte	(.L10-.L9)/2
  98 0042 E000     		.2byte	(.L11-.L9)/2
  99 0044 2300     		.2byte	(.L12-.L9)/2
 100 0046 4501     		.2byte	(.L13-.L9)/2
 101 0048 1B00     		.2byte	(.L7-.L9)/2
 102 004a 1B00     		.2byte	(.L7-.L9)/2
 103 004c B501     		.2byte	(.L14-.L9)/2
 104              		.p2align 1
 105              	.L8:
 368:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_READ_INQUIRY;
 106              		.loc 1 368 0
 107 004e E048     		ldr	r0, .L38
 108              	.LVL6:
 109 0050 FFF7FEFF 		bl	printf
 110              	.LVL7:
 111 0054 0A20     		movs	r0, #10
 112 0056 FFF7FEFF 		bl	putchar
 113              	.LVL8:
 369:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         MSC_Handle->timer = phost->Timer;
 114              		.loc 1 369 0
 115 005a B4F8F830 		ldrh	r3, [r4, #248]
 116 005e 3422     		movs	r2, #52
 117 0060 02FB0343 		mla	r3, r2, r3, r4
 118 0064 0422     		movs	r2, #4
 119 0066 83F89020 		strb	r2, [r3, #144]
 370:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         break;
 120              		.loc 1 370 0
 121 006a D5F8BC33 		ldr	r3, [r5, #956]
 122 006e C4F8FC30 		str	r3, [r4, #252]
 123              	.LVL9:
 124              	.L7:
 517:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #endif
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 13


 125              		.loc 1 517 0
 126 0072 0022     		movs	r2, #0
 127 0074 0421     		movs	r1, #4
 128 0076 D5F8CC03 		ldr	r0, [r5, #972]
 129 007a FFF7FEFF 		bl	osMessagePut
 130              	.LVL10:
 352:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_StatusTypeDef scsi_status = USBH_BUSY ;
 131              		.loc 1 352 0
 132 007e 0120     		movs	r0, #1
 133 0080 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 134              	.LVL11:
 135              	.L12:
 374:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 136              		.loc 1 374 0
 137 0082 3422     		movs	r2, #52
 138 0084 02FB01F2 		mul	r2, r2, r1
 139 0088 9832     		adds	r2, r2, #152
 140 008a 2244     		add	r2, r2, r4
 141 008c 0732     		adds	r2, r2, #7
 142 008e C9B2     		uxtb	r1, r1
 143 0090 FFF7FEFF 		bl	USBH_MSC_SCSI_Inquiry
 144              	.LVL12:
 376:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 145              		.loc 1 376 0
 146 0094 0646     		mov	r6, r0
 147 0096 78B1     		cbz	r0, .L31
 148              	.LVL13:
 149              	.L15:
 383:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 150              		.loc 1 383 0
 151 0098 022E     		cmp	r6, #2
 152 009a 3DD0     		beq	.L32
 389:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           {
 153              		.loc 1 389 0
 154 009c 042E     		cmp	r6, #4
 155 009e E8D1     		bne	.L7
 391:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_ERROR;
 156              		.loc 1 391 0
 157 00a0 B4F8F830 		ldrh	r3, [r4, #248]
 158 00a4 3422     		movs	r2, #52
 159 00a6 02FB0344 		mla	r4, r2, r3, r4
 160              	.LVL14:
 161 00aa 0123     		movs	r3, #1
 162 00ac 84F89030 		strb	r3, [r4, #144]
 392:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           }
 163              		.loc 1 392 0
 164 00b0 0223     		movs	r3, #2
 165 00b2 84F89130 		strb	r3, [r4, #145]
 166 00b6 DCE7     		b	.L7
 167              	.LVL15:
 168              	.L31:
 378:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           USBH_UsrLog ("Inquiry Product : %s", MSC_Handle->unit[MSC_Handle->current_lun].inquiry.pr
 169              		.loc 1 378 0
 170 00b8 B4F8F810 		ldrh	r1, [r4, #248]
 171 00bc 3427     		movs	r7, #52
 172 00be 07FB01F1 		mul	r1, r7, r1
 173 00c2 9831     		adds	r1, r1, #152
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 14


 174 00c4 2144     		add	r1, r1, r4
 175 00c6 0A31     		adds	r1, r1, #10
 176 00c8 C248     		ldr	r0, .L38+4
 177              	.LVL16:
 178 00ca FFF7FEFF 		bl	printf
 179              	.LVL17:
 180 00ce 0A20     		movs	r0, #10
 181 00d0 FFF7FEFF 		bl	putchar
 182              	.LVL18:
 379:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           USBH_UsrLog ("Inquiry Version : %s", MSC_Handle->unit[MSC_Handle->current_lun].inquiry.re
 183              		.loc 1 379 0
 184 00d4 B4F8F810 		ldrh	r1, [r4, #248]
 185 00d8 07FB01F1 		mul	r1, r7, r1
 186 00dc A031     		adds	r1, r1, #160
 187 00de 2144     		add	r1, r1, r4
 188 00e0 0B31     		adds	r1, r1, #11
 189 00e2 BD48     		ldr	r0, .L38+8
 190 00e4 FFF7FEFF 		bl	printf
 191              	.LVL19:
 192 00e8 0A20     		movs	r0, #10
 193 00ea FFF7FEFF 		bl	putchar
 194              	.LVL20:
 380:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_TEST_UNIT_READY;
 195              		.loc 1 380 0
 196 00ee B4F8F810 		ldrh	r1, [r4, #248]
 197 00f2 07FB01F1 		mul	r1, r7, r1
 198 00f6 B031     		adds	r1, r1, #176
 199 00f8 2144     		add	r1, r1, r4
 200 00fa 0C31     		adds	r1, r1, #12
 201 00fc B748     		ldr	r0, .L38+12
 202 00fe FFF7FEFF 		bl	printf
 203              	.LVL21:
 204 0102 0A20     		movs	r0, #10
 205 0104 FFF7FEFF 		bl	putchar
 206              	.LVL22:
 381:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 207              		.loc 1 381 0
 208 0108 B4F8F830 		ldrh	r3, [r4, #248]
 209 010c 07FB0347 		mla	r7, r7, r3, r4
 210 0110 0223     		movs	r3, #2
 211 0112 87F89030 		strb	r3, [r7, #144]
 212 0116 BFE7     		b	.L15
 213              	.L32:
 385:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 214              		.loc 1 385 0
 215 0118 B4F8F830 		ldrh	r3, [r4, #248]
 216 011c 3422     		movs	r2, #52
 217 011e 02FB0344 		mla	r4, r2, r3, r4
 218              	.LVL23:
 219 0122 0523     		movs	r3, #5
 220 0124 84F89030 		strb	r3, [r4, #144]
 221 0128 A3E7     		b	.L7
 222              	.LVL24:
 223              	.L10:
 398:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 224              		.loc 1 398 0
 225 012a C9B2     		uxtb	r1, r1
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 15


 226 012c FFF7FEFF 		bl	USBH_MSC_SCSI_TestUnitReady
 227              	.LVL25:
 400:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 228              		.loc 1 400 0
 229 0130 0646     		mov	r6, r0
 230 0132 D0B9     		cbnz	r0, .L17
 402:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           {
 231              		.loc 1 402 0
 232 0134 B4F8F830 		ldrh	r3, [r4, #248]
 233 0138 3422     		movs	r2, #52
 234 013a 02FB0342 		mla	r2, r2, r3, r4
 235 013e 92F89220 		ldrb	r2, [r2, #146]	@ zero_extendqisi2
 236 0142 1ABB     		cbnz	r2, .L33
 409:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           }
 237              		.loc 1 409 0
 238 0144 3422     		movs	r2, #52
 239 0146 02FB0343 		mla	r3, r2, r3, r4
 240 014a 0022     		movs	r2, #0
 241 014c 83F8C120 		strb	r2, [r3, #193]
 242              	.LVL26:
 243              	.L19:
 411:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_OK;
 244              		.loc 1 411 0
 245 0150 B4F8F830 		ldrh	r3, [r4, #248]
 246 0154 3422     		movs	r2, #52
 247 0156 02FB0343 		mla	r3, r2, r3, r4
 248 015a 0322     		movs	r2, #3
 249 015c 83F89020 		strb	r2, [r3, #144]
 412:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].prev_ready_state = USBH_OK;
 250              		.loc 1 412 0
 251 0160 0022     		movs	r2, #0
 252 0162 83F89120 		strb	r2, [r3, #145]
 413:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 253              		.loc 1 413 0
 254 0166 83F89220 		strb	r2, [r3, #146]
 255              	.L17:
 415:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 256              		.loc 1 415 0
 257 016a 022E     		cmp	r6, #2
 258 016c 1BD0     		beq	.L34
 433:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           {
 259              		.loc 1 433 0
 260 016e 042E     		cmp	r6, #4
 261 0170 7FF47FAF 		bne	.L7
 435:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_ERROR;
 262              		.loc 1 435 0
 263 0174 B4F8F830 		ldrh	r3, [r4, #248]
 264 0178 3422     		movs	r2, #52
 265 017a 02FB0344 		mla	r4, r2, r3, r4
 266              	.LVL27:
 267 017e 0123     		movs	r3, #1
 268 0180 84F89030 		strb	r3, [r4, #144]
 436:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           }
 269              		.loc 1 436 0
 270 0184 0223     		movs	r3, #2
 271 0186 84F89130 		strb	r3, [r4, #145]
 272 018a 72E7     		b	.L7
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 16


 273              	.LVL28:
 274              	.L33:
 404:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             USBH_UsrLog ("MSC Device ready");
 275              		.loc 1 404 0
 276 018c 3422     		movs	r2, #52
 277 018e 02FB0343 		mla	r3, r2, r3, r4
 278 0192 0122     		movs	r2, #1
 279 0194 83F8C120 		strb	r2, [r3, #193]
 405:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           }
 280              		.loc 1 405 0
 281 0198 9148     		ldr	r0, .L38+16
 282              	.LVL29:
 283 019a FFF7FEFF 		bl	printf
 284              	.LVL30:
 285 019e 0A20     		movs	r0, #10
 286 01a0 FFF7FEFF 		bl	putchar
 287              	.LVL31:
 288 01a4 D4E7     		b	.L19
 289              	.L34:
 418:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           {
 290              		.loc 1 418 0
 291 01a6 B4F8F830 		ldrh	r3, [r4, #248]
 292 01aa 3422     		movs	r2, #52
 293 01ac 02FB0342 		mla	r2, r2, r3, r4
 294 01b0 92F89220 		ldrb	r2, [r2, #146]	@ zero_extendqisi2
 295 01b4 022A     		cmp	r2, #2
 296 01b6 1AD0     		beq	.L21
 420:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             USBH_UsrLog ("MSC Device NOT ready");
 297              		.loc 1 420 0
 298 01b8 3422     		movs	r2, #52
 299 01ba 02FB0343 		mla	r3, r2, r3, r4
 300 01be 0122     		movs	r2, #1
 301 01c0 83F8C120 		strb	r2, [r3, #193]
 421:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           }
 302              		.loc 1 421 0
 303 01c4 8748     		ldr	r0, .L38+20
 304 01c6 FFF7FEFF 		bl	printf
 305              	.LVL32:
 306 01ca 0A20     		movs	r0, #10
 307 01cc FFF7FEFF 		bl	putchar
 308              	.LVL33:
 309              	.L22:
 427:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_NOT_READY;
 310              		.loc 1 427 0
 311 01d0 B4F8F830 		ldrh	r3, [r4, #248]
 312 01d4 3422     		movs	r2, #52
 313 01d6 02FB0344 		mla	r4, r2, r3, r4
 314              	.LVL34:
 315 01da 0523     		movs	r3, #5
 316 01dc 84F89030 		strb	r3, [r4, #144]
 428:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].prev_ready_state = USBH_FAIL;
 317              		.loc 1 428 0
 318 01e0 0123     		movs	r3, #1
 319 01e2 84F89130 		strb	r3, [r4, #145]
 429:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 320              		.loc 1 429 0
 321 01e6 0223     		movs	r3, #2
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 17


 322 01e8 84F89230 		strb	r3, [r4, #146]
 323 01ec 41E7     		b	.L7
 324              	.LVL35:
 325              	.L21:
 425:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           }
 326              		.loc 1 425 0
 327 01ee 3422     		movs	r2, #52
 328 01f0 02FB0343 		mla	r3, r2, r3, r4
 329 01f4 0022     		movs	r2, #0
 330 01f6 83F8C120 		strb	r2, [r3, #193]
 331 01fa E9E7     		b	.L22
 332              	.LVL36:
 333              	.L11:
 442:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 334              		.loc 1 442 0
 335 01fc 3422     		movs	r2, #52
 336 01fe 02FB01F2 		mul	r2, r2, r1
 337 0202 9032     		adds	r2, r2, #144
 338 0204 2244     		add	r2, r2, r4
 339 0206 0432     		adds	r2, r2, #4
 340 0208 C9B2     		uxtb	r1, r1
 341 020a FFF7FEFF 		bl	USBH_MSC_SCSI_ReadCapacity
 342              	.LVL37:
 444:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 343              		.loc 1 444 0
 344 020e 0028     		cmp	r0, #0
 345 0210 3FD1     		bne	.L23
 446:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           {
 346              		.loc 1 446 0
 347 0212 B4F8F820 		ldrh	r2, [r4, #248]
 348 0216 3423     		movs	r3, #52
 349 0218 03FB0243 		mla	r3, r3, r2, r4
 350 021c 93F8C130 		ldrb	r3, [r3, #193]	@ zero_extendqisi2
 351 0220 012B     		cmp	r3, #1
 352 0222 0ED0     		beq	.L35
 353              	.LVL38:
 354              	.L24:
 453:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_OK;
 355              		.loc 1 453 0
 356 0224 B4F8F830 		ldrh	r3, [r4, #248]
 357 0228 3422     		movs	r2, #52
 358 022a 02FB0342 		mla	r2, r2, r3, r4
 359 022e 0121     		movs	r1, #1
 360 0230 82F89010 		strb	r1, [r2, #144]
 454:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->current_lun++;
 361              		.loc 1 454 0
 362 0234 0021     		movs	r1, #0
 363 0236 82F89110 		strb	r1, [r2, #145]
 455:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 364              		.loc 1 455 0
 365 023a 0133     		adds	r3, r3, #1
 366 023c A4F8F830 		strh	r3, [r4, #248]	@ movhi
 367 0240 17E7     		b	.L7
 368              	.LVL39:
 369              	.L35:
 448:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               (int32_t)(MSC_Handle->unit[MSC_Handle->current_lun].capacity.block_nbr * MSC_Handle->
 370              		.loc 1 448 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 18


 371 0242 3426     		movs	r6, #52
 372 0244 06FB0242 		mla	r2, r6, r2, r4
 373 0248 D2F89430 		ldr	r3, [r2, #148]
 374 024c B2F89810 		ldrh	r1, [r2, #152]
 375 0250 01FB03F1 		mul	r1, r1, r3
 376 0254 6448     		ldr	r0, .L38+24
 377              	.LVL40:
 378 0256 FFF7FEFF 		bl	printf
 379              	.LVL41:
 380 025a 0A20     		movs	r0, #10
 381 025c FFF7FEFF 		bl	putchar
 382              	.LVL42:
 450:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             USBH_UsrLog ("Block Size   : %lu", (int32_t)(MSC_Handle->unit[MSC_Handle->current_lun].
 383              		.loc 1 450 0
 384 0260 B4F8F830 		ldrh	r3, [r4, #248]
 385 0264 06FB0343 		mla	r3, r6, r3, r4
 386 0268 D3F89410 		ldr	r1, [r3, #148]
 387 026c 5F48     		ldr	r0, .L38+28
 388 026e FFF7FEFF 		bl	printf
 389              	.LVL43:
 390 0272 0A20     		movs	r0, #10
 391 0274 FFF7FEFF 		bl	putchar
 392              	.LVL44:
 451:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           }
 393              		.loc 1 451 0
 394 0278 B4F8F830 		ldrh	r3, [r4, #248]
 395 027c 06FB0343 		mla	r3, r6, r3, r4
 396 0280 B3F89810 		ldrh	r1, [r3, #152]
 397 0284 5A48     		ldr	r0, .L38+32
 398 0286 FFF7FEFF 		bl	printf
 399              	.LVL45:
 400 028a 0A20     		movs	r0, #10
 401 028c FFF7FEFF 		bl	putchar
 402              	.LVL46:
 403 0290 C8E7     		b	.L24
 404              	.LVL47:
 405              	.L23:
 457:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 406              		.loc 1 457 0
 407 0292 0228     		cmp	r0, #2
 408 0294 0ED0     		beq	.L36
 463:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           {
 409              		.loc 1 463 0
 410 0296 0428     		cmp	r0, #4
 411 0298 7FF4EBAE 		bne	.L7
 465:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_ERROR;
 412              		.loc 1 465 0
 413 029c B4F8F830 		ldrh	r3, [r4, #248]
 414 02a0 3422     		movs	r2, #52
 415 02a2 02FB0344 		mla	r4, r2, r3, r4
 416              	.LVL48:
 417 02a6 0123     		movs	r3, #1
 418 02a8 84F89030 		strb	r3, [r4, #144]
 466:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           }
 419              		.loc 1 466 0
 420 02ac 0223     		movs	r3, #2
 421 02ae 84F89130 		strb	r3, [r4, #145]
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 19


 422 02b2 DEE6     		b	.L7
 423              	.LVL49:
 424              	.L36:
 459:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 425              		.loc 1 459 0
 426 02b4 B4F8F830 		ldrh	r3, [r4, #248]
 427 02b8 3422     		movs	r2, #52
 428 02ba 02FB0344 		mla	r4, r2, r3, r4
 429              	.LVL50:
 430 02be 0523     		movs	r3, #5
 431 02c0 84F89030 		strb	r3, [r4, #144]
 432 02c4 D5E6     		b	.L7
 433              	.LVL51:
 434              	.L13:
 472:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 435              		.loc 1 472 0
 436 02c6 3422     		movs	r2, #52
 437 02c8 02FB01F2 		mul	r2, r2, r1
 438 02cc 9832     		adds	r2, r2, #152
 439 02ce 2244     		add	r2, r2, r4
 440 02d0 0432     		adds	r2, r2, #4
 441 02d2 C9B2     		uxtb	r1, r1
 442 02d4 FFF7FEFF 		bl	USBH_MSC_SCSI_RequestSense
 443              	.LVL52:
 474:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 444              		.loc 1 474 0
 445 02d8 0646     		mov	r6, r0
 446 02da 0028     		cmp	r0, #0
 447 02dc 43D1     		bne	.L26
 476:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****              (MSC_Handle->unit[MSC_Handle->current_lun].sense.key == SCSI_SENSE_KEY_NOT_READY) )
 448              		.loc 1 476 0
 449 02de B4F8F820 		ldrh	r2, [r4, #248]
 450 02e2 3423     		movs	r3, #52
 451 02e4 03FB0243 		mla	r3, r3, r2, r4
 452 02e8 93F89C10 		ldrb	r1, [r3, #156]	@ zero_extendqisi2
 453 02ec 0229     		cmp	r1, #2
 454 02ee 18BF     		it	ne
 455 02f0 0629     		cmpne	r1, #6
 456 02f2 0FD1     		bne	.L27
 480:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             {
 457              		.loc 1 480 0
 458 02f4 D5F8BC33 		ldr	r3, [r5, #956]
 459 02f8 D4F8FC00 		ldr	r0, [r4, #252]
 460              	.LVL53:
 461 02fc 1B1A     		subs	r3, r3, r0
 462 02fe 42F20F70 		movw	r0, #9999
 463 0302 8342     		cmp	r3, r0
 464 0304 06D8     		bhi	.L27
 482:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               break;
 465              		.loc 1 482 0
 466 0306 3423     		movs	r3, #52
 467 0308 03FB0242 		mla	r2, r3, r2, r4
 468 030c 0223     		movs	r3, #2
 469 030e 82F89030 		strb	r3, [r2, #144]
 483:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             }
 470              		.loc 1 483 0
 471 0312 AEE6     		b	.L7
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 20


 472              	.L27:
 487:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           USBH_UsrLog ("Additional Sense Code : %x", MSC_Handle->unit[MSC_Handle->current_lun].sens
 473              		.loc 1 487 0
 474 0314 3748     		ldr	r0, .L38+36
 475 0316 FFF7FEFF 		bl	printf
 476              	.LVL54:
 477 031a 0A20     		movs	r0, #10
 478 031c FFF7FEFF 		bl	putchar
 479              	.LVL55:
 488:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           USBH_UsrLog ("Additional Sense Code Qualifier: %x", MSC_Handle->unit[MSC_Handle->current_
 480              		.loc 1 488 0
 481 0320 B4F8F830 		ldrh	r3, [r4, #248]
 482 0324 3427     		movs	r7, #52
 483 0326 07FB0343 		mla	r3, r7, r3, r4
 484 032a 93F89D10 		ldrb	r1, [r3, #157]	@ zero_extendqisi2
 485 032e 3248     		ldr	r0, .L38+40
 486 0330 FFF7FEFF 		bl	printf
 487              	.LVL56:
 488 0334 0A20     		movs	r0, #10
 489 0336 FFF7FEFF 		bl	putchar
 490              	.LVL57:
 489:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_IDLE;
 491              		.loc 1 489 0
 492 033a B4F8F830 		ldrh	r3, [r4, #248]
 493 033e 07FB0343 		mla	r3, r7, r3, r4
 494 0342 93F89E10 		ldrb	r1, [r3, #158]	@ zero_extendqisi2
 495 0346 2D48     		ldr	r0, .L38+44
 496 0348 FFF7FEFF 		bl	printf
 497              	.LVL58:
 498 034c 0A20     		movs	r0, #10
 499 034e FFF7FEFF 		bl	putchar
 500              	.LVL59:
 490:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->current_lun++;
 501              		.loc 1 490 0
 502 0352 B4F8F830 		ldrh	r3, [r4, #248]
 503 0356 07FB0347 		mla	r7, r7, r3, r4
 504 035a 0122     		movs	r2, #1
 505 035c 87F89020 		strb	r2, [r7, #144]
 491:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 506              		.loc 1 491 0
 507 0360 1344     		add	r3, r3, r2
 508 0362 A4F8F830 		strh	r3, [r4, #248]	@ movhi
 509              	.L26:
 493:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 510              		.loc 1 493 0
 511 0366 022E     		cmp	r6, #2
 512 0368 0ED0     		beq	.L37
 500:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           {
 513              		.loc 1 500 0
 514 036a 042E     		cmp	r6, #4
 515 036c 7FF481AE 		bne	.L7
 502:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_ERROR;
 516              		.loc 1 502 0
 517 0370 B4F8F830 		ldrh	r3, [r4, #248]
 518 0374 3422     		movs	r2, #52
 519 0376 02FB0344 		mla	r4, r2, r3, r4
 520              	.LVL60:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 21


 521 037a 0123     		movs	r3, #1
 522 037c 84F89030 		strb	r3, [r4, #144]
 503:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           }
 523              		.loc 1 503 0
 524 0380 0223     		movs	r3, #2
 525 0382 84F89130 		strb	r3, [r4, #145]
 526 0386 74E6     		b	.L7
 527              	.LVL61:
 528              	.L37:
 495:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_UNRECOVERED_ERROR;
 529              		.loc 1 495 0
 530 0388 1648     		ldr	r0, .L38+20
 531 038a FFF7FEFF 		bl	printf
 532              	.LVL62:
 533 038e 0A20     		movs	r0, #10
 534 0390 FFF7FEFF 		bl	putchar
 535              	.LVL63:
 496:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 536              		.loc 1 496 0
 537 0394 B4F8F830 		ldrh	r3, [r4, #248]
 538 0398 3422     		movs	r2, #52
 539 039a 02FB0344 		mla	r4, r2, r3, r4
 540              	.LVL64:
 541 039e 0823     		movs	r3, #8
 542 03a0 84F89030 		strb	r3, [r4, #144]
 543 03a4 65E6     		b	.L7
 544              	.LVL65:
 545              	.L14:
 509:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         break;
 546              		.loc 1 509 0
 547 03a6 0131     		adds	r1, r1, #1
 548 03a8 A4F8F810 		strh	r1, [r4, #248]	@ movhi
 510:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 549              		.loc 1 510 0
 550 03ac 61E6     		b	.L7
 551              	.L6:
 522:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->state = MSC_IDLE;
 552              		.loc 1 522 0
 553 03ae 0022     		movs	r2, #0
 554 03b0 A4F8F820 		strh	r2, [r4, #248]	@ movhi
 523:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #if (USBH_USE_OS == 1U)
 555              		.loc 1 523 0
 556 03b4 0126     		movs	r6, #1
 557 03b6 2673     		strb	r6, [r4, #12]
 525:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #endif
 558              		.loc 1 525 0
 559 03b8 0421     		movs	r1, #4
 560 03ba D0F8CC03 		ldr	r0, [r0, #972]
 561              	.LVL66:
 562 03be FFF7FEFF 		bl	osMessagePut
 563              	.LVL67:
 527:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 564              		.loc 1 527 0
 565 03c2 D5F8C833 		ldr	r3, [r5, #968]
 566 03c6 0221     		movs	r1, #2
 567 03c8 2846     		mov	r0, r5
 568 03ca 9847     		blx	r3
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 22


 569              	.LVL68:
 352:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_StatusTypeDef scsi_status = USBH_BUSY ;
 570              		.loc 1 352 0
 571 03cc 3046     		mov	r0, r6
 572 03ce F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 573              	.LVL69:
 574              	.L39:
 575              		.align	2
 576              	.L38:
 577 03d0 00000000 		.word	.LC0
 578 03d4 0C000000 		.word	.LC1
 579 03d8 24000000 		.word	.LC2
 580 03dc 3C000000 		.word	.LC3
 581 03e0 54000000 		.word	.LC4
 582 03e4 68000000 		.word	.LC5
 583 03e8 80000000 		.word	.LC6
 584 03ec A0000000 		.word	.LC7
 585 03f0 B4000000 		.word	.LC8
 586 03f4 C8000000 		.word	.LC9
 587 03f8 D8000000 		.word	.LC10
 588 03fc F4000000 		.word	.LC11
 589              	.LVL70:
 590              	.L29:
 532:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     break;
 591              		.loc 1 532 0
 592 0400 0020     		movs	r0, #0
 593              	.LVL71:
 539:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 594              		.loc 1 539 0
 595 0402 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 596              		.cfi_endproc
 597              	.LFE144:
 599              		.section	.text.USBH_MSC_ClassRequest,"ax",%progbits
 600              		.align	1
 601              		.syntax unified
 602              		.thumb
 603              		.thumb_func
 604              		.fpu fpv5-sp-d16
 606              	USBH_MSC_ClassRequest:
 607              	.LFB143:
 294:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_HandleTypeDef *MSC_Handle =  (MSC_HandleTypeDef *) phost->pActiveClass->pData;
 608              		.loc 1 294 0
 609              		.cfi_startproc
 610              		@ args = 0, pretend = 0, frame = 0
 611              		@ frame_needed = 0, uses_anonymous_args = 0
 612              	.LVL72:
 613 0000 38B5     		push	{r3, r4, r5, lr}
 614              	.LCFI1:
 615              		.cfi_def_cfa_offset 16
 616              		.cfi_offset 3, -16
 617              		.cfi_offset 4, -12
 618              		.cfi_offset 5, -8
 619              		.cfi_offset 14, -4
 295:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_StatusTypeDef status = USBH_BUSY;
 620              		.loc 1 295 0
 621 0002 D0F87833 		ldr	r3, [r0, #888]
 622 0006 DC69     		ldr	r4, [r3, #28]
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 23


 623              	.LVL73:
 300:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 624              		.loc 1 300 0
 625 0008 A37B     		ldrb	r3, [r4, #14]	@ zero_extendqisi2
 626 000a 022B     		cmp	r3, #2
 627 000c 05D0     		beq	.L42
 628 000e 032B     		cmp	r3, #3
 629 0010 2DD0     		beq	.L43
 630 0012 13B1     		cbz	r3, .L42
 296:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   uint8_t i;
 631              		.loc 1 296 0
 632 0014 0125     		movs	r5, #1
 633              	.LVL74:
 634              	.L41:
 341:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 635              		.loc 1 341 0
 636 0016 2846     		mov	r0, r5
 637 0018 38BD     		pop	{r3, r4, r5, pc}
 638              	.LVL75:
 639              	.L42:
 305:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 640              		.loc 1 305 0
 641 001a 2146     		mov	r1, r4
 642 001c FFF7FEFF 		bl	USBH_MSC_BOT_REQ_GetMaxLUN
 643              	.LVL76:
 644 0020 0546     		mov	r5, r0
 645              	.LVL77:
 309:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 646              		.loc 1 309 0
 647 0022 0328     		cmp	r0, #3
 648 0024 0FD0     		beq	.L53
 649              	.LVL78:
 650              	.L44:
 315:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 651              		.loc 1 315 0
 652 0026 002D     		cmp	r5, #0
 653 0028 F5D1     		bne	.L41
 317:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       USBH_UsrLog ("Number of supported LUN: %lu", (int32_t)(MSC_Handle->max_lun));
 654              		.loc 1 317 0
 655 002a 2168     		ldr	r1, [r4]
 656 002c 0229     		cmp	r1, #2
 657 002e 0DD8     		bhi	.L49
 317:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       USBH_UsrLog ("Number of supported LUN: %lu", (int32_t)(MSC_Handle->max_lun));
 658              		.loc 1 317 0 is_stmt 0 discriminator 1
 659 0030 C9B2     		uxtb	r1, r1
 660 0032 0131     		adds	r1, r1, #1
 661              	.L45:
 317:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       USBH_UsrLog ("Number of supported LUN: %lu", (int32_t)(MSC_Handle->max_lun));
 662              		.loc 1 317 0 discriminator 4
 663 0034 2160     		str	r1, [r4]
 318:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 664              		.loc 1 318 0 is_stmt 1 discriminator 4
 665 0036 1348     		ldr	r0, .L54
 666 0038 FFF7FEFF 		bl	printf
 667              	.LVL79:
 668 003c 0A20     		movs	r0, #10
 669 003e FFF7FEFF 		bl	putchar
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 24


 670              	.LVL80:
 320:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       {
 671              		.loc 1 320 0 discriminator 4
 672 0042 0023     		movs	r3, #0
 673 0044 0FE0     		b	.L46
 674              	.LVL81:
 675              	.L53:
 311:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       status = USBH_OK;
 676              		.loc 1 311 0
 677 0046 0025     		movs	r5, #0
 678 0048 2560     		str	r5, [r4]
 679              	.LVL82:
 680 004a ECE7     		b	.L44
 681              	.LVL83:
 682              	.L49:
 317:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       USBH_UsrLog ("Number of supported LUN: %lu", (int32_t)(MSC_Handle->max_lun));
 683              		.loc 1 317 0
 684 004c 0221     		movs	r1, #2
 685 004e F1E7     		b	.L45
 686              	.LVL84:
 687              	.L47:
 322:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         MSC_Handle->unit[i].state_changed = 0U;
 688              		.loc 1 322 0 discriminator 3
 689 0050 3422     		movs	r2, #52
 690 0052 02FB0342 		mla	r2, r2, r3, r4
 691 0056 0221     		movs	r1, #2
 692 0058 82F89210 		strb	r1, [r2, #146]
 323:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       }
 693              		.loc 1 323 0 discriminator 3
 694 005c 0021     		movs	r1, #0
 695 005e 82F8C110 		strb	r1, [r2, #193]
 320:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       {
 696              		.loc 1 320 0 discriminator 3
 697 0062 0133     		adds	r3, r3, #1
 698              	.LVL85:
 699 0064 DBB2     		uxtb	r3, r3
 700              	.LVL86:
 701              	.L46:
 320:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       {
 702              		.loc 1 320 0 is_stmt 0 discriminator 1
 703 0066 2268     		ldr	r2, [r4]
 704 0068 9342     		cmp	r3, r2
 705 006a F1D3     		bcc	.L47
 706 006c D3E7     		b	.L41
 707              	.LVL87:
 708              	.L43:
 330:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 709              		.loc 1 330 0 is_stmt 1
 710 006e 0021     		movs	r1, #0
 711 0070 FFF7FEFF 		bl	USBH_ClrFeature
 712              	.LVL88:
 713 0074 18B9     		cbnz	r0, .L50
 332:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 714              		.loc 1 332 0
 715 0076 E37B     		ldrb	r3, [r4, #15]	@ zero_extendqisi2
 716 0078 A373     		strb	r3, [r4, #14]
 296:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   uint8_t i;
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 25


 717              		.loc 1 296 0
 718 007a 0125     		movs	r5, #1
 719 007c CBE7     		b	.L41
 720              	.L50:
 721 007e 0125     		movs	r5, #1
 722 0080 C9E7     		b	.L41
 723              	.L55:
 724 0082 00BF     		.align	2
 725              	.L54:
 726 0084 00000000 		.word	.LC12
 727              		.cfi_endproc
 728              	.LFE143:
 730              		.section	.text.USBH_MSC_InterfaceDeInit,"ax",%progbits
 731              		.align	1
 732              		.syntax unified
 733              		.thumb
 734              		.thumb_func
 735              		.fpu fpv5-sp-d16
 737              	USBH_MSC_InterfaceDeInit:
 738              	.LFB142:
 260:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_HandleTypeDef *MSC_Handle =  (MSC_HandleTypeDef *) phost->pActiveClass->pData;
 739              		.loc 1 260 0
 740              		.cfi_startproc
 741              		@ args = 0, pretend = 0, frame = 0
 742              		@ frame_needed = 0, uses_anonymous_args = 0
 743              	.LVL89:
 744 0000 38B5     		push	{r3, r4, r5, lr}
 745              	.LCFI2:
 746              		.cfi_def_cfa_offset 16
 747              		.cfi_offset 3, -16
 748              		.cfi_offset 4, -12
 749              		.cfi_offset 5, -8
 750              		.cfi_offset 14, -4
 751 0002 0446     		mov	r4, r0
 261:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 752              		.loc 1 261 0
 753 0004 D0F87833 		ldr	r3, [r0, #888]
 754 0008 DD69     		ldr	r5, [r3, #28]
 755              	.LVL90:
 263:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 756              		.loc 1 263 0
 757 000a 6979     		ldrb	r1, [r5, #5]	@ zero_extendqisi2
 758 000c 69B9     		cbnz	r1, .L61
 759              	.LVL91:
 760              	.L57:
 270:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 761              		.loc 1 270 0
 762 000e 2979     		ldrb	r1, [r5, #4]	@ zero_extendqisi2
 763 0010 A1B9     		cbnz	r1, .L62
 764              	.L58:
 277:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 765              		.loc 1 277 0
 766 0012 D4F87833 		ldr	r3, [r4, #888]
 767 0016 D869     		ldr	r0, [r3, #28]
 768 0018 28B1     		cbz	r0, .L59
 279:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     phost->pActiveClass->pData = 0;
 769              		.loc 1 279 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 26


 770 001a FFF7FEFF 		bl	free
 771              	.LVL92:
 280:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 772              		.loc 1 280 0
 773 001e D4F87833 		ldr	r3, [r4, #888]
 774 0022 0022     		movs	r2, #0
 775 0024 DA61     		str	r2, [r3, #28]
 776              	.L59:
 284:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 777              		.loc 1 284 0
 778 0026 0020     		movs	r0, #0
 779 0028 38BD     		pop	{r3, r4, r5, pc}
 780              	.LVL93:
 781              	.L61:
 265:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     USBH_FreePipe  (phost, MSC_Handle->OutPipe);
 782              		.loc 1 265 0
 783 002a FFF7FEFF 		bl	USBH_ClosePipe
 784              	.LVL94:
 266:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->OutPipe = 0U;     /* Reset the Channel as Free */
 785              		.loc 1 266 0
 786 002e 6979     		ldrb	r1, [r5, #5]	@ zero_extendqisi2
 787 0030 2046     		mov	r0, r4
 788 0032 FFF7FEFF 		bl	USBH_FreePipe
 789              	.LVL95:
 267:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 790              		.loc 1 267 0
 791 0036 0023     		movs	r3, #0
 792 0038 6B71     		strb	r3, [r5, #5]
 793 003a E8E7     		b	.L57
 794              	.L62:
 272:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     USBH_FreePipe  (phost, MSC_Handle->InPipe);
 795              		.loc 1 272 0
 796 003c 2046     		mov	r0, r4
 797 003e FFF7FEFF 		bl	USBH_ClosePipe
 798              	.LVL96:
 273:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->InPipe = 0U;     /* Reset the Channel as Free */
 799              		.loc 1 273 0
 800 0042 2979     		ldrb	r1, [r5, #4]	@ zero_extendqisi2
 801 0044 2046     		mov	r0, r4
 802 0046 FFF7FEFF 		bl	USBH_FreePipe
 803              	.LVL97:
 274:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 804              		.loc 1 274 0
 805 004a 0023     		movs	r3, #0
 806 004c 2B71     		strb	r3, [r5, #4]
 807 004e E0E7     		b	.L58
 808              		.cfi_endproc
 809              	.LFE142:
 811              		.section	.text.USBH_MSC_InterfaceInit,"ax",%progbits
 812              		.align	1
 813              		.syntax unified
 814              		.thumb
 815              		.thumb_func
 816              		.fpu fpv5-sp-d16
 818              	USBH_MSC_InterfaceInit:
 819              	.LFB141:
 175:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   uint8_t interface = 0U;
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 27


 820              		.loc 1 175 0
 821              		.cfi_startproc
 822              		@ args = 0, pretend = 0, frame = 0
 823              		@ frame_needed = 0, uses_anonymous_args = 0
 824              	.LVL98:
 825 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 826              	.LCFI3:
 827              		.cfi_def_cfa_offset 20
 828              		.cfi_offset 4, -20
 829              		.cfi_offset 5, -16
 830              		.cfi_offset 6, -12
 831              		.cfi_offset 7, -8
 832              		.cfi_offset 14, -4
 833 0002 85B0     		sub	sp, sp, #20
 834              	.LCFI4:
 835              		.cfi_def_cfa_offset 40
 836 0004 0446     		mov	r4, r0
 837              	.LVL99:
 180:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 838              		.loc 1 180 0
 839 0006 D0F87813 		ldr	r1, [r0, #888]
 840 000a 5023     		movs	r3, #80
 841 000c 0622     		movs	r2, #6
 842 000e 0979     		ldrb	r1, [r1, #4]	@ zero_extendqisi2
 843 0010 FFF7FEFF 		bl	USBH_FindInterface
 844              	.LVL100:
 182:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 845              		.loc 1 182 0
 846 0014 FF28     		cmp	r0, #255
 847 0016 76D0     		beq	.L71
 189:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 848              		.loc 1 189 0
 849 0018 0146     		mov	r1, r0
 850 001a 2046     		mov	r0, r4
 851              	.LVL101:
 852 001c FFF7FEFF 		bl	USBH_SelectInterface
 853              	.LVL102:
 191:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle =  (MSC_HandleTypeDef *) phost->pActiveClass->pData;
 854              		.loc 1 191 0
 855 0020 D4F87853 		ldr	r5, [r4, #888]
 856 0024 4FF48070 		mov	r0, #256
 857 0028 FFF7FEFF 		bl	malloc
 858              	.LVL103:
 859 002c E861     		str	r0, [r5, #28]
 192:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 860              		.loc 1 192 0
 861 002e D4F87833 		ldr	r3, [r4, #888]
 862 0032 DD69     		ldr	r5, [r3, #28]
 863              	.LVL104:
 194:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 864              		.loc 1 194 0
 865 0034 94F82033 		ldrb	r3, [r4, #800]	@ zero_extendqisi2
 866 0038 1A22     		movs	r2, #26
 867 003a 02FB0343 		mla	r3, r2, r3, r4
 868 003e 93F84A33 		ldrb	r3, [r3, #842]	@ zero_extendqisi2
 869 0042 13F0800F 		tst	r3, #128
 870 0046 6CD1     		bne	.L72
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 28


 201:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->OutEpSize  = phost->device.CfgDesc.Itf_Desc[phost->device.current_interface].Ep_D
 871              		.loc 1 201 0
 872 0048 AB71     		strb	r3, [r5, #6]
 202:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 873              		.loc 1 202 0
 874 004a 94F82033 		ldrb	r3, [r4, #800]	@ zero_extendqisi2
 875 004e 1A22     		movs	r2, #26
 876 0050 02FB0343 		mla	r3, r2, r3, r4
 877 0054 B3F84C33 		ldrh	r3, [r3, #844]
 878 0058 2B81     		strh	r3, [r5, #8]	@ movhi
 879              	.L67:
 205:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 880              		.loc 1 205 0
 881 005a 94F82033 		ldrb	r3, [r4, #800]	@ zero_extendqisi2
 882 005e 1A22     		movs	r2, #26
 883 0060 02FB0343 		mla	r3, r2, r3, r4
 884 0064 93F85233 		ldrb	r3, [r3, #850]	@ zero_extendqisi2
 885 0068 13F0800F 		tst	r3, #128
 886 006c 62D1     		bne	.L73
 212:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->OutEpSize  = phost->device.CfgDesc.Itf_Desc[phost->device.current_interface].Ep_D
 887              		.loc 1 212 0
 888 006e AB71     		strb	r3, [r5, #6]
 213:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 889              		.loc 1 213 0
 890 0070 94F82033 		ldrb	r3, [r4, #800]	@ zero_extendqisi2
 891 0074 1A22     		movs	r2, #26
 892 0076 02FB0343 		mla	r3, r2, r3, r4
 893 007a B3F85433 		ldrh	r3, [r3, #852]
 894 007e 2B81     		strh	r3, [r5, #8]	@ movhi
 895              	.L69:
 216:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->rw_lun = 0U;
 896              		.loc 1 216 0
 897 0080 0026     		movs	r6, #0
 898 0082 A5F8F860 		strh	r6, [r5, #248]	@ movhi
 217:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->state = MSC_INIT;
 899              		.loc 1 217 0
 900 0086 A5F8FA60 		strh	r6, [r5, #250]	@ movhi
 218:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->error = MSC_OK;
 901              		.loc 1 218 0
 902 008a 2E73     		strb	r6, [r5, #12]
 219:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->req_state = MSC_REQ_IDLE;
 903              		.loc 1 219 0
 904 008c 6E73     		strb	r6, [r5, #13]
 220:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->OutPipe = USBH_AllocPipe(phost, MSC_Handle->OutEp);
 905              		.loc 1 220 0
 906 008e AE73     		strb	r6, [r5, #14]
 221:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->InPipe = USBH_AllocPipe(phost, MSC_Handle->InEp);
 907              		.loc 1 221 0
 908 0090 A979     		ldrb	r1, [r5, #6]	@ zero_extendqisi2
 909 0092 2046     		mov	r0, r4
 910 0094 FFF7FEFF 		bl	USBH_AllocPipe
 911              	.LVL105:
 912 0098 6871     		strb	r0, [r5, #5]
 222:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 913              		.loc 1 222 0
 914 009a E979     		ldrb	r1, [r5, #7]	@ zero_extendqisi2
 915 009c 2046     		mov	r0, r4
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 29


 916 009e FFF7FEFF 		bl	USBH_AllocPipe
 917              	.LVL106:
 918 00a2 2871     		strb	r0, [r5, #4]
 224:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 919              		.loc 1 224 0
 920 00a4 2046     		mov	r0, r4
 921 00a6 FFF7FEFF 		bl	USBH_MSC_BOT_Init
 922              	.LVL107:
 227:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 923              		.loc 1 227 0
 924 00aa 6822     		movs	r2, #104
 925 00ac 3146     		mov	r1, r6
 926 00ae 05F19000 		add	r0, r5, #144
 927 00b2 FFF7FEFF 		bl	memset
 928              	.LVL108:
 230:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                     MSC_Handle->OutPipe,
 929              		.loc 1 230 0
 930 00b6 94F81C33 		ldrb	r3, [r4, #796]	@ zero_extendqisi2
 931 00ba AA79     		ldrb	r2, [r5, #6]	@ zero_extendqisi2
 932 00bc 6979     		ldrb	r1, [r5, #5]	@ zero_extendqisi2
 933 00be 2889     		ldrh	r0, [r5, #8]
 934 00c0 0290     		str	r0, [sp, #8]
 935 00c2 0227     		movs	r7, #2
 936 00c4 0197     		str	r7, [sp, #4]
 937 00c6 94F81D03 		ldrb	r0, [r4, #797]	@ zero_extendqisi2
 938 00ca 0090     		str	r0, [sp]
 939 00cc 2046     		mov	r0, r4
 940 00ce FFF7FEFF 		bl	USBH_OpenPipe
 941              	.LVL109:
 238:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                     MSC_Handle->InPipe,
 942              		.loc 1 238 0
 943 00d2 94F81C33 		ldrb	r3, [r4, #796]	@ zero_extendqisi2
 944 00d6 EA79     		ldrb	r2, [r5, #7]	@ zero_extendqisi2
 945 00d8 2979     		ldrb	r1, [r5, #4]	@ zero_extendqisi2
 946 00da 6889     		ldrh	r0, [r5, #10]
 947 00dc 0290     		str	r0, [sp, #8]
 948 00de 0197     		str	r7, [sp, #4]
 949 00e0 94F81D03 		ldrb	r0, [r4, #797]	@ zero_extendqisi2
 950 00e4 0090     		str	r0, [sp]
 951 00e6 2046     		mov	r0, r4
 952 00e8 FFF7FEFF 		bl	USBH_OpenPipe
 953              	.LVL110:
 246:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     USBH_LL_SetToggle (phost, MSC_Handle->OutPipe, 0U);
 954              		.loc 1 246 0
 955 00ec 3246     		mov	r2, r6
 956 00ee 2979     		ldrb	r1, [r5, #4]	@ zero_extendqisi2
 957 00f0 2046     		mov	r0, r4
 958 00f2 FFF7FEFF 		bl	USBH_LL_SetToggle
 959              	.LVL111:
 247:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     status = USBH_OK;
 960              		.loc 1 247 0
 961 00f6 3246     		mov	r2, r6
 962 00f8 6979     		ldrb	r1, [r5, #5]	@ zero_extendqisi2
 963 00fa 2046     		mov	r0, r4
 964 00fc FFF7FEFF 		bl	USBH_LL_SetToggle
 965              	.LVL112:
 248:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 30


 966              		.loc 1 248 0
 967 0100 3046     		mov	r0, r6
 968              	.LVL113:
 969              	.L65:
 251:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 970              		.loc 1 251 0
 971 0102 05B0     		add	sp, sp, #20
 972              	.LCFI5:
 973              		.cfi_remember_state
 974              		.cfi_def_cfa_offset 20
 975              		@ sp needed
 976 0104 F0BD     		pop	{r4, r5, r6, r7, pc}
 977              	.LVL114:
 978              	.L71:
 979              	.LCFI6:
 980              		.cfi_restore_state
 184:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     status = USBH_FAIL;
 981              		.loc 1 184 0
 982 0106 1048     		ldr	r0, .L74
 983              	.LVL115:
 984 0108 FFF7FEFF 		bl	printf
 985              	.LVL116:
 986 010c D4F87833 		ldr	r3, [r4, #888]
 987 0110 1968     		ldr	r1, [r3]
 988 0112 0E48     		ldr	r0, .L74+4
 989 0114 FFF7FEFF 		bl	printf
 990              	.LVL117:
 991 0118 0A20     		movs	r0, #10
 992 011a FFF7FEFF 		bl	putchar
 993              	.LVL118:
 185:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 994              		.loc 1 185 0
 995 011e 0220     		movs	r0, #2
 996 0120 EFE7     		b	.L65
 997              	.LVL119:
 998              	.L72:
 196:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->InEpSize  = phost->device.CfgDesc.Itf_Desc[phost->device.current_interface].Ep_De
 999              		.loc 1 196 0
 1000 0122 EB71     		strb	r3, [r5, #7]
 197:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 1001              		.loc 1 197 0
 1002 0124 94F82033 		ldrb	r3, [r4, #800]	@ zero_extendqisi2
 1003 0128 02FB0343 		mla	r3, r2, r3, r4
 1004 012c B3F84C33 		ldrh	r3, [r3, #844]
 1005 0130 6B81     		strh	r3, [r5, #10]	@ movhi
 1006 0132 92E7     		b	.L67
 1007              	.L73:
 207:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->InEpSize  = phost->device.CfgDesc.Itf_Desc[phost->device.current_interface].Ep_De
 1008              		.loc 1 207 0
 1009 0134 EB71     		strb	r3, [r5, #7]
 208:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 1010              		.loc 1 208 0
 1011 0136 94F82033 		ldrb	r3, [r4, #800]	@ zero_extendqisi2
 1012 013a 02FB0343 		mla	r3, r2, r3, r4
 1013 013e B3F85433 		ldrh	r3, [r3, #852]
 1014 0142 6B81     		strh	r3, [r5, #10]	@ movhi
 1015 0144 9CE7     		b	.L69
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 31


 1016              	.L75:
 1017 0146 00BF     		.align	2
 1018              	.L74:
 1019 0148 00000000 		.word	.LC13
 1020 014c 0C000000 		.word	.LC14
 1021              		.cfi_endproc
 1022              	.LFE141:
 1024              		.section	.text.USBH_MSC_RdWrProcess,"ax",%progbits
 1025              		.align	1
 1026              		.syntax unified
 1027              		.thumb
 1028              		.thumb_func
 1029              		.fpu fpv5-sp-d16
 1031              	USBH_MSC_RdWrProcess:
 1032              	.LFB146:
 553:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
 554:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @brief  USBH_MSC_RdWrProcess
 555:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *         The function is for managing state machine for MSC I/O Process
 556:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  phost: Host handle
 557:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  lun: logical Unit Number
 558:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @retval USBH Status
 559:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 560:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** static USBH_StatusTypeDef USBH_MSC_RdWrProcess(USBH_HandleTypeDef *phost, uint8_t lun)
 561:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** {
 1033              		.loc 1 561 0
 1034              		.cfi_startproc
 1035              		@ args = 0, pretend = 0, frame = 0
 1036              		@ frame_needed = 0, uses_anonymous_args = 0
 1037              	.LVL120:
 1038 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 1039              	.LCFI7:
 1040              		.cfi_def_cfa_offset 28
 1041              		.cfi_offset 4, -28
 1042              		.cfi_offset 5, -24
 1043              		.cfi_offset 6, -20
 1044              		.cfi_offset 7, -16
 1045              		.cfi_offset 8, -12
 1046              		.cfi_offset 9, -8
 1047              		.cfi_offset 14, -4
 1048 0004 83B0     		sub	sp, sp, #12
 1049              	.LCFI8:
 1050              		.cfi_def_cfa_offset 40
 1051 0006 0546     		mov	r5, r0
 1052 0008 0C46     		mov	r4, r1
 562:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_HandleTypeDef *MSC_Handle =  (MSC_HandleTypeDef *) phost->pActiveClass->pData;
 1053              		.loc 1 562 0
 1054 000a D0F87833 		ldr	r3, [r0, #888]
 1055 000e DF69     		ldr	r7, [r3, #28]
 1056              	.LVL121:
 563:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_StatusTypeDef error = USBH_BUSY ;
 564:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_StatusTypeDef scsi_status = USBH_BUSY ;
 565:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 566:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   /* Switch MSC REQ state machine */
 567:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   switch (MSC_Handle->unit[lun].state)
 1057              		.loc 1 567 0
 1058 0010 3423     		movs	r3, #52
 1059 0012 03FB0173 		mla	r3, r3, r1, r7
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 32


 1060 0016 93F89030 		ldrb	r3, [r3, #144]	@ zero_extendqisi2
 1061 001a 062B     		cmp	r3, #6
 1062 001c 05D0     		beq	.L78
 1063 001e 072B     		cmp	r3, #7
 1064 0020 30D0     		beq	.L79
 1065 0022 052B     		cmp	r3, #5
 1066 0024 58D0     		beq	.L96
 563:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_StatusTypeDef error = USBH_BUSY ;
 1067              		.loc 1 563 0
 1068 0026 0126     		movs	r6, #1
 1069 0028 12E0     		b	.L77
 1070              	.L78:
 568:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 569:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 570:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   case MSC_READ:
 571:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     scsi_status = USBH_MSC_SCSI_Read(phost,lun, 0U, NULL, 0U);
 1071              		.loc 1 571 0
 1072 002a 0022     		movs	r2, #0
 1073 002c 0092     		str	r2, [sp]
 1074 002e 1346     		mov	r3, r2
 1075 0030 FFF7FEFF 		bl	USBH_MSC_SCSI_Read
 1076              	.LVL122:
 572:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 573:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     if(scsi_status == USBH_OK)
 1077              		.loc 1 573 0
 1078 0034 0646     		mov	r6, r0
 1079 0036 78B9     		cbnz	r0, .L81
 574:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 575:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->unit[lun].state = MSC_IDLE;
 1080              		.loc 1 575 0
 1081 0038 3423     		movs	r3, #52
 1082 003a 03FB0474 		mla	r4, r3, r4, r7
 1083 003e 0123     		movs	r3, #1
 1084 0040 84F89030 		strb	r3, [r4, #144]
 1085              	.LVL123:
 1086              	.L82:
 576:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       error = USBH_OK;
 577:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 578:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     else if( scsi_status == USBH_FAIL)
 579:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 580:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->unit[lun].state = MSC_REQUEST_SENSE;
 581:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 582:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     else
 583:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 584:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       if(scsi_status == USBH_UNRECOVERED_ERROR)
 585:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       {
 586:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         MSC_Handle->unit[lun].state = MSC_UNRECOVERED_ERROR;
 587:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         error = USBH_FAIL;
 588:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       }
 589:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 590:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #if (USBH_USE_OS == 1U)
 591:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     osMessagePut ( phost->os_event, USBH_CLASS_EVENT, 0U);
 1087              		.loc 1 591 0
 1088 0044 0022     		movs	r2, #0
 1089 0046 0421     		movs	r1, #4
 1090 0048 D5F8CC03 		ldr	r0, [r5, #972]
 1091              	.LVL124:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 33


 1092 004c FFF7FEFF 		bl	osMessagePut
 1093              	.LVL125:
 1094              	.L77:
 592:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #endif
 593:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     break;
 594:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 595:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   case MSC_WRITE:
 596:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     scsi_status = USBH_MSC_SCSI_Write(phost,lun, 0U, NULL, 0U);
 597:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 598:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     if(scsi_status == USBH_OK)
 599:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 600:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         MSC_Handle->unit[lun].state = MSC_IDLE;
 601:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         error = USBH_OK;
 602:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 603:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     else if( scsi_status == USBH_FAIL)
 604:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 605:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->unit[lun].state = MSC_REQUEST_SENSE;
 606:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 607:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     else
 608:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 609:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       if(scsi_status == USBH_UNRECOVERED_ERROR)
 610:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       {
 611:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         MSC_Handle->unit[lun].state = MSC_UNRECOVERED_ERROR;
 612:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         error = USBH_FAIL;
 613:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       }
 614:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 615:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #if (USBH_USE_OS == 1U)
 616:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     osMessagePut ( phost->os_event, USBH_CLASS_EVENT, 0U);
 617:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #endif
 618:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     break;
 619:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 620:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   case MSC_REQUEST_SENSE:
 621:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     scsi_status = USBH_MSC_SCSI_RequestSense(phost, lun, &MSC_Handle->unit[lun].sense);
 622:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 623:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     if(scsi_status == USBH_OK)
 624:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 625:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       USBH_UsrLog ("Sense Key  : %x", MSC_Handle->unit[lun].sense.key);
 626:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       USBH_UsrLog ("Additional Sense Code : %x", MSC_Handle->unit[lun].sense.asc);
 627:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       USBH_UsrLog ("Additional Sense Code Qualifier: %x", MSC_Handle->unit[lun].sense.ascq);
 628:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->unit[lun].state = MSC_IDLE;
 629:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->unit[lun].error = MSC_ERROR;
 630:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 631:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       error = USBH_FAIL;
 632:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 633:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     if(scsi_status == USBH_FAIL)
 634:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 635:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       USBH_UsrLog ("MSC Device NOT ready");
 636:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 637:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     else
 638:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 639:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       if(scsi_status == USBH_UNRECOVERED_ERROR)
 640:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       {
 641:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         MSC_Handle->unit[lun].state = MSC_UNRECOVERED_ERROR;
 642:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         error = USBH_FAIL;
 643:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       }
 644:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 645:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #if (USBH_USE_OS == 1U)
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 34


 646:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     osMessagePut ( phost->os_event, USBH_CLASS_EVENT, 0U);
 647:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #endif
 648:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     break;
 649:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 650:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   default:
 651:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     break;
 652:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 653:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 654:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   return error;
 655:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** }
 1095              		.loc 1 655 0
 1096 0050 3046     		mov	r0, r6
 1097 0052 03B0     		add	sp, sp, #12
 1098              	.LCFI9:
 1099              		.cfi_remember_state
 1100              		.cfi_def_cfa_offset 28
 1101              		@ sp needed
 1102 0054 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 1103              	.LVL126:
 1104              	.L81:
 1105              	.LCFI10:
 1106              		.cfi_restore_state
 578:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 1107              		.loc 1 578 0
 1108 0058 0228     		cmp	r0, #2
 1109 005a 03D0     		beq	.L97
 584:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       {
 1110              		.loc 1 584 0
 1111 005c 0428     		cmp	r0, #4
 1112 005e 09D0     		beq	.L98
 563:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_StatusTypeDef scsi_status = USBH_BUSY ;
 1113              		.loc 1 563 0
 1114 0060 0126     		movs	r6, #1
 1115 0062 EFE7     		b	.L82
 1116              	.L97:
 580:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 1117              		.loc 1 580 0
 1118 0064 3423     		movs	r3, #52
 1119 0066 03FB0474 		mla	r4, r3, r4, r7
 1120 006a 0523     		movs	r3, #5
 1121 006c 84F89030 		strb	r3, [r4, #144]
 563:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_StatusTypeDef scsi_status = USBH_BUSY ;
 1122              		.loc 1 563 0
 1123 0070 0126     		movs	r6, #1
 1124 0072 E7E7     		b	.L82
 1125              	.L98:
 586:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         error = USBH_FAIL;
 1126              		.loc 1 586 0
 1127 0074 3423     		movs	r3, #52
 1128 0076 03FB0474 		mla	r4, r3, r4, r7
 1129 007a 0823     		movs	r3, #8
 1130 007c 84F89030 		strb	r3, [r4, #144]
 1131              	.LVL127:
 587:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       }
 1132              		.loc 1 587 0
 1133 0080 0226     		movs	r6, #2
 1134 0082 DFE7     		b	.L82
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 35


 1135              	.LVL128:
 1136              	.L79:
 596:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 1137              		.loc 1 596 0
 1138 0084 0022     		movs	r2, #0
 1139 0086 0092     		str	r2, [sp]
 1140 0088 1346     		mov	r3, r2
 1141 008a FFF7FEFF 		bl	USBH_MSC_SCSI_Write
 1142              	.LVL129:
 598:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 1143              		.loc 1 598 0
 1144 008e 0646     		mov	r6, r0
 1145 0090 60B9     		cbnz	r0, .L84
 600:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         error = USBH_OK;
 1146              		.loc 1 600 0
 1147 0092 3423     		movs	r3, #52
 1148 0094 03FB0474 		mla	r4, r3, r4, r7
 1149 0098 0123     		movs	r3, #1
 1150 009a 84F89030 		strb	r3, [r4, #144]
 1151              	.LVL130:
 1152              	.L85:
 616:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #endif
 1153              		.loc 1 616 0
 1154 009e 0022     		movs	r2, #0
 1155 00a0 0421     		movs	r1, #4
 1156 00a2 D5F8CC03 		ldr	r0, [r5, #972]
 1157              	.LVL131:
 1158 00a6 FFF7FEFF 		bl	osMessagePut
 1159              	.LVL132:
 618:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 1160              		.loc 1 618 0
 1161 00aa D1E7     		b	.L77
 1162              	.LVL133:
 1163              	.L84:
 603:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 1164              		.loc 1 603 0
 1165 00ac 0228     		cmp	r0, #2
 1166 00ae 03D0     		beq	.L99
 609:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       {
 1167              		.loc 1 609 0
 1168 00b0 0428     		cmp	r0, #4
 1169 00b2 09D0     		beq	.L100
 563:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_StatusTypeDef scsi_status = USBH_BUSY ;
 1170              		.loc 1 563 0
 1171 00b4 0126     		movs	r6, #1
 1172 00b6 F2E7     		b	.L85
 1173              	.L99:
 605:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 1174              		.loc 1 605 0
 1175 00b8 3423     		movs	r3, #52
 1176 00ba 03FB0474 		mla	r4, r3, r4, r7
 1177 00be 0523     		movs	r3, #5
 1178 00c0 84F89030 		strb	r3, [r4, #144]
 563:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_StatusTypeDef scsi_status = USBH_BUSY ;
 1179              		.loc 1 563 0
 1180 00c4 0126     		movs	r6, #1
 1181 00c6 EAE7     		b	.L85
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 36


 1182              	.L100:
 611:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         error = USBH_FAIL;
 1183              		.loc 1 611 0
 1184 00c8 3423     		movs	r3, #52
 1185 00ca 03FB0474 		mla	r4, r3, r4, r7
 1186 00ce 0823     		movs	r3, #8
 1187 00d0 84F89030 		strb	r3, [r4, #144]
 1188              	.LVL134:
 612:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       }
 1189              		.loc 1 612 0
 1190 00d4 0226     		movs	r6, #2
 1191 00d6 E2E7     		b	.L85
 1192              	.LVL135:
 1193              	.L96:
 621:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 1194              		.loc 1 621 0
 1195 00d8 3422     		movs	r2, #52
 1196 00da 02FB01F2 		mul	r2, r2, r1
 1197 00de 9832     		adds	r2, r2, #152
 1198 00e0 3A44     		add	r2, r2, r7
 1199 00e2 0432     		adds	r2, r2, #4
 1200 00e4 FFF7FEFF 		bl	USBH_MSC_SCSI_RequestSense
 1201              	.LVL136:
 623:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 1202              		.loc 1 623 0
 1203 00e8 8046     		mov	r8, r0
 1204 00ea 68B1     		cbz	r0, .L101
 563:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_StatusTypeDef scsi_status = USBH_BUSY ;
 1205              		.loc 1 563 0
 1206 00ec 0126     		movs	r6, #1
 1207              	.LVL137:
 1208              	.L87:
 633:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 1209              		.loc 1 633 0
 1210 00ee B8F1020F 		cmp	r8, #2
 1211 00f2 2CD0     		beq	.L102
 639:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       {
 1212              		.loc 1 639 0
 1213 00f4 B8F1040F 		cmp	r8, #4
 1214 00f8 30D0     		beq	.L103
 1215              	.LVL138:
 1216              	.L89:
 646:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #endif
 1217              		.loc 1 646 0
 1218 00fa 0022     		movs	r2, #0
 1219 00fc 0421     		movs	r1, #4
 1220 00fe D5F8CC03 		ldr	r0, [r5, #972]
 1221 0102 FFF7FEFF 		bl	osMessagePut
 1222              	.LVL139:
 648:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 1223              		.loc 1 648 0
 1224 0106 A3E7     		b	.L77
 1225              	.LVL140:
 1226              	.L101:
 625:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       USBH_UsrLog ("Additional Sense Code : %x", MSC_Handle->unit[lun].sense.asc);
 1227              		.loc 1 625 0
 1228 0108 4FF03409 		mov	r9, #52
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 37


 1229 010c 09FB0479 		mla	r9, r9, r4, r7
 1230 0110 99F89C10 		ldrb	r1, [r9, #156]	@ zero_extendqisi2
 1231 0114 1548     		ldr	r0, .L104
 1232              	.LVL141:
 1233 0116 FFF7FEFF 		bl	printf
 1234              	.LVL142:
 1235 011a 0A20     		movs	r0, #10
 1236 011c FFF7FEFF 		bl	putchar
 1237              	.LVL143:
 626:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       USBH_UsrLog ("Additional Sense Code Qualifier: %x", MSC_Handle->unit[lun].sense.ascq);
 1238              		.loc 1 626 0
 1239 0120 99F89D10 		ldrb	r1, [r9, #157]	@ zero_extendqisi2
 1240 0124 1248     		ldr	r0, .L104+4
 1241 0126 FFF7FEFF 		bl	printf
 1242              	.LVL144:
 1243 012a 0A20     		movs	r0, #10
 1244 012c FFF7FEFF 		bl	putchar
 1245              	.LVL145:
 627:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->unit[lun].state = MSC_IDLE;
 1246              		.loc 1 627 0
 1247 0130 99F89E10 		ldrb	r1, [r9, #158]	@ zero_extendqisi2
 1248 0134 0F48     		ldr	r0, .L104+8
 1249 0136 FFF7FEFF 		bl	printf
 1250              	.LVL146:
 1251 013a 0A20     		movs	r0, #10
 1252 013c FFF7FEFF 		bl	putchar
 1253              	.LVL147:
 628:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->unit[lun].error = MSC_ERROR;
 1254              		.loc 1 628 0
 1255 0140 0123     		movs	r3, #1
 1256 0142 89F89030 		strb	r3, [r9, #144]
 629:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 1257              		.loc 1 629 0
 1258 0146 0226     		movs	r6, #2
 1259 0148 89F89160 		strb	r6, [r9, #145]
 1260              	.LVL148:
 1261 014c CFE7     		b	.L87
 1262              	.LVL149:
 1263              	.L102:
 635:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 1264              		.loc 1 635 0
 1265 014e 0A48     		ldr	r0, .L104+12
 1266 0150 FFF7FEFF 		bl	printf
 1267              	.LVL150:
 1268 0154 0A20     		movs	r0, #10
 1269 0156 FFF7FEFF 		bl	putchar
 1270              	.LVL151:
 1271 015a CEE7     		b	.L89
 1272              	.L103:
 641:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         error = USBH_FAIL;
 1273              		.loc 1 641 0
 1274 015c 3423     		movs	r3, #52
 1275 015e 03FB0474 		mla	r4, r3, r4, r7
 1276 0162 0823     		movs	r3, #8
 1277 0164 84F89030 		strb	r3, [r4, #144]
 1278              	.LVL152:
 642:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       }
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 38


 1279              		.loc 1 642 0
 1280 0168 0226     		movs	r6, #2
 1281 016a C6E7     		b	.L89
 1282              	.L105:
 1283              		.align	2
 1284              	.L104:
 1285 016c C8000000 		.word	.LC9
 1286 0170 D8000000 		.word	.LC10
 1287 0174 F4000000 		.word	.LC11
 1288 0178 68000000 		.word	.LC5
 1289              		.cfi_endproc
 1290              	.LFE146:
 1292              		.section	.text.USBH_MSC_IsReady,"ax",%progbits
 1293              		.align	1
 1294              		.global	USBH_MSC_IsReady
 1295              		.syntax unified
 1296              		.thumb
 1297              		.thumb_func
 1298              		.fpu fpv5-sp-d16
 1300              	USBH_MSC_IsReady:
 1301              	.LFB147:
 656:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 657:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
 658:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @brief  USBH_MSC_IsReady
 659:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *         The function check if the MSC function is ready
 660:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  phost: Host handle
 661:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @retval USBH Status
 662:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 663:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** uint8_t  USBH_MSC_IsReady (USBH_HandleTypeDef *phost)
 664:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** {
 1302              		.loc 1 664 0
 1303              		.cfi_startproc
 1304              		@ args = 0, pretend = 0, frame = 0
 1305              		@ frame_needed = 0, uses_anonymous_args = 0
 1306              		@ link register save eliminated.
 1307              	.LVL153:
 665:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_HandleTypeDef *MSC_Handle = (MSC_HandleTypeDef *) phost->pActiveClass->pData;
 1308              		.loc 1 665 0
 1309 0000 D0F87833 		ldr	r3, [r0, #888]
 1310 0004 DA69     		ldr	r2, [r3, #28]
 1311              	.LVL154:
 666:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   uint8_t res;
 667:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 668:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   if ((phost->gState == HOST_CLASS) && (MSC_Handle->state == MSC_IDLE))
 1312              		.loc 1 668 0
 1313 0006 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 1314 0008 DBB2     		uxtb	r3, r3
 1315 000a 0B2B     		cmp	r3, #11
 1316 000c 01D0     		beq	.L110
 669:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 670:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     res = 1U;
 671:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 672:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   else
 673:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 674:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     res = 0U;
 1317              		.loc 1 674 0
 1318 000e 0020     		movs	r0, #0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 39


 1319              	.LVL155:
 1320 0010 7047     		bx	lr
 1321              	.LVL156:
 1322              	.L110:
 668:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 1323              		.loc 1 668 0 discriminator 1
 1324 0012 137B     		ldrb	r3, [r2, #12]	@ zero_extendqisi2
 1325 0014 012B     		cmp	r3, #1
 1326 0016 01D0     		beq	.L109
 1327              		.loc 1 674 0
 1328 0018 0020     		movs	r0, #0
 1329              	.LVL157:
 1330 001a 7047     		bx	lr
 1331              	.LVL158:
 1332              	.L109:
 670:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 1333              		.loc 1 670 0
 1334 001c 0120     		movs	r0, #1
 1335              	.LVL159:
 675:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 676:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 677:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   return res;
 678:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** }
 1336              		.loc 1 678 0
 1337 001e 7047     		bx	lr
 1338              		.cfi_endproc
 1339              	.LFE147:
 1341              		.section	.text.USBH_MSC_GetMaxLUN,"ax",%progbits
 1342              		.align	1
 1343              		.global	USBH_MSC_GetMaxLUN
 1344              		.syntax unified
 1345              		.thumb
 1346              		.thumb_func
 1347              		.fpu fpv5-sp-d16
 1349              	USBH_MSC_GetMaxLUN:
 1350              	.LFB148:
 679:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 680:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
 681:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @brief  USBH_MSC_GetMaxLUN
 682:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *         The function return the Max LUN supported
 683:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  phost: Host handle
 684:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @retval logical Unit Number supported
 685:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 686:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** uint8_t  USBH_MSC_GetMaxLUN (USBH_HandleTypeDef *phost)
 687:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** {
 1351              		.loc 1 687 0
 1352              		.cfi_startproc
 1353              		@ args = 0, pretend = 0, frame = 0
 1354              		@ frame_needed = 0, uses_anonymous_args = 0
 1355              		@ link register save eliminated.
 1356              	.LVL160:
 688:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_HandleTypeDef *MSC_Handle =  (MSC_HandleTypeDef *) phost->pActiveClass->pData;
 1357              		.loc 1 688 0
 1358 0000 D0F87833 		ldr	r3, [r0, #888]
 1359 0004 DA69     		ldr	r2, [r3, #28]
 1360              	.LVL161:
 689:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 40


 690:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   if ((phost->gState == HOST_CLASS) && (MSC_Handle->state == MSC_IDLE))
 1361              		.loc 1 690 0
 1362 0006 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 1363 0008 DBB2     		uxtb	r3, r3
 1364 000a 0B2B     		cmp	r3, #11
 1365 000c 01D0     		beq	.L115
 691:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 692:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     return  (uint8_t)MSC_Handle->max_lun;
 693:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 694:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 695:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   return 0xFFU;
 1366              		.loc 1 695 0
 1367 000e FF20     		movs	r0, #255
 1368              	.LVL162:
 1369 0010 7047     		bx	lr
 1370              	.LVL163:
 1371              	.L115:
 690:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 1372              		.loc 1 690 0 discriminator 1
 1373 0012 137B     		ldrb	r3, [r2, #12]	@ zero_extendqisi2
 1374 0014 012B     		cmp	r3, #1
 1375 0016 01D0     		beq	.L116
 1376              		.loc 1 695 0
 1377 0018 FF20     		movs	r0, #255
 1378              	.LVL164:
 696:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** }
 1379              		.loc 1 696 0
 1380 001a 7047     		bx	lr
 1381              	.LVL165:
 1382              	.L116:
 692:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 1383              		.loc 1 692 0
 1384 001c 1078     		ldrb	r0, [r2]	@ zero_extendqisi2
 1385              	.LVL166:
 1386 001e 7047     		bx	lr
 1387              		.cfi_endproc
 1388              	.LFE148:
 1390              		.section	.text.USBH_MSC_UnitIsReady,"ax",%progbits
 1391              		.align	1
 1392              		.global	USBH_MSC_UnitIsReady
 1393              		.syntax unified
 1394              		.thumb
 1395              		.thumb_func
 1396              		.fpu fpv5-sp-d16
 1398              	USBH_MSC_UnitIsReady:
 1399              	.LFB149:
 697:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 698:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
 699:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @brief  USBH_MSC_UnitIsReady
 700:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *         The function check whether a LUN is ready
 701:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  phost: Host handle
 702:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  lun: logical Unit Number
 703:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @retval Lun status (0: not ready / 1: ready)
 704:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 705:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** uint8_t  USBH_MSC_UnitIsReady (USBH_HandleTypeDef *phost, uint8_t lun)
 706:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** {
 1400              		.loc 1 706 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 41


 1401              		.cfi_startproc
 1402              		@ args = 0, pretend = 0, frame = 0
 1403              		@ frame_needed = 0, uses_anonymous_args = 0
 1404              		@ link register save eliminated.
 1405              	.LVL167:
 707:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_HandleTypeDef *MSC_Handle =  (MSC_HandleTypeDef *) phost->pActiveClass->pData;
 1406              		.loc 1 707 0
 1407 0000 D0F87833 		ldr	r3, [r0, #888]
 1408 0004 DA69     		ldr	r2, [r3, #28]
 1409              	.LVL168:
 708:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   uint8_t res;
 709:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 710:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   if ((phost->gState == HOST_CLASS) && (MSC_Handle->unit[lun].error == MSC_OK))
 1410              		.loc 1 710 0
 1411 0006 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 1412 0008 DBB2     		uxtb	r3, r3
 1413 000a 0B2B     		cmp	r3, #11
 1414 000c 01D0     		beq	.L121
 711:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 712:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     res = 1U;
 713:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 714:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   else
 715:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 716:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     res = 0U;
 1415              		.loc 1 716 0
 1416 000e 0020     		movs	r0, #0
 1417              	.LVL169:
 1418 0010 7047     		bx	lr
 1419              	.LVL170:
 1420              	.L121:
 710:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 1421              		.loc 1 710 0 discriminator 1
 1422 0012 3423     		movs	r3, #52
 1423 0014 03FB0121 		mla	r1, r3, r1, r2
 1424              	.LVL171:
 1425 0018 91F89130 		ldrb	r3, [r1, #145]	@ zero_extendqisi2
 1426 001c 0BB1     		cbz	r3, .L120
 1427              		.loc 1 716 0
 1428 001e 0020     		movs	r0, #0
 1429              	.LVL172:
 1430 0020 7047     		bx	lr
 1431              	.LVL173:
 1432              	.L120:
 712:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 1433              		.loc 1 712 0
 1434 0022 0120     		movs	r0, #1
 1435              	.LVL174:
 717:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 718:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 719:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   return res;
 720:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** }
 1436              		.loc 1 720 0
 1437 0024 7047     		bx	lr
 1438              		.cfi_endproc
 1439              	.LFE149:
 1441              		.section	.text.USBH_MSC_GetLUNInfo,"ax",%progbits
 1442              		.align	1
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 42


 1443              		.global	USBH_MSC_GetLUNInfo
 1444              		.syntax unified
 1445              		.thumb
 1446              		.thumb_func
 1447              		.fpu fpv5-sp-d16
 1449              	USBH_MSC_GetLUNInfo:
 1450              	.LFB150:
 721:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 722:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
 723:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @brief  USBH_MSC_GetLUNInfo
 724:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *         The function return a LUN information
 725:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  phost: Host handle
 726:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  lun: logical Unit Number
 727:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @retval USBH Status
 728:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 729:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** USBH_StatusTypeDef USBH_MSC_GetLUNInfo(USBH_HandleTypeDef *phost, uint8_t lun, MSC_LUNTypeDef *info
 730:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** {
 1451              		.loc 1 730 0
 1452              		.cfi_startproc
 1453              		@ args = 0, pretend = 0, frame = 0
 1454              		@ frame_needed = 0, uses_anonymous_args = 0
 1455              		@ link register save eliminated.
 1456              	.LVL175:
 1457 0000 70B4     		push	{r4, r5, r6}
 1458              	.LCFI11:
 1459              		.cfi_def_cfa_offset 12
 1460              		.cfi_offset 4, -12
 1461              		.cfi_offset 5, -8
 1462              		.cfi_offset 6, -4
 731:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_HandleTypeDef *MSC_Handle =  (MSC_HandleTypeDef *) phost->pActiveClass->pData;
 1463              		.loc 1 731 0
 1464 0002 D0F87833 		ldr	r3, [r0, #888]
 1465 0006 DC69     		ldr	r4, [r3, #28]
 1466              	.LVL176:
 732:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   if(phost->gState == HOST_CLASS)
 1467              		.loc 1 732 0
 1468 0008 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 1469 000a DBB2     		uxtb	r3, r3
 1470 000c 0B2B     		cmp	r3, #11
 1471 000e 02D0     		beq	.L127
 733:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 734:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     USBH_memcpy(info,&MSC_Handle->unit[lun], sizeof(MSC_LUNTypeDef));
 735:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     return USBH_OK;
 736:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 737:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   else
 738:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 739:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     return USBH_FAIL;
 1472              		.loc 1 739 0
 1473 0010 0220     		movs	r0, #2
 1474              	.LVL177:
 1475              	.L123:
 740:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 741:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** }
 1476              		.loc 1 741 0
 1477 0012 70BC     		pop	{r4, r5, r6}
 1478              	.LCFI12:
 1479              		.cfi_remember_state
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 43


 1480              		.cfi_restore 6
 1481              		.cfi_restore 5
 1482              		.cfi_restore 4
 1483              		.cfi_def_cfa_offset 0
 1484 0014 7047     		bx	lr
 1485              	.LVL178:
 1486              	.L127:
 1487              	.LCFI13:
 1488              		.cfi_restore_state
 734:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     return USBH_OK;
 1489              		.loc 1 734 0
 1490 0016 3423     		movs	r3, #52
 1491 0018 03FB01F1 		mul	r1, r3, r1
 1492              	.LVL179:
 1493 001c 9031     		adds	r1, r1, #144
 1494 001e 0C44     		add	r4, r4, r1
 1495              	.LVL180:
 1496 0020 04F13003 		add	r3, r4, #48
 1497              	.LVL181:
 1498              	.L124:
 1499 0024 2668     		ldr	r6, [r4]	@ unaligned
 1500 0026 6568     		ldr	r5, [r4, #4]	@ unaligned
 1501 0028 A068     		ldr	r0, [r4, #8]	@ unaligned
 1502 002a E168     		ldr	r1, [r4, #12]	@ unaligned
 1503 002c 1660     		str	r6, [r2]	@ unaligned
 1504 002e 5560     		str	r5, [r2, #4]	@ unaligned
 1505 0030 9060     		str	r0, [r2, #8]	@ unaligned
 1506 0032 D160     		str	r1, [r2, #12]	@ unaligned
 1507 0034 1034     		adds	r4, r4, #16
 1508 0036 1032     		adds	r2, r2, #16
 1509 0038 9C42     		cmp	r4, r3
 1510 003a F3D1     		bne	.L124
 1511 003c 2368     		ldr	r3, [r4]	@ unaligned
 1512 003e 1360     		str	r3, [r2]	@ unaligned
 735:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 1513              		.loc 1 735 0
 1514 0040 0020     		movs	r0, #0
 1515 0042 E6E7     		b	.L123
 1516              		.cfi_endproc
 1517              	.LFE150:
 1519              		.section	.text.USBH_MSC_Read,"ax",%progbits
 1520              		.align	1
 1521              		.global	USBH_MSC_Read
 1522              		.syntax unified
 1523              		.thumb
 1524              		.thumb_func
 1525              		.fpu fpv5-sp-d16
 1527              	USBH_MSC_Read:
 1528              	.LFB151:
 742:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 743:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
 744:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @brief  USBH_MSC_Read
 745:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *         The function performs a Read operation
 746:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  phost: Host handle
 747:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  lun: logical Unit Number
 748:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  address: sector address
 749:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  pbuf: pointer to data
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 44


 750:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  length: number of sector to read
 751:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @retval USBH Status
 752:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 753:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** USBH_StatusTypeDef USBH_MSC_Read(USBH_HandleTypeDef *phost,
 754:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                                      uint8_t lun,
 755:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                                      uint32_t address,
 756:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                                      uint8_t *pbuf,
 757:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                                      uint32_t length)
 758:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** {
 1529              		.loc 1 758 0
 1530              		.cfi_startproc
 1531              		@ args = 4, pretend = 0, frame = 0
 1532              		@ frame_needed = 0, uses_anonymous_args = 0
 1533              	.LVL182:
 1534 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 1535              	.LCFI14:
 1536              		.cfi_def_cfa_offset 20
 1537              		.cfi_offset 4, -20
 1538              		.cfi_offset 5, -16
 1539              		.cfi_offset 6, -12
 1540              		.cfi_offset 7, -8
 1541              		.cfi_offset 14, -4
 1542 0002 83B0     		sub	sp, sp, #12
 1543              	.LCFI15:
 1544              		.cfi_def_cfa_offset 32
 759:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   uint32_t timeout;
 760:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_HandleTypeDef *MSC_Handle =  (MSC_HandleTypeDef *) phost->pActiveClass->pData;
 1545              		.loc 1 760 0
 1546 0004 D0F87843 		ldr	r4, [r0, #888]
 1547 0008 E569     		ldr	r5, [r4, #28]
 1548              	.LVL183:
 761:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 762:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   if ((phost->device.is_connected == 0U) ||
 1549              		.loc 1 762 0
 1550 000a 90F81E43 		ldrb	r4, [r0, #798]	@ zero_extendqisi2
 1551 000e 14B9     		cbnz	r4, .L137
 763:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       (phost->gState != HOST_CLASS) ||
 764:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       (MSC_Handle->unit[lun].state != MSC_IDLE))
 765:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 766:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     return  USBH_FAIL;
 1552              		.loc 1 766 0
 1553 0010 0220     		movs	r0, #2
 1554              	.LVL184:
 1555              	.L129:
 767:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 768:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 769:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_Handle->state = MSC_READ;
 770:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_Handle->unit[lun].state = MSC_READ;
 771:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_Handle->rw_lun = lun;
 772:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 773:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_MSC_SCSI_Read(phost, lun, address, pbuf, length);
 774:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 775:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   timeout = phost->Timer;
 776:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 777:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   while (USBH_MSC_RdWrProcess(phost, lun) == USBH_BUSY)
 778:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 779:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     if(((phost->Timer - timeout) > (10000U * length)) || (phost->device.is_connected == 0U))
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 45


 780:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 781:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->state = MSC_IDLE;
 782:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       return USBH_FAIL;
 783:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 784:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 785:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_Handle->state = MSC_IDLE;
 786:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 787:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   return USBH_OK;
 788:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** }
 1556              		.loc 1 788 0
 1557 0012 03B0     		add	sp, sp, #12
 1558              	.LCFI16:
 1559              		.cfi_remember_state
 1560              		.cfi_def_cfa_offset 20
 1561              		@ sp needed
 1562 0014 F0BD     		pop	{r4, r5, r6, r7, pc}
 1563              	.LVL185:
 1564              	.L137:
 1565              	.LCFI17:
 1566              		.cfi_restore_state
 763:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       (phost->gState != HOST_CLASS) ||
 1567              		.loc 1 763 0 discriminator 1
 1568 0016 0478     		ldrb	r4, [r0]	@ zero_extendqisi2
 1569 0018 E4B2     		uxtb	r4, r4
 762:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       (phost->gState != HOST_CLASS) ||
 1570              		.loc 1 762 0 discriminator 1
 1571 001a 0B2C     		cmp	r4, #11
 1572 001c 01D0     		beq	.L138
 766:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 1573              		.loc 1 766 0
 1574 001e 0220     		movs	r0, #2
 1575              	.LVL186:
 1576 0020 F7E7     		b	.L129
 1577              	.LVL187:
 1578              	.L138:
 764:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 1579              		.loc 1 764 0
 1580 0022 3424     		movs	r4, #52
 1581 0024 04FB0154 		mla	r4, r4, r1, r5
 1582 0028 94F89040 		ldrb	r4, [r4, #144]	@ zero_extendqisi2
 763:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       (MSC_Handle->unit[lun].state != MSC_IDLE))
 1583              		.loc 1 763 0
 1584 002c 012C     		cmp	r4, #1
 1585 002e 01D0     		beq	.L139
 766:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 1586              		.loc 1 766 0
 1587 0030 0220     		movs	r0, #2
 1588              	.LVL188:
 1589 0032 EEE7     		b	.L129
 1590              	.LVL189:
 1591              	.L139:
 1592 0034 0C46     		mov	r4, r1
 1593 0036 0646     		mov	r6, r0
 769:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_Handle->unit[lun].state = MSC_READ;
 1594              		.loc 1 769 0
 1595 0038 0620     		movs	r0, #6
 1596              	.LVL190:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 46


 1597 003a 2873     		strb	r0, [r5, #12]
 770:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_Handle->rw_lun = lun;
 1598              		.loc 1 770 0
 1599 003c 3421     		movs	r1, #52
 1600              	.LVL191:
 1601 003e 01FB0451 		mla	r1, r1, r4, r5
 1602 0042 81F89000 		strb	r0, [r1, #144]
 771:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 1603              		.loc 1 771 0
 1604 0046 A5F8FA40 		strh	r4, [r5, #250]	@ movhi
 773:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 1605              		.loc 1 773 0
 1606 004a 0899     		ldr	r1, [sp, #32]
 1607 004c 0091     		str	r1, [sp]
 1608 004e 2146     		mov	r1, r4
 1609 0050 3046     		mov	r0, r6
 1610 0052 FFF7FEFF 		bl	USBH_MSC_SCSI_Read
 1611              	.LVL192:
 775:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 1612              		.loc 1 775 0
 1613 0056 D6F8BC73 		ldr	r7, [r6, #956]
 1614              	.LVL193:
 1615              	.L130:
 777:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 1616              		.loc 1 777 0
 1617 005a 2146     		mov	r1, r4
 1618 005c 3046     		mov	r0, r6
 1619 005e FFF7FEFF 		bl	USBH_MSC_RdWrProcess
 1620              	.LVL194:
 1621 0062 0128     		cmp	r0, #1
 1622 0064 11D1     		bne	.L140
 779:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 1623              		.loc 1 779 0
 1624 0066 D6F8BC23 		ldr	r2, [r6, #956]
 1625 006a D21B     		subs	r2, r2, r7
 1626 006c 42F21073 		movw	r3, #10000
 1627 0070 0899     		ldr	r1, [sp, #32]
 1628 0072 03FB01F3 		mul	r3, r3, r1
 1629 0076 9A42     		cmp	r2, r3
 1630 0078 03D8     		bhi	.L131
 779:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 1631              		.loc 1 779 0 is_stmt 0 discriminator 1
 1632 007a 96F81E33 		ldrb	r3, [r6, #798]	@ zero_extendqisi2
 1633 007e 002B     		cmp	r3, #0
 1634 0080 EBD1     		bne	.L130
 1635              	.L131:
 781:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       return USBH_FAIL;
 1636              		.loc 1 781 0 is_stmt 1
 1637 0082 0123     		movs	r3, #1
 1638 0084 2B73     		strb	r3, [r5, #12]
 782:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 1639              		.loc 1 782 0
 1640 0086 0220     		movs	r0, #2
 1641 0088 C3E7     		b	.L129
 1642              	.L140:
 785:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 1643              		.loc 1 785 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 47


 1644 008a 0123     		movs	r3, #1
 1645 008c 2B73     		strb	r3, [r5, #12]
 787:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** }
 1646              		.loc 1 787 0
 1647 008e 0020     		movs	r0, #0
 1648 0090 BFE7     		b	.L129
 1649              		.cfi_endproc
 1650              	.LFE151:
 1652              		.section	.text.USBH_MSC_Write,"ax",%progbits
 1653              		.align	1
 1654              		.global	USBH_MSC_Write
 1655              		.syntax unified
 1656              		.thumb
 1657              		.thumb_func
 1658              		.fpu fpv5-sp-d16
 1660              	USBH_MSC_Write:
 1661              	.LFB152:
 789:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 790:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
 791:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @brief  USBH_MSC_Write
 792:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *         The function performs a Write operation
 793:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  phost: Host handle
 794:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  lun: logical Unit Number
 795:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  address: sector address
 796:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  pbuf: pointer to data
 797:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  length: number of sector to write
 798:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @retval USBH Status
 799:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 800:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** USBH_StatusTypeDef USBH_MSC_Write(USBH_HandleTypeDef *phost,
 801:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                                      uint8_t lun,
 802:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                                      uint32_t address,
 803:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                                      uint8_t *pbuf,
 804:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                                      uint32_t length)
 805:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** {
 1662              		.loc 1 805 0
 1663              		.cfi_startproc
 1664              		@ args = 4, pretend = 0, frame = 0
 1665              		@ frame_needed = 0, uses_anonymous_args = 0
 1666              	.LVL195:
 1667 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 1668              	.LCFI18:
 1669              		.cfi_def_cfa_offset 20
 1670              		.cfi_offset 4, -20
 1671              		.cfi_offset 5, -16
 1672              		.cfi_offset 6, -12
 1673              		.cfi_offset 7, -8
 1674              		.cfi_offset 14, -4
 1675 0002 83B0     		sub	sp, sp, #12
 1676              	.LCFI19:
 1677              		.cfi_def_cfa_offset 32
 806:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   uint32_t timeout;
 807:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_HandleTypeDef *MSC_Handle =  (MSC_HandleTypeDef *) phost->pActiveClass->pData;
 1678              		.loc 1 807 0
 1679 0004 D0F87843 		ldr	r4, [r0, #888]
 1680 0008 E569     		ldr	r5, [r4, #28]
 1681              	.LVL196:
 808:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 48


 809:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   if ((phost->device.is_connected == 0U) ||
 1682              		.loc 1 809 0
 1683 000a 90F81E43 		ldrb	r4, [r0, #798]	@ zero_extendqisi2
 1684 000e 14B9     		cbnz	r4, .L150
 810:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       (phost->gState != HOST_CLASS) ||
 811:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       (MSC_Handle->unit[lun].state != MSC_IDLE))
 812:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 813:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     return  USBH_FAIL;
 1685              		.loc 1 813 0
 1686 0010 0220     		movs	r0, #2
 1687              	.LVL197:
 1688              	.L142:
 814:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 815:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 816:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_Handle->state = MSC_WRITE;
 817:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_Handle->unit[lun].state = MSC_WRITE;
 818:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_Handle->rw_lun = lun;
 819:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 820:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_MSC_SCSI_Write(phost, lun, address, pbuf, length);
 821:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 822:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   timeout = phost->Timer;
 823:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   while (USBH_MSC_RdWrProcess(phost, lun) == USBH_BUSY)
 824:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 825:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     if(((phost->Timer - timeout) >  (10000U * length)) || (phost->device.is_connected == 0U))
 826:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 827:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->state = MSC_IDLE;
 828:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       return USBH_FAIL;
 829:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 830:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 831:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_Handle->state = MSC_IDLE;
 832:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   return USBH_OK;
 833:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** }
 1689              		.loc 1 833 0
 1690 0012 03B0     		add	sp, sp, #12
 1691              	.LCFI20:
 1692              		.cfi_remember_state
 1693              		.cfi_def_cfa_offset 20
 1694              		@ sp needed
 1695 0014 F0BD     		pop	{r4, r5, r6, r7, pc}
 1696              	.LVL198:
 1697              	.L150:
 1698              	.LCFI21:
 1699              		.cfi_restore_state
 810:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       (phost->gState != HOST_CLASS) ||
 1700              		.loc 1 810 0 discriminator 1
 1701 0016 0478     		ldrb	r4, [r0]	@ zero_extendqisi2
 1702 0018 E4B2     		uxtb	r4, r4
 809:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       (phost->gState != HOST_CLASS) ||
 1703              		.loc 1 809 0 discriminator 1
 1704 001a 0B2C     		cmp	r4, #11
 1705 001c 01D0     		beq	.L151
 813:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 1706              		.loc 1 813 0
 1707 001e 0220     		movs	r0, #2
 1708              	.LVL199:
 1709 0020 F7E7     		b	.L142
 1710              	.LVL200:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 49


 1711              	.L151:
 811:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 1712              		.loc 1 811 0
 1713 0022 3424     		movs	r4, #52
 1714 0024 04FB0154 		mla	r4, r4, r1, r5
 1715 0028 94F89040 		ldrb	r4, [r4, #144]	@ zero_extendqisi2
 810:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       (MSC_Handle->unit[lun].state != MSC_IDLE))
 1716              		.loc 1 810 0
 1717 002c 012C     		cmp	r4, #1
 1718 002e 01D0     		beq	.L152
 813:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 1719              		.loc 1 813 0
 1720 0030 0220     		movs	r0, #2
 1721              	.LVL201:
 1722 0032 EEE7     		b	.L142
 1723              	.LVL202:
 1724              	.L152:
 1725 0034 0C46     		mov	r4, r1
 1726 0036 0646     		mov	r6, r0
 816:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_Handle->unit[lun].state = MSC_WRITE;
 1727              		.loc 1 816 0
 1728 0038 0720     		movs	r0, #7
 1729              	.LVL203:
 1730 003a 2873     		strb	r0, [r5, #12]
 817:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_Handle->rw_lun = lun;
 1731              		.loc 1 817 0
 1732 003c 3421     		movs	r1, #52
 1733              	.LVL204:
 1734 003e 01FB0451 		mla	r1, r1, r4, r5
 1735 0042 81F89000 		strb	r0, [r1, #144]
 818:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 1736              		.loc 1 818 0
 1737 0046 A5F8FA40 		strh	r4, [r5, #250]	@ movhi
 820:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 1738              		.loc 1 820 0
 1739 004a 0899     		ldr	r1, [sp, #32]
 1740 004c 0091     		str	r1, [sp]
 1741 004e 2146     		mov	r1, r4
 1742 0050 3046     		mov	r0, r6
 1743 0052 FFF7FEFF 		bl	USBH_MSC_SCSI_Write
 1744              	.LVL205:
 822:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   while (USBH_MSC_RdWrProcess(phost, lun) == USBH_BUSY)
 1745              		.loc 1 822 0
 1746 0056 D6F8BC73 		ldr	r7, [r6, #956]
 1747              	.LVL206:
 1748              	.L143:
 823:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 1749              		.loc 1 823 0
 1750 005a 2146     		mov	r1, r4
 1751 005c 3046     		mov	r0, r6
 1752 005e FFF7FEFF 		bl	USBH_MSC_RdWrProcess
 1753              	.LVL207:
 1754 0062 0128     		cmp	r0, #1
 1755 0064 11D1     		bne	.L153
 825:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 1756              		.loc 1 825 0
 1757 0066 D6F8BC23 		ldr	r2, [r6, #956]
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 50


 1758 006a D21B     		subs	r2, r2, r7
 1759 006c 42F21073 		movw	r3, #10000
 1760 0070 0899     		ldr	r1, [sp, #32]
 1761 0072 03FB01F3 		mul	r3, r3, r1
 1762 0076 9A42     		cmp	r2, r3
 1763 0078 03D8     		bhi	.L144
 825:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 1764              		.loc 1 825 0 is_stmt 0 discriminator 1
 1765 007a 96F81E33 		ldrb	r3, [r6, #798]	@ zero_extendqisi2
 1766 007e 002B     		cmp	r3, #0
 1767 0080 EBD1     		bne	.L143
 1768              	.L144:
 827:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       return USBH_FAIL;
 1769              		.loc 1 827 0 is_stmt 1
 1770 0082 0123     		movs	r3, #1
 1771 0084 2B73     		strb	r3, [r5, #12]
 828:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 1772              		.loc 1 828 0
 1773 0086 0220     		movs	r0, #2
 1774 0088 C3E7     		b	.L142
 1775              	.L153:
 831:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   return USBH_OK;
 1776              		.loc 1 831 0
 1777 008a 0123     		movs	r3, #1
 1778 008c 2B73     		strb	r3, [r5, #12]
 832:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** }
 1779              		.loc 1 832 0
 1780 008e 0020     		movs	r0, #0
 1781 0090 BFE7     		b	.L142
 1782              		.cfi_endproc
 1783              	.LFE152:
 1785              		.global	USBH_msc
 1786              		.section	.data.USBH_msc,"aw",%progbits
 1787              		.align	2
 1790              	USBH_msc:
 1791 0000 00000000 		.word	.LC15
 1792 0004 08       		.byte	8
 1793 0005 000000   		.space	3
 1794 0008 00000000 		.word	USBH_MSC_InterfaceInit
 1795 000c 00000000 		.word	USBH_MSC_InterfaceDeInit
 1796 0010 00000000 		.word	USBH_MSC_ClassRequest
 1797 0014 00000000 		.word	USBH_MSC_Process
 1798 0018 00000000 		.word	USBH_MSC_SOFProcess
 1799 001c 00000000 		.word	0
 1800              		.section	.rodata.USBH_MSC_ClassRequest.str1.4,"aMS",%progbits,1
 1801              		.align	2
 1802              	.LC12:
 1803 0000 4E756D62 		.ascii	"Number of supported LUN: %lu\000"
 1803      6572206F 
 1803      66207375 
 1803      70706F72 
 1803      74656420 
 1804              		.section	.rodata.USBH_MSC_InterfaceInit.str1.4,"aMS",%progbits,1
 1805              		.align	2
 1806              	.LC13:
 1807 0000 44454255 		.ascii	"DEBUG : \000"
 1807      47203A20 
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 51


 1807      00
 1808 0009 000000   		.space	3
 1809              	.LC14:
 1810 000c 43616E6E 		.ascii	"Cannot Find the interface for %s class.\000"
 1810      6F742046 
 1810      696E6420 
 1810      74686520 
 1810      696E7465 
 1811              		.section	.rodata.USBH_MSC_Process.str1.4,"aMS",%progbits,1
 1812              		.align	2
 1813              	.LC0:
 1814 0000 4C554E20 		.ascii	"LUN #%d: \000"
 1814      2325643A 
 1814      2000
 1815 000a 0000     		.space	2
 1816              	.LC1:
 1817 000c 496E7175 		.ascii	"Inquiry Vendor  : %s\000"
 1817      69727920 
 1817      56656E64 
 1817      6F722020 
 1817      3A202573 
 1818 0021 000000   		.space	3
 1819              	.LC2:
 1820 0024 496E7175 		.ascii	"Inquiry Product : %s\000"
 1820      69727920 
 1820      50726F64 
 1820      75637420 
 1820      3A202573 
 1821 0039 000000   		.space	3
 1822              	.LC3:
 1823 003c 496E7175 		.ascii	"Inquiry Version : %s\000"
 1823      69727920 
 1823      56657273 
 1823      696F6E20 
 1823      3A202573 
 1824 0051 000000   		.space	3
 1825              	.LC4:
 1826 0054 4D534320 		.ascii	"MSC Device ready\000"
 1826      44657669 
 1826      63652072 
 1826      65616479 
 1826      00
 1827 0065 000000   		.space	3
 1828              	.LC5:
 1829 0068 4D534320 		.ascii	"MSC Device NOT ready\000"
 1829      44657669 
 1829      6365204E 
 1829      4F542072 
 1829      65616479 
 1830 007d 000000   		.space	3
 1831              	.LC6:
 1832 0080 4D534320 		.ascii	"MSC Device capacity : %lu Bytes\000"
 1832      44657669 
 1832      63652063 
 1832      61706163 
 1832      69747920 
 1833              	.LC7:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 52


 1834 00a0 426C6F63 		.ascii	"Block number : %lu\000"
 1834      6B206E75 
 1834      6D626572 
 1834      203A2025 
 1834      6C7500
 1835 00b3 00       		.space	1
 1836              	.LC8:
 1837 00b4 426C6F63 		.ascii	"Block Size   : %lu\000"
 1837      6B205369 
 1837      7A652020 
 1837      203A2025 
 1837      6C7500
 1838 00c7 00       		.space	1
 1839              	.LC9:
 1840 00c8 53656E73 		.ascii	"Sense Key  : %x\000"
 1840      65204B65 
 1840      7920203A 
 1840      20257800 
 1841              	.LC10:
 1842 00d8 41646469 		.ascii	"Additional Sense Code : %x\000"
 1842      74696F6E 
 1842      616C2053 
 1842      656E7365 
 1842      20436F64 
 1843 00f3 00       		.space	1
 1844              	.LC11:
 1845 00f4 41646469 		.ascii	"Additional Sense Code Qualifier: %x\000"
 1845      74696F6E 
 1845      616C2053 
 1845      656E7365 
 1845      20436F64 
 1846              		.section	.rodata.str1.4,"aMS",%progbits,1
 1847              		.align	2
 1848              	.LC15:
 1849 0000 4D534300 		.ascii	"MSC\000"
 1850              		.text
 1851              	.Letext0:
 1852              		.file 2 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\machine\\_default_types.h"
 1853              		.file 3 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\sys\\lock.h"
 1854              		.file 4 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\sys\\_types.h"
 1855              		.file 5 "c:\\gcc_toolchain\\6_2017-q1-update\\lib\\gcc\\arm-none-eabi\\6.3.1\\include\\stddef.h"
 1856              		.file 6 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\sys\\reent.h"
 1857              		.file 7 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\sys\\_stdint.h"
 1858              		.file 8 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\stdlib.h"
 1859              		.file 9 "Drivers/CMSIS/Include/core_cm7.h"
 1860              		.file 10 "Drivers/CMSIS/Device/ST/STM32F7xx/Include/system_stm32f7xx.h"
 1861              		.file 11 "Middlewares/Third_Party/FreeRTOS/Source/include/task.h"
 1862              		.file 12 "Middlewares/Third_Party/FreeRTOS/Source/include/queue.h"
 1863              		.file 13 "Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.h"
 1864              		.file 14 "Middlewares/ST/STM32_USB_Host_Library/Core/Inc/usbh_def.h"
 1865              		.file 15 "Middlewares/ST/STM32_USB_Host_Library/Core/Inc/usbh_ctlreq.h"
 1866              		.file 16 "Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Inc/usbh_msc_bot.h"
 1867              		.file 17 "Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Inc/usbh_msc_scsi.h"
 1868              		.file 18 "Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Inc/usbh_msc.h"
 1869              		.file 19 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\stdio.h"
 1870              		.file 20 "Middlewares/ST/STM32_USB_Host_Library/Core/Inc/usbh_pipes.h"
 1871              		.file 21 "Middlewares/ST/STM32_USB_Host_Library/Core/Inc/usbh_core.h"
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 53


 1872              		.file 22 "<built-in>"
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 54


DEFINED SYMBOLS
                            *ABS*:00000000 usbh_msc.c
C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s:18     .text.USBH_MSC_SOFProcess:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s:24     .text.USBH_MSC_SOFProcess:00000000 USBH_MSC_SOFProcess
C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s:41     .text.USBH_MSC_Process:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s:47     .text.USBH_MSC_Process:00000000 USBH_MSC_Process
C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s:95     .text.USBH_MSC_Process:0000003c $d
C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s:104    .text.USBH_MSC_Process:0000004e $t
C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s:577    .text.USBH_MSC_Process:000003d0 $d
C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s:592    .text.USBH_MSC_Process:00000400 $t
C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s:600    .text.USBH_MSC_ClassRequest:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s:606    .text.USBH_MSC_ClassRequest:00000000 USBH_MSC_ClassRequest
C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s:726    .text.USBH_MSC_ClassRequest:00000084 $d
C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s:731    .text.USBH_MSC_InterfaceDeInit:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s:737    .text.USBH_MSC_InterfaceDeInit:00000000 USBH_MSC_InterfaceDeInit
C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s:812    .text.USBH_MSC_InterfaceInit:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s:818    .text.USBH_MSC_InterfaceInit:00000000 USBH_MSC_InterfaceInit
C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s:1019   .text.USBH_MSC_InterfaceInit:00000148 $d
C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s:1025   .text.USBH_MSC_RdWrProcess:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s:1031   .text.USBH_MSC_RdWrProcess:00000000 USBH_MSC_RdWrProcess
C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s:1285   .text.USBH_MSC_RdWrProcess:0000016c $d
C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s:1293   .text.USBH_MSC_IsReady:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s:1300   .text.USBH_MSC_IsReady:00000000 USBH_MSC_IsReady
C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s:1342   .text.USBH_MSC_GetMaxLUN:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s:1349   .text.USBH_MSC_GetMaxLUN:00000000 USBH_MSC_GetMaxLUN
C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s:1391   .text.USBH_MSC_UnitIsReady:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s:1398   .text.USBH_MSC_UnitIsReady:00000000 USBH_MSC_UnitIsReady
C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s:1442   .text.USBH_MSC_GetLUNInfo:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s:1449   .text.USBH_MSC_GetLUNInfo:00000000 USBH_MSC_GetLUNInfo
C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s:1520   .text.USBH_MSC_Read:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s:1527   .text.USBH_MSC_Read:00000000 USBH_MSC_Read
C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s:1653   .text.USBH_MSC_Write:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s:1660   .text.USBH_MSC_Write:00000000 USBH_MSC_Write
C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s:1790   .data.USBH_msc:00000000 USBH_msc
C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s:1787   .data.USBH_msc:00000000 $d
C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s:1801   .rodata.USBH_MSC_ClassRequest.str1.4:00000000 $d
C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s:1805   .rodata.USBH_MSC_InterfaceInit.str1.4:00000000 $d
C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s:1812   .rodata.USBH_MSC_Process.str1.4:00000000 $d
C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s:1847   .rodata.str1.4:00000000 $d
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
printf
putchar
osMessagePut
USBH_MSC_SCSI_Inquiry
USBH_MSC_SCSI_TestUnitReady
USBH_MSC_SCSI_ReadCapacity
USBH_MSC_SCSI_RequestSense
USBH_MSC_BOT_REQ_GetMaxLUN
USBH_ClrFeature
free
USBH_ClosePipe
USBH_FreePipe
USBH_FindInterface
USBH_SelectInterface
malloc
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccOFPvLa.s 			page 55


USBH_AllocPipe
USBH_MSC_BOT_Init
memset
USBH_OpenPipe
USBH_LL_SetToggle
USBH_MSC_SCSI_Read
USBH_MSC_SCSI_Write
