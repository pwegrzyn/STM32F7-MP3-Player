ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 1


   1              		.cpu cortex-m7
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"sockets.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.get_socket,"ax",%progbits
  18              		.align	1
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu fpv5-sp-d16
  24              	get_socket:
  25              	.LFB161:
  26              		.file 1 "Middlewares/Third_Party/LwIP/src/api/sockets.c"
   1:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /**
   2:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @file
   3:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Sockets BSD-Like API module
   4:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
   5:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @defgroup socket Socket API
   6:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @ingroup sequential_api
   7:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * BSD-style socket API.\n
   8:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Thread-safe, to be called from non-TCPIP threads only.\n
   9:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Can be activated by defining @ref LWIP_SOCKET to 1.\n
  10:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Header is in posix/sys/socket.h\b
  11:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
  12:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
  13:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /*
  14:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Copyright (c) 2001-2004 Swedish Institute of Computer Science.
  15:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * All rights reserved.
  16:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
  17:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Redistribution and use in source and binary forms, with or without modification,
  18:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * are permitted provided that the following conditions are met:
  19:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
  20:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * 1. Redistributions of source code must retain the above copyright notice,
  21:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *    this list of conditions and the following disclaimer.
  22:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  23:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *    this list of conditions and the following disclaimer in the documentation
  24:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *    and/or other materials provided with the distribution.
  25:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * 3. The name of the author may not be used to endorse or promote products
  26:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *    derived from this software without specific prior written permission.
  27:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
  28:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR IMPLIED
  29:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  30:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT
  31:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  32:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 2


  33:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
  34:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
  35:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING
  36:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY
  37:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * OF SUCH DAMAGE.
  38:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
  39:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * This file is part of the lwIP TCP/IP stack.
  40:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
  41:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Author: Adam Dunkels <adam@sics.se>
  42:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
  43:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Improved by Marc Boucher <marc@mbsi.ca> and David Haas <dhaas@alum.rpi.edu>
  44:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
  45:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
  46:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
  47:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/opt.h"
  48:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
  49:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SOCKET /* don't build if not configured for use in lwipopts.h */
  50:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
  51:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/sockets.h"
  52:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/api.h"
  53:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/sys.h"
  54:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/igmp.h"
  55:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/inet.h"
  56:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/tcp.h"
  57:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/raw.h"
  58:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/udp.h"
  59:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/memp.h"
  60:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/pbuf.h"
  61:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/priv/tcpip_priv.h"
  62:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_CHECKSUM_ON_COPY
  63:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/inet_chksum.h"
  64:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
  65:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
  66:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include <string.h>
  67:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
  68:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* If the netconn API is not required publicly, then we include the necessary
  69:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    files here to get the implementation */
  70:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if !LWIP_NETCONN
  71:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #undef LWIP_NETCONN
  72:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_NETCONN 1
  73:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "api_msg.c"
  74:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "api_lib.c"
  75:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "netbuf.c"
  76:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #undef LWIP_NETCONN
  77:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_NETCONN 0
  78:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
  79:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
  80:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV4
  81:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IP4ADDR_PORT_TO_SOCKADDR(sin, ipaddr, port) do { \
  82:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       (sin)->sin_len = sizeof(struct sockaddr_in); \
  83:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       (sin)->sin_family = AF_INET; \
  84:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       (sin)->sin_port = lwip_htons((port)); \
  85:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       inet_addr_from_ip4addr(&(sin)->sin_addr, ipaddr); \
  86:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       memset((sin)->sin_zero, 0, SIN_ZERO_LEN); }while(0)
  87:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SOCKADDR4_TO_IP4ADDR_PORT(sin, ipaddr, port) do { \
  88:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     inet_addr_to_ip4addr(ip_2_ip4(ipaddr), &((sin)->sin_addr)); \
  89:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     (port) = lwip_ntohs((sin)->sin_port); }while(0)
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 3


  90:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV4 */
  91:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
  92:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV6
  93:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IP6ADDR_PORT_TO_SOCKADDR(sin6, ipaddr, port) do { \
  94:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       (sin6)->sin6_len = sizeof(struct sockaddr_in6); \
  95:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       (sin6)->sin6_family = AF_INET6; \
  96:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       (sin6)->sin6_port = lwip_htons((port)); \
  97:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       (sin6)->sin6_flowinfo = 0; \
  98:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       inet6_addr_from_ip6addr(&(sin6)->sin6_addr, ipaddr); \
  99:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       (sin6)->sin6_scope_id = 0; }while(0)
 100:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SOCKADDR6_TO_IP6ADDR_PORT(sin6, ipaddr, port) do { \
 101:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     inet6_addr_to_ip6addr(ip_2_ip6(ipaddr), &((sin6)->sin6_addr)); \
 102:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     (port) = lwip_ntohs((sin6)->sin6_port); }while(0)
 103:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV6 */
 104:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 105:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV4 && LWIP_IPV6
 106:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void sockaddr_to_ipaddr_port(const struct sockaddr* sockaddr, ip_addr_t* ipaddr, u16_t* port
 107:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 108:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IS_SOCK_ADDR_LEN_VALID(namelen)  (((namelen) == sizeof(struct sockaddr_in)) || \
 109:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                          ((namelen) == sizeof(struct sockaddr_in6)))
 110:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IS_SOCK_ADDR_TYPE_VALID(name)    (((name)->sa_family == AF_INET) || \
 111:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                          ((name)->sa_family == AF_INET6))
 112:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SOCK_ADDR_TYPE_MATCH(name, sock) \
 113:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        ((((name)->sa_family == AF_INET) && !(NETCONNTYPE_ISIPV6((sock)->conn->type))) || \
 114:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        (((name)->sa_family == AF_INET6) && (NETCONNTYPE_ISIPV6((sock)->conn->type))))
 115:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IPADDR_PORT_TO_SOCKADDR(sockaddr, ipaddr, port) do { \
 116:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (IP_IS_V6(ipaddr)) { \
 117:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       IP6ADDR_PORT_TO_SOCKADDR((struct sockaddr_in6*)(void*)(sockaddr), ip_2_ip6(ipaddr), port); \
 118:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else { \
 119:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       IP4ADDR_PORT_TO_SOCKADDR((struct sockaddr_in*)(void*)(sockaddr), ip_2_ip4(ipaddr), port); \
 120:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } } while(0)
 121:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SOCKADDR_TO_IPADDR_PORT(sockaddr, ipaddr, port) sockaddr_to_ipaddr_port(sockaddr, ipaddr, &
 122:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define DOMAIN_TO_NETCONN_TYPE(domain, type) (((domain) == AF_INET) ? \
 123:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   (type) : (enum netconn_type)((type) | NETCONN_TYPE_IPV6))
 124:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #elif LWIP_IPV6 /* LWIP_IPV4 && LWIP_IPV6 */
 125:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IS_SOCK_ADDR_LEN_VALID(namelen)  ((namelen) == sizeof(struct sockaddr_in6))
 126:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IS_SOCK_ADDR_TYPE_VALID(name)    ((name)->sa_family == AF_INET6)
 127:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SOCK_ADDR_TYPE_MATCH(name, sock) 1
 128:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IPADDR_PORT_TO_SOCKADDR(sockaddr, ipaddr, port) \
 129:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         IP6ADDR_PORT_TO_SOCKADDR((struct sockaddr_in6*)(void*)(sockaddr), ip_2_ip6(ipaddr), port)
 130:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SOCKADDR_TO_IPADDR_PORT(sockaddr, ipaddr, port) \
 131:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         SOCKADDR6_TO_IP6ADDR_PORT((const struct sockaddr_in6*)(const void*)(sockaddr), ipaddr, port
 132:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define DOMAIN_TO_NETCONN_TYPE(domain, netconn_type) (netconn_type)
 133:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /*-> LWIP_IPV4: LWIP_IPV4 && LWIP_IPV6 */
 134:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IS_SOCK_ADDR_LEN_VALID(namelen)  ((namelen) == sizeof(struct sockaddr_in))
 135:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IS_SOCK_ADDR_TYPE_VALID(name)    ((name)->sa_family == AF_INET)
 136:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SOCK_ADDR_TYPE_MATCH(name, sock) 1
 137:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IPADDR_PORT_TO_SOCKADDR(sockaddr, ipaddr, port) \
 138:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         IP4ADDR_PORT_TO_SOCKADDR((struct sockaddr_in*)(void*)(sockaddr), ip_2_ip4(ipaddr), port)
 139:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SOCKADDR_TO_IPADDR_PORT(sockaddr, ipaddr, port) \
 140:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         SOCKADDR4_TO_IP4ADDR_PORT((const struct sockaddr_in*)(const void*)(sockaddr), ipaddr, port)
 141:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define DOMAIN_TO_NETCONN_TYPE(domain, netconn_type) (netconn_type)
 142:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV6 */
 143:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 144:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IS_SOCK_ADDR_TYPE_VALID_OR_UNSPEC(name)    (((name)->sa_family == AF_UNSPEC) || \
 145:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                                     IS_SOCK_ADDR_TYPE_VALID(name))
 146:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SOCK_ADDR_TYPE_MATCH_OR_UNSPEC(name, sock) (((name)->sa_family == AF_UNSPEC) || \
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 4


 147:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                                     SOCK_ADDR_TYPE_MATCH(name, sock))
 148:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IS_SOCK_ADDR_ALIGNED(name)      ((((mem_ptr_t)(name)) % 4) == 0)
 149:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 150:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 151:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SOCKOPT_CHECK_OPTLEN(optlen, opttype) do { if ((optlen) < sizeof(opttype)) { return EI
 152:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SOCKOPT_CHECK_OPTLEN_CONN(sock, optlen, opttype) do { \
 153:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SOCKOPT_CHECK_OPTLEN(optlen, opttype); \
 154:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if ((sock)->conn == NULL) { return EINVAL; } }while(0)
 155:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, optlen, opttype) do { \
 156:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SOCKOPT_CHECK_OPTLEN(optlen, opttype); \
 157:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (((sock)->conn == NULL) || ((sock)->conn->pcb.tcp == NULL)) { return EINVAL; } }while(0)
 158:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, optlen, opttype, netconntype) do { \
 159:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, optlen, opttype); \
 160:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (NETCONNTYPE_GROUP(netconn_type((sock)->conn)) != netconntype) { return ENOPROTOOPT; } }while(
 161:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 162:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 163:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SETGETSOCKOPT_DATA_VAR_REF(name)     API_VAR_REF(name)
 164:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SETGETSOCKOPT_DATA_VAR_DECLARE(name) API_VAR_DECLARE(struct lwip_setgetsockopt_data, n
 165:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SETGETSOCKOPT_DATA_VAR_FREE(name)    API_VAR_FREE(MEMP_SOCKET_SETGETSOCKOPT_DATA, name
 166:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_MPU_COMPATIBLE
 167:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SETGETSOCKOPT_DATA_VAR_ALLOC(name, sock) do { \
 168:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   name = (struct lwip_setgetsockopt_data *)memp_malloc(MEMP_SOCKET_SETGETSOCKOPT_DATA); \
 169:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (name == NULL) { \
 170:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, ENOMEM); \
 171:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1; \
 172:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } }while(0)
 173:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_MPU_COMPATIBLE */
 174:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SETGETSOCKOPT_DATA_VAR_ALLOC(name, sock)
 175:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_MPU_COMPATIBLE */
 176:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 177:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_SNDRCVTIMEO_NONSTANDARD
 178:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SO_SNDRCVTIMEO_OPTTYPE int
 179:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SO_SNDRCVTIMEO_SET(optval, val) (*(int *)(optval) = (val))
 180:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SO_SNDRCVTIMEO_GET_MS(optval)   ((s32_t)*(const int*)(optval))
 181:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else
 182:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SO_SNDRCVTIMEO_OPTTYPE struct timeval
 183:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SO_SNDRCVTIMEO_SET(optval, val)  do { \
 184:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   s32_t loc = (val); \
 185:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   ((struct timeval *)(optval))->tv_sec = (loc) / 1000U; \
 186:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   ((struct timeval *)(optval))->tv_usec = ((loc) % 1000U) * 1000U; }while(0)
 187:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SO_SNDRCVTIMEO_GET_MS(optval) ((((const struct timeval *)(optval))->tv_sec * 1000U) + 
 188:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
 189:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 190:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define NUM_SOCKETS MEMP_NUM_NETCONN
 191:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 192:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** This is overridable for the rare case where more than 255 threads
 193:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * select on the same socket...
 194:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
 195:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #ifndef SELWAIT_T
 196:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SELWAIT_T u8_t
 197:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
 198:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 199:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** Contains all internal pointers and states used for a socket */
 200:Middlewares/Third_Party/LwIP/src/api/sockets.c **** struct lwip_sock {
 201:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** sockets currently are built on netconns, each socket has one netconn */
 202:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct netconn *conn;
 203:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** data that was left from the previous read */
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 5


 204:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   void *lastdata;
 205:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** offset in the data that was left from the previous read */
 206:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u16_t lastoffset;
 207:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** number of times data was received, set by event_callback(),
 208:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       tested by the receive and select functions */
 209:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   s16_t rcvevent;
 210:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** number of times data was ACKed (free send buffer), set by event_callback(),
 211:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       tested by select */
 212:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u16_t sendevent;
 213:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** error happened for this socket, set by event_callback(), tested by select */
 214:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u16_t errevent;
 215:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** last error that occurred on this socket (in fact, all our errnos fit into an u8_t) */
 216:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u8_t err;
 217:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** counter of how many threads are waiting for this socket using select */
 218:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SELWAIT_T select_waiting;
 219:Middlewares/Third_Party/LwIP/src/api/sockets.c **** };
 220:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 221:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETCONN_SEM_PER_THREAD
 222:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SELECT_SEM_T        sys_sem_t*
 223:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SELECT_SEM_PTR(sem) (sem)
 224:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_NETCONN_SEM_PER_THREAD */
 225:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SELECT_SEM_T        sys_sem_t
 226:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SELECT_SEM_PTR(sem) (&(sem))
 227:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_NETCONN_SEM_PER_THREAD */
 228:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 229:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** Description for a task waiting in select */
 230:Middlewares/Third_Party/LwIP/src/api/sockets.c **** struct lwip_select_cb {
 231:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** Pointer to the next waiting task */
 232:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_select_cb *next;
 233:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** Pointer to the previous waiting task */
 234:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_select_cb *prev;
 235:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** readset passed to select */
 236:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   fd_set *readset;
 237:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** writeset passed to select */
 238:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   fd_set *writeset;
 239:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** unimplemented: exceptset passed to select */
 240:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   fd_set *exceptset;
 241:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** don't signal the same semaphore twice: set to 1 when signalled */
 242:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int sem_signalled;
 243:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** semaphore to wake up a task waiting for select */
 244:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SELECT_SEM_T sem;
 245:Middlewares/Third_Party/LwIP/src/api/sockets.c **** };
 246:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 247:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** A struct sockaddr replacement that has the same alignment as sockaddr_in/
 248:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *  sockaddr_in6 if instantiated.
 249:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
 250:Middlewares/Third_Party/LwIP/src/api/sockets.c **** union sockaddr_aligned {
 251:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    struct sockaddr sa;
 252:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV6
 253:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    struct sockaddr_in6 sin6;
 254:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV6 */
 255:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV4
 256:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    struct sockaddr_in sin;
 257:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV4 */
 258:Middlewares/Third_Party/LwIP/src/api/sockets.c **** };
 259:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 260:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IGMP
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 6


 261:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Define the number of IPv4 multicast memberships, default is one per socket */
 262:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #ifndef LWIP_SOCKET_MAX_MEMBERSHIPS
 263:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SOCKET_MAX_MEMBERSHIPS NUM_SOCKETS
 264:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
 265:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 266:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* This is to keep track of IP_ADD_MEMBERSHIP calls to drop the membership when
 267:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    a socket is closed */
 268:Middlewares/Third_Party/LwIP/src/api/sockets.c **** struct lwip_socket_multicast_pair {
 269:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** the socket */
 270:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock* sock;
 271:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** the interface address */
 272:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   ip4_addr_t if_addr;
 273:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** the group address */
 274:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   ip4_addr_t multi_addr;
 275:Middlewares/Third_Party/LwIP/src/api/sockets.c **** };
 276:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 277:Middlewares/Third_Party/LwIP/src/api/sockets.c **** struct lwip_socket_multicast_pair socket_ipv4_multicast_memberships[LWIP_SOCKET_MAX_MEMBERSHIPS];
 278:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 279:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static int  lwip_socket_register_membership(int s, const ip4_addr_t *if_addr, const ip4_addr_t *mul
 280:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void lwip_socket_unregister_membership(int s, const ip4_addr_t *if_addr, const ip4_addr_t *m
 281:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void lwip_socket_drop_registered_memberships(int s);
 282:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IGMP */
 283:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 284:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** The global array of available sockets */
 285:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static struct lwip_sock sockets[NUM_SOCKETS];
 286:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** The global list of tasks waiting for select */
 287:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static struct lwip_select_cb *select_cb_list;
 288:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** This counter is increased from lwip_select when the list is changed
 289:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     and checked in event_callback to see if it has changed. */
 290:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static volatile int select_cb_ctr;
 291:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 292:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SOCKET_SET_ERRNO
 293:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #ifndef set_errno
 294:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define set_errno(err) do { if (err) { errno = (err); } } while(0)
 295:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
 296:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_SOCKET_SET_ERRNO */
 297:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define set_errno(err)
 298:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SOCKET_SET_ERRNO */
 299:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 300:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define sock_set_errno(sk, e) do { \
 301:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   const int sockerr = (e); \
 302:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sk->err = (u8_t)sockerr; \
 303:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   set_errno(sockerr); \
 304:Middlewares/Third_Party/LwIP/src/api/sockets.c **** } while (0)
 305:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 306:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Forward declaration of some functions */
 307:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void event_callback(struct netconn *conn, enum netconn_evt evt, u16_t len);
 308:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if !LWIP_TCPIP_CORE_LOCKING
 309:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void lwip_getsockopt_callback(void *arg);
 310:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void lwip_setsockopt_callback(void *arg);
 311:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
 312:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static u8_t lwip_getsockopt_impl(int s, int level, int optname, void *optval, socklen_t *optlen);
 313:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static u8_t lwip_setsockopt_impl(int s, int level, int optname, const void *optval, socklen_t optle
 314:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 315:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV4 && LWIP_IPV6
 316:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void
 317:Middlewares/Third_Party/LwIP/src/api/sockets.c **** sockaddr_to_ipaddr_port(const struct sockaddr* sockaddr, ip_addr_t* ipaddr, u16_t* port)
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 7


 318:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 319:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if ((sockaddr->sa_family) == AF_INET6) {
 320:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SOCKADDR6_TO_IP6ADDR_PORT((const struct sockaddr_in6*)(const void*)(sockaddr), ipaddr, *port);
 321:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ipaddr->type = IPADDR_TYPE_V6;
 322:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
 323:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SOCKADDR4_TO_IP4ADDR_PORT((const struct sockaddr_in*)(const void*)(sockaddr), ipaddr, *port);
 324:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ipaddr->type = IPADDR_TYPE_V4;
 325:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 326:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 327:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV4 && LWIP_IPV6 */
 328:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 329:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** LWIP_NETCONN_SEM_PER_THREAD==1: initialize thread-local semaphore */
 330:Middlewares/Third_Party/LwIP/src/api/sockets.c **** void
 331:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_socket_thread_init(void)
 332:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 333:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    netconn_thread_init();
 334:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 335:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 336:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** LWIP_NETCONN_SEM_PER_THREAD==1: destroy thread-local semaphore */
 337:Middlewares/Third_Party/LwIP/src/api/sockets.c **** void
 338:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_socket_thread_cleanup(void)
 339:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 340:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    netconn_thread_cleanup();
 341:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 342:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 343:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /**
 344:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Map a externally used socket index to the internal socket representation.
 345:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
 346:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param s externally used socket index
 347:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @return struct lwip_sock for the socket or NULL if not found
 348:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
 349:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static struct lwip_sock *
 350:Middlewares/Third_Party/LwIP/src/api/sockets.c **** get_socket(int s)
 351:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
  27              		.loc 1 351 0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              		@ link register save eliminated.
  32              	.LVL0:
 352:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 353:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 354:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   s -= LWIP_SOCKET_OFFSET;
 355:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 356:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if ((s < 0) || (s >= NUM_SOCKETS)) {
  33              		.loc 1 356 0
  34 0000 0328     		cmp	r0, #3
  35 0002 0CD8     		bhi	.L7
 351:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
  36              		.loc 1 351 0
  37 0004 10B4     		push	{r4}
  38              	.LCFI0:
  39              		.cfi_def_cfa_offset 4
  40              		.cfi_offset 4, -4
 357:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("get_socket(%d): invalid\n", s + LWIP_SOCKET_OFFSET));
 358:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     set_errno(EBADF);
 359:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return NULL;
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 8


 360:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 361:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 362:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = &sockets[s];
  41              		.loc 1 362 0
  42 0006 0B4C     		ldr	r4, .L9
  43 0008 8300     		lsls	r3, r0, #2
  44 000a 1918     		adds	r1, r3, r0
  45 000c 8A00     		lsls	r2, r1, #2
  46 000e 1146     		mov	r1, r2
  47 0010 2244     		add	r2, r2, r4
  48              	.LVL1:
 363:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 364:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock->conn) {
  49              		.loc 1 364 0
  50 0012 6358     		ldr	r3, [r4, r1]
  51 0014 4BB1     		cbz	r3, .L8
  52              	.LVL2:
  53              	.L1:
 365:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("get_socket(%d): not active\n", s + LWIP_SOCKET_OFFSET));
 366:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     set_errno(EBADF);
 367:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return NULL;
 368:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 369:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 370:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return sock;
 371:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
  54              		.loc 1 371 0
  55 0016 1046     		mov	r0, r2
  56              	.LVL3:
  57 0018 5DF8044B 		ldr	r4, [sp], #4
  58              	.LCFI1:
  59              		.cfi_restore 4
  60              		.cfi_def_cfa_offset 0
  61              	.LVL4:
  62 001c 7047     		bx	lr
  63              	.LVL5:
  64              	.L7:
 358:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return NULL;
  65              		.loc 1 358 0 discriminator 1
  66 001e 064B     		ldr	r3, .L9+4
  67 0020 0922     		movs	r2, #9
  68 0022 1A60     		str	r2, [r3]
 359:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
  69              		.loc 1 359 0 discriminator 1
  70 0024 0022     		movs	r2, #0
  71              		.loc 1 371 0 discriminator 1
  72 0026 1046     		mov	r0, r2
  73              	.LVL6:
  74 0028 7047     		bx	lr
  75              	.LVL7:
  76              	.L8:
  77              	.LCFI2:
  78              		.cfi_def_cfa_offset 4
  79              		.cfi_offset 4, -4
 366:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return NULL;
  80              		.loc 1 366 0 discriminator 1
  81 002a 034B     		ldr	r3, .L9+4
  82 002c 0922     		movs	r2, #9
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 9


  83              	.LVL8:
  84 002e 1A60     		str	r2, [r3]
 367:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
  85              		.loc 1 367 0 discriminator 1
  86 0030 0022     		movs	r2, #0
  87 0032 F0E7     		b	.L1
  88              	.L10:
  89              		.align	2
  90              	.L9:
  91 0034 00000000 		.word	.LANCHOR0
  92 0038 00000000 		.word	errno
  93              		.cfi_endproc
  94              	.LFE161:
  96              		.section	.text.tryget_socket,"ax",%progbits
  97              		.align	1
  98              		.syntax unified
  99              		.thumb
 100              		.thumb_func
 101              		.fpu fpv5-sp-d16
 103              	tryget_socket:
 104              	.LFB162:
 372:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 373:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /**
 374:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Same as get_socket but doesn't set errno
 375:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
 376:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param s externally used socket index
 377:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @return struct lwip_sock for the socket or NULL if not found
 378:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
 379:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static struct lwip_sock *
 380:Middlewares/Third_Party/LwIP/src/api/sockets.c **** tryget_socket(int s)
 381:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 105              		.loc 1 381 0
 106              		.cfi_startproc
 107              		@ args = 0, pretend = 0, frame = 0
 108              		@ frame_needed = 0, uses_anonymous_args = 0
 109              		@ link register save eliminated.
 110              	.LVL9:
 382:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   s -= LWIP_SOCKET_OFFSET;
 383:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if ((s < 0) || (s >= NUM_SOCKETS)) {
 111              		.loc 1 383 0
 112 0000 0328     		cmp	r0, #3
 113 0002 0BD8     		bhi	.L13
 384:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return NULL;
 385:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 386:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sockets[s].conn) {
 114              		.loc 1 386 0
 115 0004 00EB8002 		add	r2, r0, r0, lsl #2
 116 0008 9300     		lsls	r3, r2, #2
 117 000a 064A     		ldr	r2, .L15
 118 000c D358     		ldr	r3, [r2, r3]
 119 000e 3BB1     		cbz	r3, .L14
 387:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return NULL;
 388:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 389:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return &sockets[s];
 120              		.loc 1 389 0
 121 0010 00EB8000 		add	r0, r0, r0, lsl #2
 122              	.LVL10:
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 10


 123 0014 8300     		lsls	r3, r0, #2
 124 0016 1046     		mov	r0, r2
 125 0018 1844     		add	r0, r0, r3
 126 001a 7047     		bx	lr
 127              	.LVL11:
 128              	.L13:
 384:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return NULL;
 129              		.loc 1 384 0
 130 001c 0020     		movs	r0, #0
 131              	.LVL12:
 132 001e 7047     		bx	lr
 133              	.LVL13:
 134              	.L14:
 387:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return NULL;
 135              		.loc 1 387 0
 136 0020 0020     		movs	r0, #0
 137              	.LVL14:
 390:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 138              		.loc 1 390 0
 139 0022 7047     		bx	lr
 140              	.L16:
 141              		.align	2
 142              	.L15:
 143 0024 00000000 		.word	.LANCHOR0
 144              		.cfi_endproc
 145              	.LFE162:
 147              		.section	.text.lwip_setsockopt_impl,"ax",%progbits
 148              		.align	1
 149              		.syntax unified
 150              		.thumb
 151              		.thumb_func
 152              		.fpu fpv5-sp-d16
 154              	lwip_setsockopt_impl:
 155              	.LFB189:
 391:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 392:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /**
 393:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Allocate a new socket for a given netconn.
 394:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
 395:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param newconn the netconn for which to allocate a socket
 396:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param accepted 1 if socket has been created by accept(),
 397:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *                 0 if socket has been created by socket()
 398:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @return the index of the new socket; -1 on error
 399:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
 400:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static int
 401:Middlewares/Third_Party/LwIP/src/api/sockets.c **** alloc_socket(struct netconn *newconn, int accepted)
 402:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 403:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int i;
 404:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_DECL_PROTECT(lev);
 405:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 406:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* allocate a new socket identifier */
 407:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   for (i = 0; i < NUM_SOCKETS; ++i) {
 408:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Protect socket array */
 409:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SYS_ARCH_PROTECT(lev);
 410:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (!sockets[i].conn && (sockets[i].select_waiting == 0)) {
 411:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].conn       = newconn;
 412:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* The socket is not yet known to anyone, so no need to protect
 413:Middlewares/Third_Party/LwIP/src/api/sockets.c ****          after having marked it as used. */
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 11


 414:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       SYS_ARCH_UNPROTECT(lev);
 415:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].lastdata   = NULL;
 416:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].lastoffset = 0;
 417:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].rcvevent   = 0;
 418:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* TCP sendbuf is empty, but the socket is not yet writable until connected
 419:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        * (unless it has been created by accept()). */
 420:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].sendevent  = (NETCONNTYPE_GROUP(newconn->type) == NETCONN_TCP ? (accepted != 0) : 
 421:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].errevent   = 0;
 422:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].err        = 0;
 423:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return i + LWIP_SOCKET_OFFSET;
 424:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 425:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SYS_ARCH_UNPROTECT(lev);
 426:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 427:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return -1;
 428:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 429:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 430:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** Free a socket. The socket's netconn must have been
 431:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * delete before!
 432:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
 433:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param sock the socket to free
 434:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param is_tcp != 0 for TCP sockets, used to free lastdata
 435:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
 436:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void
 437:Middlewares/Third_Party/LwIP/src/api/sockets.c **** free_socket(struct lwip_sock *sock, int is_tcp)
 438:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 439:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   void *lastdata;
 440:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 441:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   lastdata         = sock->lastdata;
 442:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock->lastdata   = NULL;
 443:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock->lastoffset = 0;
 444:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock->err        = 0;
 445:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 446:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Protect socket array */
 447:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_SET(sock->conn, NULL);
 448:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* don't use 'sock' after this line, as another task might have allocated it */
 449:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 450:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (lastdata != NULL) {
 451:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (is_tcp) {
 452:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       pbuf_free((struct pbuf *)lastdata);
 453:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
 454:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       netbuf_delete((struct netbuf *)lastdata);
 455:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 456:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 457:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 458:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 459:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Below this, the well-known socket functions are implemented.
 460:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Use google.com or opengroup.org to get a good description :-)
 461:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
 462:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Exceptions are documented!
 463:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
 464:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 465:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
 466:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_accept(int s, struct sockaddr *addr, socklen_t *addrlen)
 467:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 468:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock, *nsock;
 469:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct netconn *newconn;
 470:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   ip_addr_t naddr;
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 12


 471:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u16_t port = 0;
 472:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int newsock;
 473:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err;
 474:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_DECL_PROTECT(lev);
 475:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 476:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_accept(%d)...\n", s));
 477:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = get_socket(s);
 478:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 479:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 480:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 481:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 482:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (netconn_is_nonblocking(sock->conn) && (sock->rcvevent <= 0)) {
 483:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_accept(%d): returning EWOULDBLOCK\n", s));
 484:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     set_errno(EWOULDBLOCK);
 485:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 486:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 487:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 488:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* wait for a new connection */
 489:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = netconn_accept(sock->conn, &newconn);
 490:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (err != ERR_OK) {
 491:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_accept(%d): netconn_acept failed, err=%d\n", s, err));
 492:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) != NETCONN_TCP) {
 493:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, EOPNOTSUPP);
 494:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else if (err == ERR_CLSD) {
 495:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, EINVAL);
 496:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
 497:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, err_to_errno(err));
 498:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 499:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 500:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 501:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ASSERT("newconn != NULL", newconn != NULL);
 502:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 503:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   newsock = alloc_socket(newconn, 1);
 504:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (newsock == -1) {
 505:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     netconn_delete(newconn);
 506:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, ENFILE);
 507:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 508:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 509:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ASSERT("invalid socket index", (newsock >= LWIP_SOCKET_OFFSET) && (newsock < NUM_SOCKETS + L
 510:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ASSERT("newconn->callback == event_callback", newconn->callback == event_callback);
 511:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   nsock = &sockets[newsock - LWIP_SOCKET_OFFSET];
 512:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 513:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* See event_callback: If data comes in right away after an accept, even
 514:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    * though the server task might not have created a new socket yet.
 515:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    * In that case, newconn->socket is counted down (newconn->socket--),
 516:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    * so nsock->rcvevent is >= 1 here!
 517:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    */
 518:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_PROTECT(lev);
 519:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   nsock->rcvevent += (s16_t)(-1 - newconn->socket);
 520:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   newconn->socket = newsock;
 521:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_UNPROTECT(lev);
 522:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 523:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Note that POSIX only requires us to check addr is non-NULL. addrlen must
 524:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    * not be NULL if addr is valid.
 525:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    */
 526:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (addr != NULL) {
 527:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     union sockaddr_aligned tempaddr;
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 13


 528:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* get the IP address and port of the remote host */
 529:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     err = netconn_peer(newconn, &naddr, &port);
 530:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (err != ERR_OK) {
 531:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_accept(%d): netconn_peer failed, err=%d\n", s, err));
 532:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       netconn_delete(newconn);
 533:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       free_socket(nsock, 1);
 534:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, err_to_errno(err));
 535:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
 536:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 537:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_ASSERT("addr valid but addrlen NULL", addrlen != NULL);
 538:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 539:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     IPADDR_PORT_TO_SOCKADDR(&tempaddr, &naddr, port);
 540:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (*addrlen > tempaddr.sa.sa_len) {
 541:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *addrlen = tempaddr.sa.sa_len;
 542:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 543:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     MEMCPY(addr, &tempaddr, *addrlen);
 544:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 545:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_accept(%d) returning new sock=%d addr=", s, newsock));
 546:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ip_addr_debug_print_val(SOCKETS_DEBUG, naddr);
 547:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, (" port=%"U16_F"\n", port));
 548:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
 549:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_accept(%d) returning new sock=%d", s, newsock));
 550:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 551:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 552:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, 0);
 553:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return newsock;
 554:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 555:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 556:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
 557:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_bind(int s, const struct sockaddr *name, socklen_t namelen)
 558:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 559:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 560:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   ip_addr_t local_addr;
 561:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u16_t local_port;
 562:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err;
 563:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 564:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = get_socket(s);
 565:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 566:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 567:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 568:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 569:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!SOCK_ADDR_TYPE_MATCH(name, sock)) {
 570:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* sockaddr does not match socket type (IPv4/IPv6) */
 571:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(ERR_VAL));
 572:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 573:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 574:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 575:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* check size, family and alignment of 'name' */
 576:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ERROR("lwip_bind: invalid address", (IS_SOCK_ADDR_LEN_VALID(namelen) &&
 577:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              IS_SOCK_ADDR_TYPE_VALID(name) && IS_SOCK_ADDR_ALIGNED(name)),
 578:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              sock_set_errno(sock, err_to_errno(ERR_ARG)); return -1;);
 579:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_UNUSED_ARG(namelen);
 580:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 581:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SOCKADDR_TO_IPADDR_PORT(name, &local_addr, local_port);
 582:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_bind(%d, addr=", s));
 583:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   ip_addr_debug_print_val(SOCKETS_DEBUG, local_addr);
 584:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, (" port=%"U16_F")\n", local_port));
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 14


 585:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 586:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV4 && LWIP_IPV6
 587:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Dual-stack: Unmap IPv4 mapped IPv6 addresses */
 588:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (IP_IS_V6_VAL(local_addr) && ip6_addr_isipv4mappedipv6(ip_2_ip6(&local_addr))) {
 589:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     unmap_ipv4_mapped_ipv6(ip_2_ip4(&local_addr), ip_2_ip6(&local_addr));
 590:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     IP_SET_TYPE_VAL(local_addr, IPADDR_TYPE_V4);
 591:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 592:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV4 && LWIP_IPV6 */
 593:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 594:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = netconn_bind(sock->conn, &local_addr, local_port);
 595:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 596:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (err != ERR_OK) {
 597:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_bind(%d) failed, err=%d\n", s, err));
 598:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(err));
 599:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 600:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 601:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 602:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_bind(%d) succeeded\n", s));
 603:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, 0);
 604:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return 0;
 605:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 606:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 607:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
 608:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_close(int s)
 609:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 610:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 611:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int is_tcp = 0;
 612:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err;
 613:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 614:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_close(%d)\n", s));
 615:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 616:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = get_socket(s);
 617:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 618:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 619:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 620:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 621:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (sock->conn != NULL) {
 622:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     is_tcp = NETCONNTYPE_GROUP(netconn_type(sock->conn)) == NETCONN_TCP;
 623:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
 624:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_ASSERT("sock->lastdata == NULL", sock->lastdata == NULL);
 625:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 626:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 627:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IGMP
 628:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* drop all possibly joined IGMP memberships */
 629:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   lwip_socket_drop_registered_memberships(s);
 630:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IGMP */
 631:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 632:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = netconn_delete(sock->conn);
 633:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (err != ERR_OK) {
 634:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(err));
 635:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 636:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 637:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 638:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   free_socket(sock, is_tcp);
 639:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   set_errno(0);
 640:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return 0;
 641:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 15


 642:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 643:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
 644:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_connect(int s, const struct sockaddr *name, socklen_t namelen)
 645:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 646:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 647:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err;
 648:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 649:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = get_socket(s);
 650:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 651:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 652:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 653:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 654:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!SOCK_ADDR_TYPE_MATCH_OR_UNSPEC(name, sock)) {
 655:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* sockaddr does not match socket type (IPv4/IPv6) */
 656:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(ERR_VAL));
 657:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 658:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 659:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 660:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_UNUSED_ARG(namelen);
 661:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (name->sa_family == AF_UNSPEC) {
 662:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_connect(%d, AF_UNSPEC)\n", s));
 663:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     err = netconn_disconnect(sock->conn);
 664:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
 665:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ip_addr_t remote_addr;
 666:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     u16_t remote_port;
 667:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 668:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* check size, family and alignment of 'name' */
 669:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_ERROR("lwip_connect: invalid address", IS_SOCK_ADDR_LEN_VALID(namelen) &&
 670:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                IS_SOCK_ADDR_TYPE_VALID_OR_UNSPEC(name) && IS_SOCK_ADDR_ALIGNED(name),
 671:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                sock_set_errno(sock, err_to_errno(ERR_ARG)); return -1;);
 672:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 673:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SOCKADDR_TO_IPADDR_PORT(name, &remote_addr, remote_port);
 674:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_connect(%d, addr=", s));
 675:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ip_addr_debug_print_val(SOCKETS_DEBUG, remote_addr);
 676:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, (" port=%"U16_F")\n", remote_port));
 677:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 678:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV4 && LWIP_IPV6
 679:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Dual-stack: Unmap IPv4 mapped IPv6 addresses */
 680:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (IP_IS_V6_VAL(remote_addr) && ip6_addr_isipv4mappedipv6(ip_2_ip6(&remote_addr))) {
 681:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       unmap_ipv4_mapped_ipv6(ip_2_ip4(&remote_addr), ip_2_ip6(&remote_addr));
 682:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       IP_SET_TYPE_VAL(remote_addr, IPADDR_TYPE_V4);
 683:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 684:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV4 && LWIP_IPV6 */
 685:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 686:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     err = netconn_connect(sock->conn, &remote_addr, remote_port);
 687:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 688:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 689:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (err != ERR_OK) {
 690:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_connect(%d) failed, err=%d\n", s, err));
 691:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(err));
 692:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 693:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 694:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 695:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_connect(%d) succeeded\n", s));
 696:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, 0);
 697:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return 0;
 698:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 16


 699:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 700:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /**
 701:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Set a socket into listen mode.
 702:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * The socket may not have been used for another connection previously.
 703:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
 704:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param s the socket to set to listening mode
 705:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param backlog (ATTENTION: needs TCP_LISTEN_BACKLOG=1)
 706:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @return 0 on success, non-zero on failure
 707:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
 708:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
 709:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_listen(int s, int backlog)
 710:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 711:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 712:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err;
 713:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 714:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_listen(%d, backlog=%d)\n", s, backlog));
 715:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 716:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = get_socket(s);
 717:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 718:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 719:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 720:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 721:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* limit the "backlog" parameter to fit in an u8_t */
 722:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   backlog = LWIP_MIN(LWIP_MAX(backlog, 0), 0xff);
 723:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 724:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = netconn_listen_with_backlog(sock->conn, (u8_t)backlog);
 725:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 726:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (err != ERR_OK) {
 727:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_listen(%d) failed, err=%d\n", s, err));
 728:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) != NETCONN_TCP) {
 729:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, EOPNOTSUPP);
 730:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
 731:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 732:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(err));
 733:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 734:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 735:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 736:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, 0);
 737:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return 0;
 738:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 739:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 740:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
 741:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_recvfrom(int s, void *mem, size_t len, int flags,
 742:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               struct sockaddr *from, socklen_t *fromlen)
 743:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 744:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 745:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   void             *buf = NULL;
 746:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct pbuf      *p;
 747:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u16_t            buflen, copylen;
 748:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int              off = 0;
 749:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u8_t             done = 0;
 750:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t            err;
 751:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 752:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recvfrom(%d, %p, %"SZT_F", 0x%x, ..)\n", s, mem, len, flags));
 753:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = get_socket(s);
 754:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 755:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 17


 756:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 757:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 758:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   do {
 759:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recvfrom: top while sock->lastdata=%p\n", sock->lastdata));
 760:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Check if there is data left from the last recv operation. */
 761:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (sock->lastdata) {
 762:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       buf = sock->lastdata;
 763:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
 764:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* If this is non-blocking call, then check first */
 765:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (((flags & MSG_DONTWAIT) || netconn_is_nonblocking(sock->conn)) &&
 766:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (sock->rcvevent <= 0)) {
 767:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (off > 0) {
 768:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           /* already received data, return that */
 769:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           sock_set_errno(sock, 0);
 770:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           return off;
 771:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 772:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recvfrom(%d): returning EWOULDBLOCK\n", s));
 773:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         set_errno(EWOULDBLOCK);
 774:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return -1;
 775:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 776:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 777:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* No data was left from the previous operation, so we try to get
 778:Middlewares/Third_Party/LwIP/src/api/sockets.c ****          some from the network. */
 779:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) == NETCONN_TCP) {
 780:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         err = netconn_recv_tcp_pbuf(sock->conn, (struct pbuf **)&buf);
 781:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
 782:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         err = netconn_recv(sock->conn, (struct netbuf **)&buf);
 783:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 784:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recvfrom: netconn_recv err=%d, netbuf=%p\n",
 785:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         err, buf));
 786:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 787:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (err != ERR_OK) {
 788:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (off > 0) {
 789:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (err == ERR_CLSD) {
 790:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             /* closed but already received data, ensure select gets the FIN, too */
 791:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             event_callback(sock->conn, NETCONN_EVT_RCVPLUS, 0);
 792:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
 793:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           /* already received data, return that */
 794:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           sock_set_errno(sock, 0);
 795:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           return off;
 796:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 797:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* We should really do some error checking here. */
 798:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recvfrom(%d): buf == NULL, error is \"%s\"!\n",
 799:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           s, lwip_strerr(err)));
 800:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock_set_errno(sock, err_to_errno(err));
 801:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (err == ERR_CLSD) {
 802:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           return 0;
 803:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
 804:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           return -1;
 805:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 806:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 807:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_ASSERT("buf != NULL", buf != NULL);
 808:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->lastdata = buf;
 809:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 810:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 811:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) == NETCONN_TCP) {
 812:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       p = (struct pbuf *)buf;
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 18


 813:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
 814:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       p = ((struct netbuf *)buf)->p;
 815:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 816:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     buflen = p->tot_len;
 817:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recvfrom: buflen=%"U16_F" len=%"SZT_F" off=%d sock->lastoffse
 818:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       buflen, len, off, sock->lastoffset));
 819:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 820:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     buflen -= sock->lastoffset;
 821:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 822:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (len > buflen) {
 823:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       copylen = buflen;
 824:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
 825:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       copylen = (u16_t)len;
 826:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 827:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 828:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* copy the contents of the received buffer into
 829:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     the supplied memory pointer mem */
 830:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     pbuf_copy_partial(p, (u8_t*)mem + off, copylen, sock->lastoffset);
 831:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 832:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     off += copylen;
 833:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 834:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) == NETCONN_TCP) {
 835:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_ASSERT("invalid copylen, len would underflow", len >= copylen);
 836:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       len -= copylen;
 837:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((len <= 0) ||
 838:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (p->flags & PBUF_FLAG_PUSH) ||
 839:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (sock->rcvevent <= 0) ||
 840:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           ((flags & MSG_PEEK) != 0)) {
 841:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         done = 1;
 842:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 843:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
 844:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       done = 1;
 845:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 846:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 847:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Check to see from where the data was.*/
 848:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (done) {
 849:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if !SOCKETS_DEBUG
 850:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (from && fromlen)
 851:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* !SOCKETS_DEBUG */
 852:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       {
 853:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         u16_t port;
 854:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         ip_addr_t tmpaddr;
 855:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         ip_addr_t *fromaddr;
 856:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         union sockaddr_aligned saddr;
 857:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recvfrom(%d): addr=", s));
 858:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) == NETCONN_TCP) {
 859:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           fromaddr = &tmpaddr;
 860:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           netconn_getaddr(sock->conn, fromaddr, &port, 0);
 861:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
 862:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           port = netbuf_fromport((struct netbuf *)buf);
 863:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           fromaddr = netbuf_fromaddr((struct netbuf *)buf);
 864:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 865:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 866:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV4 && LWIP_IPV6
 867:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* Dual-stack: Map IPv4 addresses to IPv4 mapped IPv6 */
 868:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (NETCONNTYPE_ISIPV6(netconn_type(sock->conn)) && IP_IS_V4(fromaddr)) {
 869:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           ip4_2_ipv4_mapped_ipv6(ip_2_ip6(fromaddr), ip_2_ip4(fromaddr));
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 19


 870:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           IP_SET_TYPE(fromaddr, IPADDR_TYPE_V6);
 871:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 872:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV4 && LWIP_IPV6 */
 873:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 874:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         IPADDR_PORT_TO_SOCKADDR(&saddr, fromaddr, port);
 875:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         ip_addr_debug_print(SOCKETS_DEBUG, fromaddr);
 876:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, (" port=%"U16_F" len=%d\n", port, off));
 877:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if SOCKETS_DEBUG
 878:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (from && fromlen)
 879:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* SOCKETS_DEBUG */
 880:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         {
 881:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (*fromlen > saddr.sa.sa_len) {
 882:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             *fromlen = saddr.sa.sa_len;
 883:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
 884:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           MEMCPY(from, &saddr, *fromlen);
 885:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 886:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 887:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 888:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 889:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* If we don't peek the incoming message... */
 890:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if ((flags & MSG_PEEK) == 0) {
 891:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* If this is a TCP socket, check if there is data left in the
 892:Middlewares/Third_Party/LwIP/src/api/sockets.c ****          buffer. If so, it should be saved in the sock structure for next
 893:Middlewares/Third_Party/LwIP/src/api/sockets.c ****          time around. */
 894:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((NETCONNTYPE_GROUP(netconn_type(sock->conn)) == NETCONN_TCP) && (buflen - copylen > 0)) {
 895:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock->lastdata = buf;
 896:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock->lastoffset += copylen;
 897:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recvfrom: lastdata now netbuf=%p\n", buf));
 898:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
 899:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock->lastdata = NULL;
 900:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock->lastoffset = 0;
 901:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recvfrom: deleting netbuf=%p\n", buf));
 902:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) == NETCONN_TCP) {
 903:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           pbuf_free((struct pbuf *)buf);
 904:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
 905:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           netbuf_delete((struct netbuf *)buf);
 906:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 907:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         buf = NULL;
 908:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 909:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 910:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } while (!done);
 911:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 912:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, 0);
 913:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return off;
 914:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 915:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 916:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
 917:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_read(int s, void *mem, size_t len)
 918:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 919:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return lwip_recvfrom(s, mem, len, 0, NULL, NULL);
 920:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 921:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 922:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
 923:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_recv(int s, void *mem, size_t len, int flags)
 924:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 925:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return lwip_recvfrom(s, mem, len, flags, NULL, NULL);
 926:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 20


 927:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 928:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
 929:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_send(int s, const void *data, size_t size, int flags)
 930:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 931:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 932:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err;
 933:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u8_t write_flags;
 934:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   size_t written;
 935:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 936:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_send(%d, data=%p, size=%"SZT_F", flags=0x%x)\n",
 937:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                               s, data, size, flags));
 938:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 939:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = get_socket(s);
 940:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 941:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 942:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 943:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 944:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) != NETCONN_TCP) {
 945:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if (LWIP_UDP || LWIP_RAW)
 946:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return lwip_sendto(s, data, size, flags, NULL, 0);
 947:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* (LWIP_UDP || LWIP_RAW) */
 948:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(ERR_ARG));
 949:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 950:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* (LWIP_UDP || LWIP_RAW) */
 951:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 952:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 953:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   write_flags = NETCONN_COPY |
 954:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ((flags & MSG_MORE)     ? NETCONN_MORE      : 0) |
 955:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ((flags & MSG_DONTWAIT) ? NETCONN_DONTBLOCK : 0);
 956:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   written = 0;
 957:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = netconn_write_partly(sock->conn, data, size, write_flags, &written);
 958:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 959:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_send(%d) err=%d written=%"SZT_F"\n", s, err, written));
 960:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, err_to_errno(err));
 961:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return (err == ERR_OK ? (int)written : -1);
 962:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 963:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 964:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
 965:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_sendmsg(int s, const struct msghdr *msg, int flags)
 966:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 967:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 968:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int i;
 969:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCP
 970:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u8_t write_flags;
 971:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   size_t written;
 972:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
 973:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int size = 0;
 974:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err = ERR_OK;
 975:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 976:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = get_socket(s);
 977:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 978:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 979:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 980:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 981:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ERROR("lwip_sendmsg: invalid msghdr", msg != NULL,
 982:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              sock_set_errno(sock, err_to_errno(ERR_ARG)); return -1;);
 983:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 21


 984:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_UNUSED_ARG(msg->msg_control);
 985:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_UNUSED_ARG(msg->msg_controllen);
 986:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_UNUSED_ARG(msg->msg_flags);
 987:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ERROR("lwip_sendmsg: invalid msghdr iov", (msg->msg_iov != NULL && msg->msg_iovlen != 0),
 988:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              sock_set_errno(sock, err_to_errno(ERR_ARG)); return -1;);
 989:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 990:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) == NETCONN_TCP) {
 991:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCP
 992:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     write_flags = NETCONN_COPY |
 993:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ((flags & MSG_MORE)     ? NETCONN_MORE      : 0) |
 994:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ((flags & MSG_DONTWAIT) ? NETCONN_DONTBLOCK : 0);
 995:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 996:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     for (i = 0; i < msg->msg_iovlen; i++) {
 997:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       u8_t apiflags = write_flags;
 998:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (i + 1 < msg->msg_iovlen) {
 999:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         apiflags |= NETCONN_MORE;
1000:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1001:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       written = 0;
1002:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = netconn_write_partly(sock->conn, msg->msg_iov[i].iov_base, msg->msg_iov[i].iov_len, wri
1003:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (err == ERR_OK) {
1004:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         size += written;
1005:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* check that the entire IO vector was accepected, if not return a partial write */
1006:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (written != msg->msg_iov[i].iov_len)
1007:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
1008:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1009:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* none of this IO vector was accepted, but previous was, return partial write and conceal ER
1010:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       else if (err == ERR_WOULDBLOCK && size > 0) {
1011:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         err = ERR_OK;
1012:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* let ERR_WOULDBLOCK persist on the netconn since we are returning ERR_OK */
1013:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         break;
1014:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
1015:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         size = -1;
1016:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         break;
1017:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1018:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1019:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(err));
1020:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return size;
1021:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_TCP */
1022:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(ERR_ARG));
1023:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
1024:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_TCP */
1025:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1026:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* else, UDP and RAW NETCONNs */
1027:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDP || LWIP_RAW
1028:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   {
1029:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     struct netbuf *chain_buf;
1030:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1031:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_UNUSED_ARG(flags);
1032:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_ERROR("lwip_sendmsg: invalid msghdr name", (((msg->msg_name == NULL) && (msg->msg_namelen 
1033:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                IS_SOCK_ADDR_LEN_VALID(msg->msg_namelen)) ,
1034:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                sock_set_errno(sock, err_to_errno(ERR_ARG)); return -1;);
1035:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1036:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* initialize chain buffer with destination */
1037:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     chain_buf = netbuf_new();
1038:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (!chain_buf) {
1039:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, err_to_errno(ERR_MEM));
1040:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 22


1041:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1042:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (msg->msg_name) {
1043:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       u16_t remote_port;
1044:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       SOCKADDR_TO_IPADDR_PORT((const struct sockaddr *)msg->msg_name, &chain_buf->addr, remote_port
1045:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       netbuf_fromport(chain_buf) = remote_port;
1046:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1047:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETIF_TX_SINGLE_PBUF
1048:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     for (i = 0; i < msg->msg_iovlen; i++) {
1049:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       size += msg->msg_iov[i].iov_len;
1050:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1051:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Allocate a new netbuf and copy the data into it. */
1052:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (netbuf_alloc(chain_buf, (u16_t)size) == NULL) {
1053:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        err = ERR_MEM;
1054:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
1055:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* flatten the IO vectors */
1056:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       size_t offset = 0;
1057:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       for (i = 0; i < msg->msg_iovlen; i++) {
1058:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         MEMCPY(&((u8_t*)chain_buf->p->payload)[offset], msg->msg_iov[i].iov_base, msg->msg_iov[i].i
1059:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         offset += msg->msg_iov[i].iov_len;
1060:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1061:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_CHECKSUM_ON_COPY
1062:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       {
1063:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* This can be improved by using LWIP_CHKSUM_COPY() and aggregating the checksum for each I
1064:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         u16_t chksum = ~inet_chksum_pbuf(chain_buf->p);
1065:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         netbuf_set_chksum(chain_buf, chksum);
1066:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1067:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_CHECKSUM_ON_COPY */
1068:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = ERR_OK;
1069:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1070:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_NETIF_TX_SINGLE_PBUF */
1071:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* create a chained netbuf from the IO vectors. NOTE: we assemble a pbuf chain
1072:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        manually to avoid having to allocate, chain, and delete a netbuf for each iov */
1073:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     for (i = 0; i < msg->msg_iovlen; i++) {
1074:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       struct pbuf *p = pbuf_alloc(PBUF_TRANSPORT, 0, PBUF_REF);
1075:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (p == NULL) {
1076:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         err = ERR_MEM; /* let netbuf_delete() cleanup chain_buf */
1077:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         break;
1078:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1079:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       p->payload = msg->msg_iov[i].iov_base;
1080:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_ASSERT("iov_len < u16_t", msg->msg_iov[i].iov_len <= 0xFFFF);
1081:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       p->len = p->tot_len = (u16_t)msg->msg_iov[i].iov_len;
1082:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* netbuf empty, add new pbuf */
1083:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (chain_buf->p == NULL) {
1084:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         chain_buf->p = chain_buf->ptr = p;
1085:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* add pbuf to existing pbuf chain */
1086:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
1087:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         pbuf_cat(chain_buf->p, p);
1088:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1089:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1090:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* save size of total chain */
1091:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (err == ERR_OK) {
1092:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       size = netbuf_len(chain_buf);
1093:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1094:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_NETIF_TX_SINGLE_PBUF */
1095:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1096:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (err == ERR_OK) {
1097:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV4 && LWIP_IPV6
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 23


1098:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* Dual-stack: Unmap IPv4 mapped IPv6 addresses */
1099:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (IP_IS_V6_VAL(chain_buf->addr) && ip6_addr_isipv4mappedipv6(ip_2_ip6(&chain_buf->addr))) {
1100:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         unmap_ipv4_mapped_ipv6(ip_2_ip4(&chain_buf->addr), ip_2_ip6(&chain_buf->addr));
1101:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         IP_SET_TYPE_VAL(chain_buf->addr, IPADDR_TYPE_V4);
1102:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1103:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV4 && LWIP_IPV6 */
1104:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1105:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* send the data */
1106:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = netconn_send(sock->conn, chain_buf);
1107:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1108:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1109:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* deallocated the buffer */
1110:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     netbuf_delete(chain_buf);
1111:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1112:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(err));
1113:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return (err == ERR_OK ? size : -1);
1114:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1115:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_UDP || LWIP_RAW */
1116:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, err_to_errno(ERR_ARG));
1117:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return -1;
1118:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_UDP || LWIP_RAW */
1119:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
1120:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1121:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
1122:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_sendto(int s, const void *data, size_t size, int flags,
1123:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        const struct sockaddr *to, socklen_t tolen)
1124:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
1125:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
1126:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err;
1127:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u16_t short_size;
1128:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u16_t remote_port;
1129:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct netbuf buf;
1130:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1131:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = get_socket(s);
1132:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
1133:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
1134:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1135:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1136:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) == NETCONN_TCP) {
1137:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCP
1138:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return lwip_send(s, data, size, flags);
1139:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_TCP */
1140:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_UNUSED_ARG(flags);
1141:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(ERR_ARG));
1142:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
1143:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_TCP */
1144:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1145:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1146:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* @todo: split into multiple sendto's? */
1147:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ASSERT("lwip_sendto: size must fit in u16_t", size <= 0xffff);
1148:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   short_size = (u16_t)size;
1149:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ERROR("lwip_sendto: invalid address", (((to == NULL) && (tolen == 0)) ||
1150:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              (IS_SOCK_ADDR_LEN_VALID(tolen) &&
1151:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              IS_SOCK_ADDR_TYPE_VALID(to) && IS_SOCK_ADDR_ALIGNED(to))),
1152:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              sock_set_errno(sock, err_to_errno(ERR_ARG)); return -1;);
1153:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_UNUSED_ARG(tolen);
1154:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 24


1155:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* initialize a buffer */
1156:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   buf.p = buf.ptr = NULL;
1157:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_CHECKSUM_ON_COPY
1158:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   buf.flags = 0;
1159:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_CHECKSUM_ON_COPY */
1160:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (to) {
1161:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SOCKADDR_TO_IPADDR_PORT(to, &buf.addr, remote_port);
1162:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
1163:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     remote_port = 0;
1164:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ip_addr_set_any(NETCONNTYPE_ISIPV6(netconn_type(sock->conn)), &buf.addr);
1165:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1166:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   netbuf_fromport(&buf) = remote_port;
1167:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1168:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1169:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_sendto(%d, data=%p, short_size=%"U16_F", flags=0x%x to=",
1170:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               s, data, short_size, flags));
1171:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   ip_addr_debug_print(SOCKETS_DEBUG, &buf.addr);
1172:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, (" port=%"U16_F"\n", remote_port));
1173:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1174:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* make the buffer point to the data that should be sent */
1175:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETIF_TX_SINGLE_PBUF
1176:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Allocate a new netbuf and copy the data into it. */
1177:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (netbuf_alloc(&buf, short_size) == NULL) {
1178:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     err = ERR_MEM;
1179:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
1180:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_CHECKSUM_ON_COPY
1181:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) != NETCONN_RAW) {
1182:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       u16_t chksum = LWIP_CHKSUM_COPY(buf.p->payload, data, short_size);
1183:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       netbuf_set_chksum(&buf, chksum);
1184:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else
1185:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_CHECKSUM_ON_COPY */
1186:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     {
1187:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       MEMCPY(buf.p->payload, data, short_size);
1188:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1189:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     err = ERR_OK;
1190:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1191:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_NETIF_TX_SINGLE_PBUF */
1192:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = netbuf_ref(&buf, data, short_size);
1193:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_NETIF_TX_SINGLE_PBUF */
1194:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (err == ERR_OK) {
1195:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV4 && LWIP_IPV6
1196:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Dual-stack: Unmap IPv4 mapped IPv6 addresses */
1197:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (IP_IS_V6_VAL(buf.addr) && ip6_addr_isipv4mappedipv6(ip_2_ip6(&buf.addr))) {
1198:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       unmap_ipv4_mapped_ipv6(ip_2_ip4(&buf.addr), ip_2_ip6(&buf.addr));
1199:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       IP_SET_TYPE_VAL(buf.addr, IPADDR_TYPE_V4);
1200:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1201:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV4 && LWIP_IPV6 */
1202:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1203:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* send the data */
1204:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     err = netconn_send(sock->conn, &buf);
1205:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1206:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1207:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* deallocated the buffer */
1208:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   netbuf_free(&buf);
1209:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1210:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, err_to_errno(err));
1211:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return (err == ERR_OK ? short_size : -1);
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 25


1212:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
1213:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1214:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
1215:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_socket(int domain, int type, int protocol)
1216:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
1217:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct netconn *conn;
1218:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int i;
1219:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1220:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_UNUSED_ARG(domain); /* @todo: check this */
1221:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1222:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* create a netconn */
1223:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   switch (type) {
1224:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case SOCK_RAW:
1225:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     conn = netconn_new_with_proto_and_callback(DOMAIN_TO_NETCONN_TYPE(domain, NETCONN_RAW),
1226:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                                (u8_t)protocol, event_callback);
1227:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_socket(%s, SOCK_RAW, %d) = ",
1228:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                  domain == PF_INET ? "PF_INET" : "UNKNOWN", protocol));
1229:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
1230:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case SOCK_DGRAM:
1231:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     conn = netconn_new_with_callback(DOMAIN_TO_NETCONN_TYPE(domain,
1232:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                  ((protocol == IPPROTO_UDPLITE) ? NETCONN_UDPLITE : NETCONN_UDP)) ,
1233:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                  event_callback);
1234:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_socket(%s, SOCK_DGRAM, %d) = ",
1235:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                  domain == PF_INET ? "PF_INET" : "UNKNOWN", protocol));
1236:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
1237:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case SOCK_STREAM:
1238:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     conn = netconn_new_with_callback(DOMAIN_TO_NETCONN_TYPE(domain, NETCONN_TCP), event_callback);
1239:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_socket(%s, SOCK_STREAM, %d) = ",
1240:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                  domain == PF_INET ? "PF_INET" : "UNKNOWN", protocol));
1241:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
1242:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   default:
1243:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_socket(%d, %d/UNKNOWN, %d) = -1\n",
1244:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                  domain, type, protocol));
1245:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     set_errno(EINVAL);
1246:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
1247:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1248:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1249:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!conn) {
1250:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("-1 / ENOBUFS (could not create netconn)\n"));
1251:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     set_errno(ENOBUFS);
1252:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
1253:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1254:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1255:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   i = alloc_socket(conn, 0);
1256:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1257:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (i == -1) {
1258:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     netconn_delete(conn);
1259:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     set_errno(ENFILE);
1260:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
1261:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1262:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   conn->socket = i;
1263:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("%d\n", i));
1264:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   set_errno(0);
1265:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return i;
1266:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
1267:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1268:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 26


1269:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_write(int s, const void *data, size_t size)
1270:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
1271:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return lwip_send(s, data, size, 0);
1272:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
1273:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1274:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
1275:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_writev(int s, const struct iovec *iov, int iovcnt)
1276:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
1277:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct msghdr msg;
1278:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1279:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_name = NULL;
1280:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_namelen = 0;
1281:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Hack: we have to cast via number to cast from 'const' pointer to non-const.
1282:Middlewares/Third_Party/LwIP/src/api/sockets.c ****      Blame the opengroup standard for this inconsistency. */
1283:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_iov = LWIP_CONST_CAST(struct iovec *, iov);
1284:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_iovlen = iovcnt;
1285:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_control = NULL;
1286:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_controllen = 0;
1287:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_flags = 0;
1288:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return lwip_sendmsg(s, &msg, 0);
1289:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
1290:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1291:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /**
1292:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Go through the readset and writeset lists and see which socket of the sockets
1293:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * set in the sets has events. On return, readset, writeset and exceptset have
1294:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * the sockets enabled that had events.
1295:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
1296:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param maxfdp1 the highest socket index in the sets
1297:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param readset_in    set of sockets to check for read events
1298:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param writeset_in   set of sockets to check for write events
1299:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param exceptset_in  set of sockets to check for error events
1300:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param readset_out   set of sockets that had read events
1301:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param writeset_out  set of sockets that had write events
1302:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param exceptset_out set os sockets that had error events
1303:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @return number of sockets that had events (read/write/exception) (>= 0)
1304:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
1305:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static int
1306:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_selscan(int maxfdp1, fd_set *readset_in, fd_set *writeset_in, fd_set *exceptset_in,
1307:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              fd_set *readset_out, fd_set *writeset_out, fd_set *exceptset_out)
1308:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
1309:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int i, nready = 0;
1310:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   fd_set lreadset, lwriteset, lexceptset;
1311:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
1312:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_DECL_PROTECT(lev);
1313:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1314:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   FD_ZERO(&lreadset);
1315:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   FD_ZERO(&lwriteset);
1316:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   FD_ZERO(&lexceptset);
1317:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1318:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Go through each socket in each list to count number of sockets which
1319:Middlewares/Third_Party/LwIP/src/api/sockets.c ****      currently match */
1320:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   for (i = LWIP_SOCKET_OFFSET; i < maxfdp1; i++) {
1321:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* if this FD is not in the set, continue */
1322:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (!(readset_in && FD_ISSET(i, readset_in)) &&
1323:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         !(writeset_in && FD_ISSET(i, writeset_in)) &&
1324:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         !(exceptset_in && FD_ISSET(i, exceptset_in))) {
1325:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       continue;
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 27


1326:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1327:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* First get the socket's status (protected)... */
1328:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SYS_ARCH_PROTECT(lev);
1329:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock = tryget_socket(i);
1330:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (sock != NULL) {
1331:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       void* lastdata = sock->lastdata;
1332:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       s16_t rcvevent = sock->rcvevent;
1333:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       u16_t sendevent = sock->sendevent;
1334:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       u16_t errevent = sock->errevent;
1335:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       SYS_ARCH_UNPROTECT(lev);
1336:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1337:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* ... then examine it: */
1338:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* See if netconn of this socket is ready for read */
1339:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (readset_in && FD_ISSET(i, readset_in) && ((lastdata != NULL) || (rcvevent > 0))) {
1340:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         FD_SET(i, &lreadset);
1341:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_selscan: fd=%d ready for reading\n", i));
1342:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         nready++;
1343:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1344:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* See if netconn of this socket is ready for write */
1345:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (writeset_in && FD_ISSET(i, writeset_in) && (sendevent != 0)) {
1346:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         FD_SET(i, &lwriteset);
1347:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_selscan: fd=%d ready for writing\n", i));
1348:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         nready++;
1349:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1350:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* See if netconn of this socket had an error */
1351:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (exceptset_in && FD_ISSET(i, exceptset_in) && (errevent != 0)) {
1352:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         FD_SET(i, &lexceptset);
1353:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_selscan: fd=%d ready for exception\n", i));
1354:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         nready++;
1355:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1356:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
1357:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       SYS_ARCH_UNPROTECT(lev);
1358:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* continue on to next FD in list */
1359:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1360:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1361:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* copy local sets to the ones provided as arguments */
1362:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   *readset_out = lreadset;
1363:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   *writeset_out = lwriteset;
1364:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   *exceptset_out = lexceptset;
1365:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1366:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ASSERT("nready >= 0", nready >= 0);
1367:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return nready;
1368:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
1369:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1370:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
1371:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_select(int maxfdp1, fd_set *readset, fd_set *writeset, fd_set *exceptset,
1372:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             struct timeval *timeout)
1373:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
1374:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u32_t waitres = 0;
1375:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int nready;
1376:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   fd_set lreadset, lwriteset, lexceptset;
1377:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u32_t msectimeout;
1378:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_select_cb select_cb;
1379:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int i;
1380:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int maxfdp2;
1381:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETCONN_SEM_PER_THREAD
1382:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int waited = 0;
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 28


1383:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
1384:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_DECL_PROTECT(lev);
1385:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1386:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_select(%d, %p, %p, %p, tvsec=%"S32_F" tvusec=%"S32_F")\n",
1387:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   maxfdp1, (void *)readset, (void *) writeset, (void *) exceptset,
1388:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   timeout ? (s32_t)timeout->tv_sec : (s32_t)-1,
1389:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   timeout ? (s32_t)timeout->tv_usec : (s32_t)-1));
1390:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1391:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Go through each socket in each list to count number of sockets which
1392:Middlewares/Third_Party/LwIP/src/api/sockets.c ****      currently match */
1393:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   nready = lwip_selscan(maxfdp1, readset, writeset, exceptset, &lreadset, &lwriteset, &lexceptset);
1394:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1395:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* If we don't have any current events, then suspend if we are supposed to */
1396:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!nready) {
1397:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (timeout && timeout->tv_sec == 0 && timeout->tv_usec == 0) {
1398:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_select: no timeout, returning 0\n"));
1399:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* This is OK as the local fdsets are empty and nready is zero,
1400:Middlewares/Third_Party/LwIP/src/api/sockets.c ****          or we would have returned earlier. */
1401:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       goto return_copy_fdsets;
1402:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1403:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1404:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* None ready: add our semaphore to list:
1405:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        We don't actually need any dynamic memory. Our entry on the
1406:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        list is only valid while we are in this function, so it's ok
1407:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        to use local variables. */
1408:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1409:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb.next = NULL;
1410:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb.prev = NULL;
1411:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb.readset = readset;
1412:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb.writeset = writeset;
1413:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb.exceptset = exceptset;
1414:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb.sem_signalled = 0;
1415:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETCONN_SEM_PER_THREAD
1416:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb.sem = LWIP_NETCONN_THREAD_SEM_GET();
1417:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_NETCONN_SEM_PER_THREAD */
1418:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (sys_sem_new(&select_cb.sem, 0) != ERR_OK) {
1419:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* failed to create semaphore */
1420:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       set_errno(ENOMEM);
1421:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
1422:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1423:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_NETCONN_SEM_PER_THREAD */
1424:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1425:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Protect the select_cb_list */
1426:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SYS_ARCH_PROTECT(lev);
1427:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1428:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Put this select_cb on top of list */
1429:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb.next = select_cb_list;
1430:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (select_cb_list != NULL) {
1431:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       select_cb_list->prev = &select_cb;
1432:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1433:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb_list = &select_cb;
1434:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Increasing this counter tells event_callback that the list has changed. */
1435:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb_ctr++;
1436:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1437:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Now we can safely unprotect */
1438:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SYS_ARCH_UNPROTECT(lev);
1439:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 29


1440:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Increase select_waiting for each socket we are interested in */
1441:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     maxfdp2 = maxfdp1;
1442:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     for (i = LWIP_SOCKET_OFFSET; i < maxfdp1; i++) {
1443:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((readset && FD_ISSET(i, readset)) ||
1444:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (writeset && FD_ISSET(i, writeset)) ||
1445:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (exceptset && FD_ISSET(i, exceptset))) {
1446:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         struct lwip_sock *sock;
1447:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         SYS_ARCH_PROTECT(lev);
1448:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock = tryget_socket(i);
1449:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (sock != NULL) {
1450:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           sock->select_waiting++;
1451:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_ASSERT("sock->select_waiting > 0", sock->select_waiting > 0);
1452:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
1453:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           /* Not a valid socket */
1454:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           nready = -1;
1455:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           maxfdp2 = i;
1456:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           SYS_ARCH_UNPROTECT(lev);
1457:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
1458:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
1459:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         SYS_ARCH_UNPROTECT(lev);
1460:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1461:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1462:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1463:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (nready >= 0) {
1464:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* Call lwip_selscan again: there could have been events between
1465:Middlewares/Third_Party/LwIP/src/api/sockets.c ****          the last scan (without us on the list) and putting us on the list! */
1466:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       nready = lwip_selscan(maxfdp1, readset, writeset, exceptset, &lreadset, &lwriteset, &lexcepts
1467:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (!nready) {
1468:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* Still none ready, just wait to be woken */
1469:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (timeout == 0) {
1470:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           /* Wait forever */
1471:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           msectimeout = 0;
1472:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
1473:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           msectimeout =  ((timeout->tv_sec * 1000) + ((timeout->tv_usec + 500)/1000));
1474:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (msectimeout == 0) {
1475:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             /* Wait 1ms at least (0 means wait forever) */
1476:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             msectimeout = 1;
1477:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
1478:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
1479:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1480:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         waitres = sys_arch_sem_wait(SELECT_SEM_PTR(select_cb.sem), msectimeout);
1481:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETCONN_SEM_PER_THREAD
1482:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         waited = 1;
1483:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
1484:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1485:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1486:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1487:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Decrease select_waiting for each socket we are interested in */
1488:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     for (i = LWIP_SOCKET_OFFSET; i < maxfdp2; i++) {
1489:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((readset && FD_ISSET(i, readset)) ||
1490:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (writeset && FD_ISSET(i, writeset)) ||
1491:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (exceptset && FD_ISSET(i, exceptset))) {
1492:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         struct lwip_sock *sock;
1493:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         SYS_ARCH_PROTECT(lev);
1494:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock = tryget_socket(i);
1495:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (sock != NULL) {
1496:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           /* for now, handle select_waiting==0... */
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 30


1497:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_ASSERT("sock->select_waiting > 0", sock->select_waiting > 0);
1498:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (sock->select_waiting > 0) {
1499:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             sock->select_waiting--;
1500:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
1501:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
1502:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           /* Not a valid socket */
1503:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           nready = -1;
1504:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
1505:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         SYS_ARCH_UNPROTECT(lev);
1506:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1507:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1508:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Take us off the list */
1509:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SYS_ARCH_PROTECT(lev);
1510:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (select_cb.next != NULL) {
1511:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       select_cb.next->prev = select_cb.prev;
1512:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1513:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (select_cb_list == &select_cb) {
1514:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_ASSERT("select_cb.prev == NULL", select_cb.prev == NULL);
1515:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       select_cb_list = select_cb.next;
1516:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
1517:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_ASSERT("select_cb.prev != NULL", select_cb.prev != NULL);
1518:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       select_cb.prev->next = select_cb.next;
1519:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1520:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Increasing this counter tells event_callback that the list has changed. */
1521:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb_ctr++;
1522:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SYS_ARCH_UNPROTECT(lev);
1523:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1524:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETCONN_SEM_PER_THREAD
1525:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (select_cb.sem_signalled && (!waited || (waitres == SYS_ARCH_TIMEOUT))) {
1526:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* don't leave the thread-local semaphore signalled */
1527:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sys_arch_sem_wait(select_cb.sem, 1);
1528:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1529:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_NETCONN_SEM_PER_THREAD */
1530:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sys_sem_free(&select_cb.sem);
1531:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_NETCONN_SEM_PER_THREAD */
1532:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1533:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (nready < 0) {
1534:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* This happens when a socket got closed while waiting */
1535:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       set_errno(EBADF);
1536:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
1537:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1538:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1539:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (waitres == SYS_ARCH_TIMEOUT) {
1540:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* Timeout */
1541:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_select: timeout expired\n"));
1542:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* This is OK as the local fdsets are empty and nready is zero,
1543:Middlewares/Third_Party/LwIP/src/api/sockets.c ****          or we would have returned earlier. */
1544:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       goto return_copy_fdsets;
1545:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1546:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1547:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* See what's set */
1548:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     nready = lwip_selscan(maxfdp1, readset, writeset, exceptset, &lreadset, &lwriteset, &lexceptset
1549:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1550:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1551:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_select: nready=%d\n", nready));
1552:Middlewares/Third_Party/LwIP/src/api/sockets.c **** return_copy_fdsets:
1553:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   set_errno(0);
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 31


1554:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (readset) {
1555:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     *readset = lreadset;
1556:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1557:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (writeset) {
1558:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     *writeset = lwriteset;
1559:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1560:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (exceptset) {
1561:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     *exceptset = lexceptset;
1562:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1563:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return nready;
1564:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
1565:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1566:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /**
1567:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Callback registered in the netconn layer for each socket-netconn.
1568:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Processes recvevent (data available) and wakes up tasks waiting for select.
1569:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
1570:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void
1571:Middlewares/Third_Party/LwIP/src/api/sockets.c **** event_callback(struct netconn *conn, enum netconn_evt evt, u16_t len)
1572:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
1573:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int s;
1574:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
1575:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_select_cb *scb;
1576:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int last_select_cb_ctr;
1577:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_DECL_PROTECT(lev);
1578:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1579:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_UNUSED_ARG(len);
1580:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1581:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Get socket */
1582:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (conn) {
1583:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     s = conn->socket;
1584:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (s < 0) {
1585:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* Data comes in right away after an accept, even though
1586:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        * the server task might not have created a new socket yet.
1587:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        * Just count down (or up) if that's the case and we
1588:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        * will use the data later. Note that only receive events
1589:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        * can happen before the new socket is set up. */
1590:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       SYS_ARCH_PROTECT(lev);
1591:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (conn->socket < 0) {
1592:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (evt == NETCONN_EVT_RCVPLUS) {
1593:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           conn->socket--;
1594:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
1595:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         SYS_ARCH_UNPROTECT(lev);
1596:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return;
1597:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1598:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       s = conn->socket;
1599:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       SYS_ARCH_UNPROTECT(lev);
1600:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1601:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1602:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock = get_socket(s);
1603:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (!sock) {
1604:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return;
1605:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1606:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
1607:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return;
1608:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1609:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1610:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_PROTECT(lev);
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 32


1611:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Set event as required */
1612:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   switch (evt) {
1613:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case NETCONN_EVT_RCVPLUS:
1614:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->rcvevent++;
1615:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
1616:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case NETCONN_EVT_RCVMINUS:
1617:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->rcvevent--;
1618:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
1619:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case NETCONN_EVT_SENDPLUS:
1620:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->sendevent = 1;
1621:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
1622:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case NETCONN_EVT_SENDMINUS:
1623:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->sendevent = 0;
1624:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
1625:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case NETCONN_EVT_ERROR:
1626:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->errevent = 1;
1627:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
1628:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
1629:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_ASSERT("unknown event", 0);
1630:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
1631:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1632:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1633:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (sock->select_waiting == 0) {
1634:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* noone is waiting for this socket, no need to check select_cb_list */
1635:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SYS_ARCH_UNPROTECT(lev);
1636:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return;
1637:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1638:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1639:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Now decide if anyone is waiting for this socket */
1640:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* NOTE: This code goes through the select_cb_list list multiple times
1641:Middlewares/Third_Party/LwIP/src/api/sockets.c ****      ONLY IF a select was actually waiting. We go through the list the number
1642:Middlewares/Third_Party/LwIP/src/api/sockets.c ****      of waiting select calls + 1. This list is expected to be small. */
1643:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1644:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* At this point, SYS_ARCH is still protected! */
1645:Middlewares/Third_Party/LwIP/src/api/sockets.c **** again:
1646:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   for (scb = select_cb_list; scb != NULL; scb = scb->next) {
1647:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* remember the state of select_cb_list to detect changes */
1648:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     last_select_cb_ctr = select_cb_ctr;
1649:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (scb->sem_signalled == 0) {
1650:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* semaphore not signalled yet */
1651:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       int do_signal = 0;
1652:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* Test this select call for our socket */
1653:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (sock->rcvevent > 0) {
1654:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (scb->readset && FD_ISSET(s, scb->readset)) {
1655:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           do_signal = 1;
1656:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
1657:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1658:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (sock->sendevent != 0) {
1659:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (!do_signal && scb->writeset && FD_ISSET(s, scb->writeset)) {
1660:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           do_signal = 1;
1661:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
1662:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1663:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (sock->errevent != 0) {
1664:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (!do_signal && scb->exceptset && FD_ISSET(s, scb->exceptset)) {
1665:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           do_signal = 1;
1666:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
1667:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 33


1668:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (do_signal) {
1669:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         scb->sem_signalled = 1;
1670:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* Don't call SYS_ARCH_UNPROTECT() before signaling the semaphore, as this might
1671:Middlewares/Third_Party/LwIP/src/api/sockets.c ****            lead to the select thread taking itself off the list, invalidating the semaphore. */
1672:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sys_sem_signal(SELECT_SEM_PTR(scb->sem));
1673:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1674:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1675:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* unlock interrupts with each step */
1676:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SYS_ARCH_UNPROTECT(lev);
1677:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* this makes sure interrupt protection time is short */
1678:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SYS_ARCH_PROTECT(lev);
1679:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (last_select_cb_ctr != select_cb_ctr) {
1680:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* someone has changed select_cb_list, restart at the beginning */
1681:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       goto again;
1682:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1683:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1684:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_UNPROTECT(lev);
1685:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
1686:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1687:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /**
1688:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Close one end of a full-duplex connection.
1689:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
1690:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
1691:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_shutdown(int s, int how)
1692:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
1693:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
1694:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err;
1695:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u8_t shut_rx = 0, shut_tx = 0;
1696:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1697:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_shutdown(%d, how=%d)\n", s, how));
1698:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1699:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = get_socket(s);
1700:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
1701:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
1702:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1703:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1704:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (sock->conn != NULL) {
1705:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) != NETCONN_TCP) {
1706:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, EOPNOTSUPP);
1707:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
1708:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1709:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
1710:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, ENOTCONN);
1711:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
1712:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1713:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1714:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (how == SHUT_RD) {
1715:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     shut_rx = 1;
1716:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else if (how == SHUT_WR) {
1717:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     shut_tx = 1;
1718:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else if (how == SHUT_RDWR) {
1719:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     shut_rx = 1;
1720:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     shut_tx = 1;
1721:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
1722:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, EINVAL);
1723:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
1724:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 34


1725:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = netconn_shutdown(sock->conn, shut_rx, shut_tx);
1726:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1727:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, err_to_errno(err));
1728:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return (err == ERR_OK ? 0 : -1);
1729:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
1730:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1731:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static int
1732:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_getaddrname(int s, struct sockaddr *name, socklen_t *namelen, u8_t local)
1733:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
1734:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
1735:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   union sockaddr_aligned saddr;
1736:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   ip_addr_t naddr;
1737:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u16_t port;
1738:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err;
1739:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1740:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = get_socket(s);
1741:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
1742:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
1743:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1744:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1745:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* get the IP address and port */
1746:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = netconn_getaddr(sock->conn, &naddr, &port, local);
1747:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (err != ERR_OK) {
1748:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(err));
1749:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
1750:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1751:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1752:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV4 && LWIP_IPV6
1753:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Dual-stack: Map IPv4 addresses to IPv4 mapped IPv6 */
1754:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (NETCONNTYPE_ISIPV6(netconn_type(sock->conn)) &&
1755:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       IP_IS_V4_VAL(naddr)) {
1756:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ip4_2_ipv4_mapped_ipv6(ip_2_ip6(&naddr), ip_2_ip4(&naddr));
1757:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     IP_SET_TYPE_VAL(naddr, IPADDR_TYPE_V6);
1758:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1759:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV4 && LWIP_IPV6 */
1760:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1761:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   IPADDR_PORT_TO_SOCKADDR(&saddr, &naddr, port);
1762:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1763:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getaddrname(%d, addr=", s));
1764:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   ip_addr_debug_print_val(SOCKETS_DEBUG, naddr);
1765:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, (" port=%"U16_F")\n", port));
1766:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1767:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (*namelen > saddr.sa.sa_len) {
1768:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     *namelen = saddr.sa.sa_len;
1769:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1770:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   MEMCPY(name, &saddr, *namelen);
1771:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1772:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, 0);
1773:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return 0;
1774:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
1775:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1776:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
1777:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_getpeername(int s, struct sockaddr *name, socklen_t *namelen)
1778:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
1779:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return lwip_getaddrname(s, name, namelen, 0);
1780:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
1781:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 35


1782:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
1783:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_getsockname(int s, struct sockaddr *name, socklen_t *namelen)
1784:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
1785:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return lwip_getaddrname(s, name, namelen, 1);
1786:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
1787:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1788:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
1789:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_getsockopt(int s, int level, int optname, void *optval, socklen_t *optlen)
1790:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
1791:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u8_t err;
1792:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = get_socket(s);
1793:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if !LWIP_TCPIP_CORE_LOCKING
1794:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_DECLARE(data);
1795:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* !LWIP_TCPIP_CORE_LOCKING */
1796:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1797:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
1798:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
1799:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1800:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1801:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if ((NULL == optval) || (NULL == optlen)) {
1802:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, EFAULT);
1803:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
1804:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1805:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1806:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCPIP_CORE_LOCKING
1807:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* core-locking can just call the -impl function */
1808:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LOCK_TCPIP_CORE();
1809:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = lwip_getsockopt_impl(s, level, optname, optval, optlen);
1810:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   UNLOCK_TCPIP_CORE();
1811:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1812:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_TCPIP_CORE_LOCKING */
1813:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1814:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_MPU_COMPATIBLE
1815:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* MPU_COMPATIBLE copies the optval data, so check for max size here */
1816:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (*optlen > LWIP_SETGETSOCKOPT_MAXOPTLEN) {
1817:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, ENOBUFS);
1818:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
1819:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1820:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_MPU_COMPATIBLE */
1821:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1822:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_ALLOC(data, sock);
1823:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).s = s;
1824:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).level = level;
1825:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).optname = optname;
1826:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).optlen = *optlen;
1827:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if !LWIP_MPU_COMPATIBLE
1828:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).optval.p = optval;
1829:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* !LWIP_MPU_COMPATIBLE */
1830:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).err = 0;
1831:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETCONN_SEM_PER_THREAD
1832:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).completed_sem = LWIP_NETCONN_THREAD_SEM_GET();
1833:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else
1834:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).completed_sem = &sock->conn->op_completed;
1835:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
1836:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = tcpip_callback(lwip_getsockopt_callback, &LWIP_SETGETSOCKOPT_DATA_VAR_REF(data));
1837:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (err != ERR_OK) {
1838:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_SETGETSOCKOPT_DATA_VAR_FREE(data);
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 36


1839:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(err));
1840:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
1841:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1842:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sys_arch_sem_wait((sys_sem_t*)(LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).completed_sem), 0);
1843:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1844:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* write back optlen and optval */
1845:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   *optlen = LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).optlen;
1846:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_MPU_COMPATIBLE
1847:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   MEMCPY(optval, LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).optval,
1848:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).optlen);
1849:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_MPU_COMPATIBLE */
1850:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1851:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* maybe lwip_getsockopt_internal has changed err */
1852:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).err;
1853:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_FREE(data);
1854:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_TCPIP_CORE_LOCKING */
1855:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1856:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, err);
1857:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return err ? -1 : 0;
1858:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
1859:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1860:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if !LWIP_TCPIP_CORE_LOCKING
1861:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** lwip_getsockopt_callback: only used without CORE_LOCKING
1862:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * to get into the tcpip_thread
1863:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
1864:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void
1865:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_getsockopt_callback(void *arg)
1866:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
1867:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_setgetsockopt_data *data;
1868:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ASSERT("arg != NULL", arg != NULL);
1869:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   data = (struct lwip_setgetsockopt_data*)arg;
1870:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1871:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   data->err = lwip_getsockopt_impl(data->s, data->level, data->optname,
1872:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_MPU_COMPATIBLE
1873:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     data->optval,
1874:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_MPU_COMPATIBLE */
1875:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     data->optval.p,
1876:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_MPU_COMPATIBLE */
1877:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     &data->optlen);
1878:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1879:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sys_sem_signal((sys_sem_t*)(data->completed_sem));
1880:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
1881:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif  /* LWIP_TCPIP_CORE_LOCKING */
1882:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1883:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** lwip_getsockopt_impl: the actual implementation of getsockopt:
1884:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * same argument as lwip_getsockopt, either called directly or through callback
1885:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
1886:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static u8_t
1887:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_getsockopt_impl(int s, int level, int optname, void *optval, socklen_t *optlen)
1888:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
1889:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u8_t err = 0;
1890:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
1891:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
1892:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return EBADF;
1893:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1894:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1895:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   switch (level) {
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 37


1896:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1897:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Level: SOL_SOCKET */
1898:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case SOL_SOCKET:
1899:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
1900:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1901:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCP
1902:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_ACCEPTCONN:
1903:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, *optlen, int);
1904:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (NETCONNTYPE_GROUP(sock->conn->type) != NETCONN_TCP) {
1905:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return ENOPROTOOPT;
1906:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1907:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((sock->conn->pcb.tcp != NULL) && (sock->conn->pcb.tcp->state == LISTEN)) {
1908:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         *(int*)optval = 1;
1909:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
1910:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         *(int*)optval = 0;
1911:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1912:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
1913:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_TCP */
1914:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1915:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* The option flags */
1916:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_BROADCAST:
1917:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_KEEPALIVE:
1918:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if SO_REUSE
1919:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_REUSEADDR:
1920:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* SO_REUSE */
1921:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, *optlen, int);
1922:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = ip_get_option(sock->conn->pcb.ip, optname);
1923:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, SOL_SOCKET, optname=0x%x, ..) = %s\n",
1924:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                   s, optname, (*(int*)optval?"on":"off")));
1925:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
1926:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1927:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_TYPE:
1928:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN(sock, *optlen, int);
1929:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       switch (NETCONNTYPE_GROUP(netconn_type(sock->conn))) {
1930:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       case NETCONN_RAW:
1931:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         *(int*)optval = SOCK_RAW;
1932:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         break;
1933:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       case NETCONN_TCP:
1934:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         *(int*)optval = SOCK_STREAM;
1935:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         break;
1936:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       case NETCONN_UDP:
1937:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         *(int*)optval = SOCK_DGRAM;
1938:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         break;
1939:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       default: /* unrecognized socket type */
1940:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         *(int*)optval = netconn_type(sock->conn);
1941:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG,
1942:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                     ("lwip_getsockopt(%d, SOL_SOCKET, SO_TYPE): unrecognized socket type %d\n",
1943:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                     s, *(int *)optval));
1944:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }  /* switch (netconn_type(sock->conn)) */
1945:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, SOL_SOCKET, SO_TYPE) = %d\n",
1946:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, *(int *)optval));
1947:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
1948:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1949:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_ERROR:
1950:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN(*optlen, int);
1951:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* only overwrite ERR_OK or temporary errors */
1952:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (((sock->err == 0) || (sock->err == EINPROGRESS)) && (sock->conn != NULL)) {
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 38


1953:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock_set_errno(sock, err_to_errno(sock->conn->last_err));
1954:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1955:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int *)optval = (sock->err == 0xFF ? (int)-1 : (int)sock->err);
1956:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->err = 0;
1957:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, SOL_SOCKET, SO_ERROR) = %d\n",
1958:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, *(int *)optval));
1959:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
1960:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1961:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_SNDTIMEO
1962:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_SNDTIMEO:
1963:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN(sock, *optlen, LWIP_SO_SNDRCVTIMEO_OPTTYPE);
1964:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SO_SNDRCVTIMEO_SET(optval, netconn_get_sendtimeout(sock->conn));
1965:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
1966:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SO_SNDTIMEO */
1967:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_RCVTIMEO
1968:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_RCVTIMEO:
1969:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN(sock, *optlen, LWIP_SO_SNDRCVTIMEO_OPTTYPE);
1970:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SO_SNDRCVTIMEO_SET(optval, netconn_get_recvtimeout(sock->conn));
1971:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
1972:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SO_RCVTIMEO */
1973:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_RCVBUF
1974:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_RCVBUF:
1975:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN(sock, *optlen, int);
1976:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int *)optval = netconn_get_recvbufsize(sock->conn);
1977:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
1978:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SO_RCVBUF */
1979:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_LINGER
1980:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_LINGER:
1981:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       {
1982:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         s16_t conn_linger;
1983:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         struct linger* linger = (struct linger*)optval;
1984:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_SOCKOPT_CHECK_OPTLEN_CONN(sock, *optlen, struct linger);
1985:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         conn_linger = sock->conn->linger;
1986:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (conn_linger >= 0) {
1987:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           linger->l_onoff = 1;
1988:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           linger->l_linger = (int)conn_linger;
1989:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
1990:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           linger->l_onoff = 0;
1991:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           linger->l_linger = 0;
1992:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
1993:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1994:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
1995:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SO_LINGER */
1996:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDP
1997:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_NO_CHECK:
1998:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, *optlen, int, NETCONN_UDP);
1999:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDPLITE
2000:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((udp_flags(sock->conn->pcb.udp) & UDP_FLAGS_UDPLITE) != 0) {
2001:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* this flag is only available for UDP, not for UDP lite */
2002:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return EAFNOSUPPORT;
2003:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2004:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_UDPLITE */
2005:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = (udp_flags(sock->conn->pcb.udp) & UDP_FLAGS_NOCHKSUM) ? 1 : 0;
2006:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2007:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_UDP*/
2008:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
2009:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, SOL_SOCKET, UNIMPL: optname=0x%x, ..)\n",
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 39


2010:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, optname));
2011:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = ENOPROTOOPT;
2012:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2013:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }  /* switch (optname) */
2014:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2015:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2016:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Level: IPPROTO_IP */
2017:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case IPPROTO_IP:
2018:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
2019:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_TTL:
2020:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, *optlen, int);
2021:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = sock->conn->pcb.ip->ttl;
2022:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_IP, IP_TTL) = %d\n",
2023:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, *(int *)optval));
2024:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2025:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_TOS:
2026:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, *optlen, int);
2027:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = sock->conn->pcb.ip->tos;
2028:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_IP, IP_TOS) = %d\n",
2029:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, *(int *)optval));
2030:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2031:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_MULTICAST_TX_OPTIONS
2032:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_MULTICAST_TTL:
2033:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, *optlen, u8_t);
2034:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) != NETCONN_UDP) {
2035:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return ENOPROTOOPT;
2036:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2037:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(u8_t*)optval = udp_get_multicast_ttl(sock->conn->pcb.udp);
2038:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_IP, IP_MULTICAST_TTL) = %d\n",
2039:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, *(int *)optval));
2040:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2041:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_MULTICAST_IF:
2042:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, *optlen, struct in_addr);
2043:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) != NETCONN_UDP) {
2044:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return ENOPROTOOPT;
2045:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2046:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       inet_addr_from_ip4addr((struct in_addr*)optval, udp_get_multicast_netif_addr(sock->conn->pcb.
2047:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_IP, IP_MULTICAST_IF) = 0x%"X32_F"\n"
2048:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, *(u32_t *)optval));
2049:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2050:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_MULTICAST_LOOP:
2051:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, *optlen, u8_t);
2052:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((sock->conn->pcb.udp->flags & UDP_FLAGS_MULTICAST_LOOP) != 0) {
2053:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         *(u8_t*)optval = 1;
2054:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
2055:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         *(u8_t*)optval = 0;
2056:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2057:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_IP, IP_MULTICAST_LOOP) = %d\n",
2058:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, *(int *)optval));
2059:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2060:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_MULTICAST_TX_OPTIONS */
2061:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
2062:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_IP, UNIMPL: optname=0x%x, ..)\n",
2063:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, optname));
2064:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = ENOPROTOOPT;
2065:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2066:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }  /* switch (optname) */
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 40


2067:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2068:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2069:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCP
2070:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Level: IPPROTO_TCP */
2071:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case IPPROTO_TCP:
2072:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Special case: all IPPROTO_TCP option take an int */
2073:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, *optlen, int, NETCONN_TCP);
2074:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (sock->conn->pcb.tcp->state == LISTEN) {
2075:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return EINVAL;
2076:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
2077:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
2078:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case TCP_NODELAY:
2079:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = tcp_nagle_disabled(sock->conn->pcb.tcp);
2080:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_TCP, TCP_NODELAY) = %s\n",
2081:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, (*(int*)optval)?"on":"off") );
2082:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2083:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case TCP_KEEPALIVE:
2084:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = (int)sock->conn->pcb.tcp->keep_idle;
2085:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_TCP, TCP_KEEPALIVE) = %d\n",
2086:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, *(int *)optval));
2087:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2088:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2089:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCP_KEEPALIVE
2090:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case TCP_KEEPIDLE:
2091:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = (int)(sock->conn->pcb.tcp->keep_idle/1000);
2092:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_TCP, TCP_KEEPIDLE) = %d\n",
2093:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, *(int *)optval));
2094:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2095:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case TCP_KEEPINTVL:
2096:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = (int)(sock->conn->pcb.tcp->keep_intvl/1000);
2097:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_TCP, TCP_KEEPINTVL) = %d\n",
2098:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, *(int *)optval));
2099:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2100:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case TCP_KEEPCNT:
2101:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = (int)sock->conn->pcb.tcp->keep_cnt;
2102:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_TCP, TCP_KEEPCNT) = %d\n",
2103:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, *(int *)optval));
2104:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2105:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_TCP_KEEPALIVE */
2106:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
2107:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_TCP, UNIMPL: optname=0x%x, ..)\n",
2108:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, optname));
2109:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = ENOPROTOOPT;
2110:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2111:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }  /* switch (optname) */
2112:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2113:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_TCP */
2114:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2115:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV6
2116:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Level: IPPROTO_IPV6 */
2117:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case IPPROTO_IPV6:
2118:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
2119:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IPV6_V6ONLY:
2120:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN(sock, *optlen, int);
2121:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = (netconn_get_ipv6only(sock->conn) ? 1 : 0);
2122:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_IPV6, IPV6_V6ONLY) = %d\n",
2123:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, *(int *)optval));
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 41


2124:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2125:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
2126:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_IPV6, UNIMPL: optname=0x%x, ..)\n",
2127:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, optname));
2128:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = ENOPROTOOPT;
2129:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2130:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }  /* switch (optname) */
2131:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2132:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV6 */
2133:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2134:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDP && LWIP_UDPLITE
2135:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Level: IPPROTO_UDPLITE */
2136:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case IPPROTO_UDPLITE:
2137:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Special case: all IPPROTO_UDPLITE option take an int */
2138:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, *optlen, int);
2139:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* If this is no UDP lite socket, ignore any options. */
2140:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (!NETCONNTYPE_ISUDPLITE(netconn_type(sock->conn))) {
2141:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return ENOPROTOOPT;
2142:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
2143:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
2144:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case UDPLITE_SEND_CSCOV:
2145:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = sock->conn->pcb.udp->chksum_len_tx;
2146:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_UDPLITE, UDPLITE_SEND_CSCOV) = %d\n"
2147:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, (*(int*)optval)) );
2148:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2149:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case UDPLITE_RECV_CSCOV:
2150:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = sock->conn->pcb.udp->chksum_len_rx;
2151:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_UDPLITE, UDPLITE_RECV_CSCOV) = %d\n"
2152:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, (*(int*)optval)) );
2153:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2154:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
2155:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_UDPLITE, UNIMPL: optname=0x%x, ..)\n
2156:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, optname));
2157:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = ENOPROTOOPT;
2158:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2159:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }  /* switch (optname) */
2160:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2161:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_UDP */
2162:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Level: IPPROTO_RAW */
2163:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case IPPROTO_RAW:
2164:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
2165:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV6 && LWIP_RAW
2166:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IPV6_CHECKSUM:
2167:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, *optlen, int, NETCONN_RAW);
2168:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (sock->conn->pcb.raw->chksum_reqd == 0) {
2169:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         *(int *)optval = -1;
2170:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
2171:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         *(int *)optval = sock->conn->pcb.raw->chksum_offset;
2172:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2173:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_RAW, IPV6_CHECKSUM) = %d\n",
2174:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, (*(int*)optval)) );
2175:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2176:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV6 && LWIP_RAW */
2177:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
2178:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_RAW, UNIMPL: optname=0x%x, ..)\n",
2179:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, optname));
2180:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = ENOPROTOOPT;
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 42


2181:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2182:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }  /* switch (optname) */
2183:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2184:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   default:
2185:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, level=0x%x, UNIMPL: optname=0x%x, ..)\n",
2186:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                 s, level, optname));
2187:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     err = ENOPROTOOPT;
2188:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2189:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } /* switch (level) */
2190:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2191:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return err;
2192:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
2193:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2194:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
2195:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_setsockopt(int s, int level, int optname, const void *optval, socklen_t optlen)
2196:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
2197:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u8_t err = 0;
2198:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = get_socket(s);
2199:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if !LWIP_TCPIP_CORE_LOCKING
2200:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_DECLARE(data);
2201:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* !LWIP_TCPIP_CORE_LOCKING */
2202:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2203:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
2204:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
2205:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2206:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2207:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (NULL == optval) {
2208:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, EFAULT);
2209:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
2210:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2211:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2212:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCPIP_CORE_LOCKING
2213:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* core-locking can just call the -impl function */
2214:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LOCK_TCPIP_CORE();
2215:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = lwip_setsockopt_impl(s, level, optname, optval, optlen);
2216:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   UNLOCK_TCPIP_CORE();
2217:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2218:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_TCPIP_CORE_LOCKING */
2219:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2220:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_MPU_COMPATIBLE
2221:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* MPU_COMPATIBLE copies the optval data, so check for max size here */
2222:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (optlen > LWIP_SETGETSOCKOPT_MAXOPTLEN) {
2223:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, ENOBUFS);
2224:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
2225:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2226:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_MPU_COMPATIBLE */
2227:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2228:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_ALLOC(data, sock);
2229:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).s = s;
2230:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).level = level;
2231:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).optname = optname;
2232:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).optlen = optlen;
2233:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_MPU_COMPATIBLE
2234:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   MEMCPY(LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).optval, optval, optlen);
2235:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_MPU_COMPATIBLE */
2236:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).optval.pc = (const void*)optval;
2237:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_MPU_COMPATIBLE */
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 43


2238:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).err = 0;
2239:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETCONN_SEM_PER_THREAD
2240:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).completed_sem = LWIP_NETCONN_THREAD_SEM_GET();
2241:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else
2242:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).completed_sem = &sock->conn->op_completed;
2243:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
2244:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = tcpip_callback(lwip_setsockopt_callback, &LWIP_SETGETSOCKOPT_DATA_VAR_REF(data));
2245:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (err != ERR_OK) {
2246:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_SETGETSOCKOPT_DATA_VAR_FREE(data);
2247:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(err));
2248:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
2249:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2250:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sys_arch_sem_wait((sys_sem_t*)(LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).completed_sem), 0);
2251:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2252:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* maybe lwip_getsockopt_internal has changed err */
2253:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).err;
2254:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_FREE(data);
2255:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif  /* LWIP_TCPIP_CORE_LOCKING */
2256:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2257:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, err);
2258:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return err ? -1 : 0;
2259:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
2260:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2261:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if !LWIP_TCPIP_CORE_LOCKING
2262:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** lwip_setsockopt_callback: only used without CORE_LOCKING
2263:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * to get into the tcpip_thread
2264:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
2265:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void
2266:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_setsockopt_callback(void *arg)
2267:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
2268:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_setgetsockopt_data *data;
2269:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ASSERT("arg != NULL", arg != NULL);
2270:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   data = (struct lwip_setgetsockopt_data*)arg;
2271:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2272:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   data->err = lwip_setsockopt_impl(data->s, data->level, data->optname,
2273:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_MPU_COMPATIBLE
2274:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     data->optval,
2275:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_MPU_COMPATIBLE */
2276:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     data->optval.pc,
2277:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_MPU_COMPATIBLE */
2278:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     data->optlen);
2279:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2280:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sys_sem_signal((sys_sem_t*)(data->completed_sem));
2281:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
2282:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif  /* LWIP_TCPIP_CORE_LOCKING */
2283:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2284:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** lwip_setsockopt_impl: the actual implementation of setsockopt:
2285:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * same argument as lwip_setsockopt, either called directly or through callback
2286:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
2287:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static u8_t
2288:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_setsockopt_impl(int s, int level, int optname, const void *optval, socklen_t optlen)
2289:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 156              		.loc 1 2289 0
 157              		.cfi_startproc
 158              		@ args = 4, pretend = 0, frame = 0
 159              		@ frame_needed = 0, uses_anonymous_args = 0
 160              	.LVL15:
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 44


 161 0000 70B5     		push	{r4, r5, r6, lr}
 162              	.LCFI3:
 163              		.cfi_def_cfa_offset 16
 164              		.cfi_offset 4, -16
 165              		.cfi_offset 5, -12
 166              		.cfi_offset 6, -8
 167              		.cfi_offset 14, -4
 168 0002 0C46     		mov	r4, r1
 169 0004 1546     		mov	r5, r2
 170 0006 1E46     		mov	r6, r3
 171              	.LVL16:
2290:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u8_t err = 0;
2291:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 172              		.loc 1 2291 0
 173 0008 FFF7FEFF 		bl	tryget_socket
 174              	.LVL17:
2292:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 175              		.loc 1 2292 0
 176 000c 0028     		cmp	r0, #0
 177 000e 00F08F80 		beq	.L31
 178 0012 0346     		mov	r3, r0
2293:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return EBADF;
2294:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2295:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2296:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   switch (level) {
 179              		.loc 1 2296 0
 180 0014 062C     		cmp	r4, #6
 181 0016 61D0     		beq	.L19
 182 0018 40F6FF72 		movw	r2, #4095
 183 001c 9442     		cmp	r4, r2
 184 001e 03D0     		beq	.L20
 185 0020 002C     		cmp	r4, #0
 186 0022 3DD0     		beq	.L59
2297:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2298:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Level: SOL_SOCKET */
2299:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case SOL_SOCKET:
2300:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
2301:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2302:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* SO_ACCEPTCONN is get-only */
2303:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2304:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* The option flags */
2305:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_BROADCAST:
2306:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_KEEPALIVE:
2307:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if SO_REUSE
2308:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_REUSEADDR:
2309:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* SO_REUSE */
2310:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, optlen, int);
2311:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (*(const int*)optval) {
2312:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         ip_set_option(sock->conn->pcb.ip, optname);
2313:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
2314:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         ip_reset_option(sock->conn->pcb.ip, optname);
2315:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2316:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, SOL_SOCKET, optname=0x%x, ..) -> %s\n",
2317:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, optname, (*(const int*)optval?"on":"off")));
2318:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2319:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2320:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* SO_TYPE is get-only */
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 45


2321:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* SO_ERROR is get-only */
2322:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2323:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_SNDTIMEO
2324:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_SNDTIMEO:
2325:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN(sock, optlen, LWIP_SO_SNDRCVTIMEO_OPTTYPE);
2326:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       netconn_set_sendtimeout(sock->conn, LWIP_SO_SNDRCVTIMEO_GET_MS(optval));
2327:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2328:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SO_SNDTIMEO */
2329:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_RCVTIMEO
2330:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_RCVTIMEO:
2331:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN(sock, optlen, LWIP_SO_SNDRCVTIMEO_OPTTYPE);
2332:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       netconn_set_recvtimeout(sock->conn, (int)LWIP_SO_SNDRCVTIMEO_GET_MS(optval));
2333:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2334:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SO_RCVTIMEO */
2335:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_RCVBUF
2336:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_RCVBUF:
2337:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN(sock, optlen, int);
2338:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       netconn_set_recvbufsize(sock->conn, *(const int*)optval);
2339:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2340:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SO_RCVBUF */
2341:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_LINGER
2342:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_LINGER:
2343:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       {
2344:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         const struct linger* linger = (const struct linger*)optval;
2345:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_SOCKOPT_CHECK_OPTLEN_CONN(sock, optlen, struct linger);
2346:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (linger->l_onoff) {
2347:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           int lingersec = linger->l_linger;
2348:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (lingersec < 0) {
2349:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             return EINVAL;
2350:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
2351:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (lingersec > 0xFFFF) {
2352:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             lingersec = 0xFFFF;
2353:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
2354:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           sock->conn->linger = (s16_t)lingersec;
2355:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
2356:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           sock->conn->linger = -1;
2357:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
2358:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2359:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2360:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SO_LINGER */
2361:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDP
2362:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_NO_CHECK:
2363:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, optlen, int, NETCONN_UDP);
2364:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDPLITE
2365:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((udp_flags(sock->conn->pcb.udp) & UDP_FLAGS_UDPLITE) != 0) {
2366:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* this flag is only available for UDP, not for UDP lite */
2367:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return EAFNOSUPPORT;
2368:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2369:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_UDPLITE */
2370:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (*(const int*)optval) {
2371:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         udp_setflags(sock->conn->pcb.udp, udp_flags(sock->conn->pcb.udp) | UDP_FLAGS_NOCHKSUM);
2372:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
2373:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         udp_setflags(sock->conn->pcb.udp, udp_flags(sock->conn->pcb.udp) & ~UDP_FLAGS_NOCHKSUM);
2374:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2375:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2376:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_UDP */
2377:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 46


2378:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, SOL_SOCKET, UNIMPL: optname=0x%x, ..)\n",
2379:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, optname));
2380:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = ENOPROTOOPT;
2381:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2382:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }  /* switch (optname) */
2383:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2384:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2385:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Level: IPPROTO_IP */
2386:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case IPPROTO_IP:
2387:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
2388:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_TTL:
2389:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, optlen, int);
2390:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->conn->pcb.ip->ttl = (u8_t)(*(const int*)optval);
2391:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_IP, IP_TTL, ..) -> %d\n",
2392:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, sock->conn->pcb.ip->ttl));
2393:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2394:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_TOS:
2395:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, optlen, int);
2396:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->conn->pcb.ip->tos = (u8_t)(*(const int*)optval);
2397:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_IP, IP_TOS, ..)-> %d\n",
2398:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, sock->conn->pcb.ip->tos));
2399:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2400:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_MULTICAST_TX_OPTIONS
2401:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_MULTICAST_TTL:
2402:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, optlen, u8_t, NETCONN_UDP);
2403:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       udp_set_multicast_ttl(sock->conn->pcb.udp, (u8_t)(*(const u8_t*)optval));
2404:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2405:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_MULTICAST_IF:
2406:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       {
2407:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         ip4_addr_t if_addr;
2408:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, optlen, struct in_addr, NETCONN_UDP);
2409:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         inet_addr_to_ip4addr(&if_addr, (const struct in_addr*)optval);
2410:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         udp_set_multicast_netif_addr(sock->conn->pcb.udp, &if_addr);
2411:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2412:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2413:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_MULTICAST_LOOP:
2414:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, optlen, u8_t, NETCONN_UDP);
2415:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (*(const u8_t*)optval) {
2416:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         udp_setflags(sock->conn->pcb.udp, udp_flags(sock->conn->pcb.udp) | UDP_FLAGS_MULTICAST_LOOP
2417:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
2418:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         udp_setflags(sock->conn->pcb.udp, udp_flags(sock->conn->pcb.udp) & ~UDP_FLAGS_MULTICAST_LOO
2419:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2420:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2421:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_MULTICAST_TX_OPTIONS */
2422:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IGMP
2423:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_ADD_MEMBERSHIP:
2424:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_DROP_MEMBERSHIP:
2425:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       {
2426:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* If this is a TCP or a RAW socket, ignore these options. */
2427:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* @todo: assign membership to this socket so that it is dropped when closing the socket */
2428:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         err_t igmp_err;
2429:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         const struct ip_mreq *imr = (const struct ip_mreq *)optval;
2430:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         ip4_addr_t if_addr;
2431:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         ip4_addr_t multi_addr;
2432:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, optlen, struct ip_mreq, NETCONN_UDP);
2433:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         inet_addr_to_ip4addr(&if_addr, &imr->imr_interface);
2434:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         inet_addr_to_ip4addr(&multi_addr, &imr->imr_multiaddr);
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 47


2435:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (optname == IP_ADD_MEMBERSHIP) {
2436:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (!lwip_socket_register_membership(s, &if_addr, &multi_addr)) {
2437:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             /* cannot track membership (out of memory) */
2438:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             err = ENOMEM;
2439:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             igmp_err = ERR_OK;
2440:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           } else {
2441:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             igmp_err = igmp_joingroup(&if_addr, &multi_addr);
2442:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
2443:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
2444:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           igmp_err = igmp_leavegroup(&if_addr, &multi_addr);
2445:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           lwip_socket_unregister_membership(s, &if_addr, &multi_addr);
2446:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
2447:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (igmp_err != ERR_OK) {
2448:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           err = EADDRNOTAVAIL;
2449:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
2450:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2451:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2452:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IGMP */
2453:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
2454:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_IP, UNIMPL: optname=0x%x, ..)\n",
2455:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, optname));
2456:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = ENOPROTOOPT;
2457:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2458:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }  /* switch (optname) */
2459:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2460:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2461:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCP
2462:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Level: IPPROTO_TCP */
2463:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case IPPROTO_TCP:
2464:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Special case: all IPPROTO_TCP option take an int */
2465:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, optlen, int, NETCONN_TCP);
2466:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (sock->conn->pcb.tcp->state == LISTEN) {
2467:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return EINVAL;
2468:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
2469:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
2470:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case TCP_NODELAY:
2471:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (*(const int*)optval) {
2472:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         tcp_nagle_disable(sock->conn->pcb.tcp);
2473:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
2474:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         tcp_nagle_enable(sock->conn->pcb.tcp);
2475:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2476:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_TCP, TCP_NODELAY) -> %s\n",
2477:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, (*(const int *)optval)?"on":"off") );
2478:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2479:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case TCP_KEEPALIVE:
2480:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->conn->pcb.tcp->keep_idle = (u32_t)(*(const int*)optval);
2481:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_TCP, TCP_KEEPALIVE) -> %"U32_F"\n",
2482:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, sock->conn->pcb.tcp->keep_idle));
2483:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2484:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2485:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCP_KEEPALIVE
2486:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case TCP_KEEPIDLE:
2487:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->conn->pcb.tcp->keep_idle = 1000*(u32_t)(*(const int*)optval);
2488:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_TCP, TCP_KEEPIDLE) -> %"U32_F"\n",
2489:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, sock->conn->pcb.tcp->keep_idle));
2490:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2491:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case TCP_KEEPINTVL:
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 48


2492:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->conn->pcb.tcp->keep_intvl = 1000*(u32_t)(*(const int*)optval);
2493:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_TCP, TCP_KEEPINTVL) -> %"U32_F"\n",
2494:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, sock->conn->pcb.tcp->keep_intvl));
2495:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2496:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case TCP_KEEPCNT:
2497:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->conn->pcb.tcp->keep_cnt = (u32_t)(*(const int*)optval);
2498:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_TCP, TCP_KEEPCNT) -> %"U32_F"\n",
2499:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, sock->conn->pcb.tcp->keep_cnt));
2500:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2501:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_TCP_KEEPALIVE */
2502:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
2503:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_TCP, UNIMPL: optname=0x%x, ..)\n",
2504:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, optname));
2505:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = ENOPROTOOPT;
2506:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2507:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }  /* switch (optname) */
2508:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2509:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_TCP*/
2510:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2511:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV6
2512:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Level: IPPROTO_IPV6 */
2513:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case IPPROTO_IPV6:
2514:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
2515:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IPV6_V6ONLY:
2516:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, optlen, int, NETCONN_TCP);
2517:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (*(const int*)optval) {
2518:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         netconn_set_ipv6only(sock->conn, 1);
2519:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
2520:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         netconn_set_ipv6only(sock->conn, 0);
2521:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2522:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_IPV6, IPV6_V6ONLY, ..) -> %d\n",
2523:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, (netconn_get_ipv6only(sock->conn) ? 1 : 0)));
2524:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2525:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
2526:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_IPV6, UNIMPL: optname=0x%x, ..)\n",
2527:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, optname));
2528:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = ENOPROTOOPT;
2529:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2530:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }  /* switch (optname) */
2531:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2532:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV6 */
2533:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2534:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDP && LWIP_UDPLITE
2535:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Level: IPPROTO_UDPLITE */
2536:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case IPPROTO_UDPLITE:
2537:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Special case: all IPPROTO_UDPLITE option take an int */
2538:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, optlen, int);
2539:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* If this is no UDP lite socket, ignore any options. */
2540:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (!NETCONNTYPE_ISUDPLITE(netconn_type(sock->conn))) {
2541:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return ENOPROTOOPT;
2542:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
2543:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
2544:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case UDPLITE_SEND_CSCOV:
2545:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((*(const int*)optval != 0) && ((*(const int*)optval < 8) || (*(const int*)optval > 0xffff
2546:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* don't allow illegal values! */
2547:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock->conn->pcb.udp->chksum_len_tx = 8;
2548:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 49


2549:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock->conn->pcb.udp->chksum_len_tx = (u16_t)*(const int*)optval;
2550:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2551:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_UDPLITE, UDPLITE_SEND_CSCOV) -> %d\n
2552:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, (*(const int*)optval)) );
2553:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2554:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case UDPLITE_RECV_CSCOV:
2555:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((*(const int*)optval != 0) && ((*(const int*)optval < 8) || (*(const int*)optval > 0xffff
2556:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* don't allow illegal values! */
2557:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock->conn->pcb.udp->chksum_len_rx = 8;
2558:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
2559:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock->conn->pcb.udp->chksum_len_rx = (u16_t)*(const int*)optval;
2560:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2561:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_UDPLITE, UDPLITE_RECV_CSCOV) -> %d\n
2562:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, (*(const int*)optval)) );
2563:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2564:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
2565:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_UDPLITE, UNIMPL: optname=0x%x, ..)\n
2566:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, optname));
2567:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = ENOPROTOOPT;
2568:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2569:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }  /* switch (optname) */
2570:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2571:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_UDP */
2572:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Level: IPPROTO_RAW */
2573:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case IPPROTO_RAW:
2574:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
2575:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV6 && LWIP_RAW
2576:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IPV6_CHECKSUM:
2577:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* It should not be possible to disable the checksum generation with ICMPv6
2578:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        * as per RFC 3542 chapter 3.1 */
2579:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if(sock->conn->pcb.raw->protocol == IPPROTO_ICMPV6) {
2580:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return EINVAL;
2581:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2582:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2583:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, optlen, int, NETCONN_RAW);
2584:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (*(const int *)optval < 0) {
2585:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock->conn->pcb.raw->chksum_reqd = 0;
2586:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else if (*(const int *)optval & 1) {
2587:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* Per RFC3542, odd offsets are not allowed */
2588:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return EINVAL;
2589:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
2590:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock->conn->pcb.raw->chksum_reqd = 1;
2591:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock->conn->pcb.raw->chksum_offset = (u16_t)*(const int *)optval;
2592:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2593:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_RAW, IPV6_CHECKSUM, ..) -> %d\n",
2594:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, sock->conn->pcb.raw->chksum_reqd));
2595:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2596:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV6 && LWIP_RAW */
2597:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
2598:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_RAW, UNIMPL: optname=0x%x, ..)\n",
2599:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                   s, optname));
2600:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = ENOPROTOOPT;
 187              		.loc 1 2600 0
 188 0024 5C20     		movs	r0, #92
 189              	.LVL18:
 190              	.L18:
2601:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 50


2602:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }  /* switch (optname) */
2603:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2604:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   default:
2605:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, level=0x%x, UNIMPL: optname=0x%x, ..)\n",
2606:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                 s, level, optname));
2607:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     err = ENOPROTOOPT;
2608:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2609:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }  /* switch (level) */
2610:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2611:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return err;
2612:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 191              		.loc 1 2612 0
 192 0026 70BD     		pop	{r4, r5, r6, pc}
 193              	.LVL19:
 194              	.L20:
2300:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 195              		.loc 1 2300 0
 196 0028 202D     		cmp	r5, #32
 197 002a 07D0     		beq	.L22
 198 002c 41F20A02 		movw	r2, #4106
 199 0030 9542     		cmp	r5, r2
 200 0032 19D0     		beq	.L23
 201 0034 082D     		cmp	r5, #8
 202 0036 01D0     		beq	.L22
2380:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 203              		.loc 1 2380 0
 204 0038 5C20     		movs	r0, #92
 205              	.LVL20:
 206 003a F4E7     		b	.L18
 207              	.LVL21:
 208              	.L22:
2310:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (*(const int*)optval) {
 209              		.loc 1 2310 0
 210 003c 049A     		ldr	r2, [sp, #16]
 211 003e 032A     		cmp	r2, #3
 212 0040 78D9     		bls	.L34
2310:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (*(const int*)optval) {
 213              		.loc 1 2310 0 is_stmt 0 discriminator 2
 214 0042 1B68     		ldr	r3, [r3]
 215 0044 002B     		cmp	r3, #0
 216 0046 77D0     		beq	.L35
2310:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (*(const int*)optval) {
 217              		.loc 1 2310 0 discriminator 4
 218 0048 5B68     		ldr	r3, [r3, #4]
 219 004a 002B     		cmp	r3, #0
 220 004c 76D0     		beq	.L36
2311:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         ip_set_option(sock->conn->pcb.ip, optname);
 221              		.loc 1 2311 0 is_stmt 1
 222 004e 3268     		ldr	r2, [r6]
 223 0050 22B1     		cbz	r2, .L24
2312:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
 224              		.loc 1 2312 0
 225 0052 1A7A     		ldrb	r2, [r3, #8]	@ zero_extendqisi2
 226 0054 1543     		orrs	r5, r5, r2
 227              	.LVL22:
 228 0056 1D72     		strb	r5, [r3, #8]
2290:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 51


 229              		.loc 1 2290 0
 230 0058 0020     		movs	r0, #0
 231              	.LVL23:
 232 005a E4E7     		b	.L18
 233              	.LVL24:
 234              	.L24:
2314:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 235              		.loc 1 2314 0
 236 005c 1A7A     		ldrb	r2, [r3, #8]	@ zero_extendqisi2
 237 005e 22EA0505 		bic	r5, r2, r5
 238              	.LVL25:
 239 0062 1D72     		strb	r5, [r3, #8]
2290:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 240              		.loc 1 2290 0
 241 0064 0020     		movs	r0, #0
 242              	.LVL26:
 243 0066 DEE7     		b	.L18
 244              	.LVL27:
 245              	.L23:
2363:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDPLITE
 246              		.loc 1 2363 0
 247 0068 049A     		ldr	r2, [sp, #16]
 248 006a 032A     		cmp	r2, #3
 249 006c 68D9     		bls	.L37
2363:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDPLITE
 250              		.loc 1 2363 0 is_stmt 0 discriminator 2
 251 006e 0368     		ldr	r3, [r0]
 252 0070 002B     		cmp	r3, #0
 253 0072 67D0     		beq	.L38
2363:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDPLITE
 254              		.loc 1 2363 0 discriminator 4
 255 0074 5A68     		ldr	r2, [r3, #4]
 256 0076 002A     		cmp	r2, #0
 257 0078 66D0     		beq	.L39
2363:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDPLITE
 258              		.loc 1 2363 0 discriminator 6
 259 007a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 260 007c 03F0F003 		and	r3, r3, #240
 261 0080 202B     		cmp	r3, #32
 262 0082 63D1     		bne	.L40
2370:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         udp_setflags(sock->conn->pcb.udp, udp_flags(sock->conn->pcb.udp) | UDP_FLAGS_NOCHKSUM);
 263              		.loc 1 2370 0 is_stmt 1
 264 0084 3368     		ldr	r3, [r6]
 265 0086 2BB1     		cbz	r3, .L25
2371:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
 266              		.loc 1 2371 0
 267 0088 137C     		ldrb	r3, [r2, #16]	@ zero_extendqisi2
 268 008a 43F00103 		orr	r3, r3, #1
 269 008e 1374     		strb	r3, [r2, #16]
2290:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 270              		.loc 1 2290 0
 271 0090 0020     		movs	r0, #0
 272              	.LVL28:
 273 0092 C8E7     		b	.L18
 274              	.LVL29:
 275              	.L25:
2373:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 52


 276              		.loc 1 2373 0
 277 0094 137C     		ldrb	r3, [r2, #16]	@ zero_extendqisi2
 278 0096 03F0FE03 		and	r3, r3, #254
 279 009a 1374     		strb	r3, [r2, #16]
2290:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 280              		.loc 1 2290 0
 281 009c 0020     		movs	r0, #0
 282              	.LVL30:
 283 009e C2E7     		b	.L18
 284              	.LVL31:
 285              	.L59:
2387:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_TTL:
 286              		.loc 1 2387 0
 287 00a0 012D     		cmp	r5, #1
 288 00a2 0ED0     		beq	.L26
 289 00a4 022D     		cmp	r5, #2
 290 00a6 53D1     		bne	.L56
2389:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->conn->pcb.ip->ttl = (u8_t)(*(const int*)optval);
 291              		.loc 1 2389 0
 292 00a8 049A     		ldr	r2, [sp, #16]
 293 00aa 032A     		cmp	r2, #3
 294 00ac 52D9     		bls	.L42
2389:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->conn->pcb.ip->ttl = (u8_t)(*(const int*)optval);
 295              		.loc 1 2389 0 is_stmt 0 discriminator 2
 296 00ae 0368     		ldr	r3, [r0]
 297 00b0 002B     		cmp	r3, #0
 298 00b2 51D0     		beq	.L43
2389:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->conn->pcb.ip->ttl = (u8_t)(*(const int*)optval);
 299              		.loc 1 2389 0 discriminator 4
 300 00b4 5B68     		ldr	r3, [r3, #4]
 301 00b6 002B     		cmp	r3, #0
 302 00b8 50D0     		beq	.L44
2390:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_IP, IP_TTL, ..) -> %d\n",
 303              		.loc 1 2390 0 is_stmt 1
 304 00ba 3278     		ldrb	r2, [r6]	@ zero_extendqisi2
 305 00bc 9A72     		strb	r2, [r3, #10]
2290:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 306              		.loc 1 2290 0
 307 00be 0020     		movs	r0, #0
 308              	.LVL32:
2393:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_TOS:
 309              		.loc 1 2393 0
 310 00c0 B1E7     		b	.L18
 311              	.LVL33:
 312              	.L26:
2395:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->conn->pcb.ip->tos = (u8_t)(*(const int*)optval);
 313              		.loc 1 2395 0
 314 00c2 049A     		ldr	r2, [sp, #16]
 315 00c4 032A     		cmp	r2, #3
 316 00c6 4BD9     		bls	.L45
2395:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->conn->pcb.ip->tos = (u8_t)(*(const int*)optval);
 317              		.loc 1 2395 0 is_stmt 0 discriminator 2
 318 00c8 0368     		ldr	r3, [r0]
 319 00ca 002B     		cmp	r3, #0
 320 00cc 4AD0     		beq	.L46
2395:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->conn->pcb.ip->tos = (u8_t)(*(const int*)optval);
 321              		.loc 1 2395 0 discriminator 4
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 53


 322 00ce 5B68     		ldr	r3, [r3, #4]
 323 00d0 002B     		cmp	r3, #0
 324 00d2 49D0     		beq	.L47
2396:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_IP, IP_TOS, ..)-> %d\n",
 325              		.loc 1 2396 0 is_stmt 1
 326 00d4 3278     		ldrb	r2, [r6]	@ zero_extendqisi2
 327 00d6 5A72     		strb	r2, [r3, #9]
2290:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 328              		.loc 1 2290 0
 329 00d8 0020     		movs	r0, #0
 330              	.LVL34:
2399:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_MULTICAST_TX_OPTIONS
 331              		.loc 1 2399 0
 332 00da A4E7     		b	.L18
 333              	.LVL35:
 334              	.L19:
2465:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (sock->conn->pcb.tcp->state == LISTEN) {
 335              		.loc 1 2465 0
 336 00dc 049A     		ldr	r2, [sp, #16]
 337 00de 032A     		cmp	r2, #3
 338 00e0 44D9     		bls	.L48
2465:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (sock->conn->pcb.tcp->state == LISTEN) {
 339              		.loc 1 2465 0 is_stmt 0 discriminator 2
 340 00e2 0368     		ldr	r3, [r0]
 341 00e4 002B     		cmp	r3, #0
 342 00e6 43D0     		beq	.L49
2465:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (sock->conn->pcb.tcp->state == LISTEN) {
 343              		.loc 1 2465 0 discriminator 4
 344 00e8 5A68     		ldr	r2, [r3, #4]
 345 00ea 002A     		cmp	r2, #0
 346 00ec 42D0     		beq	.L50
2465:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (sock->conn->pcb.tcp->state == LISTEN) {
 347              		.loc 1 2465 0 discriminator 6
 348 00ee 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 349 00f0 03F0F003 		and	r3, r3, #240
 350 00f4 102B     		cmp	r3, #16
 351 00f6 3FD1     		bne	.L51
2466:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return EINVAL;
 352              		.loc 1 2466 0 is_stmt 1
 353 00f8 137D     		ldrb	r3, [r2, #20]	@ zero_extendqisi2
 354 00fa 012B     		cmp	r3, #1
 355 00fc 3ED0     		beq	.L52
2469:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case TCP_NODELAY:
 356              		.loc 1 2469 0
 357 00fe 012D     		cmp	r5, #1
 358 0100 03D0     		beq	.L28
 359 0102 022D     		cmp	r5, #2
 360 0104 0FD0     		beq	.L29
2505:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 361              		.loc 1 2505 0
 362 0106 5C20     		movs	r0, #92
 363              	.LVL36:
 364 0108 8DE7     		b	.L18
 365              	.LVL37:
 366              	.L28:
2471:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         tcp_nagle_disable(sock->conn->pcb.tcp);
 367              		.loc 1 2471 0
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 54


 368 010a 3368     		ldr	r3, [r6]
 369 010c 2BB1     		cbz	r3, .L30
2472:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
 370              		.loc 1 2472 0
 371 010e 937E     		ldrb	r3, [r2, #26]	@ zero_extendqisi2
 372 0110 43F04003 		orr	r3, r3, #64
 373 0114 9376     		strb	r3, [r2, #26]
2290:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 374              		.loc 1 2290 0
 375 0116 0020     		movs	r0, #0
 376              	.LVL38:
 377 0118 85E7     		b	.L18
 378              	.LVL39:
 379              	.L30:
2474:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 380              		.loc 1 2474 0
 381 011a 937E     		ldrb	r3, [r2, #26]	@ zero_extendqisi2
 382 011c 03F0BF03 		and	r3, r3, #191
 383 0120 9376     		strb	r3, [r2, #26]
2290:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 384              		.loc 1 2290 0
 385 0122 0020     		movs	r0, #0
 386              	.LVL40:
 387 0124 7FE7     		b	.L18
 388              	.LVL41:
 389              	.L29:
2480:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_TCP, TCP_KEEPALIVE) -> %"U32_F"\n",
 390              		.loc 1 2480 0
 391 0126 3368     		ldr	r3, [r6]
 392 0128 C2F89030 		str	r3, [r2, #144]
2290:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 393              		.loc 1 2290 0
 394 012c 0020     		movs	r0, #0
 395              	.LVL42:
2483:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 396              		.loc 1 2483 0
 397 012e 7AE7     		b	.L18
 398              	.LVL43:
 399              	.L31:
2293:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 400              		.loc 1 2293 0
 401 0130 0920     		movs	r0, #9
 402              	.LVL44:
 403 0132 78E7     		b	.L18
 404              	.LVL45:
 405              	.L34:
2310:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (*(const int*)optval) {
 406              		.loc 1 2310 0
 407 0134 1620     		movs	r0, #22
 408              	.LVL46:
 409 0136 76E7     		b	.L18
 410              	.LVL47:
 411              	.L35:
 412 0138 1620     		movs	r0, #22
 413              	.LVL48:
 414 013a 74E7     		b	.L18
 415              	.LVL49:
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 55


 416              	.L36:
 417 013c 1620     		movs	r0, #22
 418              	.LVL50:
 419 013e 72E7     		b	.L18
 420              	.LVL51:
 421              	.L37:
2363:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDPLITE
 422              		.loc 1 2363 0
 423 0140 1620     		movs	r0, #22
 424              	.LVL52:
 425 0142 70E7     		b	.L18
 426              	.LVL53:
 427              	.L38:
 428 0144 1620     		movs	r0, #22
 429              	.LVL54:
 430 0146 6EE7     		b	.L18
 431              	.LVL55:
 432              	.L39:
 433 0148 1620     		movs	r0, #22
 434              	.LVL56:
 435 014a 6CE7     		b	.L18
 436              	.LVL57:
 437              	.L40:
 438 014c 5C20     		movs	r0, #92
 439              	.LVL58:
 440 014e 6AE7     		b	.L18
 441              	.LVL59:
 442              	.L56:
2456:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 443              		.loc 1 2456 0
 444 0150 5C20     		movs	r0, #92
 445              	.LVL60:
 446 0152 68E7     		b	.L18
 447              	.LVL61:
 448              	.L42:
2389:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->conn->pcb.ip->ttl = (u8_t)(*(const int*)optval);
 449              		.loc 1 2389 0
 450 0154 1620     		movs	r0, #22
 451              	.LVL62:
 452 0156 66E7     		b	.L18
 453              	.LVL63:
 454              	.L43:
 455 0158 1620     		movs	r0, #22
 456              	.LVL64:
 457 015a 64E7     		b	.L18
 458              	.LVL65:
 459              	.L44:
 460 015c 1620     		movs	r0, #22
 461              	.LVL66:
 462 015e 62E7     		b	.L18
 463              	.LVL67:
 464              	.L45:
2395:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->conn->pcb.ip->tos = (u8_t)(*(const int*)optval);
 465              		.loc 1 2395 0
 466 0160 1620     		movs	r0, #22
 467              	.LVL68:
 468 0162 60E7     		b	.L18
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 56


 469              	.LVL69:
 470              	.L46:
 471 0164 1620     		movs	r0, #22
 472              	.LVL70:
 473 0166 5EE7     		b	.L18
 474              	.LVL71:
 475              	.L47:
 476 0168 1620     		movs	r0, #22
 477              	.LVL72:
 478 016a 5CE7     		b	.L18
 479              	.LVL73:
 480              	.L48:
2465:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (sock->conn->pcb.tcp->state == LISTEN) {
 481              		.loc 1 2465 0
 482 016c 1620     		movs	r0, #22
 483              	.LVL74:
 484 016e 5AE7     		b	.L18
 485              	.LVL75:
 486              	.L49:
 487 0170 1620     		movs	r0, #22
 488              	.LVL76:
 489 0172 58E7     		b	.L18
 490              	.LVL77:
 491              	.L50:
 492 0174 1620     		movs	r0, #22
 493              	.LVL78:
 494 0176 56E7     		b	.L18
 495              	.LVL79:
 496              	.L51:
 497 0178 5C20     		movs	r0, #92
 498              	.LVL80:
 499 017a 54E7     		b	.L18
 500              	.LVL81:
 501              	.L52:
2467:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 502              		.loc 1 2467 0
 503 017c 1620     		movs	r0, #22
 504              	.LVL82:
 505 017e 52E7     		b	.L18
 506              		.cfi_endproc
 507              	.LFE189:
 509              		.section	.text.lwip_getsockopt_impl,"ax",%progbits
 510              		.align	1
 511              		.syntax unified
 512              		.thumb
 513              		.thumb_func
 514              		.fpu fpv5-sp-d16
 516              	lwip_getsockopt_impl:
 517              	.LFB187:
1888:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u8_t err = 0;
 518              		.loc 1 1888 0
 519              		.cfi_startproc
 520              		@ args = 4, pretend = 0, frame = 0
 521              		@ frame_needed = 0, uses_anonymous_args = 0
 522              	.LVL83:
 523 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 524              	.LCFI4:
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 57


 525              		.cfi_def_cfa_offset 24
 526              		.cfi_offset 3, -24
 527              		.cfi_offset 4, -20
 528              		.cfi_offset 5, -16
 529              		.cfi_offset 6, -12
 530              		.cfi_offset 7, -8
 531              		.cfi_offset 14, -4
 532 0002 0C46     		mov	r4, r1
 533 0004 1546     		mov	r5, r2
 534 0006 1F46     		mov	r7, r3
 535              	.LVL84:
1890:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 536              		.loc 1 1890 0
 537 0008 FFF7FEFF 		bl	tryget_socket
 538              	.LVL85:
1891:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return EBADF;
 539              		.loc 1 1891 0
 540 000c 0028     		cmp	r0, #0
 541 000e 00F0EB80 		beq	.L82
 542 0012 0646     		mov	r6, r0
1895:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 543              		.loc 1 1895 0
 544 0014 062C     		cmp	r4, #6
 545 0016 00F0C480 		beq	.L62
 546 001a 40F6FF73 		movw	r3, #4095
 547 001e 9C42     		cmp	r4, r3
 548 0020 04D0     		beq	.L63
 549 0022 002C     		cmp	r4, #0
 550 0024 00F09D80 		beq	.L118
2180:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 551              		.loc 1 2180 0
 552 0028 5C20     		movs	r0, #92
 553              	.LVL86:
 554              	.L61:
2192:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 555              		.loc 1 2192 0
 556 002a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 557              	.LVL87:
 558              	.L63:
1899:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 559              		.loc 1 1899 0
 560 002c 202D     		cmp	r5, #32
 561 002e 2BD0     		beq	.L65
 562 0030 0DDD     		ble	.L119
 563 0032 41F20803 		movw	r3, #4104
 564 0036 9D42     		cmp	r5, r3
 565 0038 3BD0     		beq	.L68
 566 003a 41F20A03 		movw	r3, #4106
 567 003e 9D42     		cmp	r5, r3
 568 0040 7AD0     		beq	.L69
 569 0042 41F20703 		movw	r3, #4103
 570 0046 9D42     		cmp	r5, r3
 571 0048 54D0     		beq	.L120
 572              	.L84:
2011:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 573              		.loc 1 2011 0
 574 004a 5C20     		movs	r0, #92
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 58


 575              	.LVL88:
 576 004c EDE7     		b	.L61
 577              	.LVL89:
 578              	.L119:
1899:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 579              		.loc 1 1899 0
 580 004e 022D     		cmp	r5, #2
 581 0050 18D1     		bne	.L121
1903:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (NETCONNTYPE_GROUP(sock->conn->type) != NETCONN_TCP) {
 582              		.loc 1 1903 0
 583 0052 069B     		ldr	r3, [sp, #24]
 584 0054 1B68     		ldr	r3, [r3]
 585 0056 032B     		cmp	r3, #3
 586 0058 40F2C880 		bls	.L85
1903:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (NETCONNTYPE_GROUP(sock->conn->type) != NETCONN_TCP) {
 587              		.loc 1 1903 0 is_stmt 0 discriminator 2
 588 005c 0368     		ldr	r3, [r0]
 589 005e 002B     		cmp	r3, #0
 590 0060 00F0C680 		beq	.L86
1903:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (NETCONNTYPE_GROUP(sock->conn->type) != NETCONN_TCP) {
 591              		.loc 1 1903 0 discriminator 4
 592 0064 5A68     		ldr	r2, [r3, #4]
 593 0066 002A     		cmp	r2, #0
 594 0068 00F0C480 		beq	.L87
1904:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return ENOPROTOOPT;
 595              		.loc 1 1904 0 is_stmt 1
 596 006c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 597 006e 03F0F003 		and	r3, r3, #240
 598 0072 102B     		cmp	r3, #16
 599 0074 40F0C080 		bne	.L88
1907:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         *(int*)optval = 1;
 600              		.loc 1 1907 0 discriminator 1
 601 0078 137D     		ldrb	r3, [r2, #20]	@ zero_extendqisi2
 602 007a 012B     		cmp	r3, #1
 603 007c 16D0     		beq	.L122
1910:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 604              		.loc 1 1910 0
 605 007e 0020     		movs	r0, #0
 606              	.LVL90:
 607 0080 3860     		str	r0, [r7]
 608 0082 D2E7     		b	.L61
 609              	.LVL91:
 610              	.L121:
1899:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 611              		.loc 1 1899 0
 612 0084 082D     		cmp	r5, #8
 613 0086 E0D1     		bne	.L84
 614              	.L65:
1921:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = ip_get_option(sock->conn->pcb.ip, optname);
 615              		.loc 1 1921 0
 616 0088 069B     		ldr	r3, [sp, #24]
 617 008a 1B68     		ldr	r3, [r3]
 618 008c 032B     		cmp	r3, #3
 619 008e 40F2B580 		bls	.L89
1921:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = ip_get_option(sock->conn->pcb.ip, optname);
 620              		.loc 1 1921 0 is_stmt 0 discriminator 2
 621 0092 3368     		ldr	r3, [r6]
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 59


 622 0094 002B     		cmp	r3, #0
 623 0096 00F0B380 		beq	.L90
1921:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = ip_get_option(sock->conn->pcb.ip, optname);
 624              		.loc 1 1921 0 discriminator 4
 625 009a 5B68     		ldr	r3, [r3, #4]
 626 009c 002B     		cmp	r3, #0
 627 009e 00F0B180 		beq	.L91
1922:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, SOL_SOCKET, optname=0x%x, ..) = %s\n",
 628              		.loc 1 1922 0 is_stmt 1
 629 00a2 1B7A     		ldrb	r3, [r3, #8]	@ zero_extendqisi2
 630 00a4 1D40     		ands	r5, r5, r3
 631              	.LVL92:
 632 00a6 3D60     		str	r5, [r7]
1889:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 633              		.loc 1 1889 0
 634 00a8 0020     		movs	r0, #0
 635              	.LVL93:
1925:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 636              		.loc 1 1925 0
 637 00aa BEE7     		b	.L61
 638              	.LVL94:
 639              	.L122:
1908:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
 640              		.loc 1 1908 0
 641 00ac 3B60     		str	r3, [r7]
1889:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 642              		.loc 1 1889 0
 643 00ae 0020     		movs	r0, #0
 644              	.LVL95:
1908:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
 645              		.loc 1 1908 0
 646 00b0 BBE7     		b	.L61
 647              	.LVL96:
 648              	.L68:
1928:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       switch (NETCONNTYPE_GROUP(netconn_type(sock->conn))) {
 649              		.loc 1 1928 0
 650 00b2 069B     		ldr	r3, [sp, #24]
 651 00b4 1B68     		ldr	r3, [r3]
 652 00b6 032B     		cmp	r3, #3
 653 00b8 40F2A680 		bls	.L92
1928:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       switch (NETCONNTYPE_GROUP(netconn_type(sock->conn))) {
 654              		.loc 1 1928 0 is_stmt 0 discriminator 2
 655 00bc 0368     		ldr	r3, [r0]
 656 00be 002B     		cmp	r3, #0
 657 00c0 00F0A480 		beq	.L93
1929:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       case NETCONN_RAW:
 658              		.loc 1 1929 0 is_stmt 1
 659 00c4 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 660 00c6 02F0F003 		and	r3, r2, #240
 661 00ca 202B     		cmp	r3, #32
 662 00cc 0ED0     		beq	.L73
 663 00ce 402B     		cmp	r3, #64
 664 00d0 04D0     		beq	.L74
 665 00d2 102B     		cmp	r3, #16
 666 00d4 06D0     		beq	.L123
1940:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG,
 667              		.loc 1 1940 0
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 60


 668 00d6 3A60     		str	r2, [r7]
1889:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 669              		.loc 1 1889 0
 670 00d8 0020     		movs	r0, #0
 671              	.LVL97:
 672 00da A6E7     		b	.L61
 673              	.LVL98:
 674              	.L74:
1931:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         break;
 675              		.loc 1 1931 0
 676 00dc 0323     		movs	r3, #3
 677 00de 3B60     		str	r3, [r7]
1889:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 678              		.loc 1 1889 0
 679 00e0 0020     		movs	r0, #0
 680              	.LVL99:
1932:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       case NETCONN_TCP:
 681              		.loc 1 1932 0
 682 00e2 A2E7     		b	.L61
 683              	.LVL100:
 684              	.L123:
1934:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         break;
 685              		.loc 1 1934 0
 686 00e4 0123     		movs	r3, #1
 687 00e6 3B60     		str	r3, [r7]
1889:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 688              		.loc 1 1889 0
 689 00e8 0020     		movs	r0, #0
 690              	.LVL101:
1935:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       case NETCONN_UDP:
 691              		.loc 1 1935 0
 692 00ea 9EE7     		b	.L61
 693              	.LVL102:
 694              	.L73:
1937:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         break;
 695              		.loc 1 1937 0
 696 00ec 0223     		movs	r3, #2
 697 00ee 3B60     		str	r3, [r7]
1889:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 698              		.loc 1 1889 0
 699 00f0 0020     		movs	r0, #0
 700              	.LVL103:
1938:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       default: /* unrecognized socket type */
 701              		.loc 1 1938 0
 702 00f2 9AE7     		b	.L61
 703              	.LVL104:
 704              	.L120:
1950:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* only overwrite ERR_OK or temporary errors */
 705              		.loc 1 1950 0
 706 00f4 069B     		ldr	r3, [sp, #24]
 707 00f6 1B68     		ldr	r3, [r3]
 708 00f8 032B     		cmp	r3, #3
 709 00fa 40F28980 		bls	.L94
1952:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock_set_errno(sock, err_to_errno(sock->conn->last_err));
 710              		.loc 1 1952 0
 711 00fe 027C     		ldrb	r2, [r0, #16]	@ zero_extendqisi2
 712 0100 732A     		cmp	r2, #115
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 61


 713 0102 14BF     		ite	ne
 714 0104 0023     		movne	r3, #0
 715 0106 0123     		moveq	r3, #1
 716 0108 002A     		cmp	r2, #0
 717 010a 08BF     		it	eq
 718 010c 0123     		moveq	r3, #1
 719 010e 4BB1     		cbz	r3, .L76
1952:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock_set_errno(sock, err_to_errno(sock->conn->last_err));
 720              		.loc 1 1952 0 is_stmt 0 discriminator 1
 721 0110 0368     		ldr	r3, [r0]
 722 0112 3BB1     		cbz	r3, .L76
 723              	.LBB2:
1953:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 724              		.loc 1 1953 0 is_stmt 1
 725 0114 93F90800 		ldrsb	r0, [r3, #8]
 726              	.LVL105:
 727 0118 FFF7FEFF 		bl	err_to_errno
 728              	.LVL106:
 729 011c 3074     		strb	r0, [r6, #16]
 730 011e 08B1     		cbz	r0, .L76
1953:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 731              		.loc 1 1953 0 is_stmt 0 discriminator 1
 732 0120 4C4B     		ldr	r3, .L125
 733 0122 1860     		str	r0, [r3]
 734              	.LVL107:
 735              	.L76:
 736              	.LBE2:
1955:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->err = 0;
 737              		.loc 1 1955 0 is_stmt 1
 738 0124 337C     		ldrb	r3, [r6, #16]	@ zero_extendqisi2
 739 0126 FF2B     		cmp	r3, #255
 740 0128 03D0     		beq	.L124
 741              	.L77:
1955:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->err = 0;
 742              		.loc 1 1955 0 is_stmt 0 discriminator 4
 743 012a 3B60     		str	r3, [r7]
1956:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, SOL_SOCKET, SO_ERROR) = %d\n",
 744              		.loc 1 1956 0 is_stmt 1 discriminator 4
 745 012c 0020     		movs	r0, #0
 746 012e 3074     		strb	r0, [r6, #16]
1959:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 747              		.loc 1 1959 0 discriminator 4
 748 0130 7BE7     		b	.L61
 749              	.L124:
1955:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->err = 0;
 750              		.loc 1 1955 0
 751 0132 4FF0FF33 		mov	r3, #-1
 752 0136 F8E7     		b	.L77
 753              	.LVL108:
 754              	.L69:
1998:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDPLITE
 755              		.loc 1 1998 0
 756 0138 069B     		ldr	r3, [sp, #24]
 757 013a 1B68     		ldr	r3, [r3]
 758 013c 032B     		cmp	r3, #3
 759 013e 69D9     		bls	.L96
1998:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDPLITE
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 62


 760              		.loc 1 1998 0 is_stmt 0 discriminator 2
 761 0140 0368     		ldr	r3, [r0]
 762 0142 002B     		cmp	r3, #0
 763 0144 68D0     		beq	.L97
1998:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDPLITE
 764              		.loc 1 1998 0 discriminator 4
 765 0146 5A68     		ldr	r2, [r3, #4]
 766 0148 002A     		cmp	r2, #0
 767 014a 67D0     		beq	.L98
1998:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDPLITE
 768              		.loc 1 1998 0 discriminator 6
 769 014c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 770 014e 03F0F003 		and	r3, r3, #240
 771 0152 202B     		cmp	r3, #32
 772 0154 64D1     		bne	.L99
2005:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 773              		.loc 1 2005 0 is_stmt 1
 774 0156 137C     		ldrb	r3, [r2, #16]	@ zero_extendqisi2
 775 0158 03F00103 		and	r3, r3, #1
 776 015c 3B60     		str	r3, [r7]
1889:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 777              		.loc 1 1889 0
 778 015e 0020     		movs	r0, #0
 779              	.LVL109:
2006:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_UDP*/
 780              		.loc 1 2006 0
 781 0160 63E7     		b	.L61
 782              	.LVL110:
 783              	.L118:
2018:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_TTL:
 784              		.loc 1 2018 0
 785 0162 012D     		cmp	r5, #1
 786 0164 0FD0     		beq	.L78
 787 0166 022D     		cmp	r5, #2
 788 0168 5CD1     		bne	.L115
2020:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = sock->conn->pcb.ip->ttl;
 789              		.loc 1 2020 0
 790 016a 069B     		ldr	r3, [sp, #24]
 791 016c 1B68     		ldr	r3, [r3]
 792 016e 032B     		cmp	r3, #3
 793 0170 5AD9     		bls	.L101
2020:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = sock->conn->pcb.ip->ttl;
 794              		.loc 1 2020 0 is_stmt 0 discriminator 2
 795 0172 0368     		ldr	r3, [r0]
 796 0174 002B     		cmp	r3, #0
 797 0176 59D0     		beq	.L102
2020:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = sock->conn->pcb.ip->ttl;
 798              		.loc 1 2020 0 discriminator 4
 799 0178 5B68     		ldr	r3, [r3, #4]
 800 017a 002B     		cmp	r3, #0
 801 017c 58D0     		beq	.L103
2021:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_IP, IP_TTL) = %d\n",
 802              		.loc 1 2021 0 is_stmt 1
 803 017e 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
 804 0180 3B60     		str	r3, [r7]
1889:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 805              		.loc 1 1889 0
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 63


 806 0182 0020     		movs	r0, #0
 807              	.LVL111:
2024:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_TOS:
 808              		.loc 1 2024 0
 809 0184 51E7     		b	.L61
 810              	.LVL112:
 811              	.L78:
2026:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = sock->conn->pcb.ip->tos;
 812              		.loc 1 2026 0
 813 0186 069B     		ldr	r3, [sp, #24]
 814 0188 1B68     		ldr	r3, [r3]
 815 018a 032B     		cmp	r3, #3
 816 018c 52D9     		bls	.L104
2026:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = sock->conn->pcb.ip->tos;
 817              		.loc 1 2026 0 is_stmt 0 discriminator 2
 818 018e 0368     		ldr	r3, [r0]
 819 0190 002B     		cmp	r3, #0
 820 0192 51D0     		beq	.L105
2026:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = sock->conn->pcb.ip->tos;
 821              		.loc 1 2026 0 discriminator 4
 822 0194 5B68     		ldr	r3, [r3, #4]
 823 0196 002B     		cmp	r3, #0
 824 0198 50D0     		beq	.L106
2027:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_IP, IP_TOS) = %d\n",
 825              		.loc 1 2027 0 is_stmt 1
 826 019a 5B7A     		ldrb	r3, [r3, #9]	@ zero_extendqisi2
 827 019c 3B60     		str	r3, [r7]
1889:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 828              		.loc 1 1889 0
 829 019e 0020     		movs	r0, #0
 830              	.LVL113:
2030:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_MULTICAST_TX_OPTIONS
 831              		.loc 1 2030 0
 832 01a0 43E7     		b	.L61
 833              	.LVL114:
 834              	.L62:
2073:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (sock->conn->pcb.tcp->state == LISTEN) {
 835              		.loc 1 2073 0
 836 01a2 069B     		ldr	r3, [sp, #24]
 837 01a4 1B68     		ldr	r3, [r3]
 838 01a6 032B     		cmp	r3, #3
 839 01a8 4AD9     		bls	.L107
2073:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (sock->conn->pcb.tcp->state == LISTEN) {
 840              		.loc 1 2073 0 is_stmt 0 discriminator 2
 841 01aa 0368     		ldr	r3, [r0]
 842 01ac 002B     		cmp	r3, #0
 843 01ae 49D0     		beq	.L108
2073:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (sock->conn->pcb.tcp->state == LISTEN) {
 844              		.loc 1 2073 0 discriminator 4
 845 01b0 5A68     		ldr	r2, [r3, #4]
 846 01b2 002A     		cmp	r2, #0
 847 01b4 48D0     		beq	.L109
2073:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (sock->conn->pcb.tcp->state == LISTEN) {
 848              		.loc 1 2073 0 discriminator 6
 849 01b6 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 850 01b8 03F0F003 		and	r3, r3, #240
 851 01bc 102B     		cmp	r3, #16
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 64


 852 01be 45D1     		bne	.L110
2074:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return EINVAL;
 853              		.loc 1 2074 0 is_stmt 1
 854 01c0 137D     		ldrb	r3, [r2, #20]	@ zero_extendqisi2
 855 01c2 012B     		cmp	r3, #1
 856 01c4 44D0     		beq	.L111
2077:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case TCP_NODELAY:
 857              		.loc 1 2077 0
 858 01c6 012D     		cmp	r5, #1
 859 01c8 03D0     		beq	.L80
 860 01ca 022D     		cmp	r5, #2
 861 01cc 07D0     		beq	.L81
2109:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 862              		.loc 1 2109 0
 863 01ce 5C20     		movs	r0, #92
 864              	.LVL115:
 865 01d0 2BE7     		b	.L61
 866              	.LVL116:
 867              	.L80:
2079:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_TCP, TCP_NODELAY) = %s\n",
 868              		.loc 1 2079 0
 869 01d2 937E     		ldrb	r3, [r2, #26]	@ zero_extendqisi2
 870 01d4 C3F38013 		ubfx	r3, r3, #6, #1
 871 01d8 3B60     		str	r3, [r7]
1889:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 872              		.loc 1 1889 0
 873 01da 0020     		movs	r0, #0
 874              	.LVL117:
2082:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case TCP_KEEPALIVE:
 875              		.loc 1 2082 0
 876 01dc 25E7     		b	.L61
 877              	.LVL118:
 878              	.L81:
2084:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_TCP, TCP_KEEPALIVE) = %d\n",
 879              		.loc 1 2084 0
 880 01de D2F89030 		ldr	r3, [r2, #144]
 881 01e2 3B60     		str	r3, [r7]
1889:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 882              		.loc 1 1889 0
 883 01e4 0020     		movs	r0, #0
 884              	.LVL119:
2087:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 885              		.loc 1 2087 0
 886 01e6 20E7     		b	.L61
 887              	.LVL120:
 888              	.L82:
1892:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 889              		.loc 1 1892 0
 890 01e8 0920     		movs	r0, #9
 891              	.LVL121:
 892 01ea 1EE7     		b	.L61
 893              	.LVL122:
 894              	.L85:
1903:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (NETCONNTYPE_GROUP(sock->conn->type) != NETCONN_TCP) {
 895              		.loc 1 1903 0
 896 01ec 1620     		movs	r0, #22
 897              	.LVL123:
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 65


 898 01ee 1CE7     		b	.L61
 899              	.LVL124:
 900              	.L86:
 901 01f0 1620     		movs	r0, #22
 902              	.LVL125:
 903 01f2 1AE7     		b	.L61
 904              	.LVL126:
 905              	.L87:
 906 01f4 1620     		movs	r0, #22
 907              	.LVL127:
 908 01f6 18E7     		b	.L61
 909              	.LVL128:
 910              	.L88:
1905:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 911              		.loc 1 1905 0
 912 01f8 5C20     		movs	r0, #92
 913              	.LVL129:
 914 01fa 16E7     		b	.L61
 915              	.LVL130:
 916              	.L89:
1921:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = ip_get_option(sock->conn->pcb.ip, optname);
 917              		.loc 1 1921 0
 918 01fc 1620     		movs	r0, #22
 919              	.LVL131:
 920 01fe 14E7     		b	.L61
 921              	.LVL132:
 922              	.L90:
 923 0200 1620     		movs	r0, #22
 924              	.LVL133:
 925 0202 12E7     		b	.L61
 926              	.LVL134:
 927              	.L91:
 928 0204 1620     		movs	r0, #22
 929              	.LVL135:
 930 0206 10E7     		b	.L61
 931              	.LVL136:
 932              	.L92:
1928:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       switch (NETCONNTYPE_GROUP(netconn_type(sock->conn))) {
 933              		.loc 1 1928 0
 934 0208 1620     		movs	r0, #22
 935              	.LVL137:
 936 020a 0EE7     		b	.L61
 937              	.LVL138:
 938              	.L93:
 939 020c 1620     		movs	r0, #22
 940              	.LVL139:
 941 020e 0CE7     		b	.L61
 942              	.LVL140:
 943              	.L94:
1950:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* only overwrite ERR_OK or temporary errors */
 944              		.loc 1 1950 0
 945 0210 1620     		movs	r0, #22
 946              	.LVL141:
 947 0212 0AE7     		b	.L61
 948              	.LVL142:
 949              	.L96:
1998:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDPLITE
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 66


 950              		.loc 1 1998 0
 951 0214 1620     		movs	r0, #22
 952              	.LVL143:
 953 0216 08E7     		b	.L61
 954              	.LVL144:
 955              	.L97:
 956 0218 1620     		movs	r0, #22
 957              	.LVL145:
 958 021a 06E7     		b	.L61
 959              	.LVL146:
 960              	.L98:
 961 021c 1620     		movs	r0, #22
 962              	.LVL147:
 963 021e 04E7     		b	.L61
 964              	.LVL148:
 965              	.L99:
 966 0220 5C20     		movs	r0, #92
 967              	.LVL149:
 968 0222 02E7     		b	.L61
 969              	.LVL150:
 970              	.L115:
2064:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 971              		.loc 1 2064 0
 972 0224 5C20     		movs	r0, #92
 973              	.LVL151:
 974 0226 00E7     		b	.L61
 975              	.LVL152:
 976              	.L101:
2020:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = sock->conn->pcb.ip->ttl;
 977              		.loc 1 2020 0
 978 0228 1620     		movs	r0, #22
 979              	.LVL153:
 980 022a FEE6     		b	.L61
 981              	.LVL154:
 982              	.L102:
 983 022c 1620     		movs	r0, #22
 984              	.LVL155:
 985 022e FCE6     		b	.L61
 986              	.LVL156:
 987              	.L103:
 988 0230 1620     		movs	r0, #22
 989              	.LVL157:
 990 0232 FAE6     		b	.L61
 991              	.LVL158:
 992              	.L104:
2026:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = sock->conn->pcb.ip->tos;
 993              		.loc 1 2026 0
 994 0234 1620     		movs	r0, #22
 995              	.LVL159:
 996 0236 F8E6     		b	.L61
 997              	.LVL160:
 998              	.L105:
 999 0238 1620     		movs	r0, #22
 1000              	.LVL161:
 1001 023a F6E6     		b	.L61
 1002              	.LVL162:
 1003              	.L106:
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 67


 1004 023c 1620     		movs	r0, #22
 1005              	.LVL163:
 1006 023e F4E6     		b	.L61
 1007              	.LVL164:
 1008              	.L107:
2073:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (sock->conn->pcb.tcp->state == LISTEN) {
 1009              		.loc 1 2073 0
 1010 0240 1620     		movs	r0, #22
 1011              	.LVL165:
 1012 0242 F2E6     		b	.L61
 1013              	.LVL166:
 1014              	.L108:
 1015 0244 1620     		movs	r0, #22
 1016              	.LVL167:
 1017 0246 F0E6     		b	.L61
 1018              	.LVL168:
 1019              	.L109:
 1020 0248 1620     		movs	r0, #22
 1021              	.LVL169:
 1022 024a EEE6     		b	.L61
 1023              	.LVL170:
 1024              	.L110:
 1025 024c 5C20     		movs	r0, #92
 1026              	.LVL171:
 1027 024e ECE6     		b	.L61
 1028              	.LVL172:
 1029              	.L111:
2075:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 1030              		.loc 1 2075 0
 1031 0250 1620     		movs	r0, #22
 1032              	.LVL173:
 1033 0252 EAE6     		b	.L61
 1034              	.L126:
 1035              		.align	2
 1036              	.L125:
 1037 0254 00000000 		.word	errno
 1038              		.cfi_endproc
 1039              	.LFE187:
 1041              		.section	.text.alloc_socket,"ax",%progbits
 1042              		.align	1
 1043              		.syntax unified
 1044              		.thumb
 1045              		.thumb_func
 1046              		.fpu fpv5-sp-d16
 1048              	alloc_socket:
 1049              	.LFB163:
 402:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int i;
 1050              		.loc 1 402 0
 1051              		.cfi_startproc
 1052              		@ args = 0, pretend = 0, frame = 0
 1053              		@ frame_needed = 0, uses_anonymous_args = 0
 1054              	.LVL174:
 1055 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1056              	.LCFI5:
 1057              		.cfi_def_cfa_offset 24
 1058              		.cfi_offset 3, -24
 1059              		.cfi_offset 4, -20
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 68


 1060              		.cfi_offset 5, -16
 1061              		.cfi_offset 6, -12
 1062              		.cfi_offset 7, -8
 1063              		.cfi_offset 14, -4
 1064 0002 0646     		mov	r6, r0
 1065 0004 0D46     		mov	r5, r1
 1066              	.LVL175:
 407:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Protect socket array */
 1067              		.loc 1 407 0
 1068 0006 0024     		movs	r4, #0
 1069 0008 05E0     		b	.L128
 1070              	.LVL176:
 1071              	.L136:
 420:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].errevent   = 0;
 1072              		.loc 1 420 0 discriminator 2
 1073 000a 35B3     		cbz	r5, .L130
 420:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].errevent   = 0;
 1074              		.loc 1 420 0 is_stmt 0
 1075 000c 0125     		movs	r5, #1
 1076              	.LVL177:
 1077 000e 24E0     		b	.L130
 1078              	.LVL178:
 1079              	.L129:
 425:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 1080              		.loc 1 425 0 is_stmt 1 discriminator 2
 1081 0010 FFF7FEFF 		bl	sys_arch_unprotect
 1082              	.LVL179:
 407:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Protect socket array */
 1083              		.loc 1 407 0 discriminator 2
 1084 0014 0134     		adds	r4, r4, #1
 1085              	.LVL180:
 1086              	.L128:
 407:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Protect socket array */
 1087              		.loc 1 407 0 is_stmt 0 discriminator 1
 1088 0016 032C     		cmp	r4, #3
 1089 0018 29DC     		bgt	.L135
 409:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (!sockets[i].conn && (sockets[i].select_waiting == 0)) {
 1090              		.loc 1 409 0 is_stmt 1
 1091 001a FFF7FEFF 		bl	sys_arch_protect
 1092              	.LVL181:
 410:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].conn       = newconn;
 1093              		.loc 1 410 0
 1094 001e 04EB8402 		add	r2, r4, r4, lsl #2
 1095 0022 9300     		lsls	r3, r2, #2
 1096 0024 144A     		ldr	r2, .L137
 1097 0026 D358     		ldr	r3, [r2, r3]
 1098 0028 002B     		cmp	r3, #0
 1099 002a F1D1     		bne	.L129
 410:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].conn       = newconn;
 1100              		.loc 1 410 0 is_stmt 0 discriminator 1
 1101 002c 04EB8403 		add	r3, r4, r4, lsl #2
 1102 0030 9A00     		lsls	r2, r3, #2
 1103 0032 114B     		ldr	r3, .L137
 1104 0034 1344     		add	r3, r3, r2
 1105 0036 5B7C     		ldrb	r3, [r3, #17]	@ zero_extendqisi2
 1106 0038 002B     		cmp	r3, #0
 1107 003a E9D1     		bne	.L129
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 69


 411:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* The socket is not yet known to anyone, so no need to protect
 1108              		.loc 1 411 0 is_stmt 1
 1109 003c 0E49     		ldr	r1, .L137
 1110 003e 8F18     		adds	r7, r1, r2
 1111 0040 8E50     		str	r6, [r1, r2]
 414:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].lastdata   = NULL;
 1112              		.loc 1 414 0
 1113 0042 FFF7FEFF 		bl	sys_arch_unprotect
 1114              	.LVL182:
 415:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].lastoffset = 0;
 1115              		.loc 1 415 0
 1116 0046 0023     		movs	r3, #0
 1117 0048 7B60     		str	r3, [r7, #4]
 416:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].rcvevent   = 0;
 1118              		.loc 1 416 0
 1119 004a 3B81     		strh	r3, [r7, #8]	@ movhi
 417:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* TCP sendbuf is empty, but the socket is not yet writable until connected
 1120              		.loc 1 417 0
 1121 004c 7B81     		strh	r3, [r7, #10]	@ movhi
 420:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].errevent   = 0;
 1122              		.loc 1 420 0
 1123 004e 3378     		ldrb	r3, [r6]	@ zero_extendqisi2
 1124 0050 03F0F003 		and	r3, r3, #240
 1125 0054 102B     		cmp	r3, #16
 1126 0056 D8D0     		beq	.L136
 1127 0058 0125     		movs	r5, #1
 1128              	.LVL183:
 1129              	.L130:
 420:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].errevent   = 0;
 1130              		.loc 1 420 0 is_stmt 0 discriminator 6
 1131 005a A200     		lsls	r2, r4, #2
 1132 005c 2244     		add	r2, r2, r4
 1133 005e 9100     		lsls	r1, r2, #2
 1134 0060 054B     		ldr	r3, .L137
 1135 0062 0B44     		add	r3, r3, r1
 1136 0064 9D81     		strh	r5, [r3, #12]	@ movhi
 421:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].err        = 0;
 1137              		.loc 1 421 0 is_stmt 1 discriminator 6
 1138 0066 0022     		movs	r2, #0
 1139 0068 DA81     		strh	r2, [r3, #14]	@ movhi
 422:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return i + LWIP_SOCKET_OFFSET;
 1140              		.loc 1 422 0 discriminator 6
 1141 006a 1A74     		strb	r2, [r3, #16]
 423:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 1142              		.loc 1 423 0 discriminator 6
 1143 006c 01E0     		b	.L127
 1144              	.LVL184:
 1145              	.L135:
 427:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 1146              		.loc 1 427 0
 1147 006e 4FF0FF34 		mov	r4, #-1
 1148              	.LVL185:
 1149              	.L127:
 428:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 1150              		.loc 1 428 0
 1151 0072 2046     		mov	r0, r4
 1152 0074 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 70


 1153              	.LVL186:
 1154              	.L138:
 1155 0076 00BF     		.align	2
 1156              	.L137:
 1157 0078 00000000 		.word	.LANCHOR0
 1158              		.cfi_endproc
 1159              	.LFE163:
 1161              		.section	.text.lwip_selscan,"ax",%progbits
 1162              		.align	1
 1163              		.syntax unified
 1164              		.thumb
 1165              		.thumb_func
 1166              		.fpu fpv5-sp-d16
 1168              	lwip_selscan:
 1169              	.LFB179:
1308:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int i, nready = 0;
 1170              		.loc 1 1308 0
 1171              		.cfi_startproc
 1172              		@ args = 12, pretend = 0, frame = 40
 1173              		@ frame_needed = 0, uses_anonymous_args = 0
 1174              	.LVL187:
 1175 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1176              	.LCFI6:
 1177              		.cfi_def_cfa_offset 36
 1178              		.cfi_offset 4, -36
 1179              		.cfi_offset 5, -32
 1180              		.cfi_offset 6, -28
 1181              		.cfi_offset 7, -24
 1182              		.cfi_offset 8, -20
 1183              		.cfi_offset 9, -16
 1184              		.cfi_offset 10, -12
 1185              		.cfi_offset 11, -8
 1186              		.cfi_offset 14, -4
 1187 0004 8BB0     		sub	sp, sp, #44
 1188              	.LCFI7:
 1189              		.cfi_def_cfa_offset 80
 1190 0006 8246     		mov	r10, r0
 1191 0008 0D46     		mov	r5, r1
 1192 000a 9046     		mov	r8, r2
 1193 000c 9B46     		mov	fp, r3
 1194              	.LVL188:
 1195              	.LBB3:
1314:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   FD_ZERO(&lwriteset);
 1196              		.loc 1 1314 0
 1197 000e 08AA     		add	r2, sp, #32
 1198              	.LVL189:
 1199 0010 0023     		movs	r3, #0
 1200              	.LVL190:
 1201 0012 03E0     		b	.L140
 1202              	.LVL191:
 1203              	.L141:
1314:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   FD_ZERO(&lwriteset);
 1204              		.loc 1 1314 0 is_stmt 0 discriminator 3
 1205 0014 0021     		movs	r1, #0
 1206 0016 1170     		strb	r1, [r2]
 1207 0018 0133     		adds	r3, r3, #1
 1208              	.LVL192:
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 71


 1209 001a 0132     		adds	r2, r2, #1
 1210              	.LVL193:
 1211              	.L140:
1314:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   FD_ZERO(&lwriteset);
 1212              		.loc 1 1314 0 discriminator 1
 1213 001c 072B     		cmp	r3, #7
 1214 001e F9D9     		bls	.L141
 1215              	.LBE3:
 1216              	.LBB4:
1315:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   FD_ZERO(&lexceptset);
 1217              		.loc 1 1315 0 is_stmt 1
 1218 0020 06AA     		add	r2, sp, #24
 1219              	.LVL194:
 1220 0022 0023     		movs	r3, #0
 1221              	.LVL195:
 1222 0024 03E0     		b	.L142
 1223              	.LVL196:
 1224              	.L143:
1315:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   FD_ZERO(&lexceptset);
 1225              		.loc 1 1315 0 is_stmt 0 discriminator 3
 1226 0026 0021     		movs	r1, #0
 1227 0028 1170     		strb	r1, [r2]
 1228 002a 0133     		adds	r3, r3, #1
 1229              	.LVL197:
 1230 002c 0132     		adds	r2, r2, #1
 1231              	.LVL198:
 1232              	.L142:
1315:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   FD_ZERO(&lexceptset);
 1233              		.loc 1 1315 0 discriminator 1
 1234 002e 072B     		cmp	r3, #7
 1235 0030 F9D9     		bls	.L143
 1236              	.LBE4:
 1237              	.LBB5:
1316:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 1238              		.loc 1 1316 0 is_stmt 1
 1239 0032 04AA     		add	r2, sp, #16
 1240              	.LVL199:
 1241 0034 0023     		movs	r3, #0
 1242              	.LVL200:
 1243 0036 03E0     		b	.L144
 1244              	.LVL201:
 1245              	.L145:
1316:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 1246              		.loc 1 1316 0 is_stmt 0 discriminator 3
 1247 0038 0021     		movs	r1, #0
 1248 003a 1170     		strb	r1, [r2]
 1249 003c 0133     		adds	r3, r3, #1
 1250              	.LVL202:
 1251 003e 0132     		adds	r2, r2, #1
 1252              	.LVL203:
 1253              	.L144:
1316:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 1254              		.loc 1 1316 0 discriminator 1
 1255 0040 072B     		cmp	r3, #7
 1256 0042 F9D9     		bls	.L145
 1257              	.LBE5:
1309:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   fd_set lreadset, lwriteset, lexceptset;
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 72


 1258              		.loc 1 1309 0 is_stmt 1
 1259 0044 4FF00009 		mov	r9, #0
1320:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* if this FD is not in the set, continue */
 1260              		.loc 1 1320 0
 1261 0048 4C46     		mov	r4, r9
 1262 004a 4646     		mov	r6, r8
 1263 004c 5F46     		mov	r7, fp
 1264 004e 03E0     		b	.L146
 1265              	.LVL204:
 1266              	.L151:
1357:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* continue on to next FD in list */
 1267              		.loc 1 1357 0
 1268 0050 0198     		ldr	r0, [sp, #4]
 1269              	.LVL205:
 1270 0052 FFF7FEFF 		bl	sys_arch_unprotect
 1271              	.LVL206:
 1272              	.L150:
1320:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* if this FD is not in the set, continue */
 1273              		.loc 1 1320 0 discriminator 2
 1274 0056 0134     		adds	r4, r4, #1
 1275              	.LVL207:
 1276              	.L146:
1320:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* if this FD is not in the set, continue */
 1277              		.loc 1 1320 0 is_stmt 0 discriminator 1
 1278 0058 5445     		cmp	r4, r10
 1279 005a 80F28280 		bge	.L157
1322:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         !(writeset_in && FD_ISSET(i, writeset_in)) &&
 1280              		.loc 1 1322 0 is_stmt 1
 1281 005e 45B1     		cbz	r5, .L147
1322:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         !(writeset_in && FD_ISSET(i, writeset_in)) &&
 1282              		.loc 1 1322 0 is_stmt 0 discriminator 2
 1283 0060 6309     		lsrs	r3, r4, #5
 1284 0062 55F82320 		ldr	r2, [r5, r3, lsl #2]
 1285 0066 04F01F01 		and	r1, r4, #31
 1286 006a 0123     		movs	r3, #1
 1287 006c 8B40     		lsls	r3, r3, r1
 1288 006e 1A42     		tst	r2, r3
 1289 0070 14D1     		bne	.L148
 1290              	.L147:
1322:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         !(writeset_in && FD_ISSET(i, writeset_in)) &&
 1291              		.loc 1 1322 0 discriminator 3
 1292 0072 46B1     		cbz	r6, .L149
1323:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         !(exceptset_in && FD_ISSET(i, exceptset_in))) {
 1293              		.loc 1 1323 0 is_stmt 1
 1294 0074 6309     		lsrs	r3, r4, #5
 1295 0076 56F82320 		ldr	r2, [r6, r3, lsl #2]
 1296 007a 04F01F01 		and	r1, r4, #31
 1297 007e 0123     		movs	r3, #1
 1298 0080 8B40     		lsls	r3, r3, r1
 1299 0082 1A42     		tst	r2, r3
 1300 0084 0AD1     		bne	.L148
 1301              	.L149:
1323:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         !(exceptset_in && FD_ISSET(i, exceptset_in))) {
 1302              		.loc 1 1323 0 is_stmt 0 discriminator 1
 1303 0086 002F     		cmp	r7, #0
 1304 0088 E5D0     		beq	.L150
1324:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       continue;
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 73


 1305              		.loc 1 1324 0 is_stmt 1
 1306 008a 6309     		lsrs	r3, r4, #5
 1307 008c 57F82320 		ldr	r2, [r7, r3, lsl #2]
 1308 0090 04F01F01 		and	r1, r4, #31
 1309 0094 0123     		movs	r3, #1
 1310 0096 8B40     		lsls	r3, r3, r1
 1311 0098 1A42     		tst	r2, r3
 1312 009a DCD0     		beq	.L150
 1313              	.L148:
1328:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock = tryget_socket(i);
 1314              		.loc 1 1328 0
 1315 009c FFF7FEFF 		bl	sys_arch_protect
 1316              	.LVL208:
 1317 00a0 0190     		str	r0, [sp, #4]
 1318              	.LVL209:
1329:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (sock != NULL) {
 1319              		.loc 1 1329 0
 1320 00a2 2046     		mov	r0, r4
 1321              	.LVL210:
 1322 00a4 FFF7FEFF 		bl	tryget_socket
 1323              	.LVL211:
1330:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       void* lastdata = sock->lastdata;
 1324              		.loc 1 1330 0
 1325 00a8 0028     		cmp	r0, #0
 1326 00aa D1D0     		beq	.L151
 1327              	.LBB6:
1331:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       s16_t rcvevent = sock->rcvevent;
 1328              		.loc 1 1331 0
 1329 00ac 4268     		ldr	r2, [r0, #4]
 1330 00ae 0292     		str	r2, [sp, #8]
 1331              	.LVL212:
1332:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       u16_t sendevent = sock->sendevent;
 1332              		.loc 1 1332 0
 1333 00b0 B0F90AB0 		ldrsh	fp, [r0, #10]
 1334              	.LVL213:
1333:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       u16_t errevent = sock->errevent;
 1335              		.loc 1 1333 0
 1336 00b4 8189     		ldrh	r1, [r0, #12]
 1337 00b6 0391     		str	r1, [sp, #12]
 1338              	.LVL214:
1334:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       SYS_ARCH_UNPROTECT(lev);
 1339              		.loc 1 1334 0
 1340 00b8 B0F80E80 		ldrh	r8, [r0, #14]
 1341              	.LVL215:
1335:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 1342              		.loc 1 1335 0
 1343 00bc 0198     		ldr	r0, [sp, #4]
 1344              	.LVL216:
 1345 00be FFF7FEFF 		bl	sys_arch_unprotect
 1346              	.LVL217:
1339:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         FD_SET(i, &lreadset);
 1347              		.loc 1 1339 0
 1348 00c2 FDB1     		cbz	r5, .L152
1339:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         FD_SET(i, &lreadset);
 1349              		.loc 1 1339 0 is_stmt 0 discriminator 1
 1350 00c4 6109     		lsrs	r1, r4, #5
 1351 00c6 55F82120 		ldr	r2, [r5, r1, lsl #2]
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 74


 1352 00ca 04F01F03 		and	r3, r4, #31
 1353 00ce 0120     		movs	r0, #1
 1354 00d0 00FA03F3 		lsl	r3, r0, r3
 1355 00d4 1A42     		tst	r2, r3
 1356 00d6 15D0     		beq	.L152
1339:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         FD_SET(i, &lreadset);
 1357              		.loc 1 1339 0 discriminator 2
 1358 00d8 BBF1000F 		cmp	fp, #0
 1359 00dc D4BF     		ite	le
 1360 00de 4FF0000B 		movle	fp, #0
 1361              	.LVL218:
 1362 00e2 4FF0010B 		movgt	fp, #1
 1363 00e6 029A     		ldr	r2, [sp, #8]
 1364 00e8 002A     		cmp	r2, #0
 1365 00ea 0CBF     		ite	eq
 1366 00ec 5A46     		moveq	r2, fp
 1367 00ee 0246     		movne	r2, r0
 1368 00f0 42B1     		cbz	r2, .L152
1340:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_selscan: fd=%d ready for reading\n", i));
 1369              		.loc 1 1340 0 is_stmt 1
 1370 00f2 0AAA     		add	r2, sp, #40
 1371 00f4 02EB8101 		add	r1, r2, r1, lsl #2
 1372 00f8 51F8082C 		ldr	r2, [r1, #-8]
 1373 00fc 1343     		orrs	r3, r3, r2
 1374 00fe 41F8083C 		str	r3, [r1, #-8]
1342:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 1375              		.loc 1 1342 0
 1376 0102 8144     		add	r9, r9, r0
 1377              	.LVL219:
 1378              	.L152:
1345:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         FD_SET(i, &lwriteset);
 1379              		.loc 1 1345 0
 1380 0104 A6B1     		cbz	r6, .L153
1345:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         FD_SET(i, &lwriteset);
 1381              		.loc 1 1345 0 is_stmt 0 discriminator 1
 1382 0106 6209     		lsrs	r2, r4, #5
 1383 0108 56F82210 		ldr	r1, [r6, r2, lsl #2]
 1384 010c 04F01F00 		and	r0, r4, #31
 1385 0110 0123     		movs	r3, #1
 1386 0112 8340     		lsls	r3, r3, r0
 1387 0114 1942     		tst	r1, r3
 1388 0116 0BD0     		beq	.L153
1345:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         FD_SET(i, &lwriteset);
 1389              		.loc 1 1345 0 discriminator 2
 1390 0118 0399     		ldr	r1, [sp, #12]
 1391 011a 49B1     		cbz	r1, .L153
1346:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_selscan: fd=%d ready for writing\n", i));
 1392              		.loc 1 1346 0 is_stmt 1
 1393 011c 0AA9     		add	r1, sp, #40
 1394 011e 01EB8202 		add	r2, r1, r2, lsl #2
 1395 0122 52F8101C 		ldr	r1, [r2, #-16]
 1396 0126 0B43     		orrs	r3, r3, r1
 1397 0128 42F8103C 		str	r3, [r2, #-16]
1348:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 1398              		.loc 1 1348 0
 1399 012c 09F10109 		add	r9, r9, #1
 1400              	.LVL220:
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 75


 1401              	.L153:
1351:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         FD_SET(i, &lexceptset);
 1402              		.loc 1 1351 0
 1403 0130 002F     		cmp	r7, #0
 1404 0132 90D0     		beq	.L150
1351:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         FD_SET(i, &lexceptset);
 1405              		.loc 1 1351 0 is_stmt 0 discriminator 1
 1406 0134 6209     		lsrs	r2, r4, #5
 1407 0136 57F82210 		ldr	r1, [r7, r2, lsl #2]
 1408 013a 04F01F00 		and	r0, r4, #31
 1409 013e 0123     		movs	r3, #1
 1410 0140 8340     		lsls	r3, r3, r0
 1411 0142 1942     		tst	r1, r3
 1412 0144 87D0     		beq	.L150
1351:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         FD_SET(i, &lexceptset);
 1413              		.loc 1 1351 0 discriminator 2
 1414 0146 B8F1000F 		cmp	r8, #0
 1415 014a 84D0     		beq	.L150
1352:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_selscan: fd=%d ready for exception\n", i));
 1416              		.loc 1 1352 0 is_stmt 1
 1417 014c 0AA9     		add	r1, sp, #40
 1418 014e 01EB8202 		add	r2, r1, r2, lsl #2
 1419 0152 52F8181C 		ldr	r1, [r2, #-24]
 1420 0156 0B43     		orrs	r3, r3, r1
 1421 0158 42F8183C 		str	r3, [r2, #-24]
1354:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 1422              		.loc 1 1354 0
 1423 015c 09F10109 		add	r9, r9, #1
 1424              	.LVL221:
 1425 0160 79E7     		b	.L150
 1426              	.LVL222:
 1427              	.L157:
 1428              	.LBE6:
1362:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   *writeset_out = lwriteset;
 1429              		.loc 1 1362 0
 1430 0162 0AAB     		add	r3, sp, #40
 1431 0164 13E90300 		ldmdb	r3, {r0, r1}
 1432 0168 149B     		ldr	r3, [sp, #80]
 1433 016a 83E80300 		stm	r3, {r0, r1}
1363:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   *exceptset_out = lexceptset;
 1434              		.loc 1 1363 0
 1435 016e 06AB     		add	r3, sp, #24
 1436 0170 93E80300 		ldm	r3, {r0, r1}
 1437 0174 159B     		ldr	r3, [sp, #84]
 1438 0176 83E80300 		stm	r3, {r0, r1}
1364:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 1439              		.loc 1 1364 0
 1440 017a 04AB     		add	r3, sp, #16
 1441 017c 93E80300 		ldm	r3, {r0, r1}
 1442 0180 169B     		ldr	r3, [sp, #88]
 1443 0182 83E80300 		stm	r3, {r0, r1}
1366:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return nready;
 1444              		.loc 1 1366 0
 1445 0186 B9F1000F 		cmp	r9, #0
 1446 018a 03DB     		blt	.L158
 1447              	.L139:
1368:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 76


 1448              		.loc 1 1368 0
 1449 018c 4846     		mov	r0, r9
 1450 018e 0BB0     		add	sp, sp, #44
 1451              	.LCFI8:
 1452              		.cfi_remember_state
 1453              		.cfi_def_cfa_offset 36
 1454              		@ sp needed
 1455 0190 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1456              	.LVL223:
 1457              	.L158:
 1458              	.LCFI9:
 1459              		.cfi_restore_state
1366:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return nready;
 1460              		.loc 1 1366 0 discriminator 1
 1461 0194 034B     		ldr	r3, .L159
 1462 0196 40F25652 		movw	r2, #1366
 1463 019a 0349     		ldr	r1, .L159+4
 1464 019c 0348     		ldr	r0, .L159+8
 1465 019e FFF7FEFF 		bl	printf
 1466              	.LVL224:
1367:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 1467              		.loc 1 1367 0 discriminator 1
 1468 01a2 F3E7     		b	.L139
 1469              	.L160:
 1470              		.align	2
 1471              	.L159:
 1472 01a4 00000000 		.word	.LC0
 1473 01a8 30000000 		.word	.LC1
 1474 01ac 3C000000 		.word	.LC2
 1475              		.cfi_endproc
 1476              	.LFE179:
 1478              		.section	.text.lwip_getaddrname,"ax",%progbits
 1479              		.align	1
 1480              		.syntax unified
 1481              		.thumb
 1482              		.thumb_func
 1483              		.fpu fpv5-sp-d16
 1485              	lwip_getaddrname:
 1486              	.LFB183:
1733:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 1487              		.loc 1 1733 0
 1488              		.cfi_startproc
 1489              		@ args = 0, pretend = 0, frame = 24
 1490              		@ frame_needed = 0, uses_anonymous_args = 0
 1491              	.LVL225:
 1492 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 1493              	.LCFI10:
 1494              		.cfi_def_cfa_offset 20
 1495              		.cfi_offset 4, -20
 1496              		.cfi_offset 5, -16
 1497              		.cfi_offset 6, -12
 1498              		.cfi_offset 7, -8
 1499              		.cfi_offset 14, -4
 1500 0002 87B0     		sub	sp, sp, #28
 1501              	.LCFI11:
 1502              		.cfi_def_cfa_offset 48
 1503 0004 0F46     		mov	r7, r1
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 77


 1504 0006 1546     		mov	r5, r2
 1505 0008 1E46     		mov	r6, r3
1740:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 1506              		.loc 1 1740 0
 1507 000a FFF7FEFF 		bl	get_socket
 1508              	.LVL226:
1741:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 1509              		.loc 1 1741 0
 1510 000e 88B3     		cbz	r0, .L165
 1511 0010 0446     		mov	r4, r0
1746:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (err != ERR_OK) {
 1512              		.loc 1 1746 0
 1513 0012 3346     		mov	r3, r6
 1514 0014 0DF10202 		add	r2, sp, #2
 1515 0018 01A9     		add	r1, sp, #4
 1516 001a 0068     		ldr	r0, [r0]
 1517              	.LVL227:
 1518 001c FFF7FEFF 		bl	netconn_getaddr
 1519              	.LVL228:
1747:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(err));
 1520              		.loc 1 1747 0
 1521 0020 40B1     		cbz	r0, .L163
 1522              	.LBB7:
1748:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 1523              		.loc 1 1748 0
 1524 0022 FFF7FEFF 		bl	err_to_errno
 1525              	.LVL229:
 1526 0026 2074     		strb	r0, [r4, #16]
 1527 0028 38B3     		cbz	r0, .L166
1748:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 1528              		.loc 1 1748 0 is_stmt 0 discriminator 1
 1529 002a 154B     		ldr	r3, .L168
 1530 002c 1860     		str	r0, [r3]
 1531              	.LBE7:
1749:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 1532              		.loc 1 1749 0 is_stmt 1 discriminator 1
 1533 002e 4FF0FF30 		mov	r0, #-1
 1534              	.LVL230:
 1535 0032 1DE0     		b	.L161
 1536              	.LVL231:
 1537              	.L163:
1761:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 1538              		.loc 1 1761 0
 1539 0034 1023     		movs	r3, #16
 1540 0036 8DF80830 		strb	r3, [sp, #8]
 1541 003a 0223     		movs	r3, #2
 1542 003c 8DF80930 		strb	r3, [sp, #9]
 1543 0040 BDF80200 		ldrh	r0, [sp, #2]
 1544              	.LVL232:
 1545 0044 FFF7FEFF 		bl	lwip_htons
 1546              	.LVL233:
 1547 0048 ADF80A00 		strh	r0, [sp, #10]	@ movhi
 1548 004c 019B     		ldr	r3, [sp, #4]
 1549 004e 0393     		str	r3, [sp, #12]
 1550 0050 0023     		movs	r3, #0
 1551 0052 0493     		str	r3, [sp, #16]
 1552 0054 0593     		str	r3, [sp, #20]
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 78


1767:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     *namelen = saddr.sa.sa_len;
 1553              		.loc 1 1767 0
 1554 0056 2A68     		ldr	r2, [r5]
 1555 0058 9DF80830 		ldrb	r3, [sp, #8]	@ zero_extendqisi2
 1556 005c 9A42     		cmp	r2, r3
 1557 005e 00D9     		bls	.L164
1768:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 1558              		.loc 1 1768 0
 1559 0060 2B60     		str	r3, [r5]
 1560              	.L164:
1770:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 1561              		.loc 1 1770 0
 1562 0062 2A68     		ldr	r2, [r5]
 1563 0064 02A9     		add	r1, sp, #8
 1564 0066 3846     		mov	r0, r7
 1565 0068 FFF7FEFF 		bl	memcpy
 1566              	.LVL234:
 1567              	.LBB8:
1772:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return 0;
 1568              		.loc 1 1772 0
 1569 006c 0020     		movs	r0, #0
 1570 006e 2074     		strb	r0, [r4, #16]
 1571              	.LVL235:
 1572              	.L161:
 1573              	.LBE8:
1774:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 1574              		.loc 1 1774 0
 1575 0070 07B0     		add	sp, sp, #28
 1576              	.LCFI12:
 1577              		.cfi_remember_state
 1578              		.cfi_def_cfa_offset 20
 1579              		@ sp needed
 1580 0072 F0BD     		pop	{r4, r5, r6, r7, pc}
 1581              	.LVL236:
 1582              	.L165:
 1583              	.LCFI13:
 1584              		.cfi_restore_state
1742:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 1585              		.loc 1 1742 0
 1586 0074 4FF0FF30 		mov	r0, #-1
 1587              	.LVL237:
 1588 0078 FAE7     		b	.L161
 1589              	.LVL238:
 1590              	.L166:
1749:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 1591              		.loc 1 1749 0
 1592 007a 4FF0FF30 		mov	r0, #-1
 1593              	.LVL239:
 1594 007e F7E7     		b	.L161
 1595              	.L169:
 1596              		.align	2
 1597              	.L168:
 1598 0080 00000000 		.word	errno
 1599              		.cfi_endproc
 1600              	.LFE183:
 1602              		.section	.text.event_callback,"ax",%progbits
 1603              		.align	1
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 79


 1604              		.syntax unified
 1605              		.thumb
 1606              		.thumb_func
 1607              		.fpu fpv5-sp-d16
 1609              	event_callback:
 1610              	.LFB181:
1572:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int s;
 1611              		.loc 1 1572 0
 1612              		.cfi_startproc
 1613              		@ args = 0, pretend = 0, frame = 0
 1614              		@ frame_needed = 0, uses_anonymous_args = 0
 1615              	.LVL240:
1582:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     s = conn->socket;
 1616              		.loc 1 1582 0
 1617 0000 0028     		cmp	r0, #0
 1618 0002 00F0A080 		beq	.L194
1572:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int s;
 1619              		.loc 1 1572 0
 1620 0006 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1621              	.LCFI14:
 1622              		.cfi_def_cfa_offset 24
 1623              		.cfi_offset 4, -24
 1624              		.cfi_offset 5, -20
 1625              		.cfi_offset 6, -16
 1626              		.cfi_offset 7, -12
 1627              		.cfi_offset 8, -8
 1628              		.cfi_offset 14, -4
 1629 000a 0446     		mov	r4, r0
 1630 000c 0E46     		mov	r6, r1
1583:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (s < 0) {
 1631              		.loc 1 1583 0
 1632 000e D0F81880 		ldr	r8, [r0, #24]
 1633              	.LVL241:
1584:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* Data comes in right away after an accept, even though
 1634              		.loc 1 1584 0
 1635 0012 B8F1000F 		cmp	r8, #0
 1636 0016 10DB     		blt	.L197
 1637              	.LVL242:
 1638              	.L172:
1602:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (!sock) {
 1639              		.loc 1 1602 0
 1640 0018 4046     		mov	r0, r8
 1641 001a FFF7FEFF 		bl	get_socket
 1642              	.LVL243:
1603:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return;
 1643              		.loc 1 1603 0
 1644 001e 0746     		mov	r7, r0
 1645 0020 0028     		cmp	r0, #0
 1646 0022 00F08E80 		beq	.L170
1610:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Set event as required */
 1647              		.loc 1 1610 0
 1648 0026 FFF7FEFF 		bl	sys_arch_protect
 1649              	.LVL244:
 1650 002a 0546     		mov	r5, r0
 1651              	.LVL245:
1612:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case NETCONN_EVT_RCVPLUS:
 1652              		.loc 1 1612 0
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 80


 1653 002c 042E     		cmp	r6, #4
 1654 002e 2CD8     		bhi	.L175
 1655 0030 DFE806F0 		tbb	[pc, r6]
 1656              	.L177:
 1657 0034 14       		.byte	(.L176-.L177)/2
 1658 0035 1D       		.byte	(.L178-.L177)/2
 1659 0036 22       		.byte	(.L179-.L177)/2
 1660 0037 25       		.byte	(.L180-.L177)/2
 1661 0038 28       		.byte	(.L181-.L177)/2
 1662              	.LVL246:
 1663 0039 00       		.p2align 1
 1664              	.L197:
1590:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (conn->socket < 0) {
 1665              		.loc 1 1590 0
 1666 003a FFF7FEFF 		bl	sys_arch_protect
 1667              	.LVL247:
1591:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (evt == NETCONN_EVT_RCVPLUS) {
 1668              		.loc 1 1591 0
 1669 003e D4F81880 		ldr	r8, [r4, #24]
 1670              	.LVL248:
 1671 0042 B8F1000F 		cmp	r8, #0
 1672 0046 06DA     		bge	.L173
1592:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           conn->socket--;
 1673              		.loc 1 1592 0
 1674 0048 16B9     		cbnz	r6, .L174
1593:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 1675              		.loc 1 1593 0
 1676 004a 08F1FF33 		add	r3, r8, #-1
 1677 004e A361     		str	r3, [r4, #24]
 1678              	.L174:
1595:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return;
 1679              		.loc 1 1595 0
 1680 0050 FFF7FEFF 		bl	sys_arch_unprotect
 1681              	.LVL249:
1596:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 1682              		.loc 1 1596 0
 1683 0054 75E0     		b	.L170
 1684              	.LVL250:
 1685              	.L173:
1599:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 1686              		.loc 1 1599 0
 1687 0056 FFF7FEFF 		bl	sys_arch_unprotect
 1688              	.LVL251:
 1689 005a DDE7     		b	.L172
 1690              	.LVL252:
 1691              	.L176:
1614:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 1692              		.loc 1 1614 0
 1693 005c B7F90A30 		ldrsh	r3, [r7, #10]
 1694 0060 0133     		adds	r3, r3, #1
 1695 0062 7B81     		strh	r3, [r7, #10]	@ movhi
 1696              	.LVL253:
 1697              	.L182:
1633:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* noone is waiting for this socket, no need to check select_cb_list */
 1698              		.loc 1 1633 0
 1699 0064 7B7C     		ldrb	r3, [r7, #17]	@ zero_extendqisi2
 1700 0066 C3B1     		cbz	r3, .L198
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 81


 1701              	.LVL254:
 1702              	.L183:
1646:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* remember the state of select_cb_list to detect changes */
 1703              		.loc 1 1646 0
 1704 0068 374B     		ldr	r3, .L200
 1705 006a 1C68     		ldr	r4, [r3]
 1706              	.LVL255:
 1707 006c 2BE0     		b	.L184
 1708              	.LVL256:
 1709              	.L178:
1617:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 1710              		.loc 1 1617 0
 1711 006e B7F90A30 		ldrsh	r3, [r7, #10]
 1712 0072 013B     		subs	r3, r3, #1
 1713 0074 7B81     		strh	r3, [r7, #10]	@ movhi
1618:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case NETCONN_EVT_SENDPLUS:
 1714              		.loc 1 1618 0
 1715 0076 F5E7     		b	.L182
 1716              	.L179:
1620:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 1717              		.loc 1 1620 0
 1718 0078 0123     		movs	r3, #1
 1719 007a BB81     		strh	r3, [r7, #12]	@ movhi
1621:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case NETCONN_EVT_SENDMINUS:
 1720              		.loc 1 1621 0
 1721 007c F2E7     		b	.L182
 1722              	.L180:
1623:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 1723              		.loc 1 1623 0
 1724 007e 0023     		movs	r3, #0
 1725 0080 BB81     		strh	r3, [r7, #12]	@ movhi
1624:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case NETCONN_EVT_ERROR:
 1726              		.loc 1 1624 0
 1727 0082 EFE7     		b	.L182
 1728              	.L181:
1626:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 1729              		.loc 1 1626 0
 1730 0084 0123     		movs	r3, #1
 1731 0086 FB81     		strh	r3, [r7, #14]	@ movhi
1627:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
 1732              		.loc 1 1627 0
 1733 0088 ECE7     		b	.L182
 1734              	.L175:
1629:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 1735              		.loc 1 1629 0 discriminator 1
 1736 008a 304B     		ldr	r3, .L200+4
 1737 008c 40F25D62 		movw	r2, #1629
 1738 0090 2F49     		ldr	r1, .L200+8
 1739 0092 3048     		ldr	r0, .L200+12
 1740              	.LVL257:
 1741 0094 FFF7FEFF 		bl	printf
 1742              	.LVL258:
1630:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 1743              		.loc 1 1630 0 discriminator 1
 1744 0098 E4E7     		b	.L182
 1745              	.L198:
1635:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return;
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 82


 1746              		.loc 1 1635 0
 1747 009a 2846     		mov	r0, r5
 1748 009c FFF7FEFF 		bl	sys_arch_unprotect
 1749              	.LVL259:
1636:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 1750              		.loc 1 1636 0
 1751 00a0 4FE0     		b	.L170
 1752              	.LVL260:
 1753              	.L188:
 1754              	.LBB9:
1668:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         scb->sem_signalled = 1;
 1755              		.loc 1 1668 0
 1756 00a2 2BB1     		cbz	r3, .L185
 1757              	.L189:
1669:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* Don't call SYS_ARCH_UNPROTECT() before signaling the semaphore, as this might
 1758              		.loc 1 1669 0
 1759 00a4 0123     		movs	r3, #1
 1760              	.LVL261:
 1761 00a6 6361     		str	r3, [r4, #20]
1672:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 1762              		.loc 1 1672 0
 1763 00a8 04F11800 		add	r0, r4, #24
 1764 00ac FFF7FEFF 		bl	sys_sem_signal
 1765              	.LVL262:
 1766              	.L185:
 1767              	.LBE9:
1676:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* this makes sure interrupt protection time is short */
 1768              		.loc 1 1676 0
 1769 00b0 2846     		mov	r0, r5
 1770 00b2 FFF7FEFF 		bl	sys_arch_unprotect
 1771              	.LVL263:
1678:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (last_select_cb_ctr != select_cb_ctr) {
 1772              		.loc 1 1678 0
 1773 00b6 FFF7FEFF 		bl	sys_arch_protect
 1774              	.LVL264:
 1775 00ba 0546     		mov	r5, r0
 1776              	.LVL265:
1679:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* someone has changed select_cb_list, restart at the beginning */
 1777              		.loc 1 1679 0
 1778 00bc 264B     		ldr	r3, .L200+16
 1779 00be 1B68     		ldr	r3, [r3]
 1780 00c0 B342     		cmp	r3, r6
 1781 00c2 D1D1     		bne	.L183
1646:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* remember the state of select_cb_list to detect changes */
 1782              		.loc 1 1646 0 discriminator 2
 1783 00c4 2468     		ldr	r4, [r4]
 1784              	.LVL266:
 1785              	.L184:
1646:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* remember the state of select_cb_list to detect changes */
 1786              		.loc 1 1646 0 is_stmt 0 discriminator 1
 1787 00c6 002C     		cmp	r4, #0
 1788 00c8 38D0     		beq	.L199
1648:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (scb->sem_signalled == 0) {
 1789              		.loc 1 1648 0 is_stmt 1
 1790 00ca 234B     		ldr	r3, .L200+16
 1791 00cc 1E68     		ldr	r6, [r3]
 1792              	.LVL267:
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 83


1649:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* semaphore not signalled yet */
 1793              		.loc 1 1649 0
 1794 00ce 6369     		ldr	r3, [r4, #20]
 1795 00d0 002B     		cmp	r3, #0
 1796 00d2 EDD1     		bne	.L185
 1797              	.LVL268:
 1798              	.LBB10:
1653:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (scb->readset && FD_ISSET(s, scb->readset)) {
 1799              		.loc 1 1653 0
 1800 00d4 B7F90A20 		ldrsh	r2, [r7, #10]
 1801 00d8 002A     		cmp	r2, #0
 1802 00da 0CDD     		ble	.L186
1654:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           do_signal = 1;
 1803              		.loc 1 1654 0
 1804 00dc A268     		ldr	r2, [r4, #8]
 1805 00de 52B1     		cbz	r2, .L186
1654:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           do_signal = 1;
 1806              		.loc 1 1654 0 is_stmt 0 discriminator 1
 1807 00e0 4FEA5811 		lsr	r1, r8, #5
 1808 00e4 52F82110 		ldr	r1, [r2, r1, lsl #2]
 1809 00e8 08F01F00 		and	r0, r8, #31
 1810 00ec 0122     		movs	r2, #1
 1811 00ee 8240     		lsls	r2, r2, r0
 1812 00f0 1142     		tst	r1, r2
 1813 00f2 00D0     		beq	.L186
1655:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 1814              		.loc 1 1655 0 is_stmt 1
 1815 00f4 0123     		movs	r3, #1
 1816              	.L186:
 1817              	.LVL269:
1658:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (!do_signal && scb->writeset && FD_ISSET(s, scb->writeset)) {
 1818              		.loc 1 1658 0
 1819 00f6 BA89     		ldrh	r2, [r7, #12]
 1820 00f8 6AB1     		cbz	r2, .L187
1659:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           do_signal = 1;
 1821              		.loc 1 1659 0
 1822 00fa 63B9     		cbnz	r3, .L187
1659:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           do_signal = 1;
 1823              		.loc 1 1659 0 is_stmt 0 discriminator 1
 1824 00fc E268     		ldr	r2, [r4, #12]
 1825 00fe 52B1     		cbz	r2, .L187
1659:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           do_signal = 1;
 1826              		.loc 1 1659 0 discriminator 2
 1827 0100 4FEA5811 		lsr	r1, r8, #5
 1828 0104 52F82110 		ldr	r1, [r2, r1, lsl #2]
 1829 0108 08F01F00 		and	r0, r8, #31
 1830 010c 0122     		movs	r2, #1
 1831 010e 8240     		lsls	r2, r2, r0
 1832 0110 1142     		tst	r1, r2
 1833 0112 00D0     		beq	.L187
1660:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 1834              		.loc 1 1660 0 is_stmt 1
 1835 0114 0123     		movs	r3, #1
 1836              	.LVL270:
 1837              	.L187:
1663:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (!do_signal && scb->exceptset && FD_ISSET(s, scb->exceptset)) {
 1838              		.loc 1 1663 0
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 84


 1839 0116 FA89     		ldrh	r2, [r7, #14]
 1840 0118 002A     		cmp	r2, #0
 1841 011a C2D0     		beq	.L188
1664:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           do_signal = 1;
 1842              		.loc 1 1664 0
 1843 011c 002B     		cmp	r3, #0
 1844 011e C0D1     		bne	.L188
1664:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           do_signal = 1;
 1845              		.loc 1 1664 0 is_stmt 0 discriminator 1
 1846 0120 2269     		ldr	r2, [r4, #16]
 1847 0122 002A     		cmp	r2, #0
 1848 0124 BDD0     		beq	.L188
1664:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           do_signal = 1;
 1849              		.loc 1 1664 0 discriminator 2
 1850 0126 4FEA5811 		lsr	r1, r8, #5
 1851 012a 52F82110 		ldr	r1, [r2, r1, lsl #2]
 1852 012e 08F01F00 		and	r0, r8, #31
 1853 0132 0122     		movs	r2, #1
 1854 0134 8240     		lsls	r2, r2, r0
 1855 0136 1142     		tst	r1, r2
 1856 0138 B4D1     		bne	.L189
 1857 013a B2E7     		b	.L188
 1858              	.LVL271:
 1859              	.L199:
 1860              	.LBE10:
1684:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 1861              		.loc 1 1684 0 is_stmt 1
 1862 013c 2846     		mov	r0, r5
 1863 013e FFF7FEFF 		bl	sys_arch_unprotect
 1864              	.LVL272:
 1865              	.L170:
1685:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 1866              		.loc 1 1685 0
 1867 0142 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1868              	.LVL273:
 1869              	.L194:
 1870              	.LCFI15:
 1871              		.cfi_def_cfa_offset 0
 1872              		.cfi_restore 4
 1873              		.cfi_restore 5
 1874              		.cfi_restore 6
 1875              		.cfi_restore 7
 1876              		.cfi_restore 8
 1877              		.cfi_restore 14
 1878 0146 7047     		bx	lr
 1879              	.L201:
 1880              		.align	2
 1881              	.L200:
 1882 0148 00000000 		.word	.LANCHOR1
 1883 014c 00000000 		.word	.LC0
 1884 0150 00000000 		.word	.LC3
 1885 0154 3C000000 		.word	.LC2
 1886 0158 00000000 		.word	.LANCHOR2
 1887              		.cfi_endproc
 1888              	.LFE181:
 1890              		.section	.text.free_socket,"ax",%progbits
 1891              		.align	1
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 85


 1892              		.syntax unified
 1893              		.thumb
 1894              		.thumb_func
 1895              		.fpu fpv5-sp-d16
 1897              	free_socket:
 1898              	.LFB164:
 438:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   void *lastdata;
 1899              		.loc 1 438 0
 1900              		.cfi_startproc
 1901              		@ args = 0, pretend = 0, frame = 0
 1902              		@ frame_needed = 0, uses_anonymous_args = 0
 1903              	.LVL274:
 1904 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1905              	.LCFI16:
 1906              		.cfi_def_cfa_offset 24
 1907              		.cfi_offset 3, -24
 1908              		.cfi_offset 4, -20
 1909              		.cfi_offset 5, -16
 1910              		.cfi_offset 6, -12
 1911              		.cfi_offset 7, -8
 1912              		.cfi_offset 14, -4
 1913 0002 0446     		mov	r4, r0
 1914 0004 0F46     		mov	r7, r1
 441:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock->lastdata   = NULL;
 1915              		.loc 1 441 0
 1916 0006 4668     		ldr	r6, [r0, #4]
 1917              	.LVL275:
 442:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock->lastoffset = 0;
 1918              		.loc 1 442 0
 1919 0008 0025     		movs	r5, #0
 1920 000a 4560     		str	r5, [r0, #4]
 443:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock->err        = 0;
 1921              		.loc 1 443 0
 1922 000c 0581     		strh	r5, [r0, #8]	@ movhi
 444:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 1923              		.loc 1 444 0
 1924 000e 0574     		strb	r5, [r0, #16]
 1925              	.LBB11:
 447:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* don't use 'sock' after this line, as another task might have allocated it */
 1926              		.loc 1 447 0
 1927 0010 FFF7FEFF 		bl	sys_arch_protect
 1928              	.LVL276:
 1929 0014 2560     		str	r5, [r4]
 1930 0016 FFF7FEFF 		bl	sys_arch_unprotect
 1931              	.LVL277:
 1932              	.LBE11:
 450:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (is_tcp) {
 1933              		.loc 1 450 0
 1934 001a 1EB1     		cbz	r6, .L202
 451:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       pbuf_free((struct pbuf *)lastdata);
 1935              		.loc 1 451 0
 1936 001c 1FB9     		cbnz	r7, .L206
 454:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 1937              		.loc 1 454 0
 1938 001e 3046     		mov	r0, r6
 1939 0020 FFF7FEFF 		bl	netbuf_delete
 1940              	.LVL278:
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 86


 1941              	.L202:
 457:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 1942              		.loc 1 457 0
 1943 0024 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1944              	.LVL279:
 1945              	.L206:
 452:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
 1946              		.loc 1 452 0
 1947 0026 3046     		mov	r0, r6
 1948 0028 FFF7FEFF 		bl	pbuf_free
 1949              	.LVL280:
 1950 002c FAE7     		b	.L202
 1951              		.cfi_endproc
 1952              	.LFE164:
 1954              		.section	.text.lwip_socket_thread_init,"ax",%progbits
 1955              		.align	1
 1956              		.global	lwip_socket_thread_init
 1957              		.syntax unified
 1958              		.thumb
 1959              		.thumb_func
 1960              		.fpu fpv5-sp-d16
 1962              	lwip_socket_thread_init:
 1963              	.LFB159:
 332:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    netconn_thread_init();
 1964              		.loc 1 332 0
 1965              		.cfi_startproc
 1966              		@ args = 0, pretend = 0, frame = 0
 1967              		@ frame_needed = 0, uses_anonymous_args = 0
 1968              		@ link register save eliminated.
 334:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 1969              		.loc 1 334 0
 1970 0000 7047     		bx	lr
 1971              		.cfi_endproc
 1972              	.LFE159:
 1974              		.section	.text.lwip_socket_thread_cleanup,"ax",%progbits
 1975              		.align	1
 1976              		.global	lwip_socket_thread_cleanup
 1977              		.syntax unified
 1978              		.thumb
 1979              		.thumb_func
 1980              		.fpu fpv5-sp-d16
 1982              	lwip_socket_thread_cleanup:
 1983              	.LFB160:
 339:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    netconn_thread_cleanup();
 1984              		.loc 1 339 0
 1985              		.cfi_startproc
 1986              		@ args = 0, pretend = 0, frame = 0
 1987              		@ frame_needed = 0, uses_anonymous_args = 0
 1988              		@ link register save eliminated.
 341:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 1989              		.loc 1 341 0
 1990 0000 7047     		bx	lr
 1991              		.cfi_endproc
 1992              	.LFE160:
 1994              		.section	.text.lwip_accept,"ax",%progbits
 1995              		.align	1
 1996              		.global	lwip_accept
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 87


 1997              		.syntax unified
 1998              		.thumb
 1999              		.thumb_func
 2000              		.fpu fpv5-sp-d16
 2002              	lwip_accept:
 2003              	.LFB165:
 467:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock, *nsock;
 2004              		.loc 1 467 0
 2005              		.cfi_startproc
 2006              		@ args = 0, pretend = 0, frame = 32
 2007              		@ frame_needed = 0, uses_anonymous_args = 0
 2008              	.LVL281:
 2009 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 2010              	.LCFI17:
 2011              		.cfi_def_cfa_offset 28
 2012              		.cfi_offset 4, -28
 2013              		.cfi_offset 5, -24
 2014              		.cfi_offset 6, -20
 2015              		.cfi_offset 7, -16
 2016              		.cfi_offset 8, -12
 2017              		.cfi_offset 9, -8
 2018              		.cfi_offset 14, -4
 2019 0004 89B0     		sub	sp, sp, #36
 2020              	.LCFI18:
 2021              		.cfi_def_cfa_offset 64
 2022 0006 0F46     		mov	r7, r1
 2023 0008 1646     		mov	r6, r2
 471:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int newsock;
 2024              		.loc 1 471 0
 2025 000a 0023     		movs	r3, #0
 2026 000c ADF81630 		strh	r3, [sp, #22]	@ movhi
 477:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 2027              		.loc 1 477 0
 2028 0010 FFF7FEFF 		bl	get_socket
 2029              	.LVL282:
 478:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2030              		.loc 1 478 0
 2031 0014 0028     		cmp	r0, #0
 2032 0016 00F0C280 		beq	.L224
 2033 001a 0546     		mov	r5, r0
 482:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_accept(%d): returning EWOULDBLOCK\n", s));
 2034              		.loc 1 482 0
 2035 001c 0068     		ldr	r0, [r0]
 2036              	.LVL283:
 2037 001e 037F     		ldrb	r3, [r0, #28]	@ zero_extendqisi2
 2038 0020 13F0020F 		tst	r3, #2
 2039 0024 03D0     		beq	.L211
 482:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_accept(%d): returning EWOULDBLOCK\n", s));
 2040              		.loc 1 482 0 is_stmt 0 discriminator 1
 2041 0026 B5F90A30 		ldrsh	r3, [r5, #10]
 2042 002a 002B     		cmp	r3, #0
 2043 002c 17DD     		ble	.L227
 2044              	.L211:
 489:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (err != ERR_OK) {
 2045              		.loc 1 489 0 is_stmt 1
 2046 002e 07A9     		add	r1, sp, #28
 2047 0030 FFF7FEFF 		bl	netconn_accept
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 88


 2048              	.LVL284:
 490:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_accept(%d): netconn_acept failed, err=%d\n", s, err));
 2049              		.loc 1 490 0
 2050 0034 38B3     		cbz	r0, .L212
 492:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, EOPNOTSUPP);
 2051              		.loc 1 492 0
 2052 0036 2B68     		ldr	r3, [r5]
 2053 0038 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2054 003a 03F0F003 		and	r3, r3, #240
 2055 003e 102B     		cmp	r3, #16
 2056 0040 13D1     		bne	.L228
 494:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, EINVAL);
 2057              		.loc 1 494 0
 2058 0042 10F10F0F 		cmn	r0, #15
 2059 0046 17D0     		beq	.L229
 2060              	.LBB12:
 497:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 2061              		.loc 1 497 0
 2062 0048 FFF7FEFF 		bl	err_to_errno
 2063              	.LVL285:
 2064 004c 2874     		strb	r0, [r5, #16]
 2065 004e 0028     		cmp	r0, #0
 2066 0050 00F0A880 		beq	.L225
 497:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 2067              		.loc 1 497 0 is_stmt 0 discriminator 1
 2068 0054 554B     		ldr	r3, .L235
 2069 0056 1860     		str	r0, [r3]
 2070              	.LBE12:
 499:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2071              		.loc 1 499 0 is_stmt 1 discriminator 1
 2072 0058 4FF0FF34 		mov	r4, #-1
 2073 005c 6AE0     		b	.L209
 2074              	.LVL286:
 2075              	.L227:
 484:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2076              		.loc 1 484 0 discriminator 1
 2077 005e 534B     		ldr	r3, .L235
 2078 0060 0B22     		movs	r2, #11
 2079 0062 1A60     		str	r2, [r3]
 485:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2080              		.loc 1 485 0 discriminator 1
 2081 0064 4FF0FF34 		mov	r4, #-1
 2082 0068 64E0     		b	.L209
 2083              	.LVL287:
 2084              	.L228:
 2085              	.LBB13:
 493:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else if (err == ERR_CLSD) {
 2086              		.loc 1 493 0
 2087 006a 5F23     		movs	r3, #95
 2088 006c 2B74     		strb	r3, [r5, #16]
 2089 006e 4F4A     		ldr	r2, .L235
 2090 0070 1360     		str	r3, [r2]
 2091              	.LBE13:
 499:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2092              		.loc 1 499 0
 2093 0072 4FF0FF34 		mov	r4, #-1
 2094 0076 5DE0     		b	.L209
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 89


 2095              	.LVL288:
 2096              	.L229:
 2097              	.LBB14:
 495:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
 2098              		.loc 1 495 0
 2099 0078 1623     		movs	r3, #22
 2100 007a 2B74     		strb	r3, [r5, #16]
 2101 007c 4B4A     		ldr	r2, .L235
 2102 007e 1360     		str	r3, [r2]
 2103              	.LBE14:
 499:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2104              		.loc 1 499 0
 2105 0080 4FF0FF34 		mov	r4, #-1
 2106 0084 56E0     		b	.L209
 2107              	.LVL289:
 2108              	.L212:
 501:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2109              		.loc 1 501 0
 2110 0086 079B     		ldr	r3, [sp, #28]
 2111 0088 002B     		cmp	r3, #0
 2112 008a 57D0     		beq	.L230
 2113              	.LVL290:
 2114              	.L215:
 503:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (newsock == -1) {
 2115              		.loc 1 503 0
 2116 008c 0121     		movs	r1, #1
 2117 008e 0798     		ldr	r0, [sp, #28]
 2118 0090 FFF7FEFF 		bl	alloc_socket
 2119              	.LVL291:
 2120 0094 0446     		mov	r4, r0
 2121              	.LVL292:
 504:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     netconn_delete(newconn);
 2122              		.loc 1 504 0
 2123 0096 B0F1FF3F 		cmp	r0, #-1
 2124 009a 57D0     		beq	.L231
 509:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ASSERT("newconn->callback == event_callback", newconn->callback == event_callback);
 2125              		.loc 1 509 0
 2126 009c 0328     		cmp	r0, #3
 2127 009e 5DD8     		bhi	.L232
 2128              	.LVL293:
 2129              	.L217:
 510:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   nsock = &sockets[newsock - LWIP_SOCKET_OFFSET];
 2130              		.loc 1 510 0
 2131 00a0 079B     		ldr	r3, [sp, #28]
 2132 00a2 9A6A     		ldr	r2, [r3, #40]
 2133 00a4 424B     		ldr	r3, .L235+4
 2134 00a6 9A42     		cmp	r2, r3
 2135 00a8 06D0     		beq	.L218
 510:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   nsock = &sockets[newsock - LWIP_SOCKET_OFFSET];
 2136              		.loc 1 510 0 is_stmt 0 discriminator 1
 2137 00aa 424B     		ldr	r3, .L235+8
 2138 00ac 4FF4FF72 		mov	r2, #510
 2139 00b0 4149     		ldr	r1, .L235+12
 2140 00b2 4248     		ldr	r0, .L235+16
 2141 00b4 FFF7FEFF 		bl	printf
 2142              	.LVL294:
 2143              	.L218:
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 90


 511:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2144              		.loc 1 511 0 is_stmt 1
 2145 00b8 A300     		lsls	r3, r4, #2
 2146 00ba 2344     		add	r3, r3, r4
 2147 00bc 9A00     		lsls	r2, r3, #2
 2148 00be 404B     		ldr	r3, .L235+20
 2149 00c0 03EB0208 		add	r8, r3, r2
 2150              	.LVL295:
 518:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   nsock->rcvevent += (s16_t)(-1 - newconn->socket);
 2151              		.loc 1 518 0
 2152 00c4 FFF7FEFF 		bl	sys_arch_protect
 2153              	.LVL296:
 519:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   newconn->socket = newsock;
 2154              		.loc 1 519 0
 2155 00c8 079A     		ldr	r2, [sp, #28]
 2156 00ca 118B     		ldrh	r1, [r2, #24]
 2157 00cc B8F80A30 		ldrh	r3, [r8, #10]
 2158 00d0 5B1A     		subs	r3, r3, r1
 2159 00d2 013B     		subs	r3, r3, #1
 2160 00d4 A8F80A30 		strh	r3, [r8, #10]	@ movhi
 520:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_UNPROTECT(lev);
 2161              		.loc 1 520 0
 2162 00d8 9461     		str	r4, [r2, #24]
 521:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2163              		.loc 1 521 0
 2164 00da FFF7FEFF 		bl	sys_arch_unprotect
 2165              	.LVL297:
 526:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     union sockaddr_aligned tempaddr;
 2166              		.loc 1 526 0
 2167 00de 3FB3     		cbz	r7, .L219
 2168              	.LBB15:
 529:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (err != ERR_OK) {
 2169              		.loc 1 529 0
 2170 00e0 0023     		movs	r3, #0
 2171 00e2 0DF11602 		add	r2, sp, #22
 2172 00e6 06A9     		add	r1, sp, #24
 2173 00e8 0798     		ldr	r0, [sp, #28]
 2174 00ea FFF7FEFF 		bl	netconn_getaddr
 2175              	.LVL298:
 530:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_accept(%d): netconn_peer failed, err=%d\n", s, err));
 2176              		.loc 1 530 0
 2177 00ee 8146     		mov	r9, r0
 2178 00f0 0028     		cmp	r0, #0
 2179 00f2 3BD1     		bne	.L233
 537:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2180              		.loc 1 537 0
 2181 00f4 002E     		cmp	r6, #0
 2182 00f6 4AD0     		beq	.L234
 2183              	.LVL299:
 2184              	.L222:
 539:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (*addrlen > tempaddr.sa.sa_len) {
 2185              		.loc 1 539 0
 2186 00f8 1023     		movs	r3, #16
 2187 00fa 8DF80430 		strb	r3, [sp, #4]
 2188 00fe 0223     		movs	r3, #2
 2189 0100 8DF80530 		strb	r3, [sp, #5]
 2190 0104 BDF81600 		ldrh	r0, [sp, #22]
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 91


 2191 0108 FFF7FEFF 		bl	lwip_htons
 2192              	.LVL300:
 2193 010c ADF80600 		strh	r0, [sp, #6]	@ movhi
 2194 0110 069B     		ldr	r3, [sp, #24]
 2195 0112 0293     		str	r3, [sp, #8]
 2196 0114 0023     		movs	r3, #0
 2197 0116 0393     		str	r3, [sp, #12]
 2198 0118 0493     		str	r3, [sp, #16]
 540:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *addrlen = tempaddr.sa.sa_len;
 2199              		.loc 1 540 0
 2200 011a 3268     		ldr	r2, [r6]
 2201 011c 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
 2202 0120 9A42     		cmp	r2, r3
 2203 0122 00D9     		bls	.L223
 541:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 2204              		.loc 1 541 0
 2205 0124 3360     		str	r3, [r6]
 2206              	.L223:
 543:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2207              		.loc 1 543 0
 2208 0126 3268     		ldr	r2, [r6]
 2209 0128 01A9     		add	r1, sp, #4
 2210 012a 3846     		mov	r0, r7
 2211 012c FFF7FEFF 		bl	memcpy
 2212              	.LVL301:
 2213              	.L219:
 2214              	.LBE15:
 2215              	.LBB17:
 552:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return newsock;
 2216              		.loc 1 552 0
 2217 0130 0023     		movs	r3, #0
 2218 0132 2B74     		strb	r3, [r5, #16]
 2219              	.LVL302:
 2220              	.L209:
 2221              	.LBE17:
 554:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2222              		.loc 1 554 0
 2223 0134 2046     		mov	r0, r4
 2224 0136 09B0     		add	sp, sp, #36
 2225              	.LCFI19:
 2226              		.cfi_remember_state
 2227              		.cfi_def_cfa_offset 28
 2228              		@ sp needed
 2229 0138 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 2230              	.LVL303:
 2231              	.L230:
 2232              	.LCFI20:
 2233              		.cfi_restore_state
 501:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2234              		.loc 1 501 0 discriminator 1
 2235 013c 1D4B     		ldr	r3, .L235+8
 2236 013e 40F2F512 		movw	r2, #501
 2237 0142 2049     		ldr	r1, .L235+24
 2238 0144 1D48     		ldr	r0, .L235+16
 2239              	.LVL304:
 2240 0146 FFF7FEFF 		bl	printf
 2241              	.LVL305:
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 92


 2242 014a 9FE7     		b	.L215
 2243              	.LVL306:
 2244              	.L231:
 505:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, ENFILE);
 2245              		.loc 1 505 0
 2246 014c 0798     		ldr	r0, [sp, #28]
 2247              	.LVL307:
 2248 014e FFF7FEFF 		bl	netconn_delete
 2249              	.LVL308:
 2250              	.LBB18:
 506:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2251              		.loc 1 506 0
 2252 0152 1723     		movs	r3, #23
 2253 0154 2B74     		strb	r3, [r5, #16]
 2254 0156 154A     		ldr	r2, .L235
 2255 0158 1360     		str	r3, [r2]
 2256              	.LBE18:
 507:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2257              		.loc 1 507 0
 2258 015a EBE7     		b	.L209
 2259              	.LVL309:
 2260              	.L232:
 509:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ASSERT("newconn->callback == event_callback", newconn->callback == event_callback);
 2261              		.loc 1 509 0 discriminator 1
 2262 015c 154B     		ldr	r3, .L235+8
 2263 015e 40F2FD12 		movw	r2, #509
 2264 0162 1949     		ldr	r1, .L235+28
 2265 0164 1548     		ldr	r0, .L235+16
 2266              	.LVL310:
 2267 0166 FFF7FEFF 		bl	printf
 2268              	.LVL311:
 2269 016a 99E7     		b	.L217
 2270              	.LVL312:
 2271              	.L233:
 2272              	.LBB19:
 532:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       free_socket(nsock, 1);
 2273              		.loc 1 532 0
 2274 016c 0798     		ldr	r0, [sp, #28]
 2275              	.LVL313:
 2276 016e FFF7FEFF 		bl	netconn_delete
 2277              	.LVL314:
 533:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, err_to_errno(err));
 2278              		.loc 1 533 0
 2279 0172 0121     		movs	r1, #1
 2280 0174 4046     		mov	r0, r8
 2281 0176 FFF7FEFF 		bl	free_socket
 2282              	.LVL315:
 2283              	.LBB16:
 534:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
 2284              		.loc 1 534 0
 2285 017a 4846     		mov	r0, r9
 2286 017c FFF7FEFF 		bl	err_to_errno
 2287              	.LVL316:
 2288 0180 2874     		strb	r0, [r5, #16]
 2289 0182 08B1     		cbz	r0, .L221
 534:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
 2290              		.loc 1 534 0 is_stmt 0 discriminator 1
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 93


 2291 0184 094B     		ldr	r3, .L235
 2292 0186 1860     		str	r0, [r3]
 2293              	.L221:
 2294              	.LBE16:
 535:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 2295              		.loc 1 535 0 is_stmt 1
 2296 0188 4FF0FF34 		mov	r4, #-1
 2297              	.LVL317:
 2298 018c D2E7     		b	.L209
 2299              	.LVL318:
 2300              	.L234:
 537:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2301              		.loc 1 537 0 discriminator 1
 2302 018e 094B     		ldr	r3, .L235+8
 2303 0190 40F21922 		movw	r2, #537
 2304 0194 0D49     		ldr	r1, .L235+32
 2305 0196 0948     		ldr	r0, .L235+16
 2306              	.LVL319:
 2307 0198 FFF7FEFF 		bl	printf
 2308              	.LVL320:
 2309 019c ACE7     		b	.L222
 2310              	.LVL321:
 2311              	.L224:
 2312              	.LBE19:
 479:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2313              		.loc 1 479 0
 2314 019e 4FF0FF34 		mov	r4, #-1
 2315 01a2 C7E7     		b	.L209
 2316              	.LVL322:
 2317              	.L225:
 499:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2318              		.loc 1 499 0
 2319 01a4 4FF0FF34 		mov	r4, #-1
 2320 01a8 C4E7     		b	.L209
 2321              	.L236:
 2322 01aa 00BF     		.align	2
 2323              	.L235:
 2324 01ac 00000000 		.word	errno
 2325 01b0 00000000 		.word	event_callback
 2326 01b4 00000000 		.word	.LC0
 2327 01b8 28000000 		.word	.LC6
 2328 01bc 3C000000 		.word	.LC2
 2329 01c0 00000000 		.word	.LANCHOR0
 2330 01c4 00000000 		.word	.LC4
 2331 01c8 10000000 		.word	.LC5
 2332 01cc 4C000000 		.word	.LC7
 2333              		.cfi_endproc
 2334              	.LFE165:
 2336              		.section	.text.lwip_bind,"ax",%progbits
 2337              		.align	1
 2338              		.global	lwip_bind
 2339              		.syntax unified
 2340              		.thumb
 2341              		.thumb_func
 2342              		.fpu fpv5-sp-d16
 2344              	lwip_bind:
 2345              	.LFB166:
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 94


 558:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 2346              		.loc 1 558 0
 2347              		.cfi_startproc
 2348              		@ args = 0, pretend = 0, frame = 8
 2349              		@ frame_needed = 0, uses_anonymous_args = 0
 2350              	.LVL323:
 2351 0000 70B5     		push	{r4, r5, r6, lr}
 2352              	.LCFI21:
 2353              		.cfi_def_cfa_offset 16
 2354              		.cfi_offset 4, -16
 2355              		.cfi_offset 5, -12
 2356              		.cfi_offset 6, -8
 2357              		.cfi_offset 14, -4
 2358 0002 82B0     		sub	sp, sp, #8
 2359              	.LCFI22:
 2360              		.cfi_def_cfa_offset 24
 2361 0004 0E46     		mov	r6, r1
 2362 0006 1546     		mov	r5, r2
 564:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 2363              		.loc 1 564 0
 2364 0008 FFF7FEFF 		bl	get_socket
 2365              	.LVL324:
 565:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2366              		.loc 1 565 0
 2367 000c 0028     		cmp	r0, #0
 2368 000e 34D0     		beq	.L242
 2369 0010 0446     		mov	r4, r0
 576:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              IS_SOCK_ADDR_TYPE_VALID(name) && IS_SOCK_ADDR_ALIGNED(name)),
 2370              		.loc 1 576 0
 2371 0012 102D     		cmp	r5, #16
 2372 0014 02D1     		bne	.L239
 576:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              IS_SOCK_ADDR_TYPE_VALID(name) && IS_SOCK_ADDR_ALIGNED(name)),
 2373              		.loc 1 576 0 is_stmt 0 discriminator 2
 2374 0016 7378     		ldrb	r3, [r6, #1]	@ zero_extendqisi2
 2375 0018 022B     		cmp	r3, #2
 2376 001a 12D0     		beq	.L246
 2377              	.L239:
 576:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              IS_SOCK_ADDR_TYPE_VALID(name) && IS_SOCK_ADDR_ALIGNED(name)),
 2378              		.loc 1 576 0 discriminator 5
 2379 001c 1B4B     		ldr	r3, .L248
 2380 001e 40F24222 		movw	r2, #578
 2381 0022 1B49     		ldr	r1, .L248+4
 2382 0024 1B48     		ldr	r0, .L248+8
 2383              	.LVL325:
 2384 0026 FFF7FEFF 		bl	printf
 2385              	.LVL326:
 2386              	.LBB20:
 2387 002a 6FF00F00 		mvn	r0, #15
 2388 002e FFF7FEFF 		bl	err_to_errno
 2389              	.LVL327:
 2390 0032 2074     		strb	r0, [r4, #16]
 2391 0034 20B3     		cbz	r0, .L243
 576:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              IS_SOCK_ADDR_TYPE_VALID(name) && IS_SOCK_ADDR_ALIGNED(name)),
 2392              		.loc 1 576 0 discriminator 6
 2393 0036 184B     		ldr	r3, .L248+12
 2394 0038 1860     		str	r0, [r3]
 2395              	.LBE20:
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 95


 2396 003a 4FF0FF30 		mov	r0, #-1
 2397              	.LVL328:
 2398              	.L237:
 605:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2399              		.loc 1 605 0 is_stmt 1
 2400 003e 02B0     		add	sp, sp, #8
 2401              	.LCFI23:
 2402              		.cfi_remember_state
 2403              		.cfi_def_cfa_offset 16
 2404              		@ sp needed
 2405 0040 70BD     		pop	{r4, r5, r6, pc}
 2406              	.LVL329:
 2407              	.L246:
 2408              	.LCFI24:
 2409              		.cfi_restore_state
 576:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              IS_SOCK_ADDR_TYPE_VALID(name) && IS_SOCK_ADDR_ALIGNED(name)),
 2410              		.loc 1 576 0 discriminator 4
 2411 0042 16F0030F 		tst	r6, #3
 2412 0046 E9D1     		bne	.L239
 581:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_bind(%d, addr=", s));
 2413              		.loc 1 581 0
 2414 0048 7368     		ldr	r3, [r6, #4]
 2415 004a 02AD     		add	r5, sp, #8
 2416              	.LVL330:
 2417 004c 45F8043D 		str	r3, [r5, #-4]!
 2418 0050 7088     		ldrh	r0, [r6, #2]
 2419              	.LVL331:
 2420 0052 FFF7FEFF 		bl	lwip_htons
 2421              	.LVL332:
 594:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2422              		.loc 1 594 0
 2423 0056 0246     		mov	r2, r0
 2424 0058 2946     		mov	r1, r5
 2425 005a 2068     		ldr	r0, [r4]
 2426              	.LVL333:
 2427 005c FFF7FEFF 		bl	netconn_bind
 2428              	.LVL334:
 596:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_bind(%d) failed, err=%d\n", s, err));
 2429              		.loc 1 596 0
 2430 0060 10B9     		cbnz	r0, .L247
 2431              	.LVL335:
 2432              	.LBB21:
 603:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return 0;
 2433              		.loc 1 603 0
 2434 0062 0020     		movs	r0, #0
 2435              	.LVL336:
 2436 0064 2074     		strb	r0, [r4, #16]
 2437              	.LBE21:
 604:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 2438              		.loc 1 604 0
 2439 0066 EAE7     		b	.L237
 2440              	.LVL337:
 2441              	.L247:
 2442              	.LBB22:
 598:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2443              		.loc 1 598 0
 2444 0068 FFF7FEFF 		bl	err_to_errno
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 96


 2445              	.LVL338:
 2446 006c 2074     		strb	r0, [r4, #16]
 2447 006e 50B1     		cbz	r0, .L244
 598:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2448              		.loc 1 598 0 is_stmt 0 discriminator 1
 2449 0070 094B     		ldr	r3, .L248+12
 2450 0072 1860     		str	r0, [r3]
 2451              	.LBE22:
 599:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2452              		.loc 1 599 0 is_stmt 1 discriminator 1
 2453 0074 4FF0FF30 		mov	r0, #-1
 2454              	.LVL339:
 2455 0078 E1E7     		b	.L237
 2456              	.LVL340:
 2457              	.L242:
 566:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2458              		.loc 1 566 0
 2459 007a 4FF0FF30 		mov	r0, #-1
 2460              	.LVL341:
 2461 007e DEE7     		b	.L237
 2462              	.LVL342:
 2463              	.L243:
 576:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              IS_SOCK_ADDR_TYPE_VALID(name) && IS_SOCK_ADDR_ALIGNED(name)),
 2464              		.loc 1 576 0
 2465 0080 4FF0FF30 		mov	r0, #-1
 2466              	.LVL343:
 2467 0084 DBE7     		b	.L237
 2468              	.LVL344:
 2469              	.L244:
 599:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2470              		.loc 1 599 0
 2471 0086 4FF0FF30 		mov	r0, #-1
 2472              	.LVL345:
 2473 008a D8E7     		b	.L237
 2474              	.L249:
 2475              		.align	2
 2476              	.L248:
 2477 008c 00000000 		.word	.LC0
 2478 0090 00000000 		.word	.LC8
 2479 0094 3C000000 		.word	.LC2
 2480 0098 00000000 		.word	errno
 2481              		.cfi_endproc
 2482              	.LFE166:
 2484              		.section	.text.lwip_close,"ax",%progbits
 2485              		.align	1
 2486              		.global	lwip_close
 2487              		.syntax unified
 2488              		.thumb
 2489              		.thumb_func
 2490              		.fpu fpv5-sp-d16
 2492              	lwip_close:
 2493              	.LFB167:
 609:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 2494              		.loc 1 609 0
 2495              		.cfi_startproc
 2496              		@ args = 0, pretend = 0, frame = 0
 2497              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 97


 2498              	.LVL346:
 2499 0000 38B5     		push	{r3, r4, r5, lr}
 2500              	.LCFI25:
 2501              		.cfi_def_cfa_offset 16
 2502              		.cfi_offset 3, -16
 2503              		.cfi_offset 4, -12
 2504              		.cfi_offset 5, -8
 2505              		.cfi_offset 14, -4
 2506              	.LVL347:
 616:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 2507              		.loc 1 616 0
 2508 0002 FFF7FEFF 		bl	get_socket
 2509              	.LVL348:
 617:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2510              		.loc 1 617 0
 2511 0006 48B3     		cbz	r0, .L255
 2512 0008 0446     		mov	r4, r0
 621:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     is_tcp = NETCONNTYPE_GROUP(netconn_type(sock->conn)) == NETCONN_TCP;
 2513              		.loc 1 621 0
 2514 000a 0368     		ldr	r3, [r0]
 2515 000c 9BB1     		cbz	r3, .L252
 622:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
 2516              		.loc 1 622 0
 2517 000e 1D78     		ldrb	r5, [r3]	@ zero_extendqisi2
 2518 0010 05F0F005 		and	r5, r5, #240
 2519 0014 102D     		cmp	r5, #16
 2520 0016 14BF     		ite	ne
 2521 0018 0025     		movne	r5, #0
 2522 001a 0125     		moveq	r5, #1
 2523              	.LVL349:
 2524              	.L253:
 632:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (err != ERR_OK) {
 2525              		.loc 1 632 0
 2526 001c 2068     		ldr	r0, [r4]
 2527 001e FFF7FEFF 		bl	netconn_delete
 2528              	.LVL350:
 633:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(err));
 2529              		.loc 1 633 0
 2530 0022 A8B1     		cbz	r0, .L254
 2531              	.LBB23:
 634:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2532              		.loc 1 634 0
 2533 0024 FFF7FEFF 		bl	err_to_errno
 2534              	.LVL351:
 2535 0028 2074     		strb	r0, [r4, #16]
 2536 002a D0B1     		cbz	r0, .L257
 634:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2537              		.loc 1 634 0 is_stmt 0 discriminator 1
 2538 002c 0E4B     		ldr	r3, .L259
 2539 002e 1860     		str	r0, [r3]
 2540              	.LBE23:
 635:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2541              		.loc 1 635 0 is_stmt 1 discriminator 1
 2542 0030 4FF0FF30 		mov	r0, #-1
 2543              	.LVL352:
 2544 0034 11E0     		b	.L250
 2545              	.LVL353:
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 98


 2546              	.L252:
 624:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2547              		.loc 1 624 0
 2548 0036 4368     		ldr	r3, [r0, #4]
 2549 0038 43B1     		cbz	r3, .L256
 624:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2550              		.loc 1 624 0 is_stmt 0 discriminator 1
 2551 003a 0C4B     		ldr	r3, .L259+4
 2552 003c 4FF41C72 		mov	r2, #624
 2553 0040 0B49     		ldr	r1, .L259+8
 2554 0042 0C48     		ldr	r0, .L259+12
 2555              	.LVL354:
 2556 0044 FFF7FEFF 		bl	printf
 2557              	.LVL355:
 611:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err;
 2558              		.loc 1 611 0 is_stmt 1 discriminator 1
 2559 0048 0025     		movs	r5, #0
 2560 004a E7E7     		b	.L253
 2561              	.LVL356:
 2562              	.L256:
 611:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err;
 2563              		.loc 1 611 0 is_stmt 0
 2564 004c 0025     		movs	r5, #0
 2565 004e E5E7     		b	.L253
 2566              	.LVL357:
 2567              	.L254:
 638:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   set_errno(0);
 2568              		.loc 1 638 0 is_stmt 1
 2569 0050 2946     		mov	r1, r5
 2570 0052 2046     		mov	r0, r4
 2571              	.LVL358:
 2572 0054 FFF7FEFF 		bl	free_socket
 2573              	.LVL359:
 640:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 2574              		.loc 1 640 0
 2575 0058 0020     		movs	r0, #0
 2576              	.LVL360:
 2577              	.L250:
 641:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2578              		.loc 1 641 0
 2579 005a 38BD     		pop	{r3, r4, r5, pc}
 2580              	.LVL361:
 2581              	.L255:
 618:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2582              		.loc 1 618 0
 2583 005c 4FF0FF30 		mov	r0, #-1
 2584              	.LVL362:
 2585 0060 FBE7     		b	.L250
 2586              	.LVL363:
 2587              	.L257:
 635:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2588              		.loc 1 635 0
 2589 0062 4FF0FF30 		mov	r0, #-1
 2590              	.LVL364:
 2591 0066 F8E7     		b	.L250
 2592              	.L260:
 2593              		.align	2
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 99


 2594              	.L259:
 2595 0068 00000000 		.word	errno
 2596 006c 00000000 		.word	.LC0
 2597 0070 00000000 		.word	.LC9
 2598 0074 3C000000 		.word	.LC2
 2599              		.cfi_endproc
 2600              	.LFE167:
 2602              		.section	.text.lwip_connect,"ax",%progbits
 2603              		.align	1
 2604              		.global	lwip_connect
 2605              		.syntax unified
 2606              		.thumb
 2607              		.thumb_func
 2608              		.fpu fpv5-sp-d16
 2610              	lwip_connect:
 2611              	.LFB168:
 645:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 2612              		.loc 1 645 0
 2613              		.cfi_startproc
 2614              		@ args = 0, pretend = 0, frame = 8
 2615              		@ frame_needed = 0, uses_anonymous_args = 0
 2616              	.LVL365:
 2617 0000 70B5     		push	{r4, r5, r6, lr}
 2618              	.LCFI26:
 2619              		.cfi_def_cfa_offset 16
 2620              		.cfi_offset 4, -16
 2621              		.cfi_offset 5, -12
 2622              		.cfi_offset 6, -8
 2623              		.cfi_offset 14, -4
 2624 0002 82B0     		sub	sp, sp, #8
 2625              	.LCFI27:
 2626              		.cfi_def_cfa_offset 24
 2627 0004 0C46     		mov	r4, r1
 2628 0006 1646     		mov	r6, r2
 649:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 2629              		.loc 1 649 0
 2630 0008 FFF7FEFF 		bl	get_socket
 2631              	.LVL366:
 650:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2632              		.loc 1 650 0
 2633 000c 0028     		cmp	r0, #0
 2634 000e 39D0     		beq	.L269
 2635 0010 0546     		mov	r5, r0
 661:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_connect(%d, AF_UNSPEC)\n", s));
 2636              		.loc 1 661 0
 2637 0012 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 2638 0014 BBB1     		cbz	r3, .L272
 2639              	.LBB24:
 669:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                IS_SOCK_ADDR_TYPE_VALID_OR_UNSPEC(name) && IS_SOCK_ADDR_ALIGNED(name),
 2640              		.loc 1 669 0
 2641 0016 102E     		cmp	r6, #16
 2642 0018 19D1     		bne	.L265
 669:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                IS_SOCK_ADDR_TYPE_VALID_OR_UNSPEC(name) && IS_SOCK_ADDR_ALIGNED(name),
 2643              		.loc 1 669 0 is_stmt 0 discriminator 2
 2644 001a 022B     		cmp	r3, #2
 2645 001c 17D1     		bne	.L265
 669:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                IS_SOCK_ADDR_TYPE_VALID_OR_UNSPEC(name) && IS_SOCK_ADDR_ALIGNED(name),
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 100


 2646              		.loc 1 669 0 discriminator 4
 2647 001e 14F0030F 		tst	r4, #3
 2648 0022 14D1     		bne	.L265
 673:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_connect(%d, addr=", s));
 2649              		.loc 1 673 0 is_stmt 1
 2650 0024 6368     		ldr	r3, [r4, #4]
 2651 0026 02AE     		add	r6, sp, #8
 2652              	.LVL367:
 2653 0028 46F8043D 		str	r3, [r6, #-4]!
 2654 002c 6088     		ldrh	r0, [r4, #2]
 2655              	.LVL368:
 2656 002e FFF7FEFF 		bl	lwip_htons
 2657              	.LVL369:
 686:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2658              		.loc 1 686 0
 2659 0032 0246     		mov	r2, r0
 2660 0034 3146     		mov	r1, r6
 2661 0036 2868     		ldr	r0, [r5]
 2662              	.LVL370:
 2663 0038 FFF7FEFF 		bl	netconn_connect
 2664              	.LVL371:
 2665              	.L264:
 2666              	.LBE24:
 689:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_connect(%d) failed, err=%d\n", s, err));
 2667              		.loc 1 689 0
 2668 003c C8B9     		cbnz	r0, .L273
 2669              	.LVL372:
 2670              	.LBB26:
 696:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return 0;
 2671              		.loc 1 696 0
 2672 003e 0020     		movs	r0, #0
 2673              	.LVL373:
 2674 0040 2874     		strb	r0, [r5, #16]
 2675              	.LVL374:
 2676              	.L261:
 2677              	.LBE26:
 698:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2678              		.loc 1 698 0
 2679 0042 02B0     		add	sp, sp, #8
 2680              	.LCFI28:
 2681              		.cfi_remember_state
 2682              		.cfi_def_cfa_offset 16
 2683              		@ sp needed
 2684 0044 70BD     		pop	{r4, r5, r6, pc}
 2685              	.LVL375:
 2686              	.L272:
 2687              	.LCFI29:
 2688              		.cfi_restore_state
 663:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
 2689              		.loc 1 663 0
 2690 0046 0068     		ldr	r0, [r0]
 2691              	.LVL376:
 2692 0048 FFF7FEFF 		bl	netconn_disconnect
 2693              	.LVL377:
 2694 004c F6E7     		b	.L264
 2695              	.LVL378:
 2696              	.L265:
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 101


 2697              	.LBB27:
 669:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                IS_SOCK_ADDR_TYPE_VALID_OR_UNSPEC(name) && IS_SOCK_ADDR_ALIGNED(name),
 2698              		.loc 1 669 0 discriminator 5
 2699 004e 104B     		ldr	r3, .L274
 2700 0050 40F29F22 		movw	r2, #671
 2701 0054 0F49     		ldr	r1, .L274+4
 2702 0056 1048     		ldr	r0, .L274+8
 2703              	.LVL379:
 2704 0058 FFF7FEFF 		bl	printf
 2705              	.LVL380:
 2706              	.LBB25:
 2707 005c 6FF00F00 		mvn	r0, #15
 2708 0060 FFF7FEFF 		bl	err_to_errno
 2709              	.LVL381:
 2710 0064 2874     		strb	r0, [r5, #16]
 2711 0066 08B1     		cbz	r0, .L267
 669:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                IS_SOCK_ADDR_TYPE_VALID_OR_UNSPEC(name) && IS_SOCK_ADDR_ALIGNED(name),
 2712              		.loc 1 669 0 is_stmt 0 discriminator 6
 2713 0068 0C4B     		ldr	r3, .L274+12
 2714 006a 1860     		str	r0, [r3]
 2715              	.L267:
 2716              	.LBE25:
 669:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                IS_SOCK_ADDR_TYPE_VALID_OR_UNSPEC(name) && IS_SOCK_ADDR_ALIGNED(name),
 2717              		.loc 1 669 0 discriminator 8
 2718 006c 4FF0FF30 		mov	r0, #-1
 2719              	.LVL382:
 2720 0070 E7E7     		b	.L261
 2721              	.LVL383:
 2722              	.L273:
 2723              	.LBE27:
 2724              	.LBB28:
 691:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2725              		.loc 1 691 0 is_stmt 1
 2726 0072 FFF7FEFF 		bl	err_to_errno
 2727              	.LVL384:
 2728 0076 2874     		strb	r0, [r5, #16]
 2729 0078 38B1     		cbz	r0, .L270
 691:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2730              		.loc 1 691 0 is_stmt 0 discriminator 1
 2731 007a 084B     		ldr	r3, .L274+12
 2732 007c 1860     		str	r0, [r3]
 2733              	.LBE28:
 692:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2734              		.loc 1 692 0 is_stmt 1 discriminator 1
 2735 007e 4FF0FF30 		mov	r0, #-1
 2736              	.LVL385:
 2737 0082 DEE7     		b	.L261
 2738              	.LVL386:
 2739              	.L269:
 651:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2740              		.loc 1 651 0
 2741 0084 4FF0FF30 		mov	r0, #-1
 2742              	.LVL387:
 2743 0088 DBE7     		b	.L261
 2744              	.LVL388:
 2745              	.L270:
 692:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 102


 2746              		.loc 1 692 0
 2747 008a 4FF0FF30 		mov	r0, #-1
 2748              	.LVL389:
 2749 008e D8E7     		b	.L261
 2750              	.L275:
 2751              		.align	2
 2752              	.L274:
 2753 0090 00000000 		.word	.LC0
 2754 0094 00000000 		.word	.LC10
 2755 0098 3C000000 		.word	.LC2
 2756 009c 00000000 		.word	errno
 2757              		.cfi_endproc
 2758              	.LFE168:
 2760              		.section	.text.lwip_listen,"ax",%progbits
 2761              		.align	1
 2762              		.global	lwip_listen
 2763              		.syntax unified
 2764              		.thumb
 2765              		.thumb_func
 2766              		.fpu fpv5-sp-d16
 2768              	lwip_listen:
 2769              	.LFB169:
 710:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 2770              		.loc 1 710 0
 2771              		.cfi_startproc
 2772              		@ args = 0, pretend = 0, frame = 0
 2773              		@ frame_needed = 0, uses_anonymous_args = 0
 2774              	.LVL390:
 2775 0000 38B5     		push	{r3, r4, r5, lr}
 2776              	.LCFI30:
 2777              		.cfi_def_cfa_offset 16
 2778              		.cfi_offset 3, -16
 2779              		.cfi_offset 4, -12
 2780              		.cfi_offset 5, -8
 2781              		.cfi_offset 14, -4
 2782 0002 0C46     		mov	r4, r1
 716:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 2783              		.loc 1 716 0
 2784 0004 FFF7FEFF 		bl	get_socket
 2785              	.LVL391:
 717:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2786              		.loc 1 717 0
 2787 0008 20B3     		cbz	r0, .L281
 2788 000a 0546     		mov	r5, r0
 722:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2789              		.loc 1 722 0
 2790 000c FE2C     		cmp	r4, #254
 2791 000e 15DC     		bgt	.L282
 722:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2792              		.loc 1 722 0 is_stmt 0 discriminator 1
 2793 0010 24EAE471 		bic	r1, r4, r4, asr #31
 2794              	.L278:
 2795              	.LVL392:
 724:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2796              		.loc 1 724 0 is_stmt 1 discriminator 4
 2797 0014 C9B2     		uxtb	r1, r1
 2798              	.LVL393:
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 103


 2799 0016 2868     		ldr	r0, [r5]
 2800              	.LVL394:
 2801 0018 FFF7FEFF 		bl	netconn_listen_with_backlog
 2802              	.LVL395:
 726:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_listen(%d) failed, err=%d\n", s, err));
 2803              		.loc 1 726 0 discriminator 4
 2804 001c B8B1     		cbz	r0, .L279
 728:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, EOPNOTSUPP);
 2805              		.loc 1 728 0
 2806 001e 2B68     		ldr	r3, [r5]
 2807 0020 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2808 0022 03F0F003 		and	r3, r3, #240
 2809 0026 102B     		cmp	r3, #16
 2810 0028 0AD1     		bne	.L285
 2811              	.LBB29:
 732:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2812              		.loc 1 732 0
 2813 002a FFF7FEFF 		bl	err_to_errno
 2814              	.LVL396:
 2815 002e 2874     		strb	r0, [r5, #16]
 2816 0030 98B1     		cbz	r0, .L283
 732:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2817              		.loc 1 732 0 is_stmt 0 discriminator 1
 2818 0032 0B4B     		ldr	r3, .L286
 2819 0034 1860     		str	r0, [r3]
 2820              	.LBE29:
 733:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2821              		.loc 1 733 0 is_stmt 1 discriminator 1
 2822 0036 4FF0FF30 		mov	r0, #-1
 2823              	.LVL397:
 2824 003a 0AE0     		b	.L276
 2825              	.LVL398:
 2826              	.L282:
 722:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2827              		.loc 1 722 0
 2828 003c FF21     		movs	r1, #255
 2829 003e E9E7     		b	.L278
 2830              	.LVL399:
 2831              	.L285:
 2832              	.LBB30:
 729:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
 2833              		.loc 1 729 0
 2834 0040 5F23     		movs	r3, #95
 2835 0042 2B74     		strb	r3, [r5, #16]
 2836 0044 064A     		ldr	r2, .L286
 2837 0046 1360     		str	r3, [r2]
 2838              	.LBE30:
 730:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 2839              		.loc 1 730 0
 2840 0048 4FF0FF30 		mov	r0, #-1
 2841              	.LVL400:
 2842 004c 01E0     		b	.L276
 2843              	.LVL401:
 2844              	.L279:
 2845              	.LBB31:
 736:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return 0;
 2846              		.loc 1 736 0
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 104


 2847 004e 0020     		movs	r0, #0
 2848              	.LVL402:
 2849 0050 2874     		strb	r0, [r5, #16]
 2850              	.LVL403:
 2851              	.L276:
 2852              	.LBE31:
 738:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2853              		.loc 1 738 0
 2854 0052 38BD     		pop	{r3, r4, r5, pc}
 2855              	.LVL404:
 2856              	.L281:
 718:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2857              		.loc 1 718 0
 2858 0054 4FF0FF30 		mov	r0, #-1
 2859              	.LVL405:
 2860 0058 FBE7     		b	.L276
 2861              	.LVL406:
 2862              	.L283:
 733:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2863              		.loc 1 733 0
 2864 005a 4FF0FF30 		mov	r0, #-1
 2865              	.LVL407:
 2866 005e F8E7     		b	.L276
 2867              	.L287:
 2868              		.align	2
 2869              	.L286:
 2870 0060 00000000 		.word	errno
 2871              		.cfi_endproc
 2872              	.LFE169:
 2874              		.section	.text.lwip_recvfrom,"ax",%progbits
 2875              		.align	1
 2876              		.global	lwip_recvfrom
 2877              		.syntax unified
 2878              		.thumb
 2879              		.thumb_func
 2880              		.fpu fpv5-sp-d16
 2882              	lwip_recvfrom:
 2883              	.LFB170:
 743:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 2884              		.loc 1 743 0
 2885              		.cfi_startproc
 2886              		@ args = 8, pretend = 0, frame = 48
 2887              		@ frame_needed = 0, uses_anonymous_args = 0
 2888              	.LVL408:
 2889 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 2890              	.LCFI31:
 2891              		.cfi_def_cfa_offset 36
 2892              		.cfi_offset 4, -36
 2893              		.cfi_offset 5, -32
 2894              		.cfi_offset 6, -28
 2895              		.cfi_offset 7, -24
 2896              		.cfi_offset 8, -20
 2897              		.cfi_offset 9, -16
 2898              		.cfi_offset 10, -12
 2899              		.cfi_offset 11, -8
 2900              		.cfi_offset 14, -4
 2901 0004 8DB0     		sub	sp, sp, #52
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 105


 2902              	.LCFI32:
 2903              		.cfi_def_cfa_offset 88
 2904 0006 0291     		str	r1, [sp, #8]
 2905 0008 9346     		mov	fp, r2
 2906 000a 0093     		str	r3, [sp]
 2907 000c DDF85CA0 		ldr	r10, [sp, #92]
 745:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct pbuf      *p;
 2908              		.loc 1 745 0
 2909 0010 0023     		movs	r3, #0
 2910              	.LVL409:
 2911 0012 0B93     		str	r3, [sp, #44]
 2912              	.LVL410:
 753:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 2913              		.loc 1 753 0
 2914 0014 FFF7FEFF 		bl	get_socket
 2915              	.LVL411:
 754:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2916              		.loc 1 754 0
 2917 0018 0028     		cmp	r0, #0
 2918 001a 00F01581 		beq	.L316
 2919 001e 0646     		mov	r6, r0
 749:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t            err;
 2920              		.loc 1 749 0
 2921 0020 0025     		movs	r5, #0
 748:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u8_t             done = 0;
 2922              		.loc 1 748 0
 2923 0022 A846     		mov	r8, r5
 2924 0024 A946     		mov	r9, r5
 2925 0026 A7E0     		b	.L315
 2926              	.LVL412:
 2927              	.L290:
 765:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (sock->rcvevent <= 0)) {
 2928              		.loc 1 765 0
 2929 0028 009B     		ldr	r3, [sp]
 2930 002a 13F0080F 		tst	r3, #8
 2931 002e 04D1     		bne	.L292
 765:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (sock->rcvevent <= 0)) {
 2932              		.loc 1 765 0 is_stmt 0 discriminator 2
 2933 0030 3368     		ldr	r3, [r6]
 2934 0032 1B7F     		ldrb	r3, [r3, #28]	@ zero_extendqisi2
 2935 0034 13F0020F 		tst	r3, #2
 2936 0038 03D0     		beq	.L293
 2937              	.L292:
 766:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (off > 0) {
 2938              		.loc 1 766 0 is_stmt 1 discriminator 3
 2939 003a B6F90A30 		ldrsh	r3, [r6, #10]
 765:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (sock->rcvevent <= 0)) {
 2940              		.loc 1 765 0 discriminator 3
 2941 003e 002B     		cmp	r3, #0
 2942 0040 0EDD     		ble	.L325
 2943              	.L293:
 779:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         err = netconn_recv_tcp_pbuf(sock->conn, (struct pbuf **)&buf);
 2944              		.loc 1 779 0
 2945 0042 3068     		ldr	r0, [r6]
 2946 0044 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 2947 0046 03F0F003 		and	r3, r3, #240
 2948 004a 102B     		cmp	r3, #16
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 106


 2949 004c 14D0     		beq	.L326
 782:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 2950              		.loc 1 782 0
 2951 004e 0BA9     		add	r1, sp, #44
 2952 0050 FFF7FEFF 		bl	netconn_recv
 2953              	.LVL413:
 2954              	.L296:
 787:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (off > 0) {
 2955              		.loc 1 787 0
 2956 0054 A0B9     		cbnz	r0, .L327
 807:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->lastdata = buf;
 2957              		.loc 1 807 0
 2958 0056 0B9B     		ldr	r3, [sp, #44]
 2959 0058 7BB3     		cbz	r3, .L328
 2960              	.LVL414:
 2961              	.L301:
 808:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 2962              		.loc 1 808 0
 2963 005a 0B9B     		ldr	r3, [sp, #44]
 2964 005c 7360     		str	r3, [r6, #4]
 2965 005e 90E0     		b	.L291
 2966              	.L325:
 767:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           /* already received data, return that */
 2967              		.loc 1 767 0
 2968 0060 B8F1000F 		cmp	r8, #0
 2969 0064 02DD     		ble	.L294
 2970              	.LVL415:
 2971              	.LBB32:
 769:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           return off;
 2972              		.loc 1 769 0
 2973 0066 0023     		movs	r3, #0
 2974 0068 3374     		strb	r3, [r6, #16]
 2975              	.LBE32:
 770:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 2976              		.loc 1 770 0
 2977 006a E9E0     		b	.L288
 2978              	.LVL416:
 2979              	.L294:
 773:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return -1;
 2980              		.loc 1 773 0 discriminator 1
 2981 006c 794B     		ldr	r3, .L337
 2982 006e 0B22     		movs	r2, #11
 2983 0070 1A60     		str	r2, [r3]
 774:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 2984              		.loc 1 774 0 discriminator 1
 2985 0072 4FF0FF38 		mov	r8, #-1
 2986              	.LVL417:
 2987 0076 E3E0     		b	.L288
 2988              	.LVL418:
 2989              	.L326:
 780:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
 2990              		.loc 1 780 0
 2991 0078 0BA9     		add	r1, sp, #44
 2992 007a FFF7FEFF 		bl	netconn_recv_tcp_pbuf
 2993              	.LVL419:
 2994 007e E9E7     		b	.L296
 2995              	.L327:
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 107


 2996 0080 0446     		mov	r4, r0
 788:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (err == ERR_CLSD) {
 2997              		.loc 1 788 0
 2998 0082 B8F1000F 		cmp	r8, #0
 2999 0086 0BDD     		ble	.L298
 789:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             /* closed but already received data, ensure select gets the FIN, too */
 3000              		.loc 1 789 0
 3001 0088 10F10F0F 		cmn	r0, #15
 3002 008c 02D0     		beq	.L329
 3003              	.LVL420:
 3004              	.L299:
 3005              	.LBB33:
 794:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           return off;
 3006              		.loc 1 794 0
 3007 008e 0023     		movs	r3, #0
 3008 0090 3374     		strb	r3, [r6, #16]
 3009              	.LBE33:
 795:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 3010              		.loc 1 795 0
 3011 0092 D5E0     		b	.L288
 3012              	.LVL421:
 3013              	.L329:
 791:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
 3014              		.loc 1 791 0
 3015 0094 0022     		movs	r2, #0
 3016 0096 1146     		mov	r1, r2
 3017 0098 3068     		ldr	r0, [r6]
 3018              	.LVL422:
 3019 009a FFF7FEFF 		bl	event_callback
 3020              	.LVL423:
 3021 009e F6E7     		b	.L299
 3022              	.LVL424:
 3023              	.L298:
 3024              	.LBB34:
 800:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (err == ERR_CLSD) {
 3025              		.loc 1 800 0
 3026 00a0 FFF7FEFF 		bl	err_to_errno
 3027              	.LVL425:
 3028 00a4 3074     		strb	r0, [r6, #16]
 3029 00a6 08B1     		cbz	r0, .L300
 800:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (err == ERR_CLSD) {
 3030              		.loc 1 800 0 is_stmt 0 discriminator 1
 3031 00a8 6A4B     		ldr	r3, .L337
 3032 00aa 1860     		str	r0, [r3]
 3033              	.L300:
 3034              	.LBE34:
 801:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           return 0;
 3035              		.loc 1 801 0 is_stmt 1
 3036 00ac 14F10F0F 		cmn	r4, #15
 3037 00b0 40F0CD80 		bne	.L317
 802:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
 3038              		.loc 1 802 0
 3039 00b4 4FF00008 		mov	r8, #0
 3040              	.LVL426:
 3041 00b8 C2E0     		b	.L288
 3042              	.LVL427:
 3043              	.L328:
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 108


 807:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->lastdata = buf;
 3044              		.loc 1 807 0 discriminator 1
 3045 00ba 674B     		ldr	r3, .L337+4
 3046 00bc 40F22732 		movw	r2, #807
 3047 00c0 6649     		ldr	r1, .L337+8
 3048 00c2 6748     		ldr	r0, .L337+12
 3049              	.LVL428:
 3050 00c4 FFF7FEFF 		bl	printf
 3051              	.LVL429:
 3052 00c8 C7E7     		b	.L301
 3053              	.L334:
 812:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
 3054              		.loc 1 812 0
 3055 00ca 0B9F     		ldr	r7, [sp, #44]
 3056              	.LVL430:
 3057 00cc 61E0     		b	.L303
 3058              	.LVL431:
 3059              	.L318:
 823:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
 3060              		.loc 1 823 0
 3061 00ce 2546     		mov	r5, r4
 3062 00d0 67E0     		b	.L304
 3063              	.LVL432:
 3064              	.L335:
 835:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       len -= copylen;
 3065              		.loc 1 835 0
 3066 00d2 0395     		str	r5, [sp, #12]
 3067 00d4 5D45     		cmp	r5, fp
 3068 00d6 13D8     		bhi	.L330
 3069              	.L306:
 3070              	.LVL433:
 837:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (p->flags & PBUF_FLAG_PUSH) ||
 3071              		.loc 1 837 0
 3072 00d8 039B     		ldr	r3, [sp, #12]
 3073 00da BBEB030B 		subs	fp, fp, r3
 3074              	.LVL434:
 3075 00de 17D0     		beq	.L320
 838:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (sock->rcvevent <= 0) ||
 3076              		.loc 1 838 0 discriminator 1
 3077 00e0 7B7B     		ldrb	r3, [r7, #13]	@ zero_extendqisi2
 837:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (p->flags & PBUF_FLAG_PUSH) ||
 3078              		.loc 1 837 0 discriminator 1
 3079 00e2 13F0010F 		tst	r3, #1
 3080 00e6 16D1     		bne	.L321
 839:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           ((flags & MSG_PEEK) != 0)) {
 3081              		.loc 1 839 0
 3082 00e8 B6F90A30 		ldrsh	r3, [r6, #10]
 838:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (sock->rcvevent <= 0) ||
 3083              		.loc 1 838 0
 3084 00ec 002B     		cmp	r3, #0
 3085 00ee 15DD     		ble	.L322
 839:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           ((flags & MSG_PEEK) != 0)) {
 3086              		.loc 1 839 0
 3087 00f0 009B     		ldr	r3, [sp]
 3088 00f2 13F0010F 		tst	r3, #1
 3089 00f6 14D1     		bne	.L323
 848:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if !SOCKETS_DEBUG
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 109


 3090              		.loc 1 848 0
 3091 00f8 B9F1000F 		cmp	r9, #0
 3092 00fc 22D0     		beq	.L307
 3093 00fe 60E0     		b	.L305
 3094              	.L330:
 835:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       len -= copylen;
 3095              		.loc 1 835 0 discriminator 1
 3096 0100 554B     		ldr	r3, .L337+4
 3097 0102 40F24332 		movw	r2, #835
 3098 0106 5749     		ldr	r1, .L337+16
 3099 0108 5548     		ldr	r0, .L337+12
 3100 010a FFF7FEFF 		bl	printf
 3101              	.LVL435:
 3102 010e E3E7     		b	.L306
 3103              	.L320:
 3104 0110 4FF00109 		mov	r9, #1
 3105              	.LVL436:
 3106 0114 55E0     		b	.L305
 3107              	.LVL437:
 3108              	.L321:
 3109 0116 4FF00109 		mov	r9, #1
 3110              	.LVL438:
 3111 011a 52E0     		b	.L305
 3112              	.LVL439:
 3113              	.L322:
 3114 011c 4FF00109 		mov	r9, #1
 3115              	.LVL440:
 3116 0120 4FE0     		b	.L305
 3117              	.LVL441:
 3118              	.L323:
 3119 0122 4FF00109 		mov	r9, #1
 3120              	.LVL442:
 3121 0126 4CE0     		b	.L305
 3122              	.LVL443:
 3123              	.L336:
 3124              	.LBB35:
 860:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
 3125              		.loc 1 860 0
 3126 0128 0023     		movs	r3, #0
 3127 012a 0DF11602 		add	r2, sp, #22
 3128 012e 06A9     		add	r1, sp, #24
 3129              	.LVL444:
 3130 0130 FFF7FEFF 		bl	netconn_getaddr
 3131              	.LVL445:
 859:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           netconn_getaddr(sock->conn, fromaddr, &port, 0);
 3132              		.loc 1 859 0
 3133 0134 06AF     		add	r7, sp, #24
 3134              	.LVL446:
 3135 0136 59E0     		b	.L309
 3136              	.L310:
 884:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 3137              		.loc 1 884 0
 3138 0138 DAF80020 		ldr	r2, [r10]
 3139 013c 07A9     		add	r1, sp, #28
 3140 013e 1698     		ldr	r0, [sp, #88]
 3141 0140 FFF7FEFF 		bl	memcpy
 3142              	.LVL447:
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 110


 3143              	.L307:
 3144              	.LBE35:
 890:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* If this is a TCP socket, check if there is data left in the
 3145              		.loc 1 890 0
 3146 0144 009B     		ldr	r3, [sp]
 3147 0146 13F0010F 		tst	r3, #1
 3148 014a 12D1     		bne	.L311
 894:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock->lastdata = buf;
 3149              		.loc 1 894 0
 3150 014c 3268     		ldr	r2, [r6]
 3151 014e 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 3152 0150 03F0F003 		and	r3, r3, #240
 3153 0154 102B     		cmp	r3, #16
 3154 0156 63D0     		beq	.L331
 3155              	.LVL448:
 3156              	.L312:
 899:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock->lastoffset = 0;
 3157              		.loc 1 899 0
 3158 0158 0023     		movs	r3, #0
 3159 015a 7360     		str	r3, [r6, #4]
 900:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recvfrom: deleting netbuf=%p\n", buf));
 3160              		.loc 1 900 0
 3161 015c 3381     		strh	r3, [r6, #8]	@ movhi
 902:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           pbuf_free((struct pbuf *)buf);
 3162              		.loc 1 902 0
 3163 015e 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 3164 0160 03F0F003 		and	r3, r3, #240
 3165 0164 102B     		cmp	r3, #16
 3166 0166 65D0     		beq	.L332
 905:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 3167              		.loc 1 905 0
 3168 0168 0B98     		ldr	r0, [sp, #44]
 3169 016a FFF7FEFF 		bl	netbuf_delete
 3170              	.LVL449:
 3171              	.L314:
 907:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 3172              		.loc 1 907 0
 3173 016e 0023     		movs	r3, #0
 3174 0170 0B93     		str	r3, [sp, #44]
 3175              	.LVL450:
 3176              	.L311:
 910:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 3177              		.loc 1 910 0
 3178 0172 B9F1000F 		cmp	r9, #0
 3179 0176 61D1     		bne	.L333
 3180              	.LVL451:
 3181              	.L315:
 761:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       buf = sock->lastdata;
 3182              		.loc 1 761 0
 3183 0178 7368     		ldr	r3, [r6, #4]
 3184 017a 002B     		cmp	r3, #0
 3185 017c 3FF454AF 		beq	.L290
 762:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
 3186              		.loc 1 762 0
 3187 0180 0B93     		str	r3, [sp, #44]
 3188              	.L291:
 811:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       p = (struct pbuf *)buf;
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 111


 3189              		.loc 1 811 0
 3190 0182 3368     		ldr	r3, [r6]
 3191 0184 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3192 0186 03F0F003 		and	r3, r3, #240
 3193 018a 102B     		cmp	r3, #16
 3194 018c 9DD0     		beq	.L334
 814:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 3195              		.loc 1 814 0
 3196 018e 0B9B     		ldr	r3, [sp, #44]
 3197 0190 1F68     		ldr	r7, [r3]
 3198              	.LVL452:
 3199              	.L303:
 816:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recvfrom: buflen=%"U16_F" len=%"SZT_F" off=%d sock->lastoffse
 3200              		.loc 1 816 0
 3201 0192 3C89     		ldrh	r4, [r7, #8]
 3202              	.LVL453:
 820:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 3203              		.loc 1 820 0
 3204 0194 3389     		ldrh	r3, [r6, #8]
 3205 0196 E41A     		subs	r4, r4, r3
 3206              	.LVL454:
 3207 0198 A4B2     		uxth	r4, r4
 3208              	.LVL455:
 822:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       copylen = buflen;
 3209              		.loc 1 822 0
 3210 019a 5C45     		cmp	r4, fp
 3211 019c 97D3     		bcc	.L318
 825:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 3212              		.loc 1 825 0
 3213 019e 1FFA8BF5 		uxth	r5, fp
 3214              	.LVL456:
 3215              	.L304:
 830:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 3216              		.loc 1 830 0
 3217 01a2 2A46     		mov	r2, r5
 3218 01a4 0299     		ldr	r1, [sp, #8]
 3219 01a6 4144     		add	r1, r1, r8
 3220 01a8 3846     		mov	r0, r7
 3221 01aa FFF7FEFF 		bl	pbuf_copy_partial
 3222              	.LVL457:
 832:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 3223              		.loc 1 832 0
 3224 01ae 0195     		str	r5, [sp, #4]
 3225 01b0 A844     		add	r8, r8, r5
 3226              	.LVL458:
 834:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_ASSERT("invalid copylen, len would underflow", len >= copylen);
 3227              		.loc 1 834 0
 3228 01b2 3368     		ldr	r3, [r6]
 3229 01b4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3230 01b6 03F0F003 		and	r3, r3, #240
 3231 01ba 102B     		cmp	r3, #16
 3232 01bc 89D0     		beq	.L335
 844:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 3233              		.loc 1 844 0
 3234 01be 4FF00109 		mov	r9, #1
 3235              	.LVL459:
 3236              	.L305:
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 112


 850:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* !SOCKETS_DEBUG */
 3237              		.loc 1 850 0
 3238 01c2 1AF10003 		adds	r3, r10, #0
 3239 01c6 18BF     		it	ne
 3240 01c8 0123     		movne	r3, #1
 3241 01ca 169A     		ldr	r2, [sp, #88]
 3242 01cc 002A     		cmp	r2, #0
 3243 01ce 08BF     		it	eq
 3244 01d0 0023     		moveq	r3, #0
 3245 01d2 002B     		cmp	r3, #0
 3246 01d4 B6D0     		beq	.L307
 3247              	.LBB36:
 858:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           fromaddr = &tmpaddr;
 3248              		.loc 1 858 0
 3249 01d6 3068     		ldr	r0, [r6]
 3250 01d8 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 3251 01da 03F0F003 		and	r3, r3, #240
 3252 01de 102B     		cmp	r3, #16
 3253 01e0 A2D0     		beq	.L336
 862:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           fromaddr = netbuf_fromaddr((struct netbuf *)buf);
 3254              		.loc 1 862 0
 3255 01e2 0B9F     		ldr	r7, [sp, #44]
 3256              	.LVL460:
 3257 01e4 BB89     		ldrh	r3, [r7, #12]
 3258 01e6 ADF81630 		strh	r3, [sp, #22]	@ movhi
 863:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 3259              		.loc 1 863 0
 3260 01ea 0837     		adds	r7, r7, #8
 3261              	.LVL461:
 3262              	.L309:
 874:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         ip_addr_debug_print(SOCKETS_DEBUG, fromaddr);
 3263              		.loc 1 874 0
 3264 01ec 1023     		movs	r3, #16
 3265 01ee 8DF81C30 		strb	r3, [sp, #28]
 3266 01f2 0223     		movs	r3, #2
 3267 01f4 8DF81D30 		strb	r3, [sp, #29]
 3268 01f8 BDF81600 		ldrh	r0, [sp, #22]
 3269 01fc FFF7FEFF 		bl	lwip_htons
 3270              	.LVL462:
 3271 0200 ADF81E00 		strh	r0, [sp, #30]	@ movhi
 3272 0204 3B68     		ldr	r3, [r7]
 3273 0206 0893     		str	r3, [sp, #32]
 3274 0208 0023     		movs	r3, #0
 3275 020a 0993     		str	r3, [sp, #36]
 3276 020c 0A93     		str	r3, [sp, #40]
 881:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             *fromlen = saddr.sa.sa_len;
 3277              		.loc 1 881 0
 3278 020e DAF80020 		ldr	r2, [r10]
 3279 0212 9DF81C30 		ldrb	r3, [sp, #28]	@ zero_extendqisi2
 3280 0216 9A42     		cmp	r2, r3
 3281 0218 8ED9     		bls	.L310
 882:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
 3282              		.loc 1 882 0
 3283 021a CAF80030 		str	r3, [r10]
 3284 021e 8BE7     		b	.L310
 3285              	.LVL463:
 3286              	.L331:
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 113


 3287              	.LBE36:
 894:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock->lastdata = buf;
 3288              		.loc 1 894 0 discriminator 1
 3289 0220 019B     		ldr	r3, [sp, #4]
 3290 0222 E41A     		subs	r4, r4, r3
 3291              	.LVL464:
 3292 0224 002C     		cmp	r4, #0
 3293 0226 97DD     		ble	.L312
 895:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock->lastoffset += copylen;
 3294              		.loc 1 895 0
 3295 0228 0B9B     		ldr	r3, [sp, #44]
 3296 022a 7360     		str	r3, [r6, #4]
 896:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recvfrom: lastdata now netbuf=%p\n", buf));
 3297              		.loc 1 896 0
 3298 022c 3389     		ldrh	r3, [r6, #8]
 3299 022e 1D44     		add	r5, r5, r3
 3300              	.LVL465:
 3301 0230 3581     		strh	r5, [r6, #8]	@ movhi
 3302 0232 9EE7     		b	.L311
 3303              	.LVL466:
 3304              	.L332:
 903:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
 3305              		.loc 1 903 0
 3306 0234 0B98     		ldr	r0, [sp, #44]
 3307 0236 FFF7FEFF 		bl	pbuf_free
 3308              	.LVL467:
 3309 023a 98E7     		b	.L314
 3310              	.LVL468:
 3311              	.L333:
 3312              	.LBB37:
 912:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return off;
 3313              		.loc 1 912 0
 3314 023c 0023     		movs	r3, #0
 3315 023e 3374     		strb	r3, [r6, #16]
 3316              	.LVL469:
 3317              	.L288:
 3318              	.LBE37:
 914:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 3319              		.loc 1 914 0
 3320 0240 4046     		mov	r0, r8
 3321 0242 0DB0     		add	sp, sp, #52
 3322              	.LCFI33:
 3323              		.cfi_remember_state
 3324              		.cfi_def_cfa_offset 36
 3325              	.LVL470:
 3326              		@ sp needed
 3327 0244 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 3328              	.LVL471:
 3329              	.L316:
 3330              	.LCFI34:
 3331              		.cfi_restore_state
 755:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 3332              		.loc 1 755 0
 3333 0248 4FF0FF38 		mov	r8, #-1
 3334 024c F8E7     		b	.L288
 3335              	.LVL472:
 3336              	.L317:
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 114


 804:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 3337              		.loc 1 804 0
 3338 024e 4FF0FF38 		mov	r8, #-1
 3339              	.LVL473:
 3340 0252 F5E7     		b	.L288
 3341              	.L338:
 3342              		.align	2
 3343              	.L337:
 3344 0254 00000000 		.word	errno
 3345 0258 00000000 		.word	.LC0
 3346 025c 00000000 		.word	.LC11
 3347 0260 3C000000 		.word	.LC2
 3348 0264 0C000000 		.word	.LC12
 3349              		.cfi_endproc
 3350              	.LFE170:
 3352              		.section	.text.lwip_read,"ax",%progbits
 3353              		.align	1
 3354              		.global	lwip_read
 3355              		.syntax unified
 3356              		.thumb
 3357              		.thumb_func
 3358              		.fpu fpv5-sp-d16
 3360              	lwip_read:
 3361              	.LFB171:
 918:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return lwip_recvfrom(s, mem, len, 0, NULL, NULL);
 3362              		.loc 1 918 0
 3363              		.cfi_startproc
 3364              		@ args = 0, pretend = 0, frame = 0
 3365              		@ frame_needed = 0, uses_anonymous_args = 0
 3366              	.LVL474:
 3367 0000 00B5     		push	{lr}
 3368              	.LCFI35:
 3369              		.cfi_def_cfa_offset 4
 3370              		.cfi_offset 14, -4
 3371 0002 83B0     		sub	sp, sp, #12
 3372              	.LCFI36:
 3373              		.cfi_def_cfa_offset 16
 919:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 3374              		.loc 1 919 0
 3375 0004 0023     		movs	r3, #0
 3376 0006 0193     		str	r3, [sp, #4]
 3377 0008 0093     		str	r3, [sp]
 3378 000a FFF7FEFF 		bl	lwip_recvfrom
 3379              	.LVL475:
 920:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 3380              		.loc 1 920 0
 3381 000e 03B0     		add	sp, sp, #12
 3382              	.LCFI37:
 3383              		.cfi_def_cfa_offset 4
 3384              		@ sp needed
 3385 0010 5DF804FB 		ldr	pc, [sp], #4
 3386              		.cfi_endproc
 3387              	.LFE171:
 3389              		.section	.text.lwip_recv,"ax",%progbits
 3390              		.align	1
 3391              		.global	lwip_recv
 3392              		.syntax unified
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 115


 3393              		.thumb
 3394              		.thumb_func
 3395              		.fpu fpv5-sp-d16
 3397              	lwip_recv:
 3398              	.LFB172:
 924:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return lwip_recvfrom(s, mem, len, flags, NULL, NULL);
 3399              		.loc 1 924 0
 3400              		.cfi_startproc
 3401              		@ args = 0, pretend = 0, frame = 0
 3402              		@ frame_needed = 0, uses_anonymous_args = 0
 3403              	.LVL476:
 3404 0000 10B5     		push	{r4, lr}
 3405              	.LCFI38:
 3406              		.cfi_def_cfa_offset 8
 3407              		.cfi_offset 4, -8
 3408              		.cfi_offset 14, -4
 3409 0002 82B0     		sub	sp, sp, #8
 3410              	.LCFI39:
 3411              		.cfi_def_cfa_offset 16
 925:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 3412              		.loc 1 925 0
 3413 0004 0024     		movs	r4, #0
 3414 0006 0194     		str	r4, [sp, #4]
 3415 0008 0094     		str	r4, [sp]
 3416 000a FFF7FEFF 		bl	lwip_recvfrom
 3417              	.LVL477:
 926:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 3418              		.loc 1 926 0
 3419 000e 02B0     		add	sp, sp, #8
 3420              	.LCFI40:
 3421              		.cfi_def_cfa_offset 8
 3422              		@ sp needed
 3423 0010 10BD     		pop	{r4, pc}
 3424              		.cfi_endproc
 3425              	.LFE172:
 3427              		.section	.text.lwip_sendmsg,"ax",%progbits
 3428              		.align	1
 3429              		.global	lwip_sendmsg
 3430              		.syntax unified
 3431              		.thumb
 3432              		.thumb_func
 3433              		.fpu fpv5-sp-d16
 3435              	lwip_sendmsg:
 3436              	.LFB174:
 966:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 3437              		.loc 1 966 0
 3438              		.cfi_startproc
 3439              		@ args = 0, pretend = 0, frame = 8
 3440              		@ frame_needed = 0, uses_anonymous_args = 0
 3441              	.LVL478:
 3442 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 3443              	.LCFI41:
 3444              		.cfi_def_cfa_offset 32
 3445              		.cfi_offset 4, -32
 3446              		.cfi_offset 5, -28
 3447              		.cfi_offset 6, -24
 3448              		.cfi_offset 7, -20
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 116


 3449              		.cfi_offset 8, -16
 3450              		.cfi_offset 9, -12
 3451              		.cfi_offset 10, -8
 3452              		.cfi_offset 14, -4
 3453 0004 84B0     		sub	sp, sp, #16
 3454              	.LCFI42:
 3455              		.cfi_def_cfa_offset 48
 3456 0006 0C46     		mov	r4, r1
 3457 0008 1546     		mov	r5, r2
 3458              	.LVL479:
 976:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 3459              		.loc 1 976 0
 3460 000a FFF7FEFF 		bl	get_socket
 3461              	.LVL480:
 977:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 3462              		.loc 1 977 0
 3463 000e 0028     		cmp	r0, #0
 3464 0010 00F00B81 		beq	.L366
 3465 0014 0746     		mov	r7, r0
 981:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              sock_set_errno(sock, err_to_errno(ERR_ARG)); return -1;);
 3466              		.loc 1 981 0
 3467 0016 D4B1     		cbz	r4, .L376
 987:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              sock_set_errno(sock, err_to_errno(ERR_ARG)); return -1;);
 3468              		.loc 1 987 0
 3469 0018 A368     		ldr	r3, [r4, #8]
 3470 001a 0BB1     		cbz	r3, .L346
 987:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              sock_set_errno(sock, err_to_errno(ERR_ARG)); return -1;);
 3471              		.loc 1 987 0 is_stmt 0 discriminator 2
 3472 001c E368     		ldr	r3, [r4, #12]
 3473 001e 53BB     		cbnz	r3, .L347
 3474              	.L346:
 987:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              sock_set_errno(sock, err_to_errno(ERR_ARG)); return -1;);
 3475              		.loc 1 987 0 discriminator 3
 3476 0020 894B     		ldr	r3, .L385
 3477 0022 4FF47772 		mov	r2, #988
 3478 0026 8949     		ldr	r1, .L385+4
 3479 0028 8948     		ldr	r0, .L385+8
 3480              	.LVL481:
 3481 002a FFF7FEFF 		bl	printf
 3482              	.LVL482:
 3483              	.LBB38:
 3484 002e 6FF00F00 		mvn	r0, #15
 3485 0032 FFF7FEFF 		bl	err_to_errno
 3486              	.LVL483:
 3487 0036 3874     		strb	r0, [r7, #16]
 3488 0038 0028     		cmp	r0, #0
 3489 003a 00F0FC80 		beq	.L368
 987:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              sock_set_errno(sock, err_to_errno(ERR_ARG)); return -1;);
 3490              		.loc 1 987 0 discriminator 4
 3491 003e 854B     		ldr	r3, .L385+12
 3492 0040 1860     		str	r0, [r3]
 3493              	.LBE38:
 3494 0042 4FF0FF35 		mov	r5, #-1
 3495              	.LVL484:
 3496              	.L343:
1119:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 3497              		.loc 1 1119 0 is_stmt 1
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 117


 3498 0046 2846     		mov	r0, r5
 3499 0048 04B0     		add	sp, sp, #16
 3500              	.LCFI43:
 3501              		.cfi_remember_state
 3502              		.cfi_def_cfa_offset 32
 3503              		@ sp needed
 3504 004a BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 3505              	.LVL485:
 3506              	.L376:
 3507              	.LCFI44:
 3508              		.cfi_restore_state
 981:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              sock_set_errno(sock, err_to_errno(ERR_ARG)); return -1;);
 3509              		.loc 1 981 0 discriminator 1
 3510 004e 7E4B     		ldr	r3, .L385
 3511 0050 40F2D632 		movw	r2, #982
 3512 0054 8049     		ldr	r1, .L385+16
 3513 0056 7E48     		ldr	r0, .L385+8
 3514              	.LVL486:
 3515 0058 FFF7FEFF 		bl	printf
 3516              	.LVL487:
 3517              	.LBB39:
 3518 005c 6FF00F00 		mvn	r0, #15
 3519 0060 FFF7FEFF 		bl	err_to_errno
 3520              	.LVL488:
 3521 0064 3874     		strb	r0, [r7, #16]
 3522 0066 0028     		cmp	r0, #0
 3523 0068 00F0E280 		beq	.L367
 981:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              sock_set_errno(sock, err_to_errno(ERR_ARG)); return -1;);
 3524              		.loc 1 981 0 is_stmt 0 discriminator 2
 3525 006c 794B     		ldr	r3, .L385+12
 3526 006e 1860     		str	r0, [r3]
 3527              	.LBE39:
 3528 0070 4FF0FF35 		mov	r5, #-1
 3529              	.LVL489:
 3530 0074 E7E7     		b	.L343
 3531              	.LVL490:
 3532              	.L347:
 990:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCP
 3533              		.loc 1 990 0 is_stmt 1
 3534 0076 0368     		ldr	r3, [r0]
 3535 0078 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3536 007a 03F0F003 		and	r3, r3, #240
 3537 007e 102B     		cmp	r3, #16
 3538 0080 16D0     		beq	.L377
 3539              	.LBB40:
1032:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                IS_SOCK_ADDR_LEN_VALID(msg->msg_namelen)) ,
 3540              		.loc 1 1032 0
 3541 0082 2368     		ldr	r3, [r4]
 3542 0084 002B     		cmp	r3, #0
 3543 0086 5CD0     		beq	.L378
 3544              	.L353:
1032:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                IS_SOCK_ADDR_LEN_VALID(msg->msg_namelen)) ,
 3545              		.loc 1 1032 0 is_stmt 0 discriminator 3
 3546 0088 6368     		ldr	r3, [r4, #4]
 3547 008a 102B     		cmp	r3, #16
 3548 008c 5DD1     		bne	.L379
 3549              	.L354:
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 118


1037:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (!chain_buf) {
 3550              		.loc 1 1037 0 is_stmt 1
 3551 008e FFF7FEFF 		bl	netbuf_new
 3552              	.LVL491:
1038:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, err_to_errno(ERR_MEM));
 3553              		.loc 1 1038 0
 3554 0092 8046     		mov	r8, r0
 3555 0094 0028     		cmp	r0, #0
 3556 0096 6BD0     		beq	.L380
1042:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       u16_t remote_port;
 3557              		.loc 1 1042 0
 3558 0098 2368     		ldr	r3, [r4]
 3559 009a 3BB1     		cbz	r3, .L356
 3560              	.LBB41:
1044:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       netbuf_fromport(chain_buf) = remote_port;
 3561              		.loc 1 1044 0
 3562 009c 5B68     		ldr	r3, [r3, #4]
 3563 009e 8360     		str	r3, [r0, #8]
 3564 00a0 2368     		ldr	r3, [r4]
 3565 00a2 5888     		ldrh	r0, [r3, #2]
 3566              	.LVL492:
 3567 00a4 FFF7FEFF 		bl	lwip_htons
 3568              	.LVL493:
1045:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 3569              		.loc 1 1045 0
 3570 00a8 A8F80C00 		strh	r0, [r8, #12]	@ movhi
 3571              	.LVL494:
 3572              	.L356:
 3573              	.LBE41:
 3574              	.LBE40:
 3575              	.LBB48:
1015:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         break;
 3576              		.loc 1 1015 0 discriminator 1
 3577 00ac 0026     		movs	r6, #0
 3578 00ae 78E0     		b	.L361
 3579              	.LVL495:
 3580              	.L377:
 3581              	.LBE48:
 993:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ((flags & MSG_DONTWAIT) ? NETCONN_DONTBLOCK : 0);
 3582              		.loc 1 993 0
 3583 00b0 4FEAE508 		asr	r8, r5, #3
 3584 00b4 08F00208 		and	r8, r8, #2
 3585 00b8 4FFA88F8 		sxtb	r8, r8
 992:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ((flags & MSG_MORE)     ? NETCONN_MORE      : 0) |
 3586              		.loc 1 992 0
 3587 00bc 48F00103 		orr	r3, r8, #1
 994:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 3588              		.loc 1 994 0
 3589 00c0 4FEA6508 		asr	r8, r5, #1
 3590 00c4 08F00408 		and	r8, r8, #4
 992:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ((flags & MSG_MORE)     ? NETCONN_MORE      : 0) |
 3591              		.loc 1 992 0
 3592 00c8 48EA0308 		orr	r8, r8, r3
 3593              	.LVL496:
 974:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 3594              		.loc 1 974 0
 3595 00cc 0026     		movs	r6, #0
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 119


 973:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err = ERR_OK;
 3596              		.loc 1 973 0
 3597 00ce 3546     		mov	r5, r6
 3598              	.LVL497:
 996:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       u8_t apiflags = write_flags;
 3599              		.loc 1 996 0
 3600 00d0 3346     		mov	r3, r6
 3601              	.LVL498:
 3602              	.L349:
 996:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       u8_t apiflags = write_flags;
 3603              		.loc 1 996 0 is_stmt 0 discriminator 1
 3604 00d2 E268     		ldr	r2, [r4, #12]
 3605 00d4 9A42     		cmp	r2, r3
 3606 00d6 1DDD     		ble	.L351
 3607              	.LVL499:
 3608              	.LBB49:
 998:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         apiflags |= NETCONN_MORE;
 3609              		.loc 1 998 0 is_stmt 1
 3610 00d8 03F1010A 		add	r10, r3, #1
1001:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = netconn_write_partly(sock->conn, msg->msg_iov[i].iov_base, msg->msg_iov[i].iov_len, wri
 3611              		.loc 1 1001 0
 3612 00dc 04AE     		add	r6, sp, #16
 3613              	.LVL500:
 3614 00de 0022     		movs	r2, #0
 3615 00e0 46F8042D 		str	r2, [r6, #-4]!
1002:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (err == ERR_OK) {
 3616              		.loc 1 1002 0
 3617 00e4 3868     		ldr	r0, [r7]
 3618 00e6 A268     		ldr	r2, [r4, #8]
 3619 00e8 4FEAC309 		lsl	r9, r3, #3
 3620 00ec 02EB090C 		add	ip, r2, r9
 3621 00f0 52F83310 		ldr	r1, [r2, r3, lsl #3]
 3622 00f4 DCF80420 		ldr	r2, [ip, #4]
 3623 00f8 0096     		str	r6, [sp]
 3624 00fa 4346     		mov	r3, r8
 3625              	.LVL501:
 3626 00fc FFF7FEFF 		bl	netconn_write_partly
 3627              	.LVL502:
1003:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         size += written;
 3628              		.loc 1 1003 0
 3629 0100 0646     		mov	r6, r0
 3630 0102 80B9     		cbnz	r0, .L350
1004:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* check that the entire IO vector was accepected, if not return a partial write */
 3631              		.loc 1 1004 0
 3632 0104 039A     		ldr	r2, [sp, #12]
 3633 0106 1544     		add	r5, r5, r2
 3634              	.LVL503:
1006:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
 3635              		.loc 1 1006 0
 3636 0108 A368     		ldr	r3, [r4, #8]
 3637 010a 4B44     		add	r3, r3, r9
 3638 010c 5968     		ldr	r1, [r3, #4]
 3639              	.LBE49:
 996:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       u8_t apiflags = write_flags;
 3640              		.loc 1 996 0
 3641 010e 5346     		mov	r3, r10
 3642              	.LBB50:
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 120


1006:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
 3643              		.loc 1 1006 0
 3644 0110 8A42     		cmp	r2, r1
 3645 0112 DED0     		beq	.L349
 3646              	.LVL504:
 3647              	.L351:
 3648              	.LBE50:
 3649              	.LBB51:
1019:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return size;
 3650              		.loc 1 1019 0
 3651 0114 3046     		mov	r0, r6
 3652 0116 FFF7FEFF 		bl	err_to_errno
 3653              	.LVL505:
 3654 011a 3874     		strb	r0, [r7, #16]
 3655 011c 0028     		cmp	r0, #0
 3656 011e 92D0     		beq	.L343
1019:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return size;
 3657              		.loc 1 1019 0 is_stmt 0 discriminator 1
 3658 0120 4C4B     		ldr	r3, .L385+12
 3659 0122 1860     		str	r0, [r3]
 3660 0124 8FE7     		b	.L343
 3661              	.LVL506:
 3662              	.L350:
 3663              	.LBE51:
 3664              	.LBB52:
1010:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         err = ERR_OK;
 3665              		.loc 1 1010 0 is_stmt 1
 3666 0126 002D     		cmp	r5, #0
 3667 0128 D4BF     		ite	le
 3668 012a 0023     		movle	r3, #0
 3669 012c 0123     		movgt	r3, #1
 3670 012e 10F1070F 		cmn	r0, #7
 3671 0132 18BF     		it	ne
 3672 0134 0023     		movne	r3, #0
 3673 0136 0BB1     		cbz	r3, .L369
1011:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* let ERR_WOULDBLOCK persist on the netconn since we are returning ERR_OK */
 3674              		.loc 1 1011 0
 3675 0138 0026     		movs	r6, #0
 3676 013a EBE7     		b	.L351
 3677              	.L369:
1015:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         break;
 3678              		.loc 1 1015 0
 3679 013c 4FF0FF35 		mov	r5, #-1
 3680              	.LVL507:
 3681 0140 E8E7     		b	.L351
 3682              	.LVL508:
 3683              	.L378:
 3684              	.LBE52:
 3685              	.LBB53:
1032:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                IS_SOCK_ADDR_LEN_VALID(msg->msg_namelen)) ,
 3686              		.loc 1 1032 0 discriminator 2
 3687 0142 6368     		ldr	r3, [r4, #4]
 3688 0144 002B     		cmp	r3, #0
 3689 0146 A2D0     		beq	.L354
 3690 0148 9EE7     		b	.L353
 3691              	.L379:
1032:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                IS_SOCK_ADDR_LEN_VALID(msg->msg_namelen)) ,
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 121


 3692              		.loc 1 1032 0 is_stmt 0 discriminator 4
 3693 014a 3F4B     		ldr	r3, .L385
 3694 014c 40F20A42 		movw	r2, #1034
 3695 0150 4249     		ldr	r1, .L385+20
 3696 0152 3F48     		ldr	r0, .L385+8
 3697              	.LVL509:
 3698 0154 FFF7FEFF 		bl	printf
 3699              	.LVL510:
 3700              	.LBB42:
 3701 0158 6FF00F00 		mvn	r0, #15
 3702 015c FFF7FEFF 		bl	err_to_errno
 3703              	.LVL511:
 3704 0160 3874     		strb	r0, [r7, #16]
 3705 0162 0028     		cmp	r0, #0
 3706 0164 6AD0     		beq	.L370
1032:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                IS_SOCK_ADDR_LEN_VALID(msg->msg_namelen)) ,
 3707              		.loc 1 1032 0 discriminator 5
 3708 0166 3B4B     		ldr	r3, .L385+12
 3709 0168 1860     		str	r0, [r3]
 3710              	.LBE42:
 3711 016a 4FF0FF35 		mov	r5, #-1
 3712              	.LVL512:
 3713 016e 6AE7     		b	.L343
 3714              	.LVL513:
 3715              	.L380:
 3716              	.LBB43:
1039:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
 3717              		.loc 1 1039 0 is_stmt 1
 3718 0170 4FF0FF30 		mov	r0, #-1
 3719              	.LVL514:
 3720 0174 FFF7FEFF 		bl	err_to_errno
 3721              	.LVL515:
 3722 0178 3874     		strb	r0, [r7, #16]
 3723 017a 0028     		cmp	r0, #0
 3724 017c 61D0     		beq	.L371
1039:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
 3725              		.loc 1 1039 0 is_stmt 0 discriminator 1
 3726 017e 354B     		ldr	r3, .L385+12
 3727 0180 1860     		str	r0, [r3]
 3728              	.LBE43:
1040:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 3729              		.loc 1 1040 0 is_stmt 1 discriminator 1
 3730 0182 4FF0FF35 		mov	r5, #-1
 3731              	.LVL516:
 3732 0186 5EE7     		b	.L343
 3733              	.LVL517:
 3734              	.L382:
 3735              	.LBB44:
1080:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       p->len = p->tot_len = (u16_t)msg->msg_iov[i].iov_len;
 3736              		.loc 1 1080 0 discriminator 1
 3737 0188 2F4B     		ldr	r3, .L385
 3738 018a 4FF48762 		mov	r2, #1080
 3739 018e 3449     		ldr	r1, .L385+24
 3740 0190 2F48     		ldr	r0, .L385+8
 3741              	.LVL518:
 3742 0192 FFF7FEFF 		bl	printf
 3743              	.LVL519:
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 122


 3744 0196 1AE0     		b	.L358
 3745              	.L383:
1084:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* add pbuf to existing pbuf chain */
 3746              		.loc 1 1084 0
 3747 0198 C8F80450 		str	r5, [r8, #4]
 3748 019c C8F80050 		str	r5, [r8]
 3749              	.L360:
 3750              	.LBE44:
1073:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       struct pbuf *p = pbuf_alloc(PBUF_TRANSPORT, 0, PBUF_REF);
 3751              		.loc 1 1073 0 discriminator 2
 3752 01a0 0136     		adds	r6, r6, #1
 3753              	.LVL520:
 3754              	.L361:
1073:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       struct pbuf *p = pbuf_alloc(PBUF_TRANSPORT, 0, PBUF_REF);
 3755              		.loc 1 1073 0 is_stmt 0 discriminator 1
 3756 01a2 E368     		ldr	r3, [r4, #12]
 3757 01a4 B342     		cmp	r3, r6
 3758 01a6 1FDD     		ble	.L381
 3759              	.LBB45:
1074:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (p == NULL) {
 3760              		.loc 1 1074 0 is_stmt 1
 3761 01a8 0222     		movs	r2, #2
 3762 01aa 0021     		movs	r1, #0
 3763 01ac 0846     		mov	r0, r1
 3764 01ae FFF7FEFF 		bl	pbuf_alloc
 3765              	.LVL521:
1075:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         err = ERR_MEM; /* let netbuf_delete() cleanup chain_buf */
 3766              		.loc 1 1075 0
 3767 01b2 0546     		mov	r5, r0
 3768 01b4 70B3     		cbz	r0, .L372
1079:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_ASSERT("iov_len < u16_t", msg->msg_iov[i].iov_len <= 0xFFFF);
 3769              		.loc 1 1079 0
 3770 01b6 A368     		ldr	r3, [r4, #8]
 3771 01b8 4FEAC609 		lsl	r9, r6, #3
 3772 01bc 53F83630 		ldr	r3, [r3, r6, lsl #3]
 3773 01c0 4360     		str	r3, [r0, #4]
1080:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       p->len = p->tot_len = (u16_t)msg->msg_iov[i].iov_len;
 3774              		.loc 1 1080 0
 3775 01c2 A368     		ldr	r3, [r4, #8]
 3776 01c4 4B44     		add	r3, r3, r9
 3777 01c6 5B68     		ldr	r3, [r3, #4]
 3778 01c8 B3F5803F 		cmp	r3, #65536
 3779 01cc DCD2     		bcs	.L382
 3780              	.LVL522:
 3781              	.L358:
1081:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* netbuf empty, add new pbuf */
 3782              		.loc 1 1081 0
 3783 01ce A368     		ldr	r3, [r4, #8]
 3784 01d0 4B44     		add	r3, r3, r9
 3785 01d2 9B88     		ldrh	r3, [r3, #4]
 3786 01d4 2B81     		strh	r3, [r5, #8]	@ movhi
 3787 01d6 6B81     		strh	r3, [r5, #10]	@ movhi
1083:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         chain_buf->p = chain_buf->ptr = p;
 3788              		.loc 1 1083 0
 3789 01d8 D8F80000 		ldr	r0, [r8]
 3790 01dc 0028     		cmp	r0, #0
 3791 01de DBD0     		beq	.L383
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 123


1087:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 3792              		.loc 1 1087 0
 3793 01e0 2946     		mov	r1, r5
 3794 01e2 FFF7FEFF 		bl	pbuf_cat
 3795              	.LVL523:
 3796 01e6 DBE7     		b	.L360
 3797              	.LVL524:
 3798              	.L381:
 3799              	.LBE45:
 3800              	.LBE53:
 974:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 3801              		.loc 1 974 0
 3802 01e8 0024     		movs	r4, #0
 3803              	.LVL525:
 3804              	.L357:
 3805              	.LBB54:
1091:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       size = netbuf_len(chain_buf);
 3806              		.loc 1 1091 0
 3807 01ea B4B9     		cbnz	r4, .L373
1092:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 3808              		.loc 1 1092 0
 3809 01ec D8F80030 		ldr	r3, [r8]
 3810 01f0 1D89     		ldrh	r5, [r3, #8]
 3811              	.LVL526:
 3812              	.L363:
1096:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV4 && LWIP_IPV6
 3813              		.loc 1 1096 0
 3814 01f2 A4B1     		cbz	r4, .L384
 3815              	.L364:
1110:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 3816              		.loc 1 1110 0
 3817 01f4 4046     		mov	r0, r8
 3818 01f6 FFF7FEFF 		bl	netbuf_delete
 3819              	.LVL527:
 3820              	.LBB46:
1112:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return (err == ERR_OK ? size : -1);
 3821              		.loc 1 1112 0
 3822 01fa 2046     		mov	r0, r4
 3823 01fc FFF7FEFF 		bl	err_to_errno
 3824              	.LVL528:
 3825 0200 3874     		strb	r0, [r7, #16]
 3826 0202 08B1     		cbz	r0, .L365
1112:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return (err == ERR_OK ? size : -1);
 3827              		.loc 1 1112 0 is_stmt 0 discriminator 1
 3828 0204 134B     		ldr	r3, .L385+12
 3829 0206 1860     		str	r0, [r3]
 3830              	.L365:
 3831              	.LBE46:
1113:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 3832              		.loc 1 1113 0 is_stmt 1
 3833 0208 002C     		cmp	r4, #0
 3834 020a 3FF41CAF 		beq	.L343
 3835 020e 4FF0FF35 		mov	r5, #-1
 3836              	.LVL529:
 3837 0212 18E7     		b	.L343
 3838              	.LVL530:
 3839              	.L372:
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 124


 3840              	.LBB47:
1076:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         break;
 3841              		.loc 1 1076 0
 3842 0214 4FF0FF34 		mov	r4, #-1
 3843              	.LVL531:
 3844 0218 E7E7     		b	.L357
 3845              	.LVL532:
 3846              	.L373:
 3847              	.LBE47:
 3848              	.LBE54:
 973:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err = ERR_OK;
 3849              		.loc 1 973 0
 3850 021a 0025     		movs	r5, #0
 3851 021c E9E7     		b	.L363
 3852              	.LVL533:
 3853              	.L384:
 3854              	.LBB55:
1106:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 3855              		.loc 1 1106 0
 3856 021e 4146     		mov	r1, r8
 3857 0220 3868     		ldr	r0, [r7]
 3858 0222 FFF7FEFF 		bl	netconn_send
 3859              	.LVL534:
 3860 0226 0446     		mov	r4, r0
 3861              	.LVL535:
 3862 0228 E4E7     		b	.L364
 3863              	.LVL536:
 3864              	.L366:
 3865              	.LBE55:
 978:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 3866              		.loc 1 978 0
 3867 022a 4FF0FF35 		mov	r5, #-1
 3868              	.LVL537:
 3869 022e 0AE7     		b	.L343
 3870              	.LVL538:
 3871              	.L367:
 981:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              sock_set_errno(sock, err_to_errno(ERR_ARG)); return -1;);
 3872              		.loc 1 981 0
 3873 0230 4FF0FF35 		mov	r5, #-1
 3874              	.LVL539:
 3875 0234 07E7     		b	.L343
 3876              	.LVL540:
 3877              	.L368:
 987:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              sock_set_errno(sock, err_to_errno(ERR_ARG)); return -1;);
 3878              		.loc 1 987 0
 3879 0236 4FF0FF35 		mov	r5, #-1
 3880              	.LVL541:
 3881 023a 04E7     		b	.L343
 3882              	.LVL542:
 3883              	.L370:
 3884              	.LBB56:
1032:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                IS_SOCK_ADDR_LEN_VALID(msg->msg_namelen)) ,
 3885              		.loc 1 1032 0
 3886 023c 4FF0FF35 		mov	r5, #-1
 3887              	.LVL543:
 3888 0240 01E7     		b	.L343
 3889              	.LVL544:
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 125


 3890              	.L371:
1040:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 3891              		.loc 1 1040 0
 3892 0242 4FF0FF35 		mov	r5, #-1
 3893              	.LVL545:
 3894 0246 FEE6     		b	.L343
 3895              	.L386:
 3896              		.align	2
 3897              	.L385:
 3898 0248 00000000 		.word	.LC0
 3899 024c 20000000 		.word	.LC14
 3900 0250 3C000000 		.word	.LC2
 3901 0254 00000000 		.word	errno
 3902 0258 00000000 		.word	.LC13
 3903 025c 44000000 		.word	.LC15
 3904 0260 68000000 		.word	.LC16
 3905              	.LBE56:
 3906              		.cfi_endproc
 3907              	.LFE174:
 3909              		.section	.text.lwip_sendto,"ax",%progbits
 3910              		.align	1
 3911              		.global	lwip_sendto
 3912              		.syntax unified
 3913              		.thumb
 3914              		.thumb_func
 3915              		.fpu fpv5-sp-d16
 3917              	lwip_sendto:
 3918              	.LFB175:
1124:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 3919              		.loc 1 1124 0
 3920              		.cfi_startproc
 3921              		@ args = 8, pretend = 0, frame = 16
 3922              		@ frame_needed = 0, uses_anonymous_args = 0
 3923              	.LVL546:
 3924 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 3925              	.LCFI45:
 3926              		.cfi_def_cfa_offset 32
 3927              		.cfi_offset 4, -32
 3928              		.cfi_offset 5, -28
 3929              		.cfi_offset 6, -24
 3930              		.cfi_offset 7, -20
 3931              		.cfi_offset 8, -16
 3932              		.cfi_offset 9, -12
 3933              		.cfi_offset 10, -8
 3934              		.cfi_offset 14, -4
 3935 0004 84B0     		sub	sp, sp, #16
 3936              	.LCFI46:
 3937              		.cfi_def_cfa_offset 48
 3938 0006 8146     		mov	r9, r0
 3939 0008 8846     		mov	r8, r1
 3940 000a 1446     		mov	r4, r2
 3941 000c 9A46     		mov	r10, r3
 3942 000e 0C9D     		ldr	r5, [sp, #48]
 3943 0010 0D9F     		ldr	r7, [sp, #52]
1131:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 3944              		.loc 1 1131 0
 3945 0012 FFF7FEFF 		bl	get_socket
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 126


 3946              	.LVL547:
1132:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 3947              		.loc 1 1132 0
 3948 0016 0028     		cmp	r0, #0
 3949 0018 66D0     		beq	.L397
 3950 001a 0646     		mov	r6, r0
1136:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCP
 3951              		.loc 1 1136 0
 3952 001c 0368     		ldr	r3, [r0]
 3953 001e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3954 0020 03F0F003 		and	r3, r3, #240
 3955 0024 102B     		cmp	r3, #16
 3956 0026 23D0     		beq	.L401
1147:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   short_size = (u16_t)size;
 3957              		.loc 1 1147 0
 3958 0028 B4F5803F 		cmp	r4, #65536
 3959 002c 27D2     		bcs	.L402
 3960              	.LVL548:
 3961              	.L390:
1148:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ERROR("lwip_sendto: invalid address", (((to == NULL) && (tolen == 0)) ||
 3962              		.loc 1 1148 0
 3963 002e 1FFA84F9 		uxth	r9, r4
 3964              	.LVL549:
1149:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              (IS_SOCK_ADDR_LEN_VALID(tolen) &&
 3965              		.loc 1 1149 0
 3966 0032 3B1C     		adds	r3, r7, #0
 3967 0034 18BF     		it	ne
 3968 0036 0123     		movne	r3, #1
 3969 0038 002D     		cmp	r5, #0
 3970 003a 18BF     		it	ne
 3971 003c 0123     		movne	r3, #1
 3972 003e 4BB3     		cbz	r3, .L391
1149:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              (IS_SOCK_ADDR_LEN_VALID(tolen) &&
 3973              		.loc 1 1149 0 is_stmt 0 discriminator 1
 3974 0040 102F     		cmp	r7, #16
 3975 0042 02D1     		bne	.L392
1149:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              (IS_SOCK_ADDR_LEN_VALID(tolen) &&
 3976              		.loc 1 1149 0 discriminator 3
 3977 0044 6B78     		ldrb	r3, [r5, #1]	@ zero_extendqisi2
 3978 0046 022B     		cmp	r3, #2
 3979 0048 21D0     		beq	.L403
 3980              	.L392:
1149:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              (IS_SOCK_ADDR_LEN_VALID(tolen) &&
 3981              		.loc 1 1149 0 discriminator 6
 3982 004a 2C4B     		ldr	r3, .L405
 3983 004c 4FF49062 		mov	r2, #1152
 3984 0050 2B49     		ldr	r1, .L405+4
 3985 0052 2C48     		ldr	r0, .L405+8
 3986 0054 FFF7FEFF 		bl	printf
 3987              	.LVL550:
 3988              	.LBB57:
 3989 0058 6FF00F00 		mvn	r0, #15
 3990 005c FFF7FEFF 		bl	err_to_errno
 3991              	.LVL551:
 3992 0060 3074     		strb	r0, [r6, #16]
 3993 0062 0028     		cmp	r0, #0
 3994 0064 43D0     		beq	.L398
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 127


1149:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              (IS_SOCK_ADDR_LEN_VALID(tolen) &&
 3995              		.loc 1 1149 0 discriminator 7
 3996 0066 284B     		ldr	r3, .L405+12
 3997 0068 1860     		str	r0, [r3]
 3998              	.LBE57:
 3999 006a 4FF0FF30 		mov	r0, #-1
 4000              	.LVL552:
 4001 006e 2FE0     		b	.L387
 4002              	.LVL553:
 4003              	.L401:
1138:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_TCP */
 4004              		.loc 1 1138 0 is_stmt 1
 4005 0070 5346     		mov	r3, r10
 4006 0072 2246     		mov	r2, r4
 4007 0074 4146     		mov	r1, r8
 4008 0076 4846     		mov	r0, r9
 4009              	.LVL554:
 4010 0078 FFF7FEFF 		bl	lwip_send
 4011              	.LVL555:
 4012 007c 28E0     		b	.L387
 4013              	.LVL556:
 4014              	.L402:
1147:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   short_size = (u16_t)size;
 4015              		.loc 1 1147 0 discriminator 1
 4016 007e 1F4B     		ldr	r3, .L405
 4017 0080 40F27B42 		movw	r2, #1147
 4018 0084 2149     		ldr	r1, .L405+16
 4019 0086 1F48     		ldr	r0, .L405+8
 4020              	.LVL557:
 4021 0088 FFF7FEFF 		bl	printf
 4022              	.LVL558:
 4023 008c CFE7     		b	.L390
 4024              	.LVL559:
 4025              	.L403:
1149:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              (IS_SOCK_ADDR_LEN_VALID(tolen) &&
 4026              		.loc 1 1149 0 discriminator 5
 4027 008e 15F0030F 		tst	r5, #3
 4028 0092 DAD1     		bne	.L392
 4029              	.L391:
1156:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_CHECKSUM_ON_COPY
 4030              		.loc 1 1156 0
 4031 0094 0023     		movs	r3, #0
 4032 0096 0193     		str	r3, [sp, #4]
 4033 0098 0093     		str	r3, [sp]
1160:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SOCKADDR_TO_IPADDR_PORT(to, &buf.addr, remote_port);
 4034              		.loc 1 1160 0
 4035 009a E5B1     		cbz	r5, .L393
1161:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
 4036              		.loc 1 1161 0
 4037 009c 6B68     		ldr	r3, [r5, #4]
 4038 009e 0293     		str	r3, [sp, #8]
 4039 00a0 6888     		ldrh	r0, [r5, #2]
 4040 00a2 FFF7FEFF 		bl	lwip_htons
 4041              	.LVL560:
 4042              	.L394:
1166:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4043              		.loc 1 1166 0
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 128


 4044 00a6 ADF80C00 		strh	r0, [sp, #12]	@ movhi
1192:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_NETIF_TX_SINGLE_PBUF */
 4045              		.loc 1 1192 0
 4046 00aa 4A46     		mov	r2, r9
 4047 00ac 4146     		mov	r1, r8
 4048 00ae 6846     		mov	r0, sp
 4049              	.LVL561:
 4050 00b0 FFF7FEFF 		bl	netbuf_ref
 4051              	.LVL562:
1194:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV4 && LWIP_IPV6
 4052              		.loc 1 1194 0
 4053 00b4 0546     		mov	r5, r0
 4054 00b6 88B1     		cbz	r0, .L404
 4055              	.LVL563:
 4056              	.L395:
1208:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4057              		.loc 1 1208 0
 4058 00b8 6846     		mov	r0, sp
 4059 00ba FFF7FEFF 		bl	netbuf_free
 4060              	.LVL564:
 4061              	.LBB58:
1210:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return (err == ERR_OK ? short_size : -1);
 4062              		.loc 1 1210 0
 4063 00be 2846     		mov	r0, r5
 4064 00c0 FFF7FEFF 		bl	err_to_errno
 4065              	.LVL565:
 4066 00c4 3074     		strb	r0, [r6, #16]
 4067 00c6 08B1     		cbz	r0, .L396
1210:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return (err == ERR_OK ? short_size : -1);
 4068              		.loc 1 1210 0 is_stmt 0 discriminator 1
 4069 00c8 0F4B     		ldr	r3, .L405+12
 4070 00ca 1860     		str	r0, [r3]
 4071              	.L396:
 4072              	.LBE58:
1211:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 4073              		.loc 1 1211 0 is_stmt 1
 4074 00cc 95B9     		cbnz	r5, .L399
1211:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 4075              		.loc 1 1211 0 is_stmt 0 discriminator 1
 4076 00ce A0B2     		uxth	r0, r4
 4077              	.LVL566:
 4078              	.L387:
1212:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4079              		.loc 1 1212 0 is_stmt 1
 4080 00d0 04B0     		add	sp, sp, #16
 4081              	.LCFI47:
 4082              		.cfi_remember_state
 4083              		.cfi_def_cfa_offset 32
 4084              		@ sp needed
 4085 00d2 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 4086              	.LVL567:
 4087              	.L393:
 4088              	.LCFI48:
 4089              		.cfi_restore_state
1164:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 4090              		.loc 1 1164 0
 4091 00d6 0020     		movs	r0, #0
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 129


 4092 00d8 0290     		str	r0, [sp, #8]
 4093 00da E4E7     		b	.L394
 4094              	.LVL568:
 4095              	.L404:
1204:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 4096              		.loc 1 1204 0
 4097 00dc 6946     		mov	r1, sp
 4098 00de 3068     		ldr	r0, [r6]
 4099              	.LVL569:
 4100 00e0 FFF7FEFF 		bl	netconn_send
 4101              	.LVL570:
 4102 00e4 0546     		mov	r5, r0
 4103              	.LVL571:
 4104 00e6 E7E7     		b	.L395
 4105              	.LVL572:
 4106              	.L397:
1133:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 4107              		.loc 1 1133 0
 4108 00e8 4FF0FF30 		mov	r0, #-1
 4109              	.LVL573:
 4110 00ec F0E7     		b	.L387
 4111              	.LVL574:
 4112              	.L398:
1149:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              (IS_SOCK_ADDR_LEN_VALID(tolen) &&
 4113              		.loc 1 1149 0
 4114 00ee 4FF0FF30 		mov	r0, #-1
 4115              	.LVL575:
 4116 00f2 EDE7     		b	.L387
 4117              	.LVL576:
 4118              	.L399:
1211:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 4119              		.loc 1 1211 0
 4120 00f4 4FF0FF30 		mov	r0, #-1
 4121              	.LVL577:
 4122 00f8 EAE7     		b	.L387
 4123              	.L406:
 4124 00fa 00BF     		.align	2
 4125              	.L405:
 4126 00fc 00000000 		.word	.LC0
 4127 0100 24000000 		.word	.LC18
 4128 0104 3C000000 		.word	.LC2
 4129 0108 00000000 		.word	errno
 4130 010c 00000000 		.word	.LC17
 4131              		.cfi_endproc
 4132              	.LFE175:
 4134              		.section	.text.lwip_send,"ax",%progbits
 4135              		.align	1
 4136              		.global	lwip_send
 4137              		.syntax unified
 4138              		.thumb
 4139              		.thumb_func
 4140              		.fpu fpv5-sp-d16
 4142              	lwip_send:
 4143              	.LFB173:
 930:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 4144              		.loc 1 930 0
 4145              		.cfi_startproc
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 130


 4146              		@ args = 0, pretend = 0, frame = 8
 4147              		@ frame_needed = 0, uses_anonymous_args = 0
 4148              	.LVL578:
 4149 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 4150              	.LCFI49:
 4151              		.cfi_def_cfa_offset 24
 4152              		.cfi_offset 4, -24
 4153              		.cfi_offset 5, -20
 4154              		.cfi_offset 6, -16
 4155              		.cfi_offset 7, -12
 4156              		.cfi_offset 8, -8
 4157              		.cfi_offset 14, -4
 4158 0004 84B0     		sub	sp, sp, #16
 4159              	.LCFI50:
 4160              		.cfi_def_cfa_offset 40
 4161 0006 8046     		mov	r8, r0
 4162 0008 0E46     		mov	r6, r1
 4163 000a 1746     		mov	r7, r2
 4164 000c 1C46     		mov	r4, r3
 939:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 4165              		.loc 1 939 0
 4166 000e FFF7FEFF 		bl	get_socket
 4167              	.LVL579:
 940:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 4168              		.loc 1 940 0
 4169 0012 80B3     		cbz	r0, .L411
 4170 0014 0546     		mov	r5, r0
 944:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if (LWIP_UDP || LWIP_RAW)
 4171              		.loc 1 944 0
 4172 0016 0368     		ldr	r3, [r0]
 4173 0018 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4174 001a 03F0F003 		and	r3, r3, #240
 4175 001e 102B     		cmp	r3, #16
 4176 0020 0BD0     		beq	.L409
 946:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* (LWIP_UDP || LWIP_RAW) */
 4177              		.loc 1 946 0
 4178 0022 0023     		movs	r3, #0
 4179 0024 0193     		str	r3, [sp, #4]
 4180 0026 0093     		str	r3, [sp]
 4181 0028 2346     		mov	r3, r4
 4182 002a 3A46     		mov	r2, r7
 4183 002c 3146     		mov	r1, r6
 4184 002e 4046     		mov	r0, r8
 4185              	.LVL580:
 4186 0030 FFF7FEFF 		bl	lwip_sendto
 4187              	.LVL581:
 4188              	.L407:
 962:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4189              		.loc 1 962 0
 4190 0034 04B0     		add	sp, sp, #16
 4191              	.LCFI51:
 4192              		.cfi_remember_state
 4193              		.cfi_def_cfa_offset 24
 4194              		@ sp needed
 4195 0036 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 4196              	.LVL582:
 4197              	.L409:
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 131


 4198              	.LCFI52:
 4199              		.cfi_restore_state
 954:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ((flags & MSG_DONTWAIT) ? NETCONN_DONTBLOCK : 0);
 4200              		.loc 1 954 0
 4201 003a E310     		asrs	r3, r4, #3
 4202 003c 03F00203 		and	r3, r3, #2
 4203 0040 5BB2     		sxtb	r3, r3
 953:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ((flags & MSG_MORE)     ? NETCONN_MORE      : 0) |
 4204              		.loc 1 953 0
 4205 0042 43F00103 		orr	r3, r3, #1
 955:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   written = 0;
 4206              		.loc 1 955 0
 4207 0046 6410     		asrs	r4, r4, #1
 4208              	.LVL583:
 4209 0048 04F00404 		and	r4, r4, #4
 4210              	.LVL584:
 956:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = netconn_write_partly(sock->conn, data, size, write_flags, &written);
 4211              		.loc 1 956 0
 4212 004c 04AA     		add	r2, sp, #16
 4213 004e 0021     		movs	r1, #0
 4214 0050 42F8041D 		str	r1, [r2, #-4]!
 957:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4215              		.loc 1 957 0
 4216 0054 0068     		ldr	r0, [r0]
 4217              	.LVL585:
 4218 0056 0092     		str	r2, [sp]
 4219 0058 2343     		orrs	r3, r3, r4
 4220              	.LVL586:
 4221 005a 3A46     		mov	r2, r7
 4222 005c 3146     		mov	r1, r6
 4223 005e FFF7FEFF 		bl	netconn_write_partly
 4224              	.LVL587:
 4225 0062 0446     		mov	r4, r0
 4226              	.LVL588:
 4227              	.LBB59:
 960:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return (err == ERR_OK ? (int)written : -1);
 4228              		.loc 1 960 0
 4229 0064 FFF7FEFF 		bl	err_to_errno
 4230              	.LVL589:
 4231 0068 2874     		strb	r0, [r5, #16]
 4232 006a 08B1     		cbz	r0, .L410
 960:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return (err == ERR_OK ? (int)written : -1);
 4233              		.loc 1 960 0 is_stmt 0 discriminator 1
 4234 006c 054B     		ldr	r3, .L414
 4235 006e 1860     		str	r0, [r3]
 4236              	.L410:
 4237              	.LBE59:
 961:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 4238              		.loc 1 961 0 is_stmt 1
 4239 0070 24B9     		cbnz	r4, .L412
 961:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 4240              		.loc 1 961 0 is_stmt 0 discriminator 1
 4241 0072 0398     		ldr	r0, [sp, #12]
 4242              	.LVL590:
 4243 0074 DEE7     		b	.L407
 4244              	.LVL591:
 4245              	.L411:
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 132


 941:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 4246              		.loc 1 941 0 is_stmt 1
 4247 0076 4FF0FF30 		mov	r0, #-1
 4248              	.LVL592:
 4249 007a DBE7     		b	.L407
 4250              	.LVL593:
 4251              	.L412:
 961:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 4252              		.loc 1 961 0
 4253 007c 4FF0FF30 		mov	r0, #-1
 4254              	.LVL594:
 4255 0080 D8E7     		b	.L407
 4256              	.L415:
 4257 0082 00BF     		.align	2
 4258              	.L414:
 4259 0084 00000000 		.word	errno
 4260              		.cfi_endproc
 4261              	.LFE173:
 4263              		.section	.text.lwip_socket,"ax",%progbits
 4264              		.align	1
 4265              		.global	lwip_socket
 4266              		.syntax unified
 4267              		.thumb
 4268              		.thumb_func
 4269              		.fpu fpv5-sp-d16
 4271              	lwip_socket:
 4272              	.LFB176:
1216:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct netconn *conn;
 4273              		.loc 1 1216 0
 4274              		.cfi_startproc
 4275              		@ args = 0, pretend = 0, frame = 0
 4276              		@ frame_needed = 0, uses_anonymous_args = 0
 4277              	.LVL595:
 4278 0000 38B5     		push	{r3, r4, r5, lr}
 4279              	.LCFI53:
 4280              		.cfi_def_cfa_offset 16
 4281              		.cfi_offset 3, -16
 4282              		.cfi_offset 4, -12
 4283              		.cfi_offset 5, -8
 4284              		.cfi_offset 14, -4
 4285 0002 1346     		mov	r3, r2
1223:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case SOCK_RAW:
 4286              		.loc 1 1223 0
 4287 0004 0229     		cmp	r1, #2
 4288 0006 1BD0     		beq	.L418
 4289 0008 0329     		cmp	r1, #3
 4290 000a 07D0     		beq	.L419
 4291 000c 0129     		cmp	r1, #1
 4292 000e 22D0     		beq	.L429
1245:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 4293              		.loc 1 1245 0 discriminator 1
 4294 0010 1B4B     		ldr	r3, .L433
 4295 0012 1622     		movs	r2, #22
 4296              	.LVL596:
 4297 0014 1A60     		str	r2, [r3]
1246:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 4298              		.loc 1 1246 0 discriminator 1
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 133


 4299 0016 4FF0FF34 		mov	r4, #-1
 4300 001a 0FE0     		b	.L416
 4301              	.LVL597:
 4302              	.L419:
1225:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                                (u8_t)protocol, event_callback);
 4303              		.loc 1 1225 0
 4304 001c 194A     		ldr	r2, .L433+4
 4305              	.LVL598:
 4306 001e D9B2     		uxtb	r1, r3
 4307              	.LVL599:
 4308 0020 4020     		movs	r0, #64
 4309              	.LVL600:
 4310 0022 FFF7FEFF 		bl	netconn_new_with_proto_and_callback
 4311              	.LVL601:
 4312 0026 0546     		mov	r5, r0
 4313              	.LVL602:
 4314              	.L421:
1249:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("-1 / ENOBUFS (could not create netconn)\n"));
 4315              		.loc 1 1249 0
 4316 0028 E5B1     		cbz	r5, .L430
1255:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4317              		.loc 1 1255 0
 4318 002a 0021     		movs	r1, #0
 4319 002c 2846     		mov	r0, r5
 4320 002e FFF7FEFF 		bl	alloc_socket
 4321              	.LVL603:
 4322 0032 0446     		mov	r4, r0
 4323              	.LVL604:
1257:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     netconn_delete(conn);
 4324              		.loc 1 1257 0
 4325 0034 B0F1FF3F 		cmp	r0, #-1
 4326 0038 1AD0     		beq	.L431
1262:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("%d\n", i));
 4327              		.loc 1 1262 0
 4328 003a A861     		str	r0, [r5, #24]
 4329              	.LVL605:
 4330              	.L416:
1266:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4331              		.loc 1 1266 0
 4332 003c 2046     		mov	r0, r4
 4333 003e 38BD     		pop	{r3, r4, r5, pc}
 4334              	.LVL606:
 4335              	.L418:
1231:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                  ((protocol == IPPROTO_UDPLITE) ? NETCONN_UDPLITE : NETCONN_UDP)) ,
 4336              		.loc 1 1231 0
 4337 0040 882A     		cmp	r2, #136
 4338 0042 06D0     		beq	.L432
 4339 0044 2020     		movs	r0, #32
 4340              	.LVL607:
 4341              	.L422:
1231:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                  ((protocol == IPPROTO_UDPLITE) ? NETCONN_UDPLITE : NETCONN_UDP)) ,
 4342              		.loc 1 1231 0 is_stmt 0 discriminator 4
 4343 0046 0F4A     		ldr	r2, .L433+4
 4344              	.LVL608:
 4345 0048 0021     		movs	r1, #0
 4346              	.LVL609:
 4347 004a FFF7FEFF 		bl	netconn_new_with_proto_and_callback
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 134


 4348              	.LVL610:
 4349 004e 0546     		mov	r5, r0
 4350              	.LVL611:
1236:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case SOCK_STREAM:
 4351              		.loc 1 1236 0 is_stmt 1 discriminator 4
 4352 0050 EAE7     		b	.L421
 4353              	.LVL612:
 4354              	.L432:
1231:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                  ((protocol == IPPROTO_UDPLITE) ? NETCONN_UDPLITE : NETCONN_UDP)) ,
 4355              		.loc 1 1231 0
 4356 0052 2120     		movs	r0, #33
 4357              	.LVL613:
 4358 0054 F7E7     		b	.L422
 4359              	.LVL614:
 4360              	.L429:
1238:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_socket(%s, SOCK_STREAM, %d) = ",
 4361              		.loc 1 1238 0
 4362 0056 0B4A     		ldr	r2, .L433+4
 4363              	.LVL615:
 4364 0058 0021     		movs	r1, #0
 4365              	.LVL616:
 4366 005a 1020     		movs	r0, #16
 4367              	.LVL617:
 4368 005c FFF7FEFF 		bl	netconn_new_with_proto_and_callback
 4369              	.LVL618:
 4370 0060 0546     		mov	r5, r0
 4371              	.LVL619:
1241:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   default:
 4372              		.loc 1 1241 0
 4373 0062 E1E7     		b	.L421
 4374              	.L430:
1251:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 4375              		.loc 1 1251 0 discriminator 1
 4376 0064 064B     		ldr	r3, .L433
 4377 0066 6922     		movs	r2, #105
 4378 0068 1A60     		str	r2, [r3]
1252:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 4379              		.loc 1 1252 0 discriminator 1
 4380 006a 4FF0FF34 		mov	r4, #-1
 4381 006e E5E7     		b	.L416
 4382              	.LVL620:
 4383              	.L431:
1258:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     set_errno(ENFILE);
 4384              		.loc 1 1258 0
 4385 0070 2846     		mov	r0, r5
 4386              	.LVL621:
 4387 0072 FFF7FEFF 		bl	netconn_delete
 4388              	.LVL622:
1259:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 4389              		.loc 1 1259 0
 4390 0076 024B     		ldr	r3, .L433
 4391 0078 1722     		movs	r2, #23
 4392 007a 1A60     		str	r2, [r3]
1260:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 4393              		.loc 1 1260 0
 4394 007c DEE7     		b	.L416
 4395              	.L434:
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 135


 4396 007e 00BF     		.align	2
 4397              	.L433:
 4398 0080 00000000 		.word	errno
 4399 0084 00000000 		.word	event_callback
 4400              		.cfi_endproc
 4401              	.LFE176:
 4403              		.section	.text.lwip_write,"ax",%progbits
 4404              		.align	1
 4405              		.global	lwip_write
 4406              		.syntax unified
 4407              		.thumb
 4408              		.thumb_func
 4409              		.fpu fpv5-sp-d16
 4411              	lwip_write:
 4412              	.LFB177:
1270:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return lwip_send(s, data, size, 0);
 4413              		.loc 1 1270 0
 4414              		.cfi_startproc
 4415              		@ args = 0, pretend = 0, frame = 0
 4416              		@ frame_needed = 0, uses_anonymous_args = 0
 4417              	.LVL623:
 4418 0000 08B5     		push	{r3, lr}
 4419              	.LCFI54:
 4420              		.cfi_def_cfa_offset 8
 4421              		.cfi_offset 3, -8
 4422              		.cfi_offset 14, -4
1271:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 4423              		.loc 1 1271 0
 4424 0002 0023     		movs	r3, #0
 4425 0004 FFF7FEFF 		bl	lwip_send
 4426              	.LVL624:
1272:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4427              		.loc 1 1272 0
 4428 0008 08BD     		pop	{r3, pc}
 4429              		.cfi_endproc
 4430              	.LFE177:
 4432              		.section	.text.lwip_writev,"ax",%progbits
 4433              		.align	1
 4434              		.global	lwip_writev
 4435              		.syntax unified
 4436              		.thumb
 4437              		.thumb_func
 4438              		.fpu fpv5-sp-d16
 4440              	lwip_writev:
 4441              	.LFB178:
1276:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct msghdr msg;
 4442              		.loc 1 1276 0
 4443              		.cfi_startproc
 4444              		@ args = 0, pretend = 0, frame = 32
 4445              		@ frame_needed = 0, uses_anonymous_args = 0
 4446              	.LVL625:
 4447 0000 00B5     		push	{lr}
 4448              	.LCFI55:
 4449              		.cfi_def_cfa_offset 4
 4450              		.cfi_offset 14, -4
 4451 0002 89B0     		sub	sp, sp, #36
 4452              	.LCFI56:
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 136


 4453              		.cfi_def_cfa_offset 40
1279:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_namelen = 0;
 4454              		.loc 1 1279 0
 4455 0004 0023     		movs	r3, #0
 4456 0006 0193     		str	r3, [sp, #4]
1280:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Hack: we have to cast via number to cast from 'const' pointer to non-const.
 4457              		.loc 1 1280 0
 4458 0008 0293     		str	r3, [sp, #8]
1283:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_iovlen = iovcnt;
 4459              		.loc 1 1283 0
 4460 000a 0391     		str	r1, [sp, #12]
1284:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_control = NULL;
 4461              		.loc 1 1284 0
 4462 000c 0492     		str	r2, [sp, #16]
1285:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_controllen = 0;
 4463              		.loc 1 1285 0
 4464 000e 0593     		str	r3, [sp, #20]
1286:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_flags = 0;
 4465              		.loc 1 1286 0
 4466 0010 0693     		str	r3, [sp, #24]
1287:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return lwip_sendmsg(s, &msg, 0);
 4467              		.loc 1 1287 0
 4468 0012 0793     		str	r3, [sp, #28]
1288:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 4469              		.loc 1 1288 0
 4470 0014 1A46     		mov	r2, r3
 4471              	.LVL626:
 4472 0016 01A9     		add	r1, sp, #4
 4473              	.LVL627:
 4474 0018 FFF7FEFF 		bl	lwip_sendmsg
 4475              	.LVL628:
1289:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4476              		.loc 1 1289 0
 4477 001c 09B0     		add	sp, sp, #36
 4478              	.LCFI57:
 4479              		.cfi_def_cfa_offset 4
 4480              		@ sp needed
 4481 001e 5DF804FB 		ldr	pc, [sp], #4
 4482              		.cfi_endproc
 4483              	.LFE178:
 4485              		.section	.text.lwip_select,"ax",%progbits
 4486              		.align	1
 4487              		.global	lwip_select
 4488              		.syntax unified
 4489              		.thumb
 4490              		.thumb_func
 4491              		.fpu fpv5-sp-d16
 4493              	lwip_select:
 4494              	.LFB180:
1373:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u32_t waitres = 0;
 4495              		.loc 1 1373 0
 4496              		.cfi_startproc
 4497              		@ args = 4, pretend = 0, frame = 64
 4498              		@ frame_needed = 0, uses_anonymous_args = 0
 4499              	.LVL629:
 4500 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 4501              	.LCFI58:
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 137


 4502              		.cfi_def_cfa_offset 36
 4503              		.cfi_offset 4, -36
 4504              		.cfi_offset 5, -32
 4505              		.cfi_offset 6, -28
 4506              		.cfi_offset 7, -24
 4507              		.cfi_offset 8, -20
 4508              		.cfi_offset 9, -16
 4509              		.cfi_offset 10, -12
 4510              		.cfi_offset 11, -8
 4511              		.cfi_offset 14, -4
 4512 0004 95B0     		sub	sp, sp, #84
 4513              	.LCFI59:
 4514              		.cfi_def_cfa_offset 120
 4515 0006 8146     		mov	r9, r0
 4516 0008 0E46     		mov	r6, r1
 4517 000a 1746     		mov	r7, r2
 4518 000c 9846     		mov	r8, r3
 4519 000e 1E9D     		ldr	r5, [sp, #120]
 4520              	.LVL630:
1393:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4521              		.loc 1 1393 0
 4522 0010 0EAC     		add	r4, sp, #56
 4523 0012 0294     		str	r4, [sp, #8]
 4524 0014 10AC     		add	r4, sp, #64
 4525 0016 0194     		str	r4, [sp, #4]
 4526 0018 12AC     		add	r4, sp, #72
 4527 001a 0094     		str	r4, [sp]
 4528 001c FFF7FEFF 		bl	lwip_selscan
 4529              	.LVL631:
1396:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (timeout && timeout->tv_sec == 0 && timeout->tv_usec == 0) {
 4530              		.loc 1 1396 0
 4531 0020 8346     		mov	fp, r0
 4532 0022 0028     		cmp	r0, #0
 4533 0024 40F00681 		bne	.L440
1397:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_select: no timeout, returning 0\n"));
 4534              		.loc 1 1397 0
 4535 0028 3DB1     		cbz	r5, .L441
1397:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_select: no timeout, returning 0\n"));
 4536              		.loc 1 1397 0 is_stmt 0 discriminator 1
 4537 002a D5E90023 		ldrd	r2, [r5]
 4538 002e 1343     		orrs	r3, r2, r3
 4539 0030 03D1     		bne	.L441
1397:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_select: no timeout, returning 0\n"));
 4540              		.loc 1 1397 0 discriminator 2
 4541 0032 AB68     		ldr	r3, [r5, #8]
 4542 0034 002B     		cmp	r3, #0
 4543 0036 00F0FD80 		beq	.L440
 4544              	.L441:
1409:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb.prev = NULL;
 4545              		.loc 1 1409 0 is_stmt 1
 4546 003a 0021     		movs	r1, #0
 4547 003c 0791     		str	r1, [sp, #28]
1410:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb.readset = readset;
 4548              		.loc 1 1410 0
 4549 003e 0891     		str	r1, [sp, #32]
1411:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb.writeset = writeset;
 4550              		.loc 1 1411 0
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 138


 4551 0040 0996     		str	r6, [sp, #36]
1412:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb.exceptset = exceptset;
 4552              		.loc 1 1412 0
 4553 0042 0A97     		str	r7, [sp, #40]
1413:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb.sem_signalled = 0;
 4554              		.loc 1 1413 0
 4555 0044 CDF82C80 		str	r8, [sp, #44]
1414:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETCONN_SEM_PER_THREAD
 4556              		.loc 1 1414 0
 4557 0048 0C91     		str	r1, [sp, #48]
1418:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* failed to create semaphore */
 4558              		.loc 1 1418 0
 4559 004a 0DA8     		add	r0, sp, #52
 4560              	.LVL632:
 4561 004c FFF7FEFF 		bl	sys_sem_new
 4562              	.LVL633:
 4563 0050 90B9     		cbnz	r0, .L476
1426:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4564              		.loc 1 1426 0
 4565 0052 FFF7FEFF 		bl	sys_arch_protect
 4566              	.LVL634:
1429:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (select_cb_list != NULL) {
 4567              		.loc 1 1429 0
 4568 0056 984B     		ldr	r3, .L485
 4569 0058 1B68     		ldr	r3, [r3]
 4570 005a 0793     		str	r3, [sp, #28]
1430:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       select_cb_list->prev = &select_cb;
 4571              		.loc 1 1430 0
 4572 005c 0BB1     		cbz	r3, .L444
1431:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 4573              		.loc 1 1431 0
 4574 005e 07AA     		add	r2, sp, #28
 4575 0060 5A60     		str	r2, [r3, #4]
 4576              	.L444:
1433:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Increasing this counter tells event_callback that the list has changed. */
 4577              		.loc 1 1433 0
 4578 0062 954B     		ldr	r3, .L485
 4579 0064 07AA     		add	r2, sp, #28
 4580 0066 1A60     		str	r2, [r3]
1435:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4581              		.loc 1 1435 0
 4582 0068 944A     		ldr	r2, .L485+4
 4583 006a 1368     		ldr	r3, [r2]
 4584 006c 0133     		adds	r3, r3, #1
 4585 006e 1360     		str	r3, [r2]
1438:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4586              		.loc 1 1438 0
 4587 0070 FFF7FEFF 		bl	sys_arch_unprotect
 4588              	.LVL635:
1442:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((readset && FD_ISSET(i, readset)) ||
 4589              		.loc 1 1442 0
 4590 0074 5C46     		mov	r4, fp
 4591 0076 15E0     		b	.L445
 4592              	.LVL636:
 4593              	.L476:
1420:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
 4594              		.loc 1 1420 0 discriminator 1
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 139


 4595 0078 914B     		ldr	r3, .L485+8
 4596 007a 0C22     		movs	r2, #12
 4597 007c 1A60     		str	r2, [r3]
1421:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 4598              		.loc 1 1421 0 discriminator 1
 4599 007e 4FF0FF3B 		mov	fp, #-1
 4600              	.LVL637:
 4601 0082 EBE0     		b	.L439
 4602              	.LVL638:
 4603              	.L447:
 4604              	.LBB60:
1447:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock = tryget_socket(i);
 4605              		.loc 1 1447 0
 4606 0084 FFF7FEFF 		bl	sys_arch_protect
 4607              	.LVL639:
 4608 0088 8246     		mov	r10, r0
 4609              	.LVL640:
1448:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (sock != NULL) {
 4610              		.loc 1 1448 0
 4611 008a 2046     		mov	r0, r4
 4612              	.LVL641:
 4613 008c FFF7FEFF 		bl	tryget_socket
 4614              	.LVL642:
1449:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           sock->select_waiting++;
 4615              		.loc 1 1449 0
 4616 0090 98B3     		cbz	r0, .L450
1450:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_ASSERT("sock->select_waiting > 0", sock->select_waiting > 0);
 4617              		.loc 1 1450 0
 4618 0092 437C     		ldrb	r3, [r0, #17]	@ zero_extendqisi2
 4619 0094 0133     		adds	r3, r3, #1
 4620 0096 DBB2     		uxtb	r3, r3
 4621 0098 4374     		strb	r3, [r0, #17]
1451:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
 4622              		.loc 1 1451 0
 4623 009a 33B3     		cbz	r3, .L477
 4624              	.LVL643:
 4625              	.L451:
1459:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 4626              		.loc 1 1459 0
 4627 009c 5046     		mov	r0, r10
 4628 009e FFF7FEFF 		bl	sys_arch_unprotect
 4629              	.LVL644:
 4630              	.L449:
 4631              	.LBE60:
1442:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((readset && FD_ISSET(i, readset)) ||
 4632              		.loc 1 1442 0 discriminator 2
 4633 00a2 0134     		adds	r4, r4, #1
 4634              	.LVL645:
 4635              	.L445:
1442:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((readset && FD_ISSET(i, readset)) ||
 4636              		.loc 1 1442 0 is_stmt 0 discriminator 1
 4637 00a4 4C45     		cmp	r4, r9
 4638 00a6 33DA     		bge	.L478
1443:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (writeset && FD_ISSET(i, writeset)) ||
 4639              		.loc 1 1443 0 is_stmt 1
 4640 00a8 46B1     		cbz	r6, .L446
1443:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (writeset && FD_ISSET(i, writeset)) ||
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 140


 4641              		.loc 1 1443 0 is_stmt 0 discriminator 1
 4642 00aa 6309     		lsrs	r3, r4, #5
 4643 00ac 56F82320 		ldr	r2, [r6, r3, lsl #2]
 4644 00b0 04F01F01 		and	r1, r4, #31
 4645 00b4 0123     		movs	r3, #1
 4646 00b6 8B40     		lsls	r3, r3, r1
 4647 00b8 1A42     		tst	r2, r3
 4648 00ba E3D1     		bne	.L447
 4649              	.L446:
1443:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (writeset && FD_ISSET(i, writeset)) ||
 4650              		.loc 1 1443 0 discriminator 3
 4651 00bc 47B1     		cbz	r7, .L448
1444:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (exceptset && FD_ISSET(i, exceptset))) {
 4652              		.loc 1 1444 0 is_stmt 1
 4653 00be 6309     		lsrs	r3, r4, #5
 4654 00c0 57F82320 		ldr	r2, [r7, r3, lsl #2]
 4655 00c4 04F01F01 		and	r1, r4, #31
 4656 00c8 0123     		movs	r3, #1
 4657 00ca 8B40     		lsls	r3, r3, r1
 4658 00cc 1A42     		tst	r2, r3
 4659 00ce D9D1     		bne	.L447
 4660              	.L448:
1444:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (exceptset && FD_ISSET(i, exceptset))) {
 4661              		.loc 1 1444 0 is_stmt 0 discriminator 1
 4662 00d0 B8F1000F 		cmp	r8, #0
 4663 00d4 E5D0     		beq	.L449
1445:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         struct lwip_sock *sock;
 4664              		.loc 1 1445 0 is_stmt 1
 4665 00d6 6309     		lsrs	r3, r4, #5
 4666 00d8 58F82320 		ldr	r2, [r8, r3, lsl #2]
 4667 00dc 04F01F01 		and	r1, r4, #31
 4668 00e0 0123     		movs	r3, #1
 4669 00e2 8B40     		lsls	r3, r3, r1
 4670 00e4 1A42     		tst	r2, r3
 4671 00e6 DCD0     		beq	.L449
 4672 00e8 CCE7     		b	.L447
 4673              	.LVL646:
 4674              	.L477:
 4675              	.LBB61:
1451:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
 4676              		.loc 1 1451 0 discriminator 1
 4677 00ea 764B     		ldr	r3, .L485+12
 4678 00ec 40F2AB52 		movw	r2, #1451
 4679 00f0 7549     		ldr	r1, .L485+16
 4680 00f2 7648     		ldr	r0, .L485+20
 4681              	.LVL647:
 4682 00f4 FFF7FEFF 		bl	printf
 4683              	.LVL648:
 4684 00f8 D0E7     		b	.L451
 4685              	.LVL649:
 4686              	.L450:
1456:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
 4687              		.loc 1 1456 0
 4688 00fa 5046     		mov	r0, r10
 4689              	.LVL650:
 4690 00fc FFF7FEFF 		bl	sys_arch_unprotect
 4691              	.LVL651:
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 141


1454:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           maxfdp2 = i;
 4692              		.loc 1 1454 0
 4693 0100 4FF0FF3A 		mov	r10, #-1
 4694              	.LVL652:
 4695              	.LBE61:
1374:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int nready;
 4696              		.loc 1 1374 0
 4697 0104 0023     		movs	r3, #0
 4698 0106 0593     		str	r3, [sp, #20]
 4699              	.LVL653:
 4700              	.L452:
1488:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((readset && FD_ISSET(i, readset)) ||
 4701              		.loc 1 1488 0
 4702 0108 5D46     		mov	r5, fp
 4703 010a D346     		mov	fp, r10
 4704 010c CA46     		mov	r10, r9
 4705              	.LVL654:
 4706 010e 3FE0     		b	.L455
 4707              	.LVL655:
 4708              	.L478:
1466:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (!nready) {
 4709              		.loc 1 1466 0
 4710 0110 0EAB     		add	r3, sp, #56
 4711 0112 0293     		str	r3, [sp, #8]
 4712 0114 10AB     		add	r3, sp, #64
 4713 0116 0193     		str	r3, [sp, #4]
 4714 0118 12AB     		add	r3, sp, #72
 4715 011a 0093     		str	r3, [sp]
 4716 011c 4346     		mov	r3, r8
 4717 011e 3A46     		mov	r2, r7
 4718 0120 3146     		mov	r1, r6
 4719 0122 4846     		mov	r0, r9
 4720 0124 FFF7FEFF 		bl	lwip_selscan
 4721              	.LVL656:
1467:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* Still none ready, just wait to be woken */
 4722              		.loc 1 1467 0
 4723 0128 8246     		mov	r10, r0
 4724 012a C8B9     		cbnz	r0, .L471
1469:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           /* Wait forever */
 4725              		.loc 1 1469 0
 4726 012c A5B1     		cbz	r5, .L472
1473:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (msectimeout == 0) {
 4727              		.loc 1 1473 0
 4728 012e 2968     		ldr	r1, [r5]
 4729 0130 AB68     		ldr	r3, [r5, #8]
 4730 0132 03F5FA73 		add	r3, r3, #500
 4731 0136 664A     		ldr	r2, .L485+24
 4732 0138 82FB0302 		smull	r0, r2, r2, r3
 4733              	.LVL657:
 4734 013c DB17     		asrs	r3, r3, #31
 4735 013e C3EBA213 		rsb	r3, r3, r2, asr #6
 4736 0142 4FF47A72 		mov	r2, #1000
 4737 0146 02FB0131 		mla	r1, r2, r1, r3
 4738              	.LVL658:
1474:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             /* Wait 1ms at least (0 means wait forever) */
 4739              		.loc 1 1474 0
 4740 014a 39B1     		cbz	r1, .L473
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 142


 4741              	.LVL659:
 4742              	.L454:
1480:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETCONN_SEM_PER_THREAD
 4743              		.loc 1 1480 0
 4744 014c 0DA8     		add	r0, sp, #52
 4745 014e FFF7FEFF 		bl	sys_arch_sem_wait
 4746              	.LVL660:
 4747 0152 0590     		str	r0, [sp, #20]
 4748              	.LVL661:
1441:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     for (i = LWIP_SOCKET_OFFSET; i < maxfdp1; i++) {
 4749              		.loc 1 1441 0
 4750 0154 4C46     		mov	r4, r9
 4751              	.LVL662:
 4752 0156 D7E7     		b	.L452
 4753              	.LVL663:
 4754              	.L472:
1471:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
 4755              		.loc 1 1471 0
 4756 0158 0021     		movs	r1, #0
 4757 015a F7E7     		b	.L454
 4758              	.LVL664:
 4759              	.L473:
1476:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
 4760              		.loc 1 1476 0
 4761 015c 0121     		movs	r1, #1
 4762              	.LVL665:
 4763 015e F5E7     		b	.L454
 4764              	.LVL666:
 4765              	.L471:
1441:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     for (i = LWIP_SOCKET_OFFSET; i < maxfdp1; i++) {
 4766              		.loc 1 1441 0
 4767 0160 4C46     		mov	r4, r9
 4768              	.LVL667:
1374:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int nready;
 4769              		.loc 1 1374 0
 4770 0162 0023     		movs	r3, #0
 4771 0164 0593     		str	r3, [sp, #20]
 4772 0166 CFE7     		b	.L452
 4773              	.LVL668:
 4774              	.L457:
 4775              	.LBB62:
1493:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock = tryget_socket(i);
 4776              		.loc 1 1493 0
 4777 0168 FFF7FEFF 		bl	sys_arch_protect
 4778              	.LVL669:
 4779 016c 0490     		str	r0, [sp, #16]
 4780              	.LVL670:
1494:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (sock != NULL) {
 4781              		.loc 1 1494 0
 4782 016e 2846     		mov	r0, r5
 4783              	.LVL671:
 4784 0170 FFF7FEFF 		bl	tryget_socket
 4785              	.LVL672:
1495:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           /* for now, handle select_waiting==0... */
 4786              		.loc 1 1495 0
 4787 0174 8146     		mov	r9, r0
 4788 0176 B0B3     		cbz	r0, .L474
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 143


1497:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (sock->select_waiting > 0) {
 4789              		.loc 1 1497 0
 4790 0178 437C     		ldrb	r3, [r0, #17]	@ zero_extendqisi2
 4791 017a 63B3     		cbz	r3, .L479
 4792              	.LVL673:
 4793              	.L461:
1498:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             sock->select_waiting--;
 4794              		.loc 1 1498 0
 4795 017c 99F81130 		ldrb	r3, [r9, #17]	@ zero_extendqisi2
 4796 0180 13B1     		cbz	r3, .L460
1499:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
 4797              		.loc 1 1499 0
 4798 0182 013B     		subs	r3, r3, #1
 4799 0184 89F81130 		strb	r3, [r9, #17]
 4800              	.LVL674:
 4801              	.L460:
1505:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 4802              		.loc 1 1505 0
 4803 0188 0498     		ldr	r0, [sp, #16]
 4804 018a FFF7FEFF 		bl	sys_arch_unprotect
 4805              	.LVL675:
 4806              	.L459:
 4807              	.LBE62:
1488:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((readset && FD_ISSET(i, readset)) ||
 4808              		.loc 1 1488 0 discriminator 2
 4809 018e 0135     		adds	r5, r5, #1
 4810              	.LVL676:
 4811              	.L455:
1488:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((readset && FD_ISSET(i, readset)) ||
 4812              		.loc 1 1488 0 is_stmt 0 discriminator 1
 4813 0190 A542     		cmp	r5, r4
 4814 0192 2BDA     		bge	.L480
1489:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (writeset && FD_ISSET(i, writeset)) ||
 4815              		.loc 1 1489 0 is_stmt 1
 4816 0194 46B1     		cbz	r6, .L456
1489:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (writeset && FD_ISSET(i, writeset)) ||
 4817              		.loc 1 1489 0 is_stmt 0 discriminator 1
 4818 0196 6B09     		lsrs	r3, r5, #5
 4819 0198 56F82320 		ldr	r2, [r6, r3, lsl #2]
 4820 019c 05F01F01 		and	r1, r5, #31
 4821 01a0 0123     		movs	r3, #1
 4822 01a2 8B40     		lsls	r3, r3, r1
 4823 01a4 1A42     		tst	r2, r3
 4824 01a6 DFD1     		bne	.L457
 4825              	.L456:
1489:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (writeset && FD_ISSET(i, writeset)) ||
 4826              		.loc 1 1489 0 discriminator 3
 4827 01a8 47B1     		cbz	r7, .L458
1490:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (exceptset && FD_ISSET(i, exceptset))) {
 4828              		.loc 1 1490 0 is_stmt 1
 4829 01aa 6B09     		lsrs	r3, r5, #5
 4830 01ac 57F82320 		ldr	r2, [r7, r3, lsl #2]
 4831 01b0 05F01F01 		and	r1, r5, #31
 4832 01b4 0123     		movs	r3, #1
 4833 01b6 8B40     		lsls	r3, r3, r1
 4834 01b8 1A42     		tst	r2, r3
 4835 01ba D5D1     		bne	.L457
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 144


 4836              	.L458:
1490:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (exceptset && FD_ISSET(i, exceptset))) {
 4837              		.loc 1 1490 0 is_stmt 0 discriminator 1
 4838 01bc B8F1000F 		cmp	r8, #0
 4839 01c0 E5D0     		beq	.L459
1491:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         struct lwip_sock *sock;
 4840              		.loc 1 1491 0 is_stmt 1
 4841 01c2 6B09     		lsrs	r3, r5, #5
 4842 01c4 58F82320 		ldr	r2, [r8, r3, lsl #2]
 4843 01c8 05F01F01 		and	r1, r5, #31
 4844 01cc 0123     		movs	r3, #1
 4845 01ce 8B40     		lsls	r3, r3, r1
 4846 01d0 1A42     		tst	r2, r3
 4847 01d2 DCD0     		beq	.L459
 4848 01d4 C8E7     		b	.L457
 4849              	.LVL677:
 4850              	.L479:
 4851              	.LBB63:
1497:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (sock->select_waiting > 0) {
 4852              		.loc 1 1497 0 discriminator 1
 4853 01d6 3B4B     		ldr	r3, .L485+12
 4854 01d8 40F2D952 		movw	r2, #1497
 4855 01dc 3A49     		ldr	r1, .L485+16
 4856 01de 3B48     		ldr	r0, .L485+20
 4857              	.LVL678:
 4858 01e0 FFF7FEFF 		bl	printf
 4859              	.LVL679:
 4860 01e4 CAE7     		b	.L461
 4861              	.LVL680:
 4862              	.L474:
1503:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 4863              		.loc 1 1503 0
 4864 01e6 4FF0FF3B 		mov	fp, #-1
 4865              	.LVL681:
 4866 01ea CDE7     		b	.L460
 4867              	.LVL682:
 4868              	.L480:
 4869 01ec D146     		mov	r9, r10
 4870              	.LBE63:
1509:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (select_cb.next != NULL) {
 4871              		.loc 1 1509 0
 4872 01ee FFF7FEFF 		bl	sys_arch_protect
 4873              	.LVL683:
 4874 01f2 0446     		mov	r4, r0
 4875              	.LVL684:
1510:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       select_cb.next->prev = select_cb.prev;
 4876              		.loc 1 1510 0
 4877 01f4 079B     		ldr	r3, [sp, #28]
 4878 01f6 0BB1     		cbz	r3, .L463
 4879              	.LVL685:
1511:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 4880              		.loc 1 1511 0
 4881 01f8 089A     		ldr	r2, [sp, #32]
 4882 01fa 5A60     		str	r2, [r3, #4]
 4883              	.L463:
1513:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_ASSERT("select_cb.prev == NULL", select_cb.prev == NULL);
 4884              		.loc 1 1513 0
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 145


 4885 01fc 2E4B     		ldr	r3, .L485
 4886 01fe 1A68     		ldr	r2, [r3]
 4887 0200 07AB     		add	r3, sp, #28
 4888 0202 9A42     		cmp	r2, r3
 4889 0204 2ED0     		beq	.L481
1517:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       select_cb.prev->next = select_cb.next;
 4890              		.loc 1 1517 0
 4891 0206 089B     		ldr	r3, [sp, #32]
 4892 0208 002B     		cmp	r3, #0
 4893 020a 38D0     		beq	.L482
 4894              	.LVL686:
 4895              	.L467:
1518:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 4896              		.loc 1 1518 0
 4897 020c 089B     		ldr	r3, [sp, #32]
 4898 020e 079A     		ldr	r2, [sp, #28]
 4899 0210 1A60     		str	r2, [r3]
 4900              	.L466:
1521:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SYS_ARCH_UNPROTECT(lev);
 4901              		.loc 1 1521 0
 4902 0212 2A4A     		ldr	r2, .L485+4
 4903 0214 1368     		ldr	r3, [r2]
 4904 0216 0133     		adds	r3, r3, #1
 4905 0218 1360     		str	r3, [r2]
1522:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4906              		.loc 1 1522 0
 4907 021a 2046     		mov	r0, r4
 4908 021c FFF7FEFF 		bl	sys_arch_unprotect
 4909              	.LVL687:
1530:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_NETCONN_SEM_PER_THREAD */
 4910              		.loc 1 1530 0
 4911 0220 0DA8     		add	r0, sp, #52
 4912 0222 FFF7FEFF 		bl	sys_sem_free
 4913              	.LVL688:
1533:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* This happens when a socket got closed while waiting */
 4914              		.loc 1 1533 0
 4915 0226 BBF1000F 		cmp	fp, #0
 4916 022a 30DB     		blt	.L483
1539:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* Timeout */
 4917              		.loc 1 1539 0
 4918 022c 059B     		ldr	r3, [sp, #20]
 4919 022e B3F1FF3F 		cmp	r3, #-1
 4920 0232 32D1     		bne	.L484
 4921              	.LVL689:
 4922              	.L440:
1554:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     *readset = lreadset;
 4923              		.loc 1 1554 0
 4924 0234 26B1     		cbz	r6, .L469
1555:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 4925              		.loc 1 1555 0
 4926 0236 14AB     		add	r3, sp, #80
 4927 0238 13E90300 		ldmdb	r3, {r0, r1}
 4928 023c 86E80300 		stm	r6, {r0, r1}
 4929              	.L469:
1557:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     *writeset = lwriteset;
 4930              		.loc 1 1557 0
 4931 0240 27B1     		cbz	r7, .L470
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 146


1558:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 4932              		.loc 1 1558 0
 4933 0242 10AB     		add	r3, sp, #64
 4934 0244 93E80300 		ldm	r3, {r0, r1}
 4935 0248 87E80300 		stm	r7, {r0, r1}
 4936              	.L470:
1560:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     *exceptset = lexceptset;
 4937              		.loc 1 1560 0
 4938 024c B8F1000F 		cmp	r8, #0
 4939 0250 04D0     		beq	.L439
1561:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 4940              		.loc 1 1561 0
 4941 0252 0EAB     		add	r3, sp, #56
 4942 0254 93E80300 		ldm	r3, {r0, r1}
 4943 0258 88E80300 		stm	r8, {r0, r1}
 4944              	.LVL690:
 4945              	.L439:
1564:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4946              		.loc 1 1564 0
 4947 025c 5846     		mov	r0, fp
 4948 025e 15B0     		add	sp, sp, #84
 4949              	.LCFI60:
 4950              		.cfi_remember_state
 4951              		.cfi_def_cfa_offset 36
 4952              		@ sp needed
 4953 0260 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 4954              	.LVL691:
 4955              	.L481:
 4956              	.LCFI61:
 4957              		.cfi_restore_state
1514:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       select_cb_list = select_cb.next;
 4958              		.loc 1 1514 0
 4959 0264 089B     		ldr	r3, [sp, #32]
 4960 0266 33B1     		cbz	r3, .L465
1514:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       select_cb_list = select_cb.next;
 4961              		.loc 1 1514 0 is_stmt 0 discriminator 1
 4962 0268 164B     		ldr	r3, .L485+12
 4963 026a 40F2EA52 		movw	r2, #1514
 4964 026e 1949     		ldr	r1, .L485+28
 4965 0270 1648     		ldr	r0, .L485+20
 4966              	.LVL692:
 4967 0272 FFF7FEFF 		bl	printf
 4968              	.LVL693:
 4969              	.L465:
1515:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
 4970              		.loc 1 1515 0 is_stmt 1
 4971 0276 079A     		ldr	r2, [sp, #28]
 4972 0278 0F4B     		ldr	r3, .L485
 4973 027a 1A60     		str	r2, [r3]
 4974 027c C9E7     		b	.L466
 4975              	.LVL694:
 4976              	.L482:
1517:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       select_cb.prev->next = select_cb.next;
 4977              		.loc 1 1517 0 discriminator 1
 4978 027e 114B     		ldr	r3, .L485+12
 4979 0280 40F2ED52 		movw	r2, #1517
 4980 0284 1449     		ldr	r1, .L485+32
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 147


 4981 0286 1148     		ldr	r0, .L485+20
 4982              	.LVL695:
 4983 0288 FFF7FEFF 		bl	printf
 4984              	.LVL696:
 4985 028c BEE7     		b	.L467
 4986              	.L483:
1535:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
 4987              		.loc 1 1535 0 discriminator 1
 4988 028e 0C4B     		ldr	r3, .L485+8
 4989 0290 0922     		movs	r2, #9
 4990 0292 1A60     		str	r2, [r3]
1536:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 4991              		.loc 1 1536 0 discriminator 1
 4992 0294 4FF0FF3B 		mov	fp, #-1
 4993              	.LVL697:
 4994 0298 E0E7     		b	.L439
 4995              	.LVL698:
 4996              	.L484:
1548:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 4997              		.loc 1 1548 0
 4998 029a 0EAB     		add	r3, sp, #56
 4999 029c 0293     		str	r3, [sp, #8]
 5000 029e 10AB     		add	r3, sp, #64
 5001 02a0 0193     		str	r3, [sp, #4]
 5002 02a2 12AB     		add	r3, sp, #72
 5003 02a4 0093     		str	r3, [sp]
 5004 02a6 4346     		mov	r3, r8
 5005 02a8 3A46     		mov	r2, r7
 5006 02aa 3146     		mov	r1, r6
 5007 02ac 4846     		mov	r0, r9
 5008 02ae FFF7FEFF 		bl	lwip_selscan
 5009              	.LVL699:
 5010 02b2 8346     		mov	fp, r0
 5011              	.LVL700:
 5012 02b4 BEE7     		b	.L440
 5013              	.L486:
 5014 02b6 00BF     		.align	2
 5015              	.L485:
 5016 02b8 00000000 		.word	.LANCHOR1
 5017 02bc 00000000 		.word	.LANCHOR2
 5018 02c0 00000000 		.word	errno
 5019 02c4 00000000 		.word	.LC0
 5020 02c8 00000000 		.word	.LC19
 5021 02cc 3C000000 		.word	.LC2
 5022 02d0 D34D6210 		.word	274877907
 5023 02d4 1C000000 		.word	.LC20
 5024 02d8 34000000 		.word	.LC21
 5025              		.cfi_endproc
 5026              	.LFE180:
 5028              		.section	.text.lwip_shutdown,"ax",%progbits
 5029              		.align	1
 5030              		.global	lwip_shutdown
 5031              		.syntax unified
 5032              		.thumb
 5033              		.thumb_func
 5034              		.fpu fpv5-sp-d16
 5036              	lwip_shutdown:
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 148


 5037              	.LFB182:
1692:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 5038              		.loc 1 1692 0
 5039              		.cfi_startproc
 5040              		@ args = 0, pretend = 0, frame = 0
 5041              		@ frame_needed = 0, uses_anonymous_args = 0
 5042              	.LVL701:
 5043 0000 38B5     		push	{r3, r4, r5, lr}
 5044              	.LCFI62:
 5045              		.cfi_def_cfa_offset 16
 5046              		.cfi_offset 3, -16
 5047              		.cfi_offset 4, -12
 5048              		.cfi_offset 5, -8
 5049              		.cfi_offset 14, -4
 5050 0002 0C46     		mov	r4, r1
 5051              	.LVL702:
1699:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 5052              		.loc 1 1699 0
 5053 0004 FFF7FEFF 		bl	get_socket
 5054              	.LVL703:
1700:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 5055              		.loc 1 1700 0
 5056 0008 A8B3     		cbz	r0, .L493
 5057 000a 0546     		mov	r5, r0
1704:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) != NETCONN_TCP) {
 5058              		.loc 1 1704 0
 5059 000c 0068     		ldr	r0, [r0]
 5060              	.LVL704:
 5061 000e F0B1     		cbz	r0, .L489
1705:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, EOPNOTSUPP);
 5062              		.loc 1 1705 0
 5063 0010 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 5064 0012 03F0F003 		and	r3, r3, #240
 5065 0016 102B     		cmp	r3, #16
 5066 0018 12D1     		bne	.L499
1714:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     shut_rx = 1;
 5067              		.loc 1 1714 0
 5068 001a 34B3     		cbz	r4, .L494
1716:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     shut_tx = 1;
 5069              		.loc 1 1716 0
 5070 001c 012C     		cmp	r4, #1
 5071 001e 27D0     		beq	.L495
1718:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     shut_rx = 1;
 5072              		.loc 1 1718 0
 5073 0020 022C     		cmp	r4, #2
 5074 0022 1BD1     		bne	.L500
1720:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
 5075              		.loc 1 1720 0
 5076 0024 0122     		movs	r2, #1
1719:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     shut_tx = 1;
 5077              		.loc 1 1719 0
 5078 0026 1146     		mov	r1, r2
 5079              	.L491:
 5080              	.LVL705:
1725:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 5081              		.loc 1 1725 0
 5082 0028 FFF7FEFF 		bl	netconn_shutdown
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 149


 5083              	.LVL706:
 5084 002c 0446     		mov	r4, r0
 5085              	.LVL707:
 5086              	.LBB64:
1727:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return (err == ERR_OK ? 0 : -1);
 5087              		.loc 1 1727 0
 5088 002e FFF7FEFF 		bl	err_to_errno
 5089              	.LVL708:
 5090 0032 2874     		strb	r0, [r5, #16]
 5091 0034 08B1     		cbz	r0, .L492
1727:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return (err == ERR_OK ? 0 : -1);
 5092              		.loc 1 1727 0 is_stmt 0 discriminator 1
 5093 0036 134B     		ldr	r3, .L501
 5094 0038 1860     		str	r0, [r3]
 5095              	.L492:
 5096              	.LBE64:
1728:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 5097              		.loc 1 1728 0 is_stmt 1
 5098 003a FCB9     		cbnz	r4, .L497
 5099 003c 0020     		movs	r0, #0
 5100              	.LVL709:
 5101              	.L487:
1729:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 5102              		.loc 1 1729 0
 5103 003e 38BD     		pop	{r3, r4, r5, pc}
 5104              	.LVL710:
 5105              	.L499:
 5106              	.LBB65:
1706:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
 5107              		.loc 1 1706 0
 5108 0040 5F23     		movs	r3, #95
 5109 0042 2B74     		strb	r3, [r5, #16]
 5110 0044 0F4A     		ldr	r2, .L501
 5111 0046 1360     		str	r3, [r2]
 5112              	.LBE65:
1707:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 5113              		.loc 1 1707 0
 5114 0048 4FF0FF30 		mov	r0, #-1
 5115 004c F7E7     		b	.L487
 5116              	.LVL711:
 5117              	.L489:
 5118              	.LBB66:
1710:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 5119              		.loc 1 1710 0
 5120 004e 6B23     		movs	r3, #107
 5121 0050 2B74     		strb	r3, [r5, #16]
 5122 0052 0C4A     		ldr	r2, .L501
 5123 0054 1360     		str	r3, [r2]
 5124              	.LBE66:
1711:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 5125              		.loc 1 1711 0
 5126 0056 4FF0FF30 		mov	r0, #-1
 5127 005a F0E7     		b	.L487
 5128              	.LVL712:
 5129              	.L500:
 5130              	.LBB67:
1722:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 150


 5131              		.loc 1 1722 0
 5132 005c 1623     		movs	r3, #22
 5133 005e 2B74     		strb	r3, [r5, #16]
 5134 0060 084A     		ldr	r2, .L501
 5135 0062 1360     		str	r3, [r2]
 5136              	.LBE67:
1723:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 5137              		.loc 1 1723 0
 5138 0064 4FF0FF30 		mov	r0, #-1
 5139 0068 E9E7     		b	.L487
 5140              	.LVL713:
 5141              	.L494:
1695:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 5142              		.loc 1 1695 0
 5143 006a 0022     		movs	r2, #0
1715:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else if (how == SHUT_WR) {
 5144              		.loc 1 1715 0
 5145 006c 0121     		movs	r1, #1
 5146 006e DBE7     		b	.L491
 5147              	.L495:
1717:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else if (how == SHUT_RDWR) {
 5148              		.loc 1 1717 0
 5149 0070 0122     		movs	r2, #1
1695:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 5150              		.loc 1 1695 0
 5151 0072 0021     		movs	r1, #0
 5152 0074 D8E7     		b	.L491
 5153              	.LVL714:
 5154              	.L493:
1701:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 5155              		.loc 1 1701 0
 5156 0076 4FF0FF30 		mov	r0, #-1
 5157              	.LVL715:
 5158 007a E0E7     		b	.L487
 5159              	.LVL716:
 5160              	.L497:
1728:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 5161              		.loc 1 1728 0
 5162 007c 4FF0FF30 		mov	r0, #-1
 5163              	.LVL717:
 5164 0080 DDE7     		b	.L487
 5165              	.L502:
 5166 0082 00BF     		.align	2
 5167              	.L501:
 5168 0084 00000000 		.word	errno
 5169              		.cfi_endproc
 5170              	.LFE182:
 5172              		.section	.text.lwip_getpeername,"ax",%progbits
 5173              		.align	1
 5174              		.global	lwip_getpeername
 5175              		.syntax unified
 5176              		.thumb
 5177              		.thumb_func
 5178              		.fpu fpv5-sp-d16
 5180              	lwip_getpeername:
 5181              	.LFB184:
1778:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return lwip_getaddrname(s, name, namelen, 0);
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 151


 5182              		.loc 1 1778 0
 5183              		.cfi_startproc
 5184              		@ args = 0, pretend = 0, frame = 0
 5185              		@ frame_needed = 0, uses_anonymous_args = 0
 5186              	.LVL718:
 5187 0000 08B5     		push	{r3, lr}
 5188              	.LCFI63:
 5189              		.cfi_def_cfa_offset 8
 5190              		.cfi_offset 3, -8
 5191              		.cfi_offset 14, -4
1779:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 5192              		.loc 1 1779 0
 5193 0002 0023     		movs	r3, #0
 5194 0004 FFF7FEFF 		bl	lwip_getaddrname
 5195              	.LVL719:
1780:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 5196              		.loc 1 1780 0
 5197 0008 08BD     		pop	{r3, pc}
 5198              		.cfi_endproc
 5199              	.LFE184:
 5201              		.section	.text.lwip_getsockname,"ax",%progbits
 5202              		.align	1
 5203              		.global	lwip_getsockname
 5204              		.syntax unified
 5205              		.thumb
 5206              		.thumb_func
 5207              		.fpu fpv5-sp-d16
 5209              	lwip_getsockname:
 5210              	.LFB185:
1784:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return lwip_getaddrname(s, name, namelen, 1);
 5211              		.loc 1 1784 0
 5212              		.cfi_startproc
 5213              		@ args = 0, pretend = 0, frame = 0
 5214              		@ frame_needed = 0, uses_anonymous_args = 0
 5215              	.LVL720:
 5216 0000 08B5     		push	{r3, lr}
 5217              	.LCFI64:
 5218              		.cfi_def_cfa_offset 8
 5219              		.cfi_offset 3, -8
 5220              		.cfi_offset 14, -4
1785:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 5221              		.loc 1 1785 0
 5222 0002 0123     		movs	r3, #1
 5223 0004 FFF7FEFF 		bl	lwip_getaddrname
 5224              	.LVL721:
1786:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 5225              		.loc 1 1786 0
 5226 0008 08BD     		pop	{r3, pc}
 5227              		.cfi_endproc
 5228              	.LFE185:
 5230              		.section	.text.lwip_getsockopt,"ax",%progbits
 5231              		.align	1
 5232              		.global	lwip_getsockopt
 5233              		.syntax unified
 5234              		.thumb
 5235              		.thumb_func
 5236              		.fpu fpv5-sp-d16
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 152


 5238              	lwip_getsockopt:
 5239              	.LFB186:
1790:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u8_t err;
 5240              		.loc 1 1790 0
 5241              		.cfi_startproc
 5242              		@ args = 4, pretend = 0, frame = 0
 5243              		@ frame_needed = 0, uses_anonymous_args = 0
 5244              	.LVL722:
 5245 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 5246              	.LCFI65:
 5247              		.cfi_def_cfa_offset 32
 5248              		.cfi_offset 4, -32
 5249              		.cfi_offset 5, -28
 5250              		.cfi_offset 6, -24
 5251              		.cfi_offset 7, -20
 5252              		.cfi_offset 8, -16
 5253              		.cfi_offset 9, -12
 5254              		.cfi_offset 10, -8
 5255              		.cfi_offset 14, -4
 5256 0004 82B0     		sub	sp, sp, #8
 5257              	.LCFI66:
 5258              		.cfi_def_cfa_offset 40
 5259 0006 0746     		mov	r7, r0
 5260 0008 8846     		mov	r8, r1
 5261 000a 9146     		mov	r9, r2
 5262 000c 1C46     		mov	r4, r3
 5263 000e 0A9D     		ldr	r5, [sp, #40]
1792:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if !LWIP_TCPIP_CORE_LOCKING
 5264              		.loc 1 1792 0
 5265 0010 FFF7FEFF 		bl	get_socket
 5266              	.LVL723:
1797:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 5267              		.loc 1 1797 0
 5268 0014 50B3     		cbz	r0, .L511
 5269 0016 0646     		mov	r6, r0
1801:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, EFAULT);
 5270              		.loc 1 1801 0
 5271 0018 B5FA85F3 		clz	r3, r5
 5272 001c 5B09     		lsrs	r3, r3, #5
 5273 001e 002C     		cmp	r4, #0
 5274 0020 08BF     		it	eq
 5275 0022 0123     		moveq	r3, #1
 5276 0024 C3B9     		cbnz	r3, .L514
1808:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = lwip_getsockopt_impl(s, level, optname, optval, optlen);
 5277              		.loc 1 1808 0
 5278 0026 DFF850A0 		ldr	r10, .L516+4
 5279 002a 5046     		mov	r0, r10
 5280              	.LVL724:
 5281 002c FFF7FEFF 		bl	sys_mutex_lock
 5282              	.LVL725:
1809:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   UNLOCK_TCPIP_CORE();
 5283              		.loc 1 1809 0
 5284 0030 0095     		str	r5, [sp]
 5285 0032 2346     		mov	r3, r4
 5286 0034 4A46     		mov	r2, r9
 5287 0036 4146     		mov	r1, r8
 5288 0038 3846     		mov	r0, r7
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 153


 5289 003a FFF7FEFF 		bl	lwip_getsockopt_impl
 5290              	.LVL726:
 5291 003e 0446     		mov	r4, r0
 5292              	.LVL727:
1810:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 5293              		.loc 1 1810 0
 5294 0040 5046     		mov	r0, r10
 5295 0042 FFF7FEFF 		bl	sys_mutex_unlock
 5296              	.LVL728:
 5297              	.LBB68:
1856:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return err ? -1 : 0;
 5298              		.loc 1 1856 0
 5299 0046 3474     		strb	r4, [r6, #16]
 5300 0048 0CB1     		cbz	r4, .L510
1856:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return err ? -1 : 0;
 5301              		.loc 1 1856 0 is_stmt 0 discriminator 1
 5302 004a 0A4B     		ldr	r3, .L516
 5303 004c 1C60     		str	r4, [r3]
 5304              	.L510:
 5305              	.LBE68:
1857:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 5306              		.loc 1 1857 0 is_stmt 1
 5307 004e 54B9     		cbnz	r4, .L515
 5308 0050 0020     		movs	r0, #0
 5309              	.LVL729:
 5310              	.L507:
1858:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 5311              		.loc 1 1858 0
 5312 0052 02B0     		add	sp, sp, #8
 5313              	.LCFI67:
 5314              		.cfi_remember_state
 5315              		.cfi_def_cfa_offset 32
 5316              		@ sp needed
 5317 0054 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 5318              	.LVL730:
 5319              	.L514:
 5320              	.LCFI68:
 5321              		.cfi_restore_state
 5322              	.LBB69:
1802:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 5323              		.loc 1 1802 0
 5324 0058 0E23     		movs	r3, #14
 5325 005a 0374     		strb	r3, [r0, #16]
 5326 005c 054A     		ldr	r2, .L516
 5327 005e 1360     		str	r3, [r2]
 5328              	.LBE69:
1803:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 5329              		.loc 1 1803 0
 5330 0060 4FF0FF30 		mov	r0, #-1
 5331              	.LVL731:
 5332 0064 F5E7     		b	.L507
 5333              	.LVL732:
 5334              	.L515:
1857:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 5335              		.loc 1 1857 0
 5336 0066 4FF0FF30 		mov	r0, #-1
 5337 006a F2E7     		b	.L507
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 154


 5338              	.LVL733:
 5339              	.L511:
1798:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 5340              		.loc 1 1798 0
 5341 006c 4FF0FF30 		mov	r0, #-1
 5342              	.LVL734:
 5343 0070 EFE7     		b	.L507
 5344              	.L517:
 5345 0072 00BF     		.align	2
 5346              	.L516:
 5347 0074 00000000 		.word	errno
 5348 0078 00000000 		.word	lock_tcpip_core
 5349              		.cfi_endproc
 5350              	.LFE186:
 5352              		.section	.text.lwip_setsockopt,"ax",%progbits
 5353              		.align	1
 5354              		.global	lwip_setsockopt
 5355              		.syntax unified
 5356              		.thumb
 5357              		.thumb_func
 5358              		.fpu fpv5-sp-d16
 5360              	lwip_setsockopt:
 5361              	.LFB188:
2196:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u8_t err = 0;
 5362              		.loc 1 2196 0
 5363              		.cfi_startproc
 5364              		@ args = 4, pretend = 0, frame = 0
 5365              		@ frame_needed = 0, uses_anonymous_args = 0
 5366              	.LVL735:
 5367 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 5368              	.LCFI69:
 5369              		.cfi_def_cfa_offset 28
 5370              		.cfi_offset 4, -28
 5371              		.cfi_offset 5, -24
 5372              		.cfi_offset 6, -20
 5373              		.cfi_offset 7, -16
 5374              		.cfi_offset 8, -12
 5375              		.cfi_offset 9, -8
 5376              		.cfi_offset 14, -4
 5377 0004 83B0     		sub	sp, sp, #12
 5378              	.LCFI70:
 5379              		.cfi_def_cfa_offset 40
 5380 0006 0746     		mov	r7, r0
 5381 0008 8846     		mov	r8, r1
 5382 000a 9146     		mov	r9, r2
 5383 000c 1C46     		mov	r4, r3
 5384              	.LVL736:
2198:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if !LWIP_TCPIP_CORE_LOCKING
 5385              		.loc 1 2198 0
 5386 000e FFF7FEFF 		bl	get_socket
 5387              	.LVL737:
2203:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 5388              		.loc 1 2203 0
 5389 0012 20B3     		cbz	r0, .L522
 5390 0014 0646     		mov	r6, r0
2207:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, EFAULT);
 5391              		.loc 1 2207 0
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 155


 5392 0016 C4B1     		cbz	r4, .L525
2214:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = lwip_setsockopt_impl(s, level, optname, optval, optlen);
 5393              		.loc 1 2214 0
 5394 0018 124D     		ldr	r5, .L527
 5395 001a 2846     		mov	r0, r5
 5396              	.LVL738:
 5397 001c FFF7FEFF 		bl	sys_mutex_lock
 5398              	.LVL739:
2215:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   UNLOCK_TCPIP_CORE();
 5399              		.loc 1 2215 0
 5400 0020 0A9B     		ldr	r3, [sp, #40]
 5401 0022 0093     		str	r3, [sp]
 5402 0024 2346     		mov	r3, r4
 5403 0026 4A46     		mov	r2, r9
 5404 0028 4146     		mov	r1, r8
 5405 002a 3846     		mov	r0, r7
 5406 002c FFF7FEFF 		bl	lwip_setsockopt_impl
 5407              	.LVL740:
 5408 0030 0446     		mov	r4, r0
 5409              	.LVL741:
2216:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 5410              		.loc 1 2216 0
 5411 0032 2846     		mov	r0, r5
 5412 0034 FFF7FEFF 		bl	sys_mutex_unlock
 5413              	.LVL742:
 5414              	.LBB70:
2257:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return err ? -1 : 0;
 5415              		.loc 1 2257 0
 5416 0038 3474     		strb	r4, [r6, #16]
 5417 003a 0CB1     		cbz	r4, .L521
2257:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return err ? -1 : 0;
 5418              		.loc 1 2257 0 is_stmt 0 discriminator 1
 5419 003c 0A4B     		ldr	r3, .L527+4
 5420 003e 1C60     		str	r4, [r3]
 5421              	.L521:
 5422              	.LBE70:
2258:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 5423              		.loc 1 2258 0 is_stmt 1
 5424 0040 54B9     		cbnz	r4, .L526
 5425 0042 0020     		movs	r0, #0
 5426              	.LVL743:
 5427              	.L518:
2259:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 5428              		.loc 1 2259 0
 5429 0044 03B0     		add	sp, sp, #12
 5430              	.LCFI71:
 5431              		.cfi_remember_state
 5432              		.cfi_def_cfa_offset 28
 5433              		@ sp needed
 5434 0046 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 5435              	.LVL744:
 5436              	.L525:
 5437              	.LCFI72:
 5438              		.cfi_restore_state
 5439              	.LBB71:
2208:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 5440              		.loc 1 2208 0
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 156


 5441 004a 0E23     		movs	r3, #14
 5442 004c 0374     		strb	r3, [r0, #16]
 5443 004e 064A     		ldr	r2, .L527+4
 5444 0050 1360     		str	r3, [r2]
 5445              	.LBE71:
2209:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 5446              		.loc 1 2209 0
 5447 0052 4FF0FF30 		mov	r0, #-1
 5448              	.LVL745:
 5449 0056 F5E7     		b	.L518
 5450              	.LVL746:
 5451              	.L526:
2258:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 5452              		.loc 1 2258 0
 5453 0058 4FF0FF30 		mov	r0, #-1
 5454 005c F2E7     		b	.L518
 5455              	.LVL747:
 5456              	.L522:
2204:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 5457              		.loc 1 2204 0
 5458 005e 4FF0FF30 		mov	r0, #-1
 5459              	.LVL748:
 5460 0062 EFE7     		b	.L518
 5461              	.L528:
 5462              		.align	2
 5463              	.L527:
 5464 0064 00000000 		.word	lock_tcpip_core
 5465 0068 00000000 		.word	errno
 5466              		.cfi_endproc
 5467              	.LFE188:
 5469              		.section	.text.lwip_ioctl,"ax",%progbits
 5470              		.align	1
 5471              		.global	lwip_ioctl
 5472              		.syntax unified
 5473              		.thumb
 5474              		.thumb_func
 5475              		.fpu fpv5-sp-d16
 5477              	lwip_ioctl:
 5478              	.LFB190:
2613:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2614:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
2615:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_ioctl(int s, long cmd, void *argp)
2616:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 5479              		.loc 1 2616 0
 5480              		.cfi_startproc
 5481              		@ args = 0, pretend = 0, frame = 0
 5482              		@ frame_needed = 0, uses_anonymous_args = 0
 5483              	.LVL749:
 5484 0000 38B5     		push	{r3, r4, r5, lr}
 5485              	.LCFI73:
 5486              		.cfi_def_cfa_offset 16
 5487              		.cfi_offset 3, -16
 5488              		.cfi_offset 4, -12
 5489              		.cfi_offset 5, -8
 5490              		.cfi_offset 14, -4
 5491 0002 0D46     		mov	r5, r1
 5492 0004 1446     		mov	r4, r2
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 157


2617:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = get_socket(s);
 5493              		.loc 1 2617 0
 5494 0006 FFF7FEFF 		bl	get_socket
 5495              	.LVL750:
2618:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u8_t val;
2619:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_RCVBUF
2620:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u16_t buflen = 0;
2621:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int recv_avail;
2622:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SO_RCVBUF */
2623:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2624:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 5496              		.loc 1 2624 0
 5497 000a D8B1     		cbz	r0, .L535
 5498 000c 0346     		mov	r3, r0
2625:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
2626:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2627:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2628:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   switch (cmd) {
 5499              		.loc 1 2628 0
 5500 000e 0F4A     		ldr	r2, .L538
 5501 0010 9542     		cmp	r5, r2
 5502 0012 10D1     		bne	.L536
 5503              	.LVL751:
2629:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_RCVBUF || LWIP_FIONREAD_LINUXMODE
2630:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case FIONREAD:
2631:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (!argp) {
2632:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, EINVAL);
2633:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
2634:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
2635:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_FIONREAD_LINUXMODE
2636:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) != NETCONN_TCP) {
2637:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       struct pbuf *p;
2638:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (sock->lastdata) {
2639:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         p = ((struct netbuf *)sock->lastdata)->p;
2640:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         *((int*)argp) = p->tot_len - sock->lastoffset;
2641:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
2642:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         struct netbuf *rxbuf;
2643:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         err_t err;
2644:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (sock->rcvevent <= 0) {
2645:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           *((int*)argp) = 0;
2646:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
2647:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           err = netconn_recv(sock->conn, &rxbuf);
2648:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (err != ERR_OK) {
2649:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             *((int*)argp) = 0;
2650:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           } else {
2651:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             sock->lastdata = rxbuf;
2652:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             sock->lastoffset = 0;
2653:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             *((int*)argp) = rxbuf->p->tot_len;
2654:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
2655:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
2656:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2657:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return 0;
2658:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
2659:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_FIONREAD_LINUXMODE */
2660:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2661:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_RCVBUF
2662:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* we come here if either LWIP_FIONREAD_LINUXMODE==0 or this is a TCP socket */
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 158


2663:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SYS_ARCH_GET(sock->conn->recv_avail, recv_avail);
2664:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (recv_avail < 0) {
2665:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       recv_avail = 0;
2666:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
2667:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     *((int*)argp) = recv_avail;
2668:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2669:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Check if there is data left from the last recv operation. /maq 041215 */
2670:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (sock->lastdata) {
2671:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       struct pbuf *p = (struct pbuf *)sock->lastdata;
2672:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) != NETCONN_TCP) {
2673:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         p = ((struct netbuf *)p)->p;
2674:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2675:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       buflen = p->tot_len;
2676:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       buflen -= sock->lastoffset;
2677:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2678:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *((int*)argp) += buflen;
2679:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
2680:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2681:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_ioctl(%d, FIONREAD, %p) = %"U16_F"\n", s, argp, *((u16_t*)arg
2682:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, 0);
2683:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return 0;
2684:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_SO_RCVBUF */
2685:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2686:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SO_RCVBUF */
2687:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SO_RCVBUF || LWIP_FIONREAD_LINUXMODE */
2688:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2689:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case (long)FIONBIO:
2690:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     val = 0;
2691:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (argp && *(u32_t*)argp) {
 5504              		.loc 1 2691 0
 5505 0014 3CB1     		cbz	r4, .L533
 5506              		.loc 1 2691 0 is_stmt 0 discriminator 1
 5507 0016 2268     		ldr	r2, [r4]
 5508 0018 2AB1     		cbz	r2, .L533
 5509              	.LVL752:
2692:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       val = 1;
2693:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
2694:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     netconn_set_nonblocking(sock->conn, val);
 5510              		.loc 1 2694 0 is_stmt 1
 5511 001a 0168     		ldr	r1, [r0]
 5512 001c 0A7F     		ldrb	r2, [r1, #28]	@ zero_extendqisi2
 5513 001e 42F00202 		orr	r2, r2, #2
 5514 0022 0A77     		strb	r2, [r1, #28]
 5515 0024 04E0     		b	.L534
 5516              	.LVL753:
 5517              	.L533:
 5518              		.loc 1 2694 0 is_stmt 0 discriminator 2
 5519 0026 1968     		ldr	r1, [r3]
 5520 0028 0A7F     		ldrb	r2, [r1, #28]	@ zero_extendqisi2
 5521 002a 22F00202 		bic	r2, r2, #2
 5522 002e 0A77     		strb	r2, [r1, #28]
 5523              	.LVL754:
 5524              	.L534:
 5525              	.LBB72:
2695:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_ioctl(%d, FIONBIO, %d)\n", s, val));
2696:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, 0);
 5526              		.loc 1 2696 0 is_stmt 1
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 159


 5527 0030 0020     		movs	r0, #0
 5528              	.LVL755:
 5529 0032 1874     		strb	r0, [r3, #16]
 5530              	.LVL756:
 5531              	.L529:
 5532              	.LBE72:
2697:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return 0;
2698:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2699:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   default:
2700:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2701:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } /* switch (cmd) */
2702:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_ioctl(%d, UNIMPL: 0x%lx, %p)\n", s, cmd, argp));
2703:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, ENOSYS); /* not yet implemented */
2704:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return -1;
2705:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 5533              		.loc 1 2705 0
 5534 0034 38BD     		pop	{r3, r4, r5, pc}
 5535              	.LVL757:
 5536              	.L536:
 5537              	.LBB73:
2703:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return -1;
 5538              		.loc 1 2703 0
 5539 0036 2622     		movs	r2, #38
 5540 0038 0274     		strb	r2, [r0, #16]
 5541 003a 054B     		ldr	r3, .L538+4
 5542 003c 1A60     		str	r2, [r3]
 5543              	.LBE73:
2704:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 5544              		.loc 1 2704 0
 5545 003e 4FF0FF30 		mov	r0, #-1
 5546              	.LVL758:
 5547 0042 F7E7     		b	.L529
 5548              	.LVL759:
 5549              	.L535:
2625:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 5550              		.loc 1 2625 0
 5551 0044 4FF0FF30 		mov	r0, #-1
 5552              	.LVL760:
 5553 0048 F4E7     		b	.L529
 5554              	.L539:
 5555 004a 00BF     		.align	2
 5556              	.L538:
 5557 004c 7E660480 		.word	-2147195266
 5558 0050 00000000 		.word	errno
 5559              		.cfi_endproc
 5560              	.LFE190:
 5562              		.section	.text.lwip_fcntl,"ax",%progbits
 5563              		.align	1
 5564              		.global	lwip_fcntl
 5565              		.syntax unified
 5566              		.thumb
 5567              		.thumb_func
 5568              		.fpu fpv5-sp-d16
 5570              	lwip_fcntl:
 5571              	.LFB191:
2706:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2707:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** A minimal implementation of fcntl.
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 160


2708:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Currently only the commands F_GETFL and F_SETFL are implemented.
2709:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Only the flag O_NONBLOCK is implemented.
2710:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
2711:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
2712:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_fcntl(int s, int cmd, int val)
2713:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 5572              		.loc 1 2713 0
 5573              		.cfi_startproc
 5574              		@ args = 0, pretend = 0, frame = 0
 5575              		@ frame_needed = 0, uses_anonymous_args = 0
 5576              	.LVL761:
 5577 0000 38B5     		push	{r3, r4, r5, lr}
 5578              	.LCFI74:
 5579              		.cfi_def_cfa_offset 16
 5580              		.cfi_offset 3, -16
 5581              		.cfi_offset 4, -12
 5582              		.cfi_offset 5, -8
 5583              		.cfi_offset 14, -4
 5584 0002 0C46     		mov	r4, r1
 5585 0004 1546     		mov	r5, r2
2714:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = get_socket(s);
 5586              		.loc 1 2714 0
 5587 0006 FFF7FEFF 		bl	get_socket
 5588              	.LVL762:
2715:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int ret = -1;
2716:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2717:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 5589              		.loc 1 2717 0
 5590 000a 68B3     		cbz	r0, .L548
 5591 000c 0346     		mov	r3, r0
2718:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
2719:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2720:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2721:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   switch (cmd) {
 5592              		.loc 1 2721 0
 5593 000e 032C     		cmp	r4, #3
 5594 0010 08D0     		beq	.L543
 5595 0012 042C     		cmp	r4, #4
 5596 0014 0DD0     		beq	.L544
 5597              	.LVL763:
 5598              	.LBB74:
2722:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case F_GETFL:
2723:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ret = netconn_is_nonblocking(sock->conn) ? O_NONBLOCK : 0;
2724:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, 0);
2725:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2726:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case F_SETFL:
2727:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if ((val & ~O_NONBLOCK) == 0) {
2728:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* only O_NONBLOCK, all other bits are zero */
2729:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       netconn_set_nonblocking(sock->conn, val & O_NONBLOCK);
2730:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       ret = 0;
2731:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, 0);
2732:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
2733:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, ENOSYS); /* not yet implemented */
2734:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
2735:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2736:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   default:
2737:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_fcntl(%d, UNIMPL: %d, %d)\n", s, cmd, val));
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 161


2738:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, ENOSYS); /* not yet implemented */
 5599              		.loc 1 2738 0
 5600 0016 2622     		movs	r2, #38
 5601 0018 0274     		strb	r2, [r0, #16]
 5602 001a 154B     		ldr	r3, .L551
 5603 001c 1A60     		str	r2, [r3]
 5604              	.LBE74:
2715:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 5605              		.loc 1 2715 0
 5606 001e 4FF0FF30 		mov	r0, #-1
 5607              	.LVL764:
 5608 0022 05E0     		b	.L540
 5609              	.LVL765:
 5610              	.L543:
2723:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, 0);
 5611              		.loc 1 2723 0
 5612 0024 0268     		ldr	r2, [r0]
 5613 0026 107F     		ldrb	r0, [r2, #28]	@ zero_extendqisi2
 5614              	.LVL766:
 5615 0028 C0F34000 		ubfx	r0, r0, #1, #1
 5616              	.LVL767:
 5617              	.LBB75:
2724:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
 5618              		.loc 1 2724 0
 5619 002c 0022     		movs	r2, #0
 5620 002e 1A74     		strb	r2, [r3, #16]
 5621              	.LVL768:
 5622              	.L540:
 5623              	.LBE75:
2739:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2740:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2741:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return ret;
2742:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 5624              		.loc 1 2742 0
 5625 0030 38BD     		pop	{r3, r4, r5, pc}
 5626              	.LVL769:
 5627              	.L544:
2727:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* only O_NONBLOCK, all other bits are zero */
 5628              		.loc 1 2727 0
 5629 0032 35F00100 		bics	r0, r5, #1
 5630              	.LVL770:
 5631 0036 10D1     		bne	.L545
2729:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       ret = 0;
 5632              		.loc 1 2729 0
 5633 0038 15F0010F 		tst	r5, #1
 5634 003c 07D0     		beq	.L546
2729:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       ret = 0;
 5635              		.loc 1 2729 0 is_stmt 0 discriminator 1
 5636 003e 1968     		ldr	r1, [r3]
 5637 0040 0A7F     		ldrb	r2, [r1, #28]	@ zero_extendqisi2
 5638 0042 42F00202 		orr	r2, r2, #2
 5639 0046 0A77     		strb	r2, [r1, #28]
 5640              	.L547:
 5641              	.LVL771:
 5642              	.LBB76:
2731:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
 5643              		.loc 1 2731 0 is_stmt 1
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 162


 5644 0048 0022     		movs	r2, #0
 5645 004a 1A74     		strb	r2, [r3, #16]
 5646              	.LBE76:
 5647 004c F0E7     		b	.L540
 5648              	.LVL772:
 5649              	.L546:
2729:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       ret = 0;
 5650              		.loc 1 2729 0 discriminator 2
 5651 004e 1968     		ldr	r1, [r3]
 5652 0050 0A7F     		ldrb	r2, [r1, #28]	@ zero_extendqisi2
 5653 0052 22F00202 		bic	r2, r2, #2
 5654 0056 0A77     		strb	r2, [r1, #28]
 5655 0058 F6E7     		b	.L547
 5656              	.L545:
 5657              	.LVL773:
 5658              	.LBB77:
2733:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 5659              		.loc 1 2733 0
 5660 005a 2622     		movs	r2, #38
 5661 005c 1A74     		strb	r2, [r3, #16]
 5662 005e 044B     		ldr	r3, .L551
 5663              	.LVL774:
 5664 0060 1A60     		str	r2, [r3]
 5665              	.LBE77:
2715:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 5666              		.loc 1 2715 0
 5667 0062 4FF0FF30 		mov	r0, #-1
 5668 0066 E3E7     		b	.L540
 5669              	.LVL775:
 5670              	.L548:
2718:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 5671              		.loc 1 2718 0
 5672 0068 4FF0FF30 		mov	r0, #-1
 5673              	.LVL776:
 5674 006c E0E7     		b	.L540
 5675              	.L552:
 5676 006e 00BF     		.align	2
 5677              	.L551:
 5678 0070 00000000 		.word	errno
 5679              		.cfi_endproc
 5680              	.LFE191:
 5682              		.section	.bss.select_cb_ctr,"aw",%nobits
 5683              		.align	2
 5684              		.set	.LANCHOR2,. + 0
 5687              	select_cb_ctr:
 5688 0000 00000000 		.space	4
 5689              		.section	.bss.select_cb_list,"aw",%nobits
 5690              		.align	2
 5691              		.set	.LANCHOR1,. + 0
 5694              	select_cb_list:
 5695 0000 00000000 		.space	4
 5696              		.section	.bss.sockets,"aw",%nobits
 5697              		.align	2
 5698              		.set	.LANCHOR0,. + 0
 5701              	sockets:
 5702 0000 00000000 		.space	80
 5702      00000000 
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 163


 5702      00000000 
 5702      00000000 
 5702      00000000 
 5703              		.section	.rodata.event_callback.str1.4,"aMS",%progbits,1
 5704              		.align	2
 5705              	.LC3:
 5706 0000 756E6B6E 		.ascii	"unknown event\000"
 5706      6F776E20 
 5706      6576656E 
 5706      7400
 5707              		.section	.rodata.lwip_accept.str1.4,"aMS",%progbits,1
 5708              		.align	2
 5709              	.LC4:
 5710 0000 6E657763 		.ascii	"newconn != NULL\000"
 5710      6F6E6E20 
 5710      213D204E 
 5710      554C4C00 
 5711              	.LC5:
 5712 0010 696E7661 		.ascii	"invalid socket index\000"
 5712      6C696420 
 5712      736F636B 
 5712      65742069 
 5712      6E646578 
 5713 0025 000000   		.space	3
 5714              	.LC6:
 5715 0028 6E657763 		.ascii	"newconn->callback == event_callback\000"
 5715      6F6E6E2D 
 5715      3E63616C 
 5715      6C626163 
 5715      6B203D3D 
 5716              	.LC7:
 5717 004c 61646472 		.ascii	"addr valid but addrlen NULL\000"
 5717      2076616C 
 5717      69642062 
 5717      75742061 
 5717      6464726C 
 5718              		.section	.rodata.lwip_bind.str1.4,"aMS",%progbits,1
 5719              		.align	2
 5720              	.LC8:
 5721 0000 6C776970 		.ascii	"lwip_bind: invalid address\000"
 5721      5F62696E 
 5721      643A2069 
 5721      6E76616C 
 5721      69642061 
 5722              		.section	.rodata.lwip_close.str1.4,"aMS",%progbits,1
 5723              		.align	2
 5724              	.LC9:
 5725 0000 736F636B 		.ascii	"sock->lastdata == NULL\000"
 5725      2D3E6C61 
 5725      73746461 
 5725      7461203D 
 5725      3D204E55 
 5726              		.section	.rodata.lwip_connect.str1.4,"aMS",%progbits,1
 5727              		.align	2
 5728              	.LC10:
 5729 0000 6C776970 		.ascii	"lwip_connect: invalid address\000"
 5729      5F636F6E 
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 164


 5729      6E656374 
 5729      3A20696E 
 5729      76616C69 
 5730              		.section	.rodata.lwip_recvfrom.str1.4,"aMS",%progbits,1
 5731              		.align	2
 5732              	.LC11:
 5733 0000 62756620 		.ascii	"buf != NULL\000"
 5733      213D204E 
 5733      554C4C00 
 5734              	.LC12:
 5735 000c 696E7661 		.ascii	"invalid copylen, len would underflow\000"
 5735      6C696420 
 5735      636F7079 
 5735      6C656E2C 
 5735      206C656E 
 5736              		.section	.rodata.lwip_select.str1.4,"aMS",%progbits,1
 5737              		.align	2
 5738              	.LC19:
 5739 0000 736F636B 		.ascii	"sock->select_waiting > 0\000"
 5739      2D3E7365 
 5739      6C656374 
 5739      5F776169 
 5739      74696E67 
 5740 0019 000000   		.space	3
 5741              	.LC20:
 5742 001c 73656C65 		.ascii	"select_cb.prev == NULL\000"
 5742      63745F63 
 5742      622E7072 
 5742      6576203D 
 5742      3D204E55 
 5743 0033 00       		.space	1
 5744              	.LC21:
 5745 0034 73656C65 		.ascii	"select_cb.prev != NULL\000"
 5745      63745F63 
 5745      622E7072 
 5745      65762021 
 5745      3D204E55 
 5746              		.section	.rodata.lwip_selscan.str1.4,"aMS",%progbits,1
 5747              		.align	2
 5748              	.LC0:
 5749 0000 4D696464 		.ascii	"Middlewares/Third_Party/LwIP/src/api/sockets.c\000"
 5749      6C657761 
 5749      7265732F 
 5749      54686972 
 5749      645F5061 
 5750 002f 00       		.space	1
 5751              	.LC1:
 5752 0030 6E726561 		.ascii	"nready >= 0\000"
 5752      6479203E 
 5752      3D203000 
 5753              	.LC2:
 5754 003c 41737365 		.ascii	"Assertion \"%s\" failed at line %d in %s\012\000"
 5754      7274696F 
 5754      6E202225 
 5754      73222066 
 5754      61696C65 
 5755              		.section	.rodata.lwip_sendmsg.str1.4,"aMS",%progbits,1
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 165


 5756              		.align	2
 5757              	.LC13:
 5758 0000 6C776970 		.ascii	"lwip_sendmsg: invalid msghdr\000"
 5758      5F73656E 
 5758      646D7367 
 5758      3A20696E 
 5758      76616C69 
 5759 001d 000000   		.space	3
 5760              	.LC14:
 5761 0020 6C776970 		.ascii	"lwip_sendmsg: invalid msghdr iov\000"
 5761      5F73656E 
 5761      646D7367 
 5761      3A20696E 
 5761      76616C69 
 5762 0041 000000   		.space	3
 5763              	.LC15:
 5764 0044 6C776970 		.ascii	"lwip_sendmsg: invalid msghdr name\000"
 5764      5F73656E 
 5764      646D7367 
 5764      3A20696E 
 5764      76616C69 
 5765 0066 0000     		.space	2
 5766              	.LC16:
 5767 0068 696F765F 		.ascii	"iov_len < u16_t\000"
 5767      6C656E20 
 5767      3C207531 
 5767      365F7400 
 5768              		.section	.rodata.lwip_sendto.str1.4,"aMS",%progbits,1
 5769              		.align	2
 5770              	.LC17:
 5771 0000 6C776970 		.ascii	"lwip_sendto: size must fit in u16_t\000"
 5771      5F73656E 
 5771      64746F3A 
 5771      2073697A 
 5771      65206D75 
 5772              	.LC18:
 5773 0024 6C776970 		.ascii	"lwip_sendto: invalid address\000"
 5773      5F73656E 
 5773      64746F3A 
 5773      20696E76 
 5773      616C6964 
 5774              		.text
 5775              	.Letext0:
 5776              		.file 2 "d:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\machine\\_default
 5777              		.file 3 "d:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\sys\\_stdint.h"
 5778              		.file 4 "Drivers/CMSIS/Include/core_cm7.h"
 5779              		.file 5 "Drivers/CMSIS/Device/ST/STM32F7xx/Include/system_stm32f7xx.h"
 5780              		.file 6 "d:\\program files (x86)\\gnu\\7_2018-q2-update\\lib\\gcc\\arm-none-eabi\\7.3.1\\include\\
 5781              		.file 7 "d:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\sys\\lock.h"
 5782              		.file 8 "d:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\sys\\_types.h"
 5783              		.file 9 "d:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\sys\\reent.h"
 5784              		.file 10 "d:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\sys\\_timeval.h"
 5785              		.file 11 "d:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\sys\\select.h"
 5786              		.file 12 "d:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\sys\\types.h"
 5787              		.file 13 "d:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\stdlib.h"
 5788              		.file 14 "Middlewares/Third_Party/LwIP/system/arch/cc.h"
 5789              		.file 15 "d:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\time.h"
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 166


 5790              		.file 16 "Middlewares/Third_Party/LwIP/src/include/lwip/arch.h"
 5791              		.file 17 "Middlewares/Third_Party/LwIP/src/include/lwip/ip4_addr.h"
 5792              		.file 18 "Middlewares/Third_Party/LwIP/src/include/lwip/ip_addr.h"
 5793              		.file 19 "Middlewares/Third_Party/LwIP/src/include/lwip/err.h"
 5794              		.file 20 "Middlewares/Third_Party/LwIP/src/include/lwip/inet.h"
 5795              		.file 21 "Middlewares/Third_Party/LwIP/src/include/lwip/errno.h"
 5796              		.file 22 "Middlewares/Third_Party/LwIP/src/include/lwip/sockets.h"
 5797              		.file 23 "Middlewares/Third_Party/LwIP/src/include/lwip/pbuf.h"
 5798              		.file 24 "Middlewares/Third_Party/LwIP/src/include/lwip/netbuf.h"
 5799              		.file 25 "Middlewares/Third_Party/FreeRTOS/Source/include/queue.h"
 5800              		.file 26 "Middlewares/Third_Party/FreeRTOS/Source/include/semphr.h"
 5801              		.file 27 "Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.h"
 5802              		.file 28 "Middlewares/Third_Party/LwIP/system/arch/sys_arch.h"
 5803              		.file 29 "Middlewares/Third_Party/LwIP/src/include/lwip/api.h"
 5804              		.file 30 "Middlewares/Third_Party/LwIP/src/include/lwip/ip.h"
 5805              		.file 31 "Middlewares/Third_Party/LwIP/src/include/lwip/tcp.h"
 5806              		.file 32 "Middlewares/Third_Party/LwIP/src/include/lwip/udp.h"
 5807              		.file 33 "Middlewares/Third_Party/LwIP/src/include/lwip/memp.h"
 5808              		.file 34 "Middlewares/Third_Party/LwIP/src/include/lwip/priv/memp_priv.h"
 5809              		.file 35 "Middlewares/Third_Party/LwIP/src/include/lwip/netif.h"
 5810              		.file 36 "Middlewares/Third_Party/LwIP/src/include/lwip/prot/ip4.h"
 5811              		.file 37 "Middlewares/Third_Party/LwIP/src/include/lwip/timeouts.h"
 5812              		.file 38 "Middlewares/Third_Party/LwIP/src/include/lwip/tcpip.h"
 5813              		.file 39 "Middlewares/Third_Party/LwIP/src/include/lwip/sys.h"
 5814              		.file 40 "Middlewares/Third_Party/LwIP/src/include/lwip/def.h"
 5815              		.file 41 "d:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\stdio.h"
 5816              		.file 42 "<built-in>"
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 167


DEFINED SYMBOLS
                            *ABS*:00000000 sockets.c
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:18     .text.get_socket:00000000 $t
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:24     .text.get_socket:00000000 get_socket
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:91     .text.get_socket:00000034 $d
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:97     .text.tryget_socket:00000000 $t
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:103    .text.tryget_socket:00000000 tryget_socket
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:143    .text.tryget_socket:00000024 $d
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:148    .text.lwip_setsockopt_impl:00000000 $t
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:154    .text.lwip_setsockopt_impl:00000000 lwip_setsockopt_impl
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:510    .text.lwip_getsockopt_impl:00000000 $t
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:516    .text.lwip_getsockopt_impl:00000000 lwip_getsockopt_impl
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:1037   .text.lwip_getsockopt_impl:00000254 $d
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:1042   .text.alloc_socket:00000000 $t
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:1048   .text.alloc_socket:00000000 alloc_socket
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:1157   .text.alloc_socket:00000078 $d
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:1162   .text.lwip_selscan:00000000 $t
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:1168   .text.lwip_selscan:00000000 lwip_selscan
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:1472   .text.lwip_selscan:000001a4 $d
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:1479   .text.lwip_getaddrname:00000000 $t
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:1485   .text.lwip_getaddrname:00000000 lwip_getaddrname
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:1598   .text.lwip_getaddrname:00000080 $d
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:1603   .text.event_callback:00000000 $t
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:1609   .text.event_callback:00000000 event_callback
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:1657   .text.event_callback:00000034 $d
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:1882   .text.event_callback:00000148 $d
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:1891   .text.free_socket:00000000 $t
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:1897   .text.free_socket:00000000 free_socket
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:1955   .text.lwip_socket_thread_init:00000000 $t
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:1962   .text.lwip_socket_thread_init:00000000 lwip_socket_thread_init
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:1975   .text.lwip_socket_thread_cleanup:00000000 $t
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:1982   .text.lwip_socket_thread_cleanup:00000000 lwip_socket_thread_cleanup
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:1995   .text.lwip_accept:00000000 $t
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:2002   .text.lwip_accept:00000000 lwip_accept
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:2324   .text.lwip_accept:000001ac $d
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:2337   .text.lwip_bind:00000000 $t
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:2344   .text.lwip_bind:00000000 lwip_bind
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:2477   .text.lwip_bind:0000008c $d
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:2485   .text.lwip_close:00000000 $t
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:2492   .text.lwip_close:00000000 lwip_close
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:2595   .text.lwip_close:00000068 $d
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:2603   .text.lwip_connect:00000000 $t
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:2610   .text.lwip_connect:00000000 lwip_connect
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:2753   .text.lwip_connect:00000090 $d
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:2761   .text.lwip_listen:00000000 $t
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:2768   .text.lwip_listen:00000000 lwip_listen
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:2870   .text.lwip_listen:00000060 $d
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:2875   .text.lwip_recvfrom:00000000 $t
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:2882   .text.lwip_recvfrom:00000000 lwip_recvfrom
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:3344   .text.lwip_recvfrom:00000254 $d
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:3353   .text.lwip_read:00000000 $t
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:3360   .text.lwip_read:00000000 lwip_read
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:3390   .text.lwip_recv:00000000 $t
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:3397   .text.lwip_recv:00000000 lwip_recv
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:3428   .text.lwip_sendmsg:00000000 $t
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:3435   .text.lwip_sendmsg:00000000 lwip_sendmsg
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:3898   .text.lwip_sendmsg:00000248 $d
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 168


C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:3910   .text.lwip_sendto:00000000 $t
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:3917   .text.lwip_sendto:00000000 lwip_sendto
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:4142   .text.lwip_send:00000000 lwip_send
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:4126   .text.lwip_sendto:000000fc $d
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:4135   .text.lwip_send:00000000 $t
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:4259   .text.lwip_send:00000084 $d
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:4264   .text.lwip_socket:00000000 $t
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:4271   .text.lwip_socket:00000000 lwip_socket
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:4398   .text.lwip_socket:00000080 $d
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:4404   .text.lwip_write:00000000 $t
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:4411   .text.lwip_write:00000000 lwip_write
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:4433   .text.lwip_writev:00000000 $t
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:4440   .text.lwip_writev:00000000 lwip_writev
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:4486   .text.lwip_select:00000000 $t
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:4493   .text.lwip_select:00000000 lwip_select
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:5016   .text.lwip_select:000002b8 $d
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:5029   .text.lwip_shutdown:00000000 $t
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:5036   .text.lwip_shutdown:00000000 lwip_shutdown
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:5168   .text.lwip_shutdown:00000084 $d
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:5173   .text.lwip_getpeername:00000000 $t
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:5180   .text.lwip_getpeername:00000000 lwip_getpeername
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:5202   .text.lwip_getsockname:00000000 $t
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:5209   .text.lwip_getsockname:00000000 lwip_getsockname
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:5231   .text.lwip_getsockopt:00000000 $t
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:5238   .text.lwip_getsockopt:00000000 lwip_getsockopt
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:5347   .text.lwip_getsockopt:00000074 $d
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:5353   .text.lwip_setsockopt:00000000 $t
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:5360   .text.lwip_setsockopt:00000000 lwip_setsockopt
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:5464   .text.lwip_setsockopt:00000064 $d
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:5470   .text.lwip_ioctl:00000000 $t
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:5477   .text.lwip_ioctl:00000000 lwip_ioctl
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:5557   .text.lwip_ioctl:0000004c $d
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:5563   .text.lwip_fcntl:00000000 $t
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:5570   .text.lwip_fcntl:00000000 lwip_fcntl
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:5678   .text.lwip_fcntl:00000070 $d
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:5683   .bss.select_cb_ctr:00000000 $d
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:5687   .bss.select_cb_ctr:00000000 select_cb_ctr
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:5690   .bss.select_cb_list:00000000 $d
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:5694   .bss.select_cb_list:00000000 select_cb_list
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:5697   .bss.sockets:00000000 $d
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:5701   .bss.sockets:00000000 sockets
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:5704   .rodata.event_callback.str1.4:00000000 $d
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:5708   .rodata.lwip_accept.str1.4:00000000 $d
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:5719   .rodata.lwip_bind.str1.4:00000000 $d
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:5723   .rodata.lwip_close.str1.4:00000000 $d
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:5727   .rodata.lwip_connect.str1.4:00000000 $d
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:5731   .rodata.lwip_recvfrom.str1.4:00000000 $d
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:5737   .rodata.lwip_select.str1.4:00000000 $d
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:5747   .rodata.lwip_selscan.str1.4:00000000 $d
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:5756   .rodata.lwip_sendmsg.str1.4:00000000 $d
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:5769   .rodata.lwip_sendto.str1.4:00000000 $d
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:1663   .text.event_callback:00000039 $d
C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s:1663   .text.event_callback:0000003a $t

UNDEFINED SYMBOLS
errno
err_to_errno
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccXovJ6h.s 			page 169


sys_arch_unprotect
sys_arch_protect
printf
netconn_getaddr
lwip_htons
memcpy
sys_sem_signal
netbuf_delete
pbuf_free
netconn_accept
netconn_delete
netconn_bind
netconn_connect
netconn_disconnect
netconn_listen_with_backlog
netconn_recv
netconn_recv_tcp_pbuf
pbuf_copy_partial
netbuf_new
netconn_write_partly
pbuf_alloc
pbuf_cat
netconn_send
netbuf_ref
netbuf_free
netconn_new_with_proto_and_callback
sys_sem_new
sys_arch_sem_wait
sys_sem_free
netconn_shutdown
sys_mutex_lock
sys_mutex_unlock
lock_tcpip_core
