ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 1


   1              		.cpu cortex-m7
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"sockets.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.get_socket,"ax",%progbits
  18              		.align	1
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu fpv5-sp-d16
  24              	get_socket:
  25              	.LFB159:
  26              		.file 1 "Middlewares/Third_Party/LwIP/src/api/sockets.c"
   1:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /**
   2:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @file
   3:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Sockets BSD-Like API module
   4:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
   5:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @defgroup socket Socket API
   6:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @ingroup sequential_api
   7:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * BSD-style socket API.\n
   8:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Thread-safe, to be called from non-TCPIP threads only.\n
   9:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Can be activated by defining @ref LWIP_SOCKET to 1.\n
  10:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Header is in posix/sys/socket.h\b
  11:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
  12:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
  13:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /*
  14:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Copyright (c) 2001-2004 Swedish Institute of Computer Science.
  15:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * All rights reserved.
  16:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
  17:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Redistribution and use in source and binary forms, with or without modification,
  18:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * are permitted provided that the following conditions are met:
  19:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
  20:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * 1. Redistributions of source code must retain the above copyright notice,
  21:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *    this list of conditions and the following disclaimer.
  22:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  23:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *    this list of conditions and the following disclaimer in the documentation
  24:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *    and/or other materials provided with the distribution.
  25:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * 3. The name of the author may not be used to endorse or promote products
  26:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *    derived from this software without specific prior written permission.
  27:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
  28:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR IMPLIED
  29:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  30:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT
  31:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  32:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 2


  33:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
  34:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
  35:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING
  36:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY
  37:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * OF SUCH DAMAGE.
  38:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
  39:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * This file is part of the lwIP TCP/IP stack.
  40:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
  41:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Author: Adam Dunkels <adam@sics.se>
  42:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
  43:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Improved by Marc Boucher <marc@mbsi.ca> and David Haas <dhaas@alum.rpi.edu>
  44:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
  45:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
  46:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
  47:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/opt.h"
  48:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
  49:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SOCKET /* don't build if not configured for use in lwipopts.h */
  50:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
  51:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/sockets.h"
  52:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/api.h"
  53:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/sys.h"
  54:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/igmp.h"
  55:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/inet.h"
  56:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/tcp.h"
  57:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/raw.h"
  58:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/udp.h"
  59:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/memp.h"
  60:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/pbuf.h"
  61:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/priv/tcpip_priv.h"
  62:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_CHECKSUM_ON_COPY
  63:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/inet_chksum.h"
  64:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
  65:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
  66:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include <string.h>
  67:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
  68:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* If the netconn API is not required publicly, then we include the necessary
  69:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    files here to get the implementation */
  70:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if !LWIP_NETCONN
  71:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #undef LWIP_NETCONN
  72:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_NETCONN 1
  73:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "api_msg.c"
  74:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "api_lib.c"
  75:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "netbuf.c"
  76:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #undef LWIP_NETCONN
  77:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_NETCONN 0
  78:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
  79:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
  80:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV4
  81:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IP4ADDR_PORT_TO_SOCKADDR(sin, ipaddr, port) do { \
  82:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       (sin)->sin_len = sizeof(struct sockaddr_in); \
  83:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       (sin)->sin_family = AF_INET; \
  84:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       (sin)->sin_port = lwip_htons((port)); \
  85:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       inet_addr_from_ip4addr(&(sin)->sin_addr, ipaddr); \
  86:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       memset((sin)->sin_zero, 0, SIN_ZERO_LEN); }while(0)
  87:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SOCKADDR4_TO_IP4ADDR_PORT(sin, ipaddr, port) do { \
  88:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     inet_addr_to_ip4addr(ip_2_ip4(ipaddr), &((sin)->sin_addr)); \
  89:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     (port) = lwip_ntohs((sin)->sin_port); }while(0)
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 3


  90:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV4 */
  91:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
  92:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV6
  93:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IP6ADDR_PORT_TO_SOCKADDR(sin6, ipaddr, port) do { \
  94:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       (sin6)->sin6_len = sizeof(struct sockaddr_in6); \
  95:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       (sin6)->sin6_family = AF_INET6; \
  96:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       (sin6)->sin6_port = lwip_htons((port)); \
  97:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       (sin6)->sin6_flowinfo = 0; \
  98:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       inet6_addr_from_ip6addr(&(sin6)->sin6_addr, ipaddr); \
  99:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       (sin6)->sin6_scope_id = 0; }while(0)
 100:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SOCKADDR6_TO_IP6ADDR_PORT(sin6, ipaddr, port) do { \
 101:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     inet6_addr_to_ip6addr(ip_2_ip6(ipaddr), &((sin6)->sin6_addr)); \
 102:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     (port) = lwip_ntohs((sin6)->sin6_port); }while(0)
 103:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV6 */
 104:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 105:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV4 && LWIP_IPV6
 106:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void sockaddr_to_ipaddr_port(const struct sockaddr* sockaddr, ip_addr_t* ipaddr, u16_t* port
 107:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 108:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IS_SOCK_ADDR_LEN_VALID(namelen)  (((namelen) == sizeof(struct sockaddr_in)) || \
 109:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                          ((namelen) == sizeof(struct sockaddr_in6)))
 110:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IS_SOCK_ADDR_TYPE_VALID(name)    (((name)->sa_family == AF_INET) || \
 111:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                          ((name)->sa_family == AF_INET6))
 112:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SOCK_ADDR_TYPE_MATCH(name, sock) \
 113:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        ((((name)->sa_family == AF_INET) && !(NETCONNTYPE_ISIPV6((sock)->conn->type))) || \
 114:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        (((name)->sa_family == AF_INET6) && (NETCONNTYPE_ISIPV6((sock)->conn->type))))
 115:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IPADDR_PORT_TO_SOCKADDR(sockaddr, ipaddr, port) do { \
 116:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (IP_IS_V6(ipaddr)) { \
 117:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       IP6ADDR_PORT_TO_SOCKADDR((struct sockaddr_in6*)(void*)(sockaddr), ip_2_ip6(ipaddr), port); \
 118:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else { \
 119:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       IP4ADDR_PORT_TO_SOCKADDR((struct sockaddr_in*)(void*)(sockaddr), ip_2_ip4(ipaddr), port); \
 120:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } } while(0)
 121:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SOCKADDR_TO_IPADDR_PORT(sockaddr, ipaddr, port) sockaddr_to_ipaddr_port(sockaddr, ipaddr, &
 122:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define DOMAIN_TO_NETCONN_TYPE(domain, type) (((domain) == AF_INET) ? \
 123:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   (type) : (enum netconn_type)((type) | NETCONN_TYPE_IPV6))
 124:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #elif LWIP_IPV6 /* LWIP_IPV4 && LWIP_IPV6 */
 125:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IS_SOCK_ADDR_LEN_VALID(namelen)  ((namelen) == sizeof(struct sockaddr_in6))
 126:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IS_SOCK_ADDR_TYPE_VALID(name)    ((name)->sa_family == AF_INET6)
 127:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SOCK_ADDR_TYPE_MATCH(name, sock) 1
 128:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IPADDR_PORT_TO_SOCKADDR(sockaddr, ipaddr, port) \
 129:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         IP6ADDR_PORT_TO_SOCKADDR((struct sockaddr_in6*)(void*)(sockaddr), ip_2_ip6(ipaddr), port)
 130:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SOCKADDR_TO_IPADDR_PORT(sockaddr, ipaddr, port) \
 131:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         SOCKADDR6_TO_IP6ADDR_PORT((const struct sockaddr_in6*)(const void*)(sockaddr), ipaddr, port
 132:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define DOMAIN_TO_NETCONN_TYPE(domain, netconn_type) (netconn_type)
 133:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /*-> LWIP_IPV4: LWIP_IPV4 && LWIP_IPV6 */
 134:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IS_SOCK_ADDR_LEN_VALID(namelen)  ((namelen) == sizeof(struct sockaddr_in))
 135:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IS_SOCK_ADDR_TYPE_VALID(name)    ((name)->sa_family == AF_INET)
 136:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SOCK_ADDR_TYPE_MATCH(name, sock) 1
 137:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IPADDR_PORT_TO_SOCKADDR(sockaddr, ipaddr, port) \
 138:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         IP4ADDR_PORT_TO_SOCKADDR((struct sockaddr_in*)(void*)(sockaddr), ip_2_ip4(ipaddr), port)
 139:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SOCKADDR_TO_IPADDR_PORT(sockaddr, ipaddr, port) \
 140:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         SOCKADDR4_TO_IP4ADDR_PORT((const struct sockaddr_in*)(const void*)(sockaddr), ipaddr, port)
 141:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define DOMAIN_TO_NETCONN_TYPE(domain, netconn_type) (netconn_type)
 142:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV6 */
 143:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 144:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IS_SOCK_ADDR_TYPE_VALID_OR_UNSPEC(name)    (((name)->sa_family == AF_UNSPEC) || \
 145:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                                     IS_SOCK_ADDR_TYPE_VALID(name))
 146:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SOCK_ADDR_TYPE_MATCH_OR_UNSPEC(name, sock) (((name)->sa_family == AF_UNSPEC) || \
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 4


 147:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                                     SOCK_ADDR_TYPE_MATCH(name, sock))
 148:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IS_SOCK_ADDR_ALIGNED(name)      ((((mem_ptr_t)(name)) % 4) == 0)
 149:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 150:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 151:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SOCKOPT_CHECK_OPTLEN(optlen, opttype) do { if ((optlen) < sizeof(opttype)) { return EI
 152:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SOCKOPT_CHECK_OPTLEN_CONN(sock, optlen, opttype) do { \
 153:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SOCKOPT_CHECK_OPTLEN(optlen, opttype); \
 154:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if ((sock)->conn == NULL) { return EINVAL; } }while(0)
 155:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, optlen, opttype) do { \
 156:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SOCKOPT_CHECK_OPTLEN(optlen, opttype); \
 157:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (((sock)->conn == NULL) || ((sock)->conn->pcb.tcp == NULL)) { return EINVAL; } }while(0)
 158:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, optlen, opttype, netconntype) do { \
 159:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, optlen, opttype); \
 160:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (NETCONNTYPE_GROUP(netconn_type((sock)->conn)) != netconntype) { return ENOPROTOOPT; } }while(
 161:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 162:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 163:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SETGETSOCKOPT_DATA_VAR_REF(name)     API_VAR_REF(name)
 164:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SETGETSOCKOPT_DATA_VAR_DECLARE(name) API_VAR_DECLARE(struct lwip_setgetsockopt_data, n
 165:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SETGETSOCKOPT_DATA_VAR_FREE(name)    API_VAR_FREE(MEMP_SOCKET_SETGETSOCKOPT_DATA, name
 166:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_MPU_COMPATIBLE
 167:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SETGETSOCKOPT_DATA_VAR_ALLOC(name, sock) do { \
 168:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   name = (struct lwip_setgetsockopt_data *)memp_malloc(MEMP_SOCKET_SETGETSOCKOPT_DATA); \
 169:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (name == NULL) { \
 170:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, ENOMEM); \
 171:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1; \
 172:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } }while(0)
 173:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_MPU_COMPATIBLE */
 174:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SETGETSOCKOPT_DATA_VAR_ALLOC(name, sock)
 175:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_MPU_COMPATIBLE */
 176:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 177:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_SNDRCVTIMEO_NONSTANDARD
 178:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SO_SNDRCVTIMEO_OPTTYPE int
 179:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SO_SNDRCVTIMEO_SET(optval, val) (*(int *)(optval) = (val))
 180:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SO_SNDRCVTIMEO_GET_MS(optval)   ((s32_t)*(const int*)(optval))
 181:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else
 182:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SO_SNDRCVTIMEO_OPTTYPE struct timeval
 183:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SO_SNDRCVTIMEO_SET(optval, val)  do { \
 184:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   s32_t loc = (val); \
 185:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   ((struct timeval *)(optval))->tv_sec = (loc) / 1000U; \
 186:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   ((struct timeval *)(optval))->tv_usec = ((loc) % 1000U) * 1000U; }while(0)
 187:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SO_SNDRCVTIMEO_GET_MS(optval) ((((const struct timeval *)(optval))->tv_sec * 1000U) + 
 188:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
 189:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 190:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define NUM_SOCKETS MEMP_NUM_NETCONN
 191:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 192:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** This is overridable for the rare case where more than 255 threads
 193:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * select on the same socket...
 194:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
 195:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #ifndef SELWAIT_T
 196:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SELWAIT_T u8_t
 197:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
 198:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 199:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** Contains all internal pointers and states used for a socket */
 200:Middlewares/Third_Party/LwIP/src/api/sockets.c **** struct lwip_sock {
 201:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** sockets currently are built on netconns, each socket has one netconn */
 202:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct netconn *conn;
 203:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** data that was left from the previous read */
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 5


 204:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   void *lastdata;
 205:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** offset in the data that was left from the previous read */
 206:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u16_t lastoffset;
 207:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** number of times data was received, set by event_callback(),
 208:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       tested by the receive and select functions */
 209:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   s16_t rcvevent;
 210:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** number of times data was ACKed (free send buffer), set by event_callback(),
 211:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       tested by select */
 212:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u16_t sendevent;
 213:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** error happened for this socket, set by event_callback(), tested by select */
 214:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u16_t errevent;
 215:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** last error that occurred on this socket (in fact, all our errnos fit into an u8_t) */
 216:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u8_t err;
 217:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** counter of how many threads are waiting for this socket using select */
 218:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SELWAIT_T select_waiting;
 219:Middlewares/Third_Party/LwIP/src/api/sockets.c **** };
 220:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 221:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETCONN_SEM_PER_THREAD
 222:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SELECT_SEM_T        sys_sem_t*
 223:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SELECT_SEM_PTR(sem) (sem)
 224:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_NETCONN_SEM_PER_THREAD */
 225:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SELECT_SEM_T        sys_sem_t
 226:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SELECT_SEM_PTR(sem) (&(sem))
 227:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_NETCONN_SEM_PER_THREAD */
 228:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 229:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** Description for a task waiting in select */
 230:Middlewares/Third_Party/LwIP/src/api/sockets.c **** struct lwip_select_cb {
 231:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** Pointer to the next waiting task */
 232:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_select_cb *next;
 233:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** Pointer to the previous waiting task */
 234:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_select_cb *prev;
 235:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** readset passed to select */
 236:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   fd_set *readset;
 237:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** writeset passed to select */
 238:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   fd_set *writeset;
 239:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** unimplemented: exceptset passed to select */
 240:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   fd_set *exceptset;
 241:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** don't signal the same semaphore twice: set to 1 when signalled */
 242:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int sem_signalled;
 243:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** semaphore to wake up a task waiting for select */
 244:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SELECT_SEM_T sem;
 245:Middlewares/Third_Party/LwIP/src/api/sockets.c **** };
 246:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 247:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** A struct sockaddr replacement that has the same alignment as sockaddr_in/
 248:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *  sockaddr_in6 if instantiated.
 249:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
 250:Middlewares/Third_Party/LwIP/src/api/sockets.c **** union sockaddr_aligned {
 251:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    struct sockaddr sa;
 252:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV6
 253:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    struct sockaddr_in6 sin6;
 254:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV6 */
 255:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV4
 256:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    struct sockaddr_in sin;
 257:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV4 */
 258:Middlewares/Third_Party/LwIP/src/api/sockets.c **** };
 259:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 260:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IGMP
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 6


 261:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Define the number of IPv4 multicast memberships, default is one per socket */
 262:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #ifndef LWIP_SOCKET_MAX_MEMBERSHIPS
 263:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SOCKET_MAX_MEMBERSHIPS NUM_SOCKETS
 264:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
 265:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 266:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* This is to keep track of IP_ADD_MEMBERSHIP calls to drop the membership when
 267:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    a socket is closed */
 268:Middlewares/Third_Party/LwIP/src/api/sockets.c **** struct lwip_socket_multicast_pair {
 269:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** the socket */
 270:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock* sock;
 271:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** the interface address */
 272:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   ip4_addr_t if_addr;
 273:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** the group address */
 274:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   ip4_addr_t multi_addr;
 275:Middlewares/Third_Party/LwIP/src/api/sockets.c **** };
 276:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 277:Middlewares/Third_Party/LwIP/src/api/sockets.c **** struct lwip_socket_multicast_pair socket_ipv4_multicast_memberships[LWIP_SOCKET_MAX_MEMBERSHIPS];
 278:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 279:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static int  lwip_socket_register_membership(int s, const ip4_addr_t *if_addr, const ip4_addr_t *mul
 280:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void lwip_socket_unregister_membership(int s, const ip4_addr_t *if_addr, const ip4_addr_t *m
 281:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void lwip_socket_drop_registered_memberships(int s);
 282:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IGMP */
 283:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 284:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** The global array of available sockets */
 285:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static struct lwip_sock sockets[NUM_SOCKETS];
 286:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** The global list of tasks waiting for select */
 287:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static struct lwip_select_cb *select_cb_list;
 288:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** This counter is increased from lwip_select when the list is changed
 289:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     and checked in event_callback to see if it has changed. */
 290:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static volatile int select_cb_ctr;
 291:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 292:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SOCKET_SET_ERRNO
 293:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #ifndef set_errno
 294:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define set_errno(err) do { if (err) { errno = (err); } } while(0)
 295:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
 296:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_SOCKET_SET_ERRNO */
 297:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define set_errno(err)
 298:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SOCKET_SET_ERRNO */
 299:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 300:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define sock_set_errno(sk, e) do { \
 301:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   const int sockerr = (e); \
 302:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sk->err = (u8_t)sockerr; \
 303:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   set_errno(sockerr); \
 304:Middlewares/Third_Party/LwIP/src/api/sockets.c **** } while (0)
 305:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 306:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Forward declaration of some functions */
 307:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void event_callback(struct netconn *conn, enum netconn_evt evt, u16_t len);
 308:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if !LWIP_TCPIP_CORE_LOCKING
 309:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void lwip_getsockopt_callback(void *arg);
 310:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void lwip_setsockopt_callback(void *arg);
 311:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
 312:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static u8_t lwip_getsockopt_impl(int s, int level, int optname, void *optval, socklen_t *optlen);
 313:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static u8_t lwip_setsockopt_impl(int s, int level, int optname, const void *optval, socklen_t optle
 314:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 315:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV4 && LWIP_IPV6
 316:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void
 317:Middlewares/Third_Party/LwIP/src/api/sockets.c **** sockaddr_to_ipaddr_port(const struct sockaddr* sockaddr, ip_addr_t* ipaddr, u16_t* port)
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 7


 318:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 319:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if ((sockaddr->sa_family) == AF_INET6) {
 320:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SOCKADDR6_TO_IP6ADDR_PORT((const struct sockaddr_in6*)(const void*)(sockaddr), ipaddr, *port);
 321:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ipaddr->type = IPADDR_TYPE_V6;
 322:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
 323:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SOCKADDR4_TO_IP4ADDR_PORT((const struct sockaddr_in*)(const void*)(sockaddr), ipaddr, *port);
 324:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ipaddr->type = IPADDR_TYPE_V4;
 325:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 326:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 327:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV4 && LWIP_IPV6 */
 328:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 329:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** LWIP_NETCONN_SEM_PER_THREAD==1: initialize thread-local semaphore */
 330:Middlewares/Third_Party/LwIP/src/api/sockets.c **** void
 331:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_socket_thread_init(void)
 332:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 333:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    netconn_thread_init();
 334:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 335:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 336:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** LWIP_NETCONN_SEM_PER_THREAD==1: destroy thread-local semaphore */
 337:Middlewares/Third_Party/LwIP/src/api/sockets.c **** void
 338:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_socket_thread_cleanup(void)
 339:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 340:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    netconn_thread_cleanup();
 341:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 342:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 343:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /**
 344:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Map a externally used socket index to the internal socket representation.
 345:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
 346:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param s externally used socket index
 347:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @return struct lwip_sock for the socket or NULL if not found
 348:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
 349:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static struct lwip_sock *
 350:Middlewares/Third_Party/LwIP/src/api/sockets.c **** get_socket(int s)
 351:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
  27              		.loc 1 351 0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              		@ link register save eliminated.
  32              	.LVL0:
 352:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 353:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 354:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   s -= LWIP_SOCKET_OFFSET;
 355:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 356:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if ((s < 0) || (s >= NUM_SOCKETS)) {
  33              		.loc 1 356 0
  34 0000 0328     		cmp	r0, #3
  35 0002 0CD8     		bhi	.L7
 351:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
  36              		.loc 1 351 0
  37 0004 10B4     		push	{r4}
  38              	.LCFI0:
  39              		.cfi_def_cfa_offset 4
  40              		.cfi_offset 4, -4
 357:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("get_socket(%d): invalid\n", s + LWIP_SOCKET_OFFSET));
 358:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     set_errno(EBADF);
 359:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return NULL;
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 8


 360:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 361:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 362:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = &sockets[s];
  41              		.loc 1 362 0
  42 0006 0B4C     		ldr	r4, .L9
  43 0008 8300     		lsls	r3, r0, #2
  44 000a 1918     		adds	r1, r3, r0
  45 000c 8A00     		lsls	r2, r1, #2
  46 000e 1146     		mov	r1, r2
  47 0010 2244     		add	r2, r2, r4
  48              	.LVL1:
 363:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 364:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock->conn) {
  49              		.loc 1 364 0
  50 0012 6358     		ldr	r3, [r4, r1]
  51 0014 4BB1     		cbz	r3, .L8
  52              	.LVL2:
  53              	.L1:
 365:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("get_socket(%d): not active\n", s + LWIP_SOCKET_OFFSET));
 366:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     set_errno(EBADF);
 367:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return NULL;
 368:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 369:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 370:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return sock;
 371:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
  54              		.loc 1 371 0
  55 0016 1046     		mov	r0, r2
  56              	.LVL3:
  57 0018 5DF8044B 		ldr	r4, [sp], #4
  58              	.LCFI1:
  59              		.cfi_restore 4
  60              		.cfi_def_cfa_offset 0
  61              	.LVL4:
  62 001c 7047     		bx	lr
  63              	.LVL5:
  64              	.L7:
 358:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return NULL;
  65              		.loc 1 358 0 discriminator 1
  66 001e 0922     		movs	r2, #9
  67 0020 054B     		ldr	r3, .L9+4
  68 0022 1A60     		str	r2, [r3]
 359:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
  69              		.loc 1 359 0 discriminator 1
  70 0024 0022     		movs	r2, #0
  71              		.loc 1 371 0 discriminator 1
  72 0026 1046     		mov	r0, r2
  73              	.LVL6:
  74 0028 7047     		bx	lr
  75              	.LVL7:
  76              	.L8:
  77              	.LCFI2:
  78              		.cfi_def_cfa_offset 4
  79              		.cfi_offset 4, -4
 366:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return NULL;
  80              		.loc 1 366 0 discriminator 1
  81 002a 0922     		movs	r2, #9
  82              	.LVL8:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 9


  83 002c 024B     		ldr	r3, .L9+4
  84 002e 1A60     		str	r2, [r3]
 367:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
  85              		.loc 1 367 0 discriminator 1
  86 0030 0022     		movs	r2, #0
  87 0032 F0E7     		b	.L1
  88              	.L10:
  89              		.align	2
  90              	.L9:
  91 0034 00000000 		.word	.LANCHOR0
  92 0038 00000000 		.word	errno
  93              		.cfi_endproc
  94              	.LFE159:
  96              		.section	.text.tryget_socket,"ax",%progbits
  97              		.align	1
  98              		.syntax unified
  99              		.thumb
 100              		.thumb_func
 101              		.fpu fpv5-sp-d16
 103              	tryget_socket:
 104              	.LFB160:
 372:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 373:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /**
 374:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Same as get_socket but doesn't set errno
 375:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
 376:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param s externally used socket index
 377:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @return struct lwip_sock for the socket or NULL if not found
 378:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
 379:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static struct lwip_sock *
 380:Middlewares/Third_Party/LwIP/src/api/sockets.c **** tryget_socket(int s)
 381:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 105              		.loc 1 381 0
 106              		.cfi_startproc
 107              		@ args = 0, pretend = 0, frame = 0
 108              		@ frame_needed = 0, uses_anonymous_args = 0
 109              		@ link register save eliminated.
 110              	.LVL9:
 382:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   s -= LWIP_SOCKET_OFFSET;
 383:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if ((s < 0) || (s >= NUM_SOCKETS)) {
 111              		.loc 1 383 0
 112 0000 0328     		cmp	r0, #3
 113 0002 0BD8     		bhi	.L13
 384:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return NULL;
 385:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 386:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sockets[s].conn) {
 114              		.loc 1 386 0
 115 0004 00EB8002 		add	r2, r0, r0, lsl #2
 116 0008 9300     		lsls	r3, r2, #2
 117 000a 064A     		ldr	r2, .L15
 118 000c D358     		ldr	r3, [r2, r3]
 119 000e 3BB1     		cbz	r3, .L14
 387:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return NULL;
 388:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 389:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return &sockets[s];
 120              		.loc 1 389 0
 121 0010 00EB8000 		add	r0, r0, r0, lsl #2
 122              	.LVL10:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 10


 123 0014 8300     		lsls	r3, r0, #2
 124 0016 1046     		mov	r0, r2
 125 0018 1844     		add	r0, r0, r3
 126 001a 7047     		bx	lr
 127              	.LVL11:
 128              	.L13:
 384:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return NULL;
 129              		.loc 1 384 0
 130 001c 0020     		movs	r0, #0
 131              	.LVL12:
 132 001e 7047     		bx	lr
 133              	.LVL13:
 134              	.L14:
 387:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return NULL;
 135              		.loc 1 387 0
 136 0020 0020     		movs	r0, #0
 137              	.LVL14:
 390:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 138              		.loc 1 390 0
 139 0022 7047     		bx	lr
 140              	.L16:
 141              		.align	2
 142              	.L15:
 143 0024 00000000 		.word	.LANCHOR0
 144              		.cfi_endproc
 145              	.LFE160:
 147              		.section	.text.lwip_setsockopt_impl,"ax",%progbits
 148              		.align	1
 149              		.syntax unified
 150              		.thumb
 151              		.thumb_func
 152              		.fpu fpv5-sp-d16
 154              	lwip_setsockopt_impl:
 155              	.LFB187:
 391:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 392:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /**
 393:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Allocate a new socket for a given netconn.
 394:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
 395:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param newconn the netconn for which to allocate a socket
 396:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param accepted 1 if socket has been created by accept(),
 397:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *                 0 if socket has been created by socket()
 398:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @return the index of the new socket; -1 on error
 399:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
 400:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static int
 401:Middlewares/Third_Party/LwIP/src/api/sockets.c **** alloc_socket(struct netconn *newconn, int accepted)
 402:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 403:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int i;
 404:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_DECL_PROTECT(lev);
 405:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 406:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* allocate a new socket identifier */
 407:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   for (i = 0; i < NUM_SOCKETS; ++i) {
 408:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Protect socket array */
 409:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SYS_ARCH_PROTECT(lev);
 410:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (!sockets[i].conn && (sockets[i].select_waiting == 0)) {
 411:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].conn       = newconn;
 412:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* The socket is not yet known to anyone, so no need to protect
 413:Middlewares/Third_Party/LwIP/src/api/sockets.c ****          after having marked it as used. */
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 11


 414:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       SYS_ARCH_UNPROTECT(lev);
 415:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].lastdata   = NULL;
 416:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].lastoffset = 0;
 417:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].rcvevent   = 0;
 418:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* TCP sendbuf is empty, but the socket is not yet writable until connected
 419:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        * (unless it has been created by accept()). */
 420:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].sendevent  = (NETCONNTYPE_GROUP(newconn->type) == NETCONN_TCP ? (accepted != 0) : 
 421:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].errevent   = 0;
 422:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].err        = 0;
 423:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return i + LWIP_SOCKET_OFFSET;
 424:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 425:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SYS_ARCH_UNPROTECT(lev);
 426:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 427:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return -1;
 428:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 429:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 430:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** Free a socket. The socket's netconn must have been
 431:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * delete before!
 432:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
 433:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param sock the socket to free
 434:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param is_tcp != 0 for TCP sockets, used to free lastdata
 435:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
 436:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void
 437:Middlewares/Third_Party/LwIP/src/api/sockets.c **** free_socket(struct lwip_sock *sock, int is_tcp)
 438:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 439:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   void *lastdata;
 440:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 441:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   lastdata         = sock->lastdata;
 442:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock->lastdata   = NULL;
 443:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock->lastoffset = 0;
 444:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock->err        = 0;
 445:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 446:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Protect socket array */
 447:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_SET(sock->conn, NULL);
 448:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* don't use 'sock' after this line, as another task might have allocated it */
 449:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 450:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (lastdata != NULL) {
 451:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (is_tcp) {
 452:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       pbuf_free((struct pbuf *)lastdata);
 453:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
 454:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       netbuf_delete((struct netbuf *)lastdata);
 455:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 456:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 457:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 458:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 459:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Below this, the well-known socket functions are implemented.
 460:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Use google.com or opengroup.org to get a good description :-)
 461:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
 462:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Exceptions are documented!
 463:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
 464:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 465:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
 466:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_accept(int s, struct sockaddr *addr, socklen_t *addrlen)
 467:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 468:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock, *nsock;
 469:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct netconn *newconn;
 470:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   ip_addr_t naddr;
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 12


 471:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u16_t port = 0;
 472:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int newsock;
 473:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err;
 474:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_DECL_PROTECT(lev);
 475:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 476:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_accept(%d)...\n", s));
 477:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = get_socket(s);
 478:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 479:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 480:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 481:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 482:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (netconn_is_nonblocking(sock->conn) && (sock->rcvevent <= 0)) {
 483:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_accept(%d): returning EWOULDBLOCK\n", s));
 484:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     set_errno(EWOULDBLOCK);
 485:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 486:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 487:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 488:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* wait for a new connection */
 489:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = netconn_accept(sock->conn, &newconn);
 490:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (err != ERR_OK) {
 491:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_accept(%d): netconn_acept failed, err=%d\n", s, err));
 492:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) != NETCONN_TCP) {
 493:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, EOPNOTSUPP);
 494:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else if (err == ERR_CLSD) {
 495:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, EINVAL);
 496:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
 497:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, err_to_errno(err));
 498:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 499:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 500:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 501:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ASSERT("newconn != NULL", newconn != NULL);
 502:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 503:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   newsock = alloc_socket(newconn, 1);
 504:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (newsock == -1) {
 505:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     netconn_delete(newconn);
 506:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, ENFILE);
 507:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 508:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 509:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ASSERT("invalid socket index", (newsock >= LWIP_SOCKET_OFFSET) && (newsock < NUM_SOCKETS + L
 510:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ASSERT("newconn->callback == event_callback", newconn->callback == event_callback);
 511:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   nsock = &sockets[newsock - LWIP_SOCKET_OFFSET];
 512:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 513:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* See event_callback: If data comes in right away after an accept, even
 514:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    * though the server task might not have created a new socket yet.
 515:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    * In that case, newconn->socket is counted down (newconn->socket--),
 516:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    * so nsock->rcvevent is >= 1 here!
 517:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    */
 518:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_PROTECT(lev);
 519:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   nsock->rcvevent += (s16_t)(-1 - newconn->socket);
 520:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   newconn->socket = newsock;
 521:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_UNPROTECT(lev);
 522:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 523:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Note that POSIX only requires us to check addr is non-NULL. addrlen must
 524:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    * not be NULL if addr is valid.
 525:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    */
 526:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (addr != NULL) {
 527:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     union sockaddr_aligned tempaddr;
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 13


 528:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* get the IP address and port of the remote host */
 529:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     err = netconn_peer(newconn, &naddr, &port);
 530:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (err != ERR_OK) {
 531:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_accept(%d): netconn_peer failed, err=%d\n", s, err));
 532:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       netconn_delete(newconn);
 533:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       free_socket(nsock, 1);
 534:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, err_to_errno(err));
 535:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
 536:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 537:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_ASSERT("addr valid but addrlen NULL", addrlen != NULL);
 538:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 539:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     IPADDR_PORT_TO_SOCKADDR(&tempaddr, &naddr, port);
 540:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (*addrlen > tempaddr.sa.sa_len) {
 541:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *addrlen = tempaddr.sa.sa_len;
 542:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 543:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     MEMCPY(addr, &tempaddr, *addrlen);
 544:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 545:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_accept(%d) returning new sock=%d addr=", s, newsock));
 546:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ip_addr_debug_print_val(SOCKETS_DEBUG, naddr);
 547:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, (" port=%"U16_F"\n", port));
 548:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
 549:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_accept(%d) returning new sock=%d", s, newsock));
 550:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 551:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 552:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, 0);
 553:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return newsock;
 554:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 555:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 556:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
 557:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_bind(int s, const struct sockaddr *name, socklen_t namelen)
 558:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 559:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 560:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   ip_addr_t local_addr;
 561:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u16_t local_port;
 562:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err;
 563:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 564:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = get_socket(s);
 565:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 566:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 567:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 568:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 569:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!SOCK_ADDR_TYPE_MATCH(name, sock)) {
 570:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* sockaddr does not match socket type (IPv4/IPv6) */
 571:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(ERR_VAL));
 572:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 573:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 574:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 575:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* check size, family and alignment of 'name' */
 576:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ERROR("lwip_bind: invalid address", (IS_SOCK_ADDR_LEN_VALID(namelen) &&
 577:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              IS_SOCK_ADDR_TYPE_VALID(name) && IS_SOCK_ADDR_ALIGNED(name)),
 578:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              sock_set_errno(sock, err_to_errno(ERR_ARG)); return -1;);
 579:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_UNUSED_ARG(namelen);
 580:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 581:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SOCKADDR_TO_IPADDR_PORT(name, &local_addr, local_port);
 582:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_bind(%d, addr=", s));
 583:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   ip_addr_debug_print_val(SOCKETS_DEBUG, local_addr);
 584:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, (" port=%"U16_F")\n", local_port));
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 14


 585:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 586:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV4 && LWIP_IPV6
 587:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Dual-stack: Unmap IPv4 mapped IPv6 addresses */
 588:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (IP_IS_V6_VAL(local_addr) && ip6_addr_isipv4mappedipv6(ip_2_ip6(&local_addr))) {
 589:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     unmap_ipv4_mapped_ipv6(ip_2_ip4(&local_addr), ip_2_ip6(&local_addr));
 590:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     IP_SET_TYPE_VAL(local_addr, IPADDR_TYPE_V4);
 591:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 592:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV4 && LWIP_IPV6 */
 593:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 594:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = netconn_bind(sock->conn, &local_addr, local_port);
 595:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 596:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (err != ERR_OK) {
 597:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_bind(%d) failed, err=%d\n", s, err));
 598:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(err));
 599:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 600:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 601:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 602:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_bind(%d) succeeded\n", s));
 603:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, 0);
 604:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return 0;
 605:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 606:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 607:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
 608:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_close(int s)
 609:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 610:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 611:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int is_tcp = 0;
 612:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err;
 613:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 614:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_close(%d)\n", s));
 615:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 616:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = get_socket(s);
 617:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 618:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 619:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 620:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 621:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (sock->conn != NULL) {
 622:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     is_tcp = NETCONNTYPE_GROUP(netconn_type(sock->conn)) == NETCONN_TCP;
 623:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
 624:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_ASSERT("sock->lastdata == NULL", sock->lastdata == NULL);
 625:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 626:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 627:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IGMP
 628:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* drop all possibly joined IGMP memberships */
 629:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   lwip_socket_drop_registered_memberships(s);
 630:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IGMP */
 631:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 632:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = netconn_delete(sock->conn);
 633:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (err != ERR_OK) {
 634:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(err));
 635:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 636:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 637:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 638:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   free_socket(sock, is_tcp);
 639:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   set_errno(0);
 640:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return 0;
 641:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 15


 642:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 643:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
 644:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_connect(int s, const struct sockaddr *name, socklen_t namelen)
 645:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 646:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 647:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err;
 648:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 649:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = get_socket(s);
 650:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 651:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 652:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 653:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 654:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!SOCK_ADDR_TYPE_MATCH_OR_UNSPEC(name, sock)) {
 655:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* sockaddr does not match socket type (IPv4/IPv6) */
 656:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(ERR_VAL));
 657:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 658:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 659:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 660:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_UNUSED_ARG(namelen);
 661:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (name->sa_family == AF_UNSPEC) {
 662:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_connect(%d, AF_UNSPEC)\n", s));
 663:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     err = netconn_disconnect(sock->conn);
 664:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
 665:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ip_addr_t remote_addr;
 666:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     u16_t remote_port;
 667:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 668:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* check size, family and alignment of 'name' */
 669:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_ERROR("lwip_connect: invalid address", IS_SOCK_ADDR_LEN_VALID(namelen) &&
 670:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                IS_SOCK_ADDR_TYPE_VALID_OR_UNSPEC(name) && IS_SOCK_ADDR_ALIGNED(name),
 671:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                sock_set_errno(sock, err_to_errno(ERR_ARG)); return -1;);
 672:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 673:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SOCKADDR_TO_IPADDR_PORT(name, &remote_addr, remote_port);
 674:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_connect(%d, addr=", s));
 675:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ip_addr_debug_print_val(SOCKETS_DEBUG, remote_addr);
 676:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, (" port=%"U16_F")\n", remote_port));
 677:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 678:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV4 && LWIP_IPV6
 679:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Dual-stack: Unmap IPv4 mapped IPv6 addresses */
 680:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (IP_IS_V6_VAL(remote_addr) && ip6_addr_isipv4mappedipv6(ip_2_ip6(&remote_addr))) {
 681:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       unmap_ipv4_mapped_ipv6(ip_2_ip4(&remote_addr), ip_2_ip6(&remote_addr));
 682:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       IP_SET_TYPE_VAL(remote_addr, IPADDR_TYPE_V4);
 683:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 684:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV4 && LWIP_IPV6 */
 685:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 686:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     err = netconn_connect(sock->conn, &remote_addr, remote_port);
 687:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 688:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 689:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (err != ERR_OK) {
 690:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_connect(%d) failed, err=%d\n", s, err));
 691:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(err));
 692:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 693:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 694:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 695:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_connect(%d) succeeded\n", s));
 696:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, 0);
 697:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return 0;
 698:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 16


 699:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 700:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /**
 701:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Set a socket into listen mode.
 702:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * The socket may not have been used for another connection previously.
 703:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
 704:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param s the socket to set to listening mode
 705:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param backlog (ATTENTION: needs TCP_LISTEN_BACKLOG=1)
 706:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @return 0 on success, non-zero on failure
 707:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
 708:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
 709:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_listen(int s, int backlog)
 710:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 711:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 712:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err;
 713:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 714:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_listen(%d, backlog=%d)\n", s, backlog));
 715:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 716:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = get_socket(s);
 717:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 718:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 719:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 720:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 721:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* limit the "backlog" parameter to fit in an u8_t */
 722:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   backlog = LWIP_MIN(LWIP_MAX(backlog, 0), 0xff);
 723:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 724:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = netconn_listen_with_backlog(sock->conn, (u8_t)backlog);
 725:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 726:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (err != ERR_OK) {
 727:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_listen(%d) failed, err=%d\n", s, err));
 728:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) != NETCONN_TCP) {
 729:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, EOPNOTSUPP);
 730:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
 731:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 732:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(err));
 733:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 734:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 735:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 736:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, 0);
 737:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return 0;
 738:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 739:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 740:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
 741:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_recvfrom(int s, void *mem, size_t len, int flags,
 742:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               struct sockaddr *from, socklen_t *fromlen)
 743:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 744:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 745:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   void             *buf = NULL;
 746:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct pbuf      *p;
 747:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u16_t            buflen, copylen;
 748:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int              off = 0;
 749:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u8_t             done = 0;
 750:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t            err;
 751:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 752:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recvfrom(%d, %p, %"SZT_F", 0x%x, ..)\n", s, mem, len, flags));
 753:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = get_socket(s);
 754:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 755:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 17


 756:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 757:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 758:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   do {
 759:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recvfrom: top while sock->lastdata=%p\n", sock->lastdata));
 760:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Check if there is data left from the last recv operation. */
 761:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (sock->lastdata) {
 762:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       buf = sock->lastdata;
 763:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
 764:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* If this is non-blocking call, then check first */
 765:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (((flags & MSG_DONTWAIT) || netconn_is_nonblocking(sock->conn)) &&
 766:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (sock->rcvevent <= 0)) {
 767:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (off > 0) {
 768:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           /* already received data, return that */
 769:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           sock_set_errno(sock, 0);
 770:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           return off;
 771:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 772:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recvfrom(%d): returning EWOULDBLOCK\n", s));
 773:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         set_errno(EWOULDBLOCK);
 774:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return -1;
 775:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 776:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 777:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* No data was left from the previous operation, so we try to get
 778:Middlewares/Third_Party/LwIP/src/api/sockets.c ****          some from the network. */
 779:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) == NETCONN_TCP) {
 780:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         err = netconn_recv_tcp_pbuf(sock->conn, (struct pbuf **)&buf);
 781:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
 782:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         err = netconn_recv(sock->conn, (struct netbuf **)&buf);
 783:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 784:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recvfrom: netconn_recv err=%d, netbuf=%p\n",
 785:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         err, buf));
 786:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 787:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (err != ERR_OK) {
 788:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (off > 0) {
 789:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (err == ERR_CLSD) {
 790:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             /* closed but already received data, ensure select gets the FIN, too */
 791:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             event_callback(sock->conn, NETCONN_EVT_RCVPLUS, 0);
 792:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
 793:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           /* already received data, return that */
 794:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           sock_set_errno(sock, 0);
 795:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           return off;
 796:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 797:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* We should really do some error checking here. */
 798:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recvfrom(%d): buf == NULL, error is \"%s\"!\n",
 799:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           s, lwip_strerr(err)));
 800:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock_set_errno(sock, err_to_errno(err));
 801:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (err == ERR_CLSD) {
 802:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           return 0;
 803:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
 804:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           return -1;
 805:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 806:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 807:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_ASSERT("buf != NULL", buf != NULL);
 808:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->lastdata = buf;
 809:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 810:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 811:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) == NETCONN_TCP) {
 812:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       p = (struct pbuf *)buf;
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 18


 813:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
 814:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       p = ((struct netbuf *)buf)->p;
 815:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 816:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     buflen = p->tot_len;
 817:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recvfrom: buflen=%"U16_F" len=%"SZT_F" off=%d sock->lastoffse
 818:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       buflen, len, off, sock->lastoffset));
 819:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 820:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     buflen -= sock->lastoffset;
 821:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 822:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (len > buflen) {
 823:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       copylen = buflen;
 824:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
 825:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       copylen = (u16_t)len;
 826:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 827:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 828:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* copy the contents of the received buffer into
 829:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     the supplied memory pointer mem */
 830:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     pbuf_copy_partial(p, (u8_t*)mem + off, copylen, sock->lastoffset);
 831:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 832:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     off += copylen;
 833:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 834:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) == NETCONN_TCP) {
 835:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_ASSERT("invalid copylen, len would underflow", len >= copylen);
 836:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       len -= copylen;
 837:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((len <= 0) ||
 838:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (p->flags & PBUF_FLAG_PUSH) ||
 839:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (sock->rcvevent <= 0) ||
 840:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           ((flags & MSG_PEEK) != 0)) {
 841:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         done = 1;
 842:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 843:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
 844:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       done = 1;
 845:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 846:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 847:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Check to see from where the data was.*/
 848:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (done) {
 849:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if !SOCKETS_DEBUG
 850:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (from && fromlen)
 851:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* !SOCKETS_DEBUG */
 852:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       {
 853:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         u16_t port;
 854:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         ip_addr_t tmpaddr;
 855:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         ip_addr_t *fromaddr;
 856:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         union sockaddr_aligned saddr;
 857:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recvfrom(%d): addr=", s));
 858:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) == NETCONN_TCP) {
 859:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           fromaddr = &tmpaddr;
 860:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           netconn_getaddr(sock->conn, fromaddr, &port, 0);
 861:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
 862:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           port = netbuf_fromport((struct netbuf *)buf);
 863:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           fromaddr = netbuf_fromaddr((struct netbuf *)buf);
 864:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 865:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 866:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV4 && LWIP_IPV6
 867:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* Dual-stack: Map IPv4 addresses to IPv4 mapped IPv6 */
 868:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (NETCONNTYPE_ISIPV6(netconn_type(sock->conn)) && IP_IS_V4(fromaddr)) {
 869:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           ip4_2_ipv4_mapped_ipv6(ip_2_ip6(fromaddr), ip_2_ip4(fromaddr));
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 19


 870:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           IP_SET_TYPE(fromaddr, IPADDR_TYPE_V6);
 871:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 872:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV4 && LWIP_IPV6 */
 873:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 874:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         IPADDR_PORT_TO_SOCKADDR(&saddr, fromaddr, port);
 875:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         ip_addr_debug_print(SOCKETS_DEBUG, fromaddr);
 876:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, (" port=%"U16_F" len=%d\n", port, off));
 877:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if SOCKETS_DEBUG
 878:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (from && fromlen)
 879:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* SOCKETS_DEBUG */
 880:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         {
 881:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (*fromlen > saddr.sa.sa_len) {
 882:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             *fromlen = saddr.sa.sa_len;
 883:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
 884:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           MEMCPY(from, &saddr, *fromlen);
 885:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 886:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 887:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 888:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 889:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* If we don't peek the incoming message... */
 890:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if ((flags & MSG_PEEK) == 0) {
 891:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* If this is a TCP socket, check if there is data left in the
 892:Middlewares/Third_Party/LwIP/src/api/sockets.c ****          buffer. If so, it should be saved in the sock structure for next
 893:Middlewares/Third_Party/LwIP/src/api/sockets.c ****          time around. */
 894:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((NETCONNTYPE_GROUP(netconn_type(sock->conn)) == NETCONN_TCP) && (buflen - copylen > 0)) {
 895:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock->lastdata = buf;
 896:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock->lastoffset += copylen;
 897:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recvfrom: lastdata now netbuf=%p\n", buf));
 898:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
 899:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock->lastdata = NULL;
 900:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock->lastoffset = 0;
 901:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recvfrom: deleting netbuf=%p\n", buf));
 902:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) == NETCONN_TCP) {
 903:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           pbuf_free((struct pbuf *)buf);
 904:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
 905:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           netbuf_delete((struct netbuf *)buf);
 906:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 907:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         buf = NULL;
 908:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 909:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 910:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } while (!done);
 911:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 912:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, 0);
 913:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return off;
 914:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 915:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 916:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
 917:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_read(int s, void *mem, size_t len)
 918:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 919:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return lwip_recvfrom(s, mem, len, 0, NULL, NULL);
 920:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 921:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 922:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
 923:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_recv(int s, void *mem, size_t len, int flags)
 924:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 925:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return lwip_recvfrom(s, mem, len, flags, NULL, NULL);
 926:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 20


 927:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 928:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
 929:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_send(int s, const void *data, size_t size, int flags)
 930:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 931:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 932:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err;
 933:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u8_t write_flags;
 934:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   size_t written;
 935:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 936:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_send(%d, data=%p, size=%"SZT_F", flags=0x%x)\n",
 937:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                               s, data, size, flags));
 938:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 939:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = get_socket(s);
 940:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 941:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 942:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 943:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 944:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) != NETCONN_TCP) {
 945:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if (LWIP_UDP || LWIP_RAW)
 946:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return lwip_sendto(s, data, size, flags, NULL, 0);
 947:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* (LWIP_UDP || LWIP_RAW) */
 948:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(ERR_ARG));
 949:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 950:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* (LWIP_UDP || LWIP_RAW) */
 951:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 952:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 953:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   write_flags = NETCONN_COPY |
 954:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ((flags & MSG_MORE)     ? NETCONN_MORE      : 0) |
 955:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ((flags & MSG_DONTWAIT) ? NETCONN_DONTBLOCK : 0);
 956:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   written = 0;
 957:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = netconn_write_partly(sock->conn, data, size, write_flags, &written);
 958:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 959:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_send(%d) err=%d written=%"SZT_F"\n", s, err, written));
 960:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, err_to_errno(err));
 961:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return (err == ERR_OK ? (int)written : -1);
 962:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 963:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 964:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
 965:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_sendmsg(int s, const struct msghdr *msg, int flags)
 966:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 967:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 968:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int i;
 969:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCP
 970:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u8_t write_flags;
 971:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   size_t written;
 972:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
 973:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int size = 0;
 974:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err = ERR_OK;
 975:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 976:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = get_socket(s);
 977:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 978:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 979:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 980:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 981:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ERROR("lwip_sendmsg: invalid msghdr", msg != NULL,
 982:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              sock_set_errno(sock, err_to_errno(ERR_ARG)); return -1;);
 983:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 21


 984:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_UNUSED_ARG(msg->msg_control);
 985:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_UNUSED_ARG(msg->msg_controllen);
 986:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_UNUSED_ARG(msg->msg_flags);
 987:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ERROR("lwip_sendmsg: invalid msghdr iov", (msg->msg_iov != NULL && msg->msg_iovlen != 0),
 988:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              sock_set_errno(sock, err_to_errno(ERR_ARG)); return -1;);
 989:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 990:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) == NETCONN_TCP) {
 991:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCP
 992:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     write_flags = NETCONN_COPY |
 993:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ((flags & MSG_MORE)     ? NETCONN_MORE      : 0) |
 994:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ((flags & MSG_DONTWAIT) ? NETCONN_DONTBLOCK : 0);
 995:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 996:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     for (i = 0; i < msg->msg_iovlen; i++) {
 997:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       u8_t apiflags = write_flags;
 998:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (i + 1 < msg->msg_iovlen) {
 999:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         apiflags |= NETCONN_MORE;
1000:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1001:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       written = 0;
1002:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = netconn_write_partly(sock->conn, msg->msg_iov[i].iov_base, msg->msg_iov[i].iov_len, wri
1003:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (err == ERR_OK) {
1004:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         size += written;
1005:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* check that the entire IO vector was accepected, if not return a partial write */
1006:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (written != msg->msg_iov[i].iov_len)
1007:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
1008:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1009:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* none of this IO vector was accepted, but previous was, return partial write and conceal ER
1010:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       else if (err == ERR_WOULDBLOCK && size > 0) {
1011:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         err = ERR_OK;
1012:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* let ERR_WOULDBLOCK persist on the netconn since we are returning ERR_OK */
1013:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         break;
1014:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
1015:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         size = -1;
1016:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         break;
1017:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1018:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1019:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(err));
1020:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return size;
1021:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_TCP */
1022:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(ERR_ARG));
1023:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
1024:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_TCP */
1025:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1026:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* else, UDP and RAW NETCONNs */
1027:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDP || LWIP_RAW
1028:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   {
1029:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     struct netbuf *chain_buf;
1030:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1031:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_UNUSED_ARG(flags);
1032:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_ERROR("lwip_sendmsg: invalid msghdr name", (((msg->msg_name == NULL) && (msg->msg_namelen 
1033:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                IS_SOCK_ADDR_LEN_VALID(msg->msg_namelen)) ,
1034:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                sock_set_errno(sock, err_to_errno(ERR_ARG)); return -1;);
1035:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1036:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* initialize chain buffer with destination */
1037:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     chain_buf = netbuf_new();
1038:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (!chain_buf) {
1039:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, err_to_errno(ERR_MEM));
1040:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 22


1041:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1042:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (msg->msg_name) {
1043:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       u16_t remote_port;
1044:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       SOCKADDR_TO_IPADDR_PORT((const struct sockaddr *)msg->msg_name, &chain_buf->addr, remote_port
1045:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       netbuf_fromport(chain_buf) = remote_port;
1046:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1047:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETIF_TX_SINGLE_PBUF
1048:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     for (i = 0; i < msg->msg_iovlen; i++) {
1049:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       size += msg->msg_iov[i].iov_len;
1050:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1051:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Allocate a new netbuf and copy the data into it. */
1052:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (netbuf_alloc(chain_buf, (u16_t)size) == NULL) {
1053:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        err = ERR_MEM;
1054:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
1055:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* flatten the IO vectors */
1056:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       size_t offset = 0;
1057:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       for (i = 0; i < msg->msg_iovlen; i++) {
1058:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         MEMCPY(&((u8_t*)chain_buf->p->payload)[offset], msg->msg_iov[i].iov_base, msg->msg_iov[i].i
1059:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         offset += msg->msg_iov[i].iov_len;
1060:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1061:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_CHECKSUM_ON_COPY
1062:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       {
1063:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* This can be improved by using LWIP_CHKSUM_COPY() and aggregating the checksum for each I
1064:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         u16_t chksum = ~inet_chksum_pbuf(chain_buf->p);
1065:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         netbuf_set_chksum(chain_buf, chksum);
1066:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1067:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_CHECKSUM_ON_COPY */
1068:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = ERR_OK;
1069:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1070:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_NETIF_TX_SINGLE_PBUF */
1071:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* create a chained netbuf from the IO vectors. NOTE: we assemble a pbuf chain
1072:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        manually to avoid having to allocate, chain, and delete a netbuf for each iov */
1073:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     for (i = 0; i < msg->msg_iovlen; i++) {
1074:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       struct pbuf *p = pbuf_alloc(PBUF_TRANSPORT, 0, PBUF_REF);
1075:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (p == NULL) {
1076:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         err = ERR_MEM; /* let netbuf_delete() cleanup chain_buf */
1077:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         break;
1078:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1079:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       p->payload = msg->msg_iov[i].iov_base;
1080:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_ASSERT("iov_len < u16_t", msg->msg_iov[i].iov_len <= 0xFFFF);
1081:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       p->len = p->tot_len = (u16_t)msg->msg_iov[i].iov_len;
1082:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* netbuf empty, add new pbuf */
1083:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (chain_buf->p == NULL) {
1084:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         chain_buf->p = chain_buf->ptr = p;
1085:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* add pbuf to existing pbuf chain */
1086:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
1087:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         pbuf_cat(chain_buf->p, p);
1088:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1089:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1090:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* save size of total chain */
1091:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (err == ERR_OK) {
1092:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       size = netbuf_len(chain_buf);
1093:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1094:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_NETIF_TX_SINGLE_PBUF */
1095:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1096:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (err == ERR_OK) {
1097:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV4 && LWIP_IPV6
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 23


1098:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* Dual-stack: Unmap IPv4 mapped IPv6 addresses */
1099:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (IP_IS_V6_VAL(chain_buf->addr) && ip6_addr_isipv4mappedipv6(ip_2_ip6(&chain_buf->addr))) {
1100:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         unmap_ipv4_mapped_ipv6(ip_2_ip4(&chain_buf->addr), ip_2_ip6(&chain_buf->addr));
1101:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         IP_SET_TYPE_VAL(chain_buf->addr, IPADDR_TYPE_V4);
1102:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1103:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV4 && LWIP_IPV6 */
1104:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1105:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* send the data */
1106:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = netconn_send(sock->conn, chain_buf);
1107:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1108:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1109:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* deallocated the buffer */
1110:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     netbuf_delete(chain_buf);
1111:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1112:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(err));
1113:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return (err == ERR_OK ? size : -1);
1114:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1115:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_UDP || LWIP_RAW */
1116:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, err_to_errno(ERR_ARG));
1117:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return -1;
1118:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_UDP || LWIP_RAW */
1119:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
1120:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1121:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
1122:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_sendto(int s, const void *data, size_t size, int flags,
1123:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        const struct sockaddr *to, socklen_t tolen)
1124:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
1125:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
1126:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err;
1127:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u16_t short_size;
1128:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u16_t remote_port;
1129:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct netbuf buf;
1130:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1131:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = get_socket(s);
1132:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
1133:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
1134:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1135:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1136:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) == NETCONN_TCP) {
1137:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCP
1138:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return lwip_send(s, data, size, flags);
1139:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_TCP */
1140:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_UNUSED_ARG(flags);
1141:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(ERR_ARG));
1142:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
1143:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_TCP */
1144:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1145:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1146:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* @todo: split into multiple sendto's? */
1147:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ASSERT("lwip_sendto: size must fit in u16_t", size <= 0xffff);
1148:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   short_size = (u16_t)size;
1149:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ERROR("lwip_sendto: invalid address", (((to == NULL) && (tolen == 0)) ||
1150:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              (IS_SOCK_ADDR_LEN_VALID(tolen) &&
1151:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              IS_SOCK_ADDR_TYPE_VALID(to) && IS_SOCK_ADDR_ALIGNED(to))),
1152:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              sock_set_errno(sock, err_to_errno(ERR_ARG)); return -1;);
1153:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_UNUSED_ARG(tolen);
1154:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 24


1155:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* initialize a buffer */
1156:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   buf.p = buf.ptr = NULL;
1157:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_CHECKSUM_ON_COPY
1158:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   buf.flags = 0;
1159:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_CHECKSUM_ON_COPY */
1160:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (to) {
1161:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SOCKADDR_TO_IPADDR_PORT(to, &buf.addr, remote_port);
1162:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
1163:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     remote_port = 0;
1164:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ip_addr_set_any(NETCONNTYPE_ISIPV6(netconn_type(sock->conn)), &buf.addr);
1165:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1166:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   netbuf_fromport(&buf) = remote_port;
1167:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1168:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1169:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_sendto(%d, data=%p, short_size=%"U16_F", flags=0x%x to=",
1170:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               s, data, short_size, flags));
1171:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   ip_addr_debug_print(SOCKETS_DEBUG, &buf.addr);
1172:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, (" port=%"U16_F"\n", remote_port));
1173:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1174:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* make the buffer point to the data that should be sent */
1175:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETIF_TX_SINGLE_PBUF
1176:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Allocate a new netbuf and copy the data into it. */
1177:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (netbuf_alloc(&buf, short_size) == NULL) {
1178:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     err = ERR_MEM;
1179:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
1180:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_CHECKSUM_ON_COPY
1181:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) != NETCONN_RAW) {
1182:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       u16_t chksum = LWIP_CHKSUM_COPY(buf.p->payload, data, short_size);
1183:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       netbuf_set_chksum(&buf, chksum);
1184:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else
1185:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_CHECKSUM_ON_COPY */
1186:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     {
1187:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       MEMCPY(buf.p->payload, data, short_size);
1188:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1189:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     err = ERR_OK;
1190:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1191:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_NETIF_TX_SINGLE_PBUF */
1192:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = netbuf_ref(&buf, data, short_size);
1193:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_NETIF_TX_SINGLE_PBUF */
1194:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (err == ERR_OK) {
1195:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV4 && LWIP_IPV6
1196:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Dual-stack: Unmap IPv4 mapped IPv6 addresses */
1197:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (IP_IS_V6_VAL(buf.addr) && ip6_addr_isipv4mappedipv6(ip_2_ip6(&buf.addr))) {
1198:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       unmap_ipv4_mapped_ipv6(ip_2_ip4(&buf.addr), ip_2_ip6(&buf.addr));
1199:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       IP_SET_TYPE_VAL(buf.addr, IPADDR_TYPE_V4);
1200:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1201:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV4 && LWIP_IPV6 */
1202:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1203:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* send the data */
1204:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     err = netconn_send(sock->conn, &buf);
1205:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1206:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1207:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* deallocated the buffer */
1208:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   netbuf_free(&buf);
1209:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1210:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, err_to_errno(err));
1211:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return (err == ERR_OK ? short_size : -1);
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 25


1212:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
1213:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1214:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
1215:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_socket(int domain, int type, int protocol)
1216:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
1217:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct netconn *conn;
1218:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int i;
1219:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1220:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_UNUSED_ARG(domain); /* @todo: check this */
1221:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1222:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* create a netconn */
1223:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   switch (type) {
1224:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case SOCK_RAW:
1225:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     conn = netconn_new_with_proto_and_callback(DOMAIN_TO_NETCONN_TYPE(domain, NETCONN_RAW),
1226:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                                (u8_t)protocol, event_callback);
1227:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_socket(%s, SOCK_RAW, %d) = ",
1228:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                  domain == PF_INET ? "PF_INET" : "UNKNOWN", protocol));
1229:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
1230:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case SOCK_DGRAM:
1231:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     conn = netconn_new_with_callback(DOMAIN_TO_NETCONN_TYPE(domain,
1232:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                  ((protocol == IPPROTO_UDPLITE) ? NETCONN_UDPLITE : NETCONN_UDP)) ,
1233:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                  event_callback);
1234:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_socket(%s, SOCK_DGRAM, %d) = ",
1235:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                  domain == PF_INET ? "PF_INET" : "UNKNOWN", protocol));
1236:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
1237:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case SOCK_STREAM:
1238:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     conn = netconn_new_with_callback(DOMAIN_TO_NETCONN_TYPE(domain, NETCONN_TCP), event_callback);
1239:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_socket(%s, SOCK_STREAM, %d) = ",
1240:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                  domain == PF_INET ? "PF_INET" : "UNKNOWN", protocol));
1241:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
1242:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   default:
1243:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_socket(%d, %d/UNKNOWN, %d) = -1\n",
1244:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                  domain, type, protocol));
1245:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     set_errno(EINVAL);
1246:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
1247:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1248:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1249:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!conn) {
1250:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("-1 / ENOBUFS (could not create netconn)\n"));
1251:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     set_errno(ENOBUFS);
1252:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
1253:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1254:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1255:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   i = alloc_socket(conn, 0);
1256:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1257:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (i == -1) {
1258:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     netconn_delete(conn);
1259:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     set_errno(ENFILE);
1260:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
1261:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1262:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   conn->socket = i;
1263:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("%d\n", i));
1264:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   set_errno(0);
1265:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return i;
1266:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
1267:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1268:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 26


1269:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_write(int s, const void *data, size_t size)
1270:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
1271:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return lwip_send(s, data, size, 0);
1272:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
1273:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1274:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
1275:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_writev(int s, const struct iovec *iov, int iovcnt)
1276:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
1277:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct msghdr msg;
1278:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1279:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_name = NULL;
1280:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_namelen = 0;
1281:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Hack: we have to cast via number to cast from 'const' pointer to non-const.
1282:Middlewares/Third_Party/LwIP/src/api/sockets.c ****      Blame the opengroup standard for this inconsistency. */
1283:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_iov = LWIP_CONST_CAST(struct iovec *, iov);
1284:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_iovlen = iovcnt;
1285:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_control = NULL;
1286:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_controllen = 0;
1287:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_flags = 0;
1288:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return lwip_sendmsg(s, &msg, 0);
1289:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
1290:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1291:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /**
1292:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Go through the readset and writeset lists and see which socket of the sockets
1293:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * set in the sets has events. On return, readset, writeset and exceptset have
1294:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * the sockets enabled that had events.
1295:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
1296:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param maxfdp1 the highest socket index in the sets
1297:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param readset_in    set of sockets to check for read events
1298:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param writeset_in   set of sockets to check for write events
1299:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param exceptset_in  set of sockets to check for error events
1300:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param readset_out   set of sockets that had read events
1301:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param writeset_out  set of sockets that had write events
1302:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param exceptset_out set os sockets that had error events
1303:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @return number of sockets that had events (read/write/exception) (>= 0)
1304:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
1305:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static int
1306:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_selscan(int maxfdp1, fd_set *readset_in, fd_set *writeset_in, fd_set *exceptset_in,
1307:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              fd_set *readset_out, fd_set *writeset_out, fd_set *exceptset_out)
1308:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
1309:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int i, nready = 0;
1310:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   fd_set lreadset, lwriteset, lexceptset;
1311:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
1312:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_DECL_PROTECT(lev);
1313:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1314:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   FD_ZERO(&lreadset);
1315:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   FD_ZERO(&lwriteset);
1316:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   FD_ZERO(&lexceptset);
1317:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1318:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Go through each socket in each list to count number of sockets which
1319:Middlewares/Third_Party/LwIP/src/api/sockets.c ****      currently match */
1320:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   for (i = LWIP_SOCKET_OFFSET; i < maxfdp1; i++) {
1321:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* if this FD is not in the set, continue */
1322:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (!(readset_in && FD_ISSET(i, readset_in)) &&
1323:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         !(writeset_in && FD_ISSET(i, writeset_in)) &&
1324:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         !(exceptset_in && FD_ISSET(i, exceptset_in))) {
1325:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       continue;
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 27


1326:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1327:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* First get the socket's status (protected)... */
1328:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SYS_ARCH_PROTECT(lev);
1329:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock = tryget_socket(i);
1330:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (sock != NULL) {
1331:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       void* lastdata = sock->lastdata;
1332:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       s16_t rcvevent = sock->rcvevent;
1333:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       u16_t sendevent = sock->sendevent;
1334:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       u16_t errevent = sock->errevent;
1335:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       SYS_ARCH_UNPROTECT(lev);
1336:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1337:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* ... then examine it: */
1338:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* See if netconn of this socket is ready for read */
1339:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (readset_in && FD_ISSET(i, readset_in) && ((lastdata != NULL) || (rcvevent > 0))) {
1340:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         FD_SET(i, &lreadset);
1341:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_selscan: fd=%d ready for reading\n", i));
1342:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         nready++;
1343:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1344:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* See if netconn of this socket is ready for write */
1345:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (writeset_in && FD_ISSET(i, writeset_in) && (sendevent != 0)) {
1346:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         FD_SET(i, &lwriteset);
1347:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_selscan: fd=%d ready for writing\n", i));
1348:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         nready++;
1349:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1350:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* See if netconn of this socket had an error */
1351:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (exceptset_in && FD_ISSET(i, exceptset_in) && (errevent != 0)) {
1352:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         FD_SET(i, &lexceptset);
1353:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_selscan: fd=%d ready for exception\n", i));
1354:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         nready++;
1355:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1356:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
1357:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       SYS_ARCH_UNPROTECT(lev);
1358:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* continue on to next FD in list */
1359:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1360:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1361:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* copy local sets to the ones provided as arguments */
1362:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   *readset_out = lreadset;
1363:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   *writeset_out = lwriteset;
1364:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   *exceptset_out = lexceptset;
1365:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1366:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ASSERT("nready >= 0", nready >= 0);
1367:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return nready;
1368:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
1369:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1370:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
1371:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_select(int maxfdp1, fd_set *readset, fd_set *writeset, fd_set *exceptset,
1372:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             struct timeval *timeout)
1373:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
1374:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u32_t waitres = 0;
1375:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int nready;
1376:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   fd_set lreadset, lwriteset, lexceptset;
1377:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u32_t msectimeout;
1378:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_select_cb select_cb;
1379:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int i;
1380:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int maxfdp2;
1381:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETCONN_SEM_PER_THREAD
1382:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int waited = 0;
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 28


1383:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
1384:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_DECL_PROTECT(lev);
1385:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1386:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_select(%d, %p, %p, %p, tvsec=%"S32_F" tvusec=%"S32_F")\n",
1387:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   maxfdp1, (void *)readset, (void *) writeset, (void *) exceptset,
1388:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   timeout ? (s32_t)timeout->tv_sec : (s32_t)-1,
1389:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   timeout ? (s32_t)timeout->tv_usec : (s32_t)-1));
1390:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1391:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Go through each socket in each list to count number of sockets which
1392:Middlewares/Third_Party/LwIP/src/api/sockets.c ****      currently match */
1393:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   nready = lwip_selscan(maxfdp1, readset, writeset, exceptset, &lreadset, &lwriteset, &lexceptset);
1394:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1395:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* If we don't have any current events, then suspend if we are supposed to */
1396:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!nready) {
1397:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (timeout && timeout->tv_sec == 0 && timeout->tv_usec == 0) {
1398:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_select: no timeout, returning 0\n"));
1399:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* This is OK as the local fdsets are empty and nready is zero,
1400:Middlewares/Third_Party/LwIP/src/api/sockets.c ****          or we would have returned earlier. */
1401:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       goto return_copy_fdsets;
1402:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1403:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1404:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* None ready: add our semaphore to list:
1405:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        We don't actually need any dynamic memory. Our entry on the
1406:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        list is only valid while we are in this function, so it's ok
1407:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        to use local variables. */
1408:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1409:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb.next = NULL;
1410:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb.prev = NULL;
1411:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb.readset = readset;
1412:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb.writeset = writeset;
1413:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb.exceptset = exceptset;
1414:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb.sem_signalled = 0;
1415:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETCONN_SEM_PER_THREAD
1416:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb.sem = LWIP_NETCONN_THREAD_SEM_GET();
1417:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_NETCONN_SEM_PER_THREAD */
1418:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (sys_sem_new(&select_cb.sem, 0) != ERR_OK) {
1419:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* failed to create semaphore */
1420:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       set_errno(ENOMEM);
1421:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
1422:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1423:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_NETCONN_SEM_PER_THREAD */
1424:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1425:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Protect the select_cb_list */
1426:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SYS_ARCH_PROTECT(lev);
1427:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1428:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Put this select_cb on top of list */
1429:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb.next = select_cb_list;
1430:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (select_cb_list != NULL) {
1431:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       select_cb_list->prev = &select_cb;
1432:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1433:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb_list = &select_cb;
1434:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Increasing this counter tells event_callback that the list has changed. */
1435:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb_ctr++;
1436:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1437:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Now we can safely unprotect */
1438:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SYS_ARCH_UNPROTECT(lev);
1439:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 29


1440:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Increase select_waiting for each socket we are interested in */
1441:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     maxfdp2 = maxfdp1;
1442:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     for (i = LWIP_SOCKET_OFFSET; i < maxfdp1; i++) {
1443:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((readset && FD_ISSET(i, readset)) ||
1444:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (writeset && FD_ISSET(i, writeset)) ||
1445:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (exceptset && FD_ISSET(i, exceptset))) {
1446:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         struct lwip_sock *sock;
1447:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         SYS_ARCH_PROTECT(lev);
1448:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock = tryget_socket(i);
1449:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (sock != NULL) {
1450:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           sock->select_waiting++;
1451:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_ASSERT("sock->select_waiting > 0", sock->select_waiting > 0);
1452:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
1453:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           /* Not a valid socket */
1454:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           nready = -1;
1455:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           maxfdp2 = i;
1456:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           SYS_ARCH_UNPROTECT(lev);
1457:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
1458:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
1459:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         SYS_ARCH_UNPROTECT(lev);
1460:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1461:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1462:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1463:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (nready >= 0) {
1464:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* Call lwip_selscan again: there could have been events between
1465:Middlewares/Third_Party/LwIP/src/api/sockets.c ****          the last scan (without us on the list) and putting us on the list! */
1466:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       nready = lwip_selscan(maxfdp1, readset, writeset, exceptset, &lreadset, &lwriteset, &lexcepts
1467:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (!nready) {
1468:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* Still none ready, just wait to be woken */
1469:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (timeout == 0) {
1470:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           /* Wait forever */
1471:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           msectimeout = 0;
1472:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
1473:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           msectimeout =  ((timeout->tv_sec * 1000) + ((timeout->tv_usec + 500)/1000));
1474:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (msectimeout == 0) {
1475:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             /* Wait 1ms at least (0 means wait forever) */
1476:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             msectimeout = 1;
1477:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
1478:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
1479:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1480:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         waitres = sys_arch_sem_wait(SELECT_SEM_PTR(select_cb.sem), msectimeout);
1481:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETCONN_SEM_PER_THREAD
1482:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         waited = 1;
1483:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
1484:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1485:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1486:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1487:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Decrease select_waiting for each socket we are interested in */
1488:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     for (i = LWIP_SOCKET_OFFSET; i < maxfdp2; i++) {
1489:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((readset && FD_ISSET(i, readset)) ||
1490:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (writeset && FD_ISSET(i, writeset)) ||
1491:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (exceptset && FD_ISSET(i, exceptset))) {
1492:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         struct lwip_sock *sock;
1493:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         SYS_ARCH_PROTECT(lev);
1494:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock = tryget_socket(i);
1495:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (sock != NULL) {
1496:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           /* for now, handle select_waiting==0... */
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 30


1497:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_ASSERT("sock->select_waiting > 0", sock->select_waiting > 0);
1498:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (sock->select_waiting > 0) {
1499:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             sock->select_waiting--;
1500:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
1501:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
1502:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           /* Not a valid socket */
1503:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           nready = -1;
1504:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
1505:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         SYS_ARCH_UNPROTECT(lev);
1506:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1507:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1508:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Take us off the list */
1509:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SYS_ARCH_PROTECT(lev);
1510:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (select_cb.next != NULL) {
1511:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       select_cb.next->prev = select_cb.prev;
1512:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1513:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (select_cb_list == &select_cb) {
1514:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_ASSERT("select_cb.prev == NULL", select_cb.prev == NULL);
1515:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       select_cb_list = select_cb.next;
1516:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
1517:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_ASSERT("select_cb.prev != NULL", select_cb.prev != NULL);
1518:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       select_cb.prev->next = select_cb.next;
1519:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1520:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Increasing this counter tells event_callback that the list has changed. */
1521:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb_ctr++;
1522:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SYS_ARCH_UNPROTECT(lev);
1523:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1524:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETCONN_SEM_PER_THREAD
1525:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (select_cb.sem_signalled && (!waited || (waitres == SYS_ARCH_TIMEOUT))) {
1526:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* don't leave the thread-local semaphore signalled */
1527:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sys_arch_sem_wait(select_cb.sem, 1);
1528:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1529:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_NETCONN_SEM_PER_THREAD */
1530:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sys_sem_free(&select_cb.sem);
1531:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_NETCONN_SEM_PER_THREAD */
1532:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1533:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (nready < 0) {
1534:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* This happens when a socket got closed while waiting */
1535:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       set_errno(EBADF);
1536:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
1537:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1538:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1539:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (waitres == SYS_ARCH_TIMEOUT) {
1540:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* Timeout */
1541:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_select: timeout expired\n"));
1542:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* This is OK as the local fdsets are empty and nready is zero,
1543:Middlewares/Third_Party/LwIP/src/api/sockets.c ****          or we would have returned earlier. */
1544:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       goto return_copy_fdsets;
1545:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1546:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1547:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* See what's set */
1548:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     nready = lwip_selscan(maxfdp1, readset, writeset, exceptset, &lreadset, &lwriteset, &lexceptset
1549:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1550:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1551:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_select: nready=%d\n", nready));
1552:Middlewares/Third_Party/LwIP/src/api/sockets.c **** return_copy_fdsets:
1553:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   set_errno(0);
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 31


1554:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (readset) {
1555:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     *readset = lreadset;
1556:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1557:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (writeset) {
1558:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     *writeset = lwriteset;
1559:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1560:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (exceptset) {
1561:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     *exceptset = lexceptset;
1562:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1563:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return nready;
1564:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
1565:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1566:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /**
1567:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Callback registered in the netconn layer for each socket-netconn.
1568:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Processes recvevent (data available) and wakes up tasks waiting for select.
1569:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
1570:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void
1571:Middlewares/Third_Party/LwIP/src/api/sockets.c **** event_callback(struct netconn *conn, enum netconn_evt evt, u16_t len)
1572:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
1573:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int s;
1574:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
1575:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_select_cb *scb;
1576:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int last_select_cb_ctr;
1577:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_DECL_PROTECT(lev);
1578:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1579:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_UNUSED_ARG(len);
1580:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1581:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Get socket */
1582:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (conn) {
1583:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     s = conn->socket;
1584:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (s < 0) {
1585:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* Data comes in right away after an accept, even though
1586:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        * the server task might not have created a new socket yet.
1587:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        * Just count down (or up) if that's the case and we
1588:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        * will use the data later. Note that only receive events
1589:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        * can happen before the new socket is set up. */
1590:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       SYS_ARCH_PROTECT(lev);
1591:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (conn->socket < 0) {
1592:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (evt == NETCONN_EVT_RCVPLUS) {
1593:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           conn->socket--;
1594:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
1595:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         SYS_ARCH_UNPROTECT(lev);
1596:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return;
1597:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1598:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       s = conn->socket;
1599:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       SYS_ARCH_UNPROTECT(lev);
1600:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1601:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1602:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock = get_socket(s);
1603:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (!sock) {
1604:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return;
1605:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1606:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
1607:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return;
1608:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1609:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1610:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_PROTECT(lev);
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 32


1611:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Set event as required */
1612:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   switch (evt) {
1613:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case NETCONN_EVT_RCVPLUS:
1614:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->rcvevent++;
1615:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
1616:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case NETCONN_EVT_RCVMINUS:
1617:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->rcvevent--;
1618:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
1619:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case NETCONN_EVT_SENDPLUS:
1620:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->sendevent = 1;
1621:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
1622:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case NETCONN_EVT_SENDMINUS:
1623:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->sendevent = 0;
1624:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
1625:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case NETCONN_EVT_ERROR:
1626:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->errevent = 1;
1627:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
1628:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
1629:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_ASSERT("unknown event", 0);
1630:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
1631:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1632:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1633:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (sock->select_waiting == 0) {
1634:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* noone is waiting for this socket, no need to check select_cb_list */
1635:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SYS_ARCH_UNPROTECT(lev);
1636:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return;
1637:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1638:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1639:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Now decide if anyone is waiting for this socket */
1640:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* NOTE: This code goes through the select_cb_list list multiple times
1641:Middlewares/Third_Party/LwIP/src/api/sockets.c ****      ONLY IF a select was actually waiting. We go through the list the number
1642:Middlewares/Third_Party/LwIP/src/api/sockets.c ****      of waiting select calls + 1. This list is expected to be small. */
1643:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1644:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* At this point, SYS_ARCH is still protected! */
1645:Middlewares/Third_Party/LwIP/src/api/sockets.c **** again:
1646:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   for (scb = select_cb_list; scb != NULL; scb = scb->next) {
1647:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* remember the state of select_cb_list to detect changes */
1648:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     last_select_cb_ctr = select_cb_ctr;
1649:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (scb->sem_signalled == 0) {
1650:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* semaphore not signalled yet */
1651:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       int do_signal = 0;
1652:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* Test this select call for our socket */
1653:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (sock->rcvevent > 0) {
1654:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (scb->readset && FD_ISSET(s, scb->readset)) {
1655:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           do_signal = 1;
1656:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
1657:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1658:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (sock->sendevent != 0) {
1659:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (!do_signal && scb->writeset && FD_ISSET(s, scb->writeset)) {
1660:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           do_signal = 1;
1661:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
1662:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1663:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (sock->errevent != 0) {
1664:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (!do_signal && scb->exceptset && FD_ISSET(s, scb->exceptset)) {
1665:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           do_signal = 1;
1666:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
1667:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 33


1668:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (do_signal) {
1669:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         scb->sem_signalled = 1;
1670:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* Don't call SYS_ARCH_UNPROTECT() before signaling the semaphore, as this might
1671:Middlewares/Third_Party/LwIP/src/api/sockets.c ****            lead to the select thread taking itself off the list, invalidating the semaphore. */
1672:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sys_sem_signal(SELECT_SEM_PTR(scb->sem));
1673:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1674:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1675:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* unlock interrupts with each step */
1676:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SYS_ARCH_UNPROTECT(lev);
1677:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* this makes sure interrupt protection time is short */
1678:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SYS_ARCH_PROTECT(lev);
1679:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (last_select_cb_ctr != select_cb_ctr) {
1680:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* someone has changed select_cb_list, restart at the beginning */
1681:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       goto again;
1682:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1683:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1684:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_UNPROTECT(lev);
1685:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
1686:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1687:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /**
1688:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Close one end of a full-duplex connection.
1689:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
1690:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
1691:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_shutdown(int s, int how)
1692:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
1693:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
1694:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err;
1695:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u8_t shut_rx = 0, shut_tx = 0;
1696:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1697:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_shutdown(%d, how=%d)\n", s, how));
1698:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1699:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = get_socket(s);
1700:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
1701:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
1702:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1703:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1704:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (sock->conn != NULL) {
1705:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) != NETCONN_TCP) {
1706:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, EOPNOTSUPP);
1707:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
1708:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1709:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
1710:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, ENOTCONN);
1711:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
1712:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1713:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1714:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (how == SHUT_RD) {
1715:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     shut_rx = 1;
1716:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else if (how == SHUT_WR) {
1717:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     shut_tx = 1;
1718:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else if (how == SHUT_RDWR) {
1719:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     shut_rx = 1;
1720:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     shut_tx = 1;
1721:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
1722:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, EINVAL);
1723:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
1724:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 34


1725:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = netconn_shutdown(sock->conn, shut_rx, shut_tx);
1726:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1727:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, err_to_errno(err));
1728:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return (err == ERR_OK ? 0 : -1);
1729:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
1730:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1731:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static int
1732:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_getaddrname(int s, struct sockaddr *name, socklen_t *namelen, u8_t local)
1733:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
1734:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
1735:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   union sockaddr_aligned saddr;
1736:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   ip_addr_t naddr;
1737:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u16_t port;
1738:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err;
1739:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1740:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = get_socket(s);
1741:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
1742:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
1743:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1744:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1745:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* get the IP address and port */
1746:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = netconn_getaddr(sock->conn, &naddr, &port, local);
1747:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (err != ERR_OK) {
1748:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(err));
1749:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
1750:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1751:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1752:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV4 && LWIP_IPV6
1753:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Dual-stack: Map IPv4 addresses to IPv4 mapped IPv6 */
1754:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (NETCONNTYPE_ISIPV6(netconn_type(sock->conn)) &&
1755:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       IP_IS_V4_VAL(naddr)) {
1756:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ip4_2_ipv4_mapped_ipv6(ip_2_ip6(&naddr), ip_2_ip4(&naddr));
1757:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     IP_SET_TYPE_VAL(naddr, IPADDR_TYPE_V6);
1758:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1759:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV4 && LWIP_IPV6 */
1760:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1761:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   IPADDR_PORT_TO_SOCKADDR(&saddr, &naddr, port);
1762:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1763:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getaddrname(%d, addr=", s));
1764:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   ip_addr_debug_print_val(SOCKETS_DEBUG, naddr);
1765:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, (" port=%"U16_F")\n", port));
1766:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1767:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (*namelen > saddr.sa.sa_len) {
1768:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     *namelen = saddr.sa.sa_len;
1769:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1770:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   MEMCPY(name, &saddr, *namelen);
1771:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1772:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, 0);
1773:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return 0;
1774:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
1775:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1776:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
1777:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_getpeername(int s, struct sockaddr *name, socklen_t *namelen)
1778:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
1779:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return lwip_getaddrname(s, name, namelen, 0);
1780:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
1781:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 35


1782:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
1783:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_getsockname(int s, struct sockaddr *name, socklen_t *namelen)
1784:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
1785:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return lwip_getaddrname(s, name, namelen, 1);
1786:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
1787:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1788:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
1789:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_getsockopt(int s, int level, int optname, void *optval, socklen_t *optlen)
1790:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
1791:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u8_t err;
1792:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = get_socket(s);
1793:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if !LWIP_TCPIP_CORE_LOCKING
1794:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_DECLARE(data);
1795:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* !LWIP_TCPIP_CORE_LOCKING */
1796:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1797:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
1798:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
1799:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1800:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1801:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if ((NULL == optval) || (NULL == optlen)) {
1802:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, EFAULT);
1803:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
1804:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1805:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1806:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCPIP_CORE_LOCKING
1807:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* core-locking can just call the -impl function */
1808:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LOCK_TCPIP_CORE();
1809:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = lwip_getsockopt_impl(s, level, optname, optval, optlen);
1810:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   UNLOCK_TCPIP_CORE();
1811:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1812:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_TCPIP_CORE_LOCKING */
1813:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1814:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_MPU_COMPATIBLE
1815:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* MPU_COMPATIBLE copies the optval data, so check for max size here */
1816:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (*optlen > LWIP_SETGETSOCKOPT_MAXOPTLEN) {
1817:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, ENOBUFS);
1818:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
1819:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1820:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_MPU_COMPATIBLE */
1821:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1822:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_ALLOC(data, sock);
1823:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).s = s;
1824:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).level = level;
1825:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).optname = optname;
1826:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).optlen = *optlen;
1827:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if !LWIP_MPU_COMPATIBLE
1828:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).optval.p = optval;
1829:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* !LWIP_MPU_COMPATIBLE */
1830:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).err = 0;
1831:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETCONN_SEM_PER_THREAD
1832:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).completed_sem = LWIP_NETCONN_THREAD_SEM_GET();
1833:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else
1834:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).completed_sem = &sock->conn->op_completed;
1835:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
1836:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = tcpip_callback(lwip_getsockopt_callback, &LWIP_SETGETSOCKOPT_DATA_VAR_REF(data));
1837:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (err != ERR_OK) {
1838:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_SETGETSOCKOPT_DATA_VAR_FREE(data);
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 36


1839:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(err));
1840:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
1841:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1842:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sys_arch_sem_wait((sys_sem_t*)(LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).completed_sem), 0);
1843:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1844:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* write back optlen and optval */
1845:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   *optlen = LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).optlen;
1846:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_MPU_COMPATIBLE
1847:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   MEMCPY(optval, LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).optval,
1848:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).optlen);
1849:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_MPU_COMPATIBLE */
1850:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1851:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* maybe lwip_getsockopt_internal has changed err */
1852:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).err;
1853:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_FREE(data);
1854:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_TCPIP_CORE_LOCKING */
1855:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1856:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, err);
1857:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return err ? -1 : 0;
1858:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
1859:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1860:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if !LWIP_TCPIP_CORE_LOCKING
1861:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** lwip_getsockopt_callback: only used without CORE_LOCKING
1862:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * to get into the tcpip_thread
1863:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
1864:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void
1865:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_getsockopt_callback(void *arg)
1866:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
1867:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_setgetsockopt_data *data;
1868:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ASSERT("arg != NULL", arg != NULL);
1869:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   data = (struct lwip_setgetsockopt_data*)arg;
1870:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1871:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   data->err = lwip_getsockopt_impl(data->s, data->level, data->optname,
1872:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_MPU_COMPATIBLE
1873:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     data->optval,
1874:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_MPU_COMPATIBLE */
1875:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     data->optval.p,
1876:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_MPU_COMPATIBLE */
1877:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     &data->optlen);
1878:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1879:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sys_sem_signal((sys_sem_t*)(data->completed_sem));
1880:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
1881:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif  /* LWIP_TCPIP_CORE_LOCKING */
1882:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1883:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** lwip_getsockopt_impl: the actual implementation of getsockopt:
1884:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * same argument as lwip_getsockopt, either called directly or through callback
1885:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
1886:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static u8_t
1887:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_getsockopt_impl(int s, int level, int optname, void *optval, socklen_t *optlen)
1888:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
1889:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u8_t err = 0;
1890:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
1891:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
1892:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return EBADF;
1893:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1894:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1895:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   switch (level) {
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 37


1896:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1897:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Level: SOL_SOCKET */
1898:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case SOL_SOCKET:
1899:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
1900:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1901:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCP
1902:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_ACCEPTCONN:
1903:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, *optlen, int);
1904:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (NETCONNTYPE_GROUP(sock->conn->type) != NETCONN_TCP) {
1905:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return ENOPROTOOPT;
1906:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1907:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((sock->conn->pcb.tcp != NULL) && (sock->conn->pcb.tcp->state == LISTEN)) {
1908:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         *(int*)optval = 1;
1909:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
1910:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         *(int*)optval = 0;
1911:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1912:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
1913:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_TCP */
1914:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1915:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* The option flags */
1916:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_BROADCAST:
1917:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_KEEPALIVE:
1918:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if SO_REUSE
1919:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_REUSEADDR:
1920:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* SO_REUSE */
1921:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, *optlen, int);
1922:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = ip_get_option(sock->conn->pcb.ip, optname);
1923:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, SOL_SOCKET, optname=0x%x, ..) = %s\n",
1924:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                   s, optname, (*(int*)optval?"on":"off")));
1925:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
1926:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1927:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_TYPE:
1928:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN(sock, *optlen, int);
1929:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       switch (NETCONNTYPE_GROUP(netconn_type(sock->conn))) {
1930:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       case NETCONN_RAW:
1931:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         *(int*)optval = SOCK_RAW;
1932:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         break;
1933:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       case NETCONN_TCP:
1934:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         *(int*)optval = SOCK_STREAM;
1935:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         break;
1936:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       case NETCONN_UDP:
1937:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         *(int*)optval = SOCK_DGRAM;
1938:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         break;
1939:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       default: /* unrecognized socket type */
1940:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         *(int*)optval = netconn_type(sock->conn);
1941:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG,
1942:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                     ("lwip_getsockopt(%d, SOL_SOCKET, SO_TYPE): unrecognized socket type %d\n",
1943:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                     s, *(int *)optval));
1944:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }  /* switch (netconn_type(sock->conn)) */
1945:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, SOL_SOCKET, SO_TYPE) = %d\n",
1946:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, *(int *)optval));
1947:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
1948:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1949:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_ERROR:
1950:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN(*optlen, int);
1951:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* only overwrite ERR_OK or temporary errors */
1952:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (((sock->err == 0) || (sock->err == EINPROGRESS)) && (sock->conn != NULL)) {
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 38


1953:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock_set_errno(sock, err_to_errno(sock->conn->last_err));
1954:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1955:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int *)optval = (sock->err == 0xFF ? (int)-1 : (int)sock->err);
1956:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->err = 0;
1957:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, SOL_SOCKET, SO_ERROR) = %d\n",
1958:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, *(int *)optval));
1959:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
1960:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1961:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_SNDTIMEO
1962:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_SNDTIMEO:
1963:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN(sock, *optlen, LWIP_SO_SNDRCVTIMEO_OPTTYPE);
1964:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SO_SNDRCVTIMEO_SET(optval, netconn_get_sendtimeout(sock->conn));
1965:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
1966:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SO_SNDTIMEO */
1967:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_RCVTIMEO
1968:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_RCVTIMEO:
1969:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN(sock, *optlen, LWIP_SO_SNDRCVTIMEO_OPTTYPE);
1970:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SO_SNDRCVTIMEO_SET(optval, netconn_get_recvtimeout(sock->conn));
1971:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
1972:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SO_RCVTIMEO */
1973:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_RCVBUF
1974:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_RCVBUF:
1975:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN(sock, *optlen, int);
1976:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int *)optval = netconn_get_recvbufsize(sock->conn);
1977:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
1978:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SO_RCVBUF */
1979:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_LINGER
1980:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_LINGER:
1981:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       {
1982:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         s16_t conn_linger;
1983:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         struct linger* linger = (struct linger*)optval;
1984:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_SOCKOPT_CHECK_OPTLEN_CONN(sock, *optlen, struct linger);
1985:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         conn_linger = sock->conn->linger;
1986:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (conn_linger >= 0) {
1987:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           linger->l_onoff = 1;
1988:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           linger->l_linger = (int)conn_linger;
1989:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
1990:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           linger->l_onoff = 0;
1991:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           linger->l_linger = 0;
1992:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
1993:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1994:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
1995:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SO_LINGER */
1996:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDP
1997:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_NO_CHECK:
1998:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, *optlen, int, NETCONN_UDP);
1999:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDPLITE
2000:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((udp_flags(sock->conn->pcb.udp) & UDP_FLAGS_UDPLITE) != 0) {
2001:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* this flag is only available for UDP, not for UDP lite */
2002:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return EAFNOSUPPORT;
2003:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2004:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_UDPLITE */
2005:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = (udp_flags(sock->conn->pcb.udp) & UDP_FLAGS_NOCHKSUM) ? 1 : 0;
2006:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2007:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_UDP*/
2008:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
2009:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, SOL_SOCKET, UNIMPL: optname=0x%x, ..)\n",
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 39


2010:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, optname));
2011:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = ENOPROTOOPT;
2012:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2013:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }  /* switch (optname) */
2014:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2015:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2016:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Level: IPPROTO_IP */
2017:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case IPPROTO_IP:
2018:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
2019:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_TTL:
2020:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, *optlen, int);
2021:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = sock->conn->pcb.ip->ttl;
2022:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_IP, IP_TTL) = %d\n",
2023:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, *(int *)optval));
2024:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2025:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_TOS:
2026:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, *optlen, int);
2027:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = sock->conn->pcb.ip->tos;
2028:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_IP, IP_TOS) = %d\n",
2029:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, *(int *)optval));
2030:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2031:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_MULTICAST_TX_OPTIONS
2032:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_MULTICAST_TTL:
2033:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, *optlen, u8_t);
2034:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) != NETCONN_UDP) {
2035:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return ENOPROTOOPT;
2036:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2037:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(u8_t*)optval = udp_get_multicast_ttl(sock->conn->pcb.udp);
2038:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_IP, IP_MULTICAST_TTL) = %d\n",
2039:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, *(int *)optval));
2040:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2041:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_MULTICAST_IF:
2042:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, *optlen, struct in_addr);
2043:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) != NETCONN_UDP) {
2044:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return ENOPROTOOPT;
2045:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2046:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       inet_addr_from_ip4addr((struct in_addr*)optval, udp_get_multicast_netif_addr(sock->conn->pcb.
2047:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_IP, IP_MULTICAST_IF) = 0x%"X32_F"\n"
2048:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, *(u32_t *)optval));
2049:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2050:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_MULTICAST_LOOP:
2051:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, *optlen, u8_t);
2052:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((sock->conn->pcb.udp->flags & UDP_FLAGS_MULTICAST_LOOP) != 0) {
2053:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         *(u8_t*)optval = 1;
2054:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
2055:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         *(u8_t*)optval = 0;
2056:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2057:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_IP, IP_MULTICAST_LOOP) = %d\n",
2058:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, *(int *)optval));
2059:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2060:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_MULTICAST_TX_OPTIONS */
2061:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
2062:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_IP, UNIMPL: optname=0x%x, ..)\n",
2063:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, optname));
2064:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = ENOPROTOOPT;
2065:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2066:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }  /* switch (optname) */
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 40


2067:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2068:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2069:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCP
2070:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Level: IPPROTO_TCP */
2071:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case IPPROTO_TCP:
2072:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Special case: all IPPROTO_TCP option take an int */
2073:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, *optlen, int, NETCONN_TCP);
2074:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (sock->conn->pcb.tcp->state == LISTEN) {
2075:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return EINVAL;
2076:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
2077:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
2078:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case TCP_NODELAY:
2079:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = tcp_nagle_disabled(sock->conn->pcb.tcp);
2080:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_TCP, TCP_NODELAY) = %s\n",
2081:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, (*(int*)optval)?"on":"off") );
2082:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2083:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case TCP_KEEPALIVE:
2084:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = (int)sock->conn->pcb.tcp->keep_idle;
2085:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_TCP, TCP_KEEPALIVE) = %d\n",
2086:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, *(int *)optval));
2087:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2088:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2089:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCP_KEEPALIVE
2090:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case TCP_KEEPIDLE:
2091:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = (int)(sock->conn->pcb.tcp->keep_idle/1000);
2092:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_TCP, TCP_KEEPIDLE) = %d\n",
2093:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, *(int *)optval));
2094:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2095:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case TCP_KEEPINTVL:
2096:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = (int)(sock->conn->pcb.tcp->keep_intvl/1000);
2097:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_TCP, TCP_KEEPINTVL) = %d\n",
2098:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, *(int *)optval));
2099:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2100:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case TCP_KEEPCNT:
2101:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = (int)sock->conn->pcb.tcp->keep_cnt;
2102:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_TCP, TCP_KEEPCNT) = %d\n",
2103:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, *(int *)optval));
2104:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2105:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_TCP_KEEPALIVE */
2106:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
2107:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_TCP, UNIMPL: optname=0x%x, ..)\n",
2108:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, optname));
2109:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = ENOPROTOOPT;
2110:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2111:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }  /* switch (optname) */
2112:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2113:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_TCP */
2114:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2115:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV6
2116:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Level: IPPROTO_IPV6 */
2117:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case IPPROTO_IPV6:
2118:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
2119:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IPV6_V6ONLY:
2120:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN(sock, *optlen, int);
2121:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = (netconn_get_ipv6only(sock->conn) ? 1 : 0);
2122:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_IPV6, IPV6_V6ONLY) = %d\n",
2123:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, *(int *)optval));
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 41


2124:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2125:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
2126:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_IPV6, UNIMPL: optname=0x%x, ..)\n",
2127:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, optname));
2128:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = ENOPROTOOPT;
2129:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2130:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }  /* switch (optname) */
2131:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2132:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV6 */
2133:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2134:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDP && LWIP_UDPLITE
2135:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Level: IPPROTO_UDPLITE */
2136:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case IPPROTO_UDPLITE:
2137:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Special case: all IPPROTO_UDPLITE option take an int */
2138:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, *optlen, int);
2139:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* If this is no UDP lite socket, ignore any options. */
2140:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (!NETCONNTYPE_ISUDPLITE(netconn_type(sock->conn))) {
2141:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return ENOPROTOOPT;
2142:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
2143:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
2144:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case UDPLITE_SEND_CSCOV:
2145:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = sock->conn->pcb.udp->chksum_len_tx;
2146:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_UDPLITE, UDPLITE_SEND_CSCOV) = %d\n"
2147:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, (*(int*)optval)) );
2148:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2149:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case UDPLITE_RECV_CSCOV:
2150:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = sock->conn->pcb.udp->chksum_len_rx;
2151:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_UDPLITE, UDPLITE_RECV_CSCOV) = %d\n"
2152:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, (*(int*)optval)) );
2153:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2154:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
2155:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_UDPLITE, UNIMPL: optname=0x%x, ..)\n
2156:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, optname));
2157:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = ENOPROTOOPT;
2158:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2159:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }  /* switch (optname) */
2160:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2161:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_UDP */
2162:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Level: IPPROTO_RAW */
2163:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case IPPROTO_RAW:
2164:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
2165:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV6 && LWIP_RAW
2166:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IPV6_CHECKSUM:
2167:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, *optlen, int, NETCONN_RAW);
2168:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (sock->conn->pcb.raw->chksum_reqd == 0) {
2169:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         *(int *)optval = -1;
2170:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
2171:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         *(int *)optval = sock->conn->pcb.raw->chksum_offset;
2172:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2173:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_RAW, IPV6_CHECKSUM) = %d\n",
2174:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, (*(int*)optval)) );
2175:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2176:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV6 && LWIP_RAW */
2177:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
2178:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_RAW, UNIMPL: optname=0x%x, ..)\n",
2179:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, optname));
2180:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = ENOPROTOOPT;
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 42


2181:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2182:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }  /* switch (optname) */
2183:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2184:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   default:
2185:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, level=0x%x, UNIMPL: optname=0x%x, ..)\n",
2186:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                 s, level, optname));
2187:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     err = ENOPROTOOPT;
2188:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2189:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } /* switch (level) */
2190:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2191:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return err;
2192:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
2193:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2194:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
2195:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_setsockopt(int s, int level, int optname, const void *optval, socklen_t optlen)
2196:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
2197:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u8_t err = 0;
2198:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = get_socket(s);
2199:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if !LWIP_TCPIP_CORE_LOCKING
2200:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_DECLARE(data);
2201:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* !LWIP_TCPIP_CORE_LOCKING */
2202:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2203:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
2204:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
2205:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2206:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2207:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (NULL == optval) {
2208:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, EFAULT);
2209:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
2210:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2211:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2212:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCPIP_CORE_LOCKING
2213:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* core-locking can just call the -impl function */
2214:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LOCK_TCPIP_CORE();
2215:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = lwip_setsockopt_impl(s, level, optname, optval, optlen);
2216:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   UNLOCK_TCPIP_CORE();
2217:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2218:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_TCPIP_CORE_LOCKING */
2219:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2220:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_MPU_COMPATIBLE
2221:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* MPU_COMPATIBLE copies the optval data, so check for max size here */
2222:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (optlen > LWIP_SETGETSOCKOPT_MAXOPTLEN) {
2223:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, ENOBUFS);
2224:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
2225:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2226:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_MPU_COMPATIBLE */
2227:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2228:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_ALLOC(data, sock);
2229:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).s = s;
2230:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).level = level;
2231:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).optname = optname;
2232:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).optlen = optlen;
2233:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_MPU_COMPATIBLE
2234:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   MEMCPY(LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).optval, optval, optlen);
2235:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_MPU_COMPATIBLE */
2236:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).optval.pc = (const void*)optval;
2237:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_MPU_COMPATIBLE */
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 43


2238:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).err = 0;
2239:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETCONN_SEM_PER_THREAD
2240:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).completed_sem = LWIP_NETCONN_THREAD_SEM_GET();
2241:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else
2242:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).completed_sem = &sock->conn->op_completed;
2243:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
2244:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = tcpip_callback(lwip_setsockopt_callback, &LWIP_SETGETSOCKOPT_DATA_VAR_REF(data));
2245:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (err != ERR_OK) {
2246:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_SETGETSOCKOPT_DATA_VAR_FREE(data);
2247:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(err));
2248:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
2249:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2250:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sys_arch_sem_wait((sys_sem_t*)(LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).completed_sem), 0);
2251:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2252:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* maybe lwip_getsockopt_internal has changed err */
2253:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).err;
2254:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_FREE(data);
2255:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif  /* LWIP_TCPIP_CORE_LOCKING */
2256:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2257:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, err);
2258:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return err ? -1 : 0;
2259:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
2260:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2261:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if !LWIP_TCPIP_CORE_LOCKING
2262:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** lwip_setsockopt_callback: only used without CORE_LOCKING
2263:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * to get into the tcpip_thread
2264:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
2265:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void
2266:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_setsockopt_callback(void *arg)
2267:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
2268:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_setgetsockopt_data *data;
2269:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ASSERT("arg != NULL", arg != NULL);
2270:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   data = (struct lwip_setgetsockopt_data*)arg;
2271:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2272:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   data->err = lwip_setsockopt_impl(data->s, data->level, data->optname,
2273:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_MPU_COMPATIBLE
2274:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     data->optval,
2275:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_MPU_COMPATIBLE */
2276:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     data->optval.pc,
2277:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_MPU_COMPATIBLE */
2278:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     data->optlen);
2279:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2280:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sys_sem_signal((sys_sem_t*)(data->completed_sem));
2281:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
2282:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif  /* LWIP_TCPIP_CORE_LOCKING */
2283:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2284:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** lwip_setsockopt_impl: the actual implementation of setsockopt:
2285:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * same argument as lwip_setsockopt, either called directly or through callback
2286:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
2287:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static u8_t
2288:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_setsockopt_impl(int s, int level, int optname, const void *optval, socklen_t optlen)
2289:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 156              		.loc 1 2289 0
 157              		.cfi_startproc
 158              		@ args = 4, pretend = 0, frame = 0
 159              		@ frame_needed = 0, uses_anonymous_args = 0
 160              	.LVL15:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 44


 161 0000 70B5     		push	{r4, r5, r6, lr}
 162              	.LCFI3:
 163              		.cfi_def_cfa_offset 16
 164              		.cfi_offset 4, -16
 165              		.cfi_offset 5, -12
 166              		.cfi_offset 6, -8
 167              		.cfi_offset 14, -4
 168 0002 0C46     		mov	r4, r1
 169 0004 1546     		mov	r5, r2
 170 0006 1E46     		mov	r6, r3
 171              	.LVL16:
2290:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u8_t err = 0;
2291:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 172              		.loc 1 2291 0
 173 0008 FFF7FEFF 		bl	tryget_socket
 174              	.LVL17:
2292:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 175              		.loc 1 2292 0
 176 000c 0028     		cmp	r0, #0
 177 000e 00F09F80 		beq	.L31
 178 0012 0346     		mov	r3, r0
2293:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return EBADF;
2294:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2295:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2296:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   switch (level) {
 179              		.loc 1 2296 0
 180 0014 062C     		cmp	r4, #6
 181 0016 6DD0     		beq	.L19
 182 0018 40F6FF72 		movw	r2, #4095
 183 001c 9442     		cmp	r4, r2
 184 001e 03D0     		beq	.L20
 185 0020 002C     		cmp	r4, #0
 186 0022 45D0     		beq	.L59
2297:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2298:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Level: SOL_SOCKET */
2299:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case SOL_SOCKET:
2300:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
2301:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2302:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* SO_ACCEPTCONN is get-only */
2303:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2304:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* The option flags */
2305:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_BROADCAST:
2306:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_KEEPALIVE:
2307:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if SO_REUSE
2308:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_REUSEADDR:
2309:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* SO_REUSE */
2310:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, optlen, int);
2311:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (*(const int*)optval) {
2312:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         ip_set_option(sock->conn->pcb.ip, optname);
2313:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
2314:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         ip_reset_option(sock->conn->pcb.ip, optname);
2315:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2316:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, SOL_SOCKET, optname=0x%x, ..) -> %s\n",
2317:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, optname, (*(const int*)optval?"on":"off")));
2318:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2319:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2320:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* SO_TYPE is get-only */
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 45


2321:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* SO_ERROR is get-only */
2322:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2323:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_SNDTIMEO
2324:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_SNDTIMEO:
2325:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN(sock, optlen, LWIP_SO_SNDRCVTIMEO_OPTTYPE);
2326:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       netconn_set_sendtimeout(sock->conn, LWIP_SO_SNDRCVTIMEO_GET_MS(optval));
2327:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2328:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SO_SNDTIMEO */
2329:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_RCVTIMEO
2330:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_RCVTIMEO:
2331:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN(sock, optlen, LWIP_SO_SNDRCVTIMEO_OPTTYPE);
2332:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       netconn_set_recvtimeout(sock->conn, (int)LWIP_SO_SNDRCVTIMEO_GET_MS(optval));
2333:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2334:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SO_RCVTIMEO */
2335:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_RCVBUF
2336:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_RCVBUF:
2337:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN(sock, optlen, int);
2338:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       netconn_set_recvbufsize(sock->conn, *(const int*)optval);
2339:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2340:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SO_RCVBUF */
2341:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_LINGER
2342:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_LINGER:
2343:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       {
2344:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         const struct linger* linger = (const struct linger*)optval;
2345:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_SOCKOPT_CHECK_OPTLEN_CONN(sock, optlen, struct linger);
2346:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (linger->l_onoff) {
2347:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           int lingersec = linger->l_linger;
2348:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (lingersec < 0) {
2349:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             return EINVAL;
2350:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
2351:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (lingersec > 0xFFFF) {
2352:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             lingersec = 0xFFFF;
2353:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
2354:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           sock->conn->linger = (s16_t)lingersec;
2355:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
2356:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           sock->conn->linger = -1;
2357:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
2358:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2359:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2360:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SO_LINGER */
2361:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDP
2362:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_NO_CHECK:
2363:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, optlen, int, NETCONN_UDP);
2364:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDPLITE
2365:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((udp_flags(sock->conn->pcb.udp) & UDP_FLAGS_UDPLITE) != 0) {
2366:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* this flag is only available for UDP, not for UDP lite */
2367:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return EAFNOSUPPORT;
2368:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2369:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_UDPLITE */
2370:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (*(const int*)optval) {
2371:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         udp_setflags(sock->conn->pcb.udp, udp_flags(sock->conn->pcb.udp) | UDP_FLAGS_NOCHKSUM);
2372:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
2373:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         udp_setflags(sock->conn->pcb.udp, udp_flags(sock->conn->pcb.udp) & ~UDP_FLAGS_NOCHKSUM);
2374:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2375:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2376:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_UDP */
2377:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 46


2378:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, SOL_SOCKET, UNIMPL: optname=0x%x, ..)\n",
2379:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, optname));
2380:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = ENOPROTOOPT;
2381:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2382:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }  /* switch (optname) */
2383:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2384:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2385:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Level: IPPROTO_IP */
2386:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case IPPROTO_IP:
2387:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
2388:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_TTL:
2389:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, optlen, int);
2390:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->conn->pcb.ip->ttl = (u8_t)(*(const int*)optval);
2391:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_IP, IP_TTL, ..) -> %d\n",
2392:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, sock->conn->pcb.ip->ttl));
2393:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2394:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_TOS:
2395:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, optlen, int);
2396:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->conn->pcb.ip->tos = (u8_t)(*(const int*)optval);
2397:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_IP, IP_TOS, ..)-> %d\n",
2398:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, sock->conn->pcb.ip->tos));
2399:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2400:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_MULTICAST_TX_OPTIONS
2401:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_MULTICAST_TTL:
2402:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, optlen, u8_t, NETCONN_UDP);
2403:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       udp_set_multicast_ttl(sock->conn->pcb.udp, (u8_t)(*(const u8_t*)optval));
2404:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2405:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_MULTICAST_IF:
2406:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       {
2407:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         ip4_addr_t if_addr;
2408:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, optlen, struct in_addr, NETCONN_UDP);
2409:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         inet_addr_to_ip4addr(&if_addr, (const struct in_addr*)optval);
2410:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         udp_set_multicast_netif_addr(sock->conn->pcb.udp, &if_addr);
2411:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2412:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2413:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_MULTICAST_LOOP:
2414:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, optlen, u8_t, NETCONN_UDP);
2415:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (*(const u8_t*)optval) {
2416:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         udp_setflags(sock->conn->pcb.udp, udp_flags(sock->conn->pcb.udp) | UDP_FLAGS_MULTICAST_LOOP
2417:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
2418:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         udp_setflags(sock->conn->pcb.udp, udp_flags(sock->conn->pcb.udp) & ~UDP_FLAGS_MULTICAST_LOO
2419:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2420:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2421:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_MULTICAST_TX_OPTIONS */
2422:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IGMP
2423:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_ADD_MEMBERSHIP:
2424:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_DROP_MEMBERSHIP:
2425:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       {
2426:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* If this is a TCP or a RAW socket, ignore these options. */
2427:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* @todo: assign membership to this socket so that it is dropped when closing the socket */
2428:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         err_t igmp_err;
2429:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         const struct ip_mreq *imr = (const struct ip_mreq *)optval;
2430:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         ip4_addr_t if_addr;
2431:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         ip4_addr_t multi_addr;
2432:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, optlen, struct ip_mreq, NETCONN_UDP);
2433:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         inet_addr_to_ip4addr(&if_addr, &imr->imr_interface);
2434:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         inet_addr_to_ip4addr(&multi_addr, &imr->imr_multiaddr);
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 47


2435:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (optname == IP_ADD_MEMBERSHIP) {
2436:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (!lwip_socket_register_membership(s, &if_addr, &multi_addr)) {
2437:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             /* cannot track membership (out of memory) */
2438:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             err = ENOMEM;
2439:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             igmp_err = ERR_OK;
2440:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           } else {
2441:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             igmp_err = igmp_joingroup(&if_addr, &multi_addr);
2442:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
2443:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
2444:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           igmp_err = igmp_leavegroup(&if_addr, &multi_addr);
2445:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           lwip_socket_unregister_membership(s, &if_addr, &multi_addr);
2446:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
2447:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (igmp_err != ERR_OK) {
2448:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           err = EADDRNOTAVAIL;
2449:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
2450:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2451:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2452:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IGMP */
2453:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
2454:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_IP, UNIMPL: optname=0x%x, ..)\n",
2455:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, optname));
2456:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = ENOPROTOOPT;
2457:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2458:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }  /* switch (optname) */
2459:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2460:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2461:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCP
2462:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Level: IPPROTO_TCP */
2463:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case IPPROTO_TCP:
2464:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Special case: all IPPROTO_TCP option take an int */
2465:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, optlen, int, NETCONN_TCP);
2466:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (sock->conn->pcb.tcp->state == LISTEN) {
2467:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return EINVAL;
2468:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
2469:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
2470:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case TCP_NODELAY:
2471:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (*(const int*)optval) {
2472:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         tcp_nagle_disable(sock->conn->pcb.tcp);
2473:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
2474:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         tcp_nagle_enable(sock->conn->pcb.tcp);
2475:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2476:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_TCP, TCP_NODELAY) -> %s\n",
2477:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, (*(const int *)optval)?"on":"off") );
2478:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2479:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case TCP_KEEPALIVE:
2480:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->conn->pcb.tcp->keep_idle = (u32_t)(*(const int*)optval);
2481:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_TCP, TCP_KEEPALIVE) -> %"U32_F"\n",
2482:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, sock->conn->pcb.tcp->keep_idle));
2483:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2484:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2485:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCP_KEEPALIVE
2486:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case TCP_KEEPIDLE:
2487:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->conn->pcb.tcp->keep_idle = 1000*(u32_t)(*(const int*)optval);
2488:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_TCP, TCP_KEEPIDLE) -> %"U32_F"\n",
2489:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, sock->conn->pcb.tcp->keep_idle));
2490:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2491:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case TCP_KEEPINTVL:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 48


2492:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->conn->pcb.tcp->keep_intvl = 1000*(u32_t)(*(const int*)optval);
2493:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_TCP, TCP_KEEPINTVL) -> %"U32_F"\n",
2494:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, sock->conn->pcb.tcp->keep_intvl));
2495:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2496:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case TCP_KEEPCNT:
2497:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->conn->pcb.tcp->keep_cnt = (u32_t)(*(const int*)optval);
2498:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_TCP, TCP_KEEPCNT) -> %"U32_F"\n",
2499:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, sock->conn->pcb.tcp->keep_cnt));
2500:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2501:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_TCP_KEEPALIVE */
2502:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
2503:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_TCP, UNIMPL: optname=0x%x, ..)\n",
2504:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, optname));
2505:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = ENOPROTOOPT;
2506:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2507:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }  /* switch (optname) */
2508:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2509:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_TCP*/
2510:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2511:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV6
2512:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Level: IPPROTO_IPV6 */
2513:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case IPPROTO_IPV6:
2514:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
2515:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IPV6_V6ONLY:
2516:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, optlen, int, NETCONN_TCP);
2517:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (*(const int*)optval) {
2518:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         netconn_set_ipv6only(sock->conn, 1);
2519:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
2520:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         netconn_set_ipv6only(sock->conn, 0);
2521:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2522:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_IPV6, IPV6_V6ONLY, ..) -> %d\n",
2523:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, (netconn_get_ipv6only(sock->conn) ? 1 : 0)));
2524:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2525:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
2526:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_IPV6, UNIMPL: optname=0x%x, ..)\n",
2527:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, optname));
2528:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = ENOPROTOOPT;
2529:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2530:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }  /* switch (optname) */
2531:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2532:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV6 */
2533:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2534:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDP && LWIP_UDPLITE
2535:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Level: IPPROTO_UDPLITE */
2536:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case IPPROTO_UDPLITE:
2537:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Special case: all IPPROTO_UDPLITE option take an int */
2538:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, optlen, int);
2539:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* If this is no UDP lite socket, ignore any options. */
2540:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (!NETCONNTYPE_ISUDPLITE(netconn_type(sock->conn))) {
2541:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return ENOPROTOOPT;
2542:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
2543:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
2544:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case UDPLITE_SEND_CSCOV:
2545:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((*(const int*)optval != 0) && ((*(const int*)optval < 8) || (*(const int*)optval > 0xffff
2546:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* don't allow illegal values! */
2547:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock->conn->pcb.udp->chksum_len_tx = 8;
2548:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 49


2549:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock->conn->pcb.udp->chksum_len_tx = (u16_t)*(const int*)optval;
2550:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2551:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_UDPLITE, UDPLITE_SEND_CSCOV) -> %d\n
2552:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, (*(const int*)optval)) );
2553:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2554:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case UDPLITE_RECV_CSCOV:
2555:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((*(const int*)optval != 0) && ((*(const int*)optval < 8) || (*(const int*)optval > 0xffff
2556:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* don't allow illegal values! */
2557:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock->conn->pcb.udp->chksum_len_rx = 8;
2558:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
2559:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock->conn->pcb.udp->chksum_len_rx = (u16_t)*(const int*)optval;
2560:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2561:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_UDPLITE, UDPLITE_RECV_CSCOV) -> %d\n
2562:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, (*(const int*)optval)) );
2563:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2564:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
2565:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_UDPLITE, UNIMPL: optname=0x%x, ..)\n
2566:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, optname));
2567:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = ENOPROTOOPT;
2568:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2569:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }  /* switch (optname) */
2570:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2571:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_UDP */
2572:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Level: IPPROTO_RAW */
2573:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case IPPROTO_RAW:
2574:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
2575:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV6 && LWIP_RAW
2576:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IPV6_CHECKSUM:
2577:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* It should not be possible to disable the checksum generation with ICMPv6
2578:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        * as per RFC 3542 chapter 3.1 */
2579:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if(sock->conn->pcb.raw->protocol == IPPROTO_ICMPV6) {
2580:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return EINVAL;
2581:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2582:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2583:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, optlen, int, NETCONN_RAW);
2584:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (*(const int *)optval < 0) {
2585:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock->conn->pcb.raw->chksum_reqd = 0;
2586:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else if (*(const int *)optval & 1) {
2587:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* Per RFC3542, odd offsets are not allowed */
2588:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return EINVAL;
2589:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
2590:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock->conn->pcb.raw->chksum_reqd = 1;
2591:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock->conn->pcb.raw->chksum_offset = (u16_t)*(const int *)optval;
2592:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2593:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_RAW, IPV6_CHECKSUM, ..) -> %d\n",
2594:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, sock->conn->pcb.raw->chksum_reqd));
2595:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2596:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV6 && LWIP_RAW */
2597:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
2598:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_RAW, UNIMPL: optname=0x%x, ..)\n",
2599:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                   s, optname));
2600:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = ENOPROTOOPT;
 187              		.loc 1 2600 0
 188 0024 5C20     		movs	r0, #92
 189              	.LVL18:
 190 0026 70BD     		pop	{r4, r5, r6, pc}
 191              	.LVL19:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 50


 192              	.L20:
2300:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 193              		.loc 1 2300 0
 194 0028 202D     		cmp	r5, #32
 195 002a 07D0     		beq	.L22
 196 002c 41F20A02 		movw	r2, #4106
 197 0030 9542     		cmp	r5, r2
 198 0032 1DD0     		beq	.L23
 199 0034 082D     		cmp	r5, #8
 200 0036 01D0     		beq	.L22
2380:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 201              		.loc 1 2380 0
 202 0038 5C20     		movs	r0, #92
 203              	.LVL20:
 204 003a 70BD     		pop	{r4, r5, r6, pc}
 205              	.LVL21:
 206              	.L22:
2310:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (*(const int*)optval) {
 207              		.loc 1 2310 0
 208 003c 049A     		ldr	r2, [sp, #16]
 209 003e 032A     		cmp	r2, #3
 210 0040 01D8     		bhi	.L60
 211 0042 1620     		movs	r0, #22
 212              	.LVL22:
 213 0044 70BD     		pop	{r4, r5, r6, pc}
 214              	.LVL23:
 215              	.L60:
2310:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (*(const int*)optval) {
 216              		.loc 1 2310 0 is_stmt 0 discriminator 2
 217 0046 1B68     		ldr	r3, [r3]
 218 0048 002B     		cmp	r3, #0
 219 004a 00F08380 		beq	.L35
2310:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (*(const int*)optval) {
 220              		.loc 1 2310 0 discriminator 4
 221 004e 5B68     		ldr	r3, [r3, #4]
 222 0050 002B     		cmp	r3, #0
 223 0052 00F08180 		beq	.L36
2311:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         ip_set_option(sock->conn->pcb.ip, optname);
 224              		.loc 1 2311 0 is_stmt 1
 225 0056 3268     		ldr	r2, [r6]
 226 0058 22B1     		cbz	r2, .L24
2312:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
 227              		.loc 1 2312 0
 228 005a 1A7A     		ldrb	r2, [r3, #8]	@ zero_extendqisi2
 229 005c 1543     		orrs	r5, r5, r2
 230              	.LVL24:
 231 005e 1D72     		strb	r5, [r3, #8]
2290:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 232              		.loc 1 2290 0
 233 0060 0020     		movs	r0, #0
 234              	.LVL25:
 235 0062 70BD     		pop	{r4, r5, r6, pc}
 236              	.LVL26:
 237              	.L24:
2314:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 238              		.loc 1 2314 0
 239 0064 1A7A     		ldrb	r2, [r3, #8]	@ zero_extendqisi2
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 51


 240 0066 22EA0505 		bic	r5, r2, r5
 241              	.LVL27:
 242 006a 1D72     		strb	r5, [r3, #8]
2290:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 243              		.loc 1 2290 0
 244 006c 0020     		movs	r0, #0
 245              	.LVL28:
 246 006e 70BD     		pop	{r4, r5, r6, pc}
 247              	.LVL29:
 248              	.L23:
2363:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDPLITE
 249              		.loc 1 2363 0
 250 0070 049A     		ldr	r2, [sp, #16]
 251 0072 032A     		cmp	r2, #3
 252 0074 01D8     		bhi	.L61
 253 0076 1620     		movs	r0, #22
 254              	.LVL30:
 255 0078 70BD     		pop	{r4, r5, r6, pc}
 256              	.LVL31:
 257              	.L61:
2363:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDPLITE
 258              		.loc 1 2363 0 is_stmt 0 discriminator 2
 259 007a 0368     		ldr	r3, [r0]
 260 007c 002B     		cmp	r3, #0
 261 007e 6DD0     		beq	.L38
2363:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDPLITE
 262              		.loc 1 2363 0 discriminator 4
 263 0080 5A68     		ldr	r2, [r3, #4]
 264 0082 002A     		cmp	r2, #0
 265 0084 6CD0     		beq	.L39
2363:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDPLITE
 266              		.loc 1 2363 0 discriminator 6
 267 0086 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 268 0088 03F0F003 		and	r3, r3, #240
 269 008c 202B     		cmp	r3, #32
 270 008e 01D0     		beq	.L62
2363:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDPLITE
 271              		.loc 1 2363 0
 272 0090 5C20     		movs	r0, #92
 273              	.LVL32:
 274 0092 70BD     		pop	{r4, r5, r6, pc}
 275              	.LVL33:
 276              	.L62:
2370:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         udp_setflags(sock->conn->pcb.udp, udp_flags(sock->conn->pcb.udp) | UDP_FLAGS_NOCHKSUM);
 277              		.loc 1 2370 0 is_stmt 1
 278 0094 3368     		ldr	r3, [r6]
 279 0096 2BB1     		cbz	r3, .L25
2371:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
 280              		.loc 1 2371 0
 281 0098 137C     		ldrb	r3, [r2, #16]	@ zero_extendqisi2
 282 009a 43F00103 		orr	r3, r3, #1
 283 009e 1374     		strb	r3, [r2, #16]
2290:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 284              		.loc 1 2290 0
 285 00a0 0020     		movs	r0, #0
 286              	.LVL34:
 287 00a2 70BD     		pop	{r4, r5, r6, pc}
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 52


 288              	.LVL35:
 289              	.L25:
2373:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 290              		.loc 1 2373 0
 291 00a4 137C     		ldrb	r3, [r2, #16]	@ zero_extendqisi2
 292 00a6 03F0FE03 		and	r3, r3, #254
 293 00aa 1374     		strb	r3, [r2, #16]
2290:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 294              		.loc 1 2290 0
 295 00ac 0020     		movs	r0, #0
 296              	.LVL36:
 297 00ae 70BD     		pop	{r4, r5, r6, pc}
 298              	.LVL37:
 299              	.L59:
2387:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_TTL:
 300              		.loc 1 2387 0
 301 00b0 012D     		cmp	r5, #1
 302 00b2 10D0     		beq	.L26
 303 00b4 022D     		cmp	r5, #2
 304 00b6 55D1     		bne	.L56
2389:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->conn->pcb.ip->ttl = (u8_t)(*(const int*)optval);
 305              		.loc 1 2389 0
 306 00b8 049A     		ldr	r2, [sp, #16]
 307 00ba 032A     		cmp	r2, #3
 308 00bc 01D8     		bhi	.L63
 309 00be 1620     		movs	r0, #22
 310              	.LVL38:
 311 00c0 70BD     		pop	{r4, r5, r6, pc}
 312              	.LVL39:
 313              	.L63:
2389:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->conn->pcb.ip->ttl = (u8_t)(*(const int*)optval);
 314              		.loc 1 2389 0 is_stmt 0 discriminator 2
 315 00c2 0368     		ldr	r3, [r0]
 316 00c4 002B     		cmp	r3, #0
 317 00c6 4FD0     		beq	.L43
2389:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->conn->pcb.ip->ttl = (u8_t)(*(const int*)optval);
 318              		.loc 1 2389 0 discriminator 4
 319 00c8 5B68     		ldr	r3, [r3, #4]
 320 00ca 002B     		cmp	r3, #0
 321 00cc 4ED0     		beq	.L44
2390:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_IP, IP_TTL, ..) -> %d\n",
 322              		.loc 1 2390 0 is_stmt 1
 323 00ce 3278     		ldrb	r2, [r6]	@ zero_extendqisi2
 324 00d0 9A72     		strb	r2, [r3, #10]
2290:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 325              		.loc 1 2290 0
 326 00d2 0020     		movs	r0, #0
 327              	.LVL40:
2393:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_TOS:
 328              		.loc 1 2393 0
 329 00d4 70BD     		pop	{r4, r5, r6, pc}
 330              	.LVL41:
 331              	.L26:
2395:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->conn->pcb.ip->tos = (u8_t)(*(const int*)optval);
 332              		.loc 1 2395 0
 333 00d6 049A     		ldr	r2, [sp, #16]
 334 00d8 032A     		cmp	r2, #3
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 53


 335 00da 01D8     		bhi	.L64
 336 00dc 1620     		movs	r0, #22
 337              	.LVL42:
 338 00de 70BD     		pop	{r4, r5, r6, pc}
 339              	.LVL43:
 340              	.L64:
2395:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->conn->pcb.ip->tos = (u8_t)(*(const int*)optval);
 341              		.loc 1 2395 0 is_stmt 0 discriminator 2
 342 00e0 0368     		ldr	r3, [r0]
 343 00e2 002B     		cmp	r3, #0
 344 00e4 44D0     		beq	.L46
2395:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->conn->pcb.ip->tos = (u8_t)(*(const int*)optval);
 345              		.loc 1 2395 0 discriminator 4
 346 00e6 5B68     		ldr	r3, [r3, #4]
 347 00e8 002B     		cmp	r3, #0
 348 00ea 43D0     		beq	.L47
2396:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_IP, IP_TOS, ..)-> %d\n",
 349              		.loc 1 2396 0 is_stmt 1
 350 00ec 3278     		ldrb	r2, [r6]	@ zero_extendqisi2
 351 00ee 5A72     		strb	r2, [r3, #9]
2290:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 352              		.loc 1 2290 0
 353 00f0 0020     		movs	r0, #0
 354              	.LVL44:
2399:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_MULTICAST_TX_OPTIONS
 355              		.loc 1 2399 0
 356 00f2 70BD     		pop	{r4, r5, r6, pc}
 357              	.LVL45:
 358              	.L19:
2465:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (sock->conn->pcb.tcp->state == LISTEN) {
 359              		.loc 1 2465 0
 360 00f4 049A     		ldr	r2, [sp, #16]
 361 00f6 032A     		cmp	r2, #3
 362 00f8 01D8     		bhi	.L65
 363 00fa 1620     		movs	r0, #22
 364              	.LVL46:
 365 00fc 70BD     		pop	{r4, r5, r6, pc}
 366              	.LVL47:
 367              	.L65:
2465:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (sock->conn->pcb.tcp->state == LISTEN) {
 368              		.loc 1 2465 0 is_stmt 0 discriminator 2
 369 00fe 0368     		ldr	r3, [r0]
 370 0100 002B     		cmp	r3, #0
 371 0102 39D0     		beq	.L49
2465:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (sock->conn->pcb.tcp->state == LISTEN) {
 372              		.loc 1 2465 0 discriminator 4
 373 0104 5A68     		ldr	r2, [r3, #4]
 374 0106 002A     		cmp	r2, #0
 375 0108 38D0     		beq	.L50
2465:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (sock->conn->pcb.tcp->state == LISTEN) {
 376              		.loc 1 2465 0 discriminator 6
 377 010a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 378 010c 03F0F003 		and	r3, r3, #240
 379 0110 102B     		cmp	r3, #16
 380 0112 01D0     		beq	.L66
2465:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (sock->conn->pcb.tcp->state == LISTEN) {
 381              		.loc 1 2465 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 54


 382 0114 5C20     		movs	r0, #92
 383              	.LVL48:
 384 0116 70BD     		pop	{r4, r5, r6, pc}
 385              	.LVL49:
 386              	.L66:
2466:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return EINVAL;
 387              		.loc 1 2466 0 is_stmt 1
 388 0118 137D     		ldrb	r3, [r2, #20]	@ zero_extendqisi2
 389 011a 012B     		cmp	r3, #1
 390 011c 30D0     		beq	.L52
2469:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case TCP_NODELAY:
 391              		.loc 1 2469 0
 392 011e 012D     		cmp	r5, #1
 393 0120 03D0     		beq	.L28
 394 0122 022D     		cmp	r5, #2
 395 0124 0FD0     		beq	.L29
2505:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 396              		.loc 1 2505 0
 397 0126 5C20     		movs	r0, #92
 398              	.LVL50:
2601:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2602:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }  /* switch (optname) */
2603:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2604:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   default:
2605:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, level=0x%x, UNIMPL: optname=0x%x, ..)\n",
2606:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                 s, level, optname));
2607:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     err = ENOPROTOOPT;
2608:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2609:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }  /* switch (level) */
2610:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2611:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return err;
2612:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 399              		.loc 1 2612 0
 400 0128 70BD     		pop	{r4, r5, r6, pc}
 401              	.LVL51:
 402              	.L28:
2471:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         tcp_nagle_disable(sock->conn->pcb.tcp);
 403              		.loc 1 2471 0
 404 012a 3368     		ldr	r3, [r6]
 405 012c 2BB1     		cbz	r3, .L30
2472:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
 406              		.loc 1 2472 0
 407 012e 937E     		ldrb	r3, [r2, #26]	@ zero_extendqisi2
 408 0130 43F04003 		orr	r3, r3, #64
 409 0134 9376     		strb	r3, [r2, #26]
2290:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 410              		.loc 1 2290 0
 411 0136 0020     		movs	r0, #0
 412              	.LVL52:
 413 0138 70BD     		pop	{r4, r5, r6, pc}
 414              	.LVL53:
 415              	.L30:
2474:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 416              		.loc 1 2474 0
 417 013a 937E     		ldrb	r3, [r2, #26]	@ zero_extendqisi2
 418 013c 03F0BF03 		and	r3, r3, #191
 419 0140 9376     		strb	r3, [r2, #26]
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 55


2290:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 420              		.loc 1 2290 0
 421 0142 0020     		movs	r0, #0
 422              	.LVL54:
 423 0144 70BD     		pop	{r4, r5, r6, pc}
 424              	.LVL55:
 425              	.L29:
2480:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_TCP, TCP_KEEPALIVE) -> %"U32_F"\n",
 426              		.loc 1 2480 0
 427 0146 3368     		ldr	r3, [r6]
 428 0148 C2F89030 		str	r3, [r2, #144]
2290:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 429              		.loc 1 2290 0
 430 014c 0020     		movs	r0, #0
 431              	.LVL56:
2483:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 432              		.loc 1 2483 0
 433 014e 70BD     		pop	{r4, r5, r6, pc}
 434              	.LVL57:
 435              	.L31:
2293:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 436              		.loc 1 2293 0
 437 0150 0920     		movs	r0, #9
 438              	.LVL58:
 439 0152 70BD     		pop	{r4, r5, r6, pc}
 440              	.LVL59:
 441              	.L35:
2310:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (*(const int*)optval) {
 442              		.loc 1 2310 0
 443 0154 1620     		movs	r0, #22
 444              	.LVL60:
 445 0156 70BD     		pop	{r4, r5, r6, pc}
 446              	.LVL61:
 447              	.L36:
 448 0158 1620     		movs	r0, #22
 449              	.LVL62:
 450 015a 70BD     		pop	{r4, r5, r6, pc}
 451              	.LVL63:
 452              	.L38:
2363:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDPLITE
 453              		.loc 1 2363 0
 454 015c 1620     		movs	r0, #22
 455              	.LVL64:
 456 015e 70BD     		pop	{r4, r5, r6, pc}
 457              	.LVL65:
 458              	.L39:
 459 0160 1620     		movs	r0, #22
 460              	.LVL66:
 461 0162 70BD     		pop	{r4, r5, r6, pc}
 462              	.LVL67:
 463              	.L56:
2456:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 464              		.loc 1 2456 0
 465 0164 5C20     		movs	r0, #92
 466              	.LVL68:
 467 0166 70BD     		pop	{r4, r5, r6, pc}
 468              	.LVL69:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 56


 469              	.L43:
2389:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->conn->pcb.ip->ttl = (u8_t)(*(const int*)optval);
 470              		.loc 1 2389 0
 471 0168 1620     		movs	r0, #22
 472              	.LVL70:
 473 016a 70BD     		pop	{r4, r5, r6, pc}
 474              	.LVL71:
 475              	.L44:
 476 016c 1620     		movs	r0, #22
 477              	.LVL72:
 478 016e 70BD     		pop	{r4, r5, r6, pc}
 479              	.LVL73:
 480              	.L46:
2395:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->conn->pcb.ip->tos = (u8_t)(*(const int*)optval);
 481              		.loc 1 2395 0
 482 0170 1620     		movs	r0, #22
 483              	.LVL74:
 484 0172 70BD     		pop	{r4, r5, r6, pc}
 485              	.LVL75:
 486              	.L47:
 487 0174 1620     		movs	r0, #22
 488              	.LVL76:
 489 0176 70BD     		pop	{r4, r5, r6, pc}
 490              	.LVL77:
 491              	.L49:
2465:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (sock->conn->pcb.tcp->state == LISTEN) {
 492              		.loc 1 2465 0
 493 0178 1620     		movs	r0, #22
 494              	.LVL78:
 495 017a 70BD     		pop	{r4, r5, r6, pc}
 496              	.LVL79:
 497              	.L50:
 498 017c 1620     		movs	r0, #22
 499              	.LVL80:
 500 017e 70BD     		pop	{r4, r5, r6, pc}
 501              	.LVL81:
 502              	.L52:
2467:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 503              		.loc 1 2467 0
 504 0180 1620     		movs	r0, #22
 505              	.LVL82:
 506 0182 70BD     		pop	{r4, r5, r6, pc}
 507              		.cfi_endproc
 508              	.LFE187:
 510              		.section	.text.lwip_getsockopt_impl,"ax",%progbits
 511              		.align	1
 512              		.syntax unified
 513              		.thumb
 514              		.thumb_func
 515              		.fpu fpv5-sp-d16
 517              	lwip_getsockopt_impl:
 518              	.LFB185:
1888:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u8_t err = 0;
 519              		.loc 1 1888 0
 520              		.cfi_startproc
 521              		@ args = 4, pretend = 0, frame = 0
 522              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 57


 523              	.LVL83:
 524 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 525              	.LCFI4:
 526              		.cfi_def_cfa_offset 24
 527              		.cfi_offset 3, -24
 528              		.cfi_offset 4, -20
 529              		.cfi_offset 5, -16
 530              		.cfi_offset 6, -12
 531              		.cfi_offset 7, -8
 532              		.cfi_offset 14, -4
 533 0002 0C46     		mov	r4, r1
 534 0004 1546     		mov	r5, r2
 535 0006 1F46     		mov	r7, r3
 536              	.LVL84:
1890:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 537              		.loc 1 1890 0
 538 0008 FFF7FEFF 		bl	tryget_socket
 539              	.LVL85:
1891:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return EBADF;
 540              		.loc 1 1891 0
 541 000c 0028     		cmp	r0, #0
 542 000e 00F0F880 		beq	.L89
 543 0012 0646     		mov	r6, r0
1895:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 544              		.loc 1 1895 0
 545 0014 062C     		cmp	r4, #6
 546 0016 00F0CD80 		beq	.L69
 547 001a 40F6FF73 		movw	r3, #4095
 548 001e 9C42     		cmp	r4, r3
 549 0020 04D0     		beq	.L70
 550 0022 002C     		cmp	r4, #0
 551 0024 00F0A280 		beq	.L125
2180:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 552              		.loc 1 2180 0
 553 0028 5C20     		movs	r0, #92
 554              	.LVL86:
 555 002a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 556              	.LVL87:
 557              	.L70:
1899:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 558              		.loc 1 1899 0
 559 002c 202D     		cmp	r5, #32
 560 002e 12D0     		beq	.L72
 561 0030 0DDD     		ble	.L126
 562 0032 41F20803 		movw	r3, #4104
 563 0036 9D42     		cmp	r5, r3
 564 0038 3ED0     		beq	.L75
 565 003a 41F20A03 		movw	r3, #4106
 566 003e 9D42     		cmp	r5, r3
 567 0040 7BD0     		beq	.L76
 568 0042 41F20703 		movw	r3, #4103
 569 0046 9D42     		cmp	r5, r3
 570 0048 58D0     		beq	.L127
 571              	.L91:
2011:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 572              		.loc 1 2011 0
 573 004a 5C20     		movs	r0, #92
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 58


 574              	.LVL88:
 575 004c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 576              	.LVL89:
 577              	.L126:
1899:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 578              		.loc 1 1899 0
 579 004e 022D     		cmp	r5, #2
 580 0050 07D0     		beq	.L74
 581 0052 082D     		cmp	r5, #8
 582 0054 F9D1     		bne	.L91
 583              	.L72:
1921:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = ip_get_option(sock->conn->pcb.ip, optname);
 584              		.loc 1 1921 0
 585 0056 069B     		ldr	r3, [sp, #24]
 586 0058 1B68     		ldr	r3, [r3]
 587 005a 032B     		cmp	r3, #3
 588 005c 1FD8     		bhi	.L128
 589 005e 1620     		movs	r0, #22
 590              	.LVL90:
 591 0060 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 592              	.LVL91:
 593              	.L74:
1903:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (NETCONNTYPE_GROUP(sock->conn->type) != NETCONN_TCP) {
 594              		.loc 1 1903 0
 595 0062 069B     		ldr	r3, [sp, #24]
 596 0064 1B68     		ldr	r3, [r3]
 597 0066 032B     		cmp	r3, #3
 598 0068 01D8     		bhi	.L129
 599 006a 1620     		movs	r0, #22
 600              	.LVL92:
 601 006c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 602              	.LVL93:
 603              	.L129:
1903:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (NETCONNTYPE_GROUP(sock->conn->type) != NETCONN_TCP) {
 604              		.loc 1 1903 0 is_stmt 0 discriminator 2
 605 006e 0368     		ldr	r3, [r0]
 606 0070 002B     		cmp	r3, #0
 607 0072 00F0C880 		beq	.L93
1903:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (NETCONNTYPE_GROUP(sock->conn->type) != NETCONN_TCP) {
 608              		.loc 1 1903 0 discriminator 4
 609 0076 5A68     		ldr	r2, [r3, #4]
 610 0078 002A     		cmp	r2, #0
 611 007a 00F0C680 		beq	.L94
1904:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return ENOPROTOOPT;
 612              		.loc 1 1904 0 is_stmt 1
 613 007e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 614 0080 03F0F003 		and	r3, r3, #240
 615 0084 102B     		cmp	r3, #16
 616 0086 01D0     		beq	.L130
1905:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 617              		.loc 1 1905 0
 618 0088 5C20     		movs	r0, #92
 619              	.LVL94:
 620 008a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 621              	.LVL95:
 622              	.L130:
1907:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         *(int*)optval = 1;
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 59


 623              		.loc 1 1907 0 discriminator 1
 624 008c 137D     		ldrb	r3, [r2, #20]	@ zero_extendqisi2
 625 008e 012B     		cmp	r3, #1
 626 0090 02D0     		beq	.L131
1910:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 627              		.loc 1 1910 0
 628 0092 0020     		movs	r0, #0
 629              	.LVL96:
 630 0094 3860     		str	r0, [r7]
 631 0096 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 632              	.LVL97:
 633              	.L131:
1908:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
 634              		.loc 1 1908 0
 635 0098 3B60     		str	r3, [r7]
1889:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 636              		.loc 1 1889 0
 637 009a 0020     		movs	r0, #0
 638              	.LVL98:
1908:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
 639              		.loc 1 1908 0
 640 009c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 641              	.LVL99:
 642              	.L128:
1921:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = ip_get_option(sock->conn->pcb.ip, optname);
 643              		.loc 1 1921 0 discriminator 2
 644 009e 3368     		ldr	r3, [r6]
 645 00a0 002B     		cmp	r3, #0
 646 00a2 00F0B480 		beq	.L97
1921:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = ip_get_option(sock->conn->pcb.ip, optname);
 647              		.loc 1 1921 0 is_stmt 0 discriminator 4
 648 00a6 5B68     		ldr	r3, [r3, #4]
 649 00a8 002B     		cmp	r3, #0
 650 00aa 00F0B280 		beq	.L98
1922:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, SOL_SOCKET, optname=0x%x, ..) = %s\n",
 651              		.loc 1 1922 0 is_stmt 1
 652 00ae 1B7A     		ldrb	r3, [r3, #8]	@ zero_extendqisi2
 653 00b0 1D40     		ands	r5, r5, r3
 654              	.LVL100:
 655 00b2 3D60     		str	r5, [r7]
1889:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 656              		.loc 1 1889 0
 657 00b4 0020     		movs	r0, #0
 658              	.LVL101:
1925:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 659              		.loc 1 1925 0
 660 00b6 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 661              	.LVL102:
 662              	.L75:
1928:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       switch (NETCONNTYPE_GROUP(netconn_type(sock->conn))) {
 663              		.loc 1 1928 0
 664 00b8 069B     		ldr	r3, [sp, #24]
 665 00ba 1B68     		ldr	r3, [r3]
 666 00bc 032B     		cmp	r3, #3
 667 00be 01D8     		bhi	.L132
 668 00c0 1620     		movs	r0, #22
 669              	.LVL103:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 60


 670 00c2 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 671              	.LVL104:
 672              	.L132:
1928:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       switch (NETCONNTYPE_GROUP(netconn_type(sock->conn))) {
 673              		.loc 1 1928 0 is_stmt 0 discriminator 2
 674 00c4 0368     		ldr	r3, [r0]
 675 00c6 002B     		cmp	r3, #0
 676 00c8 00F0A580 		beq	.L100
1929:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       case NETCONN_RAW:
 677              		.loc 1 1929 0 is_stmt 1
 678 00cc 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 679 00ce 02F0F003 		and	r3, r2, #240
 680 00d2 202B     		cmp	r3, #32
 681 00d4 0ED0     		beq	.L80
 682 00d6 402B     		cmp	r3, #64
 683 00d8 04D0     		beq	.L81
 684 00da 102B     		cmp	r3, #16
 685 00dc 06D0     		beq	.L133
1940:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG,
 686              		.loc 1 1940 0
 687 00de 3A60     		str	r2, [r7]
1889:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 688              		.loc 1 1889 0
 689 00e0 0020     		movs	r0, #0
 690              	.LVL105:
 691 00e2 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 692              	.LVL106:
 693              	.L81:
1931:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         break;
 694              		.loc 1 1931 0
 695 00e4 0323     		movs	r3, #3
 696 00e6 3B60     		str	r3, [r7]
1889:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 697              		.loc 1 1889 0
 698 00e8 0020     		movs	r0, #0
 699              	.LVL107:
1932:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       case NETCONN_TCP:
 700              		.loc 1 1932 0
 701 00ea F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 702              	.LVL108:
 703              	.L133:
1934:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         break;
 704              		.loc 1 1934 0
 705 00ec 0123     		movs	r3, #1
 706 00ee 3B60     		str	r3, [r7]
1889:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 707              		.loc 1 1889 0
 708 00f0 0020     		movs	r0, #0
 709              	.LVL109:
1935:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       case NETCONN_UDP:
 710              		.loc 1 1935 0
 711 00f2 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 712              	.LVL110:
 713              	.L80:
1937:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         break;
 714              		.loc 1 1937 0
 715 00f4 0223     		movs	r3, #2
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 61


 716 00f6 3B60     		str	r3, [r7]
1889:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 717              		.loc 1 1889 0
 718 00f8 0020     		movs	r0, #0
 719              	.LVL111:
1938:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       default: /* unrecognized socket type */
 720              		.loc 1 1938 0
 721 00fa F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 722              	.LVL112:
 723              	.L127:
1950:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* only overwrite ERR_OK or temporary errors */
 724              		.loc 1 1950 0
 725 00fc 069B     		ldr	r3, [sp, #24]
 726 00fe 1B68     		ldr	r3, [r3]
 727 0100 032B     		cmp	r3, #3
 728 0102 01D8     		bhi	.L134
 729 0104 1620     		movs	r0, #22
 730              	.LVL113:
 731 0106 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 732              	.LVL114:
 733              	.L134:
1952:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock_set_errno(sock, err_to_errno(sock->conn->last_err));
 734              		.loc 1 1952 0
 735 0108 037C     		ldrb	r3, [r0, #16]	@ zero_extendqisi2
 736 010a 732B     		cmp	r3, #115
 737 010c 18BF     		it	ne
 738 010e 002B     		cmpne	r3, #0
 739 0110 09D1     		bne	.L83
1952:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock_set_errno(sock, err_to_errno(sock->conn->last_err));
 740              		.loc 1 1952 0 is_stmt 0 discriminator 1
 741 0112 0368     		ldr	r3, [r0]
 742 0114 3BB1     		cbz	r3, .L83
 743              	.LBB2:
1953:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 744              		.loc 1 1953 0 is_stmt 1
 745 0116 93F90800 		ldrsb	r0, [r3, #8]
 746              	.LVL115:
 747 011a FFF7FEFF 		bl	err_to_errno
 748              	.LVL116:
 749 011e 3074     		strb	r0, [r6, #16]
 750 0120 08B1     		cbz	r0, .L83
1953:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 751              		.loc 1 1953 0 is_stmt 0 discriminator 1
 752 0122 484B     		ldr	r3, .L142
 753 0124 1860     		str	r0, [r3]
 754              	.LVL117:
 755              	.L83:
 756              	.LBE2:
1955:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->err = 0;
 757              		.loc 1 1955 0 is_stmt 1
 758 0126 337C     		ldrb	r3, [r6, #16]	@ zero_extendqisi2
 759 0128 FF2B     		cmp	r3, #255
 760 012a 03D0     		beq	.L135
 761              	.L84:
1955:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->err = 0;
 762              		.loc 1 1955 0 is_stmt 0 discriminator 4
 763 012c 3B60     		str	r3, [r7]
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 62


1956:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, SOL_SOCKET, SO_ERROR) = %d\n",
 764              		.loc 1 1956 0 is_stmt 1 discriminator 4
 765 012e 0020     		movs	r0, #0
 766 0130 3074     		strb	r0, [r6, #16]
1959:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 767              		.loc 1 1959 0 discriminator 4
 768 0132 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 769              	.LVL118:
 770              	.L135:
1955:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->err = 0;
 771              		.loc 1 1955 0
 772 0134 4FF0FF33 		mov	r3, #-1
 773 0138 F8E7     		b	.L84
 774              	.LVL119:
 775              	.L76:
1998:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDPLITE
 776              		.loc 1 1998 0
 777 013a 069B     		ldr	r3, [sp, #24]
 778 013c 1B68     		ldr	r3, [r3]
 779 013e 032B     		cmp	r3, #3
 780 0140 01D8     		bhi	.L136
 781 0142 1620     		movs	r0, #22
 782              	.LVL120:
 783 0144 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 784              	.LVL121:
 785              	.L136:
1998:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDPLITE
 786              		.loc 1 1998 0 is_stmt 0 discriminator 2
 787 0146 0368     		ldr	r3, [r0]
 788 0148 002B     		cmp	r3, #0
 789 014a 66D0     		beq	.L104
1998:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDPLITE
 790              		.loc 1 1998 0 discriminator 4
 791 014c 5A68     		ldr	r2, [r3, #4]
 792 014e 002A     		cmp	r2, #0
 793 0150 65D0     		beq	.L105
1998:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDPLITE
 794              		.loc 1 1998 0 discriminator 6
 795 0152 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 796 0154 03F0F003 		and	r3, r3, #240
 797 0158 202B     		cmp	r3, #32
 798 015a 01D0     		beq	.L137
1998:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDPLITE
 799              		.loc 1 1998 0
 800 015c 5C20     		movs	r0, #92
 801              	.LVL122:
 802 015e F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 803              	.LVL123:
 804              	.L137:
2005:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 805              		.loc 1 2005 0 is_stmt 1
 806 0160 137C     		ldrb	r3, [r2, #16]	@ zero_extendqisi2
 807 0162 03F00103 		and	r3, r3, #1
 808 0166 3B60     		str	r3, [r7]
1889:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 809              		.loc 1 1889 0
 810 0168 0020     		movs	r0, #0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 63


 811              	.LVL124:
2006:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_UDP*/
 812              		.loc 1 2006 0
 813 016a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 814              	.LVL125:
 815              	.L125:
2018:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_TTL:
 816              		.loc 1 2018 0
 817 016c 012D     		cmp	r5, #1
 818 016e 11D0     		beq	.L85
 819 0170 022D     		cmp	r5, #2
 820 0172 56D1     		bne	.L122
2020:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = sock->conn->pcb.ip->ttl;
 821              		.loc 1 2020 0
 822 0174 069B     		ldr	r3, [sp, #24]
 823 0176 1B68     		ldr	r3, [r3]
 824 0178 032B     		cmp	r3, #3
 825 017a 01D8     		bhi	.L138
 826 017c 1620     		movs	r0, #22
 827              	.LVL126:
 828 017e F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 829              	.LVL127:
 830              	.L138:
2020:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = sock->conn->pcb.ip->ttl;
 831              		.loc 1 2020 0 is_stmt 0 discriminator 2
 832 0180 0368     		ldr	r3, [r0]
 833 0182 002B     		cmp	r3, #0
 834 0184 4FD0     		beq	.L109
2020:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = sock->conn->pcb.ip->ttl;
 835              		.loc 1 2020 0 discriminator 4
 836 0186 5B68     		ldr	r3, [r3, #4]
 837 0188 002B     		cmp	r3, #0
 838 018a 4ED0     		beq	.L110
2021:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_IP, IP_TTL) = %d\n",
 839              		.loc 1 2021 0 is_stmt 1
 840 018c 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
 841 018e 3B60     		str	r3, [r7]
1889:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 842              		.loc 1 1889 0
 843 0190 0020     		movs	r0, #0
 844              	.LVL128:
2024:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_TOS:
 845              		.loc 1 2024 0
 846 0192 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 847              	.LVL129:
 848              	.L85:
2026:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = sock->conn->pcb.ip->tos;
 849              		.loc 1 2026 0
 850 0194 069B     		ldr	r3, [sp, #24]
 851 0196 1B68     		ldr	r3, [r3]
 852 0198 032B     		cmp	r3, #3
 853 019a 01D8     		bhi	.L139
 854 019c 1620     		movs	r0, #22
 855              	.LVL130:
 856 019e F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 857              	.LVL131:
 858              	.L139:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 64


2026:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = sock->conn->pcb.ip->tos;
 859              		.loc 1 2026 0 is_stmt 0 discriminator 2
 860 01a0 0368     		ldr	r3, [r0]
 861 01a2 002B     		cmp	r3, #0
 862 01a4 43D0     		beq	.L112
2026:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = sock->conn->pcb.ip->tos;
 863              		.loc 1 2026 0 discriminator 4
 864 01a6 5B68     		ldr	r3, [r3, #4]
 865 01a8 002B     		cmp	r3, #0
 866 01aa 42D0     		beq	.L113
2027:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_IP, IP_TOS) = %d\n",
 867              		.loc 1 2027 0 is_stmt 1
 868 01ac 5B7A     		ldrb	r3, [r3, #9]	@ zero_extendqisi2
 869 01ae 3B60     		str	r3, [r7]
1889:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 870              		.loc 1 1889 0
 871 01b0 0020     		movs	r0, #0
 872              	.LVL132:
2030:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_MULTICAST_TX_OPTIONS
 873              		.loc 1 2030 0
 874 01b2 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 875              	.LVL133:
 876              	.L69:
2073:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (sock->conn->pcb.tcp->state == LISTEN) {
 877              		.loc 1 2073 0
 878 01b4 069B     		ldr	r3, [sp, #24]
 879 01b6 1B68     		ldr	r3, [r3]
 880 01b8 032B     		cmp	r3, #3
 881 01ba 01D8     		bhi	.L140
 882 01bc 1620     		movs	r0, #22
 883              	.LVL134:
 884 01be F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 885              	.LVL135:
 886              	.L140:
2073:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (sock->conn->pcb.tcp->state == LISTEN) {
 887              		.loc 1 2073 0 is_stmt 0 discriminator 2
 888 01c0 0368     		ldr	r3, [r0]
 889 01c2 002B     		cmp	r3, #0
 890 01c4 37D0     		beq	.L115
2073:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (sock->conn->pcb.tcp->state == LISTEN) {
 891              		.loc 1 2073 0 discriminator 4
 892 01c6 5A68     		ldr	r2, [r3, #4]
 893 01c8 002A     		cmp	r2, #0
 894 01ca 36D0     		beq	.L116
2073:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (sock->conn->pcb.tcp->state == LISTEN) {
 895              		.loc 1 2073 0 discriminator 6
 896 01cc 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 897 01ce 03F0F003 		and	r3, r3, #240
 898 01d2 102B     		cmp	r3, #16
 899 01d4 01D0     		beq	.L141
2073:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (sock->conn->pcb.tcp->state == LISTEN) {
 900              		.loc 1 2073 0
 901 01d6 5C20     		movs	r0, #92
 902              	.LVL136:
 903 01d8 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 904              	.LVL137:
 905              	.L141:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 65


2074:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return EINVAL;
 906              		.loc 1 2074 0 is_stmt 1
 907 01da 137D     		ldrb	r3, [r2, #20]	@ zero_extendqisi2
 908 01dc 012B     		cmp	r3, #1
 909 01de 2ED0     		beq	.L118
2077:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case TCP_NODELAY:
 910              		.loc 1 2077 0
 911 01e0 012D     		cmp	r5, #1
 912 01e2 03D0     		beq	.L87
 913 01e4 022D     		cmp	r5, #2
 914 01e6 07D0     		beq	.L88
2109:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 915              		.loc 1 2109 0
 916 01e8 5C20     		movs	r0, #92
 917              	.LVL138:
2192:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 918              		.loc 1 2192 0
 919 01ea F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 920              	.LVL139:
 921              	.L87:
2079:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_TCP, TCP_NODELAY) = %s\n",
 922              		.loc 1 2079 0
 923 01ec 937E     		ldrb	r3, [r2, #26]	@ zero_extendqisi2
 924 01ee C3F38013 		ubfx	r3, r3, #6, #1
 925 01f2 3B60     		str	r3, [r7]
1889:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 926              		.loc 1 1889 0
 927 01f4 0020     		movs	r0, #0
 928              	.LVL140:
2082:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case TCP_KEEPALIVE:
 929              		.loc 1 2082 0
 930 01f6 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 931              	.LVL141:
 932              	.L88:
2084:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_TCP, TCP_KEEPALIVE) = %d\n",
 933              		.loc 1 2084 0
 934 01f8 D2F89030 		ldr	r3, [r2, #144]
 935 01fc 3B60     		str	r3, [r7]
1889:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 936              		.loc 1 1889 0
 937 01fe 0020     		movs	r0, #0
 938              	.LVL142:
2087:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 939              		.loc 1 2087 0
 940 0200 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 941              	.LVL143:
 942              	.L89:
1892:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 943              		.loc 1 1892 0
 944 0202 0920     		movs	r0, #9
 945              	.LVL144:
 946 0204 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 947              	.LVL145:
 948              	.L93:
1903:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (NETCONNTYPE_GROUP(sock->conn->type) != NETCONN_TCP) {
 949              		.loc 1 1903 0
 950 0206 1620     		movs	r0, #22
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 66


 951              	.LVL146:
 952 0208 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 953              	.LVL147:
 954              	.L94:
 955 020a 1620     		movs	r0, #22
 956              	.LVL148:
 957 020c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 958              	.LVL149:
 959              	.L97:
1921:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = ip_get_option(sock->conn->pcb.ip, optname);
 960              		.loc 1 1921 0
 961 020e 1620     		movs	r0, #22
 962              	.LVL150:
 963 0210 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 964              	.LVL151:
 965              	.L98:
 966 0212 1620     		movs	r0, #22
 967              	.LVL152:
 968 0214 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 969              	.LVL153:
 970              	.L100:
1928:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       switch (NETCONNTYPE_GROUP(netconn_type(sock->conn))) {
 971              		.loc 1 1928 0
 972 0216 1620     		movs	r0, #22
 973              	.LVL154:
 974 0218 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 975              	.LVL155:
 976              	.L104:
1998:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDPLITE
 977              		.loc 1 1998 0
 978 021a 1620     		movs	r0, #22
 979              	.LVL156:
 980 021c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 981              	.LVL157:
 982              	.L105:
 983 021e 1620     		movs	r0, #22
 984              	.LVL158:
 985 0220 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 986              	.LVL159:
 987              	.L122:
2064:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 988              		.loc 1 2064 0
 989 0222 5C20     		movs	r0, #92
 990              	.LVL160:
 991 0224 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 992              	.LVL161:
 993              	.L109:
2020:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = sock->conn->pcb.ip->ttl;
 994              		.loc 1 2020 0
 995 0226 1620     		movs	r0, #22
 996              	.LVL162:
 997 0228 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 998              	.LVL163:
 999              	.L110:
 1000 022a 1620     		movs	r0, #22
 1001              	.LVL164:
 1002 022c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 67


 1003              	.LVL165:
 1004              	.L112:
2026:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = sock->conn->pcb.ip->tos;
 1005              		.loc 1 2026 0
 1006 022e 1620     		movs	r0, #22
 1007              	.LVL166:
 1008 0230 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1009              	.LVL167:
 1010              	.L113:
 1011 0232 1620     		movs	r0, #22
 1012              	.LVL168:
 1013 0234 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1014              	.LVL169:
 1015              	.L115:
2073:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (sock->conn->pcb.tcp->state == LISTEN) {
 1016              		.loc 1 2073 0
 1017 0236 1620     		movs	r0, #22
 1018              	.LVL170:
 1019 0238 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1020              	.LVL171:
 1021              	.L116:
 1022 023a 1620     		movs	r0, #22
 1023              	.LVL172:
 1024 023c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1025              	.LVL173:
 1026              	.L118:
2075:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 1027              		.loc 1 2075 0
 1028 023e 1620     		movs	r0, #22
 1029              	.LVL174:
 1030 0240 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1031              	.LVL175:
 1032              	.L143:
 1033 0242 00BF     		.align	2
 1034              	.L142:
 1035 0244 00000000 		.word	errno
 1036              		.cfi_endproc
 1037              	.LFE185:
 1039              		.section	.text.alloc_socket,"ax",%progbits
 1040              		.align	1
 1041              		.syntax unified
 1042              		.thumb
 1043              		.thumb_func
 1044              		.fpu fpv5-sp-d16
 1046              	alloc_socket:
 1047              	.LFB161:
 402:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int i;
 1048              		.loc 1 402 0
 1049              		.cfi_startproc
 1050              		@ args = 0, pretend = 0, frame = 0
 1051              		@ frame_needed = 0, uses_anonymous_args = 0
 1052              	.LVL176:
 1053 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1054              	.LCFI5:
 1055              		.cfi_def_cfa_offset 24
 1056              		.cfi_offset 3, -24
 1057              		.cfi_offset 4, -20
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 68


 1058              		.cfi_offset 5, -16
 1059              		.cfi_offset 6, -12
 1060              		.cfi_offset 7, -8
 1061              		.cfi_offset 14, -4
 1062 0002 0646     		mov	r6, r0
 1063 0004 0D46     		mov	r5, r1
 1064              	.LVL177:
 407:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Protect socket array */
 1065              		.loc 1 407 0
 1066 0006 0024     		movs	r4, #0
 1067 0008 05E0     		b	.L145
 1068              	.LVL178:
 1069              	.L153:
 420:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].errevent   = 0;
 1070              		.loc 1 420 0 discriminator 2
 1071 000a 35B3     		cbz	r5, .L147
 420:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].errevent   = 0;
 1072              		.loc 1 420 0 is_stmt 0
 1073 000c 0125     		movs	r5, #1
 1074              	.LVL179:
 1075 000e 24E0     		b	.L147
 1076              	.LVL180:
 1077              	.L146:
 425:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 1078              		.loc 1 425 0 is_stmt 1 discriminator 2
 1079 0010 FFF7FEFF 		bl	sys_arch_unprotect
 1080              	.LVL181:
 407:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Protect socket array */
 1081              		.loc 1 407 0 discriminator 2
 1082 0014 0134     		adds	r4, r4, #1
 1083              	.LVL182:
 1084              	.L145:
 407:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Protect socket array */
 1085              		.loc 1 407 0 is_stmt 0 discriminator 1
 1086 0016 032C     		cmp	r4, #3
 1087 0018 29DC     		bgt	.L152
 409:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (!sockets[i].conn && (sockets[i].select_waiting == 0)) {
 1088              		.loc 1 409 0 is_stmt 1
 1089 001a FFF7FEFF 		bl	sys_arch_protect
 1090              	.LVL183:
 410:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].conn       = newconn;
 1091              		.loc 1 410 0
 1092 001e 04EB8402 		add	r2, r4, r4, lsl #2
 1093 0022 9300     		lsls	r3, r2, #2
 1094 0024 144A     		ldr	r2, .L154
 1095 0026 D358     		ldr	r3, [r2, r3]
 1096 0028 002B     		cmp	r3, #0
 1097 002a F1D1     		bne	.L146
 410:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].conn       = newconn;
 1098              		.loc 1 410 0 is_stmt 0 discriminator 1
 1099 002c 04EB8403 		add	r3, r4, r4, lsl #2
 1100 0030 9A00     		lsls	r2, r3, #2
 1101 0032 114B     		ldr	r3, .L154
 1102 0034 1344     		add	r3, r3, r2
 1103 0036 5B7C     		ldrb	r3, [r3, #17]	@ zero_extendqisi2
 1104 0038 002B     		cmp	r3, #0
 1105 003a E9D1     		bne	.L146
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 69


 411:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* The socket is not yet known to anyone, so no need to protect
 1106              		.loc 1 411 0 is_stmt 1
 1107 003c 0E49     		ldr	r1, .L154
 1108 003e 8F18     		adds	r7, r1, r2
 1109 0040 8E50     		str	r6, [r1, r2]
 414:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].lastdata   = NULL;
 1110              		.loc 1 414 0
 1111 0042 FFF7FEFF 		bl	sys_arch_unprotect
 1112              	.LVL184:
 415:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].lastoffset = 0;
 1113              		.loc 1 415 0
 1114 0046 0023     		movs	r3, #0
 1115 0048 7B60     		str	r3, [r7, #4]
 416:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].rcvevent   = 0;
 1116              		.loc 1 416 0
 1117 004a 3B81     		strh	r3, [r7, #8]	@ movhi
 417:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* TCP sendbuf is empty, but the socket is not yet writable until connected
 1118              		.loc 1 417 0
 1119 004c 7B81     		strh	r3, [r7, #10]	@ movhi
 420:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].errevent   = 0;
 1120              		.loc 1 420 0
 1121 004e 3378     		ldrb	r3, [r6]	@ zero_extendqisi2
 1122 0050 03F0F003 		and	r3, r3, #240
 1123 0054 102B     		cmp	r3, #16
 1124 0056 D8D0     		beq	.L153
 1125 0058 0125     		movs	r5, #1
 1126              	.LVL185:
 1127              	.L147:
 420:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].errevent   = 0;
 1128              		.loc 1 420 0 is_stmt 0 discriminator 6
 1129 005a A300     		lsls	r3, r4, #2
 1130 005c 2344     		add	r3, r3, r4
 1131 005e 9A00     		lsls	r2, r3, #2
 1132 0060 054B     		ldr	r3, .L154
 1133 0062 1344     		add	r3, r3, r2
 1134 0064 9D81     		strh	r5, [r3, #12]	@ movhi
 421:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].err        = 0;
 1135              		.loc 1 421 0 is_stmt 1 discriminator 6
 1136 0066 0022     		movs	r2, #0
 1137 0068 DA81     		strh	r2, [r3, #14]	@ movhi
 422:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return i + LWIP_SOCKET_OFFSET;
 1138              		.loc 1 422 0 discriminator 6
 1139 006a 1A74     		strb	r2, [r3, #16]
 423:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 1140              		.loc 1 423 0 discriminator 6
 1141 006c 01E0     		b	.L144
 1142              	.LVL186:
 1143              	.L152:
 427:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 1144              		.loc 1 427 0
 1145 006e 4FF0FF34 		mov	r4, #-1
 1146              	.LVL187:
 1147              	.L144:
 428:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 1148              		.loc 1 428 0
 1149 0072 2046     		mov	r0, r4
 1150 0074 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 70


 1151              	.LVL188:
 1152              	.L155:
 1153 0076 00BF     		.align	2
 1154              	.L154:
 1155 0078 00000000 		.word	.LANCHOR0
 1156              		.cfi_endproc
 1157              	.LFE161:
 1159              		.section	.text.lwip_selscan,"ax",%progbits
 1160              		.align	1
 1161              		.syntax unified
 1162              		.thumb
 1163              		.thumb_func
 1164              		.fpu fpv5-sp-d16
 1166              	lwip_selscan:
 1167              	.LFB177:
1308:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int i, nready = 0;
 1168              		.loc 1 1308 0
 1169              		.cfi_startproc
 1170              		@ args = 12, pretend = 0, frame = 40
 1171              		@ frame_needed = 0, uses_anonymous_args = 0
 1172              	.LVL189:
 1173 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1174              	.LCFI6:
 1175              		.cfi_def_cfa_offset 36
 1176              		.cfi_offset 4, -36
 1177              		.cfi_offset 5, -32
 1178              		.cfi_offset 6, -28
 1179              		.cfi_offset 7, -24
 1180              		.cfi_offset 8, -20
 1181              		.cfi_offset 9, -16
 1182              		.cfi_offset 10, -12
 1183              		.cfi_offset 11, -8
 1184              		.cfi_offset 14, -4
 1185 0004 8BB0     		sub	sp, sp, #44
 1186              	.LCFI7:
 1187              		.cfi_def_cfa_offset 80
 1188 0006 8346     		mov	fp, r0
 1189 0008 0D46     		mov	r5, r1
 1190 000a 1646     		mov	r6, r2
 1191 000c 1F46     		mov	r7, r3
 1192              	.LVL190:
 1193              	.LBB3:
1314:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   FD_ZERO(&lwriteset);
 1194              		.loc 1 1314 0
 1195 000e 08AA     		add	r2, sp, #32
 1196              	.LVL191:
 1197 0010 0023     		movs	r3, #0
 1198              	.LVL192:
 1199 0012 03E0     		b	.L157
 1200              	.LVL193:
 1201              	.L158:
1314:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   FD_ZERO(&lwriteset);
 1202              		.loc 1 1314 0 is_stmt 0 discriminator 3
 1203 0014 0021     		movs	r1, #0
 1204 0016 1170     		strb	r1, [r2]
 1205 0018 0133     		adds	r3, r3, #1
 1206              	.LVL194:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 71


 1207 001a 0132     		adds	r2, r2, #1
 1208              	.LVL195:
 1209              	.L157:
1314:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   FD_ZERO(&lwriteset);
 1210              		.loc 1 1314 0 discriminator 1
 1211 001c 072B     		cmp	r3, #7
 1212 001e F9D9     		bls	.L158
 1213 0020 06AA     		add	r2, sp, #24
 1214              	.LVL196:
 1215 0022 0023     		movs	r3, #0
 1216              	.LVL197:
 1217 0024 03E0     		b	.L159
 1218              	.LVL198:
 1219              	.L160:
 1220              	.LBE3:
 1221              	.LBB4:
1315:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   FD_ZERO(&lexceptset);
 1222              		.loc 1 1315 0 is_stmt 1 discriminator 3
 1223 0026 0021     		movs	r1, #0
 1224 0028 1170     		strb	r1, [r2]
 1225 002a 0133     		adds	r3, r3, #1
 1226              	.LVL199:
 1227 002c 0132     		adds	r2, r2, #1
 1228              	.LVL200:
 1229              	.L159:
1315:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   FD_ZERO(&lexceptset);
 1230              		.loc 1 1315 0 is_stmt 0 discriminator 1
 1231 002e 072B     		cmp	r3, #7
 1232 0030 F9D9     		bls	.L160
 1233 0032 04AA     		add	r2, sp, #16
 1234              	.LVL201:
 1235 0034 0023     		movs	r3, #0
 1236              	.LVL202:
 1237 0036 03E0     		b	.L161
 1238              	.LVL203:
 1239              	.L162:
 1240              	.LBE4:
 1241              	.LBB5:
1316:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 1242              		.loc 1 1316 0 is_stmt 1 discriminator 3
 1243 0038 0021     		movs	r1, #0
 1244 003a 1170     		strb	r1, [r2]
 1245 003c 0133     		adds	r3, r3, #1
 1246              	.LVL204:
 1247 003e 0132     		adds	r2, r2, #1
 1248              	.LVL205:
 1249              	.L161:
1316:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 1250              		.loc 1 1316 0 is_stmt 0 discriminator 1
 1251 0040 072B     		cmp	r3, #7
 1252 0042 F9D9     		bls	.L162
 1253 0044 0023     		movs	r3, #0
 1254              	.LVL206:
 1255 0046 0293     		str	r3, [sp, #8]
 1256 0048 1C46     		mov	r4, r3
 1257 004a 5EE0     		b	.L163
 1258              	.LVL207:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 72


 1259              	.L165:
 1260              	.LBE5:
1328:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock = tryget_socket(i);
 1261              		.loc 1 1328 0 is_stmt 1
 1262 004c FFF7FEFF 		bl	sys_arch_protect
 1263              	.LVL208:
 1264 0050 0190     		str	r0, [sp, #4]
 1265              	.LVL209:
1329:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (sock != NULL) {
 1266              		.loc 1 1329 0
 1267 0052 2046     		mov	r0, r4
 1268              	.LVL210:
 1269 0054 FFF7FEFF 		bl	tryget_socket
 1270              	.LVL211:
1330:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       void* lastdata = sock->lastdata;
 1271              		.loc 1 1330 0
 1272 0058 0028     		cmp	r0, #0
 1273 005a 78D0     		beq	.L168
 1274              	.LBB6:
1331:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       s16_t rcvevent = sock->rcvevent;
 1275              		.loc 1 1331 0
 1276 005c 4268     		ldr	r2, [r0, #4]
 1277 005e 0392     		str	r2, [sp, #12]
 1278              	.LVL212:
1332:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       u16_t sendevent = sock->sendevent;
 1279              		.loc 1 1332 0
 1280 0060 B0F90A90 		ldrsh	r9, [r0, #10]
 1281              	.LVL213:
1333:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       u16_t errevent = sock->errevent;
 1282              		.loc 1 1333 0
 1283 0064 B0F80CA0 		ldrh	r10, [r0, #12]
 1284              	.LVL214:
1334:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       SYS_ARCH_UNPROTECT(lev);
 1285              		.loc 1 1334 0
 1286 0068 B0F80E80 		ldrh	r8, [r0, #14]
 1287              	.LVL215:
1335:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 1288              		.loc 1 1335 0
 1289 006c 0198     		ldr	r0, [sp, #4]
 1290              	.LVL216:
 1291 006e FFF7FEFF 		bl	sys_arch_unprotect
 1292              	.LVL217:
1339:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         FD_SET(i, &lreadset);
 1293              		.loc 1 1339 0
 1294 0072 CDB1     		cbz	r5, .L169
1339:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         FD_SET(i, &lreadset);
 1295              		.loc 1 1339 0 is_stmt 0 discriminator 1
 1296 0074 6209     		lsrs	r2, r4, #5
 1297 0076 55F82210 		ldr	r1, [r5, r2, lsl #2]
 1298 007a 04F01F00 		and	r0, r4, #31
 1299 007e 0123     		movs	r3, #1
 1300 0080 8340     		lsls	r3, r3, r0
 1301 0082 1942     		tst	r1, r3
 1302 0084 10D0     		beq	.L169
1339:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         FD_SET(i, &lreadset);
 1303              		.loc 1 1339 0 discriminator 2
 1304 0086 0399     		ldr	r1, [sp, #12]
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 73


 1305 0088 B9F1000F 		cmp	r9, #0
 1306 008c D8BF     		it	le
 1307 008e 0029     		cmple	r1, #0
 1308 0090 0AD0     		beq	.L169
1340:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_selscan: fd=%d ready for reading\n", i));
 1309              		.loc 1 1340 0 is_stmt 1
 1310 0092 0AA9     		add	r1, sp, #40
 1311 0094 01EB8202 		add	r2, r1, r2, lsl #2
 1312 0098 52F8081C 		ldr	r1, [r2, #-8]
 1313 009c 0B43     		orrs	r3, r3, r1
 1314 009e 42F8083C 		str	r3, [r2, #-8]
1342:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 1315              		.loc 1 1342 0
 1316 00a2 029B     		ldr	r3, [sp, #8]
 1317 00a4 0133     		adds	r3, r3, #1
 1318 00a6 0293     		str	r3, [sp, #8]
 1319              	.LVL218:
 1320              	.L169:
1345:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         FD_SET(i, &lwriteset);
 1321              		.loc 1 1345 0
 1322 00a8 B6B1     		cbz	r6, .L170
1345:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         FD_SET(i, &lwriteset);
 1323              		.loc 1 1345 0 is_stmt 0 discriminator 1
 1324 00aa 6209     		lsrs	r2, r4, #5
 1325 00ac 56F82210 		ldr	r1, [r6, r2, lsl #2]
 1326 00b0 04F01F00 		and	r0, r4, #31
 1327 00b4 0123     		movs	r3, #1
 1328 00b6 8340     		lsls	r3, r3, r0
 1329 00b8 1942     		tst	r1, r3
 1330 00ba 0DD0     		beq	.L170
1345:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         FD_SET(i, &lwriteset);
 1331              		.loc 1 1345 0 discriminator 2
 1332 00bc BAF1000F 		cmp	r10, #0
 1333 00c0 0AD0     		beq	.L170
1346:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_selscan: fd=%d ready for writing\n", i));
 1334              		.loc 1 1346 0 is_stmt 1
 1335 00c2 0AA9     		add	r1, sp, #40
 1336 00c4 01EB8202 		add	r2, r1, r2, lsl #2
 1337 00c8 52F8101C 		ldr	r1, [r2, #-16]
 1338 00cc 0B43     		orrs	r3, r3, r1
 1339 00ce 42F8103C 		str	r3, [r2, #-16]
1348:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 1340              		.loc 1 1348 0
 1341 00d2 029B     		ldr	r3, [sp, #8]
 1342 00d4 0133     		adds	r3, r3, #1
 1343 00d6 0293     		str	r3, [sp, #8]
 1344              	.LVL219:
 1345              	.L170:
1351:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         FD_SET(i, &lexceptset);
 1346              		.loc 1 1351 0
 1347 00d8 B7B1     		cbz	r7, .L167
1351:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         FD_SET(i, &lexceptset);
 1348              		.loc 1 1351 0 is_stmt 0 discriminator 1
 1349 00da 6209     		lsrs	r2, r4, #5
 1350 00dc 57F82210 		ldr	r1, [r7, r2, lsl #2]
 1351 00e0 04F01F00 		and	r0, r4, #31
 1352 00e4 0123     		movs	r3, #1
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 74


 1353 00e6 8340     		lsls	r3, r3, r0
 1354 00e8 1942     		tst	r1, r3
 1355 00ea 0DD0     		beq	.L167
1351:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         FD_SET(i, &lexceptset);
 1356              		.loc 1 1351 0 discriminator 2
 1357 00ec B8F1000F 		cmp	r8, #0
 1358 00f0 0AD0     		beq	.L167
1352:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_selscan: fd=%d ready for exception\n", i));
 1359              		.loc 1 1352 0 is_stmt 1
 1360 00f2 0AA9     		add	r1, sp, #40
 1361 00f4 01EB8202 		add	r2, r1, r2, lsl #2
 1362 00f8 52F8181C 		ldr	r1, [r2, #-24]
 1363 00fc 0B43     		orrs	r3, r3, r1
 1364 00fe 42F8183C 		str	r3, [r2, #-24]
1354:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 1365              		.loc 1 1354 0
 1366 0102 029B     		ldr	r3, [sp, #8]
 1367 0104 0133     		adds	r3, r3, #1
 1368 0106 0293     		str	r3, [sp, #8]
 1369              	.LVL220:
 1370              	.L167:
 1371              	.LBE6:
1320:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* if this FD is not in the set, continue */
 1372              		.loc 1 1320 0 discriminator 2
 1373 0108 0134     		adds	r4, r4, #1
 1374              	.LVL221:
 1375              	.L163:
1320:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* if this FD is not in the set, continue */
 1376              		.loc 1 1320 0 is_stmt 0 discriminator 1
 1377 010a 5C45     		cmp	r4, fp
 1378 010c 23DA     		bge	.L174
1322:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         !(writeset_in && FD_ISSET(i, writeset_in)) &&
 1379              		.loc 1 1322 0 is_stmt 1
 1380 010e 45B1     		cbz	r5, .L164
1322:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         !(writeset_in && FD_ISSET(i, writeset_in)) &&
 1381              		.loc 1 1322 0 is_stmt 0 discriminator 2
 1382 0110 6309     		lsrs	r3, r4, #5
 1383 0112 55F82320 		ldr	r2, [r5, r3, lsl #2]
 1384 0116 04F01F01 		and	r1, r4, #31
 1385 011a 0123     		movs	r3, #1
 1386 011c 8B40     		lsls	r3, r3, r1
 1387 011e 1A42     		tst	r2, r3
 1388 0120 94D1     		bne	.L165
 1389              	.L164:
1322:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         !(writeset_in && FD_ISSET(i, writeset_in)) &&
 1390              		.loc 1 1322 0 discriminator 3
 1391 0122 46B1     		cbz	r6, .L166
1323:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         !(exceptset_in && FD_ISSET(i, exceptset_in))) {
 1392              		.loc 1 1323 0 is_stmt 1
 1393 0124 6309     		lsrs	r3, r4, #5
 1394 0126 56F82320 		ldr	r2, [r6, r3, lsl #2]
 1395 012a 04F01F01 		and	r1, r4, #31
 1396 012e 0123     		movs	r3, #1
 1397 0130 8B40     		lsls	r3, r3, r1
 1398 0132 1A42     		tst	r2, r3
 1399 0134 8AD1     		bne	.L165
 1400              	.L166:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 75


1323:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         !(exceptset_in && FD_ISSET(i, exceptset_in))) {
 1401              		.loc 1 1323 0 is_stmt 0 discriminator 1
 1402 0136 002F     		cmp	r7, #0
 1403 0138 E6D0     		beq	.L167
1324:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       continue;
 1404              		.loc 1 1324 0 is_stmt 1
 1405 013a 6309     		lsrs	r3, r4, #5
 1406 013c 57F82320 		ldr	r2, [r7, r3, lsl #2]
 1407 0140 04F01F01 		and	r1, r4, #31
 1408 0144 0123     		movs	r3, #1
 1409 0146 8B40     		lsls	r3, r3, r1
 1410 0148 1A42     		tst	r2, r3
 1411 014a DDD0     		beq	.L167
 1412 014c 7EE7     		b	.L165
 1413              	.LVL222:
 1414              	.L168:
1357:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* continue on to next FD in list */
 1415              		.loc 1 1357 0
 1416 014e 0198     		ldr	r0, [sp, #4]
 1417              	.LVL223:
 1418 0150 FFF7FEFF 		bl	sys_arch_unprotect
 1419              	.LVL224:
 1420 0154 D8E7     		b	.L167
 1421              	.LVL225:
 1422              	.L174:
1362:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   *writeset_out = lwriteset;
 1423              		.loc 1 1362 0
 1424 0156 0AAB     		add	r3, sp, #40
 1425 0158 13E90300 		ldmdb	r3, {r0, r1}
 1426 015c 149B     		ldr	r3, [sp, #80]
 1427 015e 83E80300 		stm	r3, {r0, r1}
1363:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   *exceptset_out = lexceptset;
 1428              		.loc 1 1363 0
 1429 0162 06AB     		add	r3, sp, #24
 1430 0164 93E80300 		ldm	r3, {r0, r1}
 1431 0168 159B     		ldr	r3, [sp, #84]
 1432 016a 83E80300 		stm	r3, {r0, r1}
1364:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 1433              		.loc 1 1364 0
 1434 016e 04AB     		add	r3, sp, #16
 1435 0170 93E80300 		ldm	r3, {r0, r1}
 1436 0174 169B     		ldr	r3, [sp, #88]
 1437 0176 83E80300 		stm	r3, {r0, r1}
1366:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return nready;
 1438              		.loc 1 1366 0
 1439 017a 029B     		ldr	r3, [sp, #8]
 1440 017c 002B     		cmp	r3, #0
 1441 017e 03DB     		blt	.L175
 1442              	.L156:
1368:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 1443              		.loc 1 1368 0
 1444 0180 0298     		ldr	r0, [sp, #8]
 1445 0182 0BB0     		add	sp, sp, #44
 1446              	.LCFI8:
 1447              		.cfi_remember_state
 1448              		.cfi_def_cfa_offset 36
 1449              		@ sp needed
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 76


 1450 0184 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1451              	.LVL226:
 1452              	.L175:
 1453              	.LCFI9:
 1454              		.cfi_restore_state
1366:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return nready;
 1455              		.loc 1 1366 0 discriminator 1
 1456 0188 034B     		ldr	r3, .L176
 1457 018a 40F25652 		movw	r2, #1366
 1458 018e 0349     		ldr	r1, .L176+4
 1459 0190 0348     		ldr	r0, .L176+8
 1460 0192 FFF7FEFF 		bl	printf
 1461              	.LVL227:
1367:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 1462              		.loc 1 1367 0 discriminator 1
 1463 0196 F3E7     		b	.L156
 1464              	.L177:
 1465              		.align	2
 1466              	.L176:
 1467 0198 00000000 		.word	.LC0
 1468 019c 30000000 		.word	.LC1
 1469 01a0 3C000000 		.word	.LC2
 1470              		.cfi_endproc
 1471              	.LFE177:
 1473              		.section	.text.lwip_getaddrname,"ax",%progbits
 1474              		.align	1
 1475              		.syntax unified
 1476              		.thumb
 1477              		.thumb_func
 1478              		.fpu fpv5-sp-d16
 1480              	lwip_getaddrname:
 1481              	.LFB181:
1733:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 1482              		.loc 1 1733 0
 1483              		.cfi_startproc
 1484              		@ args = 0, pretend = 0, frame = 24
 1485              		@ frame_needed = 0, uses_anonymous_args = 0
 1486              	.LVL228:
 1487 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 1488              	.LCFI10:
 1489              		.cfi_def_cfa_offset 20
 1490              		.cfi_offset 4, -20
 1491              		.cfi_offset 5, -16
 1492              		.cfi_offset 6, -12
 1493              		.cfi_offset 7, -8
 1494              		.cfi_offset 14, -4
 1495 0002 87B0     		sub	sp, sp, #28
 1496              	.LCFI11:
 1497              		.cfi_def_cfa_offset 48
 1498 0004 0F46     		mov	r7, r1
 1499 0006 1546     		mov	r5, r2
 1500 0008 1E46     		mov	r6, r3
1740:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 1501              		.loc 1 1740 0
 1502 000a FFF7FEFF 		bl	get_socket
 1503              	.LVL229:
1741:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 77


 1504              		.loc 1 1741 0
 1505 000e 88B3     		cbz	r0, .L182
 1506 0010 0446     		mov	r4, r0
1746:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (err != ERR_OK) {
 1507              		.loc 1 1746 0
 1508 0012 3346     		mov	r3, r6
 1509 0014 0DF10202 		add	r2, sp, #2
 1510 0018 01A9     		add	r1, sp, #4
 1511 001a 0068     		ldr	r0, [r0]
 1512              	.LVL230:
 1513 001c FFF7FEFF 		bl	netconn_getaddr
 1514              	.LVL231:
1747:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(err));
 1515              		.loc 1 1747 0
 1516 0020 40B1     		cbz	r0, .L180
 1517              	.LBB7:
1748:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 1518              		.loc 1 1748 0
 1519 0022 FFF7FEFF 		bl	err_to_errno
 1520              	.LVL232:
 1521 0026 2074     		strb	r0, [r4, #16]
 1522 0028 38B3     		cbz	r0, .L183
1748:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 1523              		.loc 1 1748 0 is_stmt 0 discriminator 1
 1524 002a 154B     		ldr	r3, .L185
 1525 002c 1860     		str	r0, [r3]
 1526              	.LBE7:
1749:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 1527              		.loc 1 1749 0 is_stmt 1 discriminator 1
 1528 002e 4FF0FF30 		mov	r0, #-1
 1529              	.LVL233:
 1530 0032 1DE0     		b	.L178
 1531              	.LVL234:
 1532              	.L180:
1761:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 1533              		.loc 1 1761 0
 1534 0034 1023     		movs	r3, #16
 1535 0036 8DF80830 		strb	r3, [sp, #8]
 1536 003a 0223     		movs	r3, #2
 1537 003c 8DF80930 		strb	r3, [sp, #9]
 1538 0040 BDF80200 		ldrh	r0, [sp, #2]
 1539              	.LVL235:
 1540 0044 FFF7FEFF 		bl	lwip_htons
 1541              	.LVL236:
 1542 0048 ADF80A00 		strh	r0, [sp, #10]	@ movhi
 1543 004c 019B     		ldr	r3, [sp, #4]
 1544 004e 0393     		str	r3, [sp, #12]
 1545 0050 0023     		movs	r3, #0
 1546 0052 0493     		str	r3, [sp, #16]
 1547 0054 0593     		str	r3, [sp, #20]
1767:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     *namelen = saddr.sa.sa_len;
 1548              		.loc 1 1767 0
 1549 0056 2A68     		ldr	r2, [r5]
 1550 0058 9DF80830 		ldrb	r3, [sp, #8]	@ zero_extendqisi2
 1551 005c 9A42     		cmp	r2, r3
 1552 005e 00D9     		bls	.L181
1768:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 78


 1553              		.loc 1 1768 0
 1554 0060 2B60     		str	r3, [r5]
 1555              	.L181:
1770:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 1556              		.loc 1 1770 0
 1557 0062 2A68     		ldr	r2, [r5]
 1558 0064 02A9     		add	r1, sp, #8
 1559 0066 3846     		mov	r0, r7
 1560 0068 FFF7FEFF 		bl	memcpy
 1561              	.LVL237:
 1562              	.LBB8:
1772:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return 0;
 1563              		.loc 1 1772 0
 1564 006c 0020     		movs	r0, #0
 1565 006e 2074     		strb	r0, [r4, #16]
 1566              	.LVL238:
 1567              	.L178:
 1568              	.LBE8:
1774:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 1569              		.loc 1 1774 0
 1570 0070 07B0     		add	sp, sp, #28
 1571              	.LCFI12:
 1572              		.cfi_remember_state
 1573              		.cfi_def_cfa_offset 20
 1574              		@ sp needed
 1575 0072 F0BD     		pop	{r4, r5, r6, r7, pc}
 1576              	.LVL239:
 1577              	.L182:
 1578              	.LCFI13:
 1579              		.cfi_restore_state
1742:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 1580              		.loc 1 1742 0
 1581 0074 4FF0FF30 		mov	r0, #-1
 1582              	.LVL240:
 1583 0078 FAE7     		b	.L178
 1584              	.LVL241:
 1585              	.L183:
1749:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 1586              		.loc 1 1749 0
 1587 007a 4FF0FF30 		mov	r0, #-1
 1588              	.LVL242:
 1589 007e F7E7     		b	.L178
 1590              	.L186:
 1591              		.align	2
 1592              	.L185:
 1593 0080 00000000 		.word	errno
 1594              		.cfi_endproc
 1595              	.LFE181:
 1597              		.section	.text.event_callback,"ax",%progbits
 1598              		.align	1
 1599              		.syntax unified
 1600              		.thumb
 1601              		.thumb_func
 1602              		.fpu fpv5-sp-d16
 1604              	event_callback:
 1605              	.LFB179:
1572:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int s;
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 79


 1606              		.loc 1 1572 0
 1607              		.cfi_startproc
 1608              		@ args = 0, pretend = 0, frame = 0
 1609              		@ frame_needed = 0, uses_anonymous_args = 0
 1610              	.LVL243:
1582:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     s = conn->socket;
 1611              		.loc 1 1582 0
 1612 0000 0028     		cmp	r0, #0
 1613 0002 00F0A580 		beq	.L211
1572:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int s;
 1614              		.loc 1 1572 0
 1615 0006 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1616              	.LCFI14:
 1617              		.cfi_def_cfa_offset 24
 1618              		.cfi_offset 4, -24
 1619              		.cfi_offset 5, -20
 1620              		.cfi_offset 6, -16
 1621              		.cfi_offset 7, -12
 1622              		.cfi_offset 8, -8
 1623              		.cfi_offset 14, -4
 1624 000a 0546     		mov	r5, r0
 1625 000c 0C46     		mov	r4, r1
1583:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (s < 0) {
 1626              		.loc 1 1583 0
 1627 000e D0F81880 		ldr	r8, [r0, #24]
 1628              	.LVL244:
1584:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* Data comes in right away after an accept, even though
 1629              		.loc 1 1584 0
 1630 0012 B8F1000F 		cmp	r8, #0
 1631 0016 10DB     		blt	.L214
 1632              	.LVL245:
 1633              	.L189:
1602:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (!sock) {
 1634              		.loc 1 1602 0
 1635 0018 4046     		mov	r0, r8
 1636 001a FFF7FEFF 		bl	get_socket
 1637              	.LVL246:
1603:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return;
 1638              		.loc 1 1603 0
 1639 001e 0746     		mov	r7, r0
 1640 0020 0028     		cmp	r0, #0
 1641 0022 00F09380 		beq	.L187
1610:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Set event as required */
 1642              		.loc 1 1610 0
 1643 0026 FFF7FEFF 		bl	sys_arch_protect
 1644              	.LVL247:
 1645 002a 0546     		mov	r5, r0
 1646              	.LVL248:
1612:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case NETCONN_EVT_RCVPLUS:
 1647              		.loc 1 1612 0
 1648 002c 042C     		cmp	r4, #4
 1649 002e 2DD8     		bhi	.L192
 1650 0030 DFE804F0 		tbb	[pc, r4]
 1651              	.L194:
 1652 0034 15       		.byte	(.L193-.L194)/2
 1653 0035 1E       		.byte	(.L195-.L194)/2
 1654 0036 23       		.byte	(.L196-.L194)/2
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 80


 1655 0037 26       		.byte	(.L197-.L194)/2
 1656 0038 29       		.byte	(.L198-.L194)/2
 1657              	.LVL249:
 1658 0039 00       		.p2align 1
 1659              	.L214:
1590:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (conn->socket < 0) {
 1660              		.loc 1 1590 0
 1661 003a FFF7FEFF 		bl	sys_arch_protect
 1662              	.LVL250:
1591:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (evt == NETCONN_EVT_RCVPLUS) {
 1663              		.loc 1 1591 0
 1664 003e D5F81880 		ldr	r8, [r5, #24]
 1665              	.LVL251:
 1666 0042 B8F1000F 		cmp	r8, #0
 1667 0046 02DB     		blt	.L215
 1668              	.LVL252:
1599:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 1669              		.loc 1 1599 0
 1670 0048 FFF7FEFF 		bl	sys_arch_unprotect
 1671              	.LVL253:
 1672 004c E4E7     		b	.L189
 1673              	.LVL254:
 1674              	.L215:
1592:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           conn->socket--;
 1675              		.loc 1 1592 0
 1676 004e 14B9     		cbnz	r4, .L191
1593:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 1677              		.loc 1 1593 0
 1678 0050 08F1FF33 		add	r3, r8, #-1
 1679 0054 AB61     		str	r3, [r5, #24]
 1680              	.L191:
1595:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return;
 1681              		.loc 1 1595 0
 1682 0056 FFF7FEFF 		bl	sys_arch_unprotect
 1683              	.LVL255:
1596:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 1684              		.loc 1 1596 0
 1685 005a BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1686              	.LVL256:
 1687              	.L193:
1614:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 1688              		.loc 1 1614 0
 1689 005e B7F90A30 		ldrsh	r3, [r7, #10]
 1690 0062 0133     		adds	r3, r3, #1
 1691 0064 7B81     		strh	r3, [r7, #10]	@ movhi
 1692              	.LVL257:
 1693              	.L199:
1633:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* noone is waiting for this socket, no need to check select_cb_list */
 1694              		.loc 1 1633 0
 1695 0066 7B7C     		ldrb	r3, [r7, #17]	@ zero_extendqisi2
 1696 0068 C3B1     		cbz	r3, .L216
 1697              	.L200:
1646:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* remember the state of select_cb_list to detect changes */
 1698              		.loc 1 1646 0
 1699 006a 3A4B     		ldr	r3, .L219
 1700 006c 1C68     		ldr	r4, [r3]
 1701              	.LVL258:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 81


 1702 006e 27E0     		b	.L201
 1703              	.LVL259:
 1704              	.L195:
1617:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 1705              		.loc 1 1617 0
 1706 0070 B7F90A30 		ldrsh	r3, [r7, #10]
 1707 0074 013B     		subs	r3, r3, #1
 1708 0076 7B81     		strh	r3, [r7, #10]	@ movhi
1618:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case NETCONN_EVT_SENDPLUS:
 1709              		.loc 1 1618 0
 1710 0078 F5E7     		b	.L199
 1711              	.L196:
1620:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 1712              		.loc 1 1620 0
 1713 007a 0123     		movs	r3, #1
 1714 007c BB81     		strh	r3, [r7, #12]	@ movhi
1621:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case NETCONN_EVT_SENDMINUS:
 1715              		.loc 1 1621 0
 1716 007e F2E7     		b	.L199
 1717              	.L197:
1623:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 1718              		.loc 1 1623 0
 1719 0080 0023     		movs	r3, #0
 1720 0082 BB81     		strh	r3, [r7, #12]	@ movhi
1624:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case NETCONN_EVT_ERROR:
 1721              		.loc 1 1624 0
 1722 0084 EFE7     		b	.L199
 1723              	.L198:
1626:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 1724              		.loc 1 1626 0
 1725 0086 0123     		movs	r3, #1
 1726 0088 FB81     		strh	r3, [r7, #14]	@ movhi
1627:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
 1727              		.loc 1 1627 0
 1728 008a ECE7     		b	.L199
 1729              	.L192:
1629:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 1730              		.loc 1 1629 0 discriminator 1
 1731 008c 324B     		ldr	r3, .L219+4
 1732 008e 40F25D62 		movw	r2, #1629
 1733 0092 3249     		ldr	r1, .L219+8
 1734 0094 3248     		ldr	r0, .L219+12
 1735              	.LVL260:
 1736 0096 FFF7FEFF 		bl	printf
 1737              	.LVL261:
1630:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 1738              		.loc 1 1630 0 discriminator 1
 1739 009a E4E7     		b	.L199
 1740              	.L216:
1635:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return;
 1741              		.loc 1 1635 0
 1742 009c 2846     		mov	r0, r5
 1743 009e FFF7FEFF 		bl	sys_arch_unprotect
 1744              	.LVL262:
1636:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 1745              		.loc 1 1636 0
 1746 00a2 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 82


 1747              	.LVL263:
 1748              	.L205:
 1749              	.LBB9:
1668:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         scb->sem_signalled = 1;
 1750              		.loc 1 1668 0
 1751 00a6 002B     		cmp	r3, #0
 1752 00a8 46D1     		bne	.L217
 1753              	.LVL264:
 1754              	.L202:
 1755              	.LBE9:
1676:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* this makes sure interrupt protection time is short */
 1756              		.loc 1 1676 0
 1757 00aa 2846     		mov	r0, r5
 1758 00ac FFF7FEFF 		bl	sys_arch_unprotect
 1759              	.LVL265:
1678:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (last_select_cb_ctr != select_cb_ctr) {
 1760              		.loc 1 1678 0
 1761 00b0 FFF7FEFF 		bl	sys_arch_protect
 1762              	.LVL266:
 1763 00b4 0546     		mov	r5, r0
 1764              	.LVL267:
1679:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* someone has changed select_cb_list, restart at the beginning */
 1765              		.loc 1 1679 0
 1766 00b6 2B4B     		ldr	r3, .L219+16
 1767 00b8 1B68     		ldr	r3, [r3]
 1768 00ba 9E42     		cmp	r6, r3
 1769 00bc D5D1     		bne	.L200
1646:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* remember the state of select_cb_list to detect changes */
 1770              		.loc 1 1646 0 discriminator 2
 1771 00be 2468     		ldr	r4, [r4]
 1772              	.LVL268:
 1773              	.L201:
1646:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* remember the state of select_cb_list to detect changes */
 1774              		.loc 1 1646 0 is_stmt 0 discriminator 1
 1775 00c0 002C     		cmp	r4, #0
 1776 00c2 40D0     		beq	.L218
1648:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (scb->sem_signalled == 0) {
 1777              		.loc 1 1648 0 is_stmt 1
 1778 00c4 274B     		ldr	r3, .L219+16
 1779 00c6 1E68     		ldr	r6, [r3]
 1780              	.LVL269:
1649:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* semaphore not signalled yet */
 1781              		.loc 1 1649 0
 1782 00c8 6369     		ldr	r3, [r4, #20]
 1783 00ca 002B     		cmp	r3, #0
 1784 00cc EDD1     		bne	.L202
 1785              	.LVL270:
 1786              	.LBB10:
1653:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (scb->readset && FD_ISSET(s, scb->readset)) {
 1787              		.loc 1 1653 0
 1788 00ce B7F90A20 		ldrsh	r2, [r7, #10]
 1789 00d2 002A     		cmp	r2, #0
 1790 00d4 0CDD     		ble	.L203
1654:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           do_signal = 1;
 1791              		.loc 1 1654 0
 1792 00d6 A268     		ldr	r2, [r4, #8]
 1793 00d8 52B1     		cbz	r2, .L203
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 83


1654:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           do_signal = 1;
 1794              		.loc 1 1654 0 is_stmt 0 discriminator 1
 1795 00da 4FEA5811 		lsr	r1, r8, #5
 1796 00de 52F82110 		ldr	r1, [r2, r1, lsl #2]
 1797 00e2 08F01F00 		and	r0, r8, #31
 1798 00e6 0122     		movs	r2, #1
 1799 00e8 8240     		lsls	r2, r2, r0
 1800 00ea 1142     		tst	r1, r2
 1801 00ec 00D0     		beq	.L203
1655:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 1802              		.loc 1 1655 0 is_stmt 1
 1803 00ee 0123     		movs	r3, #1
 1804              	.L203:
 1805              	.LVL271:
1658:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (!do_signal && scb->writeset && FD_ISSET(s, scb->writeset)) {
 1806              		.loc 1 1658 0
 1807 00f0 BA89     		ldrh	r2, [r7, #12]
 1808 00f2 6AB1     		cbz	r2, .L204
1659:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           do_signal = 1;
 1809              		.loc 1 1659 0
 1810 00f4 63B9     		cbnz	r3, .L204
1659:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           do_signal = 1;
 1811              		.loc 1 1659 0 is_stmt 0 discriminator 1
 1812 00f6 E268     		ldr	r2, [r4, #12]
 1813 00f8 52B1     		cbz	r2, .L204
1659:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           do_signal = 1;
 1814              		.loc 1 1659 0 discriminator 2
 1815 00fa 4FEA5811 		lsr	r1, r8, #5
 1816 00fe 52F82110 		ldr	r1, [r2, r1, lsl #2]
 1817 0102 08F01F00 		and	r0, r8, #31
 1818 0106 0122     		movs	r2, #1
 1819 0108 8240     		lsls	r2, r2, r0
 1820 010a 1142     		tst	r1, r2
 1821 010c 00D0     		beq	.L204
1660:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 1822              		.loc 1 1660 0 is_stmt 1
 1823 010e 0123     		movs	r3, #1
 1824              	.LVL272:
 1825              	.L204:
1663:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (!do_signal && scb->exceptset && FD_ISSET(s, scb->exceptset)) {
 1826              		.loc 1 1663 0
 1827 0110 FA89     		ldrh	r2, [r7, #14]
 1828 0112 002A     		cmp	r2, #0
 1829 0114 C7D0     		beq	.L205
1664:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           do_signal = 1;
 1830              		.loc 1 1664 0
 1831 0116 002B     		cmp	r3, #0
 1832 0118 C5D1     		bne	.L205
1664:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           do_signal = 1;
 1833              		.loc 1 1664 0 is_stmt 0 discriminator 1
 1834 011a 2269     		ldr	r2, [r4, #16]
 1835 011c 002A     		cmp	r2, #0
 1836 011e C2D0     		beq	.L205
1664:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           do_signal = 1;
 1837              		.loc 1 1664 0 discriminator 2
 1838 0120 4FEA5811 		lsr	r1, r8, #5
 1839 0124 52F82110 		ldr	r1, [r2, r1, lsl #2]
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 84


 1840 0128 08F01F00 		and	r0, r8, #31
 1841 012c 0122     		movs	r2, #1
 1842 012e 8240     		lsls	r2, r2, r0
 1843 0130 1142     		tst	r1, r2
 1844 0132 B8D0     		beq	.L205
1665:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 1845              		.loc 1 1665 0 is_stmt 1
 1846 0134 0123     		movs	r3, #1
 1847              	.LVL273:
 1848 0136 B6E7     		b	.L205
 1849              	.LVL274:
 1850              	.L217:
1669:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* Don't call SYS_ARCH_UNPROTECT() before signaling the semaphore, as this might
 1851              		.loc 1 1669 0
 1852 0138 0123     		movs	r3, #1
 1853              	.LVL275:
 1854 013a 6361     		str	r3, [r4, #20]
1672:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 1855              		.loc 1 1672 0
 1856 013c 04F11800 		add	r0, r4, #24
 1857 0140 FFF7FEFF 		bl	sys_sem_signal
 1858              	.LVL276:
 1859 0144 B1E7     		b	.L202
 1860              	.LVL277:
 1861              	.L218:
 1862              	.LBE10:
1684:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 1863              		.loc 1 1684 0
 1864 0146 2846     		mov	r0, r5
 1865 0148 FFF7FEFF 		bl	sys_arch_unprotect
 1866              	.LVL278:
 1867              	.L187:
 1868 014c BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1869              	.LVL279:
 1870              	.L211:
 1871              	.LCFI15:
 1872              		.cfi_def_cfa_offset 0
 1873              		.cfi_restore 4
 1874              		.cfi_restore 5
 1875              		.cfi_restore 6
 1876              		.cfi_restore 7
 1877              		.cfi_restore 8
 1878              		.cfi_restore 14
 1879 0150 7047     		bx	lr
 1880              	.L220:
 1881 0152 00BF     		.align	2
 1882              	.L219:
 1883 0154 00000000 		.word	.LANCHOR1
 1884 0158 00000000 		.word	.LC0
 1885 015c 00000000 		.word	.LC3
 1886 0160 3C000000 		.word	.LC2
 1887 0164 00000000 		.word	.LANCHOR2
 1888              		.cfi_endproc
 1889              	.LFE179:
 1891              		.section	.text.free_socket,"ax",%progbits
 1892              		.align	1
 1893              		.syntax unified
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 85


 1894              		.thumb
 1895              		.thumb_func
 1896              		.fpu fpv5-sp-d16
 1898              	free_socket:
 1899              	.LFB162:
 438:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   void *lastdata;
 1900              		.loc 1 438 0
 1901              		.cfi_startproc
 1902              		@ args = 0, pretend = 0, frame = 0
 1903              		@ frame_needed = 0, uses_anonymous_args = 0
 1904              	.LVL280:
 1905 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1906              	.LCFI16:
 1907              		.cfi_def_cfa_offset 24
 1908              		.cfi_offset 3, -24
 1909              		.cfi_offset 4, -20
 1910              		.cfi_offset 5, -16
 1911              		.cfi_offset 6, -12
 1912              		.cfi_offset 7, -8
 1913              		.cfi_offset 14, -4
 1914 0002 0446     		mov	r4, r0
 1915 0004 0F46     		mov	r7, r1
 441:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock->lastdata   = NULL;
 1916              		.loc 1 441 0
 1917 0006 4668     		ldr	r6, [r0, #4]
 1918              	.LVL281:
 442:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock->lastoffset = 0;
 1919              		.loc 1 442 0
 1920 0008 0025     		movs	r5, #0
 1921 000a 4560     		str	r5, [r0, #4]
 443:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock->err        = 0;
 1922              		.loc 1 443 0
 1923 000c 0581     		strh	r5, [r0, #8]	@ movhi
 444:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 1924              		.loc 1 444 0
 1925 000e 0574     		strb	r5, [r0, #16]
 1926              	.LBB11:
 447:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* don't use 'sock' after this line, as another task might have allocated it */
 1927              		.loc 1 447 0
 1928 0010 FFF7FEFF 		bl	sys_arch_protect
 1929              	.LVL282:
 1930 0014 2560     		str	r5, [r4]
 1931 0016 FFF7FEFF 		bl	sys_arch_unprotect
 1932              	.LVL283:
 1933              	.LBE11:
 450:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (is_tcp) {
 1934              		.loc 1 450 0
 1935 001a 1EB1     		cbz	r6, .L221
 451:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       pbuf_free((struct pbuf *)lastdata);
 1936              		.loc 1 451 0
 1937 001c 1FB9     		cbnz	r7, .L225
 454:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 1938              		.loc 1 454 0
 1939 001e 3046     		mov	r0, r6
 1940 0020 FFF7FEFF 		bl	netbuf_delete
 1941              	.LVL284:
 1942              	.L221:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 86


 1943 0024 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1944              	.LVL285:
 1945              	.L225:
 452:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
 1946              		.loc 1 452 0
 1947 0026 3046     		mov	r0, r6
 1948 0028 FFF7FEFF 		bl	pbuf_free
 1949              	.LVL286:
 1950 002c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1951              		.cfi_endproc
 1952              	.LFE162:
 1954              		.section	.text.lwip_socket_thread_init,"ax",%progbits
 1955              		.align	1
 1956              		.global	lwip_socket_thread_init
 1957              		.syntax unified
 1958              		.thumb
 1959              		.thumb_func
 1960              		.fpu fpv5-sp-d16
 1962              	lwip_socket_thread_init:
 1963              	.LFB157:
 332:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    netconn_thread_init();
 1964              		.loc 1 332 0
 1965              		.cfi_startproc
 1966              		@ args = 0, pretend = 0, frame = 0
 1967              		@ frame_needed = 0, uses_anonymous_args = 0
 1968              		@ link register save eliminated.
 1969 0000 7047     		bx	lr
 1970              		.cfi_endproc
 1971              	.LFE157:
 1973              		.section	.text.lwip_socket_thread_cleanup,"ax",%progbits
 1974              		.align	1
 1975              		.global	lwip_socket_thread_cleanup
 1976              		.syntax unified
 1977              		.thumb
 1978              		.thumb_func
 1979              		.fpu fpv5-sp-d16
 1981              	lwip_socket_thread_cleanup:
 1982              	.LFB158:
 339:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    netconn_thread_cleanup();
 1983              		.loc 1 339 0
 1984              		.cfi_startproc
 1985              		@ args = 0, pretend = 0, frame = 0
 1986              		@ frame_needed = 0, uses_anonymous_args = 0
 1987              		@ link register save eliminated.
 1988 0000 7047     		bx	lr
 1989              		.cfi_endproc
 1990              	.LFE158:
 1992              		.section	.text.lwip_accept,"ax",%progbits
 1993              		.align	1
 1994              		.global	lwip_accept
 1995              		.syntax unified
 1996              		.thumb
 1997              		.thumb_func
 1998              		.fpu fpv5-sp-d16
 2000              	lwip_accept:
 2001              	.LFB163:
 467:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock, *nsock;
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 87


 2002              		.loc 1 467 0
 2003              		.cfi_startproc
 2004              		@ args = 0, pretend = 0, frame = 32
 2005              		@ frame_needed = 0, uses_anonymous_args = 0
 2006              	.LVL287:
 467:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock, *nsock;
 2007              		.loc 1 467 0
 2008 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 2009              	.LCFI17:
 2010              		.cfi_def_cfa_offset 28
 2011              		.cfi_offset 4, -28
 2012              		.cfi_offset 5, -24
 2013              		.cfi_offset 6, -20
 2014              		.cfi_offset 7, -16
 2015              		.cfi_offset 8, -12
 2016              		.cfi_offset 9, -8
 2017              		.cfi_offset 14, -4
 2018 0004 89B0     		sub	sp, sp, #36
 2019              	.LCFI18:
 2020              		.cfi_def_cfa_offset 64
 2021 0006 0F46     		mov	r7, r1
 2022 0008 1646     		mov	r6, r2
 471:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int newsock;
 2023              		.loc 1 471 0
 2024 000a 0023     		movs	r3, #0
 2025 000c ADF81630 		strh	r3, [sp, #22]	@ movhi
 477:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 2026              		.loc 1 477 0
 2027 0010 FFF7FEFF 		bl	get_socket
 2028              	.LVL288:
 478:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2029              		.loc 1 478 0
 2030 0014 0028     		cmp	r0, #0
 2031 0016 00F0C280 		beq	.L243
 2032 001a 0546     		mov	r5, r0
 482:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_accept(%d): returning EWOULDBLOCK\n", s));
 2033              		.loc 1 482 0
 2034 001c 0068     		ldr	r0, [r0]
 2035              	.LVL289:
 2036 001e 037F     		ldrb	r3, [r0, #28]	@ zero_extendqisi2
 2037 0020 13F0020F 		tst	r3, #2
 2038 0024 03D0     		beq	.L230
 482:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_accept(%d): returning EWOULDBLOCK\n", s));
 2039              		.loc 1 482 0 is_stmt 0 discriminator 1
 2040 0026 B5F90A30 		ldrsh	r3, [r5, #10]
 2041 002a 002B     		cmp	r3, #0
 2042 002c 17DD     		ble	.L246
 2043              	.L230:
 489:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (err != ERR_OK) {
 2044              		.loc 1 489 0 is_stmt 1
 2045 002e 07A9     		add	r1, sp, #28
 2046 0030 FFF7FEFF 		bl	netconn_accept
 2047              	.LVL290:
 490:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_accept(%d): netconn_acept failed, err=%d\n", s, err));
 2048              		.loc 1 490 0
 2049 0034 38B3     		cbz	r0, .L231
 492:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, EOPNOTSUPP);
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 88


 2050              		.loc 1 492 0
 2051 0036 2B68     		ldr	r3, [r5]
 2052 0038 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2053 003a 03F0F003 		and	r3, r3, #240
 2054 003e 102B     		cmp	r3, #16
 2055 0040 13D1     		bne	.L247
 494:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, EINVAL);
 2056              		.loc 1 494 0
 2057 0042 10F10F0F 		cmn	r0, #15
 2058 0046 17D0     		beq	.L248
 2059              	.LBB12:
 497:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 2060              		.loc 1 497 0
 2061 0048 FFF7FEFF 		bl	err_to_errno
 2062              	.LVL291:
 2063 004c 2874     		strb	r0, [r5, #16]
 2064 004e 0028     		cmp	r0, #0
 2065 0050 00F0A880 		beq	.L244
 497:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 2066              		.loc 1 497 0 is_stmt 0 discriminator 1
 2067 0054 554B     		ldr	r3, .L254
 2068 0056 1860     		str	r0, [r3]
 2069              	.LBE12:
 499:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2070              		.loc 1 499 0 is_stmt 1 discriminator 1
 2071 0058 4FF0FF34 		mov	r4, #-1
 2072 005c 6AE0     		b	.L228
 2073              	.LVL292:
 2074              	.L246:
 484:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2075              		.loc 1 484 0 discriminator 1
 2076 005e 0B22     		movs	r2, #11
 2077 0060 524B     		ldr	r3, .L254
 2078 0062 1A60     		str	r2, [r3]
 485:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2079              		.loc 1 485 0 discriminator 1
 2080 0064 4FF0FF34 		mov	r4, #-1
 2081 0068 64E0     		b	.L228
 2082              	.LVL293:
 2083              	.L247:
 2084              	.LBB13:
 493:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else if (err == ERR_CLSD) {
 2085              		.loc 1 493 0
 2086 006a 5F23     		movs	r3, #95
 2087 006c 2B74     		strb	r3, [r5, #16]
 2088 006e 4F4A     		ldr	r2, .L254
 2089 0070 1360     		str	r3, [r2]
 2090              	.LBE13:
 499:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2091              		.loc 1 499 0
 2092 0072 4FF0FF34 		mov	r4, #-1
 2093 0076 5DE0     		b	.L228
 2094              	.LVL294:
 2095              	.L248:
 2096              	.LBB14:
 495:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
 2097              		.loc 1 495 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 89


 2098 0078 1623     		movs	r3, #22
 2099 007a 2B74     		strb	r3, [r5, #16]
 2100 007c 4B4A     		ldr	r2, .L254
 2101 007e 1360     		str	r3, [r2]
 2102              	.LBE14:
 499:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2103              		.loc 1 499 0
 2104 0080 4FF0FF34 		mov	r4, #-1
 2105 0084 56E0     		b	.L228
 2106              	.LVL295:
 2107              	.L231:
 501:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2108              		.loc 1 501 0
 2109 0086 079B     		ldr	r3, [sp, #28]
 2110 0088 002B     		cmp	r3, #0
 2111 008a 57D0     		beq	.L249
 2112              	.LVL296:
 2113              	.L234:
 503:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (newsock == -1) {
 2114              		.loc 1 503 0
 2115 008c 0121     		movs	r1, #1
 2116 008e 0798     		ldr	r0, [sp, #28]
 2117 0090 FFF7FEFF 		bl	alloc_socket
 2118              	.LVL297:
 2119 0094 0446     		mov	r4, r0
 2120              	.LVL298:
 504:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     netconn_delete(newconn);
 2121              		.loc 1 504 0
 2122 0096 B0F1FF3F 		cmp	r0, #-1
 2123 009a 57D0     		beq	.L250
 509:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ASSERT("newconn->callback == event_callback", newconn->callback == event_callback);
 2124              		.loc 1 509 0
 2125 009c 0328     		cmp	r0, #3
 2126 009e 5DD8     		bhi	.L251
 2127              	.LVL299:
 2128              	.L236:
 510:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   nsock = &sockets[newsock - LWIP_SOCKET_OFFSET];
 2129              		.loc 1 510 0
 2130 00a0 079B     		ldr	r3, [sp, #28]
 2131 00a2 9A6A     		ldr	r2, [r3, #40]
 2132 00a4 424B     		ldr	r3, .L254+4
 2133 00a6 9A42     		cmp	r2, r3
 2134 00a8 06D0     		beq	.L237
 510:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   nsock = &sockets[newsock - LWIP_SOCKET_OFFSET];
 2135              		.loc 1 510 0 is_stmt 0 discriminator 1
 2136 00aa 424B     		ldr	r3, .L254+8
 2137 00ac 4FF4FF72 		mov	r2, #510
 2138 00b0 4149     		ldr	r1, .L254+12
 2139 00b2 4248     		ldr	r0, .L254+16
 2140 00b4 FFF7FEFF 		bl	printf
 2141              	.LVL300:
 2142              	.L237:
 511:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2143              		.loc 1 511 0 is_stmt 1
 2144 00b8 A300     		lsls	r3, r4, #2
 2145 00ba 2344     		add	r3, r3, r4
 2146 00bc 9A00     		lsls	r2, r3, #2
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 90


 2147 00be 404B     		ldr	r3, .L254+20
 2148 00c0 03EB0208 		add	r8, r3, r2
 2149              	.LVL301:
 518:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   nsock->rcvevent += (s16_t)(-1 - newconn->socket);
 2150              		.loc 1 518 0
 2151 00c4 FFF7FEFF 		bl	sys_arch_protect
 2152              	.LVL302:
 519:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   newconn->socket = newsock;
 2153              		.loc 1 519 0
 2154 00c8 079A     		ldr	r2, [sp, #28]
 2155 00ca 118B     		ldrh	r1, [r2, #24]
 2156 00cc B8F80A30 		ldrh	r3, [r8, #10]
 2157 00d0 5B1A     		subs	r3, r3, r1
 2158 00d2 013B     		subs	r3, r3, #1
 2159 00d4 A8F80A30 		strh	r3, [r8, #10]	@ movhi
 520:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_UNPROTECT(lev);
 2160              		.loc 1 520 0
 2161 00d8 9461     		str	r4, [r2, #24]
 521:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2162              		.loc 1 521 0
 2163 00da FFF7FEFF 		bl	sys_arch_unprotect
 2164              	.LVL303:
 526:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     union sockaddr_aligned tempaddr;
 2165              		.loc 1 526 0
 2166 00de 3FB3     		cbz	r7, .L238
 2167              	.LBB15:
 529:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (err != ERR_OK) {
 2168              		.loc 1 529 0
 2169 00e0 0023     		movs	r3, #0
 2170 00e2 0DF11602 		add	r2, sp, #22
 2171 00e6 06A9     		add	r1, sp, #24
 2172 00e8 0798     		ldr	r0, [sp, #28]
 2173 00ea FFF7FEFF 		bl	netconn_getaddr
 2174              	.LVL304:
 530:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_accept(%d): netconn_peer failed, err=%d\n", s, err));
 2175              		.loc 1 530 0
 2176 00ee 8146     		mov	r9, r0
 2177 00f0 0028     		cmp	r0, #0
 2178 00f2 3BD1     		bne	.L252
 537:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2179              		.loc 1 537 0
 2180 00f4 002E     		cmp	r6, #0
 2181 00f6 4AD0     		beq	.L253
 2182              	.LVL305:
 2183              	.L241:
 539:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (*addrlen > tempaddr.sa.sa_len) {
 2184              		.loc 1 539 0
 2185 00f8 1023     		movs	r3, #16
 2186 00fa 8DF80430 		strb	r3, [sp, #4]
 2187 00fe 0223     		movs	r3, #2
 2188 0100 8DF80530 		strb	r3, [sp, #5]
 2189 0104 BDF81600 		ldrh	r0, [sp, #22]
 2190 0108 FFF7FEFF 		bl	lwip_htons
 2191              	.LVL306:
 2192 010c ADF80600 		strh	r0, [sp, #6]	@ movhi
 2193 0110 069B     		ldr	r3, [sp, #24]
 2194 0112 0293     		str	r3, [sp, #8]
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 91


 2195 0114 0023     		movs	r3, #0
 2196 0116 0393     		str	r3, [sp, #12]
 2197 0118 0493     		str	r3, [sp, #16]
 540:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *addrlen = tempaddr.sa.sa_len;
 2198              		.loc 1 540 0
 2199 011a 3268     		ldr	r2, [r6]
 2200 011c 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
 2201 0120 9A42     		cmp	r2, r3
 2202 0122 00D9     		bls	.L242
 541:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 2203              		.loc 1 541 0
 2204 0124 3360     		str	r3, [r6]
 2205              	.L242:
 543:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2206              		.loc 1 543 0
 2207 0126 3268     		ldr	r2, [r6]
 2208 0128 01A9     		add	r1, sp, #4
 2209 012a 3846     		mov	r0, r7
 2210 012c FFF7FEFF 		bl	memcpy
 2211              	.LVL307:
 2212              	.L238:
 2213              	.LBE15:
 2214              	.LBB17:
 552:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return newsock;
 2215              		.loc 1 552 0
 2216 0130 0023     		movs	r3, #0
 2217 0132 2B74     		strb	r3, [r5, #16]
 2218              	.LVL308:
 2219              	.L228:
 2220              	.LBE17:
 554:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2221              		.loc 1 554 0
 2222 0134 2046     		mov	r0, r4
 2223 0136 09B0     		add	sp, sp, #36
 2224              	.LCFI19:
 2225              		.cfi_remember_state
 2226              		.cfi_def_cfa_offset 28
 2227              		@ sp needed
 2228 0138 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 2229              	.LVL309:
 2230              	.L249:
 2231              	.LCFI20:
 2232              		.cfi_restore_state
 501:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2233              		.loc 1 501 0 discriminator 1
 2234 013c 1D4B     		ldr	r3, .L254+8
 2235 013e 40F2F512 		movw	r2, #501
 2236 0142 2049     		ldr	r1, .L254+24
 2237 0144 1D48     		ldr	r0, .L254+16
 2238              	.LVL310:
 2239 0146 FFF7FEFF 		bl	printf
 2240              	.LVL311:
 2241 014a 9FE7     		b	.L234
 2242              	.LVL312:
 2243              	.L250:
 505:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, ENFILE);
 2244              		.loc 1 505 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 92


 2245 014c 0798     		ldr	r0, [sp, #28]
 2246              	.LVL313:
 2247 014e FFF7FEFF 		bl	netconn_delete
 2248              	.LVL314:
 2249              	.LBB18:
 506:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2250              		.loc 1 506 0
 2251 0152 1723     		movs	r3, #23
 2252 0154 2B74     		strb	r3, [r5, #16]
 2253 0156 154A     		ldr	r2, .L254
 2254 0158 1360     		str	r3, [r2]
 2255              	.LBE18:
 507:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2256              		.loc 1 507 0
 2257 015a EBE7     		b	.L228
 2258              	.LVL315:
 2259              	.L251:
 509:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ASSERT("newconn->callback == event_callback", newconn->callback == event_callback);
 2260              		.loc 1 509 0 discriminator 1
 2261 015c 154B     		ldr	r3, .L254+8
 2262 015e 40F2FD12 		movw	r2, #509
 2263 0162 1949     		ldr	r1, .L254+28
 2264 0164 1548     		ldr	r0, .L254+16
 2265              	.LVL316:
 2266 0166 FFF7FEFF 		bl	printf
 2267              	.LVL317:
 2268 016a 99E7     		b	.L236
 2269              	.LVL318:
 2270              	.L252:
 2271              	.LBB19:
 532:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       free_socket(nsock, 1);
 2272              		.loc 1 532 0
 2273 016c 0798     		ldr	r0, [sp, #28]
 2274              	.LVL319:
 2275 016e FFF7FEFF 		bl	netconn_delete
 2276              	.LVL320:
 533:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, err_to_errno(err));
 2277              		.loc 1 533 0
 2278 0172 0121     		movs	r1, #1
 2279 0174 4046     		mov	r0, r8
 2280 0176 FFF7FEFF 		bl	free_socket
 2281              	.LVL321:
 2282              	.LBB16:
 534:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
 2283              		.loc 1 534 0
 2284 017a 4846     		mov	r0, r9
 2285 017c FFF7FEFF 		bl	err_to_errno
 2286              	.LVL322:
 2287 0180 2874     		strb	r0, [r5, #16]
 2288 0182 08B1     		cbz	r0, .L240
 534:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
 2289              		.loc 1 534 0 is_stmt 0 discriminator 1
 2290 0184 094B     		ldr	r3, .L254
 2291 0186 1860     		str	r0, [r3]
 2292              	.L240:
 2293              	.LBE16:
 535:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 93


 2294              		.loc 1 535 0 is_stmt 1
 2295 0188 4FF0FF34 		mov	r4, #-1
 2296              	.LVL323:
 2297 018c D2E7     		b	.L228
 2298              	.LVL324:
 2299              	.L253:
 537:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2300              		.loc 1 537 0 discriminator 1
 2301 018e 094B     		ldr	r3, .L254+8
 2302 0190 40F21922 		movw	r2, #537
 2303 0194 0D49     		ldr	r1, .L254+32
 2304 0196 0948     		ldr	r0, .L254+16
 2305              	.LVL325:
 2306 0198 FFF7FEFF 		bl	printf
 2307              	.LVL326:
 2308 019c ACE7     		b	.L241
 2309              	.LVL327:
 2310              	.L243:
 2311              	.LBE19:
 479:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2312              		.loc 1 479 0
 2313 019e 4FF0FF34 		mov	r4, #-1
 2314 01a2 C7E7     		b	.L228
 2315              	.LVL328:
 2316              	.L244:
 499:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2317              		.loc 1 499 0
 2318 01a4 4FF0FF34 		mov	r4, #-1
 2319 01a8 C4E7     		b	.L228
 2320              	.L255:
 2321 01aa 00BF     		.align	2
 2322              	.L254:
 2323 01ac 00000000 		.word	errno
 2324 01b0 00000000 		.word	event_callback
 2325 01b4 00000000 		.word	.LC0
 2326 01b8 28000000 		.word	.LC6
 2327 01bc 3C000000 		.word	.LC2
 2328 01c0 00000000 		.word	.LANCHOR0
 2329 01c4 00000000 		.word	.LC4
 2330 01c8 10000000 		.word	.LC5
 2331 01cc 4C000000 		.word	.LC7
 2332              		.cfi_endproc
 2333              	.LFE163:
 2335              		.section	.text.lwip_bind,"ax",%progbits
 2336              		.align	1
 2337              		.global	lwip_bind
 2338              		.syntax unified
 2339              		.thumb
 2340              		.thumb_func
 2341              		.fpu fpv5-sp-d16
 2343              	lwip_bind:
 2344              	.LFB164:
 558:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 2345              		.loc 1 558 0
 2346              		.cfi_startproc
 2347              		@ args = 0, pretend = 0, frame = 8
 2348              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 94


 2349              	.LVL329:
 2350 0000 70B5     		push	{r4, r5, r6, lr}
 2351              	.LCFI21:
 2352              		.cfi_def_cfa_offset 16
 2353              		.cfi_offset 4, -16
 2354              		.cfi_offset 5, -12
 2355              		.cfi_offset 6, -8
 2356              		.cfi_offset 14, -4
 2357 0002 82B0     		sub	sp, sp, #8
 2358              	.LCFI22:
 2359              		.cfi_def_cfa_offset 24
 2360 0004 0E46     		mov	r6, r1
 2361 0006 1546     		mov	r5, r2
 564:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 2362              		.loc 1 564 0
 2363 0008 FFF7FEFF 		bl	get_socket
 2364              	.LVL330:
 565:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2365              		.loc 1 565 0
 2366 000c 0028     		cmp	r0, #0
 2367 000e 34D0     		beq	.L261
 2368 0010 0446     		mov	r4, r0
 576:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              IS_SOCK_ADDR_TYPE_VALID(name) && IS_SOCK_ADDR_ALIGNED(name)),
 2369              		.loc 1 576 0
 2370 0012 102D     		cmp	r5, #16
 2371 0014 12D0     		beq	.L265
 2372              	.L258:
 576:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              IS_SOCK_ADDR_TYPE_VALID(name) && IS_SOCK_ADDR_ALIGNED(name)),
 2373              		.loc 1 576 0 is_stmt 0 discriminator 5
 2374 0016 1D4B     		ldr	r3, .L267
 2375 0018 40F24222 		movw	r2, #578
 2376 001c 1C49     		ldr	r1, .L267+4
 2377 001e 1D48     		ldr	r0, .L267+8
 2378              	.LVL331:
 2379 0020 FFF7FEFF 		bl	printf
 2380              	.LVL332:
 2381              	.LBB20:
 2382 0024 6FF00F00 		mvn	r0, #15
 2383 0028 FFF7FEFF 		bl	err_to_errno
 2384              	.LVL333:
 2385 002c 2074     		strb	r0, [r4, #16]
 2386 002e 38B3     		cbz	r0, .L262
 576:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              IS_SOCK_ADDR_TYPE_VALID(name) && IS_SOCK_ADDR_ALIGNED(name)),
 2387              		.loc 1 576 0 discriminator 6
 2388 0030 194B     		ldr	r3, .L267+12
 2389 0032 1860     		str	r0, [r3]
 2390              	.LBE20:
 2391 0034 4FF0FF30 		mov	r0, #-1
 2392              	.LVL334:
 2393              	.L256:
 605:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2394              		.loc 1 605 0 is_stmt 1
 2395 0038 02B0     		add	sp, sp, #8
 2396              	.LCFI23:
 2397              		.cfi_remember_state
 2398              		.cfi_def_cfa_offset 16
 2399              		@ sp needed
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 95


 2400 003a 70BD     		pop	{r4, r5, r6, pc}
 2401              	.LVL335:
 2402              	.L265:
 2403              	.LCFI24:
 2404              		.cfi_restore_state
 576:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              IS_SOCK_ADDR_TYPE_VALID(name) && IS_SOCK_ADDR_ALIGNED(name)),
 2405              		.loc 1 576 0 discriminator 2
 2406 003c 7378     		ldrb	r3, [r6, #1]	@ zero_extendqisi2
 2407 003e 022B     		cmp	r3, #2
 2408 0040 E9D1     		bne	.L258
 576:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              IS_SOCK_ADDR_TYPE_VALID(name) && IS_SOCK_ADDR_ALIGNED(name)),
 2409              		.loc 1 576 0 is_stmt 0 discriminator 4
 2410 0042 16F0030F 		tst	r6, #3
 2411 0046 E6D1     		bne	.L258
 581:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_bind(%d, addr=", s));
 2412              		.loc 1 581 0 is_stmt 1
 2413 0048 7368     		ldr	r3, [r6, #4]
 2414 004a 02AD     		add	r5, sp, #8
 2415              	.LVL336:
 2416 004c 45F8043D 		str	r3, [r5, #-4]!
 2417 0050 7088     		ldrh	r0, [r6, #2]
 2418              	.LVL337:
 2419 0052 FFF7FEFF 		bl	lwip_htons
 2420              	.LVL338:
 594:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2421              		.loc 1 594 0
 2422 0056 0246     		mov	r2, r0
 2423 0058 2946     		mov	r1, r5
 2424 005a 2068     		ldr	r0, [r4]
 2425              	.LVL339:
 2426 005c FFF7FEFF 		bl	netconn_bind
 2427              	.LVL340:
 596:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_bind(%d) failed, err=%d\n", s, err));
 2428              		.loc 1 596 0
 2429 0060 10B9     		cbnz	r0, .L266
 2430              	.LVL341:
 2431              	.LBB21:
 603:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return 0;
 2432              		.loc 1 603 0
 2433 0062 0020     		movs	r0, #0
 2434              	.LVL342:
 2435 0064 2074     		strb	r0, [r4, #16]
 2436              	.LBE21:
 604:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 2437              		.loc 1 604 0
 2438 0066 E7E7     		b	.L256
 2439              	.LVL343:
 2440              	.L266:
 2441              	.LBB22:
 598:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2442              		.loc 1 598 0
 2443 0068 FFF7FEFF 		bl	err_to_errno
 2444              	.LVL344:
 2445 006c 2074     		strb	r0, [r4, #16]
 2446 006e 50B1     		cbz	r0, .L263
 598:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2447              		.loc 1 598 0 is_stmt 0 discriminator 1
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 96


 2448 0070 094B     		ldr	r3, .L267+12
 2449 0072 1860     		str	r0, [r3]
 2450              	.LBE22:
 599:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2451              		.loc 1 599 0 is_stmt 1 discriminator 1
 2452 0074 4FF0FF30 		mov	r0, #-1
 2453              	.LVL345:
 2454 0078 DEE7     		b	.L256
 2455              	.LVL346:
 2456              	.L261:
 566:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2457              		.loc 1 566 0
 2458 007a 4FF0FF30 		mov	r0, #-1
 2459              	.LVL347:
 2460 007e DBE7     		b	.L256
 2461              	.LVL348:
 2462              	.L262:
 576:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              IS_SOCK_ADDR_TYPE_VALID(name) && IS_SOCK_ADDR_ALIGNED(name)),
 2463              		.loc 1 576 0
 2464 0080 4FF0FF30 		mov	r0, #-1
 2465              	.LVL349:
 2466 0084 D8E7     		b	.L256
 2467              	.LVL350:
 2468              	.L263:
 599:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2469              		.loc 1 599 0
 2470 0086 4FF0FF30 		mov	r0, #-1
 2471              	.LVL351:
 2472 008a D5E7     		b	.L256
 2473              	.L268:
 2474              		.align	2
 2475              	.L267:
 2476 008c 00000000 		.word	.LC0
 2477 0090 00000000 		.word	.LC8
 2478 0094 3C000000 		.word	.LC2
 2479 0098 00000000 		.word	errno
 2480              		.cfi_endproc
 2481              	.LFE164:
 2483              		.section	.text.lwip_close,"ax",%progbits
 2484              		.align	1
 2485              		.global	lwip_close
 2486              		.syntax unified
 2487              		.thumb
 2488              		.thumb_func
 2489              		.fpu fpv5-sp-d16
 2491              	lwip_close:
 2492              	.LFB165:
 609:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 2493              		.loc 1 609 0
 2494              		.cfi_startproc
 2495              		@ args = 0, pretend = 0, frame = 0
 2496              		@ frame_needed = 0, uses_anonymous_args = 0
 2497              	.LVL352:
 2498 0000 38B5     		push	{r3, r4, r5, lr}
 2499              	.LCFI25:
 2500              		.cfi_def_cfa_offset 16
 2501              		.cfi_offset 3, -16
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 97


 2502              		.cfi_offset 4, -12
 2503              		.cfi_offset 5, -8
 2504              		.cfi_offset 14, -4
 2505              	.LVL353:
 616:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 2506              		.loc 1 616 0
 2507 0002 FFF7FEFF 		bl	get_socket
 2508              	.LVL354:
 617:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2509              		.loc 1 617 0
 2510 0006 48B3     		cbz	r0, .L274
 2511 0008 0546     		mov	r5, r0
 621:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     is_tcp = NETCONNTYPE_GROUP(netconn_type(sock->conn)) == NETCONN_TCP;
 2512              		.loc 1 621 0
 2513 000a 0368     		ldr	r3, [r0]
 2514 000c 9BB1     		cbz	r3, .L271
 622:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
 2515              		.loc 1 622 0
 2516 000e 1978     		ldrb	r1, [r3]	@ zero_extendqisi2
 2517 0010 01F0F001 		and	r1, r1, #240
 2518 0014 1029     		cmp	r1, #16
 2519 0016 14BF     		ite	ne
 2520 0018 0024     		movne	r4, #0
 2521 001a 0124     		moveq	r4, #1
 2522              	.LVL355:
 2523              	.L272:
 632:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (err != ERR_OK) {
 2524              		.loc 1 632 0
 2525 001c 2868     		ldr	r0, [r5]
 2526 001e FFF7FEFF 		bl	netconn_delete
 2527              	.LVL356:
 633:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(err));
 2528              		.loc 1 633 0
 2529 0022 A8B1     		cbz	r0, .L273
 2530              	.LBB23:
 634:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2531              		.loc 1 634 0
 2532 0024 FFF7FEFF 		bl	err_to_errno
 2533              	.LVL357:
 2534 0028 2874     		strb	r0, [r5, #16]
 2535 002a D0B1     		cbz	r0, .L276
 634:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2536              		.loc 1 634 0 is_stmt 0 discriminator 1
 2537 002c 0E4B     		ldr	r3, .L278
 2538 002e 1860     		str	r0, [r3]
 2539              	.LBE23:
 635:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2540              		.loc 1 635 0 is_stmt 1 discriminator 1
 2541 0030 4FF0FF30 		mov	r0, #-1
 2542              	.LVL358:
 2543 0034 38BD     		pop	{r3, r4, r5, pc}
 2544              	.LVL359:
 2545              	.L271:
 624:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2546              		.loc 1 624 0
 2547 0036 4368     		ldr	r3, [r0, #4]
 2548 0038 43B1     		cbz	r3, .L275
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 98


 624:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2549              		.loc 1 624 0 is_stmt 0 discriminator 1
 2550 003a 0C4B     		ldr	r3, .L278+4
 2551 003c 4FF41C72 		mov	r2, #624
 2552 0040 0B49     		ldr	r1, .L278+8
 2553 0042 0C48     		ldr	r0, .L278+12
 2554              	.LVL360:
 2555 0044 FFF7FEFF 		bl	printf
 2556              	.LVL361:
 611:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err;
 2557              		.loc 1 611 0 is_stmt 1 discriminator 1
 2558 0048 0024     		movs	r4, #0
 2559 004a E7E7     		b	.L272
 2560              	.LVL362:
 2561              	.L275:
 611:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err;
 2562              		.loc 1 611 0 is_stmt 0
 2563 004c 0024     		movs	r4, #0
 2564 004e E5E7     		b	.L272
 2565              	.LVL363:
 2566              	.L273:
 638:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   set_errno(0);
 2567              		.loc 1 638 0 is_stmt 1
 2568 0050 2146     		mov	r1, r4
 2569 0052 2846     		mov	r0, r5
 2570              	.LVL364:
 2571 0054 FFF7FEFF 		bl	free_socket
 2572              	.LVL365:
 640:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 2573              		.loc 1 640 0
 2574 0058 0020     		movs	r0, #0
 2575 005a 38BD     		pop	{r3, r4, r5, pc}
 2576              	.LVL366:
 2577              	.L274:
 618:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2578              		.loc 1 618 0
 2579 005c 4FF0FF30 		mov	r0, #-1
 2580              	.LVL367:
 2581 0060 38BD     		pop	{r3, r4, r5, pc}
 2582              	.LVL368:
 2583              	.L276:
 635:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2584              		.loc 1 635 0
 2585 0062 4FF0FF30 		mov	r0, #-1
 2586              	.LVL369:
 641:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2587              		.loc 1 641 0
 2588 0066 38BD     		pop	{r3, r4, r5, pc}
 2589              	.LVL370:
 2590              	.L279:
 2591              		.align	2
 2592              	.L278:
 2593 0068 00000000 		.word	errno
 2594 006c 00000000 		.word	.LC0
 2595 0070 00000000 		.word	.LC9
 2596 0074 3C000000 		.word	.LC2
 2597              		.cfi_endproc
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 99


 2598              	.LFE165:
 2600              		.section	.text.lwip_connect,"ax",%progbits
 2601              		.align	1
 2602              		.global	lwip_connect
 2603              		.syntax unified
 2604              		.thumb
 2605              		.thumb_func
 2606              		.fpu fpv5-sp-d16
 2608              	lwip_connect:
 2609              	.LFB166:
 645:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 2610              		.loc 1 645 0
 2611              		.cfi_startproc
 2612              		@ args = 0, pretend = 0, frame = 8
 2613              		@ frame_needed = 0, uses_anonymous_args = 0
 2614              	.LVL371:
 2615 0000 70B5     		push	{r4, r5, r6, lr}
 2616              	.LCFI26:
 2617              		.cfi_def_cfa_offset 16
 2618              		.cfi_offset 4, -16
 2619              		.cfi_offset 5, -12
 2620              		.cfi_offset 6, -8
 2621              		.cfi_offset 14, -4
 2622 0002 82B0     		sub	sp, sp, #8
 2623              	.LCFI27:
 2624              		.cfi_def_cfa_offset 24
 2625 0004 0C46     		mov	r4, r1
 2626 0006 1646     		mov	r6, r2
 649:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 2627              		.loc 1 649 0
 2628 0008 FFF7FEFF 		bl	get_socket
 2629              	.LVL372:
 650:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2630              		.loc 1 650 0
 2631 000c 0028     		cmp	r0, #0
 2632 000e 39D0     		beq	.L288
 2633 0010 0546     		mov	r5, r0
 661:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_connect(%d, AF_UNSPEC)\n", s));
 2634              		.loc 1 661 0
 2635 0012 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 2636 0014 BBB1     		cbz	r3, .L291
 2637              	.LBB24:
 669:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                IS_SOCK_ADDR_TYPE_VALID_OR_UNSPEC(name) && IS_SOCK_ADDR_ALIGNED(name),
 2638              		.loc 1 669 0
 2639 0016 102E     		cmp	r6, #16
 2640 0018 19D1     		bne	.L284
 669:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                IS_SOCK_ADDR_TYPE_VALID_OR_UNSPEC(name) && IS_SOCK_ADDR_ALIGNED(name),
 2641              		.loc 1 669 0 is_stmt 0 discriminator 2
 2642 001a 022B     		cmp	r3, #2
 2643 001c 17D1     		bne	.L284
 669:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                IS_SOCK_ADDR_TYPE_VALID_OR_UNSPEC(name) && IS_SOCK_ADDR_ALIGNED(name),
 2644              		.loc 1 669 0 discriminator 4
 2645 001e 14F0030F 		tst	r4, #3
 2646 0022 14D1     		bne	.L284
 673:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_connect(%d, addr=", s));
 2647              		.loc 1 673 0 is_stmt 1
 2648 0024 6368     		ldr	r3, [r4, #4]
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 100


 2649 0026 02AE     		add	r6, sp, #8
 2650              	.LVL373:
 2651 0028 46F8043D 		str	r3, [r6, #-4]!
 2652 002c 6088     		ldrh	r0, [r4, #2]
 2653              	.LVL374:
 2654 002e FFF7FEFF 		bl	lwip_htons
 2655              	.LVL375:
 686:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2656              		.loc 1 686 0
 2657 0032 0246     		mov	r2, r0
 2658 0034 3146     		mov	r1, r6
 2659 0036 2868     		ldr	r0, [r5]
 2660              	.LVL376:
 2661 0038 FFF7FEFF 		bl	netconn_connect
 2662              	.LVL377:
 2663              	.L283:
 2664              	.LBE24:
 689:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_connect(%d) failed, err=%d\n", s, err));
 2665              		.loc 1 689 0
 2666 003c C8B9     		cbnz	r0, .L292
 2667              	.LVL378:
 2668              	.LBB26:
 696:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return 0;
 2669              		.loc 1 696 0
 2670 003e 0020     		movs	r0, #0
 2671              	.LVL379:
 2672 0040 2874     		strb	r0, [r5, #16]
 2673              	.LVL380:
 2674              	.L280:
 2675              	.LBE26:
 698:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2676              		.loc 1 698 0
 2677 0042 02B0     		add	sp, sp, #8
 2678              	.LCFI28:
 2679              		.cfi_remember_state
 2680              		.cfi_def_cfa_offset 16
 2681              		@ sp needed
 2682 0044 70BD     		pop	{r4, r5, r6, pc}
 2683              	.LVL381:
 2684              	.L291:
 2685              	.LCFI29:
 2686              		.cfi_restore_state
 663:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
 2687              		.loc 1 663 0
 2688 0046 0068     		ldr	r0, [r0]
 2689              	.LVL382:
 2690 0048 FFF7FEFF 		bl	netconn_disconnect
 2691              	.LVL383:
 2692 004c F6E7     		b	.L283
 2693              	.LVL384:
 2694              	.L284:
 2695              	.LBB27:
 669:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                IS_SOCK_ADDR_TYPE_VALID_OR_UNSPEC(name) && IS_SOCK_ADDR_ALIGNED(name),
 2696              		.loc 1 669 0 discriminator 5
 2697 004e 104B     		ldr	r3, .L293
 2698 0050 40F29F22 		movw	r2, #671
 2699 0054 0F49     		ldr	r1, .L293+4
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 101


 2700 0056 1048     		ldr	r0, .L293+8
 2701              	.LVL385:
 2702 0058 FFF7FEFF 		bl	printf
 2703              	.LVL386:
 2704              	.LBB25:
 2705 005c 6FF00F00 		mvn	r0, #15
 2706 0060 FFF7FEFF 		bl	err_to_errno
 2707              	.LVL387:
 2708 0064 2874     		strb	r0, [r5, #16]
 2709 0066 08B1     		cbz	r0, .L286
 669:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                IS_SOCK_ADDR_TYPE_VALID_OR_UNSPEC(name) && IS_SOCK_ADDR_ALIGNED(name),
 2710              		.loc 1 669 0 is_stmt 0 discriminator 6
 2711 0068 0C4B     		ldr	r3, .L293+12
 2712 006a 1860     		str	r0, [r3]
 2713              	.L286:
 2714              	.LBE25:
 669:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                IS_SOCK_ADDR_TYPE_VALID_OR_UNSPEC(name) && IS_SOCK_ADDR_ALIGNED(name),
 2715              		.loc 1 669 0 discriminator 8
 2716 006c 4FF0FF30 		mov	r0, #-1
 2717              	.LVL388:
 2718 0070 E7E7     		b	.L280
 2719              	.LVL389:
 2720              	.L292:
 2721              	.LBE27:
 2722              	.LBB28:
 691:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2723              		.loc 1 691 0 is_stmt 1
 2724 0072 FFF7FEFF 		bl	err_to_errno
 2725              	.LVL390:
 2726 0076 2874     		strb	r0, [r5, #16]
 2727 0078 38B1     		cbz	r0, .L289
 691:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2728              		.loc 1 691 0 is_stmt 0 discriminator 1
 2729 007a 084B     		ldr	r3, .L293+12
 2730 007c 1860     		str	r0, [r3]
 2731              	.LBE28:
 692:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2732              		.loc 1 692 0 is_stmt 1 discriminator 1
 2733 007e 4FF0FF30 		mov	r0, #-1
 2734              	.LVL391:
 2735 0082 DEE7     		b	.L280
 2736              	.LVL392:
 2737              	.L288:
 651:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2738              		.loc 1 651 0
 2739 0084 4FF0FF30 		mov	r0, #-1
 2740              	.LVL393:
 2741 0088 DBE7     		b	.L280
 2742              	.LVL394:
 2743              	.L289:
 692:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2744              		.loc 1 692 0
 2745 008a 4FF0FF30 		mov	r0, #-1
 2746              	.LVL395:
 2747 008e D8E7     		b	.L280
 2748              	.L294:
 2749              		.align	2
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 102


 2750              	.L293:
 2751 0090 00000000 		.word	.LC0
 2752 0094 00000000 		.word	.LC10
 2753 0098 3C000000 		.word	.LC2
 2754 009c 00000000 		.word	errno
 2755              		.cfi_endproc
 2756              	.LFE166:
 2758              		.section	.text.lwip_listen,"ax",%progbits
 2759              		.align	1
 2760              		.global	lwip_listen
 2761              		.syntax unified
 2762              		.thumb
 2763              		.thumb_func
 2764              		.fpu fpv5-sp-d16
 2766              	lwip_listen:
 2767              	.LFB167:
 710:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 2768              		.loc 1 710 0
 2769              		.cfi_startproc
 2770              		@ args = 0, pretend = 0, frame = 0
 2771              		@ frame_needed = 0, uses_anonymous_args = 0
 2772              	.LVL396:
 2773 0000 38B5     		push	{r3, r4, r5, lr}
 2774              	.LCFI30:
 2775              		.cfi_def_cfa_offset 16
 2776              		.cfi_offset 3, -16
 2777              		.cfi_offset 4, -12
 2778              		.cfi_offset 5, -8
 2779              		.cfi_offset 14, -4
 2780 0002 0C46     		mov	r4, r1
 716:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 2781              		.loc 1 716 0
 2782 0004 FFF7FEFF 		bl	get_socket
 2783              	.LVL397:
 717:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2784              		.loc 1 717 0
 2785 0008 20B3     		cbz	r0, .L300
 2786 000a 0546     		mov	r5, r0
 722:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2787              		.loc 1 722 0
 2788 000c FE2C     		cmp	r4, #254
 2789 000e 15DC     		bgt	.L301
 722:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2790              		.loc 1 722 0 is_stmt 0 discriminator 1
 2791 0010 24EAE471 		bic	r1, r4, r4, asr #31
 2792              	.L297:
 2793              	.LVL398:
 724:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2794              		.loc 1 724 0 is_stmt 1 discriminator 4
 2795 0014 C9B2     		uxtb	r1, r1
 2796              	.LVL399:
 2797 0016 2868     		ldr	r0, [r5]
 2798              	.LVL400:
 2799 0018 FFF7FEFF 		bl	netconn_listen_with_backlog
 2800              	.LVL401:
 726:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_listen(%d) failed, err=%d\n", s, err));
 2801              		.loc 1 726 0 discriminator 4
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 103


 2802 001c B8B1     		cbz	r0, .L298
 728:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, EOPNOTSUPP);
 2803              		.loc 1 728 0
 2804 001e 2B68     		ldr	r3, [r5]
 2805 0020 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2806 0022 03F0F003 		and	r3, r3, #240
 2807 0026 102B     		cmp	r3, #16
 2808 0028 0AD1     		bne	.L304
 2809              	.LBB29:
 732:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2810              		.loc 1 732 0
 2811 002a FFF7FEFF 		bl	err_to_errno
 2812              	.LVL402:
 2813 002e 2874     		strb	r0, [r5, #16]
 2814 0030 98B1     		cbz	r0, .L302
 732:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2815              		.loc 1 732 0 is_stmt 0 discriminator 1
 2816 0032 0B4B     		ldr	r3, .L305
 2817 0034 1860     		str	r0, [r3]
 2818              	.LBE29:
 733:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2819              		.loc 1 733 0 is_stmt 1 discriminator 1
 2820 0036 4FF0FF30 		mov	r0, #-1
 2821              	.LVL403:
 2822 003a 38BD     		pop	{r3, r4, r5, pc}
 2823              	.LVL404:
 2824              	.L301:
 722:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2825              		.loc 1 722 0
 2826 003c FF21     		movs	r1, #255
 2827 003e E9E7     		b	.L297
 2828              	.LVL405:
 2829              	.L304:
 2830              	.LBB30:
 729:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
 2831              		.loc 1 729 0
 2832 0040 5F23     		movs	r3, #95
 2833 0042 2B74     		strb	r3, [r5, #16]
 2834 0044 064A     		ldr	r2, .L305
 2835 0046 1360     		str	r3, [r2]
 2836              	.LBE30:
 730:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 2837              		.loc 1 730 0
 2838 0048 4FF0FF30 		mov	r0, #-1
 2839              	.LVL406:
 2840 004c 38BD     		pop	{r3, r4, r5, pc}
 2841              	.LVL407:
 2842              	.L298:
 2843              	.LBB31:
 736:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return 0;
 2844              		.loc 1 736 0
 2845 004e 0020     		movs	r0, #0
 2846              	.LVL408:
 2847 0050 2874     		strb	r0, [r5, #16]
 2848              	.LBE31:
 737:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 2849              		.loc 1 737 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 104


 2850 0052 38BD     		pop	{r3, r4, r5, pc}
 2851              	.LVL409:
 2852              	.L300:
 718:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2853              		.loc 1 718 0
 2854 0054 4FF0FF30 		mov	r0, #-1
 2855              	.LVL410:
 2856 0058 38BD     		pop	{r3, r4, r5, pc}
 2857              	.LVL411:
 2858              	.L302:
 733:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2859              		.loc 1 733 0
 2860 005a 4FF0FF30 		mov	r0, #-1
 2861              	.LVL412:
 738:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2862              		.loc 1 738 0
 2863 005e 38BD     		pop	{r3, r4, r5, pc}
 2864              	.LVL413:
 2865              	.L306:
 2866              		.align	2
 2867              	.L305:
 2868 0060 00000000 		.word	errno
 2869              		.cfi_endproc
 2870              	.LFE167:
 2872              		.section	.text.lwip_recvfrom,"ax",%progbits
 2873              		.align	1
 2874              		.global	lwip_recvfrom
 2875              		.syntax unified
 2876              		.thumb
 2877              		.thumb_func
 2878              		.fpu fpv5-sp-d16
 2880              	lwip_recvfrom:
 2881              	.LFB168:
 743:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 2882              		.loc 1 743 0
 2883              		.cfi_startproc
 2884              		@ args = 8, pretend = 0, frame = 48
 2885              		@ frame_needed = 0, uses_anonymous_args = 0
 2886              	.LVL414:
 2887 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 2888              	.LCFI31:
 2889              		.cfi_def_cfa_offset 36
 2890              		.cfi_offset 4, -36
 2891              		.cfi_offset 5, -32
 2892              		.cfi_offset 6, -28
 2893              		.cfi_offset 7, -24
 2894              		.cfi_offset 8, -20
 2895              		.cfi_offset 9, -16
 2896              		.cfi_offset 10, -12
 2897              		.cfi_offset 11, -8
 2898              		.cfi_offset 14, -4
 2899 0004 8DB0     		sub	sp, sp, #52
 2900              	.LCFI32:
 2901              		.cfi_def_cfa_offset 88
 2902 0006 0391     		str	r1, [sp, #12]
 2903 0008 9046     		mov	r8, r2
 2904 000a 9B46     		mov	fp, r3
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 105


 745:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct pbuf      *p;
 2905              		.loc 1 745 0
 2906 000c 0023     		movs	r3, #0
 2907              	.LVL415:
 2908 000e 0B93     		str	r3, [sp, #44]
 2909              	.LVL416:
 753:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 2910              		.loc 1 753 0
 2911 0010 FFF7FEFF 		bl	get_socket
 2912              	.LVL417:
 754:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2913              		.loc 1 754 0
 2914 0014 0028     		cmp	r0, #0
 2915 0016 00F00F81 		beq	.L335
 2916 001a 0646     		mov	r6, r0
 2917 001c 0025     		movs	r5, #0
 2918 001e AA46     		mov	r10, r5
 2919 0020 D946     		mov	r9, fp
 2920 0022 AB46     		mov	fp, r5
 2921              	.LVL418:
 2922 0024 91E0     		b	.L334
 2923              	.LVL419:
 2924              	.L309:
 765:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (sock->rcvevent <= 0)) {
 2925              		.loc 1 765 0
 2926 0026 19F0080F 		tst	r9, #8
 2927 002a 04D1     		bne	.L311
 765:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (sock->rcvevent <= 0)) {
 2928              		.loc 1 765 0 is_stmt 0 discriminator 2
 2929 002c 3368     		ldr	r3, [r6]
 2930 002e 1B7F     		ldrb	r3, [r3, #28]	@ zero_extendqisi2
 2931 0030 13F0020F 		tst	r3, #2
 2932 0034 03D0     		beq	.L312
 2933              	.L311:
 766:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (off > 0) {
 2934              		.loc 1 766 0 is_stmt 1 discriminator 3
 2935 0036 B6F90A30 		ldrsh	r3, [r6, #10]
 765:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (sock->rcvevent <= 0)) {
 2936              		.loc 1 765 0 discriminator 3
 2937 003a 002B     		cmp	r3, #0
 2938 003c 0EDD     		ble	.L344
 2939              	.L312:
 779:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         err = netconn_recv_tcp_pbuf(sock->conn, (struct pbuf **)&buf);
 2940              		.loc 1 779 0
 2941 003e 3068     		ldr	r0, [r6]
 2942 0040 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 2943 0042 03F0F003 		and	r3, r3, #240
 2944 0046 102B     		cmp	r3, #16
 2945 0048 14D0     		beq	.L345
 782:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 2946              		.loc 1 782 0
 2947 004a 0BA9     		add	r1, sp, #44
 2948 004c FFF7FEFF 		bl	netconn_recv
 2949              	.LVL420:
 2950              	.L315:
 787:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (off > 0) {
 2951              		.loc 1 787 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 106


 2952 0050 A0B9     		cbnz	r0, .L346
 807:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->lastdata = buf;
 2953              		.loc 1 807 0
 2954 0052 0B9B     		ldr	r3, [sp, #44]
 2955 0054 7BB3     		cbz	r3, .L347
 2956              	.LVL421:
 2957              	.L320:
 808:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 2958              		.loc 1 808 0
 2959 0056 0B9B     		ldr	r3, [sp, #44]
 2960 0058 7360     		str	r3, [r6, #4]
 2961 005a 7BE0     		b	.L310
 2962              	.L344:
 767:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           /* already received data, return that */
 2963              		.loc 1 767 0
 2964 005c BAF1000F 		cmp	r10, #0
 2965 0060 02DD     		ble	.L313
 2966              	.LVL422:
 2967              	.LBB32:
 769:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           return off;
 2968              		.loc 1 769 0
 2969 0062 0023     		movs	r3, #0
 2970 0064 3374     		strb	r3, [r6, #16]
 2971              	.LBE32:
 770:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 2972              		.loc 1 770 0
 2973 0066 E3E0     		b	.L307
 2974              	.LVL423:
 2975              	.L313:
 773:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return -1;
 2976              		.loc 1 773 0 discriminator 1
 2977 0068 0B22     		movs	r2, #11
 2978 006a 764B     		ldr	r3, .L355
 2979 006c 1A60     		str	r2, [r3]
 774:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 2980              		.loc 1 774 0 discriminator 1
 2981 006e 4FF0FF3A 		mov	r10, #-1
 2982              	.LVL424:
 2983 0072 DDE0     		b	.L307
 2984              	.LVL425:
 2985              	.L345:
 780:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
 2986              		.loc 1 780 0
 2987 0074 0BA9     		add	r1, sp, #44
 2988 0076 FFF7FEFF 		bl	netconn_recv_tcp_pbuf
 2989              	.LVL426:
 2990 007a E9E7     		b	.L315
 2991              	.L346:
 2992 007c 0446     		mov	r4, r0
 788:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (err == ERR_CLSD) {
 2993              		.loc 1 788 0
 2994 007e BAF1000F 		cmp	r10, #0
 2995 0082 0BDD     		ble	.L317
 789:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             /* closed but already received data, ensure select gets the FIN, too */
 2996              		.loc 1 789 0
 2997 0084 10F10F0F 		cmn	r0, #15
 2998 0088 02D0     		beq	.L348
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 107


 2999              	.LVL427:
 3000              	.L318:
 3001              	.LBB33:
 794:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           return off;
 3002              		.loc 1 794 0
 3003 008a 0023     		movs	r3, #0
 3004 008c 3374     		strb	r3, [r6, #16]
 3005              	.LBE33:
 795:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 3006              		.loc 1 795 0
 3007 008e CFE0     		b	.L307
 3008              	.LVL428:
 3009              	.L348:
 791:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
 3010              		.loc 1 791 0
 3011 0090 0022     		movs	r2, #0
 3012 0092 1146     		mov	r1, r2
 3013 0094 3068     		ldr	r0, [r6]
 3014              	.LVL429:
 3015 0096 FFF7FEFF 		bl	event_callback
 3016              	.LVL430:
 3017 009a F6E7     		b	.L318
 3018              	.LVL431:
 3019              	.L317:
 3020              	.LBB34:
 800:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (err == ERR_CLSD) {
 3021              		.loc 1 800 0
 3022 009c FFF7FEFF 		bl	err_to_errno
 3023              	.LVL432:
 3024 00a0 3074     		strb	r0, [r6, #16]
 3025 00a2 08B1     		cbz	r0, .L319
 800:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (err == ERR_CLSD) {
 3026              		.loc 1 800 0 is_stmt 0 discriminator 1
 3027 00a4 674B     		ldr	r3, .L355
 3028 00a6 1860     		str	r0, [r3]
 3029              	.L319:
 3030              	.LBE34:
 801:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           return 0;
 3031              		.loc 1 801 0 is_stmt 1
 3032 00a8 14F10F0F 		cmn	r4, #15
 3033 00ac 40F0C780 		bne	.L336
 802:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
 3034              		.loc 1 802 0
 3035 00b0 4FF0000A 		mov	r10, #0
 3036              	.LVL433:
 3037 00b4 BCE0     		b	.L307
 3038              	.LVL434:
 3039              	.L347:
 807:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->lastdata = buf;
 3040              		.loc 1 807 0 discriminator 1
 3041 00b6 644B     		ldr	r3, .L355+4
 3042 00b8 40F22732 		movw	r2, #807
 3043 00bc 6349     		ldr	r1, .L355+8
 3044 00be 6448     		ldr	r0, .L355+12
 3045              	.LVL435:
 3046 00c0 FFF7FEFF 		bl	printf
 3047              	.LVL436:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 108


 3048 00c4 C7E7     		b	.L320
 3049              	.L352:
 812:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
 3050              		.loc 1 812 0
 3051 00c6 0B9D     		ldr	r5, [sp, #44]
 3052              	.LVL437:
 3053 00c8 4CE0     		b	.L322
 3054              	.LVL438:
 3055              	.L337:
 823:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
 3056              		.loc 1 823 0
 3057 00ca 2746     		mov	r7, r4
 3058 00cc 52E0     		b	.L323
 3059              	.LVL439:
 3060              	.L353:
 835:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       len -= copylen;
 3061              		.loc 1 835 0 discriminator 1
 3062 00ce 5E4B     		ldr	r3, .L355+4
 3063 00d0 40F24332 		movw	r2, #835
 3064 00d4 5F49     		ldr	r1, .L355+16
 3065 00d6 5E48     		ldr	r0, .L355+12
 3066 00d8 FFF7FEFF 		bl	printf
 3067              	.LVL440:
 3068 00dc 5BE0     		b	.L325
 3069              	.L338:
 844:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 3070              		.loc 1 844 0
 3071 00de 4FF0010B 		mov	fp, #1
 3072              	.LVL441:
 3073 00e2 67E0     		b	.L324
 3074              	.LVL442:
 3075              	.L339:
 841:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 3076              		.loc 1 841 0
 3077 00e4 4FF0010B 		mov	fp, #1
 3078              	.LVL443:
 3079 00e8 64E0     		b	.L324
 3080              	.LVL444:
 3081              	.L340:
 3082 00ea 4FF0010B 		mov	fp, #1
 3083              	.LVL445:
 3084 00ee 61E0     		b	.L324
 3085              	.LVL446:
 3086              	.L341:
 3087 00f0 4FF0010B 		mov	fp, #1
 3088              	.LVL447:
 3089 00f4 5EE0     		b	.L324
 3090              	.LVL448:
 3091              	.L342:
 3092 00f6 4FF0010B 		mov	fp, #1
 3093              	.LVL449:
 3094 00fa 5BE0     		b	.L324
 3095              	.LVL450:
 3096              	.L354:
 3097              	.LBB35:
 860:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
 3098              		.loc 1 860 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 109


 3099 00fc 0023     		movs	r3, #0
 3100 00fe 0DF11602 		add	r2, sp, #22
 3101 0102 06A9     		add	r1, sp, #24
 3102              	.LVL451:
 3103 0104 FFF7FEFF 		bl	netconn_getaddr
 3104              	.LVL452:
 859:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           netconn_getaddr(sock->conn, fromaddr, &port, 0);
 3105              		.loc 1 859 0
 3106 0108 06AD     		add	r5, sp, #24
 3107              	.LVL453:
 3108 010a 67E0     		b	.L328
 3109              	.L329:
 884:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 3110              		.loc 1 884 0
 3111 010c 179B     		ldr	r3, [sp, #92]
 3112 010e 1A68     		ldr	r2, [r3]
 3113 0110 07A9     		add	r1, sp, #28
 3114 0112 1698     		ldr	r0, [sp, #88]
 3115 0114 FFF7FEFF 		bl	memcpy
 3116              	.LVL454:
 3117              	.L326:
 3118              	.LBE35:
 890:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* If this is a TCP socket, check if there is data left in the
 3119              		.loc 1 890 0
 3120 0118 19F0010F 		tst	r9, #1
 3121 011c 12D1     		bne	.L330
 894:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock->lastdata = buf;
 3122              		.loc 1 894 0
 3123 011e 3268     		ldr	r2, [r6]
 3124 0120 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 3125 0122 03F0F003 		and	r3, r3, #240
 3126 0126 102B     		cmp	r3, #16
 3127 0128 72D0     		beq	.L349
 3128              	.LVL455:
 3129              	.L331:
 899:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock->lastoffset = 0;
 3130              		.loc 1 899 0
 3131 012a 0023     		movs	r3, #0
 3132 012c 7360     		str	r3, [r6, #4]
 900:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recvfrom: deleting netbuf=%p\n", buf));
 3133              		.loc 1 900 0
 3134 012e 3381     		strh	r3, [r6, #8]	@ movhi
 902:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           pbuf_free((struct pbuf *)buf);
 3135              		.loc 1 902 0
 3136 0130 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 3137 0132 03F0F003 		and	r3, r3, #240
 3138 0136 102B     		cmp	r3, #16
 3139 0138 74D0     		beq	.L350
 905:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 3140              		.loc 1 905 0
 3141 013a 0B98     		ldr	r0, [sp, #44]
 3142 013c FFF7FEFF 		bl	netbuf_delete
 3143              	.LVL456:
 3144              	.L333:
 907:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 3145              		.loc 1 907 0
 3146 0140 0023     		movs	r3, #0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 110


 3147 0142 0B93     		str	r3, [sp, #44]
 3148              	.LVL457:
 3149              	.L330:
 910:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 3150              		.loc 1 910 0
 3151 0144 BBF1000F 		cmp	fp, #0
 3152 0148 70D1     		bne	.L351
 3153              	.LVL458:
 3154              	.L334:
 761:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       buf = sock->lastdata;
 3155              		.loc 1 761 0
 3156 014a 7368     		ldr	r3, [r6, #4]
 3157 014c 002B     		cmp	r3, #0
 3158 014e 3FF46AAF 		beq	.L309
 762:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
 3159              		.loc 1 762 0
 3160 0152 0B93     		str	r3, [sp, #44]
 3161              	.L310:
 811:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       p = (struct pbuf *)buf;
 3162              		.loc 1 811 0
 3163 0154 3368     		ldr	r3, [r6]
 3164 0156 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3165 0158 03F0F003 		and	r3, r3, #240
 3166 015c 102B     		cmp	r3, #16
 3167 015e B2D0     		beq	.L352
 814:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 3168              		.loc 1 814 0
 3169 0160 0B9B     		ldr	r3, [sp, #44]
 3170 0162 1D68     		ldr	r5, [r3]
 3171              	.LVL459:
 3172              	.L322:
 816:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recvfrom: buflen=%"U16_F" len=%"SZT_F" off=%d sock->lastoffse
 3173              		.loc 1 816 0
 3174 0164 2C89     		ldrh	r4, [r5, #8]
 3175              	.LVL460:
 820:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 3176              		.loc 1 820 0
 3177 0166 3389     		ldrh	r3, [r6, #8]
 3178 0168 E41A     		subs	r4, r4, r3
 3179              	.LVL461:
 3180 016a A4B2     		uxth	r4, r4
 3181              	.LVL462:
 822:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       copylen = buflen;
 3182              		.loc 1 822 0
 3183 016c A045     		cmp	r8, r4
 3184 016e ACD8     		bhi	.L337
 825:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 3185              		.loc 1 825 0
 3186 0170 1FFA88F7 		uxth	r7, r8
 3187              	.LVL463:
 3188              	.L323:
 830:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 3189              		.loc 1 830 0
 3190 0174 3A46     		mov	r2, r7
 3191 0176 0399     		ldr	r1, [sp, #12]
 3192 0178 5144     		add	r1, r1, r10
 3193 017a 2846     		mov	r0, r5
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 111


 3194 017c FFF7FEFF 		bl	pbuf_copy_partial
 3195              	.LVL464:
 832:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 3196              		.loc 1 832 0
 3197 0180 0297     		str	r7, [sp, #8]
 3198 0182 BA44     		add	r10, r10, r7
 3199              	.LVL465:
 834:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_ASSERT("invalid copylen, len would underflow", len >= copylen);
 3200              		.loc 1 834 0
 3201 0184 3368     		ldr	r3, [r6]
 3202 0186 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3203 0188 03F0F003 		and	r3, r3, #240
 3204 018c 102B     		cmp	r3, #16
 3205 018e A6D1     		bne	.L338
 835:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       len -= copylen;
 3206              		.loc 1 835 0
 3207 0190 0197     		str	r7, [sp, #4]
 3208 0192 B845     		cmp	r8, r7
 3209 0194 9BD3     		bcc	.L353
 3210              	.L325:
 3211              	.LVL466:
 837:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (p->flags & PBUF_FLAG_PUSH) ||
 3212              		.loc 1 837 0
 3213 0196 019B     		ldr	r3, [sp, #4]
 3214 0198 B8EB0308 		subs	r8, r8, r3
 3215              	.LVL467:
 3216 019c A2D0     		beq	.L339
 838:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (sock->rcvevent <= 0) ||
 3217              		.loc 1 838 0 discriminator 1
 3218 019e 6B7B     		ldrb	r3, [r5, #13]	@ zero_extendqisi2
 837:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (p->flags & PBUF_FLAG_PUSH) ||
 3219              		.loc 1 837 0 discriminator 1
 3220 01a0 13F0010F 		tst	r3, #1
 3221 01a4 A1D1     		bne	.L340
 839:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           ((flags & MSG_PEEK) != 0)) {
 3222              		.loc 1 839 0
 3223 01a6 B6F90A30 		ldrsh	r3, [r6, #10]
 838:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (sock->rcvevent <= 0) ||
 3224              		.loc 1 838 0
 3225 01aa 002B     		cmp	r3, #0
 3226 01ac A0DD     		ble	.L341
 839:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           ((flags & MSG_PEEK) != 0)) {
 3227              		.loc 1 839 0
 3228 01ae 19F0010F 		tst	r9, #1
 3229 01b2 A0D1     		bne	.L342
 3230              	.LVL468:
 3231              	.L324:
 848:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if !SOCKETS_DEBUG
 3232              		.loc 1 848 0
 3233 01b4 BBF1000F 		cmp	fp, #0
 3234 01b8 AED0     		beq	.L326
 850:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* !SOCKETS_DEBUG */
 3235              		.loc 1 850 0
 3236 01ba 169B     		ldr	r3, [sp, #88]
 3237 01bc 179A     		ldr	r2, [sp, #92]
 3238 01be 002B     		cmp	r3, #0
 3239 01c0 18BF     		it	ne
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 112


 3240 01c2 002A     		cmpne	r2, #0
 3241 01c4 A8D0     		beq	.L326
 3242              	.LBB36:
 858:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           fromaddr = &tmpaddr;
 3243              		.loc 1 858 0
 3244 01c6 3068     		ldr	r0, [r6]
 3245 01c8 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 3246 01ca 03F0F003 		and	r3, r3, #240
 3247 01ce 102B     		cmp	r3, #16
 3248 01d0 94D0     		beq	.L354
 862:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           fromaddr = netbuf_fromaddr((struct netbuf *)buf);
 3249              		.loc 1 862 0
 3250 01d2 0B9D     		ldr	r5, [sp, #44]
 3251              	.LVL469:
 3252 01d4 AB89     		ldrh	r3, [r5, #12]
 3253 01d6 ADF81630 		strh	r3, [sp, #22]	@ movhi
 863:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 3254              		.loc 1 863 0
 3255 01da 0835     		adds	r5, r5, #8
 3256              	.LVL470:
 3257              	.L328:
 874:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         ip_addr_debug_print(SOCKETS_DEBUG, fromaddr);
 3258              		.loc 1 874 0
 3259 01dc 1023     		movs	r3, #16
 3260 01de 8DF81C30 		strb	r3, [sp, #28]
 3261 01e2 0223     		movs	r3, #2
 3262 01e4 8DF81D30 		strb	r3, [sp, #29]
 3263 01e8 BDF81600 		ldrh	r0, [sp, #22]
 3264 01ec FFF7FEFF 		bl	lwip_htons
 3265              	.LVL471:
 3266 01f0 ADF81E00 		strh	r0, [sp, #30]	@ movhi
 3267 01f4 2B68     		ldr	r3, [r5]
 3268 01f6 0893     		str	r3, [sp, #32]
 3269 01f8 0023     		movs	r3, #0
 3270 01fa 0993     		str	r3, [sp, #36]
 3271 01fc 0A93     		str	r3, [sp, #40]
 881:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             *fromlen = saddr.sa.sa_len;
 3272              		.loc 1 881 0
 3273 01fe 179B     		ldr	r3, [sp, #92]
 3274 0200 1A68     		ldr	r2, [r3]
 3275 0202 9DF81C30 		ldrb	r3, [sp, #28]	@ zero_extendqisi2
 3276 0206 9A42     		cmp	r2, r3
 3277 0208 80D9     		bls	.L329
 882:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
 3278              		.loc 1 882 0
 3279 020a 179A     		ldr	r2, [sp, #92]
 3280 020c 1360     		str	r3, [r2]
 3281 020e 7DE7     		b	.L329
 3282              	.LVL472:
 3283              	.L349:
 3284              	.LBE36:
 894:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock->lastdata = buf;
 3285              		.loc 1 894 0 discriminator 1
 3286 0210 029B     		ldr	r3, [sp, #8]
 3287 0212 E41A     		subs	r4, r4, r3
 3288              	.LVL473:
 3289 0214 002C     		cmp	r4, #0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 113


 3290 0216 88DD     		ble	.L331
 895:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock->lastoffset += copylen;
 3291              		.loc 1 895 0
 3292 0218 0B9B     		ldr	r3, [sp, #44]
 3293 021a 7360     		str	r3, [r6, #4]
 896:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recvfrom: lastdata now netbuf=%p\n", buf));
 3294              		.loc 1 896 0
 3295 021c 3389     		ldrh	r3, [r6, #8]
 3296 021e 1F44     		add	r7, r7, r3
 3297              	.LVL474:
 3298 0220 3781     		strh	r7, [r6, #8]	@ movhi
 3299 0222 8FE7     		b	.L330
 3300              	.LVL475:
 3301              	.L350:
 903:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
 3302              		.loc 1 903 0
 3303 0224 0B98     		ldr	r0, [sp, #44]
 3304 0226 FFF7FEFF 		bl	pbuf_free
 3305              	.LVL476:
 3306 022a 89E7     		b	.L333
 3307              	.LVL477:
 3308              	.L351:
 3309              	.LBB37:
 912:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return off;
 3310              		.loc 1 912 0
 3311 022c 0023     		movs	r3, #0
 3312 022e 3374     		strb	r3, [r6, #16]
 3313              	.LVL478:
 3314              	.L307:
 3315              	.LBE37:
 914:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 3316              		.loc 1 914 0
 3317 0230 5046     		mov	r0, r10
 3318 0232 0DB0     		add	sp, sp, #52
 3319              	.LCFI33:
 3320              		.cfi_remember_state
 3321              		.cfi_def_cfa_offset 36
 3322              		@ sp needed
 3323 0234 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 3324              	.LVL479:
 3325              	.L335:
 3326              	.LCFI34:
 3327              		.cfi_restore_state
 755:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 3328              		.loc 1 755 0
 3329 0238 4FF0FF3A 		mov	r10, #-1
 3330 023c F8E7     		b	.L307
 3331              	.LVL480:
 3332              	.L336:
 804:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 3333              		.loc 1 804 0
 3334 023e 4FF0FF3A 		mov	r10, #-1
 3335              	.LVL481:
 3336 0242 F5E7     		b	.L307
 3337              	.L356:
 3338              		.align	2
 3339              	.L355:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 114


 3340 0244 00000000 		.word	errno
 3341 0248 00000000 		.word	.LC0
 3342 024c 00000000 		.word	.LC11
 3343 0250 3C000000 		.word	.LC2
 3344 0254 0C000000 		.word	.LC12
 3345              		.cfi_endproc
 3346              	.LFE168:
 3348              		.section	.text.lwip_read,"ax",%progbits
 3349              		.align	1
 3350              		.global	lwip_read
 3351              		.syntax unified
 3352              		.thumb
 3353              		.thumb_func
 3354              		.fpu fpv5-sp-d16
 3356              	lwip_read:
 3357              	.LFB169:
 918:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return lwip_recvfrom(s, mem, len, 0, NULL, NULL);
 3358              		.loc 1 918 0
 3359              		.cfi_startproc
 3360              		@ args = 0, pretend = 0, frame = 0
 3361              		@ frame_needed = 0, uses_anonymous_args = 0
 3362              	.LVL482:
 3363 0000 00B5     		push	{lr}
 3364              	.LCFI35:
 3365              		.cfi_def_cfa_offset 4
 3366              		.cfi_offset 14, -4
 3367 0002 83B0     		sub	sp, sp, #12
 3368              	.LCFI36:
 3369              		.cfi_def_cfa_offset 16
 919:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 3370              		.loc 1 919 0
 3371 0004 0023     		movs	r3, #0
 3372 0006 0193     		str	r3, [sp, #4]
 3373 0008 0093     		str	r3, [sp]
 3374 000a FFF7FEFF 		bl	lwip_recvfrom
 3375              	.LVL483:
 920:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 3376              		.loc 1 920 0
 3377 000e 03B0     		add	sp, sp, #12
 3378              	.LCFI37:
 3379              		.cfi_def_cfa_offset 4
 3380              		@ sp needed
 3381 0010 5DF804FB 		ldr	pc, [sp], #4
 3382              		.cfi_endproc
 3383              	.LFE169:
 3385              		.section	.text.lwip_recv,"ax",%progbits
 3386              		.align	1
 3387              		.global	lwip_recv
 3388              		.syntax unified
 3389              		.thumb
 3390              		.thumb_func
 3391              		.fpu fpv5-sp-d16
 3393              	lwip_recv:
 3394              	.LFB170:
 924:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return lwip_recvfrom(s, mem, len, flags, NULL, NULL);
 3395              		.loc 1 924 0
 3396              		.cfi_startproc
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 115


 3397              		@ args = 0, pretend = 0, frame = 0
 3398              		@ frame_needed = 0, uses_anonymous_args = 0
 3399              	.LVL484:
 3400 0000 10B5     		push	{r4, lr}
 3401              	.LCFI38:
 3402              		.cfi_def_cfa_offset 8
 3403              		.cfi_offset 4, -8
 3404              		.cfi_offset 14, -4
 3405 0002 82B0     		sub	sp, sp, #8
 3406              	.LCFI39:
 3407              		.cfi_def_cfa_offset 16
 925:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 3408              		.loc 1 925 0
 3409 0004 0024     		movs	r4, #0
 3410 0006 0194     		str	r4, [sp, #4]
 3411 0008 0094     		str	r4, [sp]
 3412 000a FFF7FEFF 		bl	lwip_recvfrom
 3413              	.LVL485:
 926:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 3414              		.loc 1 926 0
 3415 000e 02B0     		add	sp, sp, #8
 3416              	.LCFI40:
 3417              		.cfi_def_cfa_offset 8
 3418              		@ sp needed
 3419 0010 10BD     		pop	{r4, pc}
 3420              		.cfi_endproc
 3421              	.LFE170:
 3423              		.section	.text.lwip_sendmsg,"ax",%progbits
 3424              		.align	1
 3425              		.global	lwip_sendmsg
 3426              		.syntax unified
 3427              		.thumb
 3428              		.thumb_func
 3429              		.fpu fpv5-sp-d16
 3431              	lwip_sendmsg:
 3432              	.LFB172:
 966:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 3433              		.loc 1 966 0
 3434              		.cfi_startproc
 3435              		@ args = 0, pretend = 0, frame = 8
 3436              		@ frame_needed = 0, uses_anonymous_args = 0
 3437              	.LVL486:
 3438 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 3439              	.LCFI41:
 3440              		.cfi_def_cfa_offset 32
 3441              		.cfi_offset 4, -32
 3442              		.cfi_offset 5, -28
 3443              		.cfi_offset 6, -24
 3444              		.cfi_offset 7, -20
 3445              		.cfi_offset 8, -16
 3446              		.cfi_offset 9, -12
 3447              		.cfi_offset 10, -8
 3448              		.cfi_offset 14, -4
 3449 0004 84B0     		sub	sp, sp, #16
 3450              	.LCFI42:
 3451              		.cfi_def_cfa_offset 48
 3452 0006 0C46     		mov	r4, r1
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 116


 3453 0008 1546     		mov	r5, r2
 3454              	.LVL487:
 976:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 3455              		.loc 1 976 0
 3456 000a FFF7FEFF 		bl	get_socket
 3457              	.LVL488:
 977:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 3458              		.loc 1 977 0
 3459 000e 0028     		cmp	r0, #0
 3460 0010 00F00C81 		beq	.L386
 3461 0014 0746     		mov	r7, r0
 981:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              sock_set_errno(sock, err_to_errno(ERR_ARG)); return -1;);
 3462              		.loc 1 981 0
 3463 0016 D4B1     		cbz	r4, .L398
 987:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              sock_set_errno(sock, err_to_errno(ERR_ARG)); return -1;);
 3464              		.loc 1 987 0
 3465 0018 A368     		ldr	r3, [r4, #8]
 3466 001a 0BB1     		cbz	r3, .L364
 987:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              sock_set_errno(sock, err_to_errno(ERR_ARG)); return -1;);
 3467              		.loc 1 987 0 is_stmt 0 discriminator 2
 3468 001c E368     		ldr	r3, [r4, #12]
 3469 001e 53BB     		cbnz	r3, .L365
 3470              	.L364:
 987:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              sock_set_errno(sock, err_to_errno(ERR_ARG)); return -1;);
 3471              		.loc 1 987 0 discriminator 3
 3472 0020 8A4B     		ldr	r3, .L405
 3473 0022 4FF47772 		mov	r2, #988
 3474 0026 8A49     		ldr	r1, .L405+4
 3475 0028 8A48     		ldr	r0, .L405+8
 3476              	.LVL489:
 3477 002a FFF7FEFF 		bl	printf
 3478              	.LVL490:
 3479              	.LBB38:
 3480 002e 6FF00F00 		mvn	r0, #15
 3481 0032 FFF7FEFF 		bl	err_to_errno
 3482              	.LVL491:
 3483 0036 3874     		strb	r0, [r7, #16]
 3484 0038 0028     		cmp	r0, #0
 3485 003a 00F0FD80 		beq	.L388
 987:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              sock_set_errno(sock, err_to_errno(ERR_ARG)); return -1;);
 3486              		.loc 1 987 0 discriminator 4
 3487 003e 864B     		ldr	r3, .L405+12
 3488 0040 1860     		str	r0, [r3]
 3489              	.LBE38:
 3490 0042 4FF0FF36 		mov	r6, #-1
 3491              	.LVL492:
 3492              	.L361:
1119:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 3493              		.loc 1 1119 0 is_stmt 1
 3494 0046 3046     		mov	r0, r6
 3495 0048 04B0     		add	sp, sp, #16
 3496              	.LCFI43:
 3497              		.cfi_remember_state
 3498              		.cfi_def_cfa_offset 32
 3499              		@ sp needed
 3500 004a BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 3501              	.LVL493:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 117


 3502              	.L398:
 3503              	.LCFI44:
 3504              		.cfi_restore_state
 981:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              sock_set_errno(sock, err_to_errno(ERR_ARG)); return -1;);
 3505              		.loc 1 981 0 discriminator 1
 3506 004e 7F4B     		ldr	r3, .L405
 3507 0050 40F2D632 		movw	r2, #982
 3508 0054 8149     		ldr	r1, .L405+16
 3509 0056 7F48     		ldr	r0, .L405+8
 3510              	.LVL494:
 3511 0058 FFF7FEFF 		bl	printf
 3512              	.LVL495:
 3513              	.LBB39:
 3514 005c 6FF00F00 		mvn	r0, #15
 3515 0060 FFF7FEFF 		bl	err_to_errno
 3516              	.LVL496:
 3517 0064 3874     		strb	r0, [r7, #16]
 3518 0066 0028     		cmp	r0, #0
 3519 0068 00F0E380 		beq	.L387
 981:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              sock_set_errno(sock, err_to_errno(ERR_ARG)); return -1;);
 3520              		.loc 1 981 0 is_stmt 0 discriminator 2
 3521 006c 7A4B     		ldr	r3, .L405+12
 3522 006e 1860     		str	r0, [r3]
 3523              	.LBE39:
 3524 0070 4FF0FF36 		mov	r6, #-1
 3525 0074 E7E7     		b	.L361
 3526              	.LVL497:
 3527              	.L365:
 990:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCP
 3528              		.loc 1 990 0 is_stmt 1
 3529 0076 0368     		ldr	r3, [r0]
 3530 0078 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3531 007a 03F0F003 		and	r3, r3, #240
 3532 007e 102B     		cmp	r3, #16
 3533 0080 19D0     		beq	.L399
 3534              	.LBB40:
1032:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                IS_SOCK_ADDR_LEN_VALID(msg->msg_namelen)) ,
 3535              		.loc 1 1032 0
 3536 0082 2368     		ldr	r3, [r4]
 3537 0084 002B     		cmp	r3, #0
 3538 0086 61D0     		beq	.L400
 3539              	.L373:
1032:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                IS_SOCK_ADDR_LEN_VALID(msg->msg_namelen)) ,
 3540              		.loc 1 1032 0 is_stmt 0 discriminator 3
 3541 0088 6368     		ldr	r3, [r4, #4]
 3542 008a 102B     		cmp	r3, #16
 3543 008c 61D0     		beq	.L374
1032:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                IS_SOCK_ADDR_LEN_VALID(msg->msg_namelen)) ,
 3544              		.loc 1 1032 0 discriminator 4
 3545 008e 6F4B     		ldr	r3, .L405
 3546 0090 40F20A42 		movw	r2, #1034
 3547 0094 7249     		ldr	r1, .L405+20
 3548 0096 6F48     		ldr	r0, .L405+8
 3549              	.LVL498:
 3550 0098 FFF7FEFF 		bl	printf
 3551              	.LVL499:
 3552              	.LBB41:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 118


 3553 009c 6FF00F00 		mvn	r0, #15
 3554 00a0 FFF7FEFF 		bl	err_to_errno
 3555              	.LVL500:
 3556 00a4 3874     		strb	r0, [r7, #16]
 3557 00a6 0028     		cmp	r0, #0
 3558 00a8 00F0C980 		beq	.L392
1032:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                IS_SOCK_ADDR_LEN_VALID(msg->msg_namelen)) ,
 3559              		.loc 1 1032 0 discriminator 5
 3560 00ac 6A4B     		ldr	r3, .L405+12
 3561 00ae 1860     		str	r0, [r3]
 3562              	.LBE41:
 3563 00b0 4FF0FF36 		mov	r6, #-1
 3564 00b4 C7E7     		b	.L361
 3565              	.LVL501:
 3566              	.L399:
 3567              	.LBE40:
 993:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ((flags & MSG_DONTWAIT) ? NETCONN_DONTBLOCK : 0);
 3568              		.loc 1 993 0 is_stmt 1
 3569 00b6 15F0100F 		tst	r5, #16
 3570 00ba 34D0     		beq	.L389
 3571 00bc 4FF0030A 		mov	r10, #3
 3572              	.L367:
 993:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ((flags & MSG_DONTWAIT) ? NETCONN_DONTBLOCK : 0);
 3573              		.loc 1 993 0 is_stmt 0 discriminator 4
 3574 00c0 15F0080F 		tst	r5, #8
 3575 00c4 32D0     		beq	.L390
 993:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ((flags & MSG_DONTWAIT) ? NETCONN_DONTBLOCK : 0);
 3576              		.loc 1 993 0
 3577 00c6 0423     		movs	r3, #4
 3578              	.L368:
 992:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ((flags & MSG_MORE)     ? NETCONN_MORE      : 0) |
 3579              		.loc 1 992 0 is_stmt 1 discriminator 8
 3580 00c8 4AEA030A 		orr	r10, r10, r3
 3581              	.LVL502:
 974:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 3582              		.loc 1 974 0 discriminator 8
 3583 00cc 0025     		movs	r5, #0
 3584              	.LVL503:
 973:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err = ERR_OK;
 3585              		.loc 1 973 0 discriminator 8
 3586 00ce 2E46     		mov	r6, r5
 996:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       u8_t apiflags = write_flags;
 3587              		.loc 1 996 0 discriminator 8
 3588 00d0 2B46     		mov	r3, r5
 3589              	.LVL504:
 3590              	.L369:
 996:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       u8_t apiflags = write_flags;
 3591              		.loc 1 996 0 is_stmt 0 discriminator 1
 3592 00d2 E268     		ldr	r2, [r4, #12]
 3593 00d4 9342     		cmp	r3, r2
 3594 00d6 1DDA     		bge	.L371
 3595              	.LVL505:
 3596              	.LBB48:
 998:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         apiflags |= NETCONN_MORE;
 3597              		.loc 1 998 0 is_stmt 1
 3598 00d8 03F10109 		add	r9, r3, #1
1001:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = netconn_write_partly(sock->conn, msg->msg_iov[i].iov_base, msg->msg_iov[i].iov_len, wri
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 119


 3599              		.loc 1 1001 0
 3600 00dc 04AD     		add	r5, sp, #16
 3601              	.LVL506:
 3602 00de 0022     		movs	r2, #0
 3603 00e0 45F8042D 		str	r2, [r5, #-4]!
1002:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (err == ERR_OK) {
 3604              		.loc 1 1002 0
 3605 00e4 3868     		ldr	r0, [r7]
 3606 00e6 A268     		ldr	r2, [r4, #8]
 3607 00e8 4FEAC308 		lsl	r8, r3, #3
 3608 00ec 02EB080E 		add	lr, r2, r8
 3609 00f0 52F83310 		ldr	r1, [r2, r3, lsl #3]
 3610 00f4 DEF80420 		ldr	r2, [lr, #4]
 3611 00f8 0095     		str	r5, [sp]
 3612 00fa 5346     		mov	r3, r10
 3613              	.LVL507:
 3614 00fc FFF7FEFF 		bl	netconn_write_partly
 3615              	.LVL508:
1003:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         size += written;
 3616              		.loc 1 1003 0
 3617 0100 0546     		mov	r5, r0
 3618 0102 A8B9     		cbnz	r0, .L370
1004:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* check that the entire IO vector was accepected, if not return a partial write */
 3619              		.loc 1 1004 0
 3620 0104 039A     		ldr	r2, [sp, #12]
 3621 0106 1644     		add	r6, r6, r2
 3622              	.LVL509:
1006:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
 3623              		.loc 1 1006 0
 3624 0108 A368     		ldr	r3, [r4, #8]
 3625 010a 4344     		add	r3, r3, r8
 3626 010c 5968     		ldr	r1, [r3, #4]
 3627              	.LBE48:
 996:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       u8_t apiflags = write_flags;
 3628              		.loc 1 996 0
 3629 010e 4B46     		mov	r3, r9
 3630              	.LBB49:
1006:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
 3631              		.loc 1 1006 0
 3632 0110 8A42     		cmp	r2, r1
 3633 0112 DED0     		beq	.L369
 3634              	.LVL510:
 3635              	.L371:
 3636              	.LBE49:
 3637              	.LBB50:
1019:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return size;
 3638              		.loc 1 1019 0
 3639 0114 2846     		mov	r0, r5
 3640 0116 FFF7FEFF 		bl	err_to_errno
 3641              	.LVL511:
 3642 011a 3874     		strb	r0, [r7, #16]
 3643 011c 0028     		cmp	r0, #0
 3644 011e 92D0     		beq	.L361
1019:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return size;
 3645              		.loc 1 1019 0 is_stmt 0 discriminator 1
 3646 0120 4D4B     		ldr	r3, .L405+12
 3647 0122 1860     		str	r0, [r3]
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 120


 3648 0124 8FE7     		b	.L361
 3649              	.LVL512:
 3650              	.L389:
 3651              	.LBE50:
 993:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ((flags & MSG_DONTWAIT) ? NETCONN_DONTBLOCK : 0);
 3652              		.loc 1 993 0 is_stmt 1
 3653 0126 4FF0010A 		mov	r10, #1
 3654 012a C9E7     		b	.L367
 3655              	.L390:
 3656 012c 0023     		movs	r3, #0
 3657 012e CBE7     		b	.L368
 3658              	.LVL513:
 3659              	.L370:
 3660              	.LBB51:
1010:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         err = ERR_OK;
 3661              		.loc 1 1010 0
 3662 0130 002E     		cmp	r6, #0
 3663 0132 D4BF     		ite	le
 3664 0134 0023     		movle	r3, #0
 3665 0136 0123     		movgt	r3, #1
 3666 0138 10F1070F 		cmn	r0, #7
 3667 013c 18BF     		it	ne
 3668 013e 0023     		movne	r3, #0
 3669 0140 0BB1     		cbz	r3, .L391
1011:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* let ERR_WOULDBLOCK persist on the netconn since we are returning ERR_OK */
 3670              		.loc 1 1011 0
 3671 0142 0025     		movs	r5, #0
 3672 0144 E6E7     		b	.L371
 3673              	.L391:
1015:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         break;
 3674              		.loc 1 1015 0
 3675 0146 4FF0FF36 		mov	r6, #-1
 3676              	.LVL514:
 3677 014a E3E7     		b	.L371
 3678              	.LVL515:
 3679              	.L400:
 3680              	.LBE51:
 3681              	.LBB52:
1032:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                IS_SOCK_ADDR_LEN_VALID(msg->msg_namelen)) ,
 3682              		.loc 1 1032 0 discriminator 2
 3683 014c 6368     		ldr	r3, [r4, #4]
 3684 014e 002B     		cmp	r3, #0
 3685 0150 9AD1     		bne	.L373
 3686              	.L374:
1037:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (!chain_buf) {
 3687              		.loc 1 1037 0
 3688 0152 FFF7FEFF 		bl	netbuf_new
 3689              	.LVL516:
1038:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, err_to_errno(ERR_MEM));
 3690              		.loc 1 1038 0
 3691 0156 8046     		mov	r8, r0
 3692 0158 58B1     		cbz	r0, .L401
1042:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       u16_t remote_port;
 3693              		.loc 1 1042 0
 3694 015a 2368     		ldr	r3, [r4]
 3695 015c 3BB1     		cbz	r3, .L376
 3696              	.LBB42:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 121


1044:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       netbuf_fromport(chain_buf) = remote_port;
 3697              		.loc 1 1044 0
 3698 015e 5B68     		ldr	r3, [r3, #4]
 3699 0160 8360     		str	r3, [r0, #8]
 3700 0162 2368     		ldr	r3, [r4]
 3701 0164 5888     		ldrh	r0, [r3, #2]
 3702              	.LVL517:
 3703 0166 FFF7FEFF 		bl	lwip_htons
 3704              	.LVL518:
1045:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 3705              		.loc 1 1045 0
 3706 016a A8F80C00 		strh	r0, [r8, #12]	@ movhi
 3707              	.LVL519:
 3708              	.L376:
 3709              	.LBE42:
 3710              	.LBE52:
 3711              	.LBB53:
1015:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         break;
 3712              		.loc 1 1015 0 discriminator 1
 3713 016e 0026     		movs	r6, #0
 3714 0170 17E0     		b	.L377
 3715              	.LVL520:
 3716              	.L401:
 3717              	.LBE53:
 3718              	.LBB54:
 3719              	.LBB43:
1039:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
 3720              		.loc 1 1039 0
 3721 0172 4FF0FF30 		mov	r0, #-1
 3722              	.LVL521:
 3723 0176 FFF7FEFF 		bl	err_to_errno
 3724              	.LVL522:
 3725 017a 3874     		strb	r0, [r7, #16]
 3726 017c 0028     		cmp	r0, #0
 3727 017e 61D0     		beq	.L393
1039:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
 3728              		.loc 1 1039 0 is_stmt 0 discriminator 1
 3729 0180 354B     		ldr	r3, .L405+12
 3730 0182 1860     		str	r0, [r3]
 3731              	.LBE43:
1040:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 3732              		.loc 1 1040 0 is_stmt 1 discriminator 1
 3733 0184 4FF0FF36 		mov	r6, #-1
 3734 0188 5DE7     		b	.L361
 3735              	.LVL523:
 3736              	.L403:
 3737              	.LBB44:
1080:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       p->len = p->tot_len = (u16_t)msg->msg_iov[i].iov_len;
 3738              		.loc 1 1080 0 discriminator 1
 3739 018a 304B     		ldr	r3, .L405
 3740 018c 4FF48762 		mov	r2, #1080
 3741 0190 3449     		ldr	r1, .L405+24
 3742 0192 3048     		ldr	r0, .L405+8
 3743              	.LVL524:
 3744 0194 FFF7FEFF 		bl	printf
 3745              	.LVL525:
 3746 0198 19E0     		b	.L379
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 122


 3747              	.L380:
1087:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 3748              		.loc 1 1087 0
 3749 019a 2946     		mov	r1, r5
 3750 019c FFF7FEFF 		bl	pbuf_cat
 3751              	.LVL526:
 3752              	.L381:
 3753              	.LBE44:
1073:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       struct pbuf *p = pbuf_alloc(PBUF_TRANSPORT, 0, PBUF_REF);
 3754              		.loc 1 1073 0 discriminator 2
 3755 01a0 0136     		adds	r6, r6, #1
 3756              	.LVL527:
 3757              	.L377:
1073:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       struct pbuf *p = pbuf_alloc(PBUF_TRANSPORT, 0, PBUF_REF);
 3758              		.loc 1 1073 0 is_stmt 0 discriminator 1
 3759 01a2 E368     		ldr	r3, [r4, #12]
 3760 01a4 9E42     		cmp	r6, r3
 3761 01a6 20DA     		bge	.L402
 3762              	.LBB45:
1074:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (p == NULL) {
 3763              		.loc 1 1074 0 is_stmt 1
 3764 01a8 0222     		movs	r2, #2
 3765 01aa 0021     		movs	r1, #0
 3766 01ac 0846     		mov	r0, r1
 3767 01ae FFF7FEFF 		bl	pbuf_alloc
 3768              	.LVL528:
1075:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         err = ERR_MEM; /* let netbuf_delete() cleanup chain_buf */
 3769              		.loc 1 1075 0
 3770 01b2 0546     		mov	r5, r0
 3771 01b4 78B3     		cbz	r0, .L394
1079:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_ASSERT("iov_len < u16_t", msg->msg_iov[i].iov_len <= 0xFFFF);
 3772              		.loc 1 1079 0
 3773 01b6 A368     		ldr	r3, [r4, #8]
 3774 01b8 4FEAC609 		lsl	r9, r6, #3
 3775 01bc 53F83630 		ldr	r3, [r3, r6, lsl #3]
 3776 01c0 4360     		str	r3, [r0, #4]
1080:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       p->len = p->tot_len = (u16_t)msg->msg_iov[i].iov_len;
 3777              		.loc 1 1080 0
 3778 01c2 A368     		ldr	r3, [r4, #8]
 3779 01c4 4B44     		add	r3, r3, r9
 3780 01c6 5B68     		ldr	r3, [r3, #4]
 3781 01c8 B3F5803F 		cmp	r3, #65536
 3782 01cc DDD2     		bcs	.L403
 3783              	.LVL529:
 3784              	.L379:
1081:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* netbuf empty, add new pbuf */
 3785              		.loc 1 1081 0
 3786 01ce A368     		ldr	r3, [r4, #8]
 3787 01d0 4B44     		add	r3, r3, r9
 3788 01d2 9B88     		ldrh	r3, [r3, #4]
 3789 01d4 2B81     		strh	r3, [r5, #8]	@ movhi
 3790 01d6 6B81     		strh	r3, [r5, #10]	@ movhi
1083:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         chain_buf->p = chain_buf->ptr = p;
 3791              		.loc 1 1083 0
 3792 01d8 D8F80000 		ldr	r0, [r8]
 3793 01dc 0028     		cmp	r0, #0
 3794 01de DCD1     		bne	.L380
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 123


1084:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* add pbuf to existing pbuf chain */
 3795              		.loc 1 1084 0
 3796 01e0 C8F80450 		str	r5, [r8, #4]
 3797 01e4 C8F80050 		str	r5, [r8]
 3798 01e8 DAE7     		b	.L381
 3799              	.LVL530:
 3800              	.L402:
 3801              	.LBE45:
 3802              	.LBE54:
 974:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 3803              		.loc 1 974 0
 3804 01ea 0024     		movs	r4, #0
 3805              	.LVL531:
 3806              	.L378:
 3807              	.LBB55:
1091:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       size = netbuf_len(chain_buf);
 3808              		.loc 1 1091 0
 3809 01ec B4B9     		cbnz	r4, .L395
1092:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 3810              		.loc 1 1092 0
 3811 01ee D8F80030 		ldr	r3, [r8]
 3812 01f2 1E89     		ldrh	r6, [r3, #8]
 3813              	.LVL532:
 3814              	.L383:
1096:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV4 && LWIP_IPV6
 3815              		.loc 1 1096 0
 3816 01f4 A4B1     		cbz	r4, .L404
 3817              	.L384:
1110:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 3818              		.loc 1 1110 0
 3819 01f6 4046     		mov	r0, r8
 3820 01f8 FFF7FEFF 		bl	netbuf_delete
 3821              	.LVL533:
 3822              	.LBB46:
1112:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return (err == ERR_OK ? size : -1);
 3823              		.loc 1 1112 0
 3824 01fc 2046     		mov	r0, r4
 3825 01fe FFF7FEFF 		bl	err_to_errno
 3826              	.LVL534:
 3827 0202 3874     		strb	r0, [r7, #16]
 3828 0204 08B1     		cbz	r0, .L385
1112:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return (err == ERR_OK ? size : -1);
 3829              		.loc 1 1112 0 is_stmt 0 discriminator 1
 3830 0206 144B     		ldr	r3, .L405+12
 3831 0208 1860     		str	r0, [r3]
 3832              	.L385:
 3833              	.LBE46:
1113:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 3834              		.loc 1 1113 0 is_stmt 1
 3835 020a 002C     		cmp	r4, #0
 3836 020c 3FF41BAF 		beq	.L361
 3837 0210 4FF0FF36 		mov	r6, #-1
 3838              	.LVL535:
 3839 0214 17E7     		b	.L361
 3840              	.LVL536:
 3841              	.L394:
 3842              	.LBB47:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 124


1076:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         break;
 3843              		.loc 1 1076 0
 3844 0216 4FF0FF34 		mov	r4, #-1
 3845              	.LVL537:
 3846 021a E7E7     		b	.L378
 3847              	.LVL538:
 3848              	.L395:
 3849              	.LBE47:
 3850              	.LBE55:
 973:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err = ERR_OK;
 3851              		.loc 1 973 0
 3852 021c 0026     		movs	r6, #0
 3853              	.LVL539:
 3854 021e E9E7     		b	.L383
 3855              	.LVL540:
 3856              	.L404:
 3857              	.LBB56:
1106:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 3858              		.loc 1 1106 0
 3859 0220 4146     		mov	r1, r8
 3860 0222 3868     		ldr	r0, [r7]
 3861 0224 FFF7FEFF 		bl	netconn_send
 3862              	.LVL541:
 3863 0228 0446     		mov	r4, r0
 3864              	.LVL542:
 3865 022a E4E7     		b	.L384
 3866              	.LVL543:
 3867              	.L386:
 3868              	.LBE56:
 978:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 3869              		.loc 1 978 0
 3870 022c 4FF0FF36 		mov	r6, #-1
 3871 0230 09E7     		b	.L361
 3872              	.LVL544:
 3873              	.L387:
 981:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              sock_set_errno(sock, err_to_errno(ERR_ARG)); return -1;);
 3874              		.loc 1 981 0
 3875 0232 4FF0FF36 		mov	r6, #-1
 3876 0236 06E7     		b	.L361
 3877              	.LVL545:
 3878              	.L388:
 987:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              sock_set_errno(sock, err_to_errno(ERR_ARG)); return -1;);
 3879              		.loc 1 987 0
 3880 0238 4FF0FF36 		mov	r6, #-1
 3881 023c 03E7     		b	.L361
 3882              	.LVL546:
 3883              	.L392:
 3884              	.LBB57:
1032:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                IS_SOCK_ADDR_LEN_VALID(msg->msg_namelen)) ,
 3885              		.loc 1 1032 0
 3886 023e 4FF0FF36 		mov	r6, #-1
 3887 0242 00E7     		b	.L361
 3888              	.LVL547:
 3889              	.L393:
1040:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 3890              		.loc 1 1040 0
 3891 0244 4FF0FF36 		mov	r6, #-1
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 125


 3892 0248 FDE6     		b	.L361
 3893              	.L406:
 3894 024a 00BF     		.align	2
 3895              	.L405:
 3896 024c 00000000 		.word	.LC0
 3897 0250 20000000 		.word	.LC14
 3898 0254 3C000000 		.word	.LC2
 3899 0258 00000000 		.word	errno
 3900 025c 00000000 		.word	.LC13
 3901 0260 44000000 		.word	.LC15
 3902 0264 68000000 		.word	.LC16
 3903              	.LBE57:
 3904              		.cfi_endproc
 3905              	.LFE172:
 3907              		.section	.text.lwip_sendto,"ax",%progbits
 3908              		.align	1
 3909              		.global	lwip_sendto
 3910              		.syntax unified
 3911              		.thumb
 3912              		.thumb_func
 3913              		.fpu fpv5-sp-d16
 3915              	lwip_sendto:
 3916              	.LFB173:
1124:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 3917              		.loc 1 1124 0
 3918              		.cfi_startproc
 3919              		@ args = 8, pretend = 0, frame = 16
 3920              		@ frame_needed = 0, uses_anonymous_args = 0
 3921              	.LVL548:
 3922 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 3923              	.LCFI45:
 3924              		.cfi_def_cfa_offset 32
 3925              		.cfi_offset 4, -32
 3926              		.cfi_offset 5, -28
 3927              		.cfi_offset 6, -24
 3928              		.cfi_offset 7, -20
 3929              		.cfi_offset 8, -16
 3930              		.cfi_offset 9, -12
 3931              		.cfi_offset 10, -8
 3932              		.cfi_offset 14, -4
 3933 0004 84B0     		sub	sp, sp, #16
 3934              	.LCFI46:
 3935              		.cfi_def_cfa_offset 48
 3936 0006 8146     		mov	r9, r0
 3937 0008 8846     		mov	r8, r1
 3938 000a 1446     		mov	r4, r2
 3939 000c 9A46     		mov	r10, r3
 3940 000e 0C9D     		ldr	r5, [sp, #48]
 3941 0010 0D9F     		ldr	r7, [sp, #52]
1131:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 3942              		.loc 1 1131 0
 3943 0012 FFF7FEFF 		bl	get_socket
 3944              	.LVL549:
1132:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 3945              		.loc 1 1132 0
 3946 0016 0028     		cmp	r0, #0
 3947 0018 63D0     		beq	.L417
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 126


 3948 001a 0646     		mov	r6, r0
1136:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCP
 3949              		.loc 1 1136 0
 3950 001c 0368     		ldr	r3, [r0]
 3951 001e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3952 0020 03F0F003 		and	r3, r3, #240
 3953 0024 102B     		cmp	r3, #16
 3954 0026 1DD0     		beq	.L421
1147:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   short_size = (u16_t)size;
 3955              		.loc 1 1147 0
 3956 0028 B4F5803F 		cmp	r4, #65536
 3957 002c 21D2     		bcs	.L422
 3958              	.LVL550:
 3959              	.L410:
1148:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ERROR("lwip_sendto: invalid address", (((to == NULL) && (tolen == 0)) ||
 3960              		.loc 1 1148 0
 3961 002e 1FFA84F9 		uxth	r9, r4
 3962              	.LVL551:
1149:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              (IS_SOCK_ADDR_LEN_VALID(tolen) &&
 3963              		.loc 1 1149 0
 3964 0032 002F     		cmp	r7, #0
 3965 0034 08BF     		it	eq
 3966 0036 002D     		cmpeq	r5, #0
 3967 0038 29D0     		beq	.L411
1149:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              (IS_SOCK_ADDR_LEN_VALID(tolen) &&
 3968              		.loc 1 1149 0 is_stmt 0 discriminator 1
 3969 003a 102F     		cmp	r7, #16
 3970 003c 21D0     		beq	.L423
 3971              	.L412:
1149:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              (IS_SOCK_ADDR_LEN_VALID(tolen) &&
 3972              		.loc 1 1149 0 discriminator 6
 3973 003e 2D4B     		ldr	r3, .L425
 3974 0040 4FF49062 		mov	r2, #1152
 3975 0044 2C49     		ldr	r1, .L425+4
 3976 0046 2D48     		ldr	r0, .L425+8
 3977 0048 FFF7FEFF 		bl	printf
 3978              	.LVL552:
 3979              	.LBB58:
 3980 004c 6FF00F00 		mvn	r0, #15
 3981 0050 FFF7FEFF 		bl	err_to_errno
 3982              	.LVL553:
 3983 0054 3074     		strb	r0, [r6, #16]
 3984 0056 0028     		cmp	r0, #0
 3985 0058 46D0     		beq	.L418
1149:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              (IS_SOCK_ADDR_LEN_VALID(tolen) &&
 3986              		.loc 1 1149 0 discriminator 7
 3987 005a 294B     		ldr	r3, .L425+12
 3988 005c 1860     		str	r0, [r3]
 3989              	.LBE58:
 3990 005e 4FF0FF30 		mov	r0, #-1
 3991              	.LVL554:
 3992 0062 32E0     		b	.L407
 3993              	.LVL555:
 3994              	.L421:
1138:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_TCP */
 3995              		.loc 1 1138 0 is_stmt 1
 3996 0064 5346     		mov	r3, r10
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 127


 3997 0066 2246     		mov	r2, r4
 3998 0068 4146     		mov	r1, r8
 3999 006a 4846     		mov	r0, r9
 4000              	.LVL556:
 4001 006c FFF7FEFF 		bl	lwip_send
 4002              	.LVL557:
 4003 0070 2BE0     		b	.L407
 4004              	.LVL558:
 4005              	.L422:
1147:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   short_size = (u16_t)size;
 4006              		.loc 1 1147 0 discriminator 1
 4007 0072 204B     		ldr	r3, .L425
 4008 0074 40F27B42 		movw	r2, #1147
 4009 0078 2249     		ldr	r1, .L425+16
 4010 007a 2048     		ldr	r0, .L425+8
 4011              	.LVL559:
 4012 007c FFF7FEFF 		bl	printf
 4013              	.LVL560:
 4014 0080 D5E7     		b	.L410
 4015              	.LVL561:
 4016              	.L423:
1149:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              (IS_SOCK_ADDR_LEN_VALID(tolen) &&
 4017              		.loc 1 1149 0 discriminator 3
 4018 0082 6B78     		ldrb	r3, [r5, #1]	@ zero_extendqisi2
 4019 0084 022B     		cmp	r3, #2
 4020 0086 DAD1     		bne	.L412
1149:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              (IS_SOCK_ADDR_LEN_VALID(tolen) &&
 4021              		.loc 1 1149 0 is_stmt 0 discriminator 5
 4022 0088 15F0030F 		tst	r5, #3
 4023 008c D7D1     		bne	.L412
 4024              	.L411:
1156:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_CHECKSUM_ON_COPY
 4025              		.loc 1 1156 0 is_stmt 1
 4026 008e 0023     		movs	r3, #0
 4027 0090 0193     		str	r3, [sp, #4]
 4028 0092 0093     		str	r3, [sp]
1160:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SOCKADDR_TO_IPADDR_PORT(to, &buf.addr, remote_port);
 4029              		.loc 1 1160 0
 4030 0094 E5B1     		cbz	r5, .L413
1161:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
 4031              		.loc 1 1161 0
 4032 0096 6B68     		ldr	r3, [r5, #4]
 4033 0098 0293     		str	r3, [sp, #8]
 4034 009a 6888     		ldrh	r0, [r5, #2]
 4035 009c FFF7FEFF 		bl	lwip_htons
 4036              	.LVL562:
 4037              	.L414:
1166:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4038              		.loc 1 1166 0
 4039 00a0 ADF80C00 		strh	r0, [sp, #12]	@ movhi
1192:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_NETIF_TX_SINGLE_PBUF */
 4040              		.loc 1 1192 0
 4041 00a4 4A46     		mov	r2, r9
 4042 00a6 4146     		mov	r1, r8
 4043 00a8 6846     		mov	r0, sp
 4044              	.LVL563:
 4045 00aa FFF7FEFF 		bl	netbuf_ref
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 128


 4046              	.LVL564:
1194:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV4 && LWIP_IPV6
 4047              		.loc 1 1194 0
 4048 00ae 0546     		mov	r5, r0
 4049 00b0 88B1     		cbz	r0, .L424
 4050              	.LVL565:
 4051              	.L415:
1208:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4052              		.loc 1 1208 0
 4053 00b2 6846     		mov	r0, sp
 4054 00b4 FFF7FEFF 		bl	netbuf_free
 4055              	.LVL566:
 4056              	.LBB59:
1210:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return (err == ERR_OK ? short_size : -1);
 4057              		.loc 1 1210 0
 4058 00b8 2846     		mov	r0, r5
 4059 00ba FFF7FEFF 		bl	err_to_errno
 4060              	.LVL567:
 4061 00be 3074     		strb	r0, [r6, #16]
 4062 00c0 08B1     		cbz	r0, .L416
1210:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return (err == ERR_OK ? short_size : -1);
 4063              		.loc 1 1210 0 is_stmt 0 discriminator 1
 4064 00c2 0F4B     		ldr	r3, .L425+12
 4065 00c4 1860     		str	r0, [r3]
 4066              	.L416:
 4067              	.LBE59:
1211:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 4068              		.loc 1 1211 0 is_stmt 1
 4069 00c6 95B9     		cbnz	r5, .L419
1211:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 4070              		.loc 1 1211 0 is_stmt 0 discriminator 1
 4071 00c8 A0B2     		uxth	r0, r4
 4072              	.LVL568:
 4073              	.L407:
1212:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4074              		.loc 1 1212 0 is_stmt 1
 4075 00ca 04B0     		add	sp, sp, #16
 4076              	.LCFI47:
 4077              		.cfi_remember_state
 4078              		.cfi_def_cfa_offset 32
 4079              		@ sp needed
 4080 00cc BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 4081              	.LVL569:
 4082              	.L413:
 4083              	.LCFI48:
 4084              		.cfi_restore_state
1164:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 4085              		.loc 1 1164 0
 4086 00d0 0020     		movs	r0, #0
 4087 00d2 0290     		str	r0, [sp, #8]
 4088 00d4 E4E7     		b	.L414
 4089              	.LVL570:
 4090              	.L424:
1204:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 4091              		.loc 1 1204 0
 4092 00d6 6946     		mov	r1, sp
 4093 00d8 3068     		ldr	r0, [r6]
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 129


 4094              	.LVL571:
 4095 00da FFF7FEFF 		bl	netconn_send
 4096              	.LVL572:
 4097 00de 0546     		mov	r5, r0
 4098              	.LVL573:
 4099 00e0 E7E7     		b	.L415
 4100              	.LVL574:
 4101              	.L417:
1133:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 4102              		.loc 1 1133 0
 4103 00e2 4FF0FF30 		mov	r0, #-1
 4104              	.LVL575:
 4105 00e6 F0E7     		b	.L407
 4106              	.LVL576:
 4107              	.L418:
1149:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              (IS_SOCK_ADDR_LEN_VALID(tolen) &&
 4108              		.loc 1 1149 0
 4109 00e8 4FF0FF30 		mov	r0, #-1
 4110              	.LVL577:
 4111 00ec EDE7     		b	.L407
 4112              	.LVL578:
 4113              	.L419:
1211:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 4114              		.loc 1 1211 0
 4115 00ee 4FF0FF30 		mov	r0, #-1
 4116              	.LVL579:
 4117 00f2 EAE7     		b	.L407
 4118              	.L426:
 4119              		.align	2
 4120              	.L425:
 4121 00f4 00000000 		.word	.LC0
 4122 00f8 24000000 		.word	.LC18
 4123 00fc 3C000000 		.word	.LC2
 4124 0100 00000000 		.word	errno
 4125 0104 00000000 		.word	.LC17
 4126              		.cfi_endproc
 4127              	.LFE173:
 4129              		.section	.text.lwip_send,"ax",%progbits
 4130              		.align	1
 4131              		.global	lwip_send
 4132              		.syntax unified
 4133              		.thumb
 4134              		.thumb_func
 4135              		.fpu fpv5-sp-d16
 4137              	lwip_send:
 4138              	.LFB171:
 930:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 4139              		.loc 1 930 0
 4140              		.cfi_startproc
 4141              		@ args = 0, pretend = 0, frame = 8
 4142              		@ frame_needed = 0, uses_anonymous_args = 0
 4143              	.LVL580:
 4144 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 4145              	.LCFI49:
 4146              		.cfi_def_cfa_offset 24
 4147              		.cfi_offset 4, -24
 4148              		.cfi_offset 5, -20
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 130


 4149              		.cfi_offset 6, -16
 4150              		.cfi_offset 7, -12
 4151              		.cfi_offset 8, -8
 4152              		.cfi_offset 14, -4
 4153 0004 84B0     		sub	sp, sp, #16
 4154              	.LCFI50:
 4155              		.cfi_def_cfa_offset 40
 4156 0006 8046     		mov	r8, r0
 4157 0008 0E46     		mov	r6, r1
 4158 000a 1746     		mov	r7, r2
 4159 000c 1D46     		mov	r5, r3
 939:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 4160              		.loc 1 939 0
 4161 000e FFF7FEFF 		bl	get_socket
 4162              	.LVL581:
 940:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 4163              		.loc 1 940 0
 4164 0012 98B3     		cbz	r0, .L433
 4165 0014 0446     		mov	r4, r0
 944:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if (LWIP_UDP || LWIP_RAW)
 4166              		.loc 1 944 0
 4167 0016 0368     		ldr	r3, [r0]
 4168 0018 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4169 001a 03F0F003 		and	r3, r3, #240
 4170 001e 102B     		cmp	r3, #16
 4171 0020 1ED1     		bne	.L438
 954:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ((flags & MSG_DONTWAIT) ? NETCONN_DONTBLOCK : 0);
 4172              		.loc 1 954 0
 4173 0022 15F0100F 		tst	r5, #16
 4174 0026 25D0     		beq	.L434
 4175 0028 0321     		movs	r1, #3
 4176              	.L430:
 954:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ((flags & MSG_DONTWAIT) ? NETCONN_DONTBLOCK : 0);
 4177              		.loc 1 954 0 is_stmt 0 discriminator 4
 4178 002a 15F0080F 		tst	r5, #8
 4179 002e 23D0     		beq	.L435
 954:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ((flags & MSG_DONTWAIT) ? NETCONN_DONTBLOCK : 0);
 4180              		.loc 1 954 0
 4181 0030 0423     		movs	r3, #4
 4182              	.L431:
 4183              	.LVL582:
 956:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = netconn_write_partly(sock->conn, data, size, write_flags, &written);
 4184              		.loc 1 956 0 is_stmt 1 discriminator 8
 4185 0032 04AA     		add	r2, sp, #16
 4186 0034 0020     		movs	r0, #0
 4187              	.LVL583:
 4188 0036 42F8040D 		str	r0, [r2, #-4]!
 957:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4189              		.loc 1 957 0 discriminator 8
 4190 003a 2068     		ldr	r0, [r4]
 4191 003c 0092     		str	r2, [sp]
 4192 003e 0B43     		orrs	r3, r3, r1
 4193              	.LVL584:
 4194 0040 3A46     		mov	r2, r7
 4195 0042 3146     		mov	r1, r6
 4196 0044 FFF7FEFF 		bl	netconn_write_partly
 4197              	.LVL585:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 131


 4198 0048 0546     		mov	r5, r0
 4199              	.LVL586:
 4200              	.LBB60:
 960:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return (err == ERR_OK ? (int)written : -1);
 4201              		.loc 1 960 0 discriminator 8
 4202 004a FFF7FEFF 		bl	err_to_errno
 4203              	.LVL587:
 4204 004e 2074     		strb	r0, [r4, #16]
 4205 0050 08B1     		cbz	r0, .L432
 960:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return (err == ERR_OK ? (int)written : -1);
 4206              		.loc 1 960 0 is_stmt 0 discriminator 1
 4207 0052 0D4B     		ldr	r3, .L439
 4208 0054 1860     		str	r0, [r3]
 4209              	.L432:
 4210              	.LBE60:
 961:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 4211              		.loc 1 961 0 is_stmt 1
 4212 0056 A5B9     		cbnz	r5, .L436
 961:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 4213              		.loc 1 961 0 is_stmt 0 discriminator 1
 4214 0058 0398     		ldr	r0, [sp, #12]
 4215              	.LVL588:
 4216              	.L427:
 962:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4217              		.loc 1 962 0 is_stmt 1
 4218 005a 04B0     		add	sp, sp, #16
 4219              	.LCFI51:
 4220              		.cfi_remember_state
 4221              		.cfi_def_cfa_offset 24
 4222              		@ sp needed
 4223 005c BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 4224              	.LVL589:
 4225              	.L438:
 4226              	.LCFI52:
 4227              		.cfi_restore_state
 946:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* (LWIP_UDP || LWIP_RAW) */
 4228              		.loc 1 946 0
 4229 0060 0023     		movs	r3, #0
 4230 0062 0193     		str	r3, [sp, #4]
 4231 0064 0093     		str	r3, [sp]
 4232 0066 2B46     		mov	r3, r5
 4233 0068 3A46     		mov	r2, r7
 4234 006a 3146     		mov	r1, r6
 4235 006c 4046     		mov	r0, r8
 4236              	.LVL590:
 4237 006e FFF7FEFF 		bl	lwip_sendto
 4238              	.LVL591:
 4239 0072 F2E7     		b	.L427
 4240              	.LVL592:
 4241              	.L434:
 954:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ((flags & MSG_DONTWAIT) ? NETCONN_DONTBLOCK : 0);
 4242              		.loc 1 954 0
 4243 0074 0121     		movs	r1, #1
 4244 0076 D8E7     		b	.L430
 4245              	.L435:
 4246 0078 0023     		movs	r3, #0
 4247 007a DAE7     		b	.L431
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 132


 4248              	.L433:
 941:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 4249              		.loc 1 941 0
 4250 007c 4FF0FF30 		mov	r0, #-1
 4251              	.LVL593:
 4252 0080 EBE7     		b	.L427
 4253              	.LVL594:
 4254              	.L436:
 961:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 4255              		.loc 1 961 0
 4256 0082 4FF0FF30 		mov	r0, #-1
 4257              	.LVL595:
 4258 0086 E8E7     		b	.L427
 4259              	.L440:
 4260              		.align	2
 4261              	.L439:
 4262 0088 00000000 		.word	errno
 4263              		.cfi_endproc
 4264              	.LFE171:
 4266              		.section	.text.lwip_socket,"ax",%progbits
 4267              		.align	1
 4268              		.global	lwip_socket
 4269              		.syntax unified
 4270              		.thumb
 4271              		.thumb_func
 4272              		.fpu fpv5-sp-d16
 4274              	lwip_socket:
 4275              	.LFB174:
1216:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct netconn *conn;
 4276              		.loc 1 1216 0
 4277              		.cfi_startproc
 4278              		@ args = 0, pretend = 0, frame = 0
 4279              		@ frame_needed = 0, uses_anonymous_args = 0
 4280              	.LVL596:
 4281 0000 38B5     		push	{r3, r4, r5, lr}
 4282              	.LCFI53:
 4283              		.cfi_def_cfa_offset 16
 4284              		.cfi_offset 3, -16
 4285              		.cfi_offset 4, -12
 4286              		.cfi_offset 5, -8
 4287              		.cfi_offset 14, -4
 4288 0002 1346     		mov	r3, r2
1223:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case SOCK_RAW:
 4289              		.loc 1 1223 0
 4290 0004 0229     		cmp	r1, #2
 4291 0006 1BD0     		beq	.L443
 4292 0008 0329     		cmp	r1, #3
 4293 000a 07D0     		beq	.L444
 4294 000c 0129     		cmp	r1, #1
 4295 000e 22D0     		beq	.L454
1245:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 4296              		.loc 1 1245 0 discriminator 1
 4297 0010 1622     		movs	r2, #22
 4298              	.LVL597:
 4299 0012 1B4B     		ldr	r3, .L458
 4300              	.LVL598:
 4301 0014 1A60     		str	r2, [r3]
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 133


1246:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 4302              		.loc 1 1246 0 discriminator 1
 4303 0016 4FF0FF34 		mov	r4, #-1
 4304 001a 0FE0     		b	.L441
 4305              	.LVL599:
 4306              	.L444:
1225:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                                (u8_t)protocol, event_callback);
 4307              		.loc 1 1225 0
 4308 001c 194A     		ldr	r2, .L458+4
 4309              	.LVL600:
 4310 001e D9B2     		uxtb	r1, r3
 4311              	.LVL601:
 4312 0020 4020     		movs	r0, #64
 4313              	.LVL602:
 4314 0022 FFF7FEFF 		bl	netconn_new_with_proto_and_callback
 4315              	.LVL603:
 4316 0026 0546     		mov	r5, r0
 4317              	.LVL604:
 4318              	.L446:
1249:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("-1 / ENOBUFS (could not create netconn)\n"));
 4319              		.loc 1 1249 0
 4320 0028 E5B1     		cbz	r5, .L455
1255:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4321              		.loc 1 1255 0
 4322 002a 0021     		movs	r1, #0
 4323 002c 2846     		mov	r0, r5
 4324 002e FFF7FEFF 		bl	alloc_socket
 4325              	.LVL605:
 4326 0032 0446     		mov	r4, r0
 4327              	.LVL606:
1257:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     netconn_delete(conn);
 4328              		.loc 1 1257 0
 4329 0034 B0F1FF3F 		cmp	r0, #-1
 4330 0038 1AD0     		beq	.L456
1262:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("%d\n", i));
 4331              		.loc 1 1262 0
 4332 003a A861     		str	r0, [r5, #24]
 4333              	.LVL607:
 4334              	.L441:
1266:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4335              		.loc 1 1266 0
 4336 003c 2046     		mov	r0, r4
 4337 003e 38BD     		pop	{r3, r4, r5, pc}
 4338              	.LVL608:
 4339              	.L443:
1231:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                  ((protocol == IPPROTO_UDPLITE) ? NETCONN_UDPLITE : NETCONN_UDP)) ,
 4340              		.loc 1 1231 0
 4341 0040 882A     		cmp	r2, #136
 4342 0042 06D0     		beq	.L457
 4343 0044 2020     		movs	r0, #32
 4344              	.LVL609:
 4345              	.L447:
1231:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                  ((protocol == IPPROTO_UDPLITE) ? NETCONN_UDPLITE : NETCONN_UDP)) ,
 4346              		.loc 1 1231 0 is_stmt 0 discriminator 4
 4347 0046 0F4A     		ldr	r2, .L458+4
 4348              	.LVL610:
 4349 0048 0021     		movs	r1, #0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 134


 4350              	.LVL611:
 4351 004a FFF7FEFF 		bl	netconn_new_with_proto_and_callback
 4352              	.LVL612:
 4353 004e 0546     		mov	r5, r0
 4354              	.LVL613:
1236:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case SOCK_STREAM:
 4355              		.loc 1 1236 0 is_stmt 1 discriminator 4
 4356 0050 EAE7     		b	.L446
 4357              	.LVL614:
 4358              	.L457:
1231:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                  ((protocol == IPPROTO_UDPLITE) ? NETCONN_UDPLITE : NETCONN_UDP)) ,
 4359              		.loc 1 1231 0
 4360 0052 2120     		movs	r0, #33
 4361              	.LVL615:
 4362 0054 F7E7     		b	.L447
 4363              	.LVL616:
 4364              	.L454:
1238:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_socket(%s, SOCK_STREAM, %d) = ",
 4365              		.loc 1 1238 0
 4366 0056 0B4A     		ldr	r2, .L458+4
 4367              	.LVL617:
 4368 0058 0021     		movs	r1, #0
 4369              	.LVL618:
 4370 005a 1020     		movs	r0, #16
 4371              	.LVL619:
 4372 005c FFF7FEFF 		bl	netconn_new_with_proto_and_callback
 4373              	.LVL620:
 4374 0060 0546     		mov	r5, r0
 4375              	.LVL621:
1241:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   default:
 4376              		.loc 1 1241 0
 4377 0062 E1E7     		b	.L446
 4378              	.L455:
1251:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 4379              		.loc 1 1251 0 discriminator 1
 4380 0064 6922     		movs	r2, #105
 4381 0066 064B     		ldr	r3, .L458
 4382 0068 1A60     		str	r2, [r3]
1252:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 4383              		.loc 1 1252 0 discriminator 1
 4384 006a 4FF0FF34 		mov	r4, #-1
 4385 006e E5E7     		b	.L441
 4386              	.LVL622:
 4387              	.L456:
1258:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     set_errno(ENFILE);
 4388              		.loc 1 1258 0
 4389 0070 2846     		mov	r0, r5
 4390              	.LVL623:
 4391 0072 FFF7FEFF 		bl	netconn_delete
 4392              	.LVL624:
1259:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 4393              		.loc 1 1259 0
 4394 0076 1722     		movs	r2, #23
 4395 0078 014B     		ldr	r3, .L458
 4396 007a 1A60     		str	r2, [r3]
1260:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 4397              		.loc 1 1260 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 135


 4398 007c DEE7     		b	.L441
 4399              	.L459:
 4400 007e 00BF     		.align	2
 4401              	.L458:
 4402 0080 00000000 		.word	errno
 4403 0084 00000000 		.word	event_callback
 4404              		.cfi_endproc
 4405              	.LFE174:
 4407              		.section	.text.lwip_write,"ax",%progbits
 4408              		.align	1
 4409              		.global	lwip_write
 4410              		.syntax unified
 4411              		.thumb
 4412              		.thumb_func
 4413              		.fpu fpv5-sp-d16
 4415              	lwip_write:
 4416              	.LFB175:
1270:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return lwip_send(s, data, size, 0);
 4417              		.loc 1 1270 0
 4418              		.cfi_startproc
 4419              		@ args = 0, pretend = 0, frame = 0
 4420              		@ frame_needed = 0, uses_anonymous_args = 0
 4421              	.LVL625:
 4422 0000 08B5     		push	{r3, lr}
 4423              	.LCFI54:
 4424              		.cfi_def_cfa_offset 8
 4425              		.cfi_offset 3, -8
 4426              		.cfi_offset 14, -4
1271:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 4427              		.loc 1 1271 0
 4428 0002 0023     		movs	r3, #0
 4429 0004 FFF7FEFF 		bl	lwip_send
 4430              	.LVL626:
1272:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4431              		.loc 1 1272 0
 4432 0008 08BD     		pop	{r3, pc}
 4433              		.cfi_endproc
 4434              	.LFE175:
 4436              		.section	.text.lwip_writev,"ax",%progbits
 4437              		.align	1
 4438              		.global	lwip_writev
 4439              		.syntax unified
 4440              		.thumb
 4441              		.thumb_func
 4442              		.fpu fpv5-sp-d16
 4444              	lwip_writev:
 4445              	.LFB176:
1276:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct msghdr msg;
 4446              		.loc 1 1276 0
 4447              		.cfi_startproc
 4448              		@ args = 0, pretend = 0, frame = 32
 4449              		@ frame_needed = 0, uses_anonymous_args = 0
 4450              	.LVL627:
 4451 0000 00B5     		push	{lr}
 4452              	.LCFI55:
 4453              		.cfi_def_cfa_offset 4
 4454              		.cfi_offset 14, -4
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 136


 4455 0002 89B0     		sub	sp, sp, #36
 4456              	.LCFI56:
 4457              		.cfi_def_cfa_offset 40
1279:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_namelen = 0;
 4458              		.loc 1 1279 0
 4459 0004 0023     		movs	r3, #0
 4460 0006 0193     		str	r3, [sp, #4]
1280:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Hack: we have to cast via number to cast from 'const' pointer to non-const.
 4461              		.loc 1 1280 0
 4462 0008 0293     		str	r3, [sp, #8]
1283:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_iovlen = iovcnt;
 4463              		.loc 1 1283 0
 4464 000a 0391     		str	r1, [sp, #12]
1284:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_control = NULL;
 4465              		.loc 1 1284 0
 4466 000c 0492     		str	r2, [sp, #16]
1285:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_controllen = 0;
 4467              		.loc 1 1285 0
 4468 000e 0593     		str	r3, [sp, #20]
1286:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_flags = 0;
 4469              		.loc 1 1286 0
 4470 0010 0693     		str	r3, [sp, #24]
1287:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return lwip_sendmsg(s, &msg, 0);
 4471              		.loc 1 1287 0
 4472 0012 0793     		str	r3, [sp, #28]
1288:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 4473              		.loc 1 1288 0
 4474 0014 1A46     		mov	r2, r3
 4475              	.LVL628:
 4476 0016 01A9     		add	r1, sp, #4
 4477              	.LVL629:
 4478 0018 FFF7FEFF 		bl	lwip_sendmsg
 4479              	.LVL630:
1289:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4480              		.loc 1 1289 0
 4481 001c 09B0     		add	sp, sp, #36
 4482              	.LCFI57:
 4483              		.cfi_def_cfa_offset 4
 4484              		@ sp needed
 4485 001e 5DF804FB 		ldr	pc, [sp], #4
 4486              		.cfi_endproc
 4487              	.LFE176:
 4489              		.section	.text.lwip_select,"ax",%progbits
 4490              		.align	1
 4491              		.global	lwip_select
 4492              		.syntax unified
 4493              		.thumb
 4494              		.thumb_func
 4495              		.fpu fpv5-sp-d16
 4497              	lwip_select:
 4498              	.LFB178:
1373:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u32_t waitres = 0;
 4499              		.loc 1 1373 0
 4500              		.cfi_startproc
 4501              		@ args = 4, pretend = 0, frame = 64
 4502              		@ frame_needed = 0, uses_anonymous_args = 0
 4503              	.LVL631:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 137


 4504 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 4505              	.LCFI58:
 4506              		.cfi_def_cfa_offset 36
 4507              		.cfi_offset 4, -36
 4508              		.cfi_offset 5, -32
 4509              		.cfi_offset 6, -28
 4510              		.cfi_offset 7, -24
 4511              		.cfi_offset 8, -20
 4512              		.cfi_offset 9, -16
 4513              		.cfi_offset 10, -12
 4514              		.cfi_offset 11, -8
 4515              		.cfi_offset 14, -4
 4516 0004 95B0     		sub	sp, sp, #84
 4517              	.LCFI59:
 4518              		.cfi_def_cfa_offset 120
 4519 0006 8246     		mov	r10, r0
 4520 0008 0E46     		mov	r6, r1
 4521 000a 1746     		mov	r7, r2
 4522 000c 9846     		mov	r8, r3
 4523 000e DDF87890 		ldr	r9, [sp, #120]
 4524              	.LVL632:
1393:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4525              		.loc 1 1393 0
 4526 0012 0EAC     		add	r4, sp, #56
 4527 0014 0294     		str	r4, [sp, #8]
 4528 0016 10AC     		add	r4, sp, #64
 4529 0018 0194     		str	r4, [sp, #4]
 4530 001a 12AC     		add	r4, sp, #72
 4531 001c 0094     		str	r4, [sp]
 4532 001e FFF7FEFF 		bl	lwip_selscan
 4533              	.LVL633:
1396:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (timeout && timeout->tv_sec == 0 && timeout->tv_usec == 0) {
 4534              		.loc 1 1396 0
 4535 0022 0546     		mov	r5, r0
 4536 0024 0028     		cmp	r0, #0
 4537 0026 40F01981 		bne	.L465
1397:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_select: no timeout, returning 0\n"));
 4538              		.loc 1 1397 0
 4539 002a B9F1000F 		cmp	r9, #0
 4540 002e 07D0     		beq	.L466
1397:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_select: no timeout, returning 0\n"));
 4541              		.loc 1 1397 0 is_stmt 0 discriminator 1
 4542 0030 D9F80030 		ldr	r3, [r9]
 4543 0034 23B9     		cbnz	r3, .L466
1397:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_select: no timeout, returning 0\n"));
 4544              		.loc 1 1397 0 discriminator 2
 4545 0036 D9F80430 		ldr	r3, [r9, #4]
 4546 003a 002B     		cmp	r3, #0
 4547 003c 00F00E81 		beq	.L465
 4548              	.L466:
1409:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb.prev = NULL;
 4549              		.loc 1 1409 0 is_stmt 1
 4550 0040 0021     		movs	r1, #0
 4551 0042 0791     		str	r1, [sp, #28]
1410:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb.readset = readset;
 4552              		.loc 1 1410 0
 4553 0044 0891     		str	r1, [sp, #32]
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 138


1411:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb.writeset = writeset;
 4554              		.loc 1 1411 0
 4555 0046 0996     		str	r6, [sp, #36]
1412:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb.exceptset = exceptset;
 4556              		.loc 1 1412 0
 4557 0048 0A97     		str	r7, [sp, #40]
1413:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb.sem_signalled = 0;
 4558              		.loc 1 1413 0
 4559 004a CDF82C80 		str	r8, [sp, #44]
1414:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETCONN_SEM_PER_THREAD
 4560              		.loc 1 1414 0
 4561 004e 0C91     		str	r1, [sp, #48]
1418:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* failed to create semaphore */
 4562              		.loc 1 1418 0
 4563 0050 0DA8     		add	r0, sp, #52
 4564              	.LVL634:
 4565 0052 FFF7FEFF 		bl	sys_sem_new
 4566              	.LVL635:
 4567 0056 90B9     		cbnz	r0, .L504
1426:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4568              		.loc 1 1426 0
 4569 0058 FFF7FEFF 		bl	sys_arch_protect
 4570              	.LVL636:
1429:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (select_cb_list != NULL) {
 4571              		.loc 1 1429 0
 4572 005c 9A4B     		ldr	r3, .L512
 4573 005e 1B68     		ldr	r3, [r3]
 4574 0060 0793     		str	r3, [sp, #28]
1430:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       select_cb_list->prev = &select_cb;
 4575              		.loc 1 1430 0
 4576 0062 0BB1     		cbz	r3, .L469
1431:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 4577              		.loc 1 1431 0
 4578 0064 07AA     		add	r2, sp, #28
 4579 0066 5A60     		str	r2, [r3, #4]
 4580              	.L469:
1433:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Increasing this counter tells event_callback that the list has changed. */
 4581              		.loc 1 1433 0
 4582 0068 07AA     		add	r2, sp, #28
 4583 006a 974B     		ldr	r3, .L512
 4584 006c 1A60     		str	r2, [r3]
1435:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4585              		.loc 1 1435 0
 4586 006e 974A     		ldr	r2, .L512+4
 4587 0070 1368     		ldr	r3, [r2]
 4588 0072 0133     		adds	r3, r3, #1
 4589 0074 1360     		str	r3, [r2]
1438:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4590              		.loc 1 1438 0
 4591 0076 FFF7FEFF 		bl	sys_arch_unprotect
 4592              	.LVL637:
1442:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((readset && FD_ISSET(i, readset)) ||
 4593              		.loc 1 1442 0
 4594 007a 2C46     		mov	r4, r5
 4595 007c 15E0     		b	.L470
 4596              	.LVL638:
 4597              	.L504:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 139


1420:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
 4598              		.loc 1 1420 0 discriminator 1
 4599 007e 0C22     		movs	r2, #12
 4600 0080 934B     		ldr	r3, .L512+8
 4601 0082 1A60     		str	r2, [r3]
1421:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 4602              		.loc 1 1421 0 discriminator 1
 4603 0084 4FF0FF35 		mov	r5, #-1
 4604              	.LVL639:
 4605 0088 FCE0     		b	.L464
 4606              	.LVL640:
 4607              	.L472:
 4608              	.LBB61:
1447:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock = tryget_socket(i);
 4609              		.loc 1 1447 0
 4610 008a FFF7FEFF 		bl	sys_arch_protect
 4611              	.LVL641:
 4612 008e 8346     		mov	fp, r0
 4613              	.LVL642:
1448:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (sock != NULL) {
 4614              		.loc 1 1448 0
 4615 0090 2046     		mov	r0, r4
 4616              	.LVL643:
 4617 0092 FFF7FEFF 		bl	tryget_socket
 4618              	.LVL644:
1449:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           sock->select_waiting++;
 4619              		.loc 1 1449 0
 4620 0096 98B3     		cbz	r0, .L475
1450:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_ASSERT("sock->select_waiting > 0", sock->select_waiting > 0);
 4621              		.loc 1 1450 0
 4622 0098 437C     		ldrb	r3, [r0, #17]	@ zero_extendqisi2
 4623 009a 0133     		adds	r3, r3, #1
 4624 009c DBB2     		uxtb	r3, r3
 4625 009e 4374     		strb	r3, [r0, #17]
1451:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
 4626              		.loc 1 1451 0
 4627 00a0 33B3     		cbz	r3, .L505
 4628              	.LVL645:
 4629              	.L476:
1459:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 4630              		.loc 1 1459 0
 4631 00a2 5846     		mov	r0, fp
 4632 00a4 FFF7FEFF 		bl	sys_arch_unprotect
 4633              	.LVL646:
 4634              	.L474:
 4635              	.LBE61:
1442:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((readset && FD_ISSET(i, readset)) ||
 4636              		.loc 1 1442 0 discriminator 2
 4637 00a8 0134     		adds	r4, r4, #1
 4638              	.LVL647:
 4639              	.L470:
1442:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((readset && FD_ISSET(i, readset)) ||
 4640              		.loc 1 1442 0 is_stmt 0 discriminator 1
 4641 00aa 5445     		cmp	r4, r10
 4642 00ac 2EDA     		bge	.L506
1443:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (writeset && FD_ISSET(i, writeset)) ||
 4643              		.loc 1 1443 0 is_stmt 1
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 140


 4644 00ae 46B1     		cbz	r6, .L471
1443:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (writeset && FD_ISSET(i, writeset)) ||
 4645              		.loc 1 1443 0 is_stmt 0 discriminator 1
 4646 00b0 6309     		lsrs	r3, r4, #5
 4647 00b2 56F82320 		ldr	r2, [r6, r3, lsl #2]
 4648 00b6 04F01F01 		and	r1, r4, #31
 4649 00ba 0123     		movs	r3, #1
 4650 00bc 8B40     		lsls	r3, r3, r1
 4651 00be 1A42     		tst	r2, r3
 4652 00c0 E3D1     		bne	.L472
 4653              	.L471:
1443:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (writeset && FD_ISSET(i, writeset)) ||
 4654              		.loc 1 1443 0 discriminator 3
 4655 00c2 47B1     		cbz	r7, .L473
1444:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (exceptset && FD_ISSET(i, exceptset))) {
 4656              		.loc 1 1444 0 is_stmt 1
 4657 00c4 6309     		lsrs	r3, r4, #5
 4658 00c6 57F82320 		ldr	r2, [r7, r3, lsl #2]
 4659 00ca 04F01F01 		and	r1, r4, #31
 4660 00ce 0123     		movs	r3, #1
 4661 00d0 8B40     		lsls	r3, r3, r1
 4662 00d2 1A42     		tst	r2, r3
 4663 00d4 D9D1     		bne	.L472
 4664              	.L473:
1444:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (exceptset && FD_ISSET(i, exceptset))) {
 4665              		.loc 1 1444 0 is_stmt 0 discriminator 1
 4666 00d6 B8F1000F 		cmp	r8, #0
 4667 00da E5D0     		beq	.L474
1445:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         struct lwip_sock *sock;
 4668              		.loc 1 1445 0 is_stmt 1
 4669 00dc 6309     		lsrs	r3, r4, #5
 4670 00de 58F82320 		ldr	r2, [r8, r3, lsl #2]
 4671 00e2 04F01F01 		and	r1, r4, #31
 4672 00e6 0123     		movs	r3, #1
 4673 00e8 8B40     		lsls	r3, r3, r1
 4674 00ea 1A42     		tst	r2, r3
 4675 00ec DCD0     		beq	.L474
 4676 00ee CCE7     		b	.L472
 4677              	.LVL648:
 4678              	.L505:
 4679              	.LBB62:
1451:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
 4680              		.loc 1 1451 0 discriminator 1
 4681 00f0 784B     		ldr	r3, .L512+12
 4682 00f2 40F2AB52 		movw	r2, #1451
 4683 00f6 7849     		ldr	r1, .L512+16
 4684 00f8 7848     		ldr	r0, .L512+20
 4685              	.LVL649:
 4686 00fa FFF7FEFF 		bl	printf
 4687              	.LVL650:
 4688 00fe D0E7     		b	.L476
 4689              	.LVL651:
 4690              	.L475:
1456:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
 4691              		.loc 1 1456 0
 4692 0100 5846     		mov	r0, fp
 4693              	.LVL652:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 141


 4694 0102 FFF7FEFF 		bl	sys_arch_unprotect
 4695              	.LVL653:
1454:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           maxfdp2 = i;
 4696              		.loc 1 1454 0
 4697 0106 4FF0FF3B 		mov	fp, #-1
 4698              	.LVL654:
1457:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 4699              		.loc 1 1457 0
 4700 010a 01E0     		b	.L477
 4701              	.LVL655:
 4702              	.L506:
 4703              	.LBE62:
1441:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     for (i = LWIP_SOCKET_OFFSET; i < maxfdp1; i++) {
 4704              		.loc 1 1441 0
 4705 010c 5446     		mov	r4, r10
 4706              	.LVL656:
1393:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4707              		.loc 1 1393 0
 4708 010e AB46     		mov	fp, r5
 4709              	.LVL657:
 4710              	.L477:
1463:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* Call lwip_selscan again: there could have been events between
 4711              		.loc 1 1463 0
 4712 0110 BBF1000F 		cmp	fp, #0
 4713 0114 2ADB     		blt	.L497
1466:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (!nready) {
 4714              		.loc 1 1466 0
 4715 0116 0EAB     		add	r3, sp, #56
 4716 0118 0293     		str	r3, [sp, #8]
 4717 011a 10AB     		add	r3, sp, #64
 4718 011c 0193     		str	r3, [sp, #4]
 4719 011e 12AB     		add	r3, sp, #72
 4720 0120 0093     		str	r3, [sp]
 4721 0122 4346     		mov	r3, r8
 4722 0124 3A46     		mov	r2, r7
 4723 0126 3146     		mov	r1, r6
 4724 0128 5046     		mov	r0, r10
 4725 012a FFF7FEFF 		bl	lwip_selscan
 4726              	.LVL658:
1467:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* Still none ready, just wait to be woken */
 4727              		.loc 1 1467 0
 4728 012e 8346     		mov	fp, r0
 4729 0130 F8B9     		cbnz	r0, .L498
1469:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           /* Wait forever */
 4730              		.loc 1 1469 0
 4731 0132 B9F1000F 		cmp	r9, #0
 4732 0136 15D0     		beq	.L499
1473:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (msectimeout == 0) {
 4733              		.loc 1 1473 0
 4734 0138 D9F80010 		ldr	r1, [r9]
 4735 013c D9F80430 		ldr	r3, [r9, #4]
 4736 0140 03F5FA73 		add	r3, r3, #500
 4737 0144 664A     		ldr	r2, .L512+24
 4738 0146 82FB0302 		smull	r0, r2, r2, r3
 4739              	.LVL659:
 4740 014a DB17     		asrs	r3, r3, #31
 4741 014c C3EBA213 		rsb	r3, r3, r2, asr #6
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 142


 4742 0150 4FF47A72 		mov	r2, #1000
 4743 0154 02FB0131 		mla	r1, r2, r1, r3
 4744              	.LVL660:
1474:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             /* Wait 1ms at least (0 means wait forever) */
 4745              		.loc 1 1474 0
 4746 0158 31B1     		cbz	r1, .L500
 4747              	.LVL661:
 4748              	.L480:
1480:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETCONN_SEM_PER_THREAD
 4749              		.loc 1 1480 0
 4750 015a 0DA8     		add	r0, sp, #52
 4751 015c FFF7FEFF 		bl	sys_arch_sem_wait
 4752              	.LVL662:
 4753 0160 0590     		str	r0, [sp, #20]
 4754              	.LVL663:
 4755 0162 1DE0     		b	.L481
 4756              	.LVL664:
 4757              	.L499:
1471:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
 4758              		.loc 1 1471 0
 4759 0164 0021     		movs	r1, #0
 4760 0166 F8E7     		b	.L480
 4761              	.LVL665:
 4762              	.L500:
1476:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
 4763              		.loc 1 1476 0
 4764 0168 0121     		movs	r1, #1
 4765              	.LVL666:
 4766 016a F6E7     		b	.L480
 4767              	.LVL667:
 4768              	.L497:
1374:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int nready;
 4769              		.loc 1 1374 0
 4770 016c 0023     		movs	r3, #0
 4771 016e 0593     		str	r3, [sp, #20]
 4772 0170 16E0     		b	.L481
 4773              	.LVL668:
 4774              	.L498:
 4775 0172 0023     		movs	r3, #0
 4776 0174 0593     		str	r3, [sp, #20]
 4777              	.LVL669:
1488:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((readset && FD_ISSET(i, readset)) ||
 4778              		.loc 1 1488 0
 4779 0176 13E0     		b	.L481
 4780              	.LVL670:
 4781              	.L483:
 4782              	.LBB63:
1493:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock = tryget_socket(i);
 4783              		.loc 1 1493 0
 4784 0178 FFF7FEFF 		bl	sys_arch_protect
 4785              	.LVL671:
 4786 017c 0490     		str	r0, [sp, #16]
 4787              	.LVL672:
1494:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (sock != NULL) {
 4788              		.loc 1 1494 0
 4789 017e 2846     		mov	r0, r5
 4790              	.LVL673:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 143


 4791 0180 FFF7FEFF 		bl	tryget_socket
 4792              	.LVL674:
1495:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           /* for now, handle select_waiting==0... */
 4793              		.loc 1 1495 0
 4794 0184 8146     		mov	r9, r0
 4795 0186 B0B3     		cbz	r0, .L501
1497:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (sock->select_waiting > 0) {
 4796              		.loc 1 1497 0
 4797 0188 437C     		ldrb	r3, [r0, #17]	@ zero_extendqisi2
 4798 018a 63B3     		cbz	r3, .L507
 4799              	.LVL675:
 4800              	.L487:
1498:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             sock->select_waiting--;
 4801              		.loc 1 1498 0
 4802 018c 99F81130 		ldrb	r3, [r9, #17]	@ zero_extendqisi2
 4803 0190 13B1     		cbz	r3, .L486
1499:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
 4804              		.loc 1 1499 0
 4805 0192 013B     		subs	r3, r3, #1
 4806 0194 89F81130 		strb	r3, [r9, #17]
 4807              	.LVL676:
 4808              	.L486:
1505:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 4809              		.loc 1 1505 0
 4810 0198 0498     		ldr	r0, [sp, #16]
 4811 019a FFF7FEFF 		bl	sys_arch_unprotect
 4812              	.LVL677:
 4813              	.L485:
 4814              	.LBE63:
1488:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((readset && FD_ISSET(i, readset)) ||
 4815              		.loc 1 1488 0 discriminator 2
 4816 019e 0135     		adds	r5, r5, #1
 4817              	.LVL678:
 4818              	.L481:
1488:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((readset && FD_ISSET(i, readset)) ||
 4819              		.loc 1 1488 0 is_stmt 0 discriminator 1
 4820 01a0 A542     		cmp	r5, r4
 4821 01a2 2BDA     		bge	.L508
1489:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (writeset && FD_ISSET(i, writeset)) ||
 4822              		.loc 1 1489 0 is_stmt 1
 4823 01a4 46B1     		cbz	r6, .L482
1489:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (writeset && FD_ISSET(i, writeset)) ||
 4824              		.loc 1 1489 0 is_stmt 0 discriminator 1
 4825 01a6 6B09     		lsrs	r3, r5, #5
 4826 01a8 56F82320 		ldr	r2, [r6, r3, lsl #2]
 4827 01ac 05F01F01 		and	r1, r5, #31
 4828 01b0 0123     		movs	r3, #1
 4829 01b2 8B40     		lsls	r3, r3, r1
 4830 01b4 1A42     		tst	r2, r3
 4831 01b6 DFD1     		bne	.L483
 4832              	.L482:
1489:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (writeset && FD_ISSET(i, writeset)) ||
 4833              		.loc 1 1489 0 discriminator 3
 4834 01b8 47B1     		cbz	r7, .L484
1490:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (exceptset && FD_ISSET(i, exceptset))) {
 4835              		.loc 1 1490 0 is_stmt 1
 4836 01ba 6B09     		lsrs	r3, r5, #5
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 144


 4837 01bc 57F82320 		ldr	r2, [r7, r3, lsl #2]
 4838 01c0 05F01F01 		and	r1, r5, #31
 4839 01c4 0123     		movs	r3, #1
 4840 01c6 8B40     		lsls	r3, r3, r1
 4841 01c8 1A42     		tst	r2, r3
 4842 01ca D5D1     		bne	.L483
 4843              	.L484:
1490:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (exceptset && FD_ISSET(i, exceptset))) {
 4844              		.loc 1 1490 0 is_stmt 0 discriminator 1
 4845 01cc B8F1000F 		cmp	r8, #0
 4846 01d0 E5D0     		beq	.L485
1491:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         struct lwip_sock *sock;
 4847              		.loc 1 1491 0 is_stmt 1
 4848 01d2 6B09     		lsrs	r3, r5, #5
 4849 01d4 58F82320 		ldr	r2, [r8, r3, lsl #2]
 4850 01d8 05F01F01 		and	r1, r5, #31
 4851 01dc 0123     		movs	r3, #1
 4852 01de 8B40     		lsls	r3, r3, r1
 4853 01e0 1A42     		tst	r2, r3
 4854 01e2 DCD0     		beq	.L485
 4855 01e4 C8E7     		b	.L483
 4856              	.LVL679:
 4857              	.L507:
 4858              	.LBB64:
1497:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (sock->select_waiting > 0) {
 4859              		.loc 1 1497 0 discriminator 1
 4860 01e6 3B4B     		ldr	r3, .L512+12
 4861 01e8 40F2D952 		movw	r2, #1497
 4862 01ec 3A49     		ldr	r1, .L512+16
 4863 01ee 3B48     		ldr	r0, .L512+20
 4864              	.LVL680:
 4865 01f0 FFF7FEFF 		bl	printf
 4866              	.LVL681:
 4867 01f4 CAE7     		b	.L487
 4868              	.LVL682:
 4869              	.L501:
1503:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 4870              		.loc 1 1503 0
 4871 01f6 4FF0FF3B 		mov	fp, #-1
 4872              	.LVL683:
 4873 01fa CDE7     		b	.L486
 4874              	.LVL684:
 4875              	.L508:
 4876              	.LBE64:
1509:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (select_cb.next != NULL) {
 4877              		.loc 1 1509 0
 4878 01fc FFF7FEFF 		bl	sys_arch_protect
 4879              	.LVL685:
 4880 0200 0446     		mov	r4, r0
 4881              	.LVL686:
1510:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       select_cb.next->prev = select_cb.prev;
 4882              		.loc 1 1510 0
 4883 0202 079B     		ldr	r3, [sp, #28]
 4884 0204 0BB1     		cbz	r3, .L489
1511:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 4885              		.loc 1 1511 0
 4886 0206 089A     		ldr	r2, [sp, #32]
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 145


 4887 0208 5A60     		str	r2, [r3, #4]
 4888              	.L489:
1513:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_ASSERT("select_cb.prev == NULL", select_cb.prev == NULL);
 4889              		.loc 1 1513 0
 4890 020a 2F4B     		ldr	r3, .L512
 4891 020c 1A68     		ldr	r2, [r3]
 4892 020e 07AB     		add	r3, sp, #28
 4893 0210 9A42     		cmp	r2, r3
 4894 0212 3BD0     		beq	.L509
1517:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       select_cb.prev->next = select_cb.next;
 4895              		.loc 1 1517 0
 4896 0214 089B     		ldr	r3, [sp, #32]
 4897 0216 002B     		cmp	r3, #0
 4898 0218 45D0     		beq	.L510
 4899              	.LVL687:
 4900              	.L493:
1518:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 4901              		.loc 1 1518 0
 4902 021a 079A     		ldr	r2, [sp, #28]
 4903 021c 089B     		ldr	r3, [sp, #32]
 4904 021e 1A60     		str	r2, [r3]
 4905              	.L492:
1521:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SYS_ARCH_UNPROTECT(lev);
 4906              		.loc 1 1521 0
 4907 0220 2A4A     		ldr	r2, .L512+4
 4908 0222 1368     		ldr	r3, [r2]
 4909 0224 0133     		adds	r3, r3, #1
 4910 0226 1360     		str	r3, [r2]
1522:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4911              		.loc 1 1522 0
 4912 0228 2046     		mov	r0, r4
 4913 022a FFF7FEFF 		bl	sys_arch_unprotect
 4914              	.LVL688:
1530:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_NETCONN_SEM_PER_THREAD */
 4915              		.loc 1 1530 0
 4916 022e 0DA8     		add	r0, sp, #52
 4917 0230 FFF7FEFF 		bl	sys_sem_free
 4918              	.LVL689:
1533:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* This happens when a socket got closed while waiting */
 4919              		.loc 1 1533 0
 4920 0234 BBF1000F 		cmp	fp, #0
 4921 0238 3DDB     		blt	.L511
1539:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* Timeout */
 4922              		.loc 1 1539 0
 4923 023a 059B     		ldr	r3, [sp, #20]
 4924 023c B3F1FF3F 		cmp	r3, #-1
 4925 0240 3FD0     		beq	.L502
1548:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 4926              		.loc 1 1548 0
 4927 0242 0EAB     		add	r3, sp, #56
 4928 0244 0293     		str	r3, [sp, #8]
 4929 0246 10AB     		add	r3, sp, #64
 4930 0248 0193     		str	r3, [sp, #4]
 4931 024a 12AB     		add	r3, sp, #72
 4932 024c 0093     		str	r3, [sp]
 4933 024e 4346     		mov	r3, r8
 4934 0250 3A46     		mov	r2, r7
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 146


 4935 0252 3146     		mov	r1, r6
 4936 0254 5046     		mov	r0, r10
 4937 0256 FFF7FEFF 		bl	lwip_selscan
 4938              	.LVL690:
 4939 025a 0546     		mov	r5, r0
 4940              	.LVL691:
 4941              	.L465:
1554:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     *readset = lreadset;
 4942              		.loc 1 1554 0
 4943 025c 26B1     		cbz	r6, .L495
1555:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 4944              		.loc 1 1555 0
 4945 025e 14AB     		add	r3, sp, #80
 4946 0260 13E90300 		ldmdb	r3, {r0, r1}
 4947 0264 86E80300 		stm	r6, {r0, r1}
 4948              	.L495:
1557:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     *writeset = lwriteset;
 4949              		.loc 1 1557 0
 4950 0268 27B1     		cbz	r7, .L496
1558:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 4951              		.loc 1 1558 0
 4952 026a 10AB     		add	r3, sp, #64
 4953 026c 93E80300 		ldm	r3, {r0, r1}
 4954 0270 87E80300 		stm	r7, {r0, r1}
 4955              	.L496:
1560:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     *exceptset = lexceptset;
 4956              		.loc 1 1560 0
 4957 0274 B8F1000F 		cmp	r8, #0
 4958 0278 04D0     		beq	.L464
1561:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 4959              		.loc 1 1561 0
 4960 027a 0EAB     		add	r3, sp, #56
 4961 027c 93E80300 		ldm	r3, {r0, r1}
 4962 0280 88E80300 		stm	r8, {r0, r1}
 4963              	.LVL692:
 4964              	.L464:
1564:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4965              		.loc 1 1564 0
 4966 0284 2846     		mov	r0, r5
 4967 0286 15B0     		add	sp, sp, #84
 4968              	.LCFI60:
 4969              		.cfi_remember_state
 4970              		.cfi_def_cfa_offset 36
 4971              		@ sp needed
 4972 0288 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 4973              	.LVL693:
 4974              	.L509:
 4975              	.LCFI61:
 4976              		.cfi_restore_state
1514:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       select_cb_list = select_cb.next;
 4977              		.loc 1 1514 0
 4978 028c 089B     		ldr	r3, [sp, #32]
 4979 028e 33B1     		cbz	r3, .L491
1514:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       select_cb_list = select_cb.next;
 4980              		.loc 1 1514 0 is_stmt 0 discriminator 1
 4981 0290 104B     		ldr	r3, .L512+12
 4982 0292 40F2EA52 		movw	r2, #1514
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 147


 4983 0296 1349     		ldr	r1, .L512+28
 4984 0298 1048     		ldr	r0, .L512+20
 4985              	.LVL694:
 4986 029a FFF7FEFF 		bl	printf
 4987              	.LVL695:
 4988              	.L491:
1515:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
 4989              		.loc 1 1515 0 is_stmt 1
 4990 029e 0A4B     		ldr	r3, .L512
 4991 02a0 079A     		ldr	r2, [sp, #28]
 4992 02a2 1A60     		str	r2, [r3]
 4993 02a4 BCE7     		b	.L492
 4994              	.LVL696:
 4995              	.L510:
1517:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       select_cb.prev->next = select_cb.next;
 4996              		.loc 1 1517 0 discriminator 1
 4997 02a6 0B4B     		ldr	r3, .L512+12
 4998 02a8 40F2ED52 		movw	r2, #1517
 4999 02ac 0E49     		ldr	r1, .L512+32
 5000 02ae 0B48     		ldr	r0, .L512+20
 5001              	.LVL697:
 5002 02b0 FFF7FEFF 		bl	printf
 5003              	.LVL698:
 5004 02b4 B1E7     		b	.L493
 5005              	.L511:
1535:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
 5006              		.loc 1 1535 0 discriminator 1
 5007 02b6 0922     		movs	r2, #9
 5008 02b8 054B     		ldr	r3, .L512+8
 5009 02ba 1A60     		str	r2, [r3]
1536:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 5010              		.loc 1 1536 0 discriminator 1
 5011 02bc 4FF0FF35 		mov	r5, #-1
 5012              	.LVL699:
 5013 02c0 E0E7     		b	.L464
 5014              	.LVL700:
 5015              	.L502:
 5016 02c2 5D46     		mov	r5, fp
 5017              	.LVL701:
 5018 02c4 CAE7     		b	.L465
 5019              	.L513:
 5020 02c6 00BF     		.align	2
 5021              	.L512:
 5022 02c8 00000000 		.word	.LANCHOR1
 5023 02cc 00000000 		.word	.LANCHOR2
 5024 02d0 00000000 		.word	errno
 5025 02d4 00000000 		.word	.LC0
 5026 02d8 00000000 		.word	.LC19
 5027 02dc 3C000000 		.word	.LC2
 5028 02e0 D34D6210 		.word	274877907
 5029 02e4 1C000000 		.word	.LC20
 5030 02e8 34000000 		.word	.LC21
 5031              		.cfi_endproc
 5032              	.LFE178:
 5034              		.section	.text.lwip_shutdown,"ax",%progbits
 5035              		.align	1
 5036              		.global	lwip_shutdown
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 148


 5037              		.syntax unified
 5038              		.thumb
 5039              		.thumb_func
 5040              		.fpu fpv5-sp-d16
 5042              	lwip_shutdown:
 5043              	.LFB180:
1692:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 5044              		.loc 1 1692 0
 5045              		.cfi_startproc
 5046              		@ args = 0, pretend = 0, frame = 0
 5047              		@ frame_needed = 0, uses_anonymous_args = 0
 5048              	.LVL702:
 5049 0000 38B5     		push	{r3, r4, r5, lr}
 5050              	.LCFI62:
 5051              		.cfi_def_cfa_offset 16
 5052              		.cfi_offset 3, -16
 5053              		.cfi_offset 4, -12
 5054              		.cfi_offset 5, -8
 5055              		.cfi_offset 14, -4
 5056 0002 0D46     		mov	r5, r1
 5057              	.LVL703:
1699:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 5058              		.loc 1 1699 0
 5059 0004 FFF7FEFF 		bl	get_socket
 5060              	.LVL704:
1700:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 5061              		.loc 1 1700 0
 5062 0008 0028     		cmp	r0, #0
 5063 000a 35D0     		beq	.L520
 5064 000c 0446     		mov	r4, r0
1704:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) != NETCONN_TCP) {
 5065              		.loc 1 1704 0
 5066 000e 0068     		ldr	r0, [r0]
 5067              	.LVL705:
 5068 0010 F0B1     		cbz	r0, .L516
1705:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, EOPNOTSUPP);
 5069              		.loc 1 1705 0
 5070 0012 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 5071 0014 03F0F003 		and	r3, r3, #240
 5072 0018 102B     		cmp	r3, #16
 5073 001a 12D1     		bne	.L526
1714:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     shut_rx = 1;
 5074              		.loc 1 1714 0
 5075 001c 35B3     		cbz	r5, .L521
1716:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     shut_tx = 1;
 5076              		.loc 1 1716 0
 5077 001e 012D     		cmp	r5, #1
 5078 0020 27D0     		beq	.L522
1718:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     shut_rx = 1;
 5079              		.loc 1 1718 0
 5080 0022 022D     		cmp	r5, #2
 5081 0024 1BD1     		bne	.L527
1720:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
 5082              		.loc 1 1720 0
 5083 0026 0122     		movs	r2, #1
1719:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     shut_tx = 1;
 5084              		.loc 1 1719 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 149


 5085 0028 1146     		mov	r1, r2
 5086              	.L518:
 5087              	.LVL706:
1725:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 5088              		.loc 1 1725 0
 5089 002a FFF7FEFF 		bl	netconn_shutdown
 5090              	.LVL707:
 5091 002e 0546     		mov	r5, r0
 5092              	.LVL708:
 5093              	.LBB65:
1727:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return (err == ERR_OK ? 0 : -1);
 5094              		.loc 1 1727 0
 5095 0030 FFF7FEFF 		bl	err_to_errno
 5096              	.LVL709:
 5097 0034 2074     		strb	r0, [r4, #16]
 5098 0036 08B1     		cbz	r0, .L519
1727:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return (err == ERR_OK ? 0 : -1);
 5099              		.loc 1 1727 0 is_stmt 0 discriminator 1
 5100 0038 124B     		ldr	r3, .L528
 5101 003a 1860     		str	r0, [r3]
 5102              	.L519:
 5103              	.LBE65:
1728:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 5104              		.loc 1 1728 0 is_stmt 1
 5105 003c FDB9     		cbnz	r5, .L524
 5106 003e 0020     		movs	r0, #0
 5107              	.LVL710:
 5108 0040 38BD     		pop	{r3, r4, r5, pc}
 5109              	.LVL711:
 5110              	.L526:
 5111              	.LBB66:
1706:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
 5112              		.loc 1 1706 0
 5113 0042 5F23     		movs	r3, #95
 5114 0044 2374     		strb	r3, [r4, #16]
 5115 0046 0F4A     		ldr	r2, .L528
 5116 0048 1360     		str	r3, [r2]
 5117              	.LBE66:
1707:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 5118              		.loc 1 1707 0
 5119 004a 4FF0FF30 		mov	r0, #-1
 5120 004e 38BD     		pop	{r3, r4, r5, pc}
 5121              	.LVL712:
 5122              	.L516:
 5123              	.LBB67:
1710:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 5124              		.loc 1 1710 0
 5125 0050 6B23     		movs	r3, #107
 5126 0052 2374     		strb	r3, [r4, #16]
 5127 0054 0B4A     		ldr	r2, .L528
 5128 0056 1360     		str	r3, [r2]
 5129              	.LBE67:
1711:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 5130              		.loc 1 1711 0
 5131 0058 4FF0FF30 		mov	r0, #-1
 5132 005c 38BD     		pop	{r3, r4, r5, pc}
 5133              	.LVL713:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 150


 5134              	.L527:
 5135              	.LBB68:
1722:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 5136              		.loc 1 1722 0
 5137 005e 1623     		movs	r3, #22
 5138 0060 2374     		strb	r3, [r4, #16]
 5139 0062 084A     		ldr	r2, .L528
 5140 0064 1360     		str	r3, [r2]
 5141              	.LBE68:
1723:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 5142              		.loc 1 1723 0
 5143 0066 4FF0FF30 		mov	r0, #-1
 5144 006a 38BD     		pop	{r3, r4, r5, pc}
 5145              	.LVL714:
 5146              	.L521:
1695:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 5147              		.loc 1 1695 0
 5148 006c 0022     		movs	r2, #0
1715:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else if (how == SHUT_WR) {
 5149              		.loc 1 1715 0
 5150 006e 0121     		movs	r1, #1
 5151 0070 DBE7     		b	.L518
 5152              	.L522:
1717:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else if (how == SHUT_RDWR) {
 5153              		.loc 1 1717 0
 5154 0072 0122     		movs	r2, #1
1695:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 5155              		.loc 1 1695 0
 5156 0074 0021     		movs	r1, #0
 5157 0076 D8E7     		b	.L518
 5158              	.LVL715:
 5159              	.L520:
1701:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 5160              		.loc 1 1701 0
 5161 0078 4FF0FF30 		mov	r0, #-1
 5162              	.LVL716:
 5163 007c 38BD     		pop	{r3, r4, r5, pc}
 5164              	.LVL717:
 5165              	.L524:
1728:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 5166              		.loc 1 1728 0
 5167 007e 4FF0FF30 		mov	r0, #-1
 5168              	.LVL718:
1729:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 5169              		.loc 1 1729 0
 5170 0082 38BD     		pop	{r3, r4, r5, pc}
 5171              	.LVL719:
 5172              	.L529:
 5173              		.align	2
 5174              	.L528:
 5175 0084 00000000 		.word	errno
 5176              		.cfi_endproc
 5177              	.LFE180:
 5179              		.section	.text.lwip_getpeername,"ax",%progbits
 5180              		.align	1
 5181              		.global	lwip_getpeername
 5182              		.syntax unified
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 151


 5183              		.thumb
 5184              		.thumb_func
 5185              		.fpu fpv5-sp-d16
 5187              	lwip_getpeername:
 5188              	.LFB182:
1778:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return lwip_getaddrname(s, name, namelen, 0);
 5189              		.loc 1 1778 0
 5190              		.cfi_startproc
 5191              		@ args = 0, pretend = 0, frame = 0
 5192              		@ frame_needed = 0, uses_anonymous_args = 0
 5193              	.LVL720:
 5194 0000 08B5     		push	{r3, lr}
 5195              	.LCFI63:
 5196              		.cfi_def_cfa_offset 8
 5197              		.cfi_offset 3, -8
 5198              		.cfi_offset 14, -4
1779:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 5199              		.loc 1 1779 0
 5200 0002 0023     		movs	r3, #0
 5201 0004 FFF7FEFF 		bl	lwip_getaddrname
 5202              	.LVL721:
1780:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 5203              		.loc 1 1780 0
 5204 0008 08BD     		pop	{r3, pc}
 5205              		.cfi_endproc
 5206              	.LFE182:
 5208              		.section	.text.lwip_getsockname,"ax",%progbits
 5209              		.align	1
 5210              		.global	lwip_getsockname
 5211              		.syntax unified
 5212              		.thumb
 5213              		.thumb_func
 5214              		.fpu fpv5-sp-d16
 5216              	lwip_getsockname:
 5217              	.LFB183:
1784:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return lwip_getaddrname(s, name, namelen, 1);
 5218              		.loc 1 1784 0
 5219              		.cfi_startproc
 5220              		@ args = 0, pretend = 0, frame = 0
 5221              		@ frame_needed = 0, uses_anonymous_args = 0
 5222              	.LVL722:
 5223 0000 08B5     		push	{r3, lr}
 5224              	.LCFI64:
 5225              		.cfi_def_cfa_offset 8
 5226              		.cfi_offset 3, -8
 5227              		.cfi_offset 14, -4
1785:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 5228              		.loc 1 1785 0
 5229 0002 0123     		movs	r3, #1
 5230 0004 FFF7FEFF 		bl	lwip_getaddrname
 5231              	.LVL723:
1786:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 5232              		.loc 1 1786 0
 5233 0008 08BD     		pop	{r3, pc}
 5234              		.cfi_endproc
 5235              	.LFE183:
 5237              		.section	.text.lwip_getsockopt,"ax",%progbits
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 152


 5238              		.align	1
 5239              		.global	lwip_getsockopt
 5240              		.syntax unified
 5241              		.thumb
 5242              		.thumb_func
 5243              		.fpu fpv5-sp-d16
 5245              	lwip_getsockopt:
 5246              	.LFB184:
1790:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u8_t err;
 5247              		.loc 1 1790 0
 5248              		.cfi_startproc
 5249              		@ args = 4, pretend = 0, frame = 0
 5250              		@ frame_needed = 0, uses_anonymous_args = 0
 5251              	.LVL724:
 5252 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 5253              	.LCFI65:
 5254              		.cfi_def_cfa_offset 32
 5255              		.cfi_offset 4, -32
 5256              		.cfi_offset 5, -28
 5257              		.cfi_offset 6, -24
 5258              		.cfi_offset 7, -20
 5259              		.cfi_offset 8, -16
 5260              		.cfi_offset 9, -12
 5261              		.cfi_offset 10, -8
 5262              		.cfi_offset 14, -4
 5263 0004 82B0     		sub	sp, sp, #8
 5264              	.LCFI66:
 5265              		.cfi_def_cfa_offset 40
 5266 0006 8046     		mov	r8, r0
 5267 0008 8946     		mov	r9, r1
 5268 000a 9246     		mov	r10, r2
 5269 000c 1C46     		mov	r4, r3
 5270 000e 0A9D     		ldr	r5, [sp, #40]
1792:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if !LWIP_TCPIP_CORE_LOCKING
 5271              		.loc 1 1792 0
 5272 0010 FFF7FEFF 		bl	get_socket
 5273              	.LVL725:
1797:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 5274              		.loc 1 1797 0
 5275 0014 30B3     		cbz	r0, .L538
 5276 0016 0746     		mov	r7, r0
1801:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, EFAULT);
 5277              		.loc 1 1801 0
 5278 0018 002D     		cmp	r5, #0
 5279 001a 18BF     		it	ne
 5280 001c 002C     		cmpne	r4, #0
 5281 001e 17D0     		beq	.L541
1808:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = lwip_getsockopt_impl(s, level, optname, optval, optlen);
 5282              		.loc 1 1808 0
 5283 0020 124E     		ldr	r6, .L543
 5284 0022 3046     		mov	r0, r6
 5285              	.LVL726:
 5286 0024 FFF7FEFF 		bl	sys_mutex_lock
 5287              	.LVL727:
1809:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   UNLOCK_TCPIP_CORE();
 5288              		.loc 1 1809 0
 5289 0028 0095     		str	r5, [sp]
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 153


 5290 002a 2346     		mov	r3, r4
 5291 002c 5246     		mov	r2, r10
 5292 002e 4946     		mov	r1, r9
 5293 0030 4046     		mov	r0, r8
 5294 0032 FFF7FEFF 		bl	lwip_getsockopt_impl
 5295              	.LVL728:
 5296 0036 0446     		mov	r4, r0
 5297              	.LVL729:
1810:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 5298              		.loc 1 1810 0
 5299 0038 3046     		mov	r0, r6
 5300 003a FFF7FEFF 		bl	sys_mutex_unlock
 5301              	.LVL730:
 5302              	.LBB69:
1856:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return err ? -1 : 0;
 5303              		.loc 1 1856 0
 5304 003e 3C74     		strb	r4, [r7, #16]
 5305 0040 0CB1     		cbz	r4, .L537
1856:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return err ? -1 : 0;
 5306              		.loc 1 1856 0 is_stmt 0 discriminator 1
 5307 0042 0B4B     		ldr	r3, .L543+4
 5308 0044 1C60     		str	r4, [r3]
 5309              	.L537:
 5310              	.LBE69:
1857:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 5311              		.loc 1 1857 0 is_stmt 1
 5312 0046 54B9     		cbnz	r4, .L542
 5313 0048 0020     		movs	r0, #0
 5314              	.LVL731:
 5315              	.L534:
1858:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 5316              		.loc 1 1858 0
 5317 004a 02B0     		add	sp, sp, #8
 5318              	.LCFI67:
 5319              		.cfi_remember_state
 5320              		.cfi_def_cfa_offset 32
 5321              		@ sp needed
 5322 004c BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 5323              	.LVL732:
 5324              	.L541:
 5325              	.LCFI68:
 5326              		.cfi_restore_state
 5327              	.LBB70:
1802:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 5328              		.loc 1 1802 0
 5329 0050 0E23     		movs	r3, #14
 5330 0052 0374     		strb	r3, [r0, #16]
 5331 0054 064A     		ldr	r2, .L543+4
 5332 0056 1360     		str	r3, [r2]
 5333              	.LBE70:
1803:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 5334              		.loc 1 1803 0
 5335 0058 4FF0FF30 		mov	r0, #-1
 5336              	.LVL733:
 5337 005c F5E7     		b	.L534
 5338              	.LVL734:
 5339              	.L542:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 154


1857:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 5340              		.loc 1 1857 0
 5341 005e 4FF0FF30 		mov	r0, #-1
 5342 0062 F2E7     		b	.L534
 5343              	.LVL735:
 5344              	.L538:
1798:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 5345              		.loc 1 1798 0
 5346 0064 4FF0FF30 		mov	r0, #-1
 5347              	.LVL736:
 5348 0068 EFE7     		b	.L534
 5349              	.L544:
 5350 006a 00BF     		.align	2
 5351              	.L543:
 5352 006c 00000000 		.word	lock_tcpip_core
 5353 0070 00000000 		.word	errno
 5354              		.cfi_endproc
 5355              	.LFE184:
 5357              		.section	.text.lwip_setsockopt,"ax",%progbits
 5358              		.align	1
 5359              		.global	lwip_setsockopt
 5360              		.syntax unified
 5361              		.thumb
 5362              		.thumb_func
 5363              		.fpu fpv5-sp-d16
 5365              	lwip_setsockopt:
 5366              	.LFB186:
2196:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u8_t err = 0;
 5367              		.loc 1 2196 0
 5368              		.cfi_startproc
 5369              		@ args = 4, pretend = 0, frame = 0
 5370              		@ frame_needed = 0, uses_anonymous_args = 0
 5371              	.LVL737:
 5372 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 5373              	.LCFI69:
 5374              		.cfi_def_cfa_offset 28
 5375              		.cfi_offset 4, -28
 5376              		.cfi_offset 5, -24
 5377              		.cfi_offset 6, -20
 5378              		.cfi_offset 7, -16
 5379              		.cfi_offset 8, -12
 5380              		.cfi_offset 9, -8
 5381              		.cfi_offset 14, -4
 5382 0004 83B0     		sub	sp, sp, #12
 5383              	.LCFI70:
 5384              		.cfi_def_cfa_offset 40
 5385 0006 0746     		mov	r7, r0
 5386 0008 8846     		mov	r8, r1
 5387 000a 9146     		mov	r9, r2
 5388 000c 1C46     		mov	r4, r3
 5389              	.LVL738:
2198:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if !LWIP_TCPIP_CORE_LOCKING
 5390              		.loc 1 2198 0
 5391 000e FFF7FEFF 		bl	get_socket
 5392              	.LVL739:
2203:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 5393              		.loc 1 2203 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 155


 5394 0012 20B3     		cbz	r0, .L549
 5395 0014 0646     		mov	r6, r0
2207:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, EFAULT);
 5396              		.loc 1 2207 0
 5397 0016 C4B1     		cbz	r4, .L552
2214:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = lwip_setsockopt_impl(s, level, optname, optval, optlen);
 5398              		.loc 1 2214 0
 5399 0018 124D     		ldr	r5, .L554
 5400 001a 2846     		mov	r0, r5
 5401              	.LVL740:
 5402 001c FFF7FEFF 		bl	sys_mutex_lock
 5403              	.LVL741:
2215:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   UNLOCK_TCPIP_CORE();
 5404              		.loc 1 2215 0
 5405 0020 0A9B     		ldr	r3, [sp, #40]
 5406 0022 0093     		str	r3, [sp]
 5407 0024 2346     		mov	r3, r4
 5408 0026 4A46     		mov	r2, r9
 5409 0028 4146     		mov	r1, r8
 5410 002a 3846     		mov	r0, r7
 5411 002c FFF7FEFF 		bl	lwip_setsockopt_impl
 5412              	.LVL742:
 5413 0030 0446     		mov	r4, r0
 5414              	.LVL743:
2216:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 5415              		.loc 1 2216 0
 5416 0032 2846     		mov	r0, r5
 5417 0034 FFF7FEFF 		bl	sys_mutex_unlock
 5418              	.LVL744:
 5419              	.LBB71:
2257:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return err ? -1 : 0;
 5420              		.loc 1 2257 0
 5421 0038 3474     		strb	r4, [r6, #16]
 5422 003a 0CB1     		cbz	r4, .L548
2257:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return err ? -1 : 0;
 5423              		.loc 1 2257 0 is_stmt 0 discriminator 1
 5424 003c 0A4B     		ldr	r3, .L554+4
 5425 003e 1C60     		str	r4, [r3]
 5426              	.L548:
 5427              	.LBE71:
2258:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 5428              		.loc 1 2258 0 is_stmt 1
 5429 0040 54B9     		cbnz	r4, .L553
 5430 0042 0020     		movs	r0, #0
 5431              	.LVL745:
 5432              	.L545:
2259:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 5433              		.loc 1 2259 0
 5434 0044 03B0     		add	sp, sp, #12
 5435              	.LCFI71:
 5436              		.cfi_remember_state
 5437              		.cfi_def_cfa_offset 28
 5438              		@ sp needed
 5439 0046 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 5440              	.LVL746:
 5441              	.L552:
 5442              	.LCFI72:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 156


 5443              		.cfi_restore_state
 5444              	.LBB72:
2208:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 5445              		.loc 1 2208 0
 5446 004a 0E23     		movs	r3, #14
 5447 004c 0374     		strb	r3, [r0, #16]
 5448 004e 064A     		ldr	r2, .L554+4
 5449 0050 1360     		str	r3, [r2]
 5450              	.LBE72:
2209:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 5451              		.loc 1 2209 0
 5452 0052 4FF0FF30 		mov	r0, #-1
 5453              	.LVL747:
 5454 0056 F5E7     		b	.L545
 5455              	.LVL748:
 5456              	.L553:
2258:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 5457              		.loc 1 2258 0
 5458 0058 4FF0FF30 		mov	r0, #-1
 5459 005c F2E7     		b	.L545
 5460              	.LVL749:
 5461              	.L549:
2204:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 5462              		.loc 1 2204 0
 5463 005e 4FF0FF30 		mov	r0, #-1
 5464              	.LVL750:
 5465 0062 EFE7     		b	.L545
 5466              	.L555:
 5467              		.align	2
 5468              	.L554:
 5469 0064 00000000 		.word	lock_tcpip_core
 5470 0068 00000000 		.word	errno
 5471              		.cfi_endproc
 5472              	.LFE186:
 5474              		.section	.text.lwip_ioctl,"ax",%progbits
 5475              		.align	1
 5476              		.global	lwip_ioctl
 5477              		.syntax unified
 5478              		.thumb
 5479              		.thumb_func
 5480              		.fpu fpv5-sp-d16
 5482              	lwip_ioctl:
 5483              	.LFB188:
2613:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2614:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
2615:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_ioctl(int s, long cmd, void *argp)
2616:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 5484              		.loc 1 2616 0
 5485              		.cfi_startproc
 5486              		@ args = 0, pretend = 0, frame = 0
 5487              		@ frame_needed = 0, uses_anonymous_args = 0
 5488              	.LVL751:
 5489 0000 38B5     		push	{r3, r4, r5, lr}
 5490              	.LCFI73:
 5491              		.cfi_def_cfa_offset 16
 5492              		.cfi_offset 3, -16
 5493              		.cfi_offset 4, -12
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 157


 5494              		.cfi_offset 5, -8
 5495              		.cfi_offset 14, -4
 5496 0002 0D46     		mov	r5, r1
 5497 0004 1446     		mov	r4, r2
2617:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = get_socket(s);
 5498              		.loc 1 2617 0
 5499 0006 FFF7FEFF 		bl	get_socket
 5500              	.LVL752:
2618:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u8_t val;
2619:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_RCVBUF
2620:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u16_t buflen = 0;
2621:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int recv_avail;
2622:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SO_RCVBUF */
2623:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2624:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 5501              		.loc 1 2624 0
 5502 000a 00B3     		cbz	r0, .L563
 5503 000c 0346     		mov	r3, r0
2625:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
2626:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2627:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2628:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   switch (cmd) {
 5504              		.loc 1 2628 0
 5505 000e 114A     		ldr	r2, .L568
 5506 0010 9542     		cmp	r5, r2
 5507 0012 15D1     		bne	.L566
 5508              	.LVL753:
2629:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_RCVBUF || LWIP_FIONREAD_LINUXMODE
2630:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case FIONREAD:
2631:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (!argp) {
2632:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, EINVAL);
2633:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
2634:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
2635:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_FIONREAD_LINUXMODE
2636:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) != NETCONN_TCP) {
2637:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       struct pbuf *p;
2638:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (sock->lastdata) {
2639:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         p = ((struct netbuf *)sock->lastdata)->p;
2640:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         *((int*)argp) = p->tot_len - sock->lastoffset;
2641:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
2642:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         struct netbuf *rxbuf;
2643:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         err_t err;
2644:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (sock->rcvevent <= 0) {
2645:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           *((int*)argp) = 0;
2646:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
2647:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           err = netconn_recv(sock->conn, &rxbuf);
2648:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (err != ERR_OK) {
2649:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             *((int*)argp) = 0;
2650:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           } else {
2651:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             sock->lastdata = rxbuf;
2652:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             sock->lastoffset = 0;
2653:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             *((int*)argp) = rxbuf->p->tot_len;
2654:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
2655:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
2656:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2657:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return 0;
2658:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 158


2659:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_FIONREAD_LINUXMODE */
2660:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2661:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_RCVBUF
2662:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* we come here if either LWIP_FIONREAD_LINUXMODE==0 or this is a TCP socket */
2663:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SYS_ARCH_GET(sock->conn->recv_avail, recv_avail);
2664:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (recv_avail < 0) {
2665:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       recv_avail = 0;
2666:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
2667:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     *((int*)argp) = recv_avail;
2668:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2669:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Check if there is data left from the last recv operation. /maq 041215 */
2670:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (sock->lastdata) {
2671:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       struct pbuf *p = (struct pbuf *)sock->lastdata;
2672:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) != NETCONN_TCP) {
2673:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         p = ((struct netbuf *)p)->p;
2674:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2675:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       buflen = p->tot_len;
2676:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       buflen -= sock->lastoffset;
2677:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2678:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *((int*)argp) += buflen;
2679:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
2680:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2681:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_ioctl(%d, FIONREAD, %p) = %"U16_F"\n", s, argp, *((u16_t*)arg
2682:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, 0);
2683:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return 0;
2684:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_SO_RCVBUF */
2685:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2686:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SO_RCVBUF */
2687:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SO_RCVBUF || LWIP_FIONREAD_LINUXMODE */
2688:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2689:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case (long)FIONBIO:
2690:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     val = 0;
2691:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (argp && *(u32_t*)argp) {
 5509              		.loc 1 2691 0
 5510 0014 54B1     		cbz	r4, .L564
 5511              		.loc 1 2691 0 is_stmt 0 discriminator 1
 5512 0016 2268     		ldr	r2, [r4]
 5513 0018 52B9     		cbnz	r2, .L565
 5514              	.L560:
 5515              	.LVL754:
2692:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       val = 1;
2693:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
2694:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     netconn_set_nonblocking(sock->conn, val);
 5516              		.loc 1 2694 0 is_stmt 1
 5517 001a 5AB1     		cbz	r2, .L561
 5518              		.loc 1 2694 0 is_stmt 0 discriminator 1
 5519 001c 1968     		ldr	r1, [r3]
 5520 001e 0A7F     		ldrb	r2, [r1, #28]	@ zero_extendqisi2
 5521              	.LVL755:
 5522 0020 42F00202 		orr	r2, r2, #2
 5523 0024 0A77     		strb	r2, [r1, #28]
 5524              	.L562:
 5525              	.LVL756:
 5526              	.LBB73:
2695:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_ioctl(%d, FIONBIO, %d)\n", s, val));
2696:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, 0);
 5527              		.loc 1 2696 0 is_stmt 1
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 159


 5528 0026 0020     		movs	r0, #0
 5529              	.LVL757:
 5530 0028 1874     		strb	r0, [r3, #16]
 5531              	.LBE73:
2697:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return 0;
 5532              		.loc 1 2697 0
 5533 002a 38BD     		pop	{r3, r4, r5, pc}
 5534              	.LVL758:
 5535              	.L564:
2690:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (argp && *(u32_t*)argp) {
 5536              		.loc 1 2690 0
 5537 002c 0022     		movs	r2, #0
 5538 002e F4E7     		b	.L560
 5539              	.L565:
2692:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 5540              		.loc 1 2692 0
 5541 0030 0122     		movs	r2, #1
 5542 0032 F2E7     		b	.L560
 5543              	.LVL759:
 5544              	.L561:
2694:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_ioctl(%d, FIONBIO, %d)\n", s, val));
 5545              		.loc 1 2694 0 discriminator 2
 5546 0034 1968     		ldr	r1, [r3]
 5547 0036 0A7F     		ldrb	r2, [r1, #28]	@ zero_extendqisi2
 5548              	.LVL760:
 5549 0038 22F00202 		bic	r2, r2, #2
 5550 003c 0A77     		strb	r2, [r1, #28]
 5551 003e F2E7     		b	.L562
 5552              	.L566:
 5553              	.LVL761:
 5554              	.LBB74:
2698:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2699:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   default:
2700:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2701:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } /* switch (cmd) */
2702:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_ioctl(%d, UNIMPL: 0x%lx, %p)\n", s, cmd, argp));
2703:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, ENOSYS); /* not yet implemented */
 5555              		.loc 1 2703 0
 5556 0040 2622     		movs	r2, #38
 5557 0042 0274     		strb	r2, [r0, #16]
 5558 0044 044B     		ldr	r3, .L568+4
 5559 0046 1A60     		str	r2, [r3]
 5560              	.LBE74:
2704:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return -1;
 5561              		.loc 1 2704 0
 5562 0048 4FF0FF30 		mov	r0, #-1
 5563              	.LVL762:
 5564 004c 38BD     		pop	{r3, r4, r5, pc}
 5565              	.LVL763:
 5566              	.L563:
2625:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 5567              		.loc 1 2625 0
 5568 004e 4FF0FF30 		mov	r0, #-1
 5569              	.LVL764:
2705:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 5570              		.loc 1 2705 0
 5571 0052 38BD     		pop	{r3, r4, r5, pc}
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 160


 5572              	.LVL765:
 5573              	.L569:
 5574              		.align	2
 5575              	.L568:
 5576 0054 7E660480 		.word	-2147195266
 5577 0058 00000000 		.word	errno
 5578              		.cfi_endproc
 5579              	.LFE188:
 5581              		.section	.text.lwip_fcntl,"ax",%progbits
 5582              		.align	1
 5583              		.global	lwip_fcntl
 5584              		.syntax unified
 5585              		.thumb
 5586              		.thumb_func
 5587              		.fpu fpv5-sp-d16
 5589              	lwip_fcntl:
 5590              	.LFB189:
2706:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2707:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** A minimal implementation of fcntl.
2708:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Currently only the commands F_GETFL and F_SETFL are implemented.
2709:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Only the flag O_NONBLOCK is implemented.
2710:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
2711:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
2712:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_fcntl(int s, int cmd, int val)
2713:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 5591              		.loc 1 2713 0
 5592              		.cfi_startproc
 5593              		@ args = 0, pretend = 0, frame = 0
 5594              		@ frame_needed = 0, uses_anonymous_args = 0
 5595              	.LVL766:
 5596 0000 38B5     		push	{r3, r4, r5, lr}
 5597              	.LCFI74:
 5598              		.cfi_def_cfa_offset 16
 5599              		.cfi_offset 3, -16
 5600              		.cfi_offset 4, -12
 5601              		.cfi_offset 5, -8
 5602              		.cfi_offset 14, -4
 5603 0002 0C46     		mov	r4, r1
 5604 0004 1546     		mov	r5, r2
2714:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = get_socket(s);
 5605              		.loc 1 2714 0
 5606 0006 FFF7FEFF 		bl	get_socket
 5607              	.LVL767:
2715:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int ret = -1;
2716:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2717:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 5608              		.loc 1 2717 0
 5609 000a 68B3     		cbz	r0, .L578
 5610 000c 0346     		mov	r3, r0
2718:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
2719:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2720:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2721:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   switch (cmd) {
 5611              		.loc 1 2721 0
 5612 000e 032C     		cmp	r4, #3
 5613 0010 08D0     		beq	.L573
 5614 0012 042C     		cmp	r4, #4
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 161


 5615 0014 0DD0     		beq	.L574
 5616              	.LVL768:
 5617              	.LBB75:
2722:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case F_GETFL:
2723:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ret = netconn_is_nonblocking(sock->conn) ? O_NONBLOCK : 0;
2724:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, 0);
2725:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2726:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case F_SETFL:
2727:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if ((val & ~O_NONBLOCK) == 0) {
2728:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* only O_NONBLOCK, all other bits are zero */
2729:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       netconn_set_nonblocking(sock->conn, val & O_NONBLOCK);
2730:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       ret = 0;
2731:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, 0);
2732:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
2733:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, ENOSYS); /* not yet implemented */
2734:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
2735:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2736:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   default:
2737:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_fcntl(%d, UNIMPL: %d, %d)\n", s, cmd, val));
2738:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, ENOSYS); /* not yet implemented */
 5618              		.loc 1 2738 0
 5619 0016 2622     		movs	r2, #38
 5620 0018 0274     		strb	r2, [r0, #16]
 5621 001a 154B     		ldr	r3, .L581
 5622 001c 1A60     		str	r2, [r3]
 5623              	.LBE75:
2715:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 5624              		.loc 1 2715 0
 5625 001e 4FF0FF30 		mov	r0, #-1
 5626              	.LVL769:
 5627 0022 38BD     		pop	{r3, r4, r5, pc}
 5628              	.LVL770:
 5629              	.L573:
2723:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, 0);
 5630              		.loc 1 2723 0
 5631 0024 0268     		ldr	r2, [r0]
 5632 0026 107F     		ldrb	r0, [r2, #28]	@ zero_extendqisi2
 5633              	.LVL771:
 5634 0028 C0F34000 		ubfx	r0, r0, #1, #1
 5635              	.LVL772:
 5636              	.LBB76:
2724:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
 5637              		.loc 1 2724 0
 5638 002c 0022     		movs	r2, #0
 5639 002e 1A74     		strb	r2, [r3, #16]
 5640              	.LBE76:
2725:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case F_SETFL:
 5641              		.loc 1 2725 0
 5642 0030 38BD     		pop	{r3, r4, r5, pc}
 5643              	.LVL773:
 5644              	.L574:
2727:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* only O_NONBLOCK, all other bits are zero */
 5645              		.loc 1 2727 0
 5646 0032 35F00100 		bics	r0, r5, #1
 5647              	.LVL774:
 5648 0036 10D1     		bne	.L575
2729:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       ret = 0;
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 162


 5649              		.loc 1 2729 0
 5650 0038 15F0010F 		tst	r5, #1
 5651 003c 07D0     		beq	.L576
2729:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       ret = 0;
 5652              		.loc 1 2729 0 is_stmt 0 discriminator 1
 5653 003e 1968     		ldr	r1, [r3]
 5654 0040 0A7F     		ldrb	r2, [r1, #28]	@ zero_extendqisi2
 5655 0042 42F00202 		orr	r2, r2, #2
 5656 0046 0A77     		strb	r2, [r1, #28]
 5657              	.L577:
 5658              	.LVL775:
 5659              	.LBB77:
2731:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
 5660              		.loc 1 2731 0 is_stmt 1
 5661 0048 0022     		movs	r2, #0
 5662 004a 1A74     		strb	r2, [r3, #16]
 5663              	.LBE77:
 5664 004c 38BD     		pop	{r3, r4, r5, pc}
 5665              	.LVL776:
 5666              	.L576:
2729:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       ret = 0;
 5667              		.loc 1 2729 0 discriminator 2
 5668 004e 1968     		ldr	r1, [r3]
 5669 0050 0A7F     		ldrb	r2, [r1, #28]	@ zero_extendqisi2
 5670 0052 22F00202 		bic	r2, r2, #2
 5671 0056 0A77     		strb	r2, [r1, #28]
 5672 0058 F6E7     		b	.L577
 5673              	.L575:
 5674              	.LVL777:
 5675              	.LBB78:
2733:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 5676              		.loc 1 2733 0
 5677 005a 2622     		movs	r2, #38
 5678 005c 1A74     		strb	r2, [r3, #16]
 5679 005e 044B     		ldr	r3, .L581
 5680              	.LVL778:
 5681 0060 1A60     		str	r2, [r3]
 5682              	.LBE78:
2715:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 5683              		.loc 1 2715 0
 5684 0062 4FF0FF30 		mov	r0, #-1
 5685 0066 38BD     		pop	{r3, r4, r5, pc}
 5686              	.LVL779:
 5687              	.L578:
2718:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 5688              		.loc 1 2718 0
 5689 0068 4FF0FF30 		mov	r0, #-1
 5690              	.LVL780:
2739:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2740:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2741:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return ret;
2742:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 5691              		.loc 1 2742 0
 5692 006c 38BD     		pop	{r3, r4, r5, pc}
 5693              	.LVL781:
 5694              	.L582:
 5695 006e 00BF     		.align	2
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 163


 5696              	.L581:
 5697 0070 00000000 		.word	errno
 5698              		.cfi_endproc
 5699              	.LFE189:
 5701              		.section	.bss.select_cb_ctr,"aw",%nobits
 5702              		.align	2
 5703              		.set	.LANCHOR2,. + 0
 5706              	select_cb_ctr:
 5707 0000 00000000 		.space	4
 5708              		.section	.bss.select_cb_list,"aw",%nobits
 5709              		.align	2
 5710              		.set	.LANCHOR1,. + 0
 5713              	select_cb_list:
 5714 0000 00000000 		.space	4
 5715              		.section	.bss.sockets,"aw",%nobits
 5716              		.align	2
 5717              		.set	.LANCHOR0,. + 0
 5720              	sockets:
 5721 0000 00000000 		.space	80
 5721      00000000 
 5721      00000000 
 5721      00000000 
 5721      00000000 
 5722              		.section	.rodata.event_callback.str1.4,"aMS",%progbits,1
 5723              		.align	2
 5724              	.LC3:
 5725 0000 756E6B6E 		.ascii	"unknown event\000"
 5725      6F776E20 
 5725      6576656E 
 5725      7400
 5726              		.section	.rodata.lwip_accept.str1.4,"aMS",%progbits,1
 5727              		.align	2
 5728              	.LC4:
 5729 0000 6E657763 		.ascii	"newconn != NULL\000"
 5729      6F6E6E20 
 5729      213D204E 
 5729      554C4C00 
 5730              	.LC5:
 5731 0010 696E7661 		.ascii	"invalid socket index\000"
 5731      6C696420 
 5731      736F636B 
 5731      65742069 
 5731      6E646578 
 5732 0025 000000   		.space	3
 5733              	.LC6:
 5734 0028 6E657763 		.ascii	"newconn->callback == event_callback\000"
 5734      6F6E6E2D 
 5734      3E63616C 
 5734      6C626163 
 5734      6B203D3D 
 5735              	.LC7:
 5736 004c 61646472 		.ascii	"addr valid but addrlen NULL\000"
 5736      2076616C 
 5736      69642062 
 5736      75742061 
 5736      6464726C 
 5737              		.section	.rodata.lwip_bind.str1.4,"aMS",%progbits,1
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 164


 5738              		.align	2
 5739              	.LC8:
 5740 0000 6C776970 		.ascii	"lwip_bind: invalid address\000"
 5740      5F62696E 
 5740      643A2069 
 5740      6E76616C 
 5740      69642061 
 5741              		.section	.rodata.lwip_close.str1.4,"aMS",%progbits,1
 5742              		.align	2
 5743              	.LC9:
 5744 0000 736F636B 		.ascii	"sock->lastdata == NULL\000"
 5744      2D3E6C61 
 5744      73746461 
 5744      7461203D 
 5744      3D204E55 
 5745              		.section	.rodata.lwip_connect.str1.4,"aMS",%progbits,1
 5746              		.align	2
 5747              	.LC10:
 5748 0000 6C776970 		.ascii	"lwip_connect: invalid address\000"
 5748      5F636F6E 
 5748      6E656374 
 5748      3A20696E 
 5748      76616C69 
 5749              		.section	.rodata.lwip_recvfrom.str1.4,"aMS",%progbits,1
 5750              		.align	2
 5751              	.LC11:
 5752 0000 62756620 		.ascii	"buf != NULL\000"
 5752      213D204E 
 5752      554C4C00 
 5753              	.LC12:
 5754 000c 696E7661 		.ascii	"invalid copylen, len would underflow\000"
 5754      6C696420 
 5754      636F7079 
 5754      6C656E2C 
 5754      206C656E 
 5755              		.section	.rodata.lwip_select.str1.4,"aMS",%progbits,1
 5756              		.align	2
 5757              	.LC19:
 5758 0000 736F636B 		.ascii	"sock->select_waiting > 0\000"
 5758      2D3E7365 
 5758      6C656374 
 5758      5F776169 
 5758      74696E67 
 5759 0019 000000   		.space	3
 5760              	.LC20:
 5761 001c 73656C65 		.ascii	"select_cb.prev == NULL\000"
 5761      63745F63 
 5761      622E7072 
 5761      6576203D 
 5761      3D204E55 
 5762 0033 00       		.space	1
 5763              	.LC21:
 5764 0034 73656C65 		.ascii	"select_cb.prev != NULL\000"
 5764      63745F63 
 5764      622E7072 
 5764      65762021 
 5764      3D204E55 
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 165


 5765              		.section	.rodata.lwip_selscan.str1.4,"aMS",%progbits,1
 5766              		.align	2
 5767              	.LC0:
 5768 0000 4D696464 		.ascii	"Middlewares/Third_Party/LwIP/src/api/sockets.c\000"
 5768      6C657761 
 5768      7265732F 
 5768      54686972 
 5768      645F5061 
 5769 002f 00       		.space	1
 5770              	.LC1:
 5771 0030 6E726561 		.ascii	"nready >= 0\000"
 5771      6479203E 
 5771      3D203000 
 5772              	.LC2:
 5773 003c 41737365 		.ascii	"Assertion \"%s\" failed at line %d in %s\012\000"
 5773      7274696F 
 5773      6E202225 
 5773      73222066 
 5773      61696C65 
 5774              		.section	.rodata.lwip_sendmsg.str1.4,"aMS",%progbits,1
 5775              		.align	2
 5776              	.LC13:
 5777 0000 6C776970 		.ascii	"lwip_sendmsg: invalid msghdr\000"
 5777      5F73656E 
 5777      646D7367 
 5777      3A20696E 
 5777      76616C69 
 5778 001d 000000   		.space	3
 5779              	.LC14:
 5780 0020 6C776970 		.ascii	"lwip_sendmsg: invalid msghdr iov\000"
 5780      5F73656E 
 5780      646D7367 
 5780      3A20696E 
 5780      76616C69 
 5781 0041 000000   		.space	3
 5782              	.LC15:
 5783 0044 6C776970 		.ascii	"lwip_sendmsg: invalid msghdr name\000"
 5783      5F73656E 
 5783      646D7367 
 5783      3A20696E 
 5783      76616C69 
 5784 0066 0000     		.space	2
 5785              	.LC16:
 5786 0068 696F765F 		.ascii	"iov_len < u16_t\000"
 5786      6C656E20 
 5786      3C207531 
 5786      365F7400 
 5787              		.section	.rodata.lwip_sendto.str1.4,"aMS",%progbits,1
 5788              		.align	2
 5789              	.LC17:
 5790 0000 6C776970 		.ascii	"lwip_sendto: size must fit in u16_t\000"
 5790      5F73656E 
 5790      64746F3A 
 5790      2073697A 
 5790      65206D75 
 5791              	.LC18:
 5792 0024 6C776970 		.ascii	"lwip_sendto: invalid address\000"
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 166


 5792      5F73656E 
 5792      64746F3A 
 5792      20696E76 
 5792      616C6964 
 5793              		.text
 5794              	.Letext0:
 5795              		.file 2 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\machine\\_default_types.h"
 5796              		.file 3 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\sys\\_stdint.h"
 5797              		.file 4 "Drivers/CMSIS/Include/core_cm7.h"
 5798              		.file 5 "Drivers/CMSIS/Device/ST/STM32F7xx/Include/system_stm32f7xx.h"
 5799              		.file 6 "c:\\gcc_toolchain\\6_2017-q1-update\\lib\\gcc\\arm-none-eabi\\6.3.1\\include\\stddef.h"
 5800              		.file 7 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\sys\\lock.h"
 5801              		.file 8 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\sys\\_types.h"
 5802              		.file 9 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\sys\\reent.h"
 5803              		.file 10 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\sys\\_timeval.h"
 5804              		.file 11 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\sys\\select.h"
 5805              		.file 12 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\sys\\types.h"
 5806              		.file 13 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\stdlib.h"
 5807              		.file 14 "Middlewares/Third_Party/LwIP/system/arch/cc.h"
 5808              		.file 15 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\time.h"
 5809              		.file 16 "Middlewares/Third_Party/LwIP/src/include/lwip/arch.h"
 5810              		.file 17 "Middlewares/Third_Party/LwIP/src/include/lwip/ip4_addr.h"
 5811              		.file 18 "Middlewares/Third_Party/LwIP/src/include/lwip/ip_addr.h"
 5812              		.file 19 "Middlewares/Third_Party/LwIP/src/include/lwip/err.h"
 5813              		.file 20 "Middlewares/Third_Party/LwIP/src/include/lwip/inet.h"
 5814              		.file 21 "Middlewares/Third_Party/LwIP/src/include/lwip/errno.h"
 5815              		.file 22 "Middlewares/Third_Party/LwIP/src/include/lwip/sockets.h"
 5816              		.file 23 "Middlewares/Third_Party/LwIP/src/include/lwip/pbuf.h"
 5817              		.file 24 "Middlewares/Third_Party/LwIP/src/include/lwip/netbuf.h"
 5818              		.file 25 "Middlewares/Third_Party/FreeRTOS/Source/include/queue.h"
 5819              		.file 26 "Middlewares/Third_Party/FreeRTOS/Source/include/semphr.h"
 5820              		.file 27 "Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.h"
 5821              		.file 28 "Middlewares/Third_Party/LwIP/system/arch/sys_arch.h"
 5822              		.file 29 "Middlewares/Third_Party/LwIP/src/include/lwip/api.h"
 5823              		.file 30 "Middlewares/Third_Party/LwIP/src/include/lwip/ip.h"
 5824              		.file 31 "Middlewares/Third_Party/LwIP/src/include/lwip/tcp.h"
 5825              		.file 32 "Middlewares/Third_Party/LwIP/src/include/lwip/udp.h"
 5826              		.file 33 "Middlewares/Third_Party/LwIP/src/include/lwip/memp.h"
 5827              		.file 34 "Middlewares/Third_Party/LwIP/src/include/lwip/priv/memp_priv.h"
 5828              		.file 35 "Middlewares/Third_Party/LwIP/src/include/lwip/netif.h"
 5829              		.file 36 "Middlewares/Third_Party/LwIP/src/include/lwip/prot/ip4.h"
 5830              		.file 37 "Middlewares/Third_Party/LwIP/src/include/lwip/timeouts.h"
 5831              		.file 38 "Middlewares/Third_Party/LwIP/src/include/lwip/tcpip.h"
 5832              		.file 39 "Middlewares/Third_Party/LwIP/src/include/lwip/sys.h"
 5833              		.file 40 "Middlewares/Third_Party/LwIP/src/include/lwip/def.h"
 5834              		.file 41 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\stdio.h"
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 167


DEFINED SYMBOLS
                            *ABS*:00000000 sockets.c
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:18     .text.get_socket:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:24     .text.get_socket:00000000 get_socket
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:91     .text.get_socket:00000034 $d
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:97     .text.tryget_socket:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:103    .text.tryget_socket:00000000 tryget_socket
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:143    .text.tryget_socket:00000024 $d
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:148    .text.lwip_setsockopt_impl:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:154    .text.lwip_setsockopt_impl:00000000 lwip_setsockopt_impl
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:511    .text.lwip_getsockopt_impl:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:517    .text.lwip_getsockopt_impl:00000000 lwip_getsockopt_impl
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:1035   .text.lwip_getsockopt_impl:00000244 $d
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:1040   .text.alloc_socket:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:1046   .text.alloc_socket:00000000 alloc_socket
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:1155   .text.alloc_socket:00000078 $d
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:1160   .text.lwip_selscan:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:1166   .text.lwip_selscan:00000000 lwip_selscan
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:1467   .text.lwip_selscan:00000198 $d
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:1474   .text.lwip_getaddrname:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:1480   .text.lwip_getaddrname:00000000 lwip_getaddrname
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:1593   .text.lwip_getaddrname:00000080 $d
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:1598   .text.event_callback:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:1604   .text.event_callback:00000000 event_callback
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:1652   .text.event_callback:00000034 $d
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:1883   .text.event_callback:00000154 $d
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:1892   .text.free_socket:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:1898   .text.free_socket:00000000 free_socket
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:1955   .text.lwip_socket_thread_init:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:1962   .text.lwip_socket_thread_init:00000000 lwip_socket_thread_init
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:1974   .text.lwip_socket_thread_cleanup:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:1981   .text.lwip_socket_thread_cleanup:00000000 lwip_socket_thread_cleanup
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:1993   .text.lwip_accept:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:2000   .text.lwip_accept:00000000 lwip_accept
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:2323   .text.lwip_accept:000001ac $d
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:2336   .text.lwip_bind:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:2343   .text.lwip_bind:00000000 lwip_bind
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:2476   .text.lwip_bind:0000008c $d
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:2484   .text.lwip_close:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:2491   .text.lwip_close:00000000 lwip_close
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:2593   .text.lwip_close:00000068 $d
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:2601   .text.lwip_connect:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:2608   .text.lwip_connect:00000000 lwip_connect
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:2751   .text.lwip_connect:00000090 $d
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:2759   .text.lwip_listen:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:2766   .text.lwip_listen:00000000 lwip_listen
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:2868   .text.lwip_listen:00000060 $d
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:2873   .text.lwip_recvfrom:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:2880   .text.lwip_recvfrom:00000000 lwip_recvfrom
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:3340   .text.lwip_recvfrom:00000244 $d
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:3349   .text.lwip_read:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:3356   .text.lwip_read:00000000 lwip_read
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:3386   .text.lwip_recv:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:3393   .text.lwip_recv:00000000 lwip_recv
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:3424   .text.lwip_sendmsg:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:3431   .text.lwip_sendmsg:00000000 lwip_sendmsg
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:3896   .text.lwip_sendmsg:0000024c $d
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 168


C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:3908   .text.lwip_sendto:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:3915   .text.lwip_sendto:00000000 lwip_sendto
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:4137   .text.lwip_send:00000000 lwip_send
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:4121   .text.lwip_sendto:000000f4 $d
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:4130   .text.lwip_send:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:4262   .text.lwip_send:00000088 $d
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:4267   .text.lwip_socket:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:4274   .text.lwip_socket:00000000 lwip_socket
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:4402   .text.lwip_socket:00000080 $d
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:4408   .text.lwip_write:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:4415   .text.lwip_write:00000000 lwip_write
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:4437   .text.lwip_writev:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:4444   .text.lwip_writev:00000000 lwip_writev
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:4490   .text.lwip_select:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:4497   .text.lwip_select:00000000 lwip_select
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:5022   .text.lwip_select:000002c8 $d
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:5035   .text.lwip_shutdown:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:5042   .text.lwip_shutdown:00000000 lwip_shutdown
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:5175   .text.lwip_shutdown:00000084 $d
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:5180   .text.lwip_getpeername:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:5187   .text.lwip_getpeername:00000000 lwip_getpeername
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:5209   .text.lwip_getsockname:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:5216   .text.lwip_getsockname:00000000 lwip_getsockname
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:5238   .text.lwip_getsockopt:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:5245   .text.lwip_getsockopt:00000000 lwip_getsockopt
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:5352   .text.lwip_getsockopt:0000006c $d
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:5358   .text.lwip_setsockopt:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:5365   .text.lwip_setsockopt:00000000 lwip_setsockopt
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:5469   .text.lwip_setsockopt:00000064 $d
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:5475   .text.lwip_ioctl:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:5482   .text.lwip_ioctl:00000000 lwip_ioctl
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:5576   .text.lwip_ioctl:00000054 $d
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:5582   .text.lwip_fcntl:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:5589   .text.lwip_fcntl:00000000 lwip_fcntl
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:5697   .text.lwip_fcntl:00000070 $d
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:5702   .bss.select_cb_ctr:00000000 $d
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:5706   .bss.select_cb_ctr:00000000 select_cb_ctr
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:5709   .bss.select_cb_list:00000000 $d
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:5713   .bss.select_cb_list:00000000 select_cb_list
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:5716   .bss.sockets:00000000 $d
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:5720   .bss.sockets:00000000 sockets
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:5723   .rodata.event_callback.str1.4:00000000 $d
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:5727   .rodata.lwip_accept.str1.4:00000000 $d
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:5738   .rodata.lwip_bind.str1.4:00000000 $d
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:5742   .rodata.lwip_close.str1.4:00000000 $d
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:5746   .rodata.lwip_connect.str1.4:00000000 $d
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:5750   .rodata.lwip_recvfrom.str1.4:00000000 $d
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:5756   .rodata.lwip_select.str1.4:00000000 $d
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:5766   .rodata.lwip_selscan.str1.4:00000000 $d
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:5775   .rodata.lwip_sendmsg.str1.4:00000000 $d
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:5788   .rodata.lwip_sendto.str1.4:00000000 $d
                     .debug_frame:00000010 $d
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:1658   .text.event_callback:00000039 $d
C:\Users\Student\AppData\Local\Temp\ccf85eJv.s:1658   .text.event_callback:0000003a $t

UNDEFINED SYMBOLS
errno
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccf85eJv.s 			page 169


err_to_errno
sys_arch_unprotect
sys_arch_protect
printf
netconn_getaddr
lwip_htons
memcpy
sys_sem_signal
netbuf_delete
pbuf_free
netconn_accept
netconn_delete
netconn_bind
netconn_connect
netconn_disconnect
netconn_listen_with_backlog
netconn_recv
netconn_recv_tcp_pbuf
pbuf_copy_partial
netconn_write_partly
netbuf_new
pbuf_cat
pbuf_alloc
netconn_send
netbuf_ref
netbuf_free
netconn_new_with_proto_and_callback
sys_sem_new
sys_arch_sem_wait
sys_sem_free
netconn_shutdown
sys_mutex_lock
sys_mutex_unlock
lock_tcpip_core
