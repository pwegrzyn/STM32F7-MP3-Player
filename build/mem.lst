ARM GAS  C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s 			page 1


   1              		.cpu cortex-m7
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"mem.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.plug_holes,"ax",%progbits
  18              		.align	1
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu fpv5-sp-d16
  24              	plug_holes:
  25              	.LFB159:
  26              		.file 1 "Middlewares/Third_Party/LwIP/src/core/mem.c"
   1:Middlewares/Third_Party/LwIP/src/core/mem.c **** /**
   2:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * @file
   3:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * Dynamic memory manager
   4:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *
   5:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * This is a lightweight replacement for the standard C library malloc().
   6:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *
   7:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * If you want to use the standard C library malloc() instead, define
   8:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * MEM_LIBC_MALLOC to 1 in your lwipopts.h
   9:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *
  10:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * To let mem_malloc() use pools (prevents fragmentation and is much faster than
  11:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * a heap but might waste some memory), define MEM_USE_POOLS to 1, define
  12:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * MEMP_USE_CUSTOM_POOLS to 1 and create a file "lwippools.h" that includes a list
  13:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * of pools like this (more pools can be added between _START and _END):
  14:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *
  15:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * Define three pools with sizes 256, 512, and 1512 bytes
  16:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * LWIP_MALLOC_MEMPOOL_START
  17:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * LWIP_MALLOC_MEMPOOL(20, 256)
  18:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * LWIP_MALLOC_MEMPOOL(10, 512)
  19:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * LWIP_MALLOC_MEMPOOL(5, 1512)
  20:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * LWIP_MALLOC_MEMPOOL_END
  21:Middlewares/Third_Party/LwIP/src/core/mem.c ****  */
  22:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
  23:Middlewares/Third_Party/LwIP/src/core/mem.c **** /*
  24:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * Copyright (c) 2001-2004 Swedish Institute of Computer Science.
  25:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * All rights reserved.
  26:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *
  27:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * Redistribution and use in source and binary forms, with or without modification,
  28:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * are permitted provided that the following conditions are met:
  29:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *
  30:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * 1. Redistributions of source code must retain the above copyright notice,
  31:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *    this list of conditions and the following disclaimer.
  32:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s 			page 2


  33:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *    this list of conditions and the following disclaimer in the documentation
  34:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *    and/or other materials provided with the distribution.
  35:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * 3. The name of the author may not be used to endorse or promote products
  36:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *    derived from this software without specific prior written permission.
  37:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *
  38:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR IMPLIED
  39:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  40:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT
  41:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  42:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT
  43:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
  44:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
  45:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING
  46:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY
  47:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * OF SUCH DAMAGE.
  48:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *
  49:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * This file is part of the lwIP TCP/IP stack.
  50:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *
  51:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * Author: Adam Dunkels <adam@sics.se>
  52:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *         Simon Goldschmidt
  53:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *
  54:Middlewares/Third_Party/LwIP/src/core/mem.c ****  */
  55:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
  56:Middlewares/Third_Party/LwIP/src/core/mem.c **** #include "lwip/opt.h"
  57:Middlewares/Third_Party/LwIP/src/core/mem.c **** #include "lwip/mem.h"
  58:Middlewares/Third_Party/LwIP/src/core/mem.c **** #include "lwip/def.h"
  59:Middlewares/Third_Party/LwIP/src/core/mem.c **** #include "lwip/sys.h"
  60:Middlewares/Third_Party/LwIP/src/core/mem.c **** #include "lwip/stats.h"
  61:Middlewares/Third_Party/LwIP/src/core/mem.c **** #include "lwip/err.h"
  62:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
  63:Middlewares/Third_Party/LwIP/src/core/mem.c **** #include <string.h>
  64:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
  65:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if MEM_LIBC_MALLOC
  66:Middlewares/Third_Party/LwIP/src/core/mem.c **** #include <stdlib.h> /* for malloc()/free() */
  67:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif
  68:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
  69:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if MEM_LIBC_MALLOC || MEM_USE_POOLS
  70:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
  71:Middlewares/Third_Party/LwIP/src/core/mem.c **** /** mem_init is not used when using pools instead of a heap or using
  72:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * C library malloc().
  73:Middlewares/Third_Party/LwIP/src/core/mem.c ****  */
  74:Middlewares/Third_Party/LwIP/src/core/mem.c **** void
  75:Middlewares/Third_Party/LwIP/src/core/mem.c **** mem_init(void)
  76:Middlewares/Third_Party/LwIP/src/core/mem.c **** {
  77:Middlewares/Third_Party/LwIP/src/core/mem.c **** }
  78:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
  79:Middlewares/Third_Party/LwIP/src/core/mem.c **** /** mem_trim is not used when using pools instead of a heap or using
  80:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * C library malloc(): we can't free part of a pool element and the stack
  81:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * support mem_trim() to return a different pointer
  82:Middlewares/Third_Party/LwIP/src/core/mem.c ****  */
  83:Middlewares/Third_Party/LwIP/src/core/mem.c **** void*
  84:Middlewares/Third_Party/LwIP/src/core/mem.c **** mem_trim(void *mem, mem_size_t size)
  85:Middlewares/Third_Party/LwIP/src/core/mem.c **** {
  86:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_UNUSED_ARG(size);
  87:Middlewares/Third_Party/LwIP/src/core/mem.c ****   return mem;
  88:Middlewares/Third_Party/LwIP/src/core/mem.c **** }
  89:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif /* MEM_LIBC_MALLOC || MEM_USE_POOLS */
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s 			page 3


  90:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
  91:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if MEM_LIBC_MALLOC
  92:Middlewares/Third_Party/LwIP/src/core/mem.c **** /* lwIP heap implemented using C library malloc() */
  93:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
  94:Middlewares/Third_Party/LwIP/src/core/mem.c **** /* in case C library malloc() needs extra protection,
  95:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * allow these defines to be overridden.
  96:Middlewares/Third_Party/LwIP/src/core/mem.c ****  */
  97:Middlewares/Third_Party/LwIP/src/core/mem.c **** #ifndef mem_clib_free
  98:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define mem_clib_free free
  99:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif
 100:Middlewares/Third_Party/LwIP/src/core/mem.c **** #ifndef mem_clib_malloc
 101:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define mem_clib_malloc malloc
 102:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif
 103:Middlewares/Third_Party/LwIP/src/core/mem.c **** #ifndef mem_clib_calloc
 104:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define mem_clib_calloc calloc
 105:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif
 106:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 107:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if LWIP_STATS && MEM_STATS
 108:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define MEM_LIBC_STATSHELPER_SIZE LWIP_MEM_ALIGN_SIZE(sizeof(mem_size_t))
 109:Middlewares/Third_Party/LwIP/src/core/mem.c **** #else
 110:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define MEM_LIBC_STATSHELPER_SIZE 0
 111:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif
 112:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 113:Middlewares/Third_Party/LwIP/src/core/mem.c **** /**
 114:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * Allocate a block of memory with a minimum of 'size' bytes.
 115:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *
 116:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * @param size is the minimum size of the requested block in bytes.
 117:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * @return pointer to allocated memory or NULL if no free memory was found.
 118:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *
 119:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * Note that the returned value must always be aligned (as defined by MEM_ALIGNMENT).
 120:Middlewares/Third_Party/LwIP/src/core/mem.c ****  */
 121:Middlewares/Third_Party/LwIP/src/core/mem.c **** void *
 122:Middlewares/Third_Party/LwIP/src/core/mem.c **** mem_malloc(mem_size_t size)
 123:Middlewares/Third_Party/LwIP/src/core/mem.c **** {
 124:Middlewares/Third_Party/LwIP/src/core/mem.c ****   void* ret = mem_clib_malloc(size + MEM_LIBC_STATSHELPER_SIZE);
 125:Middlewares/Third_Party/LwIP/src/core/mem.c ****   if (ret == NULL) {
 126:Middlewares/Third_Party/LwIP/src/core/mem.c ****     MEM_STATS_INC(err);
 127:Middlewares/Third_Party/LwIP/src/core/mem.c ****   } else {
 128:Middlewares/Third_Party/LwIP/src/core/mem.c ****     LWIP_ASSERT("malloc() must return aligned memory", LWIP_MEM_ALIGN(ret) == ret);
 129:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if LWIP_STATS && MEM_STATS
 130:Middlewares/Third_Party/LwIP/src/core/mem.c ****     *(mem_size_t*)ret = size;
 131:Middlewares/Third_Party/LwIP/src/core/mem.c ****     ret = (u8_t*)ret + MEM_LIBC_STATSHELPER_SIZE;
 132:Middlewares/Third_Party/LwIP/src/core/mem.c ****     MEM_STATS_INC_USED(used, size);
 133:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif
 134:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 135:Middlewares/Third_Party/LwIP/src/core/mem.c ****   return ret;
 136:Middlewares/Third_Party/LwIP/src/core/mem.c **** }
 137:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 138:Middlewares/Third_Party/LwIP/src/core/mem.c **** /** Put memory back on the heap
 139:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *
 140:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * @param rmem is the pointer as returned by a previous call to mem_malloc()
 141:Middlewares/Third_Party/LwIP/src/core/mem.c ****  */
 142:Middlewares/Third_Party/LwIP/src/core/mem.c **** void
 143:Middlewares/Third_Party/LwIP/src/core/mem.c **** mem_free(void *rmem)
 144:Middlewares/Third_Party/LwIP/src/core/mem.c **** {
 145:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_ASSERT("rmem != NULL", (rmem != NULL));
 146:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_ASSERT("rmem == MEM_ALIGN(rmem)", (rmem == LWIP_MEM_ALIGN(rmem)));
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s 			page 4


 147:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if LWIP_STATS && MEM_STATS
 148:Middlewares/Third_Party/LwIP/src/core/mem.c ****   rmem = (u8_t*)rmem - MEM_LIBC_STATSHELPER_SIZE;
 149:Middlewares/Third_Party/LwIP/src/core/mem.c ****   MEM_STATS_DEC_USED(used, *(mem_size_t*)rmem);
 150:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif
 151:Middlewares/Third_Party/LwIP/src/core/mem.c ****   mem_clib_free(rmem);
 152:Middlewares/Third_Party/LwIP/src/core/mem.c **** }
 153:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 154:Middlewares/Third_Party/LwIP/src/core/mem.c **** #elif MEM_USE_POOLS
 155:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 156:Middlewares/Third_Party/LwIP/src/core/mem.c **** /* lwIP heap implemented with different sized pools */
 157:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 158:Middlewares/Third_Party/LwIP/src/core/mem.c **** /**
 159:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * Allocate memory: determine the smallest pool that is big enough
 160:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * to contain an element of 'size' and get an element from that pool.
 161:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *
 162:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * @param size the size in bytes of the memory needed
 163:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * @return a pointer to the allocated memory or NULL if the pool is empty
 164:Middlewares/Third_Party/LwIP/src/core/mem.c ****  */
 165:Middlewares/Third_Party/LwIP/src/core/mem.c **** void *
 166:Middlewares/Third_Party/LwIP/src/core/mem.c **** mem_malloc(mem_size_t size)
 167:Middlewares/Third_Party/LwIP/src/core/mem.c **** {
 168:Middlewares/Third_Party/LwIP/src/core/mem.c ****   void *ret;
 169:Middlewares/Third_Party/LwIP/src/core/mem.c ****   struct memp_malloc_helper *element = NULL;
 170:Middlewares/Third_Party/LwIP/src/core/mem.c ****   memp_t poolnr;
 171:Middlewares/Third_Party/LwIP/src/core/mem.c ****   mem_size_t required_size = size + LWIP_MEM_ALIGN_SIZE(sizeof(struct memp_malloc_helper));
 172:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 173:Middlewares/Third_Party/LwIP/src/core/mem.c ****   for (poolnr = MEMP_POOL_FIRST; poolnr <= MEMP_POOL_LAST; poolnr = (memp_t)(poolnr + 1)) {
 174:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* is this pool big enough to hold an element of the required size
 175:Middlewares/Third_Party/LwIP/src/core/mem.c ****        plus a struct memp_malloc_helper that saves the pool this element came from? */
 176:Middlewares/Third_Party/LwIP/src/core/mem.c ****     if (required_size <= memp_pools[poolnr]->size) {
 177:Middlewares/Third_Party/LwIP/src/core/mem.c ****       element = (struct memp_malloc_helper*)memp_malloc(poolnr);
 178:Middlewares/Third_Party/LwIP/src/core/mem.c ****       if (element == NULL) {
 179:Middlewares/Third_Party/LwIP/src/core/mem.c ****         /* No need to DEBUGF or ASSERT: This error is already taken care of in memp.c */
 180:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if MEM_USE_POOLS_TRY_BIGGER_POOL
 181:Middlewares/Third_Party/LwIP/src/core/mem.c ****         /** Try a bigger pool if this one is empty! */
 182:Middlewares/Third_Party/LwIP/src/core/mem.c ****         if (poolnr < MEMP_POOL_LAST) {
 183:Middlewares/Third_Party/LwIP/src/core/mem.c ****           continue;
 184:Middlewares/Third_Party/LwIP/src/core/mem.c ****         }
 185:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif /* MEM_USE_POOLS_TRY_BIGGER_POOL */
 186:Middlewares/Third_Party/LwIP/src/core/mem.c ****         MEM_STATS_INC(err);
 187:Middlewares/Third_Party/LwIP/src/core/mem.c ****         return NULL;
 188:Middlewares/Third_Party/LwIP/src/core/mem.c ****       }
 189:Middlewares/Third_Party/LwIP/src/core/mem.c ****       break;
 190:Middlewares/Third_Party/LwIP/src/core/mem.c ****     }
 191:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 192:Middlewares/Third_Party/LwIP/src/core/mem.c ****   if (poolnr > MEMP_POOL_LAST) {
 193:Middlewares/Third_Party/LwIP/src/core/mem.c ****     LWIP_ASSERT("mem_malloc(): no pool is that big!", 0);
 194:Middlewares/Third_Party/LwIP/src/core/mem.c ****     MEM_STATS_INC(err);
 195:Middlewares/Third_Party/LwIP/src/core/mem.c ****     return NULL;
 196:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 197:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 198:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* save the pool number this element came from */
 199:Middlewares/Third_Party/LwIP/src/core/mem.c ****   element->poolnr = poolnr;
 200:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* and return a pointer to the memory directly after the struct memp_malloc_helper */
 201:Middlewares/Third_Party/LwIP/src/core/mem.c ****   ret = (u8_t*)element + LWIP_MEM_ALIGN_SIZE(sizeof(struct memp_malloc_helper));
 202:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 203:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if MEMP_OVERFLOW_CHECK || (LWIP_STATS && MEM_STATS)
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s 			page 5


 204:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* truncating to u16_t is safe because struct memp_desc::size is u16_t */
 205:Middlewares/Third_Party/LwIP/src/core/mem.c ****   element->size = (u16_t)size;
 206:Middlewares/Third_Party/LwIP/src/core/mem.c ****   MEM_STATS_INC_USED(used, element->size);
 207:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif /* MEMP_OVERFLOW_CHECK || (LWIP_STATS && MEM_STATS) */
 208:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if MEMP_OVERFLOW_CHECK
 209:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* initialize unused memory (diff between requested size and selected pool's size) */
 210:Middlewares/Third_Party/LwIP/src/core/mem.c ****   memset((u8_t*)ret + size, 0xcd, memp_pools[poolnr]->size - size);
 211:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif /* MEMP_OVERFLOW_CHECK */
 212:Middlewares/Third_Party/LwIP/src/core/mem.c ****   return ret;
 213:Middlewares/Third_Party/LwIP/src/core/mem.c **** }
 214:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 215:Middlewares/Third_Party/LwIP/src/core/mem.c **** /**
 216:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * Free memory previously allocated by mem_malloc. Loads the pool number
 217:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * and calls memp_free with that pool number to put the element back into
 218:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * its pool
 219:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *
 220:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * @param rmem the memory element to free
 221:Middlewares/Third_Party/LwIP/src/core/mem.c ****  */
 222:Middlewares/Third_Party/LwIP/src/core/mem.c **** void
 223:Middlewares/Third_Party/LwIP/src/core/mem.c **** mem_free(void *rmem)
 224:Middlewares/Third_Party/LwIP/src/core/mem.c **** {
 225:Middlewares/Third_Party/LwIP/src/core/mem.c ****   struct memp_malloc_helper *hmem;
 226:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 227:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_ASSERT("rmem != NULL", (rmem != NULL));
 228:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_ASSERT("rmem == MEM_ALIGN(rmem)", (rmem == LWIP_MEM_ALIGN(rmem)));
 229:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 230:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* get the original struct memp_malloc_helper */
 231:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* cast through void* to get rid of alignment warnings */
 232:Middlewares/Third_Party/LwIP/src/core/mem.c ****   hmem = (struct memp_malloc_helper*)(void*)((u8_t*)rmem - LWIP_MEM_ALIGN_SIZE(sizeof(struct memp_m
 233:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 234:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_ASSERT("hmem != NULL", (hmem != NULL));
 235:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_ASSERT("hmem == MEM_ALIGN(hmem)", (hmem == LWIP_MEM_ALIGN(hmem)));
 236:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_ASSERT("hmem->poolnr < MEMP_MAX", (hmem->poolnr < MEMP_MAX));
 237:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 238:Middlewares/Third_Party/LwIP/src/core/mem.c ****   MEM_STATS_DEC_USED(used, hmem->size);
 239:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if MEMP_OVERFLOW_CHECK
 240:Middlewares/Third_Party/LwIP/src/core/mem.c ****   {
 241:Middlewares/Third_Party/LwIP/src/core/mem.c ****      u16_t i;
 242:Middlewares/Third_Party/LwIP/src/core/mem.c ****      LWIP_ASSERT("MEM_USE_POOLS: invalid chunk size",
 243:Middlewares/Third_Party/LwIP/src/core/mem.c ****         hmem->size <= memp_pools[hmem->poolnr]->size);
 244:Middlewares/Third_Party/LwIP/src/core/mem.c ****      /* check that unused memory remained untouched (diff between requested size and selected pool'
 245:Middlewares/Third_Party/LwIP/src/core/mem.c ****      for (i = hmem->size; i < memp_pools[hmem->poolnr]->size; i++) {
 246:Middlewares/Third_Party/LwIP/src/core/mem.c ****         u8_t data = *((u8_t*)rmem + i);
 247:Middlewares/Third_Party/LwIP/src/core/mem.c ****         LWIP_ASSERT("MEM_USE_POOLS: mem overflow detected", data == 0xcd);
 248:Middlewares/Third_Party/LwIP/src/core/mem.c ****      }
 249:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 250:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif /* MEMP_OVERFLOW_CHECK */
 251:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 252:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* and put it in the pool we saved earlier */
 253:Middlewares/Third_Party/LwIP/src/core/mem.c ****   memp_free(hmem->poolnr, hmem);
 254:Middlewares/Third_Party/LwIP/src/core/mem.c **** }
 255:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 256:Middlewares/Third_Party/LwIP/src/core/mem.c **** #else /* MEM_USE_POOLS */
 257:Middlewares/Third_Party/LwIP/src/core/mem.c **** /* lwIP replacement for your libc malloc() */
 258:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 259:Middlewares/Third_Party/LwIP/src/core/mem.c **** /**
 260:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * The heap is made up as a list of structs of this type.
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s 			page 6


 261:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * This does not have to be aligned since for getting its size,
 262:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * we only use the macro SIZEOF_STRUCT_MEM, which automatically aligns.
 263:Middlewares/Third_Party/LwIP/src/core/mem.c ****  */
 264:Middlewares/Third_Party/LwIP/src/core/mem.c **** struct mem {
 265:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /** index (-> ram[next]) of the next struct */
 266:Middlewares/Third_Party/LwIP/src/core/mem.c ****   mem_size_t next;
 267:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /** index (-> ram[prev]) of the previous struct */
 268:Middlewares/Third_Party/LwIP/src/core/mem.c ****   mem_size_t prev;
 269:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /** 1: this area is used; 0: this area is unused */
 270:Middlewares/Third_Party/LwIP/src/core/mem.c ****   u8_t used;
 271:Middlewares/Third_Party/LwIP/src/core/mem.c **** };
 272:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 273:Middlewares/Third_Party/LwIP/src/core/mem.c **** /** All allocated blocks will be MIN_SIZE bytes big, at least!
 274:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * MIN_SIZE can be overridden to suit your needs. Smaller values save space,
 275:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * larger values could prevent too small blocks to fragment the RAM too much. */
 276:Middlewares/Third_Party/LwIP/src/core/mem.c **** #ifndef MIN_SIZE
 277:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define MIN_SIZE             12
 278:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif /* MIN_SIZE */
 279:Middlewares/Third_Party/LwIP/src/core/mem.c **** /* some alignment macros: we define them here for better source code layout */
 280:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define MIN_SIZE_ALIGNED     LWIP_MEM_ALIGN_SIZE(MIN_SIZE)
 281:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define SIZEOF_STRUCT_MEM    LWIP_MEM_ALIGN_SIZE(sizeof(struct mem))
 282:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define MEM_SIZE_ALIGNED     LWIP_MEM_ALIGN_SIZE(MEM_SIZE)
 283:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 284:Middlewares/Third_Party/LwIP/src/core/mem.c **** /** If you want to relocate the heap to external memory, simply define
 285:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * LWIP_RAM_HEAP_POINTER as a void-pointer to that location.
 286:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * If so, make sure the memory at that location is big enough (see below on
 287:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * how that space is calculated). */
 288:Middlewares/Third_Party/LwIP/src/core/mem.c **** #ifndef LWIP_RAM_HEAP_POINTER
 289:Middlewares/Third_Party/LwIP/src/core/mem.c **** /** the heap. we need one struct mem at the end and some room for alignment */
 290:Middlewares/Third_Party/LwIP/src/core/mem.c **** LWIP_DECLARE_MEMORY_ALIGNED(ram_heap, MEM_SIZE_ALIGNED + (2U*SIZEOF_STRUCT_MEM));
 291:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define LWIP_RAM_HEAP_POINTER ram_heap
 292:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif /* LWIP_RAM_HEAP_POINTER */
 293:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 294:Middlewares/Third_Party/LwIP/src/core/mem.c **** /** pointer to the heap (ram_heap): for alignment, ram is now a pointer instead of an array */
 295:Middlewares/Third_Party/LwIP/src/core/mem.c **** static u8_t *ram;
 296:Middlewares/Third_Party/LwIP/src/core/mem.c **** /** the last entry, always unused! */
 297:Middlewares/Third_Party/LwIP/src/core/mem.c **** static struct mem *ram_end;
 298:Middlewares/Third_Party/LwIP/src/core/mem.c **** /** pointer to the lowest free block, this is used for faster search */
 299:Middlewares/Third_Party/LwIP/src/core/mem.c **** static struct mem *lfree;
 300:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 301:Middlewares/Third_Party/LwIP/src/core/mem.c **** /** concurrent access protection */
 302:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if !NO_SYS
 303:Middlewares/Third_Party/LwIP/src/core/mem.c **** static sys_mutex_t mem_mutex;
 304:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif
 305:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 306:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if LWIP_ALLOW_MEM_FREE_FROM_OTHER_CONTEXT
 307:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 308:Middlewares/Third_Party/LwIP/src/core/mem.c **** static volatile u8_t mem_free_count;
 309:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 310:Middlewares/Third_Party/LwIP/src/core/mem.c **** /* Allow mem_free from other (e.g. interrupt) context */
 311:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define LWIP_MEM_FREE_DECL_PROTECT()  SYS_ARCH_DECL_PROTECT(lev_free)
 312:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define LWIP_MEM_FREE_PROTECT()       SYS_ARCH_PROTECT(lev_free)
 313:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define LWIP_MEM_FREE_UNPROTECT()     SYS_ARCH_UNPROTECT(lev_free)
 314:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define LWIP_MEM_ALLOC_DECL_PROTECT() SYS_ARCH_DECL_PROTECT(lev_alloc)
 315:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define LWIP_MEM_ALLOC_PROTECT()      SYS_ARCH_PROTECT(lev_alloc)
 316:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define LWIP_MEM_ALLOC_UNPROTECT()    SYS_ARCH_UNPROTECT(lev_alloc)
 317:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s 			page 7


 318:Middlewares/Third_Party/LwIP/src/core/mem.c **** #else /* LWIP_ALLOW_MEM_FREE_FROM_OTHER_CONTEXT */
 319:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 320:Middlewares/Third_Party/LwIP/src/core/mem.c **** /* Protect the heap only by using a semaphore */
 321:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define LWIP_MEM_FREE_DECL_PROTECT()
 322:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define LWIP_MEM_FREE_PROTECT()    sys_mutex_lock(&mem_mutex)
 323:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define LWIP_MEM_FREE_UNPROTECT()  sys_mutex_unlock(&mem_mutex)
 324:Middlewares/Third_Party/LwIP/src/core/mem.c **** /* mem_malloc is protected using semaphore AND LWIP_MEM_ALLOC_PROTECT */
 325:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define LWIP_MEM_ALLOC_DECL_PROTECT()
 326:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define LWIP_MEM_ALLOC_PROTECT()
 327:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define LWIP_MEM_ALLOC_UNPROTECT()
 328:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 329:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif /* LWIP_ALLOW_MEM_FREE_FROM_OTHER_CONTEXT */
 330:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 331:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 332:Middlewares/Third_Party/LwIP/src/core/mem.c **** /**
 333:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * "Plug holes" by combining adjacent empty struct mems.
 334:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * After this function is through, there should not exist
 335:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * one empty struct mem pointing to another empty struct mem.
 336:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *
 337:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * @param mem this points to a struct mem which just has been freed
 338:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * @internal this function is only called by mem_free() and mem_trim()
 339:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *
 340:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * This assumes access to the heap is protected by the calling function
 341:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * already.
 342:Middlewares/Third_Party/LwIP/src/core/mem.c ****  */
 343:Middlewares/Third_Party/LwIP/src/core/mem.c **** static void
 344:Middlewares/Third_Party/LwIP/src/core/mem.c **** plug_holes(struct mem *mem)
 345:Middlewares/Third_Party/LwIP/src/core/mem.c **** {
  27              		.loc 1 345 0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              	.LVL0:
  32 0000 10B5     		push	{r4, lr}
  33              	.LCFI0:
  34              		.cfi_def_cfa_offset 8
  35              		.cfi_offset 4, -8
  36              		.cfi_offset 14, -4
  37 0002 0446     		mov	r4, r0
 346:Middlewares/Third_Party/LwIP/src/core/mem.c ****   struct mem *nmem;
 347:Middlewares/Third_Party/LwIP/src/core/mem.c ****   struct mem *pmem;
 348:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 349:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_ASSERT("plug_holes: mem >= ram", (u8_t *)mem >= ram);
  38              		.loc 1 349 0
  39 0004 2D4B     		ldr	r3, .L17
  40 0006 1B68     		ldr	r3, [r3]
  41 0008 8342     		cmp	r3, r0
  42 000a 31D8     		bhi	.L11
  43              	.LVL1:
  44              	.L2:
 350:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_ASSERT("plug_holes: mem < ram_end", (u8_t *)mem < (u8_t *)ram_end);
  45              		.loc 1 350 0
  46 000c 2C4B     		ldr	r3, .L17+4
  47 000e 1B68     		ldr	r3, [r3]
  48 0010 A342     		cmp	r3, r4
  49 0012 35D9     		bls	.L12
  50              	.L3:
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s 			page 8


 351:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_ASSERT("plug_holes: mem->used == 0", mem->used == 0);
  51              		.loc 1 351 0
  52 0014 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
  53 0016 002B     		cmp	r3, #0
  54 0018 3AD1     		bne	.L13
  55              	.L4:
 352:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 353:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* plug hole forward */
 354:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_ASSERT("plug_holes: mem->next <= MEM_SIZE_ALIGNED", mem->next <= MEM_SIZE_ALIGNED);
  56              		.loc 1 354 0
  57 001a 2388     		ldrh	r3, [r4]
  58 001c B3F5C86F 		cmp	r3, #1600
  59 0020 3ED8     		bhi	.L14
  60              	.L5:
 355:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 356:Middlewares/Third_Party/LwIP/src/core/mem.c ****   nmem = (struct mem *)(void *)&ram[mem->next];
  61              		.loc 1 356 0
  62 0022 264B     		ldr	r3, .L17
  63 0024 1B68     		ldr	r3, [r3]
  64 0026 2188     		ldrh	r1, [r4]
  65 0028 5A18     		adds	r2, r3, r1
  66              	.LVL2:
 357:Middlewares/Third_Party/LwIP/src/core/mem.c ****   if (mem != nmem && nmem->used == 0 && (u8_t *)nmem != (u8_t *)ram_end) {
  67              		.loc 1 357 0
  68 002a 9442     		cmp	r4, r2
  69 002c 0FD0     		beq	.L6
  70              		.loc 1 357 0 is_stmt 0 discriminator 1
  71 002e 1079     		ldrb	r0, [r2, #4]	@ zero_extendqisi2
  72 0030 68B9     		cbnz	r0, .L6
  73              		.loc 1 357 0 discriminator 2
  74 0032 2348     		ldr	r0, .L17+4
  75 0034 0068     		ldr	r0, [r0]
  76 0036 9042     		cmp	r0, r2
  77 0038 09D0     		beq	.L6
 358:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* if mem->next is unused and not end of ram, combine mem and mem->next */
 359:Middlewares/Third_Party/LwIP/src/core/mem.c ****     if (lfree == nmem) {
  78              		.loc 1 359 0 is_stmt 1
  79 003a 2248     		ldr	r0, .L17+8
  80 003c 0068     		ldr	r0, [r0]
  81 003e 9042     		cmp	r0, r2
  82 0040 36D0     		beq	.L15
  83              	.LVL3:
  84              	.L7:
 360:Middlewares/Third_Party/LwIP/src/core/mem.c ****       lfree = mem;
 361:Middlewares/Third_Party/LwIP/src/core/mem.c ****     }
 362:Middlewares/Third_Party/LwIP/src/core/mem.c ****     mem->next = nmem->next;
  85              		.loc 1 362 0
  86 0042 5A5A     		ldrh	r2, [r3, r1]
  87 0044 2280     		strh	r2, [r4]	@ movhi
 363:Middlewares/Third_Party/LwIP/src/core/mem.c ****     ((struct mem *)(void *)&ram[nmem->next])->prev = (mem_size_t)((u8_t *)mem - ram);
  88              		.loc 1 363 0
  89 0046 E01A     		subs	r0, r4, r3
  90 0048 5A5A     		ldrh	r2, [r3, r1]
  91 004a 1A44     		add	r2, r2, r3
  92 004c 5080     		strh	r0, [r2, #2]	@ movhi
  93              	.L6:
 364:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s 			page 9


 365:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 366:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* plug hole backward */
 367:Middlewares/Third_Party/LwIP/src/core/mem.c ****   pmem = (struct mem *)(void *)&ram[mem->prev];
  94              		.loc 1 367 0
  95 004e 6188     		ldrh	r1, [r4, #2]
  96              	.LVL4:
  97 0050 5A18     		adds	r2, r3, r1
  98              	.LVL5:
 368:Middlewares/Third_Party/LwIP/src/core/mem.c ****   if (pmem != mem && pmem->used == 0) {
  99              		.loc 1 368 0
 100 0052 9442     		cmp	r4, r2
 101 0054 0BD0     		beq	.L1
 102              		.loc 1 368 0 is_stmt 0 discriminator 1
 103 0056 1079     		ldrb	r0, [r2, #4]	@ zero_extendqisi2
 104 0058 48B9     		cbnz	r0, .L1
 369:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* if mem->prev is unused, combine mem and mem->prev */
 370:Middlewares/Third_Party/LwIP/src/core/mem.c ****     if (lfree == mem) {
 105              		.loc 1 370 0 is_stmt 1
 106 005a 1A48     		ldr	r0, .L17+8
 107 005c 0068     		ldr	r0, [r0]
 108 005e A042     		cmp	r0, r4
 109 0060 29D0     		beq	.L16
 110              	.L9:
 371:Middlewares/Third_Party/LwIP/src/core/mem.c ****       lfree = pmem;
 372:Middlewares/Third_Party/LwIP/src/core/mem.c ****     }
 373:Middlewares/Third_Party/LwIP/src/core/mem.c ****     pmem->next = mem->next;
 111              		.loc 1 373 0
 112 0062 2088     		ldrh	r0, [r4]
 113 0064 5852     		strh	r0, [r3, r1]	@ movhi
 374:Middlewares/Third_Party/LwIP/src/core/mem.c ****     ((struct mem *)(void *)&ram[mem->next])->prev = (mem_size_t)((u8_t *)pmem - ram);
 114              		.loc 1 374 0
 115 0066 D21A     		subs	r2, r2, r3
 116              	.LVL6:
 117 0068 2188     		ldrh	r1, [r4]
 118              	.LVL7:
 119 006a 0B44     		add	r3, r3, r1
 120 006c 5A80     		strh	r2, [r3, #2]	@ movhi
 121              	.L1:
 375:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 376:Middlewares/Third_Party/LwIP/src/core/mem.c **** }
 122              		.loc 1 376 0
 123 006e 10BD     		pop	{r4, pc}
 124              	.LVL8:
 125              	.L11:
 349:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_ASSERT("plug_holes: mem < ram_end", (u8_t *)mem < (u8_t *)ram_end);
 126              		.loc 1 349 0 discriminator 1
 127 0070 154B     		ldr	r3, .L17+12
 128 0072 40F25D12 		movw	r2, #349
 129 0076 1549     		ldr	r1, .L17+16
 130 0078 1548     		ldr	r0, .L17+20
 131              	.LVL9:
 132 007a FFF7FEFF 		bl	printf
 133              	.LVL10:
 134 007e C5E7     		b	.L2
 135              	.L12:
 350:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_ASSERT("plug_holes: mem->used == 0", mem->used == 0);
 136              		.loc 1 350 0 discriminator 1
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s 			page 10


 137 0080 114B     		ldr	r3, .L17+12
 138 0082 4FF4AF72 		mov	r2, #350
 139 0086 1349     		ldr	r1, .L17+24
 140 0088 1148     		ldr	r0, .L17+20
 141 008a FFF7FEFF 		bl	printf
 142              	.LVL11:
 143 008e C1E7     		b	.L3
 144              	.L13:
 351:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 145              		.loc 1 351 0 discriminator 1
 146 0090 0D4B     		ldr	r3, .L17+12
 147 0092 40F25F12 		movw	r2, #351
 148 0096 1049     		ldr	r1, .L17+28
 149 0098 0D48     		ldr	r0, .L17+20
 150 009a FFF7FEFF 		bl	printf
 151              	.LVL12:
 152 009e BCE7     		b	.L4
 153              	.L14:
 354:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 154              		.loc 1 354 0 discriminator 1
 155 00a0 094B     		ldr	r3, .L17+12
 156 00a2 4FF4B172 		mov	r2, #354
 157 00a6 0D49     		ldr	r1, .L17+32
 158 00a8 0948     		ldr	r0, .L17+20
 159 00aa FFF7FEFF 		bl	printf
 160              	.LVL13:
 161 00ae B8E7     		b	.L5
 162              	.LVL14:
 163              	.L15:
 360:Middlewares/Third_Party/LwIP/src/core/mem.c ****     }
 164              		.loc 1 360 0
 165 00b0 044A     		ldr	r2, .L17+8
 166              	.LVL15:
 167 00b2 1460     		str	r4, [r2]
 168 00b4 C5E7     		b	.L7
 169              	.LVL16:
 170              	.L16:
 371:Middlewares/Third_Party/LwIP/src/core/mem.c ****     }
 171              		.loc 1 371 0
 172 00b6 0348     		ldr	r0, .L17+8
 173 00b8 0260     		str	r2, [r0]
 174 00ba D2E7     		b	.L9
 175              	.L18:
 176              		.align	2
 177              	.L17:
 178 00bc 00000000 		.word	.LANCHOR0
 179 00c0 00000000 		.word	.LANCHOR1
 180 00c4 00000000 		.word	.LANCHOR2
 181 00c8 00000000 		.word	.LC0
 182 00cc 2C000000 		.word	.LC1
 183 00d0 44000000 		.word	.LC2
 184 00d4 6C000000 		.word	.LC3
 185 00d8 88000000 		.word	.LC4
 186 00dc A4000000 		.word	.LC5
 187              		.cfi_endproc
 188              	.LFE159:
 190              		.section	.text.mem_init,"ax",%progbits
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s 			page 11


 191              		.align	1
 192              		.global	mem_init
 193              		.syntax unified
 194              		.thumb
 195              		.thumb_func
 196              		.fpu fpv5-sp-d16
 198              	mem_init:
 199              	.LFB160:
 377:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 378:Middlewares/Third_Party/LwIP/src/core/mem.c **** /**
 379:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * Zero the heap and initialize start, end and lowest-free
 380:Middlewares/Third_Party/LwIP/src/core/mem.c ****  */
 381:Middlewares/Third_Party/LwIP/src/core/mem.c **** void
 382:Middlewares/Third_Party/LwIP/src/core/mem.c **** mem_init(void)
 383:Middlewares/Third_Party/LwIP/src/core/mem.c **** {
 200              		.loc 1 383 0
 201              		.cfi_startproc
 202              		@ args = 0, pretend = 0, frame = 0
 203              		@ frame_needed = 0, uses_anonymous_args = 0
 204 0000 08B5     		push	{r3, lr}
 205              	.LCFI1:
 206              		.cfi_def_cfa_offset 8
 207              		.cfi_offset 3, -8
 208              		.cfi_offset 14, -4
 384:Middlewares/Third_Party/LwIP/src/core/mem.c ****   struct mem *mem;
 385:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 386:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_ASSERT("Sanity check alignment",
 387:Middlewares/Third_Party/LwIP/src/core/mem.c ****     (SIZEOF_STRUCT_MEM & (MEM_ALIGNMENT-1)) == 0);
 388:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 389:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* align the heap */
 390:Middlewares/Third_Party/LwIP/src/core/mem.c ****   ram = (u8_t *)LWIP_MEM_ALIGN(LWIP_RAM_HEAP_POINTER);
 209              		.loc 1 390 0
 210 0002 114B     		ldr	r3, .L23
 211 0004 23F00303 		bic	r3, r3, #3
 212 0008 104A     		ldr	r2, .L23+4
 213 000a 1360     		str	r3, [r2]
 214              	.LVL17:
 391:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* initialize the start of the heap */
 392:Middlewares/Third_Party/LwIP/src/core/mem.c ****   mem = (struct mem *)(void *)ram;
 393:Middlewares/Third_Party/LwIP/src/core/mem.c ****   mem->next = MEM_SIZE_ALIGNED;
 215              		.loc 1 393 0
 216 000c 4FF4C861 		mov	r1, #1600
 217 0010 1980     		strh	r1, [r3]	@ movhi
 394:Middlewares/Third_Party/LwIP/src/core/mem.c ****   mem->prev = 0;
 218              		.loc 1 394 0
 219 0012 0022     		movs	r2, #0
 220 0014 5A80     		strh	r2, [r3, #2]	@ movhi
 395:Middlewares/Third_Party/LwIP/src/core/mem.c ****   mem->used = 0;
 221              		.loc 1 395 0
 222 0016 1A71     		strb	r2, [r3, #4]
 396:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* initialize the end of the heap */
 397:Middlewares/Third_Party/LwIP/src/core/mem.c ****   ram_end = (struct mem *)(void *)&ram[MEM_SIZE_ALIGNED];
 223              		.loc 1 397 0
 224 0018 5A18     		adds	r2, r3, r1
 225 001a 0D48     		ldr	r0, .L23+8
 226 001c 0260     		str	r2, [r0]
 398:Middlewares/Third_Party/LwIP/src/core/mem.c ****   ram_end->used = 1;
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s 			page 12


 227              		.loc 1 398 0
 228 001e 0120     		movs	r0, #1
 229 0020 1071     		strb	r0, [r2, #4]
 399:Middlewares/Third_Party/LwIP/src/core/mem.c ****   ram_end->next = MEM_SIZE_ALIGNED;
 230              		.loc 1 399 0
 231 0022 A3F84016 		strh	r1, [r3, #1600]	@ movhi
 400:Middlewares/Third_Party/LwIP/src/core/mem.c ****   ram_end->prev = MEM_SIZE_ALIGNED;
 232              		.loc 1 400 0
 233 0026 5180     		strh	r1, [r2, #2]	@ movhi
 401:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 402:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* initialize the lowest-free pointer to the start of the heap */
 403:Middlewares/Third_Party/LwIP/src/core/mem.c ****   lfree = (struct mem *)(void *)ram;
 234              		.loc 1 403 0
 235 0028 0A4A     		ldr	r2, .L23+12
 236 002a 1360     		str	r3, [r2]
 404:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 405:Middlewares/Third_Party/LwIP/src/core/mem.c ****   MEM_STATS_AVAIL(avail, MEM_SIZE_ALIGNED);
 406:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 407:Middlewares/Third_Party/LwIP/src/core/mem.c ****   if (sys_mutex_new(&mem_mutex) != ERR_OK) {
 237              		.loc 1 407 0
 238 002c 0A48     		ldr	r0, .L23+16
 239 002e FFF7FEFF 		bl	sys_mutex_new
 240              	.LVL18:
 241 0032 00B9     		cbnz	r0, .L22
 242              	.L19:
 408:Middlewares/Third_Party/LwIP/src/core/mem.c ****     LWIP_ASSERT("failed to create mem_mutex", 0);
 409:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 410:Middlewares/Third_Party/LwIP/src/core/mem.c **** }
 243              		.loc 1 410 0
 244 0034 08BD     		pop	{r3, pc}
 245              	.L22:
 408:Middlewares/Third_Party/LwIP/src/core/mem.c ****     LWIP_ASSERT("failed to create mem_mutex", 0);
 246              		.loc 1 408 0 discriminator 1
 247 0036 094B     		ldr	r3, .L23+20
 248 0038 4FF4CC72 		mov	r2, #408
 249 003c 0849     		ldr	r1, .L23+24
 250 003e 0948     		ldr	r0, .L23+28
 251 0040 FFF7FEFF 		bl	printf
 252              	.LVL19:
 253              		.loc 1 410 0 discriminator 1
 254 0044 F6E7     		b	.L19
 255              	.L24:
 256 0046 00BF     		.align	2
 257              	.L23:
 258 0048 03000000 		.word	ram_heap+3
 259 004c 00000000 		.word	.LANCHOR0
 260 0050 00000000 		.word	.LANCHOR1
 261 0054 00000000 		.word	.LANCHOR2
 262 0058 00000000 		.word	.LANCHOR3
 263 005c 00000000 		.word	.LC0
 264 0060 00000000 		.word	.LC6
 265 0064 44000000 		.word	.LC2
 266              		.cfi_endproc
 267              	.LFE160:
 269              		.section	.text.mem_free,"ax",%progbits
 270              		.align	1
 271              		.global	mem_free
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s 			page 13


 272              		.syntax unified
 273              		.thumb
 274              		.thumb_func
 275              		.fpu fpv5-sp-d16
 277              	mem_free:
 278              	.LFB161:
 411:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 412:Middlewares/Third_Party/LwIP/src/core/mem.c **** /**
 413:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * Put a struct mem back on the heap
 414:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *
 415:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * @param rmem is the data portion of a struct mem as returned by a previous
 416:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *             call to mem_malloc()
 417:Middlewares/Third_Party/LwIP/src/core/mem.c ****  */
 418:Middlewares/Third_Party/LwIP/src/core/mem.c **** void
 419:Middlewares/Third_Party/LwIP/src/core/mem.c **** mem_free(void *rmem)
 420:Middlewares/Third_Party/LwIP/src/core/mem.c **** {
 279              		.loc 1 420 0
 280              		.cfi_startproc
 281              		@ args = 0, pretend = 0, frame = 0
 282              		@ frame_needed = 0, uses_anonymous_args = 0
 283              	.LVL20:
 421:Middlewares/Third_Party/LwIP/src/core/mem.c ****   struct mem *mem;
 422:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_MEM_FREE_DECL_PROTECT();
 423:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 424:Middlewares/Third_Party/LwIP/src/core/mem.c ****   if (rmem == NULL) {
 284              		.loc 1 424 0
 285 0000 0028     		cmp	r0, #0
 286 0002 48D0     		beq	.L35
 420:Middlewares/Third_Party/LwIP/src/core/mem.c ****   struct mem *mem;
 287              		.loc 1 420 0
 288 0004 38B5     		push	{r3, r4, r5, lr}
 289              	.LCFI2:
 290              		.cfi_def_cfa_offset 16
 291              		.cfi_offset 3, -16
 292              		.cfi_offset 4, -12
 293              		.cfi_offset 5, -8
 294              		.cfi_offset 14, -4
 295 0006 0446     		mov	r4, r0
 425:Middlewares/Third_Party/LwIP/src/core/mem.c ****     LWIP_DEBUGF(MEM_DEBUG | LWIP_DBG_TRACE | LWIP_DBG_LEVEL_SERIOUS, ("mem_free(p == NULL) was call
 426:Middlewares/Third_Party/LwIP/src/core/mem.c ****     return;
 427:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 428:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_ASSERT("mem_free: sanity check alignment", (((mem_ptr_t)rmem) & (MEM_ALIGNMENT-1)) == 0);
 296              		.loc 1 428 0
 297 0008 10F0030F 		tst	r0, #3
 298 000c 1BD1     		bne	.L38
 299              	.LVL21:
 300              	.L27:
 429:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 430:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_ASSERT("mem_free: legal memory", (u8_t *)rmem >= (u8_t *)ram &&
 301              		.loc 1 430 0
 302 000e 224B     		ldr	r3, .L40
 303 0010 1B68     		ldr	r3, [r3]
 304 0012 A342     		cmp	r3, r4
 305 0014 03D8     		bhi	.L28
 306              		.loc 1 430 0 is_stmt 0 discriminator 2
 307 0016 214B     		ldr	r3, .L40+4
 308 0018 1B68     		ldr	r3, [r3]
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s 			page 14


 309 001a A342     		cmp	r3, r4
 310 001c 06D8     		bhi	.L29
 311              	.L28:
 312              		.loc 1 430 0 discriminator 3
 313 001e 204B     		ldr	r3, .L40+8
 314 0020 40F2AF12 		movw	r2, #431
 315 0024 1F49     		ldr	r1, .L40+12
 316 0026 2048     		ldr	r0, .L40+16
 317 0028 FFF7FEFF 		bl	printf
 318              	.LVL22:
 319              	.L29:
 431:Middlewares/Third_Party/LwIP/src/core/mem.c ****     (u8_t *)rmem < (u8_t *)ram_end);
 432:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 433:Middlewares/Third_Party/LwIP/src/core/mem.c ****   if ((u8_t *)rmem < (u8_t *)ram || (u8_t *)rmem >= (u8_t *)ram_end) {
 320              		.loc 1 433 0 is_stmt 1
 321 002c 1A4B     		ldr	r3, .L40
 322 002e 1B68     		ldr	r3, [r3]
 323 0030 A342     		cmp	r3, r4
 324 0032 03D8     		bhi	.L30
 325              		.loc 1 433 0 is_stmt 0 discriminator 1
 326 0034 194B     		ldr	r3, .L40+4
 327 0036 1B68     		ldr	r3, [r3]
 328 0038 A342     		cmp	r3, r4
 329 003a 0CD8     		bhi	.L31
 330              	.L30:
 331              	.LBB2:
 434:Middlewares/Third_Party/LwIP/src/core/mem.c ****     SYS_ARCH_DECL_PROTECT(lev);
 435:Middlewares/Third_Party/LwIP/src/core/mem.c ****     LWIP_DEBUGF(MEM_DEBUG | LWIP_DBG_LEVEL_SEVERE, ("mem_free: illegal memory\n"));
 436:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* protect mem stats from concurrent access */
 437:Middlewares/Third_Party/LwIP/src/core/mem.c ****     SYS_ARCH_PROTECT(lev);
 332              		.loc 1 437 0 is_stmt 1
 333 003c FFF7FEFF 		bl	sys_arch_protect
 334              	.LVL23:
 438:Middlewares/Third_Party/LwIP/src/core/mem.c ****     MEM_STATS_INC(illegal);
 439:Middlewares/Third_Party/LwIP/src/core/mem.c ****     SYS_ARCH_UNPROTECT(lev);
 335              		.loc 1 439 0
 336 0040 FFF7FEFF 		bl	sys_arch_unprotect
 337              	.LVL24:
 338              	.L25:
 339              	.LBE2:
 440:Middlewares/Third_Party/LwIP/src/core/mem.c ****     return;
 441:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 442:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* protect the heap from concurrent access */
 443:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_MEM_FREE_PROTECT();
 444:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* Get the corresponding struct mem ... */
 445:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* cast through void* to get rid of alignment warnings */
 446:Middlewares/Third_Party/LwIP/src/core/mem.c ****   mem = (struct mem *)(void *)((u8_t *)rmem - SIZEOF_STRUCT_MEM);
 447:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* ... which has to be in a used state ... */
 448:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_ASSERT("mem_free: mem->used", mem->used);
 449:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* ... and is now unused. */
 450:Middlewares/Third_Party/LwIP/src/core/mem.c ****   mem->used = 0;
 451:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 452:Middlewares/Third_Party/LwIP/src/core/mem.c ****   if (mem < lfree) {
 453:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* the newly freed struct is now the lowest */
 454:Middlewares/Third_Party/LwIP/src/core/mem.c ****     lfree = mem;
 455:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 456:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s 			page 15


 457:Middlewares/Third_Party/LwIP/src/core/mem.c ****   MEM_STATS_DEC_USED(used, mem->next - (mem_size_t)(((u8_t *)mem - ram)));
 458:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 459:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* finally, see if prev or next are free also */
 460:Middlewares/Third_Party/LwIP/src/core/mem.c ****   plug_holes(mem);
 461:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if LWIP_ALLOW_MEM_FREE_FROM_OTHER_CONTEXT
 462:Middlewares/Third_Party/LwIP/src/core/mem.c ****   mem_free_count = 1;
 463:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif /* LWIP_ALLOW_MEM_FREE_FROM_OTHER_CONTEXT */
 464:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_MEM_FREE_UNPROTECT();
 465:Middlewares/Third_Party/LwIP/src/core/mem.c **** }
 340              		.loc 1 465 0
 341 0044 38BD     		pop	{r3, r4, r5, pc}
 342              	.LVL25:
 343              	.L38:
 428:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 344              		.loc 1 428 0 discriminator 1
 345 0046 164B     		ldr	r3, .L40+8
 346 0048 4FF4D672 		mov	r2, #428
 347 004c 1749     		ldr	r1, .L40+20
 348 004e 1648     		ldr	r0, .L40+16
 349              	.LVL26:
 350 0050 FFF7FEFF 		bl	printf
 351              	.LVL27:
 352 0054 DBE7     		b	.L27
 353              	.L31:
 443:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* Get the corresponding struct mem ... */
 354              		.loc 1 443 0
 355 0056 1648     		ldr	r0, .L40+24
 356 0058 FFF7FEFF 		bl	sys_mutex_lock
 357              	.LVL28:
 446:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* ... which has to be in a used state ... */
 358              		.loc 1 446 0
 359 005c A4F10805 		sub	r5, r4, #8
 360              	.LVL29:
 448:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* ... and is now unused. */
 361              		.loc 1 448 0
 362 0060 14F8043C 		ldrb	r3, [r4, #-4]	@ zero_extendqisi2
 363 0064 7BB1     		cbz	r3, .L39
 364              	.L32:
 450:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 365              		.loc 1 450 0
 366 0066 0023     		movs	r3, #0
 367 0068 04F8043C 		strb	r3, [r4, #-4]
 452:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* the newly freed struct is now the lowest */
 368              		.loc 1 452 0
 369 006c 114B     		ldr	r3, .L40+28
 370 006e 1B68     		ldr	r3, [r3]
 371 0070 AB42     		cmp	r3, r5
 372 0072 01D9     		bls	.L33
 454:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 373              		.loc 1 454 0
 374 0074 0F4B     		ldr	r3, .L40+28
 375 0076 1D60     		str	r5, [r3]
 376              	.L33:
 460:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if LWIP_ALLOW_MEM_FREE_FROM_OTHER_CONTEXT
 377              		.loc 1 460 0
 378 0078 2846     		mov	r0, r5
 379 007a FFF7FEFF 		bl	plug_holes
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s 			page 16


 380              	.LVL30:
 464:Middlewares/Third_Party/LwIP/src/core/mem.c **** }
 381              		.loc 1 464 0
 382 007e 0C48     		ldr	r0, .L40+24
 383 0080 FFF7FEFF 		bl	sys_mutex_unlock
 384              	.LVL31:
 385 0084 DEE7     		b	.L25
 386              	.L39:
 448:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* ... and is now unused. */
 387              		.loc 1 448 0 discriminator 1
 388 0086 064B     		ldr	r3, .L40+8
 389 0088 4FF4E072 		mov	r2, #448
 390 008c 0A49     		ldr	r1, .L40+32
 391 008e 0648     		ldr	r0, .L40+16
 392 0090 FFF7FEFF 		bl	printf
 393              	.LVL32:
 394 0094 E7E7     		b	.L32
 395              	.LVL33:
 396              	.L35:
 397              	.LCFI3:
 398              		.cfi_def_cfa_offset 0
 399              		.cfi_restore 3
 400              		.cfi_restore 4
 401              		.cfi_restore 5
 402              		.cfi_restore 14
 403 0096 7047     		bx	lr
 404              	.L41:
 405              		.align	2
 406              	.L40:
 407 0098 00000000 		.word	.LANCHOR0
 408 009c 00000000 		.word	.LANCHOR1
 409 00a0 00000000 		.word	.LC0
 410 00a4 24000000 		.word	.LC8
 411 00a8 44000000 		.word	.LC2
 412 00ac 00000000 		.word	.LC7
 413 00b0 00000000 		.word	.LANCHOR3
 414 00b4 00000000 		.word	.LANCHOR2
 415 00b8 3C000000 		.word	.LC9
 416              		.cfi_endproc
 417              	.LFE161:
 419              		.section	.text.mem_trim,"ax",%progbits
 420              		.align	1
 421              		.global	mem_trim
 422              		.syntax unified
 423              		.thumb
 424              		.thumb_func
 425              		.fpu fpv5-sp-d16
 427              	mem_trim:
 428              	.LFB162:
 466:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 467:Middlewares/Third_Party/LwIP/src/core/mem.c **** /**
 468:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * Shrink memory returned by mem_malloc().
 469:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *
 470:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * @param rmem pointer to memory allocated by mem_malloc the is to be shrinked
 471:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * @param newsize required size after shrinking (needs to be smaller than or
 472:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *                equal to the previous size)
 473:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * @return for compatibility reasons: is always == rmem, at the moment
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s 			page 17


 474:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *         or NULL if newsize is > old size, in which case rmem is NOT touched
 475:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *         or freed!
 476:Middlewares/Third_Party/LwIP/src/core/mem.c ****  */
 477:Middlewares/Third_Party/LwIP/src/core/mem.c **** void *
 478:Middlewares/Third_Party/LwIP/src/core/mem.c **** mem_trim(void *rmem, mem_size_t newsize)
 479:Middlewares/Third_Party/LwIP/src/core/mem.c **** {
 429              		.loc 1 479 0
 430              		.cfi_startproc
 431              		@ args = 0, pretend = 0, frame = 0
 432              		@ frame_needed = 0, uses_anonymous_args = 0
 433              	.LVL34:
 434 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 435              	.LCFI4:
 436              		.cfi_def_cfa_offset 24
 437              		.cfi_offset 3, -24
 438              		.cfi_offset 4, -20
 439              		.cfi_offset 5, -16
 440              		.cfi_offset 6, -12
 441              		.cfi_offset 7, -8
 442              		.cfi_offset 14, -4
 443 0002 0546     		mov	r5, r0
 480:Middlewares/Third_Party/LwIP/src/core/mem.c ****   mem_size_t size;
 481:Middlewares/Third_Party/LwIP/src/core/mem.c ****   mem_size_t ptr, ptr2;
 482:Middlewares/Third_Party/LwIP/src/core/mem.c ****   struct mem *mem, *mem2;
 483:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* use the FREE_PROTECT here: it protects with sem OR SYS_ARCH_PROTECT */
 484:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_MEM_FREE_DECL_PROTECT();
 485:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 486:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* Expand the size of the allocated memory region so that we can
 487:Middlewares/Third_Party/LwIP/src/core/mem.c ****      adjust for alignment. */
 488:Middlewares/Third_Party/LwIP/src/core/mem.c ****   newsize = LWIP_MEM_ALIGN_SIZE(newsize);
 444              		.loc 1 488 0
 445 0004 CC1C     		adds	r4, r1, #3
 446 0006 A4B2     		uxth	r4, r4
 447 0008 24F00304 		bic	r4, r4, #3
 448 000c A4B2     		uxth	r4, r4
 449              	.LVL35:
 489:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 490:Middlewares/Third_Party/LwIP/src/core/mem.c ****   if (newsize < MIN_SIZE_ALIGNED) {
 450              		.loc 1 490 0
 451 000e 0B2C     		cmp	r4, #11
 452 0010 04D9     		bls	.L54
 491:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* every data block must be at least MIN_SIZE_ALIGNED long */
 492:Middlewares/Third_Party/LwIP/src/core/mem.c ****     newsize = MIN_SIZE_ALIGNED;
 493:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 494:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 495:Middlewares/Third_Party/LwIP/src/core/mem.c ****   if (newsize > MEM_SIZE_ALIGNED) {
 453              		.loc 1 495 0
 454 0012 B4F5C86F 		cmp	r4, #1600
 455 0016 02D9     		bls	.L43
 496:Middlewares/Third_Party/LwIP/src/core/mem.c ****     return NULL;
 456              		.loc 1 496 0
 457 0018 0025     		movs	r5, #0
 458 001a 4EE0     		b	.L44
 459              	.L54:
 492:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 460              		.loc 1 492 0
 461 001c 0C24     		movs	r4, #12
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s 			page 18


 462              	.LVL36:
 463              	.L43:
 497:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 498:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 499:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_ASSERT("mem_trim: legal memory", (u8_t *)rmem >= (u8_t *)ram &&
 464              		.loc 1 499 0
 465 001e 3E4B     		ldr	r3, .L60
 466 0020 1B68     		ldr	r3, [r3]
 467 0022 AB42     		cmp	r3, r5
 468 0024 03D8     		bhi	.L45
 469              		.loc 1 499 0 is_stmt 0 discriminator 2
 470 0026 3D4B     		ldr	r3, .L60+4
 471 0028 1B68     		ldr	r3, [r3]
 472 002a AB42     		cmp	r3, r5
 473 002c 06D8     		bhi	.L46
 474              	.L45:
 475              		.loc 1 499 0 discriminator 3
 476 002e 3C4B     		ldr	r3, .L60+8
 477 0030 4FF4FA72 		mov	r2, #500
 478 0034 3B49     		ldr	r1, .L60+12
 479              	.LVL37:
 480 0036 3C48     		ldr	r0, .L60+16
 481              	.LVL38:
 482 0038 FFF7FEFF 		bl	printf
 483              	.LVL39:
 484              	.L46:
 500:Middlewares/Third_Party/LwIP/src/core/mem.c ****    (u8_t *)rmem < (u8_t *)ram_end);
 501:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 502:Middlewares/Third_Party/LwIP/src/core/mem.c ****   if ((u8_t *)rmem < (u8_t *)ram || (u8_t *)rmem >= (u8_t *)ram_end) {
 485              		.loc 1 502 0 is_stmt 1
 486 003c 364B     		ldr	r3, .L60
 487 003e 1B68     		ldr	r3, [r3]
 488 0040 AB42     		cmp	r3, r5
 489 0042 36D8     		bhi	.L47
 490              		.loc 1 502 0 is_stmt 0 discriminator 1
 491 0044 354A     		ldr	r2, .L60+4
 492 0046 1268     		ldr	r2, [r2]
 493 0048 AA42     		cmp	r2, r5
 494 004a 32D9     		bls	.L47
 503:Middlewares/Third_Party/LwIP/src/core/mem.c ****     SYS_ARCH_DECL_PROTECT(lev);
 504:Middlewares/Third_Party/LwIP/src/core/mem.c ****     LWIP_DEBUGF(MEM_DEBUG | LWIP_DBG_LEVEL_SEVERE, ("mem_trim: illegal memory\n"));
 505:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* protect mem stats from concurrent access */
 506:Middlewares/Third_Party/LwIP/src/core/mem.c ****     SYS_ARCH_PROTECT(lev);
 507:Middlewares/Third_Party/LwIP/src/core/mem.c ****     MEM_STATS_INC(illegal);
 508:Middlewares/Third_Party/LwIP/src/core/mem.c ****     SYS_ARCH_UNPROTECT(lev);
 509:Middlewares/Third_Party/LwIP/src/core/mem.c ****     return rmem;
 510:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 511:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* Get the corresponding struct mem ... */
 512:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* cast through void* to get rid of alignment warnings */
 513:Middlewares/Third_Party/LwIP/src/core/mem.c ****   mem = (struct mem *)(void *)((u8_t *)rmem - SIZEOF_STRUCT_MEM);
 495              		.loc 1 513 0 is_stmt 1
 496 004c A5F10807 		sub	r7, r5, #8
 497              	.LVL40:
 514:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* ... and its offset pointer */
 515:Middlewares/Third_Party/LwIP/src/core/mem.c ****   ptr = (mem_size_t)((u8_t *)mem - ram);
 498              		.loc 1 515 0
 499 0050 FF1A     		subs	r7, r7, r3
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s 			page 19


 500              	.LVL41:
 501 0052 BFB2     		uxth	r7, r7
 502              	.LVL42:
 516:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 517:Middlewares/Third_Party/LwIP/src/core/mem.c ****   size = mem->next - ptr - SIZEOF_STRUCT_MEM;
 503              		.loc 1 517 0
 504 0054 35F8086C 		ldrh	r6, [r5, #-8]
 505 0058 F61B     		subs	r6, r6, r7
 506 005a B6B2     		uxth	r6, r6
 507 005c 083E     		subs	r6, r6, #8
 508 005e B6B2     		uxth	r6, r6
 509              	.LVL43:
 518:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_ASSERT("mem_trim can only shrink memory", newsize <= size);
 510              		.loc 1 518 0
 511 0060 B442     		cmp	r4, r6
 512 0062 2CD8     		bhi	.L58
 513              	.L49:
 519:Middlewares/Third_Party/LwIP/src/core/mem.c ****   if (newsize > size) {
 514              		.loc 1 519 0
 515 0064 B442     		cmp	r4, r6
 516 0066 54D8     		bhi	.L56
 520:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* not supported */
 521:Middlewares/Third_Party/LwIP/src/core/mem.c ****     return NULL;
 522:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 523:Middlewares/Third_Party/LwIP/src/core/mem.c ****   if (newsize == size) {
 517              		.loc 1 523 0
 518 0068 27D0     		beq	.L44
 524:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* No change in size, simply return */
 525:Middlewares/Third_Party/LwIP/src/core/mem.c ****     return rmem;
 526:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 527:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 528:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* protect the heap from concurrent access */
 529:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_MEM_FREE_PROTECT();
 519              		.loc 1 529 0
 520 006a 3048     		ldr	r0, .L60+20
 521 006c FFF7FEFF 		bl	sys_mutex_lock
 522              	.LVL44:
 530:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 531:Middlewares/Third_Party/LwIP/src/core/mem.c ****   mem2 = (struct mem *)(void *)&ram[mem->next];
 523              		.loc 1 531 0
 524 0070 294B     		ldr	r3, .L60
 525 0072 1A68     		ldr	r2, [r3]
 526 0074 35F8083C 		ldrh	r3, [r5, #-8]
 527 0078 D118     		adds	r1, r2, r3
 528              	.LVL45:
 532:Middlewares/Third_Party/LwIP/src/core/mem.c ****   if (mem2->used == 0) {
 529              		.loc 1 532 0
 530 007a 0879     		ldrb	r0, [r1, #4]	@ zero_extendqisi2
 531 007c 58BB     		cbnz	r0, .L50
 532              	.LBB3:
 533:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* The next struct is unused, we can simply move it at little */
 534:Middlewares/Third_Party/LwIP/src/core/mem.c ****     mem_size_t next;
 535:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* remember the old next pointer */
 536:Middlewares/Third_Party/LwIP/src/core/mem.c ****     next = mem2->next;
 533              		.loc 1 536 0
 534 007e D05A     		ldrh	r0, [r2, r3]
 535              	.LVL46:
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s 			page 20


 537:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* create new struct mem which is moved directly after the shrinked mem */
 538:Middlewares/Third_Party/LwIP/src/core/mem.c ****     ptr2 = ptr + SIZEOF_STRUCT_MEM + newsize;
 536              		.loc 1 538 0
 537 0080 E319     		adds	r3, r4, r7
 538 0082 9BB2     		uxth	r3, r3
 539 0084 0833     		adds	r3, r3, #8
 540 0086 9BB2     		uxth	r3, r3
 541              	.LVL47:
 539:Middlewares/Third_Party/LwIP/src/core/mem.c ****     if (lfree == mem2) {
 542              		.loc 1 539 0
 543 0088 294C     		ldr	r4, .L60+24
 544 008a 2468     		ldr	r4, [r4]
 545 008c 8C42     		cmp	r4, r1
 546 008e 1ED0     		beq	.L59
 547              	.LVL48:
 548              	.L51:
 540:Middlewares/Third_Party/LwIP/src/core/mem.c ****       lfree = (struct mem *)(void *)&ram[ptr2];
 541:Middlewares/Third_Party/LwIP/src/core/mem.c ****     }
 542:Middlewares/Third_Party/LwIP/src/core/mem.c ****     mem2 = (struct mem *)(void *)&ram[ptr2];
 549              		.loc 1 542 0
 550 0090 D118     		adds	r1, r2, r3
 551              	.LVL49:
 543:Middlewares/Third_Party/LwIP/src/core/mem.c ****     mem2->used = 0;
 552              		.loc 1 543 0
 553 0092 0024     		movs	r4, #0
 554 0094 0C71     		strb	r4, [r1, #4]
 544:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* restore the next pointer */
 545:Middlewares/Third_Party/LwIP/src/core/mem.c ****     mem2->next = next;
 555              		.loc 1 545 0
 556 0096 D052     		strh	r0, [r2, r3]	@ movhi
 546:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* link it back to mem */
 547:Middlewares/Third_Party/LwIP/src/core/mem.c ****     mem2->prev = ptr;
 557              		.loc 1 547 0
 558 0098 4F80     		strh	r7, [r1, #2]	@ movhi
 548:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* link mem to it */
 549:Middlewares/Third_Party/LwIP/src/core/mem.c ****     mem->next = ptr2;
 559              		.loc 1 549 0
 560 009a 25F8083C 		strh	r3, [r5, #-8]	@ movhi
 550:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* last thing to restore linked list: as we have moved mem2,
 551:Middlewares/Third_Party/LwIP/src/core/mem.c ****      * let 'mem2->next->prev' point to mem2 again. but only if mem2->next is not
 552:Middlewares/Third_Party/LwIP/src/core/mem.c ****      * the end of the heap */
 553:Middlewares/Third_Party/LwIP/src/core/mem.c ****     if (mem2->next != MEM_SIZE_ALIGNED) {
 561              		.loc 1 553 0
 562 009e D15A     		ldrh	r1, [r2, r3]
 563 00a0 B1F5C86F 		cmp	r1, #1600
 564 00a4 01D0     		beq	.L52
 554:Middlewares/Third_Party/LwIP/src/core/mem.c ****       ((struct mem *)(void *)&ram[mem2->next])->prev = ptr2;
 565              		.loc 1 554 0
 566 00a6 0A44     		add	r2, r2, r1
 567 00a8 5380     		strh	r3, [r2, #2]	@ movhi
 568              	.LVL50:
 569              	.L52:
 570              	.LBE3:
 555:Middlewares/Third_Party/LwIP/src/core/mem.c ****     }
 556:Middlewares/Third_Party/LwIP/src/core/mem.c ****     MEM_STATS_DEC_USED(used, (size - newsize));
 557:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* no need to plug holes, we've already done that */
 558:Middlewares/Third_Party/LwIP/src/core/mem.c ****   } else if (newsize + SIZEOF_STRUCT_MEM + MIN_SIZE_ALIGNED <= size) {
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s 			page 21


 559:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* Next struct is used but there's room for another struct mem with
 560:Middlewares/Third_Party/LwIP/src/core/mem.c ****      * at least MIN_SIZE_ALIGNED of data.
 561:Middlewares/Third_Party/LwIP/src/core/mem.c ****      * Old size ('size') must be big enough to contain at least 'newsize' plus a struct mem
 562:Middlewares/Third_Party/LwIP/src/core/mem.c ****      * ('SIZEOF_STRUCT_MEM') with some data ('MIN_SIZE_ALIGNED').
 563:Middlewares/Third_Party/LwIP/src/core/mem.c ****      * @todo we could leave out MIN_SIZE_ALIGNED. We would create an empty
 564:Middlewares/Third_Party/LwIP/src/core/mem.c ****      *       region that couldn't hold data, but when mem->next gets freed,
 565:Middlewares/Third_Party/LwIP/src/core/mem.c ****      *       the 2 regions would be combined, resulting in more free memory */
 566:Middlewares/Third_Party/LwIP/src/core/mem.c ****     ptr2 = ptr + SIZEOF_STRUCT_MEM + newsize;
 567:Middlewares/Third_Party/LwIP/src/core/mem.c ****     mem2 = (struct mem *)(void *)&ram[ptr2];
 568:Middlewares/Third_Party/LwIP/src/core/mem.c ****     if (mem2 < lfree) {
 569:Middlewares/Third_Party/LwIP/src/core/mem.c ****       lfree = mem2;
 570:Middlewares/Third_Party/LwIP/src/core/mem.c ****     }
 571:Middlewares/Third_Party/LwIP/src/core/mem.c ****     mem2->used = 0;
 572:Middlewares/Third_Party/LwIP/src/core/mem.c ****     mem2->next = mem->next;
 573:Middlewares/Third_Party/LwIP/src/core/mem.c ****     mem2->prev = ptr;
 574:Middlewares/Third_Party/LwIP/src/core/mem.c ****     mem->next = ptr2;
 575:Middlewares/Third_Party/LwIP/src/core/mem.c ****     if (mem2->next != MEM_SIZE_ALIGNED) {
 576:Middlewares/Third_Party/LwIP/src/core/mem.c ****       ((struct mem *)(void *)&ram[mem2->next])->prev = ptr2;
 577:Middlewares/Third_Party/LwIP/src/core/mem.c ****     }
 578:Middlewares/Third_Party/LwIP/src/core/mem.c ****     MEM_STATS_DEC_USED(used, (size - newsize));
 579:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* the original mem->next is used, so no need to plug holes! */
 580:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 581:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* else {
 582:Middlewares/Third_Party/LwIP/src/core/mem.c ****     next struct mem is used but size between mem and mem2 is not big enough
 583:Middlewares/Third_Party/LwIP/src/core/mem.c ****     to create another struct mem
 584:Middlewares/Third_Party/LwIP/src/core/mem.c ****     -> don't do anyhting.
 585:Middlewares/Third_Party/LwIP/src/core/mem.c ****     -> the remaining space stays unused since it is too small
 586:Middlewares/Third_Party/LwIP/src/core/mem.c ****   } */
 587:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if LWIP_ALLOW_MEM_FREE_FROM_OTHER_CONTEXT
 588:Middlewares/Third_Party/LwIP/src/core/mem.c ****   mem_free_count = 1;
 589:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif /* LWIP_ALLOW_MEM_FREE_FROM_OTHER_CONTEXT */
 590:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_MEM_FREE_UNPROTECT();
 571              		.loc 1 590 0
 572 00aa 2048     		ldr	r0, .L60+20
 573 00ac FFF7FEFF 		bl	sys_mutex_unlock
 574              	.LVL51:
 591:Middlewares/Third_Party/LwIP/src/core/mem.c ****   return rmem;
 575              		.loc 1 591 0
 576 00b0 03E0     		b	.L44
 577              	.LVL52:
 578              	.L47:
 579              	.LBB4:
 506:Middlewares/Third_Party/LwIP/src/core/mem.c ****     MEM_STATS_INC(illegal);
 580              		.loc 1 506 0
 581 00b2 FFF7FEFF 		bl	sys_arch_protect
 582              	.LVL53:
 508:Middlewares/Third_Party/LwIP/src/core/mem.c ****     return rmem;
 583              		.loc 1 508 0
 584 00b6 FFF7FEFF 		bl	sys_arch_unprotect
 585              	.LVL54:
 586              	.L44:
 587              	.LBE4:
 592:Middlewares/Third_Party/LwIP/src/core/mem.c **** }
 588              		.loc 1 592 0
 589 00ba 2846     		mov	r0, r5
 590 00bc F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 591              	.LVL55:
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s 			page 22


 592              	.L58:
 518:Middlewares/Third_Party/LwIP/src/core/mem.c ****   if (newsize > size) {
 593              		.loc 1 518 0 discriminator 1
 594 00be 184B     		ldr	r3, .L60+8
 595 00c0 40F20622 		movw	r2, #518
 596 00c4 1B49     		ldr	r1, .L60+28
 597 00c6 1848     		ldr	r0, .L60+16
 598 00c8 FFF7FEFF 		bl	printf
 599              	.LVL56:
 600 00cc CAE7     		b	.L49
 601              	.LVL57:
 602              	.L59:
 603              	.LBB5:
 540:Middlewares/Third_Party/LwIP/src/core/mem.c ****     }
 604              		.loc 1 540 0
 605 00ce D118     		adds	r1, r2, r3
 606              	.LVL58:
 607 00d0 174C     		ldr	r4, .L60+24
 608 00d2 2160     		str	r1, [r4]
 609 00d4 DCE7     		b	.L51
 610              	.LVL59:
 611              	.L50:
 612              	.LBE5:
 558:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* Next struct is used but there's room for another struct mem with
 613              		.loc 1 558 0
 614 00d6 04F11403 		add	r3, r4, #20
 615 00da B342     		cmp	r3, r6
 616 00dc E5D8     		bhi	.L52
 566:Middlewares/Third_Party/LwIP/src/core/mem.c ****     mem2 = (struct mem *)(void *)&ram[ptr2];
 617              		.loc 1 566 0
 618 00de E319     		adds	r3, r4, r7
 619 00e0 9BB2     		uxth	r3, r3
 620 00e2 0833     		adds	r3, r3, #8
 621 00e4 9BB2     		uxth	r3, r3
 622              	.LVL60:
 567:Middlewares/Third_Party/LwIP/src/core/mem.c ****     if (mem2 < lfree) {
 623              		.loc 1 567 0
 624 00e6 D118     		adds	r1, r2, r3
 625              	.LVL61:
 568:Middlewares/Third_Party/LwIP/src/core/mem.c ****       lfree = mem2;
 626              		.loc 1 568 0
 627 00e8 1148     		ldr	r0, .L60+24
 628 00ea 0068     		ldr	r0, [r0]
 629 00ec 8842     		cmp	r0, r1
 630 00ee 01D9     		bls	.L53
 569:Middlewares/Third_Party/LwIP/src/core/mem.c ****     }
 631              		.loc 1 569 0
 632 00f0 0F48     		ldr	r0, .L60+24
 633 00f2 0160     		str	r1, [r0]
 634              	.L53:
 571:Middlewares/Third_Party/LwIP/src/core/mem.c ****     mem2->next = mem->next;
 635              		.loc 1 571 0
 636 00f4 0020     		movs	r0, #0
 637 00f6 0871     		strb	r0, [r1, #4]
 572:Middlewares/Third_Party/LwIP/src/core/mem.c ****     mem2->prev = ptr;
 638              		.loc 1 572 0
 639 00f8 35F8080C 		ldrh	r0, [r5, #-8]
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s 			page 23


 640 00fc D052     		strh	r0, [r2, r3]	@ movhi
 573:Middlewares/Third_Party/LwIP/src/core/mem.c ****     mem->next = ptr2;
 641              		.loc 1 573 0
 642 00fe 4F80     		strh	r7, [r1, #2]	@ movhi
 574:Middlewares/Third_Party/LwIP/src/core/mem.c ****     if (mem2->next != MEM_SIZE_ALIGNED) {
 643              		.loc 1 574 0
 644 0100 25F8083C 		strh	r3, [r5, #-8]	@ movhi
 575:Middlewares/Third_Party/LwIP/src/core/mem.c ****       ((struct mem *)(void *)&ram[mem2->next])->prev = ptr2;
 645              		.loc 1 575 0
 646 0104 D15A     		ldrh	r1, [r2, r3]
 647              	.LVL62:
 648 0106 B1F5C86F 		cmp	r1, #1600
 649 010a CED0     		beq	.L52
 576:Middlewares/Third_Party/LwIP/src/core/mem.c ****     }
 650              		.loc 1 576 0
 651 010c 0A44     		add	r2, r2, r1
 652              	.LVL63:
 653 010e 5380     		strh	r3, [r2, #2]	@ movhi
 654 0110 CBE7     		b	.L52
 655              	.LVL64:
 656              	.L56:
 521:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 657              		.loc 1 521 0
 658 0112 0025     		movs	r5, #0
 659              	.LVL65:
 660 0114 D1E7     		b	.L44
 661              	.L61:
 662 0116 00BF     		.align	2
 663              	.L60:
 664 0118 00000000 		.word	.LANCHOR0
 665 011c 00000000 		.word	.LANCHOR1
 666 0120 00000000 		.word	.LC0
 667 0124 00000000 		.word	.LC10
 668 0128 44000000 		.word	.LC2
 669 012c 00000000 		.word	.LANCHOR3
 670 0130 00000000 		.word	.LANCHOR2
 671 0134 18000000 		.word	.LC11
 672              		.cfi_endproc
 673              	.LFE162:
 675              		.section	.text.mem_malloc,"ax",%progbits
 676              		.align	1
 677              		.global	mem_malloc
 678              		.syntax unified
 679              		.thumb
 680              		.thumb_func
 681              		.fpu fpv5-sp-d16
 683              	mem_malloc:
 684              	.LFB163:
 593:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 594:Middlewares/Third_Party/LwIP/src/core/mem.c **** /**
 595:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * Allocate a block of memory with a minimum of 'size' bytes.
 596:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *
 597:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * @param size is the minimum size of the requested block in bytes.
 598:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * @return pointer to allocated memory or NULL if no free memory was found.
 599:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *
 600:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * Note that the returned value will always be aligned (as defined by MEM_ALIGNMENT).
 601:Middlewares/Third_Party/LwIP/src/core/mem.c ****  */
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s 			page 24


 602:Middlewares/Third_Party/LwIP/src/core/mem.c **** void *
 603:Middlewares/Third_Party/LwIP/src/core/mem.c **** mem_malloc(mem_size_t size)
 604:Middlewares/Third_Party/LwIP/src/core/mem.c **** {
 685              		.loc 1 604 0
 686              		.cfi_startproc
 687              		@ args = 0, pretend = 0, frame = 0
 688              		@ frame_needed = 0, uses_anonymous_args = 0
 689              	.LVL66:
 605:Middlewares/Third_Party/LwIP/src/core/mem.c ****   mem_size_t ptr, ptr2;
 606:Middlewares/Third_Party/LwIP/src/core/mem.c ****   struct mem *mem, *mem2;
 607:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if LWIP_ALLOW_MEM_FREE_FROM_OTHER_CONTEXT
 608:Middlewares/Third_Party/LwIP/src/core/mem.c ****   u8_t local_mem_free_count = 0;
 609:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif /* LWIP_ALLOW_MEM_FREE_FROM_OTHER_CONTEXT */
 610:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_MEM_ALLOC_DECL_PROTECT();
 611:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 612:Middlewares/Third_Party/LwIP/src/core/mem.c ****   if (size == 0) {
 690              		.loc 1 612 0
 691 0000 0028     		cmp	r0, #0
 692 0002 00F08F80 		beq	.L77
 604:Middlewares/Third_Party/LwIP/src/core/mem.c ****   mem_size_t ptr, ptr2;
 693              		.loc 1 604 0
 694 0006 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 695              	.LCFI5:
 696              		.cfi_def_cfa_offset 24
 697              		.cfi_offset 3, -24
 698              		.cfi_offset 4, -20
 699              		.cfi_offset 5, -16
 700              		.cfi_offset 6, -12
 701              		.cfi_offset 7, -8
 702              		.cfi_offset 14, -4
 703 0008 0446     		mov	r4, r0
 613:Middlewares/Third_Party/LwIP/src/core/mem.c ****     return NULL;
 614:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 615:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 616:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* Expand the size of the allocated memory region so that we can
 617:Middlewares/Third_Party/LwIP/src/core/mem.c ****      adjust for alignment. */
 618:Middlewares/Third_Party/LwIP/src/core/mem.c ****   size = LWIP_MEM_ALIGN_SIZE(size);
 704              		.loc 1 618 0
 705 000a 0334     		adds	r4, r4, #3
 706 000c A4B2     		uxth	r4, r4
 707 000e 24F00304 		bic	r4, r4, #3
 708 0012 A4B2     		uxth	r4, r4
 709              	.LVL67:
 619:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 620:Middlewares/Third_Party/LwIP/src/core/mem.c ****   if (size < MIN_SIZE_ALIGNED) {
 710              		.loc 1 620 0
 711 0014 0B2C     		cmp	r4, #11
 712 0016 0DD9     		bls	.L78
 621:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* every data block must be at least MIN_SIZE_ALIGNED long */
 622:Middlewares/Third_Party/LwIP/src/core/mem.c ****     size = MIN_SIZE_ALIGNED;
 623:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 624:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 625:Middlewares/Third_Party/LwIP/src/core/mem.c ****   if (size > MEM_SIZE_ALIGNED) {
 713              		.loc 1 625 0
 714 0018 B4F5C86F 		cmp	r4, #1600
 715 001c 00F28480 		bhi	.L84
 716              	.LVL68:
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s 			page 25


 717              	.L64:
 626:Middlewares/Third_Party/LwIP/src/core/mem.c ****     return NULL;
 627:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 628:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 629:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* protect the heap from concurrent access */
 630:Middlewares/Third_Party/LwIP/src/core/mem.c ****   sys_mutex_lock(&mem_mutex);
 718              		.loc 1 630 0
 719 0020 4248     		ldr	r0, .L89
 720              	.LVL69:
 721 0022 FFF7FEFF 		bl	sys_mutex_lock
 722              	.LVL70:
 631:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_MEM_ALLOC_PROTECT();
 632:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if LWIP_ALLOW_MEM_FREE_FROM_OTHER_CONTEXT
 633:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* run as long as a mem_free disturbed mem_malloc or mem_trim */
 634:Middlewares/Third_Party/LwIP/src/core/mem.c ****   do {
 635:Middlewares/Third_Party/LwIP/src/core/mem.c ****     local_mem_free_count = 0;
 636:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif /* LWIP_ALLOW_MEM_FREE_FROM_OTHER_CONTEXT */
 637:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 638:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* Scan through the heap searching for a free block that is big enough,
 639:Middlewares/Third_Party/LwIP/src/core/mem.c ****      * beginning with the lowest free block.
 640:Middlewares/Third_Party/LwIP/src/core/mem.c ****      */
 641:Middlewares/Third_Party/LwIP/src/core/mem.c ****     for (ptr = (mem_size_t)((u8_t *)lfree - ram); ptr < MEM_SIZE_ALIGNED - size;
 723              		.loc 1 641 0
 724 0026 424B     		ldr	r3, .L89+4
 725 0028 1868     		ldr	r0, [r3]
 726 002a 424B     		ldr	r3, .L89+8
 727 002c 1B68     		ldr	r3, [r3]
 728 002e 1B1A     		subs	r3, r3, r0
 729 0030 9BB2     		uxth	r3, r3
 730              	.LVL71:
 731 0032 4BE0     		b	.L65
 732              	.LVL72:
 733              	.L78:
 622:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 734              		.loc 1 622 0
 735 0034 0C24     		movs	r4, #12
 736              	.LVL73:
 737 0036 F3E7     		b	.L64
 738              	.LVL74:
 739              	.L67:
 642:Middlewares/Third_Party/LwIP/src/core/mem.c ****          ptr = ((struct mem *)(void *)&ram[ptr])->next) {
 643:Middlewares/Third_Party/LwIP/src/core/mem.c ****       mem = (struct mem *)(void *)&ram[ptr];
 644:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if LWIP_ALLOW_MEM_FREE_FROM_OTHER_CONTEXT
 645:Middlewares/Third_Party/LwIP/src/core/mem.c ****       mem_free_count = 0;
 646:Middlewares/Third_Party/LwIP/src/core/mem.c ****       LWIP_MEM_ALLOC_UNPROTECT();
 647:Middlewares/Third_Party/LwIP/src/core/mem.c ****       /* allow mem_free or mem_trim to run */
 648:Middlewares/Third_Party/LwIP/src/core/mem.c ****       LWIP_MEM_ALLOC_PROTECT();
 649:Middlewares/Third_Party/LwIP/src/core/mem.c ****       if (mem_free_count != 0) {
 650:Middlewares/Third_Party/LwIP/src/core/mem.c ****         /* If mem_free or mem_trim have run, we have to restart since they
 651:Middlewares/Third_Party/LwIP/src/core/mem.c ****            could have altered our current struct mem. */
 652:Middlewares/Third_Party/LwIP/src/core/mem.c ****         local_mem_free_count = 1;
 653:Middlewares/Third_Party/LwIP/src/core/mem.c ****         break;
 654:Middlewares/Third_Party/LwIP/src/core/mem.c ****       }
 655:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif /* LWIP_ALLOW_MEM_FREE_FROM_OTHER_CONTEXT */
 656:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 657:Middlewares/Third_Party/LwIP/src/core/mem.c ****       if ((!mem->used) &&
 658:Middlewares/Third_Party/LwIP/src/core/mem.c ****           (mem->next - (ptr + SIZEOF_STRUCT_MEM)) >= size) {
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s 			page 26


 659:Middlewares/Third_Party/LwIP/src/core/mem.c ****         /* mem is not used and at least perfect fit is possible:
 660:Middlewares/Third_Party/LwIP/src/core/mem.c ****          * mem->next - (ptr + SIZEOF_STRUCT_MEM) gives us the 'user data size' of mem */
 661:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 662:Middlewares/Third_Party/LwIP/src/core/mem.c ****         if (mem->next - (ptr + SIZEOF_STRUCT_MEM) >= (size + SIZEOF_STRUCT_MEM + MIN_SIZE_ALIGNED))
 663:Middlewares/Third_Party/LwIP/src/core/mem.c ****           /* (in addition to the above, we test if another struct mem (SIZEOF_STRUCT_MEM) containin
 664:Middlewares/Third_Party/LwIP/src/core/mem.c ****            * at least MIN_SIZE_ALIGNED of data also fits in the 'user data space' of 'mem')
 665:Middlewares/Third_Party/LwIP/src/core/mem.c ****            * -> split large block, create empty remainder,
 666:Middlewares/Third_Party/LwIP/src/core/mem.c ****            * remainder must be large enough to contain MIN_SIZE_ALIGNED data: if
 667:Middlewares/Third_Party/LwIP/src/core/mem.c ****            * mem->next - (ptr + (2*SIZEOF_STRUCT_MEM)) == size,
 668:Middlewares/Third_Party/LwIP/src/core/mem.c ****            * struct mem would fit in but no data between mem2 and mem2->next
 669:Middlewares/Third_Party/LwIP/src/core/mem.c ****            * @todo we could leave out MIN_SIZE_ALIGNED. We would create an empty
 670:Middlewares/Third_Party/LwIP/src/core/mem.c ****            *       region that couldn't hold data, but when mem->next gets freed,
 671:Middlewares/Third_Party/LwIP/src/core/mem.c ****            *       the 2 regions would be combined, resulting in more free memory
 672:Middlewares/Third_Party/LwIP/src/core/mem.c ****            */
 673:Middlewares/Third_Party/LwIP/src/core/mem.c ****           ptr2 = ptr + SIZEOF_STRUCT_MEM + size;
 674:Middlewares/Third_Party/LwIP/src/core/mem.c ****           /* create mem2 struct */
 675:Middlewares/Third_Party/LwIP/src/core/mem.c ****           mem2 = (struct mem *)(void *)&ram[ptr2];
 676:Middlewares/Third_Party/LwIP/src/core/mem.c ****           mem2->used = 0;
 677:Middlewares/Third_Party/LwIP/src/core/mem.c ****           mem2->next = mem->next;
 678:Middlewares/Third_Party/LwIP/src/core/mem.c ****           mem2->prev = ptr;
 679:Middlewares/Third_Party/LwIP/src/core/mem.c ****           /* and insert it between mem and mem->next */
 680:Middlewares/Third_Party/LwIP/src/core/mem.c ****           mem->next = ptr2;
 681:Middlewares/Third_Party/LwIP/src/core/mem.c ****           mem->used = 1;
 682:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 683:Middlewares/Third_Party/LwIP/src/core/mem.c ****           if (mem2->next != MEM_SIZE_ALIGNED) {
 684:Middlewares/Third_Party/LwIP/src/core/mem.c ****             ((struct mem *)(void *)&ram[mem2->next])->prev = ptr2;
 685:Middlewares/Third_Party/LwIP/src/core/mem.c ****           }
 686:Middlewares/Third_Party/LwIP/src/core/mem.c ****           MEM_STATS_INC_USED(used, (size + SIZEOF_STRUCT_MEM));
 687:Middlewares/Third_Party/LwIP/src/core/mem.c ****         } else {
 688:Middlewares/Third_Party/LwIP/src/core/mem.c ****           /* (a mem2 struct does no fit into the user data space of mem and mem->next will always
 689:Middlewares/Third_Party/LwIP/src/core/mem.c ****            * be used at this point: if not we have 2 unused structs in a row, plug_holes should hav
 690:Middlewares/Third_Party/LwIP/src/core/mem.c ****            * take care of this).
 691:Middlewares/Third_Party/LwIP/src/core/mem.c ****            * -> near fit or exact fit: do not split, no mem2 creation
 692:Middlewares/Third_Party/LwIP/src/core/mem.c ****            * also can't move mem->next directly behind mem, since mem->next
 693:Middlewares/Third_Party/LwIP/src/core/mem.c ****            * will always be used at this point!
 694:Middlewares/Third_Party/LwIP/src/core/mem.c ****            */
 695:Middlewares/Third_Party/LwIP/src/core/mem.c ****           mem->used = 1;
 740              		.loc 1 695 0
 741 0038 0123     		movs	r3, #1
 742              	.LVL75:
 743 003a 2B71     		strb	r3, [r5, #4]
 744              	.L68:
 696:Middlewares/Third_Party/LwIP/src/core/mem.c ****           MEM_STATS_INC_USED(used, mem->next - (mem_size_t)((u8_t *)mem - ram));
 697:Middlewares/Third_Party/LwIP/src/core/mem.c ****         }
 698:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if LWIP_ALLOW_MEM_FREE_FROM_OTHER_CONTEXT
 699:Middlewares/Third_Party/LwIP/src/core/mem.c **** mem_malloc_adjust_lfree:
 700:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif /* LWIP_ALLOW_MEM_FREE_FROM_OTHER_CONTEXT */
 701:Middlewares/Third_Party/LwIP/src/core/mem.c ****         if (mem == lfree) {
 745              		.loc 1 701 0
 746 003c 3D4B     		ldr	r3, .L89+8
 747 003e 1B68     		ldr	r3, [r3]
 748 0040 AB42     		cmp	r3, r5
 749 0042 14D0     		beq	.L69
 750              	.L70:
 702:Middlewares/Third_Party/LwIP/src/core/mem.c ****           struct mem *cur = lfree;
 703:Middlewares/Third_Party/LwIP/src/core/mem.c ****           /* Find next free block after mem and update lowest free pointer */
 704:Middlewares/Third_Party/LwIP/src/core/mem.c ****           while (cur->used && cur != ram_end) {
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s 			page 27


 705:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if LWIP_ALLOW_MEM_FREE_FROM_OTHER_CONTEXT
 706:Middlewares/Third_Party/LwIP/src/core/mem.c ****             mem_free_count = 0;
 707:Middlewares/Third_Party/LwIP/src/core/mem.c ****             LWIP_MEM_ALLOC_UNPROTECT();
 708:Middlewares/Third_Party/LwIP/src/core/mem.c ****             /* prevent high interrupt latency... */
 709:Middlewares/Third_Party/LwIP/src/core/mem.c ****             LWIP_MEM_ALLOC_PROTECT();
 710:Middlewares/Third_Party/LwIP/src/core/mem.c ****             if (mem_free_count != 0) {
 711:Middlewares/Third_Party/LwIP/src/core/mem.c ****               /* If mem_free or mem_trim have run, we have to restart since they
 712:Middlewares/Third_Party/LwIP/src/core/mem.c ****                  could have altered our current struct mem or lfree. */
 713:Middlewares/Third_Party/LwIP/src/core/mem.c ****               goto mem_malloc_adjust_lfree;
 714:Middlewares/Third_Party/LwIP/src/core/mem.c ****             }
 715:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif /* LWIP_ALLOW_MEM_FREE_FROM_OTHER_CONTEXT */
 716:Middlewares/Third_Party/LwIP/src/core/mem.c ****             cur = (struct mem *)(void *)&ram[cur->next];
 717:Middlewares/Third_Party/LwIP/src/core/mem.c ****           }
 718:Middlewares/Third_Party/LwIP/src/core/mem.c ****           lfree = cur;
 719:Middlewares/Third_Party/LwIP/src/core/mem.c ****           LWIP_ASSERT("mem_malloc: !lfree->used", ((lfree == ram_end) || (!lfree->used)));
 720:Middlewares/Third_Party/LwIP/src/core/mem.c ****         }
 721:Middlewares/Third_Party/LwIP/src/core/mem.c ****         LWIP_MEM_ALLOC_UNPROTECT();
 722:Middlewares/Third_Party/LwIP/src/core/mem.c ****         sys_mutex_unlock(&mem_mutex);
 751              		.loc 1 722 0
 752 0044 3948     		ldr	r0, .L89
 753 0046 FFF7FEFF 		bl	sys_mutex_unlock
 754              	.LVL76:
 723:Middlewares/Third_Party/LwIP/src/core/mem.c ****         LWIP_ASSERT("mem_malloc: allocated memory not above ram_end.",
 755              		.loc 1 723 0
 756 004a 2E44     		add	r6, r6, r5
 757 004c 0836     		adds	r6, r6, #8
 758 004e 3A4B     		ldr	r3, .L89+12
 759 0050 1B68     		ldr	r3, [r3]
 760 0052 9E42     		cmp	r6, r3
 761 0054 21D8     		bhi	.L85
 762              	.L73:
 724:Middlewares/Third_Party/LwIP/src/core/mem.c ****          (mem_ptr_t)mem + SIZEOF_STRUCT_MEM + size <= (mem_ptr_t)ram_end);
 725:Middlewares/Third_Party/LwIP/src/core/mem.c ****         LWIP_ASSERT("mem_malloc: allocated memory properly aligned.",
 763              		.loc 1 725 0
 764 0056 15F00304 		ands	r4, r5, #3
 765 005a 26D1     		bne	.L86
 766              	.L74:
 726:Middlewares/Third_Party/LwIP/src/core/mem.c ****          ((mem_ptr_t)mem + SIZEOF_STRUCT_MEM) % MEM_ALIGNMENT == 0);
 727:Middlewares/Third_Party/LwIP/src/core/mem.c ****         LWIP_ASSERT("mem_malloc: sanity check alignment",
 767              		.loc 1 727 0
 768 005c 002C     		cmp	r4, #0
 769 005e 2CD1     		bne	.L87
 770              	.L75:
 728:Middlewares/Third_Party/LwIP/src/core/mem.c ****           (((mem_ptr_t)mem) & (MEM_ALIGNMENT-1)) == 0);
 729:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 730:Middlewares/Third_Party/LwIP/src/core/mem.c ****         return (u8_t *)mem + SIZEOF_STRUCT_MEM;
 771              		.loc 1 730 0
 772 0060 05F10800 		add	r0, r5, #8
 773 0064 5DE0     		b	.L62
 774              	.LVL77:
 775              	.L72:
 776              	.LBB6:
 716:Middlewares/Third_Party/LwIP/src/core/mem.c ****           }
 777              		.loc 1 716 0
 778 0066 324A     		ldr	r2, .L89+4
 779 0068 1268     		ldr	r2, [r2]
 780 006a 1B88     		ldrh	r3, [r3]
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s 			page 28


 781              	.LVL78:
 782 006c 1344     		add	r3, r3, r2
 783              	.LVL79:
 784              	.L69:
 704:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if LWIP_ALLOW_MEM_FREE_FROM_OTHER_CONTEXT
 785              		.loc 1 704 0
 786 006e 1A79     		ldrb	r2, [r3, #4]	@ zero_extendqisi2
 787 0070 1AB1     		cbz	r2, .L71
 704:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if LWIP_ALLOW_MEM_FREE_FROM_OTHER_CONTEXT
 788              		.loc 1 704 0 is_stmt 0 discriminator 1
 789 0072 3149     		ldr	r1, .L89+12
 790 0074 0968     		ldr	r1, [r1]
 791 0076 9942     		cmp	r1, r3
 792 0078 F5D1     		bne	.L72
 793              	.L71:
 718:Middlewares/Third_Party/LwIP/src/core/mem.c ****           LWIP_ASSERT("mem_malloc: !lfree->used", ((lfree == ram_end) || (!lfree->used)));
 794              		.loc 1 718 0 is_stmt 1
 795 007a 2E49     		ldr	r1, .L89+8
 796 007c 0B60     		str	r3, [r1]
 719:Middlewares/Third_Party/LwIP/src/core/mem.c ****         }
 797              		.loc 1 719 0
 798 007e 2E49     		ldr	r1, .L89+12
 799 0080 0968     		ldr	r1, [r1]
 800 0082 9942     		cmp	r1, r3
 801 0084 DED0     		beq	.L70
 719:Middlewares/Third_Party/LwIP/src/core/mem.c ****         }
 802              		.loc 1 719 0 is_stmt 0 discriminator 1
 803 0086 002A     		cmp	r2, #0
 804 0088 DCD0     		beq	.L70
 719:Middlewares/Third_Party/LwIP/src/core/mem.c ****         }
 805              		.loc 1 719 0 discriminator 2
 806 008a 2C4B     		ldr	r3, .L89+16
 807              	.LVL80:
 808 008c 40F2CF22 		movw	r2, #719
 809 0090 2B49     		ldr	r1, .L89+20
 810 0092 2C48     		ldr	r0, .L89+24
 811 0094 FFF7FEFF 		bl	printf
 812              	.LVL81:
 813 0098 D4E7     		b	.L70
 814              	.L85:
 815              	.LBE6:
 723:Middlewares/Third_Party/LwIP/src/core/mem.c ****          (mem_ptr_t)mem + SIZEOF_STRUCT_MEM + size <= (mem_ptr_t)ram_end);
 816              		.loc 1 723 0 is_stmt 1 discriminator 1
 817 009a 284B     		ldr	r3, .L89+16
 818 009c 4FF43572 		mov	r2, #724
 819 00a0 2949     		ldr	r1, .L89+28
 820 00a2 2848     		ldr	r0, .L89+24
 821 00a4 FFF7FEFF 		bl	printf
 822              	.LVL82:
 823 00a8 D5E7     		b	.L73
 824              	.L86:
 725:Middlewares/Third_Party/LwIP/src/core/mem.c ****          ((mem_ptr_t)mem + SIZEOF_STRUCT_MEM) % MEM_ALIGNMENT == 0);
 825              		.loc 1 725 0 discriminator 1
 826 00aa 244B     		ldr	r3, .L89+16
 827 00ac 40F2D622 		movw	r2, #726
 828 00b0 2649     		ldr	r1, .L89+32
 829 00b2 2448     		ldr	r0, .L89+24
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s 			page 29


 830 00b4 FFF7FEFF 		bl	printf
 831              	.LVL83:
 832 00b8 D0E7     		b	.L74
 833              	.L87:
 727:Middlewares/Third_Party/LwIP/src/core/mem.c ****           (((mem_ptr_t)mem) & (MEM_ALIGNMENT-1)) == 0);
 834              		.loc 1 727 0 discriminator 1
 835 00ba 204B     		ldr	r3, .L89+16
 836 00bc 4FF43672 		mov	r2, #728
 837 00c0 2349     		ldr	r1, .L89+36
 838 00c2 2048     		ldr	r0, .L89+24
 839 00c4 FFF7FEFF 		bl	printf
 840              	.LVL84:
 841 00c8 CAE7     		b	.L75
 842              	.LVL85:
 843              	.L66:
 642:Middlewares/Third_Party/LwIP/src/core/mem.c ****       mem = (struct mem *)(void *)&ram[ptr];
 844              		.loc 1 642 0
 845 00ca 2B88     		ldrh	r3, [r5]
 846              	.LVL86:
 847              	.L65:
 641:Middlewares/Third_Party/LwIP/src/core/mem.c ****          ptr = ((struct mem *)(void *)&ram[ptr])->next) {
 848              		.loc 1 641 0 discriminator 1
 849 00cc 1F46     		mov	r7, r3
 850 00ce 2646     		mov	r6, r4
 851 00d0 C4F5C861 		rsb	r1, r4, #1600
 852 00d4 8B42     		cmp	r3, r1
 853 00d6 20D2     		bcs	.L88
 643:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if LWIP_ALLOW_MEM_FREE_FROM_OTHER_CONTEXT
 854              		.loc 1 643 0
 855 00d8 C518     		adds	r5, r0, r3
 856              	.LVL87:
 657:Middlewares/Third_Party/LwIP/src/core/mem.c ****           (mem->next - (ptr + SIZEOF_STRUCT_MEM)) >= size) {
 857              		.loc 1 657 0
 858 00da 2979     		ldrb	r1, [r5, #4]	@ zero_extendqisi2
 859 00dc 0029     		cmp	r1, #0
 860 00de F4D1     		bne	.L66
 658:Middlewares/Third_Party/LwIP/src/core/mem.c ****         /* mem is not used and at least perfect fit is possible:
 861              		.loc 1 658 0 discriminator 1
 862 00e0 C25A     		ldrh	r2, [r0, r3]
 863 00e2 D21B     		subs	r2, r2, r7
 864 00e4 083A     		subs	r2, r2, #8
 657:Middlewares/Third_Party/LwIP/src/core/mem.c ****           (mem->next - (ptr + SIZEOF_STRUCT_MEM)) >= size) {
 865              		.loc 1 657 0 discriminator 1
 866 00e6 B242     		cmp	r2, r6
 867 00e8 EFD3     		bcc	.L66
 662:Middlewares/Third_Party/LwIP/src/core/mem.c ****           /* (in addition to the above, we test if another struct mem (SIZEOF_STRUCT_MEM) containin
 868              		.loc 1 662 0
 869 00ea 06F11401 		add	r1, r6, #20
 870 00ee 8A42     		cmp	r2, r1
 871 00f0 A2D3     		bcc	.L67
 673:Middlewares/Third_Party/LwIP/src/core/mem.c ****           /* create mem2 struct */
 872              		.loc 1 673 0
 873 00f2 E218     		adds	r2, r4, r3
 874 00f4 92B2     		uxth	r2, r2
 875 00f6 0832     		adds	r2, r2, #8
 876 00f8 92B2     		uxth	r2, r2
 877              	.LVL88:
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s 			page 30


 675:Middlewares/Third_Party/LwIP/src/core/mem.c ****           mem2->used = 0;
 878              		.loc 1 675 0
 879 00fa 8118     		adds	r1, r0, r2
 880              	.LVL89:
 676:Middlewares/Third_Party/LwIP/src/core/mem.c ****           mem2->next = mem->next;
 881              		.loc 1 676 0
 882 00fc 0024     		movs	r4, #0
 883 00fe 0C71     		strb	r4, [r1, #4]
 677:Middlewares/Third_Party/LwIP/src/core/mem.c ****           mem2->prev = ptr;
 884              		.loc 1 677 0
 885 0100 2C88     		ldrh	r4, [r5]
 886 0102 8452     		strh	r4, [r0, r2]	@ movhi
 678:Middlewares/Third_Party/LwIP/src/core/mem.c ****           /* and insert it between mem and mem->next */
 887              		.loc 1 678 0
 888 0104 4B80     		strh	r3, [r1, #2]	@ movhi
 680:Middlewares/Third_Party/LwIP/src/core/mem.c ****           mem->used = 1;
 889              		.loc 1 680 0
 890 0106 2A80     		strh	r2, [r5]	@ movhi
 681:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 891              		.loc 1 681 0
 892 0108 0123     		movs	r3, #1
 893              	.LVL90:
 894 010a 2B71     		strb	r3, [r5, #4]
 683:Middlewares/Third_Party/LwIP/src/core/mem.c ****             ((struct mem *)(void *)&ram[mem2->next])->prev = ptr2;
 895              		.loc 1 683 0
 896 010c 835A     		ldrh	r3, [r0, r2]
 897 010e B3F5C86F 		cmp	r3, #1600
 898 0112 93D0     		beq	.L68
 684:Middlewares/Third_Party/LwIP/src/core/mem.c ****           }
 899              		.loc 1 684 0
 900 0114 1844     		add	r0, r0, r3
 901 0116 4280     		strh	r2, [r0, #2]	@ movhi
 902 0118 90E7     		b	.L68
 903              	.LVL91:
 904              	.L88:
 731:Middlewares/Third_Party/LwIP/src/core/mem.c ****       }
 732:Middlewares/Third_Party/LwIP/src/core/mem.c ****     }
 733:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if LWIP_ALLOW_MEM_FREE_FROM_OTHER_CONTEXT
 734:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* if we got interrupted by a mem_free, try again */
 735:Middlewares/Third_Party/LwIP/src/core/mem.c ****   } while (local_mem_free_count != 0);
 736:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif /* LWIP_ALLOW_MEM_FREE_FROM_OTHER_CONTEXT */
 737:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_DEBUGF(MEM_DEBUG | LWIP_DBG_LEVEL_SERIOUS, ("mem_malloc: could not allocate %"S16_F" bytes\n
 738:Middlewares/Third_Party/LwIP/src/core/mem.c ****   MEM_STATS_INC(err);
 739:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_MEM_ALLOC_UNPROTECT();
 740:Middlewares/Third_Party/LwIP/src/core/mem.c ****   sys_mutex_unlock(&mem_mutex);
 905              		.loc 1 740 0
 906 011a 0448     		ldr	r0, .L89
 907 011c FFF7FEFF 		bl	sys_mutex_unlock
 908              	.LVL92:
 741:Middlewares/Third_Party/LwIP/src/core/mem.c ****   return NULL;
 909              		.loc 1 741 0
 910 0120 0020     		movs	r0, #0
 911              	.L62:
 742:Middlewares/Third_Party/LwIP/src/core/mem.c **** }
 912              		.loc 1 742 0
 913 0122 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 914              	.LVL93:
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s 			page 31


 915              	.L77:
 916              	.LCFI6:
 917              		.cfi_def_cfa_offset 0
 918              		.cfi_restore 3
 919              		.cfi_restore 4
 920              		.cfi_restore 5
 921              		.cfi_restore 6
 922              		.cfi_restore 7
 923              		.cfi_restore 14
 613:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 924              		.loc 1 613 0
 925 0124 0020     		movs	r0, #0
 926              	.LVL94:
 927              		.loc 1 742 0
 928 0126 7047     		bx	lr
 929              	.LVL95:
 930              	.L84:
 931              	.LCFI7:
 932              		.cfi_def_cfa_offset 24
 933              		.cfi_offset 3, -24
 934              		.cfi_offset 4, -20
 935              		.cfi_offset 5, -16
 936              		.cfi_offset 6, -12
 937              		.cfi_offset 7, -8
 938              		.cfi_offset 14, -4
 626:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 939              		.loc 1 626 0
 940 0128 0020     		movs	r0, #0
 941 012a FAE7     		b	.L62
 942              	.L90:
 943              		.align	2
 944              	.L89:
 945 012c 00000000 		.word	.LANCHOR3
 946 0130 00000000 		.word	.LANCHOR0
 947 0134 00000000 		.word	.LANCHOR2
 948 0138 00000000 		.word	.LANCHOR1
 949 013c 00000000 		.word	.LC0
 950 0140 00000000 		.word	.LC12
 951 0144 44000000 		.word	.LC2
 952 0148 1C000000 		.word	.LC13
 953 014c 4C000000 		.word	.LC14
 954 0150 7C000000 		.word	.LC15
 955              		.cfi_endproc
 956              	.LFE163:
 958              		.section	.text.mem_calloc,"ax",%progbits
 959              		.align	1
 960              		.global	mem_calloc
 961              		.syntax unified
 962              		.thumb
 963              		.thumb_func
 964              		.fpu fpv5-sp-d16
 966              	mem_calloc:
 967              	.LFB164:
 743:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 744:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif /* MEM_USE_POOLS */
 745:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 746:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if MEM_LIBC_MALLOC && (!LWIP_STATS || !MEM_STATS)
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s 			page 32


 747:Middlewares/Third_Party/LwIP/src/core/mem.c **** void *
 748:Middlewares/Third_Party/LwIP/src/core/mem.c **** mem_calloc(mem_size_t count, mem_size_t size)
 749:Middlewares/Third_Party/LwIP/src/core/mem.c **** {
 750:Middlewares/Third_Party/LwIP/src/core/mem.c ****   return mem_clib_calloc(count, size);
 751:Middlewares/Third_Party/LwIP/src/core/mem.c **** }
 752:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 753:Middlewares/Third_Party/LwIP/src/core/mem.c **** #else /* MEM_LIBC_MALLOC && (!LWIP_STATS || !MEM_STATS) */
 754:Middlewares/Third_Party/LwIP/src/core/mem.c **** /**
 755:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * Contiguously allocates enough space for count objects that are size bytes
 756:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * of memory each and returns a pointer to the allocated memory.
 757:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *
 758:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * The allocated memory is filled with bytes of value zero.
 759:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *
 760:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * @param count number of objects to allocate
 761:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * @param size size of the objects to allocate
 762:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * @return pointer to allocated memory / NULL pointer if there is an error
 763:Middlewares/Third_Party/LwIP/src/core/mem.c ****  */
 764:Middlewares/Third_Party/LwIP/src/core/mem.c **** void *
 765:Middlewares/Third_Party/LwIP/src/core/mem.c **** mem_calloc(mem_size_t count, mem_size_t size)
 766:Middlewares/Third_Party/LwIP/src/core/mem.c **** {
 968              		.loc 1 766 0
 969              		.cfi_startproc
 970              		@ args = 0, pretend = 0, frame = 0
 971              		@ frame_needed = 0, uses_anonymous_args = 0
 972              	.LVL96:
 973 0000 70B5     		push	{r4, r5, r6, lr}
 974              	.LCFI8:
 975              		.cfi_def_cfa_offset 16
 976              		.cfi_offset 4, -16
 977              		.cfi_offset 5, -12
 978              		.cfi_offset 6, -8
 979              		.cfi_offset 14, -4
 980 0002 0546     		mov	r5, r0
 981 0004 0E46     		mov	r6, r1
 767:Middlewares/Third_Party/LwIP/src/core/mem.c ****   void *p;
 768:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 769:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* allocate 'count' objects of size 'size' */
 770:Middlewares/Third_Party/LwIP/src/core/mem.c ****   p = mem_malloc(count * size);
 982              		.loc 1 770 0
 983 0006 10FB01F0 		smulbb	r0, r0, r1
 984              	.LVL97:
 985 000a 80B2     		uxth	r0, r0
 986 000c FFF7FEFF 		bl	mem_malloc
 987              	.LVL98:
 771:Middlewares/Third_Party/LwIP/src/core/mem.c ****   if (p) {
 988              		.loc 1 771 0
 989 0010 0446     		mov	r4, r0
 990 0012 20B1     		cbz	r0, .L91
 772:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* zero the memory */
 773:Middlewares/Third_Party/LwIP/src/core/mem.c ****     memset(p, 0, (size_t)count * (size_t)size);
 991              		.loc 1 773 0
 992 0014 06FB05F2 		mul	r2, r6, r5
 993 0018 0021     		movs	r1, #0
 994 001a FFF7FEFF 		bl	memset
 995              	.LVL99:
 996              	.L91:
 774:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s 			page 33


 775:Middlewares/Third_Party/LwIP/src/core/mem.c ****   return p;
 776:Middlewares/Third_Party/LwIP/src/core/mem.c **** }
 997              		.loc 1 776 0
 998 001e 2046     		mov	r0, r4
 999 0020 70BD     		pop	{r4, r5, r6, pc}
 1000              		.cfi_endproc
 1001              	.LFE164:
 1003              		.comm	ram_heap,1619,4
 1004              		.section	.bss.lfree,"aw",%nobits
 1005              		.align	2
 1006              		.set	.LANCHOR2,. + 0
 1009              	lfree:
 1010 0000 00000000 		.space	4
 1011              		.section	.bss.mem_mutex,"aw",%nobits
 1012              		.align	2
 1013              		.set	.LANCHOR3,. + 0
 1016              	mem_mutex:
 1017 0000 00000000 		.space	4
 1018              		.section	.bss.ram,"aw",%nobits
 1019              		.align	2
 1020              		.set	.LANCHOR0,. + 0
 1023              	ram:
 1024 0000 00000000 		.space	4
 1025              		.section	.bss.ram_end,"aw",%nobits
 1026              		.align	2
 1027              		.set	.LANCHOR1,. + 0
 1030              	ram_end:
 1031 0000 00000000 		.space	4
 1032              		.section	.rodata.mem_free.str1.4,"aMS",%progbits,1
 1033              		.align	2
 1034              	.LC7:
 1035 0000 6D656D5F 		.ascii	"mem_free: sanity check alignment\000"
 1035      66726565 
 1035      3A207361 
 1035      6E697479 
 1035      20636865 
 1036 0021 000000   		.space	3
 1037              	.LC8:
 1038 0024 6D656D5F 		.ascii	"mem_free: legal memory\000"
 1038      66726565 
 1038      3A206C65 
 1038      67616C20 
 1038      6D656D6F 
 1039 003b 00       		.space	1
 1040              	.LC9:
 1041 003c 6D656D5F 		.ascii	"mem_free: mem->used\000"
 1041      66726565 
 1041      3A206D65 
 1041      6D2D3E75 
 1041      73656400 
 1042              		.section	.rodata.mem_init.str1.4,"aMS",%progbits,1
 1043              		.align	2
 1044              	.LC6:
 1045 0000 6661696C 		.ascii	"failed to create mem_mutex\000"
 1045      65642074 
 1045      6F206372 
 1045      65617465 
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s 			page 34


 1045      206D656D 
 1046              		.section	.rodata.mem_malloc.str1.4,"aMS",%progbits,1
 1047              		.align	2
 1048              	.LC12:
 1049 0000 6D656D5F 		.ascii	"mem_malloc: !lfree->used\000"
 1049      6D616C6C 
 1049      6F633A20 
 1049      216C6672 
 1049      65652D3E 
 1050 0019 000000   		.space	3
 1051              	.LC13:
 1052 001c 6D656D5F 		.ascii	"mem_malloc: allocated memory not above ram_end.\000"
 1052      6D616C6C 
 1052      6F633A20 
 1052      616C6C6F 
 1052      63617465 
 1053              	.LC14:
 1054 004c 6D656D5F 		.ascii	"mem_malloc: allocated memory properly aligned.\000"
 1054      6D616C6C 
 1054      6F633A20 
 1054      616C6C6F 
 1054      63617465 
 1055 007b 00       		.space	1
 1056              	.LC15:
 1057 007c 6D656D5F 		.ascii	"mem_malloc: sanity check alignment\000"
 1057      6D616C6C 
 1057      6F633A20 
 1057      73616E69 
 1057      74792063 
 1058              		.section	.rodata.mem_trim.str1.4,"aMS",%progbits,1
 1059              		.align	2
 1060              	.LC10:
 1061 0000 6D656D5F 		.ascii	"mem_trim: legal memory\000"
 1061      7472696D 
 1061      3A206C65 
 1061      67616C20 
 1061      6D656D6F 
 1062 0017 00       		.space	1
 1063              	.LC11:
 1064 0018 6D656D5F 		.ascii	"mem_trim can only shrink memory\000"
 1064      7472696D 
 1064      2063616E 
 1064      206F6E6C 
 1064      79207368 
 1065              		.section	.rodata.plug_holes.str1.4,"aMS",%progbits,1
 1066              		.align	2
 1067              	.LC0:
 1068 0000 4D696464 		.ascii	"Middlewares/Third_Party/LwIP/src/core/mem.c\000"
 1068      6C657761 
 1068      7265732F 
 1068      54686972 
 1068      645F5061 
 1069              	.LC1:
 1070 002c 706C7567 		.ascii	"plug_holes: mem >= ram\000"
 1070      5F686F6C 
 1070      65733A20 
 1070      6D656D20 
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s 			page 35


 1070      3E3D2072 
 1071 0043 00       		.space	1
 1072              	.LC2:
 1073 0044 41737365 		.ascii	"Assertion \"%s\" failed at line %d in %s\012\000"
 1073      7274696F 
 1073      6E202225 
 1073      73222066 
 1073      61696C65 
 1074              	.LC3:
 1075 006c 706C7567 		.ascii	"plug_holes: mem < ram_end\000"
 1075      5F686F6C 
 1075      65733A20 
 1075      6D656D20 
 1075      3C207261 
 1076 0086 0000     		.space	2
 1077              	.LC4:
 1078 0088 706C7567 		.ascii	"plug_holes: mem->used == 0\000"
 1078      5F686F6C 
 1078      65733A20 
 1078      6D656D2D 
 1078      3E757365 
 1079 00a3 00       		.space	1
 1080              	.LC5:
 1081 00a4 706C7567 		.ascii	"plug_holes: mem->next <= MEM_SIZE_ALIGNED\000"
 1081      5F686F6C 
 1081      65733A20 
 1081      6D656D2D 
 1081      3E6E6578 
 1082              		.text
 1083              	.Letext0:
 1084              		.file 2 "d:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\machine\\_default
 1085              		.file 3 "d:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\sys\\_stdint.h"
 1086              		.file 4 "Drivers/CMSIS/Include/core_cm7.h"
 1087              		.file 5 "Drivers/CMSIS/Device/ST/STM32F7xx/Include/system_stm32f7xx.h"
 1088              		.file 6 "d:\\program files (x86)\\gnu\\7_2018-q2-update\\lib\\gcc\\arm-none-eabi\\7.3.1\\include\\
 1089              		.file 7 "d:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\sys\\lock.h"
 1090              		.file 8 "d:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\sys\\_types.h"
 1091              		.file 9 "d:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\sys\\reent.h"
 1092              		.file 10 "d:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\stdlib.h"
 1093              		.file 11 "Middlewares/Third_Party/LwIP/system/arch/cc.h"
 1094              		.file 12 "d:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\time.h"
 1095              		.file 13 "Middlewares/Third_Party/LwIP/src/include/lwip/arch.h"
 1096              		.file 14 "Middlewares/Third_Party/LwIP/src/include/lwip/mem.h"
 1097              		.file 15 "Middlewares/Third_Party/FreeRTOS/Source/include/queue.h"
 1098              		.file 16 "Middlewares/Third_Party/FreeRTOS/Source/include/semphr.h"
 1099              		.file 17 "Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.h"
 1100              		.file 18 "Middlewares/Third_Party/LwIP/system/arch/sys_arch.h"
 1101              		.file 19 "Middlewares/Third_Party/LwIP/src/include/lwip/err.h"
 1102              		.file 20 "Middlewares/Third_Party/LwIP/src/include/lwip/memp.h"
 1103              		.file 21 "Middlewares/Third_Party/LwIP/src/include/lwip/priv/memp_priv.h"
 1104              		.file 22 "d:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\stdio.h"
 1105              		.file 23 "Middlewares/Third_Party/LwIP/src/include/lwip/sys.h"
 1106              		.file 24 "<built-in>"
ARM GAS  C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s 			page 36


DEFINED SYMBOLS
                            *ABS*:00000000 mem.c
C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s:18     .text.plug_holes:00000000 $t
C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s:24     .text.plug_holes:00000000 plug_holes
C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s:178    .text.plug_holes:000000bc $d
C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s:191    .text.mem_init:00000000 $t
C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s:198    .text.mem_init:00000000 mem_init
C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s:258    .text.mem_init:00000048 $d
                            *COM*:00000653 ram_heap
C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s:270    .text.mem_free:00000000 $t
C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s:277    .text.mem_free:00000000 mem_free
C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s:407    .text.mem_free:00000098 $d
C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s:420    .text.mem_trim:00000000 $t
C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s:427    .text.mem_trim:00000000 mem_trim
C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s:664    .text.mem_trim:00000118 $d
C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s:676    .text.mem_malloc:00000000 $t
C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s:683    .text.mem_malloc:00000000 mem_malloc
C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s:945    .text.mem_malloc:0000012c $d
C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s:959    .text.mem_calloc:00000000 $t
C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s:966    .text.mem_calloc:00000000 mem_calloc
C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s:1005   .bss.lfree:00000000 $d
C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s:1009   .bss.lfree:00000000 lfree
C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s:1012   .bss.mem_mutex:00000000 $d
C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s:1016   .bss.mem_mutex:00000000 mem_mutex
C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s:1019   .bss.ram:00000000 $d
C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s:1023   .bss.ram:00000000 ram
C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s:1026   .bss.ram_end:00000000 $d
C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s:1030   .bss.ram_end:00000000 ram_end
C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s:1033   .rodata.mem_free.str1.4:00000000 $d
C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s:1043   .rodata.mem_init.str1.4:00000000 $d
C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s:1047   .rodata.mem_malloc.str1.4:00000000 $d
C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s:1059   .rodata.mem_trim.str1.4:00000000 $d
C:\Users\milek\AppData\Local\Temp\ccwmJ0cc.s:1066   .rodata.plug_holes.str1.4:00000000 $d

UNDEFINED SYMBOLS
printf
sys_mutex_new
sys_arch_protect
sys_arch_unprotect
sys_mutex_lock
sys_mutex_unlock
memset
