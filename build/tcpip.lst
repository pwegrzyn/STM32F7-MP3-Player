ARM GAS  C:\Users\milek\AppData\Local\Temp\cc0AUy20.s 			page 1


   1              		.cpu cortex-m7
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"tcpip.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.tcpip_thread,"ax",%progbits
  18              		.align	1
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu fpv5-sp-d16
  24              	tcpip_thread:
  25              	.LFB159:
  26              		.file 1 "Middlewares/Third_Party/LwIP/src/api/tcpip.c"
   1:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** /**
   2:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @file
   3:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * Sequential API Main thread module
   4:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
   5:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  */
   6:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
   7:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** /*
   8:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * Copyright (c) 2001-2004 Swedish Institute of Computer Science.
   9:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * All rights reserved.
  10:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
  11:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * Redistribution and use in source and binary forms, with or without modification,
  12:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * are permitted provided that the following conditions are met:
  13:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
  14:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * 1. Redistributions of source code must retain the above copyright notice,
  15:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *    this list of conditions and the following disclaimer.
  16:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  17:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *    this list of conditions and the following disclaimer in the documentation
  18:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *    and/or other materials provided with the distribution.
  19:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * 3. The name of the author may not be used to endorse or promote products
  20:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *    derived from this software without specific prior written permission.
  21:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
  22:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR IMPLIED
  23:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  24:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT
  25:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  26:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT
  27:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
  28:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
  29:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING
  30:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY
  31:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * OF SUCH DAMAGE.
  32:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
ARM GAS  C:\Users\milek\AppData\Local\Temp\cc0AUy20.s 			page 2


  33:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * This file is part of the lwIP TCP/IP stack.
  34:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
  35:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * Author: Adam Dunkels <adam@sics.se>
  36:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
  37:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  */
  38:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
  39:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #include "lwip/opt.h"
  40:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
  41:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #if !NO_SYS /* don't build if not configured for use in lwipopts.h */
  42:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
  43:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #include "lwip/priv/tcpip_priv.h"
  44:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #include "lwip/sys.h"
  45:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #include "lwip/memp.h"
  46:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #include "lwip/mem.h"
  47:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #include "lwip/init.h"
  48:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #include "lwip/ip.h"
  49:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #include "lwip/pbuf.h"
  50:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #include "lwip/etharp.h"
  51:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #include "netif/ethernet.h"
  52:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
  53:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #define TCPIP_MSG_VAR_REF(name)     API_VAR_REF(name)
  54:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #define TCPIP_MSG_VAR_DECLARE(name) API_VAR_DECLARE(struct tcpip_msg, name)
  55:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #define TCPIP_MSG_VAR_ALLOC(name)   API_VAR_ALLOC(struct tcpip_msg, MEMP_TCPIP_MSG_API, name, ERR_M
  56:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #define TCPIP_MSG_VAR_FREE(name)    API_VAR_FREE(MEMP_TCPIP_MSG_API, name)
  57:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
  58:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** /* global variables */
  59:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** static tcpip_init_done_fn tcpip_init_done;
  60:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** static void *tcpip_init_done_arg;
  61:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** static sys_mbox_t mbox;
  62:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
  63:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #if LWIP_TCPIP_CORE_LOCKING
  64:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** /** The global semaphore to lock the stack. */
  65:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** sys_mutex_t lock_tcpip_core;
  66:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #endif /* LWIP_TCPIP_CORE_LOCKING */
  67:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
  68:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #if LWIP_TIMERS
  69:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** /* wait for a message, timeouts are processed while waiting */
  70:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #define TCPIP_MBOX_FETCH(mbox, msg) sys_timeouts_mbox_fetch(mbox, msg)
  71:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #else /* LWIP_TIMERS */
  72:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** /* wait for a message with timers disabled (e.g. pass a timer-check trigger into tcpip_thread) */
  73:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #define TCPIP_MBOX_FETCH(mbox, msg) sys_mbox_fetch(mbox, msg)
  74:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #endif /* LWIP_TIMERS */
  75:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
  76:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** /**
  77:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * The main lwIP thread. This thread has exclusive access to lwIP core functions
  78:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * (unless access to them is not locked). Other threads communicate with this
  79:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * thread using message boxes.
  80:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
  81:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * It also starts all the timers to make sure they are running in the right
  82:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * thread context.
  83:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
  84:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param arg unused argument
  85:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  */
  86:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** static void
  87:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** tcpip_thread(void *arg)
  88:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** {
  27              		.loc 1 88 0
ARM GAS  C:\Users\milek\AppData\Local\Temp\cc0AUy20.s 			page 3


  28              		.cfi_startproc
  29              		@ Volatile: function does not return.
  30              		@ args = 0, pretend = 0, frame = 8
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              	.LVL0:
  33 0000 00B5     		push	{lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 4
  36              		.cfi_offset 14, -4
  37 0002 83B0     		sub	sp, sp, #12
  38              	.LCFI1:
  39              		.cfi_def_cfa_offset 16
  89:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   struct tcpip_msg *msg;
  90:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   LWIP_UNUSED_ARG(arg);
  91:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
  92:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   if (tcpip_init_done != NULL) {
  40              		.loc 1 92 0
  41 0004 204B     		ldr	r3, .L14
  42 0006 1B68     		ldr	r3, [r3]
  43 0008 13B1     		cbz	r3, .L2
  93:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     tcpip_init_done(tcpip_init_done_arg);
  44              		.loc 1 93 0
  45 000a 204A     		ldr	r2, .L14+4
  46 000c 1068     		ldr	r0, [r2]
  47              	.LVL1:
  48 000e 9847     		blx	r3
  49              	.LVL2:
  50              	.L2:
  94:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   }
  95:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
  96:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   LOCK_TCPIP_CORE();
  51              		.loc 1 96 0
  52 0010 1F48     		ldr	r0, .L14+8
  53 0012 FFF7FEFF 		bl	sys_mutex_lock
  54              	.LVL3:
  55 0016 0EE0     		b	.L3
  56              	.L12:
  97:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   while (1) {                          /* MAIN Loop */
  98:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     UNLOCK_TCPIP_CORE();
  99:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     LWIP_TCPIP_THREAD_ALIVE();
 100:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     /* wait for a message, timeouts are processed while waiting */
 101:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     TCPIP_MBOX_FETCH(&mbox, (void **)&msg);
 102:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     LOCK_TCPIP_CORE();
 103:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     if (msg == NULL) {
 104:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       LWIP_DEBUGF(TCPIP_DEBUG, ("tcpip_thread: invalid message: NULL\n"));
 105:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       LWIP_ASSERT("tcpip_thread: invalid message", 0);
  57              		.loc 1 105 0 discriminator 1
  58 0018 1E4B     		ldr	r3, .L14+12
  59 001a 6922     		movs	r2, #105
  60 001c 1E49     		ldr	r1, .L14+16
  61 001e 1F48     		ldr	r0, .L14+20
  62 0020 FFF7FEFF 		bl	printf
  63              	.LVL4:
 106:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       continue;
  64              		.loc 1 106 0 discriminator 1
  65 0024 07E0     		b	.L3
  66              	.L13:
ARM GAS  C:\Users\milek\AppData\Local\Temp\cc0AUy20.s 			page 4


 107:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     }
 108:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     switch (msg->type) {
 109:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #if !LWIP_TCPIP_CORE_LOCKING
 110:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     case TCPIP_MSG_API:
 111:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       LWIP_DEBUGF(TCPIP_DEBUG, ("tcpip_thread: API message %p\n", (void *)msg));
 112:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       msg->msg.api_msg.function(msg->msg.api_msg.msg);
 113:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       break;
 114:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     case TCPIP_MSG_API_CALL:
 115:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       LWIP_DEBUGF(TCPIP_DEBUG, ("tcpip_thread: API CALL message %p\n", (void *)msg));
 116:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       msg->msg.api_call.arg->err = msg->msg.api_call.function(msg->msg.api_call.arg);
 117:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       sys_sem_signal(msg->msg.api_call.sem);
 118:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       break;
 119:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #endif /* !LWIP_TCPIP_CORE_LOCKING */
 120:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 121:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #if !LWIP_TCPIP_CORE_LOCKING_INPUT
 122:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     case TCPIP_MSG_INPKT:
 123:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       LWIP_DEBUGF(TCPIP_DEBUG, ("tcpip_thread: PACKET %p\n", (void *)msg));
 124:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       msg->msg.inp.input_fn(msg->msg.inp.p, msg->msg.inp.netif);
  67              		.loc 1 124 0
  68 0026 DA68     		ldr	r2, [r3, #12]
  69 0028 9968     		ldr	r1, [r3, #8]
  70 002a 5868     		ldr	r0, [r3, #4]
  71 002c 9047     		blx	r2
  72              	.LVL5:
 125:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       memp_free(MEMP_TCPIP_MSG_INPKT, msg);
  73              		.loc 1 125 0
  74 002e 0199     		ldr	r1, [sp, #4]
  75 0030 0920     		movs	r0, #9
  76 0032 FFF7FEFF 		bl	memp_free
  77              	.LVL6:
  78              	.L3:
  98:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     LWIP_TCPIP_THREAD_ALIVE();
  79              		.loc 1 98 0
  80 0036 164C     		ldr	r4, .L14+8
  81 0038 2046     		mov	r0, r4
  82 003a FFF7FEFF 		bl	sys_mutex_unlock
  83              	.LVL7:
 101:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     LOCK_TCPIP_CORE();
  84              		.loc 1 101 0
  85 003e 01A9     		add	r1, sp, #4
  86 0040 1748     		ldr	r0, .L14+24
  87 0042 FFF7FEFF 		bl	sys_timeouts_mbox_fetch
  88              	.LVL8:
 102:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     if (msg == NULL) {
  89              		.loc 1 102 0
  90 0046 2046     		mov	r0, r4
  91 0048 FFF7FEFF 		bl	sys_mutex_lock
  92              	.LVL9:
 103:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       LWIP_DEBUGF(TCPIP_DEBUG, ("tcpip_thread: invalid message: NULL\n"));
  93              		.loc 1 103 0
  94 004c 019B     		ldr	r3, [sp, #4]
  95 004e 002B     		cmp	r3, #0
  96 0050 E2D0     		beq	.L12
 108:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #if !LWIP_TCPIP_CORE_LOCKING
  97              		.loc 1 108 0
  98 0052 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
  99 0054 032A     		cmp	r2, #3
ARM GAS  C:\Users\milek\AppData\Local\Temp\cc0AUy20.s 			page 5


 100 0056 0AD0     		beq	.L7
 101 0058 042A     		cmp	r2, #4
 102 005a 10D0     		beq	.L8
 103 005c 022A     		cmp	r2, #2
 104 005e E2D0     		beq	.L13
 126:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       break;
 127:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #endif /* !LWIP_TCPIP_CORE_LOCKING_INPUT */
 128:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 129:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #if LWIP_TCPIP_TIMEOUT && LWIP_TIMERS
 130:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     case TCPIP_MSG_TIMEOUT:
 131:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       LWIP_DEBUGF(TCPIP_DEBUG, ("tcpip_thread: TIMEOUT %p\n", (void *)msg));
 132:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       sys_timeout(msg->msg.tmo.msecs, msg->msg.tmo.h, msg->msg.tmo.arg);
 133:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       memp_free(MEMP_TCPIP_MSG_API, msg);
 134:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       break;
 135:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     case TCPIP_MSG_UNTIMEOUT:
 136:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       LWIP_DEBUGF(TCPIP_DEBUG, ("tcpip_thread: UNTIMEOUT %p\n", (void *)msg));
 137:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       sys_untimeout(msg->msg.tmo.h, msg->msg.tmo.arg);
 138:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       memp_free(MEMP_TCPIP_MSG_API, msg);
 139:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       break;
 140:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #endif /* LWIP_TCPIP_TIMEOUT && LWIP_TIMERS */
 141:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 142:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     case TCPIP_MSG_CALLBACK:
 143:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       LWIP_DEBUGF(TCPIP_DEBUG, ("tcpip_thread: CALLBACK %p\n", (void *)msg));
 144:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       msg->msg.cb.function(msg->msg.cb.ctx);
 145:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       memp_free(MEMP_TCPIP_MSG_API, msg);
 146:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       break;
 147:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 148:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     case TCPIP_MSG_CALLBACK_STATIC:
 149:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       LWIP_DEBUGF(TCPIP_DEBUG, ("tcpip_thread: CALLBACK_STATIC %p\n", (void *)msg));
 150:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       msg->msg.cb.function(msg->msg.cb.ctx);
 151:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       break;
 152:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 153:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     default:
 154:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       LWIP_DEBUGF(TCPIP_DEBUG, ("tcpip_thread: invalid message: %d\n", msg->type));
 155:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       LWIP_ASSERT("tcpip_thread: invalid message", 0);
 105              		.loc 1 155 0 discriminator 1
 106 0060 0C4B     		ldr	r3, .L14+12
 107 0062 9B22     		movs	r2, #155
 108 0064 0C49     		ldr	r1, .L14+16
 109 0066 0D48     		ldr	r0, .L14+20
 110 0068 FFF7FEFF 		bl	printf
 111              	.LVL10:
 156:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       break;
 112              		.loc 1 156 0 discriminator 1
 113 006c E3E7     		b	.L3
 114              	.L7:
 144:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       memp_free(MEMP_TCPIP_MSG_API, msg);
 115              		.loc 1 144 0
 116 006e 5A68     		ldr	r2, [r3, #4]
 117 0070 9868     		ldr	r0, [r3, #8]
 118 0072 9047     		blx	r2
 119              	.LVL11:
 145:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       break;
 120              		.loc 1 145 0
 121 0074 0199     		ldr	r1, [sp, #4]
 122 0076 0820     		movs	r0, #8
 123 0078 FFF7FEFF 		bl	memp_free
ARM GAS  C:\Users\milek\AppData\Local\Temp\cc0AUy20.s 			page 6


 124              	.LVL12:
 146:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 125              		.loc 1 146 0
 126 007c DBE7     		b	.L3
 127              	.L8:
 150:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       break;
 128              		.loc 1 150 0
 129 007e 5A68     		ldr	r2, [r3, #4]
 130 0080 9868     		ldr	r0, [r3, #8]
 131 0082 9047     		blx	r2
 132              	.LVL13:
 151:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 133              		.loc 1 151 0
 134 0084 D7E7     		b	.L3
 135              	.L15:
 136 0086 00BF     		.align	2
 137              	.L14:
 138 0088 00000000 		.word	.LANCHOR0
 139 008c 00000000 		.word	.LANCHOR1
 140 0090 00000000 		.word	lock_tcpip_core
 141 0094 00000000 		.word	.LC0
 142 0098 30000000 		.word	.LC1
 143 009c 50000000 		.word	.LC2
 144 00a0 00000000 		.word	.LANCHOR2
 145              		.cfi_endproc
 146              	.LFE159:
 148              		.section	.text.pbuf_free_int,"ax",%progbits
 149              		.align	1
 150              		.syntax unified
 151              		.thumb
 152              		.thumb_func
 153              		.fpu fpv5-sp-d16
 155              	pbuf_free_int:
 156              	.LFB169:
 157:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     }
 158:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   }
 159:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** }
 160:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 161:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** /**
 162:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * Pass a received packet to tcpip_thread for input processing
 163:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
 164:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param p the received packet
 165:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param inp the network interface on which the packet was received
 166:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param input_fn input function to call
 167:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  */
 168:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** err_t
 169:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** tcpip_inpkt(struct pbuf *p, struct netif *inp, netif_input_fn input_fn)
 170:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** {
 171:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #if LWIP_TCPIP_CORE_LOCKING_INPUT
 172:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   err_t ret;
 173:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   LWIP_DEBUGF(TCPIP_DEBUG, ("tcpip_inpkt: PACKET %p/%p\n", (void *)p, (void *)inp));
 174:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   LOCK_TCPIP_CORE();
 175:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   ret = input_fn(p, inp);
 176:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   UNLOCK_TCPIP_CORE();
 177:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   return ret;
 178:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #else /* LWIP_TCPIP_CORE_LOCKING_INPUT */
 179:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   struct tcpip_msg *msg;
ARM GAS  C:\Users\milek\AppData\Local\Temp\cc0AUy20.s 			page 7


 180:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 181:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   LWIP_ASSERT("Invalid mbox", sys_mbox_valid_val(mbox));
 182:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 183:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg = (struct tcpip_msg *)memp_malloc(MEMP_TCPIP_MSG_INPKT);
 184:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   if (msg == NULL) {
 185:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     return ERR_MEM;
 186:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   }
 187:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 188:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg->type = TCPIP_MSG_INPKT;
 189:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg->msg.inp.p = p;
 190:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg->msg.inp.netif = inp;
 191:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg->msg.inp.input_fn = input_fn;
 192:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   if (sys_mbox_trypost(&mbox, msg) != ERR_OK) {
 193:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     memp_free(MEMP_TCPIP_MSG_INPKT, msg);
 194:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     return ERR_MEM;
 195:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   }
 196:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   return ERR_OK;
 197:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #endif /* LWIP_TCPIP_CORE_LOCKING_INPUT */
 198:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** }
 199:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 200:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** /**
 201:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @ingroup lwip_os
 202:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * Pass a received packet to tcpip_thread for input processing with
 203:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * ethernet_input or ip_input. Don't call directly, pass to netif_add()
 204:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * and call netif->input().
 205:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
 206:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param p the received packet, p->payload pointing to the Ethernet header or
 207:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *          to an IP header (if inp doesn't have NETIF_FLAG_ETHARP or
 208:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *          NETIF_FLAG_ETHERNET flags)
 209:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param inp the network interface on which the packet was received
 210:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  */
 211:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** err_t
 212:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** tcpip_input(struct pbuf *p, struct netif *inp)
 213:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** {
 214:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #if LWIP_ETHERNET
 215:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   if (inp->flags & (NETIF_FLAG_ETHARP | NETIF_FLAG_ETHERNET)) {
 216:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     return tcpip_inpkt(p, inp, ethernet_input);
 217:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   } else
 218:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #endif /* LWIP_ETHERNET */
 219:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   return tcpip_inpkt(p, inp, ip_input);
 220:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** }
 221:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 222:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** /**
 223:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * Call a specific function in the thread context of
 224:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * tcpip_thread for easy access synchronization.
 225:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * A function called in that way may access lwIP core code
 226:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * without fearing concurrent access.
 227:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
 228:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param function the function to call
 229:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param ctx parameter passed to f
 230:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param block 1 to block until the request is posted, 0 to non-blocking mode
 231:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @return ERR_OK if the function was called, another err_t if not
 232:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  */
 233:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** err_t
 234:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** tcpip_callback_with_block(tcpip_callback_fn function, void *ctx, u8_t block)
 235:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** {
 236:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   struct tcpip_msg *msg;
ARM GAS  C:\Users\milek\AppData\Local\Temp\cc0AUy20.s 			page 8


 237:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 238:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   LWIP_ASSERT("Invalid mbox", sys_mbox_valid_val(mbox));
 239:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 240:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg = (struct tcpip_msg *)memp_malloc(MEMP_TCPIP_MSG_API);
 241:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   if (msg == NULL) {
 242:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     return ERR_MEM;
 243:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   }
 244:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 245:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg->type = TCPIP_MSG_CALLBACK;
 246:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg->msg.cb.function = function;
 247:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg->msg.cb.ctx = ctx;
 248:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   if (block) {
 249:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     sys_mbox_post(&mbox, msg);
 250:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   } else {
 251:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     if (sys_mbox_trypost(&mbox, msg) != ERR_OK) {
 252:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       memp_free(MEMP_TCPIP_MSG_API, msg);
 253:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       return ERR_MEM;
 254:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     }
 255:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   }
 256:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   return ERR_OK;
 257:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** }
 258:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 259:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #if LWIP_TCPIP_TIMEOUT && LWIP_TIMERS
 260:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** /**
 261:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * call sys_timeout in tcpip_thread
 262:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
 263:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param msecs time in milliseconds for timeout
 264:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param h function to be called on timeout
 265:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param arg argument to pass to timeout function h
 266:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @return ERR_MEM on memory error, ERR_OK otherwise
 267:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  */
 268:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** err_t
 269:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** tcpip_timeout(u32_t msecs, sys_timeout_handler h, void *arg)
 270:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** {
 271:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   struct tcpip_msg *msg;
 272:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 273:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   LWIP_ASSERT("Invalid mbox", sys_mbox_valid_val(mbox));
 274:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 275:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg = (struct tcpip_msg *)memp_malloc(MEMP_TCPIP_MSG_API);
 276:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   if (msg == NULL) {
 277:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     return ERR_MEM;
 278:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   }
 279:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 280:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg->type = TCPIP_MSG_TIMEOUT;
 281:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg->msg.tmo.msecs = msecs;
 282:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg->msg.tmo.h = h;
 283:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg->msg.tmo.arg = arg;
 284:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   sys_mbox_post(&mbox, msg);
 285:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   return ERR_OK;
 286:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** }
 287:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 288:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** /**
 289:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * call sys_untimeout in tcpip_thread
 290:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
 291:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param h function to be called on timeout
 292:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param arg argument to pass to timeout function h
 293:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @return ERR_MEM on memory error, ERR_OK otherwise
ARM GAS  C:\Users\milek\AppData\Local\Temp\cc0AUy20.s 			page 9


 294:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  */
 295:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** err_t
 296:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** tcpip_untimeout(sys_timeout_handler h, void *arg)
 297:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** {
 298:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   struct tcpip_msg *msg;
 299:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 300:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   LWIP_ASSERT("Invalid mbox", sys_mbox_valid_val(mbox));
 301:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 302:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg = (struct tcpip_msg *)memp_malloc(MEMP_TCPIP_MSG_API);
 303:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   if (msg == NULL) {
 304:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     return ERR_MEM;
 305:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   }
 306:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 307:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg->type = TCPIP_MSG_UNTIMEOUT;
 308:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg->msg.tmo.h = h;
 309:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg->msg.tmo.arg = arg;
 310:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   sys_mbox_post(&mbox, msg);
 311:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   return ERR_OK;
 312:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** }
 313:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #endif /* LWIP_TCPIP_TIMEOUT && LWIP_TIMERS */
 314:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 315:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 316:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** /**
 317:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * Sends a message to TCPIP thread to call a function. Caller thread blocks on
 318:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * on a provided semaphore, which ist NOT automatically signalled by TCPIP thread,
 319:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * this has to be done by the user.
 320:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * It is recommended to use LWIP_TCPIP_CORE_LOCKING since this is the way
 321:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * with least runtime overhead.
 322:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
 323:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param fn function to be called from TCPIP thread
 324:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param apimsg argument to API function
 325:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param sem semaphore to wait on
 326:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @return ERR_OK if the function was called, another err_t if not
 327:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  */
 328:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** err_t
 329:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** tcpip_send_msg_wait_sem(tcpip_callback_fn fn, void *apimsg, sys_sem_t* sem)
 330:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** {
 331:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #if LWIP_TCPIP_CORE_LOCKING
 332:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   LWIP_UNUSED_ARG(sem);
 333:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   LOCK_TCPIP_CORE();
 334:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   fn(apimsg);
 335:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   UNLOCK_TCPIP_CORE();
 336:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   return ERR_OK;
 337:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #else /* LWIP_TCPIP_CORE_LOCKING */
 338:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   TCPIP_MSG_VAR_DECLARE(msg);
 339:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 340:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   LWIP_ASSERT("semaphore not initialized", sys_sem_valid(sem));
 341:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   LWIP_ASSERT("Invalid mbox", sys_mbox_valid_val(mbox));
 342:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 343:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   TCPIP_MSG_VAR_ALLOC(msg);
 344:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   TCPIP_MSG_VAR_REF(msg).type = TCPIP_MSG_API;
 345:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   TCPIP_MSG_VAR_REF(msg).msg.api_msg.function = fn;
 346:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   TCPIP_MSG_VAR_REF(msg).msg.api_msg.msg = apimsg;
 347:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   sys_mbox_post(&mbox, &TCPIP_MSG_VAR_REF(msg));
 348:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   sys_arch_sem_wait(sem, 0);
 349:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   TCPIP_MSG_VAR_FREE(msg);
 350:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   return ERR_OK;
ARM GAS  C:\Users\milek\AppData\Local\Temp\cc0AUy20.s 			page 10


 351:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #endif /* LWIP_TCPIP_CORE_LOCKING */
 352:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** }
 353:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 354:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** /**
 355:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * Synchronously calls function in TCPIP thread and waits for its completion.
 356:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * It is recommended to use LWIP_TCPIP_CORE_LOCKING (preferred) or
 357:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * LWIP_NETCONN_SEM_PER_THREAD. 
 358:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * If not, a semaphore is created and destroyed on every call which is usually
 359:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * an expensive/slow operation.
 360:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param fn Function to call
 361:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param call Call parameters
 362:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @return Return value from tcpip_api_call_fn
 363:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  */
 364:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** err_t
 365:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** tcpip_api_call(tcpip_api_call_fn fn, struct tcpip_api_call_data *call)
 366:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** {
 367:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #if LWIP_TCPIP_CORE_LOCKING
 368:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   err_t err;
 369:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   LOCK_TCPIP_CORE();
 370:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   err = fn(call);
 371:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   UNLOCK_TCPIP_CORE();
 372:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   return err;
 373:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #else /* LWIP_TCPIP_CORE_LOCKING */
 374:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   TCPIP_MSG_VAR_DECLARE(msg);
 375:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 376:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #if !LWIP_NETCONN_SEM_PER_THREAD
 377:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   err_t err = sys_sem_new(&call->sem, 0);
 378:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   if (err != ERR_OK) {
 379:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     return err;
 380:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   }
 381:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #endif /* LWIP_NETCONN_SEM_PER_THREAD */
 382:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 383:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   LWIP_ASSERT("Invalid mbox", sys_mbox_valid_val(mbox));
 384:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 385:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   TCPIP_MSG_VAR_ALLOC(msg);
 386:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   TCPIP_MSG_VAR_REF(msg).type = TCPIP_MSG_API_CALL;
 387:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   TCPIP_MSG_VAR_REF(msg).msg.api_call.arg = call;
 388:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   TCPIP_MSG_VAR_REF(msg).msg.api_call.function = fn;
 389:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #if LWIP_NETCONN_SEM_PER_THREAD
 390:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   TCPIP_MSG_VAR_REF(msg).msg.api_call.sem = LWIP_NETCONN_THREAD_SEM_GET();
 391:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #else /* LWIP_NETCONN_SEM_PER_THREAD */
 392:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   TCPIP_MSG_VAR_REF(msg).msg.api_call.sem = &call->sem;
 393:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #endif /* LWIP_NETCONN_SEM_PER_THREAD */
 394:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   sys_mbox_post(&mbox, &TCPIP_MSG_VAR_REF(msg));
 395:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   sys_arch_sem_wait(TCPIP_MSG_VAR_REF(msg).msg.api_call.sem, 0);
 396:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   TCPIP_MSG_VAR_FREE(msg);
 397:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 398:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #if !LWIP_NETCONN_SEM_PER_THREAD
 399:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   sys_sem_free(&call->sem);
 400:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #endif /* LWIP_NETCONN_SEM_PER_THREAD */
 401:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 402:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   return call->err;
 403:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #endif /* LWIP_TCPIP_CORE_LOCKING */
 404:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** }
 405:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 406:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** /**
 407:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * Allocate a structure for a static callback message and initialize it.
ARM GAS  C:\Users\milek\AppData\Local\Temp\cc0AUy20.s 			page 11


 408:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * This is intended to be used to send "static" messages from interrupt context.
 409:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
 410:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param function the function to call
 411:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param ctx parameter passed to function
 412:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @return a struct pointer to pass to tcpip_trycallback().
 413:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  */
 414:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** struct tcpip_callback_msg*
 415:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** tcpip_callbackmsg_new(tcpip_callback_fn function, void *ctx)
 416:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** {
 417:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   struct tcpip_msg *msg = (struct tcpip_msg *)memp_malloc(MEMP_TCPIP_MSG_API);
 418:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   if (msg == NULL) {
 419:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     return NULL;
 420:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   }
 421:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg->type = TCPIP_MSG_CALLBACK_STATIC;
 422:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg->msg.cb.function = function;
 423:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg->msg.cb.ctx = ctx;
 424:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   return (struct tcpip_callback_msg*)msg;
 425:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** }
 426:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 427:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** /**
 428:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * Free a callback message allocated by tcpip_callbackmsg_new().
 429:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
 430:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param msg the message to free
 431:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  */
 432:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** void
 433:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** tcpip_callbackmsg_delete(struct tcpip_callback_msg* msg)
 434:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** {
 435:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   memp_free(MEMP_TCPIP_MSG_API, msg);
 436:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** }
 437:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 438:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** /**
 439:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * Try to post a callback-message to the tcpip_thread mbox
 440:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * This is intended to be used to send "static" messages from interrupt context.
 441:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
 442:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param msg pointer to the message to post
 443:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @return sys_mbox_trypost() return code
 444:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  */
 445:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** err_t
 446:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** tcpip_trycallback(struct tcpip_callback_msg* msg)
 447:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** {
 448:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   LWIP_ASSERT("Invalid mbox", sys_mbox_valid_val(mbox));
 449:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   return sys_mbox_trypost(&mbox, msg);
 450:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** }
 451:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 452:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** /**
 453:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @ingroup lwip_os
 454:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * Initialize this module:
 455:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * - initialize all sub modules
 456:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * - start the tcpip_thread
 457:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
 458:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param initfunc a function to call when tcpip_thread is running and finished initializing
 459:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param arg argument to pass to initfunc
 460:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  */
 461:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** void
 462:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** tcpip_init(tcpip_init_done_fn initfunc, void *arg)
 463:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** {
 464:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   lwip_init();
ARM GAS  C:\Users\milek\AppData\Local\Temp\cc0AUy20.s 			page 12


 465:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 466:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   tcpip_init_done = initfunc;
 467:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   tcpip_init_done_arg = arg;
 468:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   if (sys_mbox_new(&mbox, TCPIP_MBOX_SIZE) != ERR_OK) {
 469:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     LWIP_ASSERT("failed to create tcpip_thread mbox", 0);
 470:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   }
 471:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #if LWIP_TCPIP_CORE_LOCKING
 472:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   if (sys_mutex_new(&lock_tcpip_core) != ERR_OK) {
 473:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     LWIP_ASSERT("failed to create lock_tcpip_core", 0);
 474:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   }
 475:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #endif /* LWIP_TCPIP_CORE_LOCKING */
 476:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 477:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   sys_thread_new(TCPIP_THREAD_NAME, tcpip_thread, NULL, TCPIP_THREAD_STACKSIZE, TCPIP_THREAD_PRIO);
 478:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** }
 479:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 480:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** /**
 481:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * Simple callback function used with tcpip_callback to free a pbuf
 482:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * (pbuf_free has a wrong signature for tcpip_callback)
 483:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
 484:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param p The pbuf (chain) to be dereferenced.
 485:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  */
 486:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** static void
 487:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** pbuf_free_int(void *p)
 488:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** {
 157              		.loc 1 488 0
 158              		.cfi_startproc
 159              		@ args = 0, pretend = 0, frame = 0
 160              		@ frame_needed = 0, uses_anonymous_args = 0
 161              	.LVL14:
 162 0000 08B5     		push	{r3, lr}
 163              	.LCFI2:
 164              		.cfi_def_cfa_offset 8
 165              		.cfi_offset 3, -8
 166              		.cfi_offset 14, -4
 167              	.LVL15:
 489:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   struct pbuf *q = (struct pbuf *)p;
 490:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   pbuf_free(q);
 168              		.loc 1 490 0
 169 0002 FFF7FEFF 		bl	pbuf_free
 170              	.LVL16:
 491:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** }
 171              		.loc 1 491 0
 172 0006 08BD     		pop	{r3, pc}
 173              		.cfi_endproc
 174              	.LFE169:
 176              		.section	.text.tcpip_inpkt,"ax",%progbits
 177              		.align	1
 178              		.global	tcpip_inpkt
 179              		.syntax unified
 180              		.thumb
 181              		.thumb_func
 182              		.fpu fpv5-sp-d16
 184              	tcpip_inpkt:
 185              	.LFB160:
 170:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #if LWIP_TCPIP_CORE_LOCKING_INPUT
 186              		.loc 1 170 0
 187              		.cfi_startproc
ARM GAS  C:\Users\milek\AppData\Local\Temp\cc0AUy20.s 			page 13


 188              		@ args = 0, pretend = 0, frame = 0
 189              		@ frame_needed = 0, uses_anonymous_args = 0
 190              	.LVL17:
 191 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 192              	.LCFI3:
 193              		.cfi_def_cfa_offset 24
 194              		.cfi_offset 3, -24
 195              		.cfi_offset 4, -20
 196              		.cfi_offset 5, -16
 197              		.cfi_offset 6, -12
 198              		.cfi_offset 7, -8
 199              		.cfi_offset 14, -4
 200 0002 0746     		mov	r7, r0
 201 0004 0E46     		mov	r6, r1
 202 0006 1546     		mov	r5, r2
 181:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 203              		.loc 1 181 0
 204 0008 1348     		ldr	r0, .L25
 205              	.LVL18:
 206 000a FFF7FEFF 		bl	sys_mbox_valid
 207              	.LVL19:
 208 000e 88B1     		cbz	r0, .L23
 209              	.L19:
 183:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   if (msg == NULL) {
 210              		.loc 1 183 0
 211 0010 0920     		movs	r0, #9
 212 0012 FFF7FEFF 		bl	memp_malloc
 213              	.LVL20:
 184:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     return ERR_MEM;
 214              		.loc 1 184 0
 215 0016 0446     		mov	r4, r0
 216 0018 D0B1     		cbz	r0, .L21
 188:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg->msg.inp.p = p;
 217              		.loc 1 188 0
 218 001a 0223     		movs	r3, #2
 219 001c 0370     		strb	r3, [r0]
 189:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg->msg.inp.netif = inp;
 220              		.loc 1 189 0
 221 001e 4760     		str	r7, [r0, #4]
 190:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg->msg.inp.input_fn = input_fn;
 222              		.loc 1 190 0
 223 0020 8660     		str	r6, [r0, #8]
 191:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   if (sys_mbox_trypost(&mbox, msg) != ERR_OK) {
 224              		.loc 1 191 0
 225 0022 C560     		str	r5, [r0, #12]
 192:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     memp_free(MEMP_TCPIP_MSG_INPKT, msg);
 226              		.loc 1 192 0
 227 0024 0146     		mov	r1, r0
 228 0026 0C48     		ldr	r0, .L25
 229              	.LVL21:
 230 0028 FFF7FEFF 		bl	sys_mbox_trypost
 231              	.LVL22:
 232 002c 0346     		mov	r3, r0
 233 002e 40B9     		cbnz	r0, .L24
 234              	.L20:
 198:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 235              		.loc 1 198 0
ARM GAS  C:\Users\milek\AppData\Local\Temp\cc0AUy20.s 			page 14


 236 0030 1846     		mov	r0, r3
 237 0032 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 238              	.LVL23:
 239              	.L23:
 181:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 240              		.loc 1 181 0 discriminator 1
 241 0034 094B     		ldr	r3, .L25+4
 242 0036 B522     		movs	r2, #181
 243 0038 0949     		ldr	r1, .L25+8
 244 003a 0A48     		ldr	r0, .L25+12
 245 003c FFF7FEFF 		bl	printf
 246              	.LVL24:
 247 0040 E6E7     		b	.L19
 248              	.LVL25:
 249              	.L24:
 193:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     return ERR_MEM;
 250              		.loc 1 193 0
 251 0042 2146     		mov	r1, r4
 252 0044 0920     		movs	r0, #9
 253 0046 FFF7FEFF 		bl	memp_free
 254              	.LVL26:
 194:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   }
 255              		.loc 1 194 0
 256 004a 4FF0FF33 		mov	r3, #-1
 257 004e EFE7     		b	.L20
 258              	.LVL27:
 259              	.L21:
 185:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   }
 260              		.loc 1 185 0
 261 0050 4FF0FF33 		mov	r3, #-1
 262 0054 ECE7     		b	.L20
 263              	.L26:
 264 0056 00BF     		.align	2
 265              	.L25:
 266 0058 00000000 		.word	.LANCHOR2
 267 005c 00000000 		.word	.LC0
 268 0060 00000000 		.word	.LC3
 269 0064 50000000 		.word	.LC2
 270              		.cfi_endproc
 271              	.LFE160:
 273              		.section	.text.tcpip_input,"ax",%progbits
 274              		.align	1
 275              		.global	tcpip_input
 276              		.syntax unified
 277              		.thumb
 278              		.thumb_func
 279              		.fpu fpv5-sp-d16
 281              	tcpip_input:
 282              	.LFB161:
 213:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #if LWIP_ETHERNET
 283              		.loc 1 213 0
 284              		.cfi_startproc
 285              		@ args = 0, pretend = 0, frame = 0
 286              		@ frame_needed = 0, uses_anonymous_args = 0
 287              	.LVL28:
 288 0000 08B5     		push	{r3, lr}
 289              	.LCFI4:
ARM GAS  C:\Users\milek\AppData\Local\Temp\cc0AUy20.s 			page 15


 290              		.cfi_def_cfa_offset 8
 291              		.cfi_offset 3, -8
 292              		.cfi_offset 14, -4
 215:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     return tcpip_inpkt(p, inp, ethernet_input);
 293              		.loc 1 215 0
 294 0002 91F82F30 		ldrb	r3, [r1, #47]	@ zero_extendqisi2
 295 0006 13F0180F 		tst	r3, #24
 296 000a 03D1     		bne	.L31
 219:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** }
 297              		.loc 1 219 0
 298 000c 034A     		ldr	r2, .L32
 299 000e FFF7FEFF 		bl	tcpip_inpkt
 300              	.LVL29:
 301              	.L29:
 220:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 302              		.loc 1 220 0
 303 0012 08BD     		pop	{r3, pc}
 304              	.LVL30:
 305              	.L31:
 216:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   } else
 306              		.loc 1 216 0
 307 0014 024A     		ldr	r2, .L32+4
 308 0016 FFF7FEFF 		bl	tcpip_inpkt
 309              	.LVL31:
 310 001a FAE7     		b	.L29
 311              	.L33:
 312              		.align	2
 313              	.L32:
 314 001c 00000000 		.word	ip4_input
 315 0020 00000000 		.word	ethernet_input
 316              		.cfi_endproc
 317              	.LFE161:
 319              		.section	.text.tcpip_callback_with_block,"ax",%progbits
 320              		.align	1
 321              		.global	tcpip_callback_with_block
 322              		.syntax unified
 323              		.thumb
 324              		.thumb_func
 325              		.fpu fpv5-sp-d16
 327              	tcpip_callback_with_block:
 328              	.LFB162:
 235:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   struct tcpip_msg *msg;
 329              		.loc 1 235 0
 330              		.cfi_startproc
 331              		@ args = 0, pretend = 0, frame = 0
 332              		@ frame_needed = 0, uses_anonymous_args = 0
 333              	.LVL32:
 334 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 335              	.LCFI5:
 336              		.cfi_def_cfa_offset 24
 337              		.cfi_offset 3, -24
 338              		.cfi_offset 4, -20
 339              		.cfi_offset 5, -16
 340              		.cfi_offset 6, -12
 341              		.cfi_offset 7, -8
 342              		.cfi_offset 14, -4
 343 0002 0746     		mov	r7, r0
ARM GAS  C:\Users\milek\AppData\Local\Temp\cc0AUy20.s 			page 16


 344 0004 0E46     		mov	r6, r1
 345 0006 1546     		mov	r5, r2
 238:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 346              		.loc 1 238 0
 347 0008 1648     		ldr	r0, .L43
 348              	.LVL33:
 349 000a FFF7FEFF 		bl	sys_mbox_valid
 350              	.LVL34:
 351 000e 88B1     		cbz	r0, .L40
 352              	.L35:
 240:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   if (msg == NULL) {
 353              		.loc 1 240 0
 354 0010 0820     		movs	r0, #8
 355 0012 FFF7FEFF 		bl	memp_malloc
 356              	.LVL35:
 241:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     return ERR_MEM;
 357              		.loc 1 241 0
 358 0016 0446     		mov	r4, r0
 359 0018 00B3     		cbz	r0, .L38
 245:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg->msg.cb.function = function;
 360              		.loc 1 245 0
 361 001a 0323     		movs	r3, #3
 362 001c 0370     		strb	r3, [r0]
 246:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg->msg.cb.ctx = ctx;
 363              		.loc 1 246 0
 364 001e 4760     		str	r7, [r0, #4]
 247:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   if (block) {
 365              		.loc 1 247 0
 366 0020 8660     		str	r6, [r0, #8]
 248:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     sys_mbox_post(&mbox, msg);
 367              		.loc 1 248 0
 368 0022 75B9     		cbnz	r5, .L41
 251:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       memp_free(MEMP_TCPIP_MSG_API, msg);
 369              		.loc 1 251 0
 370 0024 0146     		mov	r1, r0
 371 0026 0F48     		ldr	r0, .L43
 372              	.LVL36:
 373 0028 FFF7FEFF 		bl	sys_mbox_trypost
 374              	.LVL37:
 375 002c 0346     		mov	r3, r0
 376 002e 70B9     		cbnz	r0, .L42
 377              	.L36:
 257:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 378              		.loc 1 257 0
 379 0030 1846     		mov	r0, r3
 380 0032 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 381              	.LVL38:
 382              	.L40:
 238:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 383              		.loc 1 238 0 discriminator 1
 384 0034 0C4B     		ldr	r3, .L43+4
 385 0036 EE22     		movs	r2, #238
 386 0038 0C49     		ldr	r1, .L43+8
 387 003a 0D48     		ldr	r0, .L43+12
 388 003c FFF7FEFF 		bl	printf
 389              	.LVL39:
 390 0040 E6E7     		b	.L35
ARM GAS  C:\Users\milek\AppData\Local\Temp\cc0AUy20.s 			page 17


 391              	.LVL40:
 392              	.L41:
 249:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   } else {
 393              		.loc 1 249 0
 394 0042 0146     		mov	r1, r0
 395 0044 0748     		ldr	r0, .L43
 396              	.LVL41:
 397 0046 FFF7FEFF 		bl	sys_mbox_post
 398              	.LVL42:
 256:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** }
 399              		.loc 1 256 0
 400 004a 0023     		movs	r3, #0
 401 004c F0E7     		b	.L36
 402              	.L42:
 252:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       return ERR_MEM;
 403              		.loc 1 252 0
 404 004e 2146     		mov	r1, r4
 405 0050 0820     		movs	r0, #8
 406 0052 FFF7FEFF 		bl	memp_free
 407              	.LVL43:
 253:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     }
 408              		.loc 1 253 0
 409 0056 4FF0FF33 		mov	r3, #-1
 410 005a E9E7     		b	.L36
 411              	.LVL44:
 412              	.L38:
 242:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   }
 413              		.loc 1 242 0
 414 005c 4FF0FF33 		mov	r3, #-1
 415 0060 E6E7     		b	.L36
 416              	.L44:
 417 0062 00BF     		.align	2
 418              	.L43:
 419 0064 00000000 		.word	.LANCHOR2
 420 0068 00000000 		.word	.LC0
 421 006c 00000000 		.word	.LC3
 422 0070 50000000 		.word	.LC2
 423              		.cfi_endproc
 424              	.LFE162:
 426              		.section	.text.tcpip_send_msg_wait_sem,"ax",%progbits
 427              		.align	1
 428              		.global	tcpip_send_msg_wait_sem
 429              		.syntax unified
 430              		.thumb
 431              		.thumb_func
 432              		.fpu fpv5-sp-d16
 434              	tcpip_send_msg_wait_sem:
 435              	.LFB163:
 330:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #if LWIP_TCPIP_CORE_LOCKING
 436              		.loc 1 330 0
 437              		.cfi_startproc
 438              		@ args = 0, pretend = 0, frame = 0
 439              		@ frame_needed = 0, uses_anonymous_args = 0
 440              	.LVL45:
 441 0000 70B5     		push	{r4, r5, r6, lr}
 442              	.LCFI6:
 443              		.cfi_def_cfa_offset 16
ARM GAS  C:\Users\milek\AppData\Local\Temp\cc0AUy20.s 			page 18


 444              		.cfi_offset 4, -16
 445              		.cfi_offset 5, -12
 446              		.cfi_offset 6, -8
 447              		.cfi_offset 14, -4
 448 0002 0546     		mov	r5, r0
 449 0004 0E46     		mov	r6, r1
 333:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   fn(apimsg);
 450              		.loc 1 333 0
 451 0006 054C     		ldr	r4, .L47
 452 0008 2046     		mov	r0, r4
 453              	.LVL46:
 454 000a FFF7FEFF 		bl	sys_mutex_lock
 455              	.LVL47:
 334:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   UNLOCK_TCPIP_CORE();
 456              		.loc 1 334 0
 457 000e 3046     		mov	r0, r6
 458 0010 A847     		blx	r5
 459              	.LVL48:
 335:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   return ERR_OK;
 460              		.loc 1 335 0
 461 0012 2046     		mov	r0, r4
 462 0014 FFF7FEFF 		bl	sys_mutex_unlock
 463              	.LVL49:
 352:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 464              		.loc 1 352 0
 465 0018 0020     		movs	r0, #0
 466 001a 70BD     		pop	{r4, r5, r6, pc}
 467              	.LVL50:
 468              	.L48:
 469              		.align	2
 470              	.L47:
 471 001c 00000000 		.word	lock_tcpip_core
 472              		.cfi_endproc
 473              	.LFE163:
 475              		.section	.text.tcpip_api_call,"ax",%progbits
 476              		.align	1
 477              		.global	tcpip_api_call
 478              		.syntax unified
 479              		.thumb
 480              		.thumb_func
 481              		.fpu fpv5-sp-d16
 483              	tcpip_api_call:
 484              	.LFB164:
 366:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #if LWIP_TCPIP_CORE_LOCKING
 485              		.loc 1 366 0
 486              		.cfi_startproc
 487              		@ args = 0, pretend = 0, frame = 0
 488              		@ frame_needed = 0, uses_anonymous_args = 0
 489              	.LVL51:
 490 0000 70B5     		push	{r4, r5, r6, lr}
 491              	.LCFI7:
 492              		.cfi_def_cfa_offset 16
 493              		.cfi_offset 4, -16
 494              		.cfi_offset 5, -12
 495              		.cfi_offset 6, -8
 496              		.cfi_offset 14, -4
 497 0002 0546     		mov	r5, r0
ARM GAS  C:\Users\milek\AppData\Local\Temp\cc0AUy20.s 			page 19


 498 0004 0E46     		mov	r6, r1
 369:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   err = fn(call);
 499              		.loc 1 369 0
 500 0006 064C     		ldr	r4, .L51
 501 0008 2046     		mov	r0, r4
 502              	.LVL52:
 503 000a FFF7FEFF 		bl	sys_mutex_lock
 504              	.LVL53:
 370:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   UNLOCK_TCPIP_CORE();
 505              		.loc 1 370 0
 506 000e 3046     		mov	r0, r6
 507 0010 A847     		blx	r5
 508              	.LVL54:
 509 0012 0546     		mov	r5, r0
 510              	.LVL55:
 371:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   return err;
 511              		.loc 1 371 0
 512 0014 2046     		mov	r0, r4
 513 0016 FFF7FEFF 		bl	sys_mutex_unlock
 514              	.LVL56:
 404:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 515              		.loc 1 404 0
 516 001a 2846     		mov	r0, r5
 517 001c 70BD     		pop	{r4, r5, r6, pc}
 518              	.LVL57:
 519              	.L52:
 520 001e 00BF     		.align	2
 521              	.L51:
 522 0020 00000000 		.word	lock_tcpip_core
 523              		.cfi_endproc
 524              	.LFE164:
 526              		.section	.text.tcpip_callbackmsg_new,"ax",%progbits
 527              		.align	1
 528              		.global	tcpip_callbackmsg_new
 529              		.syntax unified
 530              		.thumb
 531              		.thumb_func
 532              		.fpu fpv5-sp-d16
 534              	tcpip_callbackmsg_new:
 535              	.LFB165:
 416:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   struct tcpip_msg *msg = (struct tcpip_msg *)memp_malloc(MEMP_TCPIP_MSG_API);
 536              		.loc 1 416 0
 537              		.cfi_startproc
 538              		@ args = 0, pretend = 0, frame = 0
 539              		@ frame_needed = 0, uses_anonymous_args = 0
 540              	.LVL58:
 541 0000 38B5     		push	{r3, r4, r5, lr}
 542              	.LCFI8:
 543              		.cfi_def_cfa_offset 16
 544              		.cfi_offset 3, -16
 545              		.cfi_offset 4, -12
 546              		.cfi_offset 5, -8
 547              		.cfi_offset 14, -4
 548 0002 0546     		mov	r5, r0
 549 0004 0C46     		mov	r4, r1
 417:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   if (msg == NULL) {
 550              		.loc 1 417 0
ARM GAS  C:\Users\milek\AppData\Local\Temp\cc0AUy20.s 			page 20


 551 0006 0820     		movs	r0, #8
 552              	.LVL59:
 553 0008 FFF7FEFF 		bl	memp_malloc
 554              	.LVL60:
 418:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     return NULL;
 555              		.loc 1 418 0
 556 000c 30B1     		cbz	r0, .L55
 557 000e 0346     		mov	r3, r0
 421:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg->msg.cb.function = function;
 558              		.loc 1 421 0
 559 0010 0422     		movs	r2, #4
 560 0012 0270     		strb	r2, [r0]
 422:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg->msg.cb.ctx = ctx;
 561              		.loc 1 422 0
 562 0014 4560     		str	r5, [r0, #4]
 423:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   return (struct tcpip_callback_msg*)msg;
 563              		.loc 1 423 0
 564 0016 8460     		str	r4, [r0, #8]
 565              	.L53:
 425:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 566              		.loc 1 425 0
 567 0018 1846     		mov	r0, r3
 568              	.LVL61:
 569 001a 38BD     		pop	{r3, r4, r5, pc}
 570              	.LVL62:
 571              	.L55:
 419:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   }
 572              		.loc 1 419 0
 573 001c 0023     		movs	r3, #0
 574 001e FBE7     		b	.L53
 575              		.cfi_endproc
 576              	.LFE165:
 578              		.section	.text.tcpip_callbackmsg_delete,"ax",%progbits
 579              		.align	1
 580              		.global	tcpip_callbackmsg_delete
 581              		.syntax unified
 582              		.thumb
 583              		.thumb_func
 584              		.fpu fpv5-sp-d16
 586              	tcpip_callbackmsg_delete:
 587              	.LFB166:
 434:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   memp_free(MEMP_TCPIP_MSG_API, msg);
 588              		.loc 1 434 0
 589              		.cfi_startproc
 590              		@ args = 0, pretend = 0, frame = 0
 591              		@ frame_needed = 0, uses_anonymous_args = 0
 592              	.LVL63:
 593 0000 08B5     		push	{r3, lr}
 594              	.LCFI9:
 595              		.cfi_def_cfa_offset 8
 596              		.cfi_offset 3, -8
 597              		.cfi_offset 14, -4
 435:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** }
 598              		.loc 1 435 0
 599 0002 0146     		mov	r1, r0
 600 0004 0820     		movs	r0, #8
 601              	.LVL64:
ARM GAS  C:\Users\milek\AppData\Local\Temp\cc0AUy20.s 			page 21


 602 0006 FFF7FEFF 		bl	memp_free
 603              	.LVL65:
 436:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 604              		.loc 1 436 0
 605 000a 08BD     		pop	{r3, pc}
 606              		.cfi_endproc
 607              	.LFE166:
 609              		.section	.text.tcpip_trycallback,"ax",%progbits
 610              		.align	1
 611              		.global	tcpip_trycallback
 612              		.syntax unified
 613              		.thumb
 614              		.thumb_func
 615              		.fpu fpv5-sp-d16
 617              	tcpip_trycallback:
 618              	.LFB167:
 447:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   LWIP_ASSERT("Invalid mbox", sys_mbox_valid_val(mbox));
 619              		.loc 1 447 0
 620              		.cfi_startproc
 621              		@ args = 0, pretend = 0, frame = 0
 622              		@ frame_needed = 0, uses_anonymous_args = 0
 623              	.LVL66:
 624 0000 10B5     		push	{r4, lr}
 625              	.LCFI10:
 626              		.cfi_def_cfa_offset 8
 627              		.cfi_offset 4, -8
 628              		.cfi_offset 14, -4
 629 0002 0446     		mov	r4, r0
 448:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   return sys_mbox_trypost(&mbox, msg);
 630              		.loc 1 448 0
 631 0004 0848     		ldr	r0, .L63
 632              	.LVL67:
 633 0006 FFF7FEFF 		bl	sys_mbox_valid
 634              	.LVL68:
 635 000a 20B1     		cbz	r0, .L62
 636              	.L60:
 449:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** }
 637              		.loc 1 449 0
 638 000c 2146     		mov	r1, r4
 639 000e 0648     		ldr	r0, .L63
 640 0010 FFF7FEFF 		bl	sys_mbox_trypost
 641              	.LVL69:
 450:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 642              		.loc 1 450 0
 643 0014 10BD     		pop	{r4, pc}
 644              	.LVL70:
 645              	.L62:
 448:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   return sys_mbox_trypost(&mbox, msg);
 646              		.loc 1 448 0 discriminator 1
 647 0016 054B     		ldr	r3, .L63+4
 648 0018 4FF4E072 		mov	r2, #448
 649 001c 0449     		ldr	r1, .L63+8
 650 001e 0548     		ldr	r0, .L63+12
 651 0020 FFF7FEFF 		bl	printf
 652              	.LVL71:
 653 0024 F2E7     		b	.L60
 654              	.L64:
ARM GAS  C:\Users\milek\AppData\Local\Temp\cc0AUy20.s 			page 22


 655 0026 00BF     		.align	2
 656              	.L63:
 657 0028 00000000 		.word	.LANCHOR2
 658 002c 00000000 		.word	.LC0
 659 0030 00000000 		.word	.LC3
 660 0034 50000000 		.word	.LC2
 661              		.cfi_endproc
 662              	.LFE167:
 664              		.section	.text.tcpip_init,"ax",%progbits
 665              		.align	1
 666              		.global	tcpip_init
 667              		.syntax unified
 668              		.thumb
 669              		.thumb_func
 670              		.fpu fpv5-sp-d16
 672              	tcpip_init:
 673              	.LFB168:
 463:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   lwip_init();
 674              		.loc 1 463 0
 675              		.cfi_startproc
 676              		@ args = 0, pretend = 0, frame = 0
 677              		@ frame_needed = 0, uses_anonymous_args = 0
 678              	.LVL72:
 679 0000 30B5     		push	{r4, r5, lr}
 680              	.LCFI11:
 681              		.cfi_def_cfa_offset 12
 682              		.cfi_offset 4, -12
 683              		.cfi_offset 5, -8
 684              		.cfi_offset 14, -4
 685 0002 83B0     		sub	sp, sp, #12
 686              	.LCFI12:
 687              		.cfi_def_cfa_offset 24
 688 0004 0546     		mov	r5, r0
 689 0006 0C46     		mov	r4, r1
 464:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 690              		.loc 1 464 0
 691 0008 FFF7FEFF 		bl	lwip_init
 692              	.LVL73:
 466:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   tcpip_init_done_arg = arg;
 693              		.loc 1 466 0
 694 000c 134B     		ldr	r3, .L71
 695 000e 1D60     		str	r5, [r3]
 467:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   if (sys_mbox_new(&mbox, TCPIP_MBOX_SIZE) != ERR_OK) {
 696              		.loc 1 467 0
 697 0010 134B     		ldr	r3, .L71+4
 698 0012 1C60     		str	r4, [r3]
 468:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     LWIP_ASSERT("failed to create tcpip_thread mbox", 0);
 699              		.loc 1 468 0
 700 0014 0621     		movs	r1, #6
 701 0016 1348     		ldr	r0, .L71+8
 702 0018 FFF7FEFF 		bl	sys_mbox_new
 703              	.LVL74:
 704 001c 70B9     		cbnz	r0, .L69
 705              	.L66:
 472:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     LWIP_ASSERT("failed to create lock_tcpip_core", 0);
 706              		.loc 1 472 0
 707 001e 1248     		ldr	r0, .L71+12
ARM GAS  C:\Users\milek\AppData\Local\Temp\cc0AUy20.s 			page 23


 708 0020 FFF7FEFF 		bl	sys_mutex_new
 709              	.LVL75:
 710 0024 90B9     		cbnz	r0, .L70
 711              	.L67:
 477:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** }
 712              		.loc 1 477 0
 713 0026 0323     		movs	r3, #3
 714 0028 0093     		str	r3, [sp]
 715 002a 4FF48063 		mov	r3, #1024
 716 002e 0022     		movs	r2, #0
 717 0030 0E49     		ldr	r1, .L71+16
 718 0032 0F48     		ldr	r0, .L71+20
 719 0034 FFF7FEFF 		bl	sys_thread_new
 720              	.LVL76:
 478:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 721              		.loc 1 478 0
 722 0038 03B0     		add	sp, sp, #12
 723              	.LCFI13:
 724              		.cfi_remember_state
 725              		.cfi_def_cfa_offset 12
 726              		@ sp needed
 727 003a 30BD     		pop	{r4, r5, pc}
 728              	.LVL77:
 729              	.L69:
 730              	.LCFI14:
 731              		.cfi_restore_state
 469:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   }
 732              		.loc 1 469 0 discriminator 1
 733 003c 0D4B     		ldr	r3, .L71+24
 734 003e 40F2D512 		movw	r2, #469
 735 0042 0D49     		ldr	r1, .L71+28
 736 0044 0D48     		ldr	r0, .L71+32
 737 0046 FFF7FEFF 		bl	printf
 738              	.LVL78:
 739 004a E8E7     		b	.L66
 740              	.L70:
 473:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   }
 741              		.loc 1 473 0 discriminator 1
 742 004c 094B     		ldr	r3, .L71+24
 743 004e 40F2D912 		movw	r2, #473
 744 0052 0B49     		ldr	r1, .L71+36
 745 0054 0948     		ldr	r0, .L71+32
 746 0056 FFF7FEFF 		bl	printf
 747              	.LVL79:
 748 005a E4E7     		b	.L67
 749              	.L72:
 750              		.align	2
 751              	.L71:
 752 005c 00000000 		.word	.LANCHOR0
 753 0060 00000000 		.word	.LANCHOR1
 754 0064 00000000 		.word	.LANCHOR2
 755 0068 00000000 		.word	lock_tcpip_core
 756 006c 00000000 		.word	tcpip_thread
 757 0070 48000000 		.word	.LC6
 758 0074 00000000 		.word	.LC0
 759 0078 00000000 		.word	.LC4
 760 007c 50000000 		.word	.LC2
ARM GAS  C:\Users\milek\AppData\Local\Temp\cc0AUy20.s 			page 24


 761 0080 24000000 		.word	.LC5
 762              		.cfi_endproc
 763              	.LFE168:
 765              		.section	.text.pbuf_free_callback,"ax",%progbits
 766              		.align	1
 767              		.global	pbuf_free_callback
 768              		.syntax unified
 769              		.thumb
 770              		.thumb_func
 771              		.fpu fpv5-sp-d16
 773              	pbuf_free_callback:
 774              	.LFB170:
 492:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 493:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** /**
 494:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * A simple wrapper function that allows you to free a pbuf from interrupt context.
 495:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
 496:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param p The pbuf (chain) to be dereferenced.
 497:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @return ERR_OK if callback could be enqueued, an err_t if not
 498:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  */
 499:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** err_t
 500:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** pbuf_free_callback(struct pbuf *p)
 501:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** {
 775              		.loc 1 501 0
 776              		.cfi_startproc
 777              		@ args = 0, pretend = 0, frame = 0
 778              		@ frame_needed = 0, uses_anonymous_args = 0
 779              	.LVL80:
 780 0000 08B5     		push	{r3, lr}
 781              	.LCFI15:
 782              		.cfi_def_cfa_offset 8
 783              		.cfi_offset 3, -8
 784              		.cfi_offset 14, -4
 502:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   return tcpip_callback_with_block(pbuf_free_int, p, 0);
 785              		.loc 1 502 0
 786 0002 0022     		movs	r2, #0
 787 0004 0146     		mov	r1, r0
 788 0006 0248     		ldr	r0, .L75
 789              	.LVL81:
 790 0008 FFF7FEFF 		bl	tcpip_callback_with_block
 791              	.LVL82:
 503:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** }
 792              		.loc 1 503 0
 793 000c 08BD     		pop	{r3, pc}
 794              	.L76:
 795 000e 00BF     		.align	2
 796              	.L75:
 797 0010 00000000 		.word	pbuf_free_int
 798              		.cfi_endproc
 799              	.LFE170:
 801              		.section	.text.mem_free_callback,"ax",%progbits
 802              		.align	1
 803              		.global	mem_free_callback
 804              		.syntax unified
 805              		.thumb
 806              		.thumb_func
 807              		.fpu fpv5-sp-d16
 809              	mem_free_callback:
ARM GAS  C:\Users\milek\AppData\Local\Temp\cc0AUy20.s 			page 25


 810              	.LFB171:
 504:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 505:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** /**
 506:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * A simple wrapper function that allows you to free heap memory from
 507:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * interrupt context.
 508:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
 509:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param m the heap memory to free
 510:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @return ERR_OK if callback could be enqueued, an err_t if not
 511:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  */
 512:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** err_t
 513:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** mem_free_callback(void *m)
 514:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** {
 811              		.loc 1 514 0
 812              		.cfi_startproc
 813              		@ args = 0, pretend = 0, frame = 0
 814              		@ frame_needed = 0, uses_anonymous_args = 0
 815              	.LVL83:
 816 0000 08B5     		push	{r3, lr}
 817              	.LCFI16:
 818              		.cfi_def_cfa_offset 8
 819              		.cfi_offset 3, -8
 820              		.cfi_offset 14, -4
 515:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   return tcpip_callback_with_block(mem_free, m, 0);
 821              		.loc 1 515 0
 822 0002 0022     		movs	r2, #0
 823 0004 0146     		mov	r1, r0
 824 0006 0248     		ldr	r0, .L79
 825              	.LVL84:
 826 0008 FFF7FEFF 		bl	tcpip_callback_with_block
 827              	.LVL85:
 516:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** }
 828              		.loc 1 516 0
 829 000c 08BD     		pop	{r3, pc}
 830              	.L80:
 831 000e 00BF     		.align	2
 832              	.L79:
 833 0010 00000000 		.word	mem_free
 834              		.cfi_endproc
 835              	.LFE171:
 837              		.comm	lock_tcpip_core,4,4
 838              		.section	.bss.mbox,"aw",%nobits
 839              		.align	2
 840              		.set	.LANCHOR2,. + 0
 843              	mbox:
 844 0000 00000000 		.space	4
 845              		.section	.bss.tcpip_init_done,"aw",%nobits
 846              		.align	2
 847              		.set	.LANCHOR0,. + 0
 850              	tcpip_init_done:
 851 0000 00000000 		.space	4
 852              		.section	.bss.tcpip_init_done_arg,"aw",%nobits
 853              		.align	2
 854              		.set	.LANCHOR1,. + 0
 857              	tcpip_init_done_arg:
 858 0000 00000000 		.space	4
 859              		.section	.rodata.tcpip_init.str1.4,"aMS",%progbits,1
 860              		.align	2
ARM GAS  C:\Users\milek\AppData\Local\Temp\cc0AUy20.s 			page 26


 861              	.LC4:
 862 0000 6661696C 		.ascii	"failed to create tcpip_thread mbox\000"
 862      65642074 
 862      6F206372 
 862      65617465 
 862      20746370 
 863 0023 00       		.space	1
 864              	.LC5:
 865 0024 6661696C 		.ascii	"failed to create lock_tcpip_core\000"
 865      65642074 
 865      6F206372 
 865      65617465 
 865      206C6F63 
 866 0045 000000   		.space	3
 867              	.LC6:
 868 0048 74637069 		.ascii	"tcpip_thread\000"
 868      705F7468 
 868      72656164 
 868      00
 869              		.section	.rodata.tcpip_inpkt.str1.4,"aMS",%progbits,1
 870              		.align	2
 871              	.LC3:
 872 0000 496E7661 		.ascii	"Invalid mbox\000"
 872      6C696420 
 872      6D626F78 
 872      00
 873              		.section	.rodata.tcpip_thread.str1.4,"aMS",%progbits,1
 874              		.align	2
 875              	.LC0:
 876 0000 4D696464 		.ascii	"Middlewares/Third_Party/LwIP/src/api/tcpip.c\000"
 876      6C657761 
 876      7265732F 
 876      54686972 
 876      645F5061 
 877 002d 000000   		.space	3
 878              	.LC1:
 879 0030 74637069 		.ascii	"tcpip_thread: invalid message\000"
 879      705F7468 
 879      72656164 
 879      3A20696E 
 879      76616C69 
 880 004e 0000     		.space	2
 881              	.LC2:
 882 0050 41737365 		.ascii	"Assertion \"%s\" failed at line %d in %s\012\000"
 882      7274696F 
 882      6E202225 
 882      73222066 
 882      61696C65 
 883              		.text
 884              	.Letext0:
 885              		.file 2 "d:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\machine\\_default
 886              		.file 3 "d:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\sys\\_stdint.h"
 887              		.file 4 "Drivers/CMSIS/Include/core_cm7.h"
 888              		.file 5 "Drivers/CMSIS/Device/ST/STM32F7xx/Include/system_stm32f7xx.h"
 889              		.file 6 "d:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\sys\\lock.h"
 890              		.file 7 "d:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\sys\\_types.h"
 891              		.file 8 "d:\\program files (x86)\\gnu\\7_2018-q2-update\\lib\\gcc\\arm-none-eabi\\7.3.1\\include\\
ARM GAS  C:\Users\milek\AppData\Local\Temp\cc0AUy20.s 			page 27


 892              		.file 9 "d:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\sys\\reent.h"
 893              		.file 10 "d:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\stdlib.h"
 894              		.file 11 "d:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\time.h"
 895              		.file 12 "Middlewares/Third_Party/LwIP/src/include/lwip/arch.h"
 896              		.file 13 "Middlewares/Third_Party/LwIP/src/include/lwip/err.h"
 897              		.file 14 "Middlewares/Third_Party/FreeRTOS/Source/include/queue.h"
 898              		.file 15 "Middlewares/Third_Party/FreeRTOS/Source/include/semphr.h"
 899              		.file 16 "Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.h"
 900              		.file 17 "Middlewares/Third_Party/LwIP/system/arch/sys_arch.h"
 901              		.file 18 "Middlewares/Third_Party/LwIP/src/include/lwip/timeouts.h"
 902              		.file 19 "Middlewares/Third_Party/LwIP/src/include/lwip/ip4_addr.h"
 903              		.file 20 "Middlewares/Third_Party/LwIP/src/include/lwip/ip_addr.h"
 904              		.file 21 "Middlewares/Third_Party/LwIP/src/include/lwip/pbuf.h"
 905              		.file 22 "Middlewares/Third_Party/LwIP/src/include/lwip/memp.h"
 906              		.file 23 "Middlewares/Third_Party/LwIP/src/include/lwip/priv/memp_priv.h"
 907              		.file 24 "Middlewares/Third_Party/LwIP/src/include/lwip/netif.h"
 908              		.file 25 "Middlewares/Third_Party/LwIP/src/include/lwip/tcpip.h"
 909              		.file 26 "Middlewares/Third_Party/LwIP/src/include/lwip/priv/tcpip_priv.h"
 910              		.file 27 "Middlewares/Third_Party/LwIP/src/include/lwip/prot/ip4.h"
 911              		.file 28 "Middlewares/Third_Party/LwIP/src/include/lwip/ip.h"
 912              		.file 29 "Middlewares/Third_Party/LwIP/src/include/lwip/prot/ethernet.h"
 913              		.file 30 "Middlewares/Third_Party/LwIP/src/include/netif/ethernet.h"
 914              		.file 31 "Middlewares/Third_Party/LwIP/src/include/lwip/init.h"
 915              		.file 32 "Middlewares/Third_Party/LwIP/src/include/lwip/sys.h"
 916              		.file 33 "d:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\stdio.h"
ARM GAS  C:\Users\milek\AppData\Local\Temp\cc0AUy20.s 			page 28


DEFINED SYMBOLS
                            *ABS*:00000000 tcpip.c
C:\Users\milek\AppData\Local\Temp\cc0AUy20.s:18     .text.tcpip_thread:00000000 $t
C:\Users\milek\AppData\Local\Temp\cc0AUy20.s:24     .text.tcpip_thread:00000000 tcpip_thread
C:\Users\milek\AppData\Local\Temp\cc0AUy20.s:138    .text.tcpip_thread:00000088 $d
                            *COM*:00000004 lock_tcpip_core
C:\Users\milek\AppData\Local\Temp\cc0AUy20.s:149    .text.pbuf_free_int:00000000 $t
C:\Users\milek\AppData\Local\Temp\cc0AUy20.s:155    .text.pbuf_free_int:00000000 pbuf_free_int
C:\Users\milek\AppData\Local\Temp\cc0AUy20.s:177    .text.tcpip_inpkt:00000000 $t
C:\Users\milek\AppData\Local\Temp\cc0AUy20.s:184    .text.tcpip_inpkt:00000000 tcpip_inpkt
C:\Users\milek\AppData\Local\Temp\cc0AUy20.s:266    .text.tcpip_inpkt:00000058 $d
C:\Users\milek\AppData\Local\Temp\cc0AUy20.s:274    .text.tcpip_input:00000000 $t
C:\Users\milek\AppData\Local\Temp\cc0AUy20.s:281    .text.tcpip_input:00000000 tcpip_input
C:\Users\milek\AppData\Local\Temp\cc0AUy20.s:314    .text.tcpip_input:0000001c $d
C:\Users\milek\AppData\Local\Temp\cc0AUy20.s:320    .text.tcpip_callback_with_block:00000000 $t
C:\Users\milek\AppData\Local\Temp\cc0AUy20.s:327    .text.tcpip_callback_with_block:00000000 tcpip_callback_with_block
C:\Users\milek\AppData\Local\Temp\cc0AUy20.s:419    .text.tcpip_callback_with_block:00000064 $d
C:\Users\milek\AppData\Local\Temp\cc0AUy20.s:427    .text.tcpip_send_msg_wait_sem:00000000 $t
C:\Users\milek\AppData\Local\Temp\cc0AUy20.s:434    .text.tcpip_send_msg_wait_sem:00000000 tcpip_send_msg_wait_sem
C:\Users\milek\AppData\Local\Temp\cc0AUy20.s:471    .text.tcpip_send_msg_wait_sem:0000001c $d
C:\Users\milek\AppData\Local\Temp\cc0AUy20.s:476    .text.tcpip_api_call:00000000 $t
C:\Users\milek\AppData\Local\Temp\cc0AUy20.s:483    .text.tcpip_api_call:00000000 tcpip_api_call
C:\Users\milek\AppData\Local\Temp\cc0AUy20.s:522    .text.tcpip_api_call:00000020 $d
C:\Users\milek\AppData\Local\Temp\cc0AUy20.s:527    .text.tcpip_callbackmsg_new:00000000 $t
C:\Users\milek\AppData\Local\Temp\cc0AUy20.s:534    .text.tcpip_callbackmsg_new:00000000 tcpip_callbackmsg_new
C:\Users\milek\AppData\Local\Temp\cc0AUy20.s:579    .text.tcpip_callbackmsg_delete:00000000 $t
C:\Users\milek\AppData\Local\Temp\cc0AUy20.s:586    .text.tcpip_callbackmsg_delete:00000000 tcpip_callbackmsg_delete
C:\Users\milek\AppData\Local\Temp\cc0AUy20.s:610    .text.tcpip_trycallback:00000000 $t
C:\Users\milek\AppData\Local\Temp\cc0AUy20.s:617    .text.tcpip_trycallback:00000000 tcpip_trycallback
C:\Users\milek\AppData\Local\Temp\cc0AUy20.s:657    .text.tcpip_trycallback:00000028 $d
C:\Users\milek\AppData\Local\Temp\cc0AUy20.s:665    .text.tcpip_init:00000000 $t
C:\Users\milek\AppData\Local\Temp\cc0AUy20.s:672    .text.tcpip_init:00000000 tcpip_init
C:\Users\milek\AppData\Local\Temp\cc0AUy20.s:752    .text.tcpip_init:0000005c $d
C:\Users\milek\AppData\Local\Temp\cc0AUy20.s:766    .text.pbuf_free_callback:00000000 $t
C:\Users\milek\AppData\Local\Temp\cc0AUy20.s:773    .text.pbuf_free_callback:00000000 pbuf_free_callback
C:\Users\milek\AppData\Local\Temp\cc0AUy20.s:797    .text.pbuf_free_callback:00000010 $d
C:\Users\milek\AppData\Local\Temp\cc0AUy20.s:802    .text.mem_free_callback:00000000 $t
C:\Users\milek\AppData\Local\Temp\cc0AUy20.s:809    .text.mem_free_callback:00000000 mem_free_callback
C:\Users\milek\AppData\Local\Temp\cc0AUy20.s:833    .text.mem_free_callback:00000010 $d
C:\Users\milek\AppData\Local\Temp\cc0AUy20.s:839    .bss.mbox:00000000 $d
C:\Users\milek\AppData\Local\Temp\cc0AUy20.s:843    .bss.mbox:00000000 mbox
C:\Users\milek\AppData\Local\Temp\cc0AUy20.s:846    .bss.tcpip_init_done:00000000 $d
C:\Users\milek\AppData\Local\Temp\cc0AUy20.s:850    .bss.tcpip_init_done:00000000 tcpip_init_done
C:\Users\milek\AppData\Local\Temp\cc0AUy20.s:853    .bss.tcpip_init_done_arg:00000000 $d
C:\Users\milek\AppData\Local\Temp\cc0AUy20.s:857    .bss.tcpip_init_done_arg:00000000 tcpip_init_done_arg
C:\Users\milek\AppData\Local\Temp\cc0AUy20.s:860    .rodata.tcpip_init.str1.4:00000000 $d
C:\Users\milek\AppData\Local\Temp\cc0AUy20.s:870    .rodata.tcpip_inpkt.str1.4:00000000 $d
C:\Users\milek\AppData\Local\Temp\cc0AUy20.s:874    .rodata.tcpip_thread.str1.4:00000000 $d

UNDEFINED SYMBOLS
sys_mutex_lock
printf
memp_free
sys_mutex_unlock
sys_timeouts_mbox_fetch
pbuf_free
sys_mbox_valid
ARM GAS  C:\Users\milek\AppData\Local\Temp\cc0AUy20.s 			page 29


memp_malloc
sys_mbox_trypost
ip4_input
ethernet_input
sys_mbox_post
lwip_init
sys_mbox_new
sys_mutex_new
sys_thread_new
mem_free
