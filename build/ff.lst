ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 1


   1              		.cpu cortex-m7
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"ff.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.ld_word,"ax",%progbits
  18              		.align	1
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu fpv5-sp-d16
  24              	ld_word:
  25              	.LFB141:
  26              		.file 1 "Middlewares/Third_Party/FatFs/src/ff.c"
   1:Middlewares/Third_Party/FatFs/src/ff.c **** /*----------------------------------------------------------------------------/
   2:Middlewares/Third_Party/FatFs/src/ff.c **** /  FatFs - Generic FAT file system module  R0.12c                             /
   3:Middlewares/Third_Party/FatFs/src/ff.c **** /-----------------------------------------------------------------------------/
   4:Middlewares/Third_Party/FatFs/src/ff.c **** /
   5:Middlewares/Third_Party/FatFs/src/ff.c **** / Copyright (C) 2017, ChaN, all right reserved.
   6:Middlewares/Third_Party/FatFs/src/ff.c **** /
   7:Middlewares/Third_Party/FatFs/src/ff.c **** / FatFs module is an open source software. Redistribution and use of FatFs in
   8:Middlewares/Third_Party/FatFs/src/ff.c **** / source and binary forms, with or without modification, are permitted provided
   9:Middlewares/Third_Party/FatFs/src/ff.c **** / that the following condition is met:
  10:Middlewares/Third_Party/FatFs/src/ff.c **** /
  11:Middlewares/Third_Party/FatFs/src/ff.c **** / 1. Redistributions of source code must retain the above copyright notice,
  12:Middlewares/Third_Party/FatFs/src/ff.c **** /    this condition and the following disclaimer.
  13:Middlewares/Third_Party/FatFs/src/ff.c **** /
  14:Middlewares/Third_Party/FatFs/src/ff.c **** / This software is provided by the copyright holder and contributors "AS IS"
  15:Middlewares/Third_Party/FatFs/src/ff.c **** / and any warranties related to this software are DISCLAIMED.
  16:Middlewares/Third_Party/FatFs/src/ff.c **** / The copyright owner or contributors be NOT LIABLE for any damages caused
  17:Middlewares/Third_Party/FatFs/src/ff.c **** / by use of this software.
  18:Middlewares/Third_Party/FatFs/src/ff.c **** /----------------------------------------------------------------------------*/
  19:Middlewares/Third_Party/FatFs/src/ff.c **** 
  20:Middlewares/Third_Party/FatFs/src/ff.c **** 
  21:Middlewares/Third_Party/FatFs/src/ff.c **** #include "ff.h"			/* Declarations of FatFs API */
  22:Middlewares/Third_Party/FatFs/src/ff.c **** #include "diskio.h"		/* Declarations of device I/O functions */
  23:Middlewares/Third_Party/FatFs/src/ff.c **** 
  24:Middlewares/Third_Party/FatFs/src/ff.c **** 
  25:Middlewares/Third_Party/FatFs/src/ff.c **** /*--------------------------------------------------------------------------
  26:Middlewares/Third_Party/FatFs/src/ff.c **** 
  27:Middlewares/Third_Party/FatFs/src/ff.c ****    Module Private Definitions
  28:Middlewares/Third_Party/FatFs/src/ff.c **** 
  29:Middlewares/Third_Party/FatFs/src/ff.c **** ---------------------------------------------------------------------------*/
  30:Middlewares/Third_Party/FatFs/src/ff.c **** 
  31:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FATFS != 68300	/* Revision ID */
  32:Middlewares/Third_Party/FatFs/src/ff.c **** #error Wrong include file (ff.h).
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 2


  33:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
  34:Middlewares/Third_Party/FatFs/src/ff.c **** 
  35:Middlewares/Third_Party/FatFs/src/ff.c **** 
  36:Middlewares/Third_Party/FatFs/src/ff.c **** /* DBCS code ranges and SBCS upper conversion tables */
  37:Middlewares/Third_Party/FatFs/src/ff.c **** 
  38:Middlewares/Third_Party/FatFs/src/ff.c **** #if _CODE_PAGE == 932	/* Japanese Shift-JIS */
  39:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0x81	/* DBC 1st byte range 1 start */
  40:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1E	0x9F	/* DBC 1st byte range 1 end */
  41:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF2S	0xE0	/* DBC 1st byte range 2 start */
  42:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF2E	0xFC	/* DBC 1st byte range 2 end */
  43:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS1S	0x40	/* DBC 2nd byte range 1 start */
  44:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS1E	0x7E	/* DBC 2nd byte range 1 end */
  45:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS2S	0x80	/* DBC 2nd byte range 2 start */
  46:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS2E	0xFC	/* DBC 2nd byte range 2 end */
  47:Middlewares/Third_Party/FatFs/src/ff.c **** 
  48:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 936	/* Simplified Chinese GBK */
  49:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0x81
  50:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1E	0xFE
  51:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS1S	0x40
  52:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS1E	0x7E
  53:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS2S	0x80
  54:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS2E	0xFE
  55:Middlewares/Third_Party/FatFs/src/ff.c **** 
  56:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 949	/* Korean */
  57:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0x81
  58:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1E	0xFE
  59:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS1S	0x41
  60:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS1E	0x5A
  61:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS2S	0x61
  62:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS2E	0x7A
  63:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS3S	0x81
  64:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS3E	0xFE
  65:Middlewares/Third_Party/FatFs/src/ff.c **** 
  66:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 950	/* Traditional Chinese Big5 */
  67:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0x81
  68:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1E	0xFE
  69:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS1S	0x40
  70:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS1E	0x7E
  71:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS2S	0xA1
  72:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS2E	0xFE
  73:Middlewares/Third_Party/FatFs/src/ff.c **** 
  74:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 437	/* U.S. */
  75:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
  76:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x9A,0x45,0x41,0x8E,0x41,0x8F,0x80,0x45,0x45,0x45,0x49,0x49,0x49,0x8E,0x8F, \
  77:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x92,0x92,0x4F,0x99,0x4F,0x55,0x55,0x59,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
  78:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x41,0x49,0x4F,0x55,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
  79:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
  80:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
  81:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
  82:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF, \
  83:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
  84:Middlewares/Third_Party/FatFs/src/ff.c **** 
  85:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 720	/* Arabic */
  86:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
  87:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F, \
  88:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
  89:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 3


  90:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
  91:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
  92:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
  93:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF, \
  94:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
  95:Middlewares/Third_Party/FatFs/src/ff.c **** 
  96:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 737	/* Greek */
  97:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
  98:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F, \
  99:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x92,0x92,0x93,0x94,0x95,0x96,0x97,0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87, \
 100:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x91,0xAA,0x92,0x93,0x94,0x95,0x96, \
 101:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 102:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 103:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 104:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x97,0xEA,0xEB,0xEC,0xE4,0xED,0xEE,0xEF,0xF5,0xF0,0xEA,0xEB,0xEC,0xED,0xEE,0xEF, \
 105:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 106:Middlewares/Third_Party/FatFs/src/ff.c **** 
 107:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 771	/* KBL */
 108:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 109:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F, \
 110:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
 111:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F, \
 112:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 113:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 114:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDC,0xDE,0xDE, \
 115:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
 116:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF0,0xF2,0xF2,0xF4,0xF4,0xF6,0xF6,0xF8,0xF8,0xFA,0xFA,0xFC,0xFC,0xFE,0xFF}
 117:Middlewares/Third_Party/FatFs/src/ff.c **** 
 118:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 775	/* Baltic */
 119:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 120:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x9A,0x91,0xA0,0x8E,0x95,0x8F,0x80,0xAD,0xED,0x8A,0x8A,0xA1,0x8D,0x8E,0x8F, \
 121:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x92,0x92,0xE2,0x99,0x95,0x96,0x97,0x97,0x99,0x9A,0x9D,0x9C,0x9D,0x9E,0x9F, \
 122:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xA0,0xA1,0xE0,0xA3,0xA3,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 123:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 124:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 125:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB5,0xB6,0xB7,0xB8,0xBD,0xBE,0xC6,0xC7,0xA5,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 126:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE5,0xE5,0xE6,0xE3,0xE8,0xE8,0xEA,0xEA,0xEE,0xED,0xEE,0xEF, \
 127:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 128:Middlewares/Third_Party/FatFs/src/ff.c **** 
 129:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 850	/* Latin 1 */
 130:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 131:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x43,0x55,0x45,0x41,0x41,0x41,0x41,0x43,0x45,0x45,0x45,0x49,0x49,0x49,0x41,0x41, \
 132:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x45,0x92,0x92,0x4F,0x4F,0x4F,0x55,0x55,0x59,0x4F,0x55,0x4F,0x9C,0x4F,0x9E,0x9F, \
 133:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x41,0x49,0x4F,0x55,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 134:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0x41,0x41,0x41,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 135:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0x41,0x41,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 136:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD1,0xD1,0x45,0x45,0x45,0x49,0x49,0x49,0x49,0xD9,0xDA,0xDB,0xDC,0xDD,0x49,0xDF, \
 137:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x4F,0xE1,0x4F,0x4F,0x4F,0x4F,0xE6,0xE8,0xE8,0x55,0x55,0x55,0x59,0x59,0xEE,0xEF, \
 138:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 139:Middlewares/Third_Party/FatFs/src/ff.c **** 
 140:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 852	/* Latin 2 */
 141:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 142:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x9A,0x90,0xB6,0x8E,0xDE,0x8F,0x80,0x9D,0xD3,0x8A,0x8A,0xD7,0x8D,0x8E,0x8F, \
 143:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x91,0x91,0xE2,0x99,0x95,0x95,0x97,0x97,0x99,0x9A,0x9B,0x9B,0x9D,0x9E,0xAC, \
 144:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB5,0xD6,0xE0,0xE9,0xA4,0xA4,0xA6,0xA6,0xA8,0xA8,0xAA,0x8D,0xAC,0xB8,0xAE,0xAF, \
 145:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBD,0xBF, \
 146:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC6,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 4


 147:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD1,0xD1,0xD2,0xD3,0xD2,0xD5,0xD6,0xD7,0xB7,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 148:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE3,0xD5,0xE6,0xE6,0xE8,0xE9,0xE8,0xEB,0xED,0xED,0xDD,0xEF, \
 149:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xEB,0xFC,0xFC,0xFE,0xFF}
 150:Middlewares/Third_Party/FatFs/src/ff.c **** 
 151:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 855	/* Cyrillic */
 152:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 153:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x81,0x81,0x83,0x83,0x85,0x85,0x87,0x87,0x89,0x89,0x8B,0x8B,0x8D,0x8D,0x8F,0x8F, \
 154:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x91,0x91,0x93,0x93,0x95,0x95,0x97,0x97,0x99,0x99,0x9B,0x9B,0x9D,0x9D,0x9F,0x9F, \
 155:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xA1,0xA1,0xA3,0xA3,0xA5,0xA5,0xA7,0xA7,0xA9,0xA9,0xAB,0xAB,0xAD,0xAD,0xAE,0xAF, \
 156:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB6,0xB6,0xB8,0xB8,0xB9,0xBA,0xBB,0xBC,0xBE,0xBE,0xBF, \
 157:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC7,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 158:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD1,0xD1,0xD3,0xD3,0xD5,0xD5,0xD7,0xD7,0xDD,0xD9,0xDA,0xDB,0xDC,0xDD,0xE0,0xDF, \
 159:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE2,0xE2,0xE4,0xE4,0xE6,0xE6,0xE8,0xE8,0xEA,0xEA,0xEC,0xEC,0xEE,0xEE,0xEF, \
 160:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF2,0xF2,0xF4,0xF4,0xF6,0xF6,0xF8,0xF8,0xFA,0xFA,0xFC,0xFC,0xFD,0xFE,0xFF}
 161:Middlewares/Third_Party/FatFs/src/ff.c **** 
 162:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 857	/* Turkish */
 163:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 164:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x9A,0x90,0xB6,0x8E,0xB7,0x8F,0x80,0xD2,0xD3,0xD4,0xD8,0xD7,0x49,0x8E,0x8F, \
 165:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x92,0x92,0xE2,0x99,0xE3,0xEA,0xEB,0x98,0x99,0x9A,0x9D,0x9C,0x9D,0x9E,0x9E, \
 166:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB5,0xD6,0xE0,0xE9,0xA5,0xA5,0xA6,0xA6,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 167:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 168:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC7,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 169:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD0,0xD1,0xD2,0xD3,0xD4,0x49,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 170:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE5,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xDE,0xED,0xEE,0xEF, \
 171:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 172:Middlewares/Third_Party/FatFs/src/ff.c **** 
 173:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 860	/* Portuguese */
 174:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 175:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x9A,0x90,0x8F,0x8E,0x91,0x86,0x80,0x89,0x89,0x92,0x8B,0x8C,0x98,0x8E,0x8F, \
 176:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x91,0x92,0x8C,0x99,0xA9,0x96,0x9D,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
 177:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x86,0x8B,0x9F,0x96,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 178:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 179:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 180:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 181:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF, \
 182:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 183:Middlewares/Third_Party/FatFs/src/ff.c **** 
 184:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 861	/* Icelandic */
 185:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 186:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x9A,0x90,0x41,0x8E,0x41,0x8F,0x80,0x45,0x45,0x45,0x8B,0x8B,0x8D,0x8E,0x8F, \
 187:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x92,0x92,0x4F,0x99,0x8D,0x55,0x97,0x97,0x99,0x9A,0x9D,0x9C,0x9D,0x9E,0x9F, \
 188:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xA4,0xA5,0xA6,0xA7,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 189:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 190:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 191:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 192:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF, \
 193:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 194:Middlewares/Third_Party/FatFs/src/ff.c **** 
 195:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 862	/* Hebrew */
 196:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 197:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F, \
 198:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
 199:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x41,0x49,0x4F,0x55,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 200:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 201:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 202:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 203:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF, \
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 5


 204:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 205:Middlewares/Third_Party/FatFs/src/ff.c **** 
 206:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 863	/* Canadian-French */
 207:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 208:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x43,0x55,0x45,0x41,0x41,0x41,0x86,0x43,0x45,0x45,0x45,0x49,0x49,0x8D,0x41,0x8F, \
 209:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x45,0x45,0x45,0x4F,0x45,0x49,0x55,0x55,0x98,0x4F,0x55,0x9B,0x9C,0x55,0x55,0x9F, \
 210:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xA0,0xA1,0x4F,0x55,0xA4,0xA5,0xA6,0xA7,0x49,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 211:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 212:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 213:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 214:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF, \
 215:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 216:Middlewares/Third_Party/FatFs/src/ff.c **** 
 217:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 864	/* Arabic */
 218:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 219:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x9A,0x45,0x41,0x8E,0x41,0x8F,0x80,0x45,0x45,0x45,0x49,0x49,0x49,0x8E,0x8F, \
 220:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x92,0x92,0x4F,0x99,0x4F,0x55,0x55,0x59,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
 221:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x41,0x49,0x4F,0x55,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 222:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 223:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 224:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 225:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF, \
 226:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 227:Middlewares/Third_Party/FatFs/src/ff.c **** 
 228:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 865	/* Nordic */
 229:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 230:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x9A,0x90,0x41,0x8E,0x41,0x8F,0x80,0x45,0x45,0x45,0x49,0x49,0x49,0x8E,0x8F, \
 231:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x92,0x92,0x4F,0x99,0x4F,0x55,0x55,0x59,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
 232:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x41,0x49,0x4F,0x55,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 233:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 234:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 235:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 236:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF, \
 237:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 238:Middlewares/Third_Party/FatFs/src/ff.c **** 
 239:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 866	/* Russian */
 240:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 241:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F, \
 242:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
 243:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F, \
 244:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 245:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 246:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 247:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
 248:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF0,0xF2,0xF2,0xF4,0xF4,0xF6,0xF6,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 249:Middlewares/Third_Party/FatFs/src/ff.c **** 
 250:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 869	/* Greek 2 */
 251:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 252:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F, \
 253:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x86,0x9C,0x8D,0x8F,0x90, \
 254:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x91,0x90,0x92,0x95,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 255:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 256:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 257:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xA4,0xA5,0xA6,0xD9,0xDA,0xDB,0xDC,0xA7,0xA8,0xDF, \
 258:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xA9,0xAA,0xAC,0xAD,0xB5,0xB6,0xB7,0xB8,0xBD,0xBE,0xC6,0xC7,0xCF,0xCF,0xD0,0xEF, \
 259:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF1,0xD1,0xD2,0xD3,0xF5,0xD4,0xF7,0xF8,0xF9,0xD5,0x96,0x95,0x98,0xFE,0xFF}
 260:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 6


 261:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 1	/* ASCII (for only non-LFN cfg) */
 262:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0
 263:Middlewares/Third_Party/FatFs/src/ff.c **** #error Cannot enable LFN without valid code page.
 264:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 265:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 266:Middlewares/Third_Party/FatFs/src/ff.c **** 
 267:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 268:Middlewares/Third_Party/FatFs/src/ff.c **** #error Unknown code page
 269:Middlewares/Third_Party/FatFs/src/ff.c **** 
 270:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 271:Middlewares/Third_Party/FatFs/src/ff.c **** 
 272:Middlewares/Third_Party/FatFs/src/ff.c **** 
 273:Middlewares/Third_Party/FatFs/src/ff.c **** /* Character code support macros */
 274:Middlewares/Third_Party/FatFs/src/ff.c **** #define IsUpper(c)	(((c)>='A')&&((c)<='Z'))
 275:Middlewares/Third_Party/FatFs/src/ff.c **** #define IsLower(c)	(((c)>='a')&&((c)<='z'))
 276:Middlewares/Third_Party/FatFs/src/ff.c **** #define IsDigit(c)	(((c)>='0')&&((c)<='9'))
 277:Middlewares/Third_Party/FatFs/src/ff.c **** 
 278:Middlewares/Third_Party/FatFs/src/ff.c **** #if _DF1S != 0	/* Code page is DBCS */
 279:Middlewares/Third_Party/FatFs/src/ff.c **** 
 280:Middlewares/Third_Party/FatFs/src/ff.c **** #ifdef _DF2S	/* Two 1st byte areas */
 281:Middlewares/Third_Party/FatFs/src/ff.c **** #define IsDBCS1(c)	(((BYTE)(c) >= _DF1S && (BYTE)(c) <= _DF1E) || ((BYTE)(c) >= _DF2S && (BYTE)(c) 
 282:Middlewares/Third_Party/FatFs/src/ff.c **** #else			/* One 1st byte area */
 283:Middlewares/Third_Party/FatFs/src/ff.c **** #define IsDBCS1(c)	((BYTE)(c) >= _DF1S && (BYTE)(c) <= _DF1E)
 284:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 285:Middlewares/Third_Party/FatFs/src/ff.c **** 
 286:Middlewares/Third_Party/FatFs/src/ff.c **** #ifdef _DS3S	/* Three 2nd byte areas */
 287:Middlewares/Third_Party/FatFs/src/ff.c **** #define IsDBCS2(c)	(((BYTE)(c) >= _DS1S && (BYTE)(c) <= _DS1E) || ((BYTE)(c) >= _DS2S && (BYTE)(c) 
 288:Middlewares/Third_Party/FatFs/src/ff.c **** #else			/* Two 2nd byte areas */
 289:Middlewares/Third_Party/FatFs/src/ff.c **** #define IsDBCS2(c)	(((BYTE)(c) >= _DS1S && (BYTE)(c) <= _DS1E) || ((BYTE)(c) >= _DS2S && (BYTE)(c) 
 290:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 291:Middlewares/Third_Party/FatFs/src/ff.c **** 
 292:Middlewares/Third_Party/FatFs/src/ff.c **** #else			/* Code page is SBCS */
 293:Middlewares/Third_Party/FatFs/src/ff.c **** 
 294:Middlewares/Third_Party/FatFs/src/ff.c **** #define IsDBCS1(c)	0
 295:Middlewares/Third_Party/FatFs/src/ff.c **** #define IsDBCS2(c)	0
 296:Middlewares/Third_Party/FatFs/src/ff.c **** 
 297:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _DF1S */
 298:Middlewares/Third_Party/FatFs/src/ff.c **** 
 299:Middlewares/Third_Party/FatFs/src/ff.c **** 
 300:Middlewares/Third_Party/FatFs/src/ff.c **** /* Additional file attribute bits for internal use */
 301:Middlewares/Third_Party/FatFs/src/ff.c **** #define	AM_VOL		0x08	/* Volume label */
 302:Middlewares/Third_Party/FatFs/src/ff.c **** #define AM_LFN		0x0F	/* LFN entry */
 303:Middlewares/Third_Party/FatFs/src/ff.c **** #define AM_MASK		0x3F	/* Mask of defined bits */
 304:Middlewares/Third_Party/FatFs/src/ff.c **** 
 305:Middlewares/Third_Party/FatFs/src/ff.c **** 
 306:Middlewares/Third_Party/FatFs/src/ff.c **** /* Additional file access control and file status flags for internal use */
 307:Middlewares/Third_Party/FatFs/src/ff.c **** #define FA_SEEKEND	0x20	/* Seek to end of the file on file open */
 308:Middlewares/Third_Party/FatFs/src/ff.c **** #define FA_MODIFIED	0x40	/* File has been modified */
 309:Middlewares/Third_Party/FatFs/src/ff.c **** #define FA_DIRTY	0x80	/* FIL.buf[] needs to be written-back */
 310:Middlewares/Third_Party/FatFs/src/ff.c **** 
 311:Middlewares/Third_Party/FatFs/src/ff.c **** 
 312:Middlewares/Third_Party/FatFs/src/ff.c **** /* Name status flags in fn[] */
 313:Middlewares/Third_Party/FatFs/src/ff.c **** #define NSFLAG		11		/* Index of the name status byte */
 314:Middlewares/Third_Party/FatFs/src/ff.c **** #define NS_LOSS		0x01	/* Out of 8.3 format */
 315:Middlewares/Third_Party/FatFs/src/ff.c **** #define NS_LFN		0x02	/* Force to create LFN entry */
 316:Middlewares/Third_Party/FatFs/src/ff.c **** #define NS_LAST		0x04	/* Last segment */
 317:Middlewares/Third_Party/FatFs/src/ff.c **** #define NS_BODY		0x08	/* Lower case flag (body) */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 7


 318:Middlewares/Third_Party/FatFs/src/ff.c **** #define NS_EXT		0x10	/* Lower case flag (ext) */
 319:Middlewares/Third_Party/FatFs/src/ff.c **** #define NS_DOT		0x20	/* Dot entry */
 320:Middlewares/Third_Party/FatFs/src/ff.c **** #define NS_NOLFN	0x40	/* Do not find LFN */
 321:Middlewares/Third_Party/FatFs/src/ff.c **** #define NS_NONAME	0x80	/* Not followed */
 322:Middlewares/Third_Party/FatFs/src/ff.c **** 
 323:Middlewares/Third_Party/FatFs/src/ff.c **** 
 324:Middlewares/Third_Party/FatFs/src/ff.c **** /* Limits and boundaries */
 325:Middlewares/Third_Party/FatFs/src/ff.c **** #define MAX_DIR		0x200000		/* Max size of FAT directory */
 326:Middlewares/Third_Party/FatFs/src/ff.c **** #define MAX_DIR_EX	0x10000000		/* Max size of exFAT directory */
 327:Middlewares/Third_Party/FatFs/src/ff.c **** #define MAX_FAT12	0xFF5			/* Max FAT12 clusters (differs from specs, but correct for real DOS/Windo
 328:Middlewares/Third_Party/FatFs/src/ff.c **** #define	MAX_FAT16	0xFFF5			/* Max FAT16 clusters (differs from specs, but correct for real DOS/Wind
 329:Middlewares/Third_Party/FatFs/src/ff.c **** #define	MAX_FAT32	0x0FFFFFF5		/* Max FAT32 clusters (not specified, practical limit) */
 330:Middlewares/Third_Party/FatFs/src/ff.c **** #define	MAX_EXFAT	0x7FFFFFFD		/* Max exFAT clusters (differs from specs, implementation limit) */
 331:Middlewares/Third_Party/FatFs/src/ff.c **** 
 332:Middlewares/Third_Party/FatFs/src/ff.c **** 
 333:Middlewares/Third_Party/FatFs/src/ff.c **** /* FatFs refers the FAT structure as simple byte array instead of structure member
 334:Middlewares/Third_Party/FatFs/src/ff.c **** / because the C structure is not binary compatible between different platforms */
 335:Middlewares/Third_Party/FatFs/src/ff.c **** 
 336:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_JmpBoot			0		/* x86 jump instruction (3-byte) */
 337:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_OEMName			3		/* OEM name (8-byte) */
 338:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_BytsPerSec		11		/* Sector size [byte] (WORD) */
 339:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_SecPerClus		13		/* Cluster size [sector] (BYTE) */
 340:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_RsvdSecCnt		14		/* Size of reserved area [sector] (WORD) */
 341:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_NumFATs			16		/* Number of FATs (BYTE) */
 342:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_RootEntCnt		17		/* Size of root directory area for FAT12/16 [entry] (WORD) */
 343:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_TotSec16		19		/* Volume size (16-bit) [sector] (WORD) */
 344:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_Media			21		/* Media descriptor byte (BYTE) */
 345:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_FATSz16			22		/* FAT size (16-bit) [sector] (WORD) */
 346:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_SecPerTrk		24		/* Track size for int13h [sector] (WORD) */
 347:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_NumHeads		26		/* Number of heads for int13h (WORD) */
 348:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_HiddSec			28		/* Volume offset from top of the drive (DWORD) */
 349:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_TotSec32		32		/* Volume size (32-bit) [sector] (DWORD) */
 350:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_DrvNum			36		/* Physical drive number for int13h (BYTE) */
 351:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_NTres			37		/* Error flag (BYTE) */
 352:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_BootSig			38		/* Extended boot signature (BYTE) */
 353:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_VolID			39		/* Volume serial number (DWORD) */
 354:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_VolLab			43		/* Volume label string (8-byte) */
 355:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_FilSysType		54		/* File system type string (8-byte) */
 356:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_BootCode			62		/* Boot code (448-byte) */
 357:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_55AA				510		/* Signature word (WORD) */
 358:Middlewares/Third_Party/FatFs/src/ff.c **** 
 359:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_FATSz32			36		/* FAT32: FAT size [sector] (DWORD) */
 360:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_ExtFlags32		40		/* FAT32: Extended flags (WORD) */
 361:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_FSVer32			42		/* FAT32: File system version (WORD) */
 362:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_RootClus32		44		/* FAT32: Root directory cluster (DWORD) */
 363:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_FSInfo32		48		/* FAT32: Offset of FSINFO sector (WORD) */
 364:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_BkBootSec32		50		/* FAT32: Offset of backup boot sector (WORD) */
 365:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_DrvNum32			64		/* FAT32: Physical drive number for int13h (BYTE) */
 366:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_NTres32			65		/* FAT32: Error flag (BYTE) */
 367:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_BootSig32		66		/* FAT32: Extended boot signature (BYTE) */
 368:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_VolID32			67		/* FAT32: Volume serial number (DWORD) */
 369:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_VolLab32			71		/* FAT32: Volume label string (8-byte) */
 370:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_FilSysType32		82		/* FAT32: File system type string (8-byte) */
 371:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_BootCode32		90		/* FAT32: Boot code (420-byte) */
 372:Middlewares/Third_Party/FatFs/src/ff.c **** 
 373:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_ZeroedEx		11		/* exFAT: MBZ field (53-byte) */
 374:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_VolOfsEx		64		/* exFAT: Volume offset from top of the drive [sector] (QWORD) */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 8


 375:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_TotSecEx		72		/* exFAT: Volume size [sector] (QWORD) */
 376:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_FatOfsEx		80		/* exFAT: FAT offset from top of the volume [sector] (DWORD) */
 377:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_FatSzEx			84		/* exFAT: FAT size [sector] (DWORD) */
 378:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_DataOfsEx		88		/* exFAT: Data offset from top of the volume [sector] (DWORD) */
 379:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_NumClusEx		92		/* exFAT: Number of clusters (DWORD) */
 380:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_RootClusEx		96		/* exFAT: Root directory start cluster (DWORD) */
 381:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_VolIDEx			100		/* exFAT: Volume serial number (DWORD) */
 382:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_FSVerEx			104		/* exFAT: File system version (WORD) */
 383:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_VolFlagEx		106		/* exFAT: Volume flags (BYTE) */
 384:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_ActFatEx		107		/* exFAT: Active FAT flags (BYTE) */
 385:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_BytsPerSecEx	108		/* exFAT: Log2 of sector size in unit of byte (BYTE) */
 386:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_SecPerClusEx	109		/* exFAT: Log2 of cluster size in unit of sector (BYTE) */
 387:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_NumFATsEx		110		/* exFAT: Number of FATs (BYTE) */
 388:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_DrvNumEx		111		/* exFAT: Physical drive number for int13h (BYTE) */
 389:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_PercInUseEx		112		/* exFAT: Percent in use (BYTE) */
 390:Middlewares/Third_Party/FatFs/src/ff.c **** #define	BPB_RsvdEx			113		/* exFAT: Reserved (7-byte) */
 391:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_BootCodeEx		120		/* exFAT: Boot code (390-byte) */
 392:Middlewares/Third_Party/FatFs/src/ff.c **** 
 393:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DIR_Name			0		/* Short file name (11-byte) */
 394:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DIR_Attr			11		/* Attribute (BYTE) */
 395:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DIR_NTres			12		/* Lower case flag (BYTE) */
 396:Middlewares/Third_Party/FatFs/src/ff.c **** #define DIR_CrtTime10		13		/* Created time sub-second (BYTE) */
 397:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DIR_CrtTime			14		/* Created time (DWORD) */
 398:Middlewares/Third_Party/FatFs/src/ff.c **** #define DIR_LstAccDate		18		/* Last accessed date (WORD) */
 399:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DIR_FstClusHI		20		/* Higher 16-bit of first cluster (WORD) */
 400:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DIR_ModTime			22		/* Modified time (DWORD) */
 401:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DIR_FstClusLO		26		/* Lower 16-bit of first cluster (WORD) */
 402:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DIR_FileSize		28		/* File size (DWORD) */
 403:Middlewares/Third_Party/FatFs/src/ff.c **** #define	LDIR_Ord			0		/* LFN: LFN order and LLE flag (BYTE) */
 404:Middlewares/Third_Party/FatFs/src/ff.c **** #define	LDIR_Attr			11		/* LFN: LFN attribute (BYTE) */
 405:Middlewares/Third_Party/FatFs/src/ff.c **** #define	LDIR_Type			12		/* LFN: Entry type (BYTE) */
 406:Middlewares/Third_Party/FatFs/src/ff.c **** #define	LDIR_Chksum			13		/* LFN: Checksum of the SFN (BYTE) */
 407:Middlewares/Third_Party/FatFs/src/ff.c **** #define	LDIR_FstClusLO		26		/* LFN: MBZ field (WORD) */
 408:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_Type			0		/* exFAT: Type of exFAT directory entry (BYTE) */
 409:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_NumLabel		1		/* exFAT: Number of volume label characters (BYTE) */
 410:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_Label			2		/* exFAT: Volume label (11-WORD) */
 411:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_CaseSum		4		/* exFAT: Sum of case conversion table (DWORD) */
 412:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_NumSec			1		/* exFAT: Number of secondary entries (BYTE) */
 413:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_SetSum			2		/* exFAT: Sum of the set of directory entries (WORD) */
 414:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_Attr			4		/* exFAT: File attribute (WORD) */
 415:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_CrtTime		8		/* exFAT: Created time (DWORD) */
 416:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_ModTime		12		/* exFAT: Modified time (DWORD) */
 417:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_AccTime		16		/* exFAT: Last accessed time (DWORD) */
 418:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_CrtTime10		20		/* exFAT: Created time subsecond (BYTE) */
 419:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_ModTime10		21		/* exFAT: Modified time subsecond (BYTE) */
 420:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_CrtTZ			22		/* exFAT: Created timezone (BYTE) */
 421:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_ModTZ			23		/* exFAT: Modified timezone (BYTE) */
 422:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_AccTZ			24		/* exFAT: Last accessed timezone (BYTE) */
 423:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_GenFlags		33		/* exFAT: General secondary flags (WORD) */
 424:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_NumName		35		/* exFAT: Number of file name characters (BYTE) */
 425:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_NameHash		36		/* exFAT: Hash of file name (WORD) */
 426:Middlewares/Third_Party/FatFs/src/ff.c **** #define XDIR_ValidFileSize	40		/* exFAT: Valid file size (QWORD) */
 427:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_FstClus		52		/* exFAT: First cluster of the file data (DWORD) */
 428:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_FileSize		56		/* exFAT: File/Directory size (QWORD) */
 429:Middlewares/Third_Party/FatFs/src/ff.c **** 
 430:Middlewares/Third_Party/FatFs/src/ff.c **** #define	SZDIRE				32		/* Size of a directory entry */
 431:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DDEM				0xE5	/* Deleted directory entry mark set to DIR_Name[0] */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 9


 432:Middlewares/Third_Party/FatFs/src/ff.c **** #define	RDDEM				0x05	/* Replacement of the character collides with DDEM */
 433:Middlewares/Third_Party/FatFs/src/ff.c **** #define	LLEF				0x40	/* Last long entry flag in LDIR_Ord */
 434:Middlewares/Third_Party/FatFs/src/ff.c **** 
 435:Middlewares/Third_Party/FatFs/src/ff.c **** #define	FSI_LeadSig			0		/* FAT32 FSI: Leading signature (DWORD) */
 436:Middlewares/Third_Party/FatFs/src/ff.c **** #define	FSI_StrucSig		484		/* FAT32 FSI: Structure signature (DWORD) */
 437:Middlewares/Third_Party/FatFs/src/ff.c **** #define	FSI_Free_Count		488		/* FAT32 FSI: Number of free clusters (DWORD) */
 438:Middlewares/Third_Party/FatFs/src/ff.c **** #define	FSI_Nxt_Free		492		/* FAT32 FSI: Last allocated cluster (DWORD) */
 439:Middlewares/Third_Party/FatFs/src/ff.c **** 
 440:Middlewares/Third_Party/FatFs/src/ff.c **** #define MBR_Table			446		/* MBR: Offset of partition table in the MBR */
 441:Middlewares/Third_Party/FatFs/src/ff.c **** #define	SZ_PTE				16		/* MBR: Size of a partition table entry */
 442:Middlewares/Third_Party/FatFs/src/ff.c **** #define PTE_Boot			0		/* MBR PTE: Boot indicator */
 443:Middlewares/Third_Party/FatFs/src/ff.c **** #define PTE_StHead			1		/* MBR PTE: Start head */
 444:Middlewares/Third_Party/FatFs/src/ff.c **** #define PTE_StSec			2		/* MBR PTE: Start sector */
 445:Middlewares/Third_Party/FatFs/src/ff.c **** #define PTE_StCyl			3		/* MBR PTE: Start cylinder */
 446:Middlewares/Third_Party/FatFs/src/ff.c **** #define PTE_System			4		/* MBR PTE: System ID */
 447:Middlewares/Third_Party/FatFs/src/ff.c **** #define PTE_EdHead			5		/* MBR PTE: End head */
 448:Middlewares/Third_Party/FatFs/src/ff.c **** #define PTE_EdSec			6		/* MBR PTE: End sector */
 449:Middlewares/Third_Party/FatFs/src/ff.c **** #define PTE_EdCyl			7		/* MBR PTE: End cylinder */
 450:Middlewares/Third_Party/FatFs/src/ff.c **** #define PTE_StLba			8		/* MBR PTE: Start in LBA */
 451:Middlewares/Third_Party/FatFs/src/ff.c **** #define PTE_SizLba			12		/* MBR PTE: Size in LBA */
 452:Middlewares/Third_Party/FatFs/src/ff.c **** 
 453:Middlewares/Third_Party/FatFs/src/ff.c **** 
 454:Middlewares/Third_Party/FatFs/src/ff.c **** /* Post process after fatal error on file operation */
 455:Middlewares/Third_Party/FatFs/src/ff.c **** #define	ABORT(fs, res)		{ fp->err = (BYTE)(res); LEAVE_FF(fs, res); }
 456:Middlewares/Third_Party/FatFs/src/ff.c **** 
 457:Middlewares/Third_Party/FatFs/src/ff.c **** 
 458:Middlewares/Third_Party/FatFs/src/ff.c **** /* Reentrancy related */
 459:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
 460:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN == 1
 461:Middlewares/Third_Party/FatFs/src/ff.c **** #error Static LFN work area cannot be used at thread-safe configuration
 462:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 463:Middlewares/Third_Party/FatFs/src/ff.c **** #define	ENTER_FF(fs)		{ if (!lock_fs(fs)) return FR_TIMEOUT; }
 464:Middlewares/Third_Party/FatFs/src/ff.c **** #define	LEAVE_FF(fs, res)	{ unlock_fs(fs, res); return res; }
 465:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 466:Middlewares/Third_Party/FatFs/src/ff.c **** #define	ENTER_FF(fs)
 467:Middlewares/Third_Party/FatFs/src/ff.c **** #define LEAVE_FF(fs, res)	return res
 468:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 469:Middlewares/Third_Party/FatFs/src/ff.c **** 
 470:Middlewares/Third_Party/FatFs/src/ff.c **** 
 471:Middlewares/Third_Party/FatFs/src/ff.c **** /* Definitions of volume - partition conversion */
 472:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MULTI_PARTITION
 473:Middlewares/Third_Party/FatFs/src/ff.c **** #define LD2PD(vol) VolToPart[vol].pd	/* Get physical drive number */
 474:Middlewares/Third_Party/FatFs/src/ff.c **** #define LD2PT(vol) VolToPart[vol].pt	/* Get partition index */
 475:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 476:Middlewares/Third_Party/FatFs/src/ff.c **** #define LD2PD(vol) (BYTE)(vol)	/* Each logical drive is bound to the same physical drive number */
 477:Middlewares/Third_Party/FatFs/src/ff.c **** #define LD2PT(vol) 0			/* Find first valid partition or in SFD */
 478:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 479:Middlewares/Third_Party/FatFs/src/ff.c **** 
 480:Middlewares/Third_Party/FatFs/src/ff.c **** 
 481:Middlewares/Third_Party/FatFs/src/ff.c **** /* Definitions of sector size */
 482:Middlewares/Third_Party/FatFs/src/ff.c **** #if (_MAX_SS < _MIN_SS) || (_MAX_SS != 512 && _MAX_SS != 1024 && _MAX_SS != 2048 && _MAX_SS != 4096
 483:Middlewares/Third_Party/FatFs/src/ff.c **** #error Wrong sector size configuration
 484:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 485:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_SS == _MIN_SS
 486:Middlewares/Third_Party/FatFs/src/ff.c **** #define	SS(fs)	((UINT)_MAX_SS)	/* Fixed sector size */
 487:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 488:Middlewares/Third_Party/FatFs/src/ff.c **** #define	SS(fs)	((fs)->ssize)	/* Variable sector size */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 10


 489:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 490:Middlewares/Third_Party/FatFs/src/ff.c **** 
 491:Middlewares/Third_Party/FatFs/src/ff.c **** 
 492:Middlewares/Third_Party/FatFs/src/ff.c **** /* Timestamp */
 493:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_NORTC == 1
 494:Middlewares/Third_Party/FatFs/src/ff.c **** #if _NORTC_YEAR < 1980 || _NORTC_YEAR > 2107 || _NORTC_MON < 1 || _NORTC_MON > 12 || _NORTC_MDAY < 
 495:Middlewares/Third_Party/FatFs/src/ff.c **** #error Invalid _FS_NORTC settings
 496:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 497:Middlewares/Third_Party/FatFs/src/ff.c **** #define GET_FATTIME()	((DWORD)(_NORTC_YEAR - 1980) << 25 | (DWORD)_NORTC_MON << 21 | (DWORD)_NORTC_
 498:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 499:Middlewares/Third_Party/FatFs/src/ff.c **** #define GET_FATTIME()	get_fattime()
 500:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 501:Middlewares/Third_Party/FatFs/src/ff.c **** 
 502:Middlewares/Third_Party/FatFs/src/ff.c **** 
 503:Middlewares/Third_Party/FatFs/src/ff.c **** /* File lock controls */
 504:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 505:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_READONLY
 506:Middlewares/Third_Party/FatFs/src/ff.c **** #error _FS_LOCK must be 0 at read-only configuration
 507:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 508:Middlewares/Third_Party/FatFs/src/ff.c **** typedef struct {
 509:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;		/* Object ID 1, volume (NULL:blank entry) */
 510:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clu;		/* Object ID 2, containing directory (0:root) */
 511:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD ofs;		/* Object ID 3, offset in the directory */
 512:Middlewares/Third_Party/FatFs/src/ff.c **** 	WORD ctr;		/* Object open counter, 0:none, 0x01..0xFF:read mode open count, 0x100:write mode */
 513:Middlewares/Third_Party/FatFs/src/ff.c **** } FILESEM;
 514:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 515:Middlewares/Third_Party/FatFs/src/ff.c **** 
 516:Middlewares/Third_Party/FatFs/src/ff.c **** 
 517:Middlewares/Third_Party/FatFs/src/ff.c **** 
 518:Middlewares/Third_Party/FatFs/src/ff.c **** 
 519:Middlewares/Third_Party/FatFs/src/ff.c **** 
 520:Middlewares/Third_Party/FatFs/src/ff.c **** /*--------------------------------------------------------------------------
 521:Middlewares/Third_Party/FatFs/src/ff.c **** 
 522:Middlewares/Third_Party/FatFs/src/ff.c ****    Module Private Work Area
 523:Middlewares/Third_Party/FatFs/src/ff.c **** 
 524:Middlewares/Third_Party/FatFs/src/ff.c **** ---------------------------------------------------------------------------*/
 525:Middlewares/Third_Party/FatFs/src/ff.c **** 
 526:Middlewares/Third_Party/FatFs/src/ff.c **** /* Remark: Variables defined here without initial value shall be guaranteed
 527:Middlewares/Third_Party/FatFs/src/ff.c **** /  zero/null at start-up. If not, the linker option or start-up routine is
 528:Middlewares/Third_Party/FatFs/src/ff.c **** /  not compliance with C standard. */
 529:Middlewares/Third_Party/FatFs/src/ff.c **** 
 530:Middlewares/Third_Party/FatFs/src/ff.c **** #if _VOLUMES < 1 || _VOLUMES > 10
 531:Middlewares/Third_Party/FatFs/src/ff.c **** #error Wrong _VOLUMES setting
 532:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 533:Middlewares/Third_Party/FatFs/src/ff.c **** static FATFS *FatFs[_VOLUMES];	/* Pointer to the file system objects (logical drives) */
 534:Middlewares/Third_Party/FatFs/src/ff.c **** static WORD Fsid;				/* File system mount ID */
 535:Middlewares/Third_Party/FatFs/src/ff.c **** 
 536:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH != 0 && _VOLUMES >= 2
 537:Middlewares/Third_Party/FatFs/src/ff.c **** static BYTE CurrVol;			/* Current drive */
 538:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 539:Middlewares/Third_Party/FatFs/src/ff.c **** 
 540:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 541:Middlewares/Third_Party/FatFs/src/ff.c **** static FILESEM Files[_FS_LOCK];	/* Open object lock semaphores */
 542:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 543:Middlewares/Third_Party/FatFs/src/ff.c **** 
 544:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN == 0		/* Non-LFN configuration */
 545:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DEF_NAMBUF
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 11


 546:Middlewares/Third_Party/FatFs/src/ff.c **** #define INIT_NAMBUF(fs)
 547:Middlewares/Third_Party/FatFs/src/ff.c **** #define	FREE_NAMBUF()
 548:Middlewares/Third_Party/FatFs/src/ff.c **** 
 549:Middlewares/Third_Party/FatFs/src/ff.c **** #else					/* LFN configuration */
 550:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_LFN < 12 || _MAX_LFN > 255
 551:Middlewares/Third_Party/FatFs/src/ff.c **** #error Wrong _MAX_LFN value
 552:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 553:Middlewares/Third_Party/FatFs/src/ff.c **** #define MAXDIRB(nc)	((nc + 44U) / 15 * SZDIRE)
 554:Middlewares/Third_Party/FatFs/src/ff.c **** 
 555:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN == 1		/* LFN enabled with static working buffer */
 556:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 557:Middlewares/Third_Party/FatFs/src/ff.c **** static BYTE	DirBuf[MAXDIRB(_MAX_LFN)];	/* Directory entry block scratchpad buffer */
 558:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 559:Middlewares/Third_Party/FatFs/src/ff.c **** static WCHAR LfnBuf[_MAX_LFN + 1];	/* LFN enabled with static working buffer */
 560:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DEF_NAMBUF
 561:Middlewares/Third_Party/FatFs/src/ff.c **** #define INIT_NAMBUF(fs)
 562:Middlewares/Third_Party/FatFs/src/ff.c **** #define	FREE_NAMBUF()
 563:Middlewares/Third_Party/FatFs/src/ff.c **** 
 564:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _USE_LFN == 2 	/* LFN enabled with dynamic working buffer on the stack */
 565:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 566:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DEF_NAMBUF		WCHAR lbuf[_MAX_LFN+1]; BYTE dbuf[MAXDIRB(_MAX_LFN)];
 567:Middlewares/Third_Party/FatFs/src/ff.c **** #define INIT_NAMBUF(fs)	{ (fs)->lfnbuf = lbuf; (fs)->dirbuf = dbuf; }
 568:Middlewares/Third_Party/FatFs/src/ff.c **** #define	FREE_NAMBUF()
 569:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 570:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DEF_NAMBUF		WCHAR lbuf[_MAX_LFN+1];
 571:Middlewares/Third_Party/FatFs/src/ff.c **** #define INIT_NAMBUF(fs)	{ (fs)->lfnbuf = lbuf; }
 572:Middlewares/Third_Party/FatFs/src/ff.c **** #define	FREE_NAMBUF()
 573:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 574:Middlewares/Third_Party/FatFs/src/ff.c **** 
 575:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _USE_LFN == 3 	/* LFN enabled with dynamic working buffer on the heap */
 576:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 577:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DEF_NAMBUF		WCHAR *lfn;
 578:Middlewares/Third_Party/FatFs/src/ff.c **** #define INIT_NAMBUF(fs)	{ lfn = ff_memalloc((_MAX_LFN+1)*2 + MAXDIRB(_MAX_LFN)); if (!lfn) LEAVE_FF
 579:Middlewares/Third_Party/FatFs/src/ff.c **** #define	FREE_NAMBUF()	ff_memfree(lfn)
 580:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 581:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DEF_NAMBUF		WCHAR *lfn;
 582:Middlewares/Third_Party/FatFs/src/ff.c **** #define INIT_NAMBUF(fs)	{ lfn = ff_memalloc((_MAX_LFN+1)*2); if (!lfn) LEAVE_FF(fs, FR_NOT_ENOUGH_C
 583:Middlewares/Third_Party/FatFs/src/ff.c **** #define	FREE_NAMBUF()	ff_memfree(lfn)
 584:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 585:Middlewares/Third_Party/FatFs/src/ff.c **** 
 586:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 587:Middlewares/Third_Party/FatFs/src/ff.c **** #error Wrong _USE_LFN setting
 588:Middlewares/Third_Party/FatFs/src/ff.c **** 
 589:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 590:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* else _USE_LFN == 0 */
 591:Middlewares/Third_Party/FatFs/src/ff.c **** 
 592:Middlewares/Third_Party/FatFs/src/ff.c **** #ifdef _EXCVT
 593:Middlewares/Third_Party/FatFs/src/ff.c **** static const BYTE ExCvt[] = _EXCVT;	/* Upper conversion table for SBCS extended characters */
 594:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 595:Middlewares/Third_Party/FatFs/src/ff.c **** 
 596:Middlewares/Third_Party/FatFs/src/ff.c **** 
 597:Middlewares/Third_Party/FatFs/src/ff.c **** 
 598:Middlewares/Third_Party/FatFs/src/ff.c **** 
 599:Middlewares/Third_Party/FatFs/src/ff.c **** 
 600:Middlewares/Third_Party/FatFs/src/ff.c **** 
 601:Middlewares/Third_Party/FatFs/src/ff.c **** /*--------------------------------------------------------------------------
 602:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 12


 603:Middlewares/Third_Party/FatFs/src/ff.c ****    Module Private Functions
 604:Middlewares/Third_Party/FatFs/src/ff.c **** 
 605:Middlewares/Third_Party/FatFs/src/ff.c **** ---------------------------------------------------------------------------*/
 606:Middlewares/Third_Party/FatFs/src/ff.c **** 
 607:Middlewares/Third_Party/FatFs/src/ff.c **** 
 608:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 609:Middlewares/Third_Party/FatFs/src/ff.c **** /* Load/Store multi-byte word in the FAT structure                       */
 610:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 611:Middlewares/Third_Party/FatFs/src/ff.c **** 
 612:Middlewares/Third_Party/FatFs/src/ff.c **** static
 613:Middlewares/Third_Party/FatFs/src/ff.c **** WORD ld_word (const BYTE* ptr)	/*	 Load a 2-byte little-endian word */
 614:Middlewares/Third_Party/FatFs/src/ff.c **** {
  27              		.loc 1 614 0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              		@ link register save eliminated.
  32              	.LVL0:
 615:Middlewares/Third_Party/FatFs/src/ff.c **** 	WORD rv;
 616:Middlewares/Third_Party/FatFs/src/ff.c **** 
 617:Middlewares/Third_Party/FatFs/src/ff.c **** 	rv = ptr[1];
  33              		.loc 1 617 0
  34 0000 4278     		ldrb	r2, [r0, #1]	@ zero_extendqisi2
  35              	.LVL1:
 618:Middlewares/Third_Party/FatFs/src/ff.c **** 	rv = rv << 8 | ptr[0];
  36              		.loc 1 618 0
  37 0002 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
  38              	.LVL2:
 619:Middlewares/Third_Party/FatFs/src/ff.c **** 	return rv;
 620:Middlewares/Third_Party/FatFs/src/ff.c **** }
  39              		.loc 1 620 0
  40 0004 40EA0220 		orr	r0, r0, r2, lsl #8
  41              	.LVL3:
  42 0008 7047     		bx	lr
  43              		.cfi_endproc
  44              	.LFE141:
  46              		.section	.text.ld_dword,"ax",%progbits
  47              		.align	1
  48              		.syntax unified
  49              		.thumb
  50              		.thumb_func
  51              		.fpu fpv5-sp-d16
  53              	ld_dword:
  54              	.LFB142:
 621:Middlewares/Third_Party/FatFs/src/ff.c **** 
 622:Middlewares/Third_Party/FatFs/src/ff.c **** static
 623:Middlewares/Third_Party/FatFs/src/ff.c **** DWORD ld_dword (const BYTE* ptr)	/* Load a 4-byte little-endian word */
 624:Middlewares/Third_Party/FatFs/src/ff.c **** {
  55              		.loc 1 624 0
  56              		.cfi_startproc
  57              		@ args = 0, pretend = 0, frame = 0
  58              		@ frame_needed = 0, uses_anonymous_args = 0
  59              		@ link register save eliminated.
  60              	.LVL4:
 625:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD rv;
 626:Middlewares/Third_Party/FatFs/src/ff.c **** 
 627:Middlewares/Third_Party/FatFs/src/ff.c **** 	rv = ptr[3];
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 13


  61              		.loc 1 627 0
  62 0000 C278     		ldrb	r2, [r0, #3]	@ zero_extendqisi2
  63              	.LVL5:
 628:Middlewares/Third_Party/FatFs/src/ff.c **** 	rv = rv << 8 | ptr[2];
  64              		.loc 1 628 0
  65 0002 8378     		ldrb	r3, [r0, #2]	@ zero_extendqisi2
  66 0004 43EA0222 		orr	r2, r3, r2, lsl #8
  67              	.LVL6:
 629:Middlewares/Third_Party/FatFs/src/ff.c **** 	rv = rv << 8 | ptr[1];
  68              		.loc 1 629 0
  69 0008 4378     		ldrb	r3, [r0, #1]	@ zero_extendqisi2
  70 000a 43EA0223 		orr	r3, r3, r2, lsl #8
  71              	.LVL7:
 630:Middlewares/Third_Party/FatFs/src/ff.c **** 	rv = rv << 8 | ptr[0];
  72              		.loc 1 630 0
  73 000e 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
  74              	.LVL8:
 631:Middlewares/Third_Party/FatFs/src/ff.c **** 	return rv;
 632:Middlewares/Third_Party/FatFs/src/ff.c **** }
  75              		.loc 1 632 0
  76 0010 40EA0320 		orr	r0, r0, r3, lsl #8
  77              	.LVL9:
  78 0014 7047     		bx	lr
  79              		.cfi_endproc
  80              	.LFE142:
  82              		.section	.text.st_word,"ax",%progbits
  83              		.align	1
  84              		.syntax unified
  85              		.thumb
  86              		.thumb_func
  87              		.fpu fpv5-sp-d16
  89              	st_word:
  90              	.LFB143:
 633:Middlewares/Third_Party/FatFs/src/ff.c **** 
 634:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 635:Middlewares/Third_Party/FatFs/src/ff.c **** static
 636:Middlewares/Third_Party/FatFs/src/ff.c **** QWORD ld_qword (const BYTE* ptr)	/* Load an 8-byte little-endian word */
 637:Middlewares/Third_Party/FatFs/src/ff.c **** {
 638:Middlewares/Third_Party/FatFs/src/ff.c **** 	QWORD rv;
 639:Middlewares/Third_Party/FatFs/src/ff.c **** 
 640:Middlewares/Third_Party/FatFs/src/ff.c **** 	rv = ptr[7];
 641:Middlewares/Third_Party/FatFs/src/ff.c **** 	rv = rv << 8 | ptr[6];
 642:Middlewares/Third_Party/FatFs/src/ff.c **** 	rv = rv << 8 | ptr[5];
 643:Middlewares/Third_Party/FatFs/src/ff.c **** 	rv = rv << 8 | ptr[4];
 644:Middlewares/Third_Party/FatFs/src/ff.c **** 	rv = rv << 8 | ptr[3];
 645:Middlewares/Third_Party/FatFs/src/ff.c **** 	rv = rv << 8 | ptr[2];
 646:Middlewares/Third_Party/FatFs/src/ff.c **** 	rv = rv << 8 | ptr[1];
 647:Middlewares/Third_Party/FatFs/src/ff.c **** 	rv = rv << 8 | ptr[0];
 648:Middlewares/Third_Party/FatFs/src/ff.c **** 	return rv;
 649:Middlewares/Third_Party/FatFs/src/ff.c **** }
 650:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 651:Middlewares/Third_Party/FatFs/src/ff.c **** 
 652:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 653:Middlewares/Third_Party/FatFs/src/ff.c **** static
 654:Middlewares/Third_Party/FatFs/src/ff.c **** void st_word (BYTE* ptr, WORD val)	/* Store a 2-byte word in little-endian */
 655:Middlewares/Third_Party/FatFs/src/ff.c **** {
  91              		.loc 1 655 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 14


  92              		.cfi_startproc
  93              		@ args = 0, pretend = 0, frame = 0
  94              		@ frame_needed = 0, uses_anonymous_args = 0
  95              		@ link register save eliminated.
  96              	.LVL10:
 656:Middlewares/Third_Party/FatFs/src/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
  97              		.loc 1 656 0
  98 0000 0170     		strb	r1, [r0]
  99              	.LVL11:
 657:Middlewares/Third_Party/FatFs/src/ff.c **** 	*ptr++ = (BYTE)val;
 100              		.loc 1 657 0
 101 0002 090A     		lsrs	r1, r1, #8
 102              	.LVL12:
 103 0004 4170     		strb	r1, [r0, #1]
 104 0006 7047     		bx	lr
 105              		.cfi_endproc
 106              	.LFE143:
 108              		.section	.text.st_dword,"ax",%progbits
 109              		.align	1
 110              		.syntax unified
 111              		.thumb
 112              		.thumb_func
 113              		.fpu fpv5-sp-d16
 115              	st_dword:
 116              	.LFB144:
 658:Middlewares/Third_Party/FatFs/src/ff.c **** }
 659:Middlewares/Third_Party/FatFs/src/ff.c **** 
 660:Middlewares/Third_Party/FatFs/src/ff.c **** static
 661:Middlewares/Third_Party/FatFs/src/ff.c **** void st_dword (BYTE* ptr, DWORD val)	/* Store a 4-byte word in little-endian */
 662:Middlewares/Third_Party/FatFs/src/ff.c **** {
 117              		.loc 1 662 0
 118              		.cfi_startproc
 119              		@ args = 0, pretend = 0, frame = 0
 120              		@ frame_needed = 0, uses_anonymous_args = 0
 121              		@ link register save eliminated.
 122              	.LVL13:
 663:Middlewares/Third_Party/FatFs/src/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 123              		.loc 1 663 0
 124 0000 0170     		strb	r1, [r0]
 125              	.LVL14:
 664:Middlewares/Third_Party/FatFs/src/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 126              		.loc 1 664 0
 127 0002 C1F30723 		ubfx	r3, r1, #8, #8
 128 0006 4370     		strb	r3, [r0, #1]
 129              	.LVL15:
 665:Middlewares/Third_Party/FatFs/src/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 130              		.loc 1 665 0
 131 0008 C1F30743 		ubfx	r3, r1, #16, #8
 132 000c 8370     		strb	r3, [r0, #2]
 133              	.LVL16:
 666:Middlewares/Third_Party/FatFs/src/ff.c **** 	*ptr++ = (BYTE)val;
 134              		.loc 1 666 0
 135 000e 090E     		lsrs	r1, r1, #24
 136              	.LVL17:
 137 0010 C170     		strb	r1, [r0, #3]
 138 0012 7047     		bx	lr
 139              		.cfi_endproc
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 15


 140              	.LFE144:
 142              		.section	.text.mem_cpy,"ax",%progbits
 143              		.align	1
 144              		.syntax unified
 145              		.thumb
 146              		.thumb_func
 147              		.fpu fpv5-sp-d16
 149              	mem_cpy:
 150              	.LFB145:
 667:Middlewares/Third_Party/FatFs/src/ff.c **** }
 668:Middlewares/Third_Party/FatFs/src/ff.c **** 
 669:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 670:Middlewares/Third_Party/FatFs/src/ff.c **** static
 671:Middlewares/Third_Party/FatFs/src/ff.c **** void st_qword (BYTE* ptr, QWORD val)	/* Store an 8-byte word in little-endian */
 672:Middlewares/Third_Party/FatFs/src/ff.c **** {
 673:Middlewares/Third_Party/FatFs/src/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 674:Middlewares/Third_Party/FatFs/src/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 675:Middlewares/Third_Party/FatFs/src/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 676:Middlewares/Third_Party/FatFs/src/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 677:Middlewares/Third_Party/FatFs/src/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 678:Middlewares/Third_Party/FatFs/src/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 679:Middlewares/Third_Party/FatFs/src/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 680:Middlewares/Third_Party/FatFs/src/ff.c **** 	*ptr++ = (BYTE)val;
 681:Middlewares/Third_Party/FatFs/src/ff.c **** }
 682:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 683:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* !_FS_READONLY */
 684:Middlewares/Third_Party/FatFs/src/ff.c **** 
 685:Middlewares/Third_Party/FatFs/src/ff.c **** 
 686:Middlewares/Third_Party/FatFs/src/ff.c **** 
 687:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 688:Middlewares/Third_Party/FatFs/src/ff.c **** /* String functions                                                      */
 689:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 690:Middlewares/Third_Party/FatFs/src/ff.c **** 
 691:Middlewares/Third_Party/FatFs/src/ff.c **** /* Copy memory to memory */
 692:Middlewares/Third_Party/FatFs/src/ff.c **** static
 693:Middlewares/Third_Party/FatFs/src/ff.c **** void mem_cpy (void* dst, const void* src, UINT cnt) {
 151              		.loc 1 693 0
 152              		.cfi_startproc
 153              		@ args = 0, pretend = 0, frame = 0
 154              		@ frame_needed = 0, uses_anonymous_args = 0
 155              		@ link register save eliminated.
 156              	.LVL18:
 694:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *d = (BYTE*)dst;
 695:Middlewares/Third_Party/FatFs/src/ff.c **** 	const BYTE *s = (const BYTE*)src;
 696:Middlewares/Third_Party/FatFs/src/ff.c **** 
 697:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (cnt) {
 157              		.loc 1 697 0
 158 0000 1346     		mov	r3, r2
 159 0002 2AB1     		cbz	r2, .L5
 160              	.LVL19:
 161              	.L7:
 698:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
 699:Middlewares/Third_Party/FatFs/src/ff.c **** 			*d++ = *s++;
 162              		.loc 1 699 0 discriminator 1
 163 0004 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
 164 0006 0270     		strb	r2, [r0]
 165              	.LVL20:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 16


 166 0008 0130     		adds	r0, r0, #1
 167              	.LVL21:
 168 000a 0131     		adds	r1, r1, #1
 169              	.LVL22:
 700:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (--cnt);
 170              		.loc 1 700 0 discriminator 1
 171 000c 013B     		subs	r3, r3, #1
 172              	.LVL23:
 173 000e F9D1     		bne	.L7
 174              	.L5:
 175 0010 7047     		bx	lr
 176              		.cfi_endproc
 177              	.LFE145:
 179              		.section	.text.mem_set,"ax",%progbits
 180              		.align	1
 181              		.syntax unified
 182              		.thumb
 183              		.thumb_func
 184              		.fpu fpv5-sp-d16
 186              	mem_set:
 187              	.LFB146:
 701:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 702:Middlewares/Third_Party/FatFs/src/ff.c **** }
 703:Middlewares/Third_Party/FatFs/src/ff.c **** 
 704:Middlewares/Third_Party/FatFs/src/ff.c **** /* Fill memory block */
 705:Middlewares/Third_Party/FatFs/src/ff.c **** static
 706:Middlewares/Third_Party/FatFs/src/ff.c **** void mem_set (void* dst, int val, UINT cnt) {
 188              		.loc 1 706 0
 189              		.cfi_startproc
 190              		@ args = 0, pretend = 0, frame = 0
 191              		@ frame_needed = 0, uses_anonymous_args = 0
 192              		@ link register save eliminated.
 193              	.LVL24:
 194              	.L9:
 707:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *d = (BYTE*)dst;
 708:Middlewares/Third_Party/FatFs/src/ff.c **** 
 709:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
 710:Middlewares/Third_Party/FatFs/src/ff.c **** 		*d++ = (BYTE)val;
 195              		.loc 1 710 0 discriminator 1
 196 0000 0170     		strb	r1, [r0]
 197              	.LVL25:
 198 0002 0130     		adds	r0, r0, #1
 199              	.LVL26:
 711:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (--cnt);
 200              		.loc 1 711 0 discriminator 1
 201 0004 013A     		subs	r2, r2, #1
 202              	.LVL27:
 203 0006 FBD1     		bne	.L9
 712:Middlewares/Third_Party/FatFs/src/ff.c **** }
 204              		.loc 1 712 0
 205 0008 7047     		bx	lr
 206              		.cfi_endproc
 207              	.LFE146:
 209              		.section	.text.mem_cmp,"ax",%progbits
 210              		.align	1
 211              		.syntax unified
 212              		.thumb
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 17


 213              		.thumb_func
 214              		.fpu fpv5-sp-d16
 216              	mem_cmp:
 217              	.LFB147:
 713:Middlewares/Third_Party/FatFs/src/ff.c **** 
 714:Middlewares/Third_Party/FatFs/src/ff.c **** /* Compare memory block */
 715:Middlewares/Third_Party/FatFs/src/ff.c **** static
 716:Middlewares/Third_Party/FatFs/src/ff.c **** int mem_cmp (const void* dst, const void* src, UINT cnt) {	/* ZR:same, NZ:different */
 218              		.loc 1 716 0
 219              		.cfi_startproc
 220              		@ args = 0, pretend = 0, frame = 0
 221              		@ frame_needed = 0, uses_anonymous_args = 0
 222              		@ link register save eliminated.
 223              	.LVL28:
 224 0000 30B4     		push	{r4, r5}
 225              	.LCFI0:
 226              		.cfi_def_cfa_offset 8
 227              		.cfi_offset 4, -8
 228              		.cfi_offset 5, -4
 229              	.LVL29:
 230              	.L12:
 717:Middlewares/Third_Party/FatFs/src/ff.c **** 	const BYTE *d = (const BYTE *)dst, *s = (const BYTE *)src;
 718:Middlewares/Third_Party/FatFs/src/ff.c **** 	int r = 0;
 719:Middlewares/Third_Party/FatFs/src/ff.c **** 
 720:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
 721:Middlewares/Third_Party/FatFs/src/ff.c **** 		r = *d++ - *s++;
 231              		.loc 1 721 0 discriminator 2
 232 0002 451C     		adds	r5, r0, #1
 233              	.LVL30:
 234 0004 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 235              	.LVL31:
 236 0006 0878     		ldrb	r0, [r1]	@ zero_extendqisi2
 237 0008 1B1A     		subs	r3, r3, r0
 238              	.LVL32:
 722:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (--cnt && r == 0);
 239              		.loc 1 722 0 discriminator 2
 240 000a 013A     		subs	r2, r2, #1
 241              	.LVL33:
 242 000c 04D0     		beq	.L10
 243 000e 4C1C     		adds	r4, r1, #1
 244              	.LVL34:
 721:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (--cnt && r == 0);
 245              		.loc 1 721 0 discriminator 1
 246 0010 2846     		mov	r0, r5
 247 0012 2146     		mov	r1, r4
 248              		.loc 1 722 0 discriminator 1
 249 0014 002B     		cmp	r3, #0
 250 0016 F4D0     		beq	.L12
 251              	.LVL35:
 252              	.L10:
 723:Middlewares/Third_Party/FatFs/src/ff.c **** 
 724:Middlewares/Third_Party/FatFs/src/ff.c **** 	return r;
 725:Middlewares/Third_Party/FatFs/src/ff.c **** }
 253              		.loc 1 725 0
 254 0018 1846     		mov	r0, r3
 255 001a 30BC     		pop	{r4, r5}
 256              	.LCFI1:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 18


 257              		.cfi_restore 5
 258              		.cfi_restore 4
 259              		.cfi_def_cfa_offset 0
 260              	.LVL36:
 261 001c 7047     		bx	lr
 262              		.cfi_endproc
 263              	.LFE147:
 265              		.section	.text.chk_chr,"ax",%progbits
 266              		.align	1
 267              		.syntax unified
 268              		.thumb
 269              		.thumb_func
 270              		.fpu fpv5-sp-d16
 272              	chk_chr:
 273              	.LFB148:
 726:Middlewares/Third_Party/FatFs/src/ff.c **** 
 727:Middlewares/Third_Party/FatFs/src/ff.c **** /* Check if chr is contained in the string */
 728:Middlewares/Third_Party/FatFs/src/ff.c **** static
 729:Middlewares/Third_Party/FatFs/src/ff.c **** int chk_chr (const char* str, int chr) {	/* NZ:contained, ZR:not contained */
 274              		.loc 1 729 0
 275              		.cfi_startproc
 276              		@ args = 0, pretend = 0, frame = 0
 277              		@ frame_needed = 0, uses_anonymous_args = 0
 278              		@ link register save eliminated.
 279              	.LVL37:
 730:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (*str && *str != chr) str++;
 280              		.loc 1 730 0
 281 0000 00E0     		b	.L15
 282              	.L17:
 283              		.loc 1 730 0 is_stmt 0 discriminator 3
 284 0002 0130     		adds	r0, r0, #1
 285              	.LVL38:
 286              	.L15:
 287              		.loc 1 730 0 discriminator 1
 288 0004 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 289 0006 0BB1     		cbz	r3, .L16
 290              		.loc 1 730 0 discriminator 2
 291 0008 8B42     		cmp	r3, r1
 292 000a FAD1     		bne	.L17
 293              	.L16:
 731:Middlewares/Third_Party/FatFs/src/ff.c **** 	return *str;
 732:Middlewares/Third_Party/FatFs/src/ff.c **** }
 294              		.loc 1 732 0 is_stmt 1
 295 000c 1846     		mov	r0, r3
 296              	.LVL39:
 297 000e 7047     		bx	lr
 298              		.cfi_endproc
 299              	.LFE148:
 301              		.section	.text.chk_lock,"ax",%progbits
 302              		.align	1
 303              		.syntax unified
 304              		.thumb
 305              		.thumb_func
 306              		.fpu fpv5-sp-d16
 308              	chk_lock:
 309              	.LFB151:
 733:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 19


 734:Middlewares/Third_Party/FatFs/src/ff.c **** 
 735:Middlewares/Third_Party/FatFs/src/ff.c **** 
 736:Middlewares/Third_Party/FatFs/src/ff.c **** 
 737:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
 738:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 739:Middlewares/Third_Party/FatFs/src/ff.c **** /* Request/Release grant to access the volume                            */
 740:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 741:Middlewares/Third_Party/FatFs/src/ff.c **** static
 742:Middlewares/Third_Party/FatFs/src/ff.c **** int lock_fs (
 743:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs		/* File system object */
 744:Middlewares/Third_Party/FatFs/src/ff.c **** )
 745:Middlewares/Third_Party/FatFs/src/ff.c **** {
 746:Middlewares/Third_Party/FatFs/src/ff.c **** 	return (fs && ff_req_grant(fs->sobj)) ? 1 : 0;
 747:Middlewares/Third_Party/FatFs/src/ff.c **** }
 748:Middlewares/Third_Party/FatFs/src/ff.c **** 
 749:Middlewares/Third_Party/FatFs/src/ff.c **** 
 750:Middlewares/Third_Party/FatFs/src/ff.c **** static
 751:Middlewares/Third_Party/FatFs/src/ff.c **** void unlock_fs (
 752:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,		/* File system object */
 753:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res		/* Result code to be returned */
 754:Middlewares/Third_Party/FatFs/src/ff.c **** )
 755:Middlewares/Third_Party/FatFs/src/ff.c **** {
 756:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs && res != FR_NOT_ENABLED && res != FR_INVALID_DRIVE && res != FR_TIMEOUT) {
 757:Middlewares/Third_Party/FatFs/src/ff.c **** 		ff_rel_grant(fs->sobj);
 758:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 759:Middlewares/Third_Party/FatFs/src/ff.c **** }
 760:Middlewares/Third_Party/FatFs/src/ff.c **** 
 761:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 762:Middlewares/Third_Party/FatFs/src/ff.c **** 
 763:Middlewares/Third_Party/FatFs/src/ff.c **** 
 764:Middlewares/Third_Party/FatFs/src/ff.c **** 
 765:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 766:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 767:Middlewares/Third_Party/FatFs/src/ff.c **** /* File lock control functions                                           */
 768:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 769:Middlewares/Third_Party/FatFs/src/ff.c **** 
 770:Middlewares/Third_Party/FatFs/src/ff.c **** static
 771:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT chk_lock (	/* Check if the file can be accessed */
 772:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,		/* Directory object pointing the file to be checked */
 773:Middlewares/Third_Party/FatFs/src/ff.c **** 	int acc			/* Desired access type (0:Read, 1:Write, 2:Delete/Rename) */
 774:Middlewares/Third_Party/FatFs/src/ff.c **** )
 775:Middlewares/Third_Party/FatFs/src/ff.c **** {
 310              		.loc 1 775 0
 311              		.cfi_startproc
 312              		@ args = 0, pretend = 0, frame = 0
 313              		@ frame_needed = 0, uses_anonymous_args = 0
 314              		@ link register save eliminated.
 315              	.LVL40:
 316 0000 30B4     		push	{r4, r5}
 317              	.LCFI2:
 318              		.cfi_def_cfa_offset 8
 319              		.cfi_offset 4, -8
 320              		.cfi_offset 5, -4
 321              	.LVL41:
 776:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, be;
 777:Middlewares/Third_Party/FatFs/src/ff.c **** 
 778:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Search file semaphore table */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 20


 779:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (i = be = 0; i < _FS_LOCK; i++) {
 322              		.loc 1 779 0
 323 0002 0025     		movs	r5, #0
 324 0004 2B46     		mov	r3, r5
 325 0006 01E0     		b	.L19
 326              	.LVL42:
 327              	.L25:
 780:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs) {	/* Existing entry */
 781:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (Files[i].fs == dp->obj.fs &&	 	/* Check if the object matched with an open object */
 782:Middlewares/Third_Party/FatFs/src/ff.c **** 				Files[i].clu == dp->obj.sclust &&
 783:Middlewares/Third_Party/FatFs/src/ff.c **** 				Files[i].ofs == dp->dptr) break;
 784:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {			/* Blank entry */
 785:Middlewares/Third_Party/FatFs/src/ff.c **** 			be = 1;
 328              		.loc 1 785 0
 329 0008 0125     		movs	r5, #1
 330              	.LVL43:
 331              	.L20:
 779:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs) {	/* Existing entry */
 332              		.loc 1 779 0 discriminator 2
 333 000a 0133     		adds	r3, r3, #1
 334              	.LVL44:
 335              	.L19:
 779:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs) {	/* Existing entry */
 336              		.loc 1 779 0 is_stmt 0 discriminator 1
 337 000c 012B     		cmp	r3, #1
 338 000e 15D8     		bhi	.L21
 780:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs) {	/* Existing entry */
 339              		.loc 1 780 0 is_stmt 1
 340 0010 1A01     		lsls	r2, r3, #4
 341 0012 174C     		ldr	r4, .L34
 342 0014 A258     		ldr	r2, [r4, r2]
 343 0016 002A     		cmp	r2, #0
 344 0018 F6D0     		beq	.L25
 781:Middlewares/Third_Party/FatFs/src/ff.c **** 				Files[i].clu == dp->obj.sclust &&
 345              		.loc 1 781 0
 346 001a 0468     		ldr	r4, [r0]
 347 001c A242     		cmp	r2, r4
 348 001e F4D1     		bne	.L20
 782:Middlewares/Third_Party/FatFs/src/ff.c **** 				Files[i].ofs == dp->dptr) break;
 349              		.loc 1 782 0 discriminator 1
 350 0020 134A     		ldr	r2, .L34
 351 0022 02EB0312 		add	r2, r2, r3, lsl #4
 352 0026 5468     		ldr	r4, [r2, #4]
 353 0028 8268     		ldr	r2, [r0, #8]
 781:Middlewares/Third_Party/FatFs/src/ff.c **** 				Files[i].clu == dp->obj.sclust &&
 354              		.loc 1 781 0 discriminator 1
 355 002a 9442     		cmp	r4, r2
 356 002c EDD1     		bne	.L20
 783:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {			/* Blank entry */
 357              		.loc 1 783 0
 358 002e 104A     		ldr	r2, .L34
 359 0030 02EB0312 		add	r2, r2, r3, lsl #4
 360 0034 9468     		ldr	r4, [r2, #8]
 361 0036 4269     		ldr	r2, [r0, #20]
 782:Middlewares/Third_Party/FatFs/src/ff.c **** 				Files[i].ofs == dp->dptr) break;
 362              		.loc 1 782 0
 363 0038 9442     		cmp	r4, r2
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 21


 364 003a E6D1     		bne	.L20
 365              	.L21:
 786:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 787:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 788:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (i == _FS_LOCK) {	/* The object is not opened */
 366              		.loc 1 788 0
 367 003c 022B     		cmp	r3, #2
 368 003e 03D0     		beq	.L30
 789:Middlewares/Third_Party/FatFs/src/ff.c **** 		return (be || acc == 2) ? FR_OK : FR_TOO_MANY_OPEN_FILES;	/* Is there a blank entry for new objec
 790:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 791:Middlewares/Third_Party/FatFs/src/ff.c **** 
 792:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* The object has been opened. Reject any open against writing file and all write mode open */
 793:Middlewares/Third_Party/FatFs/src/ff.c **** 	return (acc || Files[i].ctr == 0x100) ? FR_LOCKED : FR_OK;
 369              		.loc 1 793 0
 370 0040 59B1     		cbz	r1, .L31
 371 0042 1020     		movs	r0, #16
 372              	.LVL45:
 373              	.L24:
 794:Middlewares/Third_Party/FatFs/src/ff.c **** }
 374              		.loc 1 794 0
 375 0044 30BC     		pop	{r4, r5}
 376              	.LCFI3:
 377              		.cfi_remember_state
 378              		.cfi_restore 5
 379              		.cfi_restore 4
 380              		.cfi_def_cfa_offset 0
 381 0046 7047     		bx	lr
 382              	.LVL46:
 383              	.L30:
 384              	.LCFI4:
 385              		.cfi_restore_state
 789:Middlewares/Third_Party/FatFs/src/ff.c **** 		return (be || acc == 2) ? FR_OK : FR_TOO_MANY_OPEN_FILES;	/* Is there a blank entry for new objec
 386              		.loc 1 789 0
 387 0048 0229     		cmp	r1, #2
 388 004a 08BF     		it	eq
 389 004c 45F00105 		orreq	r5, r5, #1
 390              	.LVL47:
 391 0050 0DB9     		cbnz	r5, .L32
 392 0052 1220     		movs	r0, #18
 393              	.LVL48:
 394 0054 F6E7     		b	.L24
 395              	.LVL49:
 396              	.L32:
 397 0056 0020     		movs	r0, #0
 398              	.LVL50:
 399 0058 F4E7     		b	.L24
 400              	.LVL51:
 401              	.L31:
 793:Middlewares/Third_Party/FatFs/src/ff.c **** }
 402              		.loc 1 793 0 discriminator 2
 403 005a 054A     		ldr	r2, .L34
 404 005c 02EB0313 		add	r3, r2, r3, lsl #4
 405              	.LVL52:
 406 0060 9B89     		ldrh	r3, [r3, #12]
 407 0062 B3F5807F 		cmp	r3, #256
 408 0066 01D0     		beq	.L33
 793:Middlewares/Third_Party/FatFs/src/ff.c **** }
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 22


 409              		.loc 1 793 0 is_stmt 0
 410 0068 0020     		movs	r0, #0
 411              	.LVL53:
 412 006a EBE7     		b	.L24
 413              	.LVL54:
 414              	.L33:
 415 006c 1020     		movs	r0, #16
 416              	.LVL55:
 417 006e E9E7     		b	.L24
 418              	.L35:
 419              		.align	2
 420              	.L34:
 421 0070 00000000 		.word	.LANCHOR0
 422              		.cfi_endproc
 423              	.LFE151:
 425              		.section	.text.enq_lock,"ax",%progbits
 426              		.align	1
 427              		.syntax unified
 428              		.thumb
 429              		.thumb_func
 430              		.fpu fpv5-sp-d16
 432              	enq_lock:
 433              	.LFB152:
 795:Middlewares/Third_Party/FatFs/src/ff.c **** 
 796:Middlewares/Third_Party/FatFs/src/ff.c **** 
 797:Middlewares/Third_Party/FatFs/src/ff.c **** static
 798:Middlewares/Third_Party/FatFs/src/ff.c **** int enq_lock (void)	/* Check if an entry is available for a new object */
 799:Middlewares/Third_Party/FatFs/src/ff.c **** {
 434              		.loc 1 799 0 is_stmt 1
 435              		.cfi_startproc
 436              		@ args = 0, pretend = 0, frame = 0
 437              		@ frame_needed = 0, uses_anonymous_args = 0
 438              		@ link register save eliminated.
 439              	.LVL56:
 800:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
 801:Middlewares/Third_Party/FatFs/src/ff.c **** 
 802:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (i = 0; i < _FS_LOCK && Files[i].fs; i++) ;
 440              		.loc 1 802 0
 441 0000 0020     		movs	r0, #0
 442 0002 00E0     		b	.L37
 443              	.LVL57:
 444              	.L39:
 445              		.loc 1 802 0 is_stmt 0 discriminator 4
 446 0004 0130     		adds	r0, r0, #1
 447              	.LVL58:
 448              	.L37:
 449              		.loc 1 802 0 discriminator 1
 450 0006 0128     		cmp	r0, #1
 451 0008 04D8     		bhi	.L38
 452              		.loc 1 802 0 discriminator 3
 453 000a 0301     		lsls	r3, r0, #4
 454 000c 034A     		ldr	r2, .L40
 455 000e D358     		ldr	r3, [r2, r3]
 456 0010 002B     		cmp	r3, #0
 457 0012 F7D1     		bne	.L39
 458              	.L38:
 803:Middlewares/Third_Party/FatFs/src/ff.c **** 	return (i == _FS_LOCK) ? 0 : 1;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 23


 804:Middlewares/Third_Party/FatFs/src/ff.c **** }
 459              		.loc 1 804 0 is_stmt 1
 460 0014 0238     		subs	r0, r0, #2
 461              	.LVL59:
 462 0016 18BF     		it	ne
 463 0018 0120     		movne	r0, #1
 464              	.LVL60:
 465 001a 7047     		bx	lr
 466              	.L41:
 467              		.align	2
 468              	.L40:
 469 001c 00000000 		.word	.LANCHOR0
 470              		.cfi_endproc
 471              	.LFE152:
 473              		.section	.text.inc_lock,"ax",%progbits
 474              		.align	1
 475              		.syntax unified
 476              		.thumb
 477              		.thumb_func
 478              		.fpu fpv5-sp-d16
 480              	inc_lock:
 481              	.LFB153:
 805:Middlewares/Third_Party/FatFs/src/ff.c **** 
 806:Middlewares/Third_Party/FatFs/src/ff.c **** 
 807:Middlewares/Third_Party/FatFs/src/ff.c **** static
 808:Middlewares/Third_Party/FatFs/src/ff.c **** UINT inc_lock (	/* Increment object open counter and returns its index (0:Internal error) */
 809:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,	/* Directory object pointing the file to register or increment */
 810:Middlewares/Third_Party/FatFs/src/ff.c **** 	int acc		/* Desired access (0:Read, 1:Write, 2:Delete/Rename) */
 811:Middlewares/Third_Party/FatFs/src/ff.c **** )
 812:Middlewares/Third_Party/FatFs/src/ff.c **** {
 482              		.loc 1 812 0
 483              		.cfi_startproc
 484              		@ args = 0, pretend = 0, frame = 0
 485              		@ frame_needed = 0, uses_anonymous_args = 0
 486              		@ link register save eliminated.
 487              	.LVL61:
 488 0000 70B4     		push	{r4, r5, r6}
 489              	.LCFI5:
 490              		.cfi_def_cfa_offset 12
 491              		.cfi_offset 4, -12
 492              		.cfi_offset 5, -8
 493              		.cfi_offset 6, -4
 494              	.LVL62:
 813:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
 814:Middlewares/Third_Party/FatFs/src/ff.c **** 
 815:Middlewares/Third_Party/FatFs/src/ff.c **** 
 816:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (i = 0; i < _FS_LOCK; i++) {	/* Find the object */
 495              		.loc 1 816 0
 496 0002 0023     		movs	r3, #0
 497 0004 00E0     		b	.L43
 498              	.LVL63:
 499              	.L44:
 500              		.loc 1 816 0 is_stmt 0 discriminator 2
 501 0006 0133     		adds	r3, r3, #1
 502              	.LVL64:
 503              	.L43:
 504              		.loc 1 816 0 discriminator 1
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 24


 505 0008 012B     		cmp	r3, #1
 506 000a 13D8     		bhi	.L45
 817:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == dp->obj.fs &&
 507              		.loc 1 817 0 is_stmt 1
 508 000c 1A01     		lsls	r2, r3, #4
 509 000e 244C     		ldr	r4, .L60
 510 0010 A458     		ldr	r4, [r4, r2]
 511 0012 0268     		ldr	r2, [r0]
 512 0014 9442     		cmp	r4, r2
 513 0016 F6D1     		bne	.L44
 818:Middlewares/Third_Party/FatFs/src/ff.c **** 			Files[i].clu == dp->obj.sclust &&
 514              		.loc 1 818 0 discriminator 1
 515 0018 214A     		ldr	r2, .L60
 516 001a 02EB0312 		add	r2, r2, r3, lsl #4
 517 001e 5468     		ldr	r4, [r2, #4]
 518 0020 8268     		ldr	r2, [r0, #8]
 817:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == dp->obj.fs &&
 519              		.loc 1 817 0 discriminator 1
 520 0022 9442     		cmp	r4, r2
 521 0024 EFD1     		bne	.L44
 819:Middlewares/Third_Party/FatFs/src/ff.c **** 			Files[i].ofs == dp->dptr) break;
 522              		.loc 1 819 0
 523 0026 1E4A     		ldr	r2, .L60
 524 0028 02EB0312 		add	r2, r2, r3, lsl #4
 525 002c 9468     		ldr	r4, [r2, #8]
 526 002e 4269     		ldr	r2, [r0, #20]
 818:Middlewares/Third_Party/FatFs/src/ff.c **** 			Files[i].clu == dp->obj.sclust &&
 527              		.loc 1 818 0
 528 0030 9442     		cmp	r4, r2
 529 0032 E8D1     		bne	.L44
 530              	.L45:
 820:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 821:Middlewares/Third_Party/FatFs/src/ff.c **** 
 822:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (i == _FS_LOCK) {				/* Not opened. Register it as new. */
 531              		.loc 1 822 0
 532 0034 022B     		cmp	r3, #2
 533 0036 29D0     		beq	.L59
 534              	.LVL65:
 535              	.L48:
 823:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = 0; i < _FS_LOCK && Files[i].fs; i++) ;
 824:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == _FS_LOCK) return 0;	/* No free entry to register (int err) */
 825:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].fs = dp->obj.fs;
 826:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].clu = dp->obj.sclust;
 827:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].ofs = dp->dptr;
 828:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].ctr = 0;
 829:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 830:Middlewares/Third_Party/FatFs/src/ff.c **** 
 831:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (acc && Files[i].ctr) return 0;	/* Access violation (int err) */
 536              		.loc 1 831 0
 537 0038 21B1     		cbz	r1, .L52
 538              		.loc 1 831 0 is_stmt 0 discriminator 1
 539 003a 194A     		ldr	r2, .L60
 540 003c 02EB0312 		add	r2, r2, r3, lsl #4
 541 0040 9289     		ldrh	r2, [r2, #12]
 542 0042 52BB     		cbnz	r2, .L56
 543              	.L52:
 832:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 25


 833:Middlewares/Third_Party/FatFs/src/ff.c **** 	Files[i].ctr = acc ? 0x100 : Files[i].ctr + 1;	/* Set semaphore value */
 544              		.loc 1 833 0 is_stmt 1
 545 0044 21BB     		cbnz	r1, .L57
 546              		.loc 1 833 0 is_stmt 0 discriminator 1
 547 0046 164A     		ldr	r2, .L60
 548 0048 02EB0312 		add	r2, r2, r3, lsl #4
 549 004c 9189     		ldrh	r1, [r2, #12]
 550              	.LVL66:
 551 004e 0131     		adds	r1, r1, #1
 552 0050 89B2     		uxth	r1, r1
 553              	.L53:
 554              		.loc 1 833 0 discriminator 4
 555 0052 134A     		ldr	r2, .L60
 556 0054 02EB0312 		add	r2, r2, r3, lsl #4
 557 0058 9181     		strh	r1, [r2, #12]	@ movhi
 834:Middlewares/Third_Party/FatFs/src/ff.c **** 
 835:Middlewares/Third_Party/FatFs/src/ff.c **** 	return i + 1;
 558              		.loc 1 835 0 is_stmt 1 discriminator 4
 559 005a 581C     		adds	r0, r3, #1
 560              	.L42:
 836:Middlewares/Third_Party/FatFs/src/ff.c **** }
 561              		.loc 1 836 0
 562 005c 70BC     		pop	{r4, r5, r6}
 563              	.LCFI6:
 564              		.cfi_remember_state
 565              		.cfi_restore 6
 566              		.cfi_restore 5
 567              		.cfi_restore 4
 568              		.cfi_def_cfa_offset 0
 569 005e 7047     		bx	lr
 570              	.LVL67:
 571              	.L50:
 572              	.LCFI7:
 573              		.cfi_restore_state
 823:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == _FS_LOCK) return 0;	/* No free entry to register (int err) */
 574              		.loc 1 823 0 discriminator 4
 575 0060 0133     		adds	r3, r3, #1
 576              	.LVL68:
 577              	.L47:
 823:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == _FS_LOCK) return 0;	/* No free entry to register (int err) */
 578              		.loc 1 823 0 is_stmt 0 discriminator 1
 579 0062 012B     		cmp	r3, #1
 580 0064 04D8     		bhi	.L49
 823:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == _FS_LOCK) return 0;	/* No free entry to register (int err) */
 581              		.loc 1 823 0 discriminator 3
 582 0066 1A01     		lsls	r2, r3, #4
 583 0068 0D4C     		ldr	r4, .L60
 584 006a A258     		ldr	r2, [r4, r2]
 585 006c 002A     		cmp	r2, #0
 586 006e F7D1     		bne	.L50
 587              	.L49:
 824:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].fs = dp->obj.fs;
 588              		.loc 1 824 0 is_stmt 1
 589 0070 022B     		cmp	r3, #2
 590 0072 10D0     		beq	.L55
 825:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].clu = dp->obj.sclust;
 591              		.loc 1 825 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 26


 592 0074 0668     		ldr	r6, [r0]
 593 0076 0A4D     		ldr	r5, .L60
 594 0078 1C01     		lsls	r4, r3, #4
 595 007a 2A19     		adds	r2, r5, r4
 596 007c 2E51     		str	r6, [r5, r4]
 826:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].ofs = dp->dptr;
 597              		.loc 1 826 0
 598 007e 8468     		ldr	r4, [r0, #8]
 599 0080 5460     		str	r4, [r2, #4]
 827:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].ctr = 0;
 600              		.loc 1 827 0
 601 0082 4069     		ldr	r0, [r0, #20]
 602              	.LVL69:
 603 0084 9060     		str	r0, [r2, #8]
 828:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 604              		.loc 1 828 0
 605 0086 0020     		movs	r0, #0
 606 0088 9081     		strh	r0, [r2, #12]	@ movhi
 607 008a D5E7     		b	.L48
 608              	.LVL70:
 609              	.L59:
 610 008c 0023     		movs	r3, #0
 611              	.LVL71:
 612 008e E8E7     		b	.L47
 613              	.LVL72:
 614              	.L57:
 833:Middlewares/Third_Party/FatFs/src/ff.c **** 
 615              		.loc 1 833 0
 616 0090 4FF48071 		mov	r1, #256
 617              	.LVL73:
 618 0094 DDE7     		b	.L53
 619              	.LVL74:
 620              	.L55:
 824:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].fs = dp->obj.fs;
 621              		.loc 1 824 0
 622 0096 0020     		movs	r0, #0
 623              	.LVL75:
 624 0098 E0E7     		b	.L42
 625              	.L56:
 831:Middlewares/Third_Party/FatFs/src/ff.c **** 
 626              		.loc 1 831 0
 627 009a 0020     		movs	r0, #0
 628 009c DEE7     		b	.L42
 629              	.L61:
 630 009e 00BF     		.align	2
 631              	.L60:
 632 00a0 00000000 		.word	.LANCHOR0
 633              		.cfi_endproc
 634              	.LFE153:
 636              		.section	.text.dec_lock,"ax",%progbits
 637              		.align	1
 638              		.syntax unified
 639              		.thumb
 640              		.thumb_func
 641              		.fpu fpv5-sp-d16
 643              	dec_lock:
 644              	.LFB154:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 27


 837:Middlewares/Third_Party/FatFs/src/ff.c **** 
 838:Middlewares/Third_Party/FatFs/src/ff.c **** 
 839:Middlewares/Third_Party/FatFs/src/ff.c **** static
 840:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT dec_lock (	/* Decrement object open counter */
 841:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i			/* Semaphore index (1..) */
 842:Middlewares/Third_Party/FatFs/src/ff.c **** )
 843:Middlewares/Third_Party/FatFs/src/ff.c **** {
 645              		.loc 1 843 0
 646              		.cfi_startproc
 647              		@ args = 0, pretend = 0, frame = 0
 648              		@ frame_needed = 0, uses_anonymous_args = 0
 649              		@ link register save eliminated.
 650              	.LVL76:
 844:Middlewares/Third_Party/FatFs/src/ff.c **** 	WORD n;
 845:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 846:Middlewares/Third_Party/FatFs/src/ff.c **** 
 847:Middlewares/Third_Party/FatFs/src/ff.c **** 
 848:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (--i < _FS_LOCK) {	/* Shift index number origin from 0 */
 651              		.loc 1 848 0
 652 0000 0138     		subs	r0, r0, #1
 653              	.LVL77:
 654 0002 0128     		cmp	r0, #1
 655 0004 01D9     		bls	.L69
 849:Middlewares/Third_Party/FatFs/src/ff.c **** 		n = Files[i].ctr;
 850:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (n == 0x100) n = 0;		/* If write mode open, delete the entry */
 851:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (n > 0) n--;				/* Decrement read mode open count */
 852:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].ctr = n;
 853:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (n == 0) Files[i].fs = 0;	/* Delete the entry if open count gets zero */
 854:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_OK;
 855:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
 856:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_INT_ERR;			/* Invalid index nunber */
 656              		.loc 1 856 0
 657 0006 0220     		movs	r0, #2
 658              	.LVL78:
 659 0008 7047     		bx	lr
 660              	.LVL79:
 661              	.L69:
 849:Middlewares/Third_Party/FatFs/src/ff.c **** 		n = Files[i].ctr;
 662              		.loc 1 849 0
 663 000a 0C4B     		ldr	r3, .L71
 664 000c 03EB0013 		add	r3, r3, r0, lsl #4
 665 0010 9B89     		ldrh	r3, [r3, #12]
 666              	.LVL80:
 850:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (n > 0) n--;				/* Decrement read mode open count */
 667              		.loc 1 850 0
 668 0012 B3F5807F 		cmp	r3, #256
 669 0016 0CD0     		beq	.L70
 670              	.LVL81:
 671              	.L64:
 851:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].ctr = n;
 672              		.loc 1 851 0
 673 0018 0BB1     		cbz	r3, .L65
 851:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].ctr = n;
 674              		.loc 1 851 0 is_stmt 0 discriminator 1
 675 001a 013B     		subs	r3, r3, #1
 676              	.LVL82:
 677 001c 9BB2     		uxth	r3, r3
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 28


 678              	.LVL83:
 679              	.L65:
 852:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (n == 0) Files[i].fs = 0;	/* Delete the entry if open count gets zero */
 680              		.loc 1 852 0 is_stmt 1
 681 001e 074A     		ldr	r2, .L71
 682 0020 02EB0012 		add	r2, r2, r0, lsl #4
 683 0024 9381     		strh	r3, [r2, #12]	@ movhi
 853:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_OK;
 684              		.loc 1 853 0
 685 0026 33B9     		cbnz	r3, .L68
 853:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_OK;
 686              		.loc 1 853 0 is_stmt 0 discriminator 1
 687 0028 0301     		lsls	r3, r0, #4
 688              	.LVL84:
 689 002a 0020     		movs	r0, #0
 690              	.LVL85:
 691 002c 034A     		ldr	r2, .L71
 692              	.LVL86:
 693 002e D050     		str	r0, [r2, r3]
 694 0030 7047     		bx	lr
 695              	.LVL87:
 696              	.L70:
 850:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (n > 0) n--;				/* Decrement read mode open count */
 697              		.loc 1 850 0 is_stmt 1
 698 0032 0023     		movs	r3, #0
 699              	.LVL88:
 700 0034 F0E7     		b	.L64
 701              	.LVL89:
 702              	.L68:
 854:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
 703              		.loc 1 854 0
 704 0036 0020     		movs	r0, #0
 705              	.LVL90:
 857:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 858:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 859:Middlewares/Third_Party/FatFs/src/ff.c **** }
 706              		.loc 1 859 0
 707 0038 7047     		bx	lr
 708              	.L72:
 709 003a 00BF     		.align	2
 710              	.L71:
 711 003c 00000000 		.word	.LANCHOR0
 712              		.cfi_endproc
 713              	.LFE154:
 715              		.section	.text.clear_lock,"ax",%progbits
 716              		.align	1
 717              		.syntax unified
 718              		.thumb
 719              		.thumb_func
 720              		.fpu fpv5-sp-d16
 722              	clear_lock:
 723              	.LFB155:
 860:Middlewares/Third_Party/FatFs/src/ff.c **** 
 861:Middlewares/Third_Party/FatFs/src/ff.c **** 
 862:Middlewares/Third_Party/FatFs/src/ff.c **** static
 863:Middlewares/Third_Party/FatFs/src/ff.c **** void clear_lock (	/* Clear lock entries of the volume */
 864:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 29


 865:Middlewares/Third_Party/FatFs/src/ff.c **** )
 866:Middlewares/Third_Party/FatFs/src/ff.c **** {
 724              		.loc 1 866 0
 725              		.cfi_startproc
 726              		@ args = 0, pretend = 0, frame = 0
 727              		@ frame_needed = 0, uses_anonymous_args = 0
 728              		@ link register save eliminated.
 729              	.LVL91:
 867:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
 868:Middlewares/Third_Party/FatFs/src/ff.c **** 
 869:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (i = 0; i < _FS_LOCK; i++) {
 730              		.loc 1 869 0
 731 0000 0023     		movs	r3, #0
 732 0002 03E0     		b	.L78
 733              	.LVL92:
 734              	.L84:
 735              	.LCFI8:
 736              		.cfi_def_cfa_offset 4
 737              		.cfi_offset 4, -4
 870:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == fs) Files[i].fs = 0;
 871:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 872:Middlewares/Third_Party/FatFs/src/ff.c **** }
 738              		.loc 1 872 0
 739 0004 5DF8044B 		ldr	r4, [sp], #4
 740              	.LCFI9:
 741              		.cfi_restore 4
 742              		.cfi_def_cfa_offset 0
 743 0008 7047     		bx	lr
 744              	.L80:
 869:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == fs) Files[i].fs = 0;
 745              		.loc 1 869 0
 746 000a 0133     		adds	r3, r3, #1
 747              	.LVL93:
 748              	.L78:
 749 000c 012B     		cmp	r3, #1
 750 000e 11D8     		bhi	.L83
 870:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == fs) Files[i].fs = 0;
 751              		.loc 1 870 0
 752 0010 1A01     		lsls	r2, r3, #4
 753 0012 0949     		ldr	r1, .L85
 754 0014 8A58     		ldr	r2, [r1, r2]
 755 0016 8242     		cmp	r2, r0
 756 0018 F7D1     		bne	.L80
 866:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
 757              		.loc 1 866 0
 758 001a 10B4     		push	{r4}
 759              	.LCFI10:
 760              		.cfi_def_cfa_offset 4
 761              		.cfi_offset 4, -4
 762              	.L79:
 870:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == fs) Files[i].fs = 0;
 763              		.loc 1 870 0 discriminator 1
 764 001c 1A01     		lsls	r2, r3, #4
 765 001e 0024     		movs	r4, #0
 766 0020 8C50     		str	r4, [r1, r2]
 767              	.L75:
 869:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == fs) Files[i].fs = 0;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 30


 768              		.loc 1 869 0 discriminator 2
 769 0022 0133     		adds	r3, r3, #1
 770              	.LVL94:
 771 0024 012B     		cmp	r3, #1
 772 0026 EDD8     		bhi	.L84
 870:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == fs) Files[i].fs = 0;
 773              		.loc 1 870 0
 774 0028 1A01     		lsls	r2, r3, #4
 775 002a 0349     		ldr	r1, .L85
 776 002c 8A58     		ldr	r2, [r1, r2]
 777 002e 8242     		cmp	r2, r0
 778 0030 F7D1     		bne	.L75
 779 0032 F3E7     		b	.L79
 780              	.L83:
 781              	.LCFI11:
 782              		.cfi_def_cfa_offset 0
 783              		.cfi_restore 4
 784 0034 7047     		bx	lr
 785              	.L86:
 786 0036 00BF     		.align	2
 787              	.L85:
 788 0038 00000000 		.word	.LANCHOR0
 789              		.cfi_endproc
 790              	.LFE155:
 792              		.section	.text.clust2sect,"ax",%progbits
 793              		.align	1
 794              		.syntax unified
 795              		.thumb
 796              		.thumb_func
 797              		.fpu fpv5-sp-d16
 799              	clust2sect:
 800              	.LFB159:
 873:Middlewares/Third_Party/FatFs/src/ff.c **** 
 874:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* _FS_LOCK != 0 */
 875:Middlewares/Third_Party/FatFs/src/ff.c **** 
 876:Middlewares/Third_Party/FatFs/src/ff.c **** 
 877:Middlewares/Third_Party/FatFs/src/ff.c **** 
 878:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 879:Middlewares/Third_Party/FatFs/src/ff.c **** /* Move/Flush disk access window in the file system object               */
 880:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 881:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 882:Middlewares/Third_Party/FatFs/src/ff.c **** static
 883:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT sync_window (	/* Returns FR_OK or FR_DISK_ERROR */
 884:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs			/* File system object */
 885:Middlewares/Third_Party/FatFs/src/ff.c **** )
 886:Middlewares/Third_Party/FatFs/src/ff.c **** {
 887:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD wsect;
 888:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT nf;
 889:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res = FR_OK;
 890:Middlewares/Third_Party/FatFs/src/ff.c **** 
 891:Middlewares/Third_Party/FatFs/src/ff.c **** 
 892:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->wflag) {	/* Write back the sector if it is dirty */
 893:Middlewares/Third_Party/FatFs/src/ff.c **** 		wsect = fs->winsect;	/* Current sector number */
 894:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK) {
 895:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_DISK_ERR;
 896:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 897:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 0;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 31


 898:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (wsect - fs->fatbase < fs->fsize) {		/* Is it in the FAT area? */
 899:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (nf = fs->n_fats; nf >= 2; nf--) {	/* Reflect the change to all FAT copies */
 900:Middlewares/Third_Party/FatFs/src/ff.c **** 					wsect += fs->fsize;
 901:Middlewares/Third_Party/FatFs/src/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 902:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 903:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 904:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 905:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 906:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 907:Middlewares/Third_Party/FatFs/src/ff.c **** }
 908:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 909:Middlewares/Third_Party/FatFs/src/ff.c **** 
 910:Middlewares/Third_Party/FatFs/src/ff.c **** 
 911:Middlewares/Third_Party/FatFs/src/ff.c **** static
 912:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT move_window (	/* Returns FR_OK or FR_DISK_ERROR */
 913:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,			/* File system object */
 914:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD sector		/* Sector number to make appearance in the fs->win[] */
 915:Middlewares/Third_Party/FatFs/src/ff.c **** )
 916:Middlewares/Third_Party/FatFs/src/ff.c **** {
 917:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res = FR_OK;
 918:Middlewares/Third_Party/FatFs/src/ff.c **** 
 919:Middlewares/Third_Party/FatFs/src/ff.c **** 
 920:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (sector != fs->winsect) {	/* Window offset changed? */
 921:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 922:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = sync_window(fs);		/* Write-back changes */
 923:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 924:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {			/* Fill sector window with new data */
 925:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK) {
 926:Middlewares/Third_Party/FatFs/src/ff.c **** 				sector = 0xFFFFFFFF;	/* Invalidate window if data is not reliable */
 927:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_DISK_ERR;
 928:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 929:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->winsect = sector;
 930:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 931:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 932:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 933:Middlewares/Third_Party/FatFs/src/ff.c **** }
 934:Middlewares/Third_Party/FatFs/src/ff.c **** 
 935:Middlewares/Third_Party/FatFs/src/ff.c **** 
 936:Middlewares/Third_Party/FatFs/src/ff.c **** 
 937:Middlewares/Third_Party/FatFs/src/ff.c **** 
 938:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 939:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 940:Middlewares/Third_Party/FatFs/src/ff.c **** /* Synchronize file system and strage device                             */
 941:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 942:Middlewares/Third_Party/FatFs/src/ff.c **** 
 943:Middlewares/Third_Party/FatFs/src/ff.c **** static
 944:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT sync_fs (	/* FR_OK:succeeded, !=0:error */
 945:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs		/* File system object */
 946:Middlewares/Third_Party/FatFs/src/ff.c **** )
 947:Middlewares/Third_Party/FatFs/src/ff.c **** {
 948:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 949:Middlewares/Third_Party/FatFs/src/ff.c **** 
 950:Middlewares/Third_Party/FatFs/src/ff.c **** 
 951:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = sync_window(fs);
 952:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 953:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Update FSInfo sector if needed */
 954:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->fs_type == FS_FAT32 && fs->fsi_flag == 1) {
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 32


 955:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Create FSInfo structure */
 956:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(fs->win, 0, SS(fs));
 957:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(fs->win + BS_55AA, 0xAA55);
 958:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(fs->win + FSI_LeadSig, 0x41615252);
 959:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(fs->win + FSI_StrucSig, 0x61417272);
 960:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(fs->win + FSI_Free_Count, fs->free_clst);
 961:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(fs->win + FSI_Nxt_Free, fs->last_clst);
 962:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Write it into the FSInfo sector */
 963:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->winsect = fs->volbase + 1;
 964:Middlewares/Third_Party/FatFs/src/ff.c **** 			disk_write(fs->drv, fs->win, fs->winsect, 1);
 965:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->fsi_flag = 0;
 966:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 967:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Make sure that no pending write process in the physical drive */
 968:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (disk_ioctl(fs->drv, CTRL_SYNC, 0) != RES_OK) res = FR_DISK_ERR;
 969:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 970:Middlewares/Third_Party/FatFs/src/ff.c **** 
 971:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 972:Middlewares/Third_Party/FatFs/src/ff.c **** }
 973:Middlewares/Third_Party/FatFs/src/ff.c **** 
 974:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 975:Middlewares/Third_Party/FatFs/src/ff.c **** 
 976:Middlewares/Third_Party/FatFs/src/ff.c **** 
 977:Middlewares/Third_Party/FatFs/src/ff.c **** 
 978:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 979:Middlewares/Third_Party/FatFs/src/ff.c **** /* Get sector# from cluster#                                             */
 980:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 981:Middlewares/Third_Party/FatFs/src/ff.c **** 
 982:Middlewares/Third_Party/FatFs/src/ff.c **** static
 983:Middlewares/Third_Party/FatFs/src/ff.c **** DWORD clust2sect (	/* !=0:Sector number, 0:Failed (invalid cluster#) */
 984:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,		/* File system object */
 985:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst		/* Cluster# to be converted */
 986:Middlewares/Third_Party/FatFs/src/ff.c **** )
 987:Middlewares/Third_Party/FatFs/src/ff.c **** {
 801              		.loc 1 987 0
 802              		.cfi_startproc
 803              		@ args = 0, pretend = 0, frame = 0
 804              		@ frame_needed = 0, uses_anonymous_args = 0
 805              		@ link register save eliminated.
 806              	.LVL95:
 988:Middlewares/Third_Party/FatFs/src/ff.c **** 	clst -= 2;
 807              		.loc 1 988 0
 808 0000 0239     		subs	r1, r1, #2
 809              	.LVL96:
 989:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst >= fs->n_fatent - 2) return 0;		/* Invalid cluster# */
 810              		.loc 1 989 0
 811 0002 036A     		ldr	r3, [r0, #32]
 812 0004 023B     		subs	r3, r3, #2
 813 0006 9942     		cmp	r1, r3
 814 0008 04D2     		bcs	.L89
 990:Middlewares/Third_Party/FatFs/src/ff.c **** 	return clst * fs->csize + fs->database;
 815              		.loc 1 990 0
 816 000a 4389     		ldrh	r3, [r0, #10]
 817 000c 406B     		ldr	r0, [r0, #52]
 818              	.LVL97:
 819 000e 03FB0100 		mla	r0, r3, r1, r0
 820 0012 7047     		bx	lr
 821              	.LVL98:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 33


 822              	.L89:
 989:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst >= fs->n_fatent - 2) return 0;		/* Invalid cluster# */
 823              		.loc 1 989 0
 824 0014 0020     		movs	r0, #0
 825              	.LVL99:
 991:Middlewares/Third_Party/FatFs/src/ff.c **** }
 826              		.loc 1 991 0
 827 0016 7047     		bx	lr
 828              		.cfi_endproc
 829              	.LFE159:
 831              		.section	.text.clmt_clust,"ax",%progbits
 832              		.align	1
 833              		.syntax unified
 834              		.thumb
 835              		.thumb_func
 836              		.fpu fpv5-sp-d16
 838              	clmt_clust:
 839              	.LFB164:
 992:Middlewares/Third_Party/FatFs/src/ff.c **** 
 993:Middlewares/Third_Party/FatFs/src/ff.c **** 
 994:Middlewares/Third_Party/FatFs/src/ff.c **** 
 995:Middlewares/Third_Party/FatFs/src/ff.c **** 
 996:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 997:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT access - Read value of a FAT entry                                */
 998:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 999:Middlewares/Third_Party/FatFs/src/ff.c **** 
1000:Middlewares/Third_Party/FatFs/src/ff.c **** static
1001:Middlewares/Third_Party/FatFs/src/ff.c **** DWORD get_fat (	/* 0xFFFFFFFF:Disk error, 1:Internal error, 2..0x7FFFFFFF:Cluster status */
1002:Middlewares/Third_Party/FatFs/src/ff.c **** 	_FDID* obj,	/* Corresponding object */
1003:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst	/* Cluster number to get the value */
1004:Middlewares/Third_Party/FatFs/src/ff.c **** )
1005:Middlewares/Third_Party/FatFs/src/ff.c **** {
1006:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT wc, bc;
1007:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD val;
1008:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = obj->fs;
1009:Middlewares/Third_Party/FatFs/src/ff.c **** 
1010:Middlewares/Third_Party/FatFs/src/ff.c **** 
1011:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) {	/* Check if in valid range */
1012:Middlewares/Third_Party/FatFs/src/ff.c **** 		val = 1;	/* Internal error */
1013:Middlewares/Third_Party/FatFs/src/ff.c **** 
1014:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
1015:Middlewares/Third_Party/FatFs/src/ff.c **** 		val = 0xFFFFFFFF;	/* Default value falls on disk error */
1016:Middlewares/Third_Party/FatFs/src/ff.c **** 
1017:Middlewares/Third_Party/FatFs/src/ff.c **** 		switch (fs->fs_type) {
1018:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT12 :
1019:Middlewares/Third_Party/FatFs/src/ff.c **** 			bc = (UINT)clst; bc += bc / 2;
1020:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
1021:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc = fs->win[bc++ % SS(fs)];
1022:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
1023:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc |= fs->win[bc % SS(fs)] << 8;
1024:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
1025:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
1026:Middlewares/Third_Party/FatFs/src/ff.c **** 
1027:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT16 :
1028:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 2))) != FR_OK) break;
1029:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = ld_word(fs->win + clst * 2 % SS(fs));
1030:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 34


1031:Middlewares/Third_Party/FatFs/src/ff.c **** 
1032:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT32 :
1033:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 4))) != FR_OK) break;
1034:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = ld_dword(fs->win + clst * 4 % SS(fs)) & 0x0FFFFFFF;
1035:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
1036:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
1037:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_EXFAT :
1038:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (obj->objsize) {
1039:Middlewares/Third_Party/FatFs/src/ff.c **** 				DWORD cofs = clst - obj->sclust;	/* Offset from start cluster */
1040:Middlewares/Third_Party/FatFs/src/ff.c **** 				DWORD clen = (DWORD)((obj->objsize - 1) / SS(fs)) / fs->csize;	/* Number of clusters - 1 */
1041:Middlewares/Third_Party/FatFs/src/ff.c **** 
1042:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (obj->stat == 2) {	/* Is there no valid chain on the FAT? */
1043:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (cofs <= clen) {
1044:Middlewares/Third_Party/FatFs/src/ff.c **** 						val = (cofs == clen) ? 0x7FFFFFFF : clst + 1;	/* Generate the value */
1045:Middlewares/Third_Party/FatFs/src/ff.c **** 						break;
1046:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
1047:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
1048:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (obj->stat == 3 && cofs < obj->n_cont) {	/* Is it in the 1st fragment? */
1049:Middlewares/Third_Party/FatFs/src/ff.c **** 					val = clst + 1; 	/* Generate the value */
1050:Middlewares/Third_Party/FatFs/src/ff.c **** 					break;
1051:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
1052:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (obj->stat != 2) {	/* Get value from FAT if FAT chain is valid */
1053:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (obj->n_frag != 0) {	/* Is it on the growing edge? */
1054:Middlewares/Third_Party/FatFs/src/ff.c **** 						val = 0x7FFFFFFF;	/* Generate EOC */
1055:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else {
1056:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 4))) != FR_OK) break;
1057:Middlewares/Third_Party/FatFs/src/ff.c **** 						val = ld_dword(fs->win + clst * 4 % SS(fs)) & 0x7FFFFFFF;
1058:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
1059:Middlewares/Third_Party/FatFs/src/ff.c **** 					break;
1060:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
1061:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1062:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* go to default */
1063:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1064:Middlewares/Third_Party/FatFs/src/ff.c **** 		default:
1065:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = 1;	/* Internal error */
1066:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1067:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1068:Middlewares/Third_Party/FatFs/src/ff.c **** 
1069:Middlewares/Third_Party/FatFs/src/ff.c **** 	return val;
1070:Middlewares/Third_Party/FatFs/src/ff.c **** }
1071:Middlewares/Third_Party/FatFs/src/ff.c **** 
1072:Middlewares/Third_Party/FatFs/src/ff.c **** 
1073:Middlewares/Third_Party/FatFs/src/ff.c **** 
1074:Middlewares/Third_Party/FatFs/src/ff.c **** 
1075:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
1076:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1077:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT access - Change value of a FAT entry                              */
1078:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1079:Middlewares/Third_Party/FatFs/src/ff.c **** 
1080:Middlewares/Third_Party/FatFs/src/ff.c **** static
1081:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT put_fat (	/* FR_OK(0):succeeded, !=0:error */
1082:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,		/* Corresponding file system object */
1083:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst,		/* FAT index number (cluster number) to be changed */
1084:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD val		/* New value to be set to the entry */
1085:Middlewares/Third_Party/FatFs/src/ff.c **** )
1086:Middlewares/Third_Party/FatFs/src/ff.c **** {
1087:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT bc;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 35


1088:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *p;
1089:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res = FR_INT_ERR;
1090:Middlewares/Third_Party/FatFs/src/ff.c **** 
1091:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst >= 2 && clst < fs->n_fatent) {	/* Check if in valid range */
1092:Middlewares/Third_Party/FatFs/src/ff.c **** 		switch (fs->fs_type) {
1093:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT12 :	/* Bitfield items */
1094:Middlewares/Third_Party/FatFs/src/ff.c **** 			bc = (UINT)clst; bc += bc / 2;
1095:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
1096:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
1097:Middlewares/Third_Party/FatFs/src/ff.c **** 			p = fs->win + bc++ % SS(fs);
1098:Middlewares/Third_Party/FatFs/src/ff.c **** 			*p = (clst & 1) ? ((*p & 0x0F) | ((BYTE)val << 4)) : (BYTE)val;
1099:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
1100:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
1101:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
1102:Middlewares/Third_Party/FatFs/src/ff.c **** 			p = fs->win + bc % SS(fs);
1103:Middlewares/Third_Party/FatFs/src/ff.c **** 			*p = (clst & 1) ? (BYTE)(val >> 4) : ((*p & 0xF0) | ((BYTE)(val >> 8) & 0x0F));
1104:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
1105:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
1106:Middlewares/Third_Party/FatFs/src/ff.c **** 
1107:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT16 :	/* WORD aligned items */
1108:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)));
1109:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
1110:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(fs->win + clst * 2 % SS(fs), (WORD)val);
1111:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
1112:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
1113:Middlewares/Third_Party/FatFs/src/ff.c **** 
1114:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT32 :	/* DWORD aligned items */
1115:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
1116:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_EXFAT :
1117:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1118:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)));
1119:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
1120:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!_FS_EXFAT || fs->fs_type != FS_EXFAT) {
1121:Middlewares/Third_Party/FatFs/src/ff.c **** 				val = (val & 0x0FFFFFFF) | (ld_dword(fs->win + clst * 4 % SS(fs)) & 0xF0000000);
1122:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1123:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(fs->win + clst * 4 % SS(fs), val);
1124:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
1125:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
1126:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1127:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1128:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
1129:Middlewares/Third_Party/FatFs/src/ff.c **** }
1130:Middlewares/Third_Party/FatFs/src/ff.c **** 
1131:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
1132:Middlewares/Third_Party/FatFs/src/ff.c **** 
1133:Middlewares/Third_Party/FatFs/src/ff.c **** 
1134:Middlewares/Third_Party/FatFs/src/ff.c **** 
1135:Middlewares/Third_Party/FatFs/src/ff.c **** 
1136:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT && !_FS_READONLY
1137:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1138:Middlewares/Third_Party/FatFs/src/ff.c **** /* exFAT: Accessing FAT and Allocation Bitmap                            */
1139:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1140:Middlewares/Third_Party/FatFs/src/ff.c **** 
1141:Middlewares/Third_Party/FatFs/src/ff.c **** /*--------------------------------------*/
1142:Middlewares/Third_Party/FatFs/src/ff.c **** /* Find a contiguous free cluster block */
1143:Middlewares/Third_Party/FatFs/src/ff.c **** /*--------------------------------------*/
1144:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 36


1145:Middlewares/Third_Party/FatFs/src/ff.c **** static
1146:Middlewares/Third_Party/FatFs/src/ff.c **** DWORD find_bitmap (	/* 0:Not found, 2..:Cluster block found, 0xFFFFFFFF:Disk error */
1147:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,	/* File system object */
1148:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst,	/* Cluster number to scan from */
1149:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD ncl	/* Number of contiguous clusters to find (1..) */
1150:Middlewares/Third_Party/FatFs/src/ff.c **** )
1151:Middlewares/Third_Party/FatFs/src/ff.c **** {
1152:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE bm, bv;
1153:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
1154:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD val, scl, ctr;
1155:Middlewares/Third_Party/FatFs/src/ff.c **** 
1156:Middlewares/Third_Party/FatFs/src/ff.c **** 
1157:Middlewares/Third_Party/FatFs/src/ff.c **** 	clst -= 2;	/* The first bit in the bitmap corresponds to cluster #2 */
1158:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst >= fs->n_fatent - 2) clst = 0;
1159:Middlewares/Third_Party/FatFs/src/ff.c **** 	scl = val = clst; ctr = 0;
1160:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (;;) {
1161:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (move_window(fs, fs->database + val / 8 / SS(fs)) != FR_OK) return 0xFFFFFFFF;	/* (assuming bi
1162:Middlewares/Third_Party/FatFs/src/ff.c **** 		i = val / 8 % SS(fs); bm = 1 << (val % 8);
1163:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
1164:Middlewares/Third_Party/FatFs/src/ff.c **** 			do {
1165:Middlewares/Third_Party/FatFs/src/ff.c **** 				bv = fs->win[i] & bm; bm <<= 1;		/* Get bit value */
1166:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (++val >= fs->n_fatent - 2) {	/* Next cluster (with wrap-around) */
1167:Middlewares/Third_Party/FatFs/src/ff.c **** 					val = 0; bm = 0; i = SS(fs);
1168:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
1169:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!bv) {	/* Is it a free cluster? */
1170:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (++ctr == ncl) return scl + 2;	/* Check if run length is sufficient for required */
1171:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
1172:Middlewares/Third_Party/FatFs/src/ff.c **** 					scl = val; ctr = 0;		/* Encountered a cluster in-use, restart to scan */
1173:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
1174:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (val == clst) return 0;	/* All cluster scanned? */
1175:Middlewares/Third_Party/FatFs/src/ff.c **** 			} while (bm);
1176:Middlewares/Third_Party/FatFs/src/ff.c **** 			bm = 1;
1177:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (++i < SS(fs));
1178:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1179:Middlewares/Third_Party/FatFs/src/ff.c **** }
1180:Middlewares/Third_Party/FatFs/src/ff.c **** 
1181:Middlewares/Third_Party/FatFs/src/ff.c **** 
1182:Middlewares/Third_Party/FatFs/src/ff.c **** /*----------------------------------------*/
1183:Middlewares/Third_Party/FatFs/src/ff.c **** /* Set/Clear a block of allocation bitmap */
1184:Middlewares/Third_Party/FatFs/src/ff.c **** /*----------------------------------------*/
1185:Middlewares/Third_Party/FatFs/src/ff.c **** 
1186:Middlewares/Third_Party/FatFs/src/ff.c **** static
1187:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT change_bitmap (
1188:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,	/* File system object */
1189:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst,	/* Cluster number to change from */
1190:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD ncl,	/* Number of clusters to be changed */
1191:Middlewares/Third_Party/FatFs/src/ff.c **** 	int bv		/* bit value to be set (0 or 1) */
1192:Middlewares/Third_Party/FatFs/src/ff.c **** )
1193:Middlewares/Third_Party/FatFs/src/ff.c **** {
1194:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE bm;
1195:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
1196:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD sect;
1197:Middlewares/Third_Party/FatFs/src/ff.c **** 
1198:Middlewares/Third_Party/FatFs/src/ff.c **** 	clst -= 2;	/* The first bit corresponds to cluster #2 */
1199:Middlewares/Third_Party/FatFs/src/ff.c **** 	sect = fs->database + clst / 8 / SS(fs);	/* Sector address (assuming bitmap is located top of the 
1200:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = clst / 8 % SS(fs);						/* Byte offset in the sector */
1201:Middlewares/Third_Party/FatFs/src/ff.c **** 	bm = 1 << (clst % 8);						/* Bit mask in the byte */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 37


1202:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (;;) {
1203:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (move_window(fs, sect++) != FR_OK) return FR_DISK_ERR;
1204:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
1205:Middlewares/Third_Party/FatFs/src/ff.c **** 			do {
1206:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (bv == (int)((fs->win[i] & bm) != 0)) return FR_INT_ERR;	/* Is the bit expected value? */
1207:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->win[i] ^= bm;	/* Flip the bit */
1208:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->wflag = 1;
1209:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (--ncl == 0) return FR_OK;	/* All bits processed? */
1210:Middlewares/Third_Party/FatFs/src/ff.c **** 			} while (bm <<= 1);		/* Next bit */
1211:Middlewares/Third_Party/FatFs/src/ff.c **** 			bm = 1;
1212:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (++i < SS(fs));		/* Next byte */
1213:Middlewares/Third_Party/FatFs/src/ff.c **** 		i = 0;
1214:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1215:Middlewares/Third_Party/FatFs/src/ff.c **** }
1216:Middlewares/Third_Party/FatFs/src/ff.c **** 
1217:Middlewares/Third_Party/FatFs/src/ff.c **** 
1218:Middlewares/Third_Party/FatFs/src/ff.c **** /*---------------------------------------------*/
1219:Middlewares/Third_Party/FatFs/src/ff.c **** /* Fill the first fragment of the FAT chain    */
1220:Middlewares/Third_Party/FatFs/src/ff.c **** /*---------------------------------------------*/
1221:Middlewares/Third_Party/FatFs/src/ff.c **** 
1222:Middlewares/Third_Party/FatFs/src/ff.c **** static
1223:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT fill_first_frag (
1224:Middlewares/Third_Party/FatFs/src/ff.c **** 	_FDID* obj	/* Pointer to the corresponding object */
1225:Middlewares/Third_Party/FatFs/src/ff.c **** )
1226:Middlewares/Third_Party/FatFs/src/ff.c **** {
1227:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
1228:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD cl, n;
1229:Middlewares/Third_Party/FatFs/src/ff.c **** 
1230:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (obj->stat == 3) {	/* Has the object been changed 'fragmented'? */
1231:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (cl = obj->sclust, n = obj->n_cont; n; cl++, n--) {	/* Create cluster chain on the FAT */
1232:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = put_fat(obj->fs, cl, cl + 1);
1233:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) return res;
1234:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1235:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->stat = 0;	/* Change status 'FAT chain is valid' */
1236:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1237:Middlewares/Third_Party/FatFs/src/ff.c **** 	return FR_OK;
1238:Middlewares/Third_Party/FatFs/src/ff.c **** }
1239:Middlewares/Third_Party/FatFs/src/ff.c **** 
1240:Middlewares/Third_Party/FatFs/src/ff.c **** 
1241:Middlewares/Third_Party/FatFs/src/ff.c **** /*---------------------------------------------*/
1242:Middlewares/Third_Party/FatFs/src/ff.c **** /* Fill the last fragment of the FAT chain     */
1243:Middlewares/Third_Party/FatFs/src/ff.c **** /*---------------------------------------------*/
1244:Middlewares/Third_Party/FatFs/src/ff.c **** 
1245:Middlewares/Third_Party/FatFs/src/ff.c **** static
1246:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT fill_last_frag (
1247:Middlewares/Third_Party/FatFs/src/ff.c **** 	_FDID* obj,	/* Pointer to the corresponding object */
1248:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD lcl,	/* Last cluster of the fragment */
1249:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD term	/* Value to set the last FAT entry */
1250:Middlewares/Third_Party/FatFs/src/ff.c **** )
1251:Middlewares/Third_Party/FatFs/src/ff.c **** {
1252:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
1253:Middlewares/Third_Party/FatFs/src/ff.c **** 
1254:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (obj->n_frag > 0) {	/* Create the last chain on the FAT */
1255:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = put_fat(obj->fs, lcl - obj->n_frag + 1, (obj->n_frag > 1) ? lcl - obj->n_frag + 2 : term);
1256:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) return res;
1257:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->n_frag--;
1258:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 38


1259:Middlewares/Third_Party/FatFs/src/ff.c **** 	return FR_OK;
1260:Middlewares/Third_Party/FatFs/src/ff.c **** }
1261:Middlewares/Third_Party/FatFs/src/ff.c **** 
1262:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* _FS_EXFAT && !_FS_READONLY */
1263:Middlewares/Third_Party/FatFs/src/ff.c **** 
1264:Middlewares/Third_Party/FatFs/src/ff.c **** 
1265:Middlewares/Third_Party/FatFs/src/ff.c **** 
1266:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
1267:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1268:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT handling - Remove a cluster chain                                 */
1269:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1270:Middlewares/Third_Party/FatFs/src/ff.c **** static
1271:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT remove_chain (	/* FR_OK(0):succeeded, !=0:error */
1272:Middlewares/Third_Party/FatFs/src/ff.c **** 	_FDID* obj,			/* Corresponding object */
1273:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst,			/* Cluster to remove a chain from */
1274:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD pclst			/* Previous cluster of clst (0:an entire chain) */
1275:Middlewares/Third_Party/FatFs/src/ff.c **** )
1276:Middlewares/Third_Party/FatFs/src/ff.c **** {
1277:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res = FR_OK;
1278:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD nxt;
1279:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = obj->fs;
1280:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT || _USE_TRIM
1281:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD scl = clst, ecl = clst;
1282:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1283:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_TRIM
1284:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD rt[2];
1285:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1286:Middlewares/Third_Party/FatFs/src/ff.c **** 
1287:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) return FR_INT_ERR;	/* Check if in valid range */
1288:Middlewares/Third_Party/FatFs/src/ff.c **** 
1289:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Mark the previous cluster 'EOC' on the FAT if it exists */
1290:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (pclst && (!_FS_EXFAT || fs->fs_type != FS_EXFAT || obj->stat != 2)) {
1291:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = put_fat(fs, pclst, 0xFFFFFFFF);
1292:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) return res;
1293:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1294:Middlewares/Third_Party/FatFs/src/ff.c **** 
1295:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Remove the chain */
1296:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
1297:Middlewares/Third_Party/FatFs/src/ff.c **** 		nxt = get_fat(obj, clst);			/* Get cluster status */
1298:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nxt == 0) break;				/* Empty cluster? */
1299:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nxt == 1) return FR_INT_ERR;	/* Internal error? */
1300:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nxt == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error? */
1301:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!_FS_EXFAT || fs->fs_type != FS_EXFAT) {
1302:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = put_fat(fs, clst, 0);		/* Mark the cluster 'free' on the FAT */
1303:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) return res;
1304:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1305:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->free_clst < fs->n_fatent - 2) {	/* Update FSINFO */
1306:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->free_clst++;
1307:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->fsi_flag |= 1;
1308:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1309:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT || _USE_TRIM
1310:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ecl + 1 == nxt) {	/* Is next cluster contiguous? */
1311:Middlewares/Third_Party/FatFs/src/ff.c **** 			ecl = nxt;
1312:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {				/* End of contiguous cluster block */
1313:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
1314:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->fs_type == FS_EXFAT) {
1315:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = change_bitmap(fs, scl, ecl - scl + 1, 0);	/* Mark the cluster block 'free' on the bitmap 
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 39


1316:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res != FR_OK) return res;
1317:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1318:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1319:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_TRIM
1320:Middlewares/Third_Party/FatFs/src/ff.c **** 			rt[0] = clust2sect(fs, scl);					/* Start sector */
1321:Middlewares/Third_Party/FatFs/src/ff.c **** 			rt[1] = clust2sect(fs, ecl) + fs->csize - 1;	/* End sector */
1322:Middlewares/Third_Party/FatFs/src/ff.c **** 			disk_ioctl(fs->drv, CTRL_TRIM, rt);				/* Inform device the block can be erased */
1323:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1324:Middlewares/Third_Party/FatFs/src/ff.c **** 			scl = ecl = nxt;
1325:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1326:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1327:Middlewares/Third_Party/FatFs/src/ff.c **** 		clst = nxt;					/* Next cluster */
1328:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (clst < fs->n_fatent);	/* Repeat while not the last link */
1329:Middlewares/Third_Party/FatFs/src/ff.c **** 
1330:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
1331:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_EXFAT) {
1332:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (pclst == 0) {	/* Does the object have no chain? */
1333:Middlewares/Third_Party/FatFs/src/ff.c **** 			obj->stat = 0;		/* Change the object status 'initial' */
1334:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
1335:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (obj->stat == 3 && pclst >= obj->sclust && pclst <= obj->sclust + obj->n_cont) {	/* Did the c
1336:Middlewares/Third_Party/FatFs/src/ff.c **** 				obj->stat = 2;	/* Change the object status 'contiguous' */
1337:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1338:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1339:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1340:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1341:Middlewares/Third_Party/FatFs/src/ff.c **** 	return FR_OK;
1342:Middlewares/Third_Party/FatFs/src/ff.c **** }
1343:Middlewares/Third_Party/FatFs/src/ff.c **** 
1344:Middlewares/Third_Party/FatFs/src/ff.c **** 
1345:Middlewares/Third_Party/FatFs/src/ff.c **** 
1346:Middlewares/Third_Party/FatFs/src/ff.c **** 
1347:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1348:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT handling - Stretch a chain or Create a new chain                  */
1349:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1350:Middlewares/Third_Party/FatFs/src/ff.c **** static
1351:Middlewares/Third_Party/FatFs/src/ff.c **** DWORD create_chain (	/* 0:No free cluster, 1:Internal error, 0xFFFFFFFF:Disk error, >=2:New cluster
1352:Middlewares/Third_Party/FatFs/src/ff.c **** 	_FDID* obj,			/* Corresponding object */
1353:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst			/* Cluster# to stretch, 0:Create a new chain */
1354:Middlewares/Third_Party/FatFs/src/ff.c **** )
1355:Middlewares/Third_Party/FatFs/src/ff.c **** {
1356:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD cs, ncl, scl;
1357:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
1358:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = obj->fs;
1359:Middlewares/Third_Party/FatFs/src/ff.c **** 
1360:Middlewares/Third_Party/FatFs/src/ff.c **** 
1361:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst == 0) {	/* Create a new chain */
1362:Middlewares/Third_Party/FatFs/src/ff.c **** 		scl = fs->last_clst;				/* Get suggested cluster to start from */
1363:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (scl == 0 || scl >= fs->n_fatent) scl = 1;
1364:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1365:Middlewares/Third_Party/FatFs/src/ff.c **** 	else {				/* Stretch current chain */
1366:Middlewares/Third_Party/FatFs/src/ff.c **** 		cs = get_fat(obj, clst);			/* Check the cluster status */
1367:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs < 2) return 1;				/* Invalid FAT value */
1368:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs == 0xFFFFFFFF) return cs;	/* A disk error occurred */
1369:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs < fs->n_fatent) return cs;	/* It is already followed by next cluster */
1370:Middlewares/Third_Party/FatFs/src/ff.c **** 		scl = clst;
1371:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1372:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 40


1373:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
1374:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_EXFAT) {	/* On the exFAT volume */
1375:Middlewares/Third_Party/FatFs/src/ff.c **** 		ncl = find_bitmap(fs, scl, 1);				/* Find a free cluster */
1376:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ncl == 0 || ncl == 0xFFFFFFFF) return ncl;	/* No free cluster or hard error? */
1377:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = change_bitmap(fs, ncl, 1, 1);			/* Mark the cluster 'in use' */
1378:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_INT_ERR) return 1;
1379:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_DISK_ERR) return 0xFFFFFFFF;
1380:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (clst == 0) {							/* Is it a new chain? */
1381:Middlewares/Third_Party/FatFs/src/ff.c **** 			obj->stat = 2;							/* Set status 'contiguous' */
1382:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {									/* It is a stretched chain */
1383:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (obj->stat == 2 && ncl != scl + 1) {	/* Is the chain got fragmented? */
1384:Middlewares/Third_Party/FatFs/src/ff.c **** 				obj->n_cont = scl - obj->sclust;	/* Set size of the contiguous part */
1385:Middlewares/Third_Party/FatFs/src/ff.c **** 				obj->stat = 3;						/* Change status 'just fragmented' */
1386:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1387:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1388:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (obj->stat != 2) {	/* Is the file non-contiguous? */
1389:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ncl == clst + 1) {	/* Is the cluster next to previous one? */
1390:Middlewares/Third_Party/FatFs/src/ff.c **** 				obj->n_frag = obj->n_frag ? obj->n_frag + 1 : 2;	/* Increment size of last framgent */
1391:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {				/* New fragment */
1392:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (obj->n_frag == 0) obj->n_frag = 1;
1393:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = fill_last_frag(obj, clst, ncl);	/* Fill last fragment on the FAT and link it to new one *
1394:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) obj->n_frag = 1;
1395:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1396:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1397:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else
1398:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1399:Middlewares/Third_Party/FatFs/src/ff.c **** 	{	/* On the FAT12/16/32 volume */
1400:Middlewares/Third_Party/FatFs/src/ff.c **** 		ncl = scl;	/* Start cluster */
1401:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (;;) {
1402:Middlewares/Third_Party/FatFs/src/ff.c **** 			ncl++;							/* Next cluster */
1403:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ncl >= fs->n_fatent) {		/* Check wrap-around */
1404:Middlewares/Third_Party/FatFs/src/ff.c **** 				ncl = 2;
1405:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (ncl > scl) return 0;	/* No free cluster */
1406:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1407:Middlewares/Third_Party/FatFs/src/ff.c **** 			cs = get_fat(obj, ncl);			/* Get the cluster status */
1408:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cs == 0) break;				/* Found a free cluster */
1409:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cs == 1 || cs == 0xFFFFFFFF) return cs;	/* An error occurred */
1410:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ncl == scl) return 0;		/* No free cluster */
1411:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1412:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = put_fat(fs, ncl, 0xFFFFFFFF);	/* Mark the new cluster 'EOC' */
1413:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK && clst != 0) {
1414:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = put_fat(fs, clst, ncl);	/* Link it from the previous one if needed */
1415:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1416:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1417:Middlewares/Third_Party/FatFs/src/ff.c **** 
1418:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {			/* Update FSINFO if function succeeded. */
1419:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->last_clst = ncl;
1420:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->free_clst <= fs->n_fatent - 2) fs->free_clst--;
1421:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsi_flag |= 1;
1422:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
1423:Middlewares/Third_Party/FatFs/src/ff.c **** 		ncl = (res == FR_DISK_ERR) ? 0xFFFFFFFF : 1;	/* Failed. Generate error status */
1424:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1425:Middlewares/Third_Party/FatFs/src/ff.c **** 
1426:Middlewares/Third_Party/FatFs/src/ff.c **** 	return ncl;		/* Return new cluster number or error status */
1427:Middlewares/Third_Party/FatFs/src/ff.c **** }
1428:Middlewares/Third_Party/FatFs/src/ff.c **** 
1429:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 41


1430:Middlewares/Third_Party/FatFs/src/ff.c **** 
1431:Middlewares/Third_Party/FatFs/src/ff.c **** 
1432:Middlewares/Third_Party/FatFs/src/ff.c **** 
1433:Middlewares/Third_Party/FatFs/src/ff.c **** 
1434:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FASTSEEK
1435:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1436:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT handling - Convert offset into cluster with link map table        */
1437:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1438:Middlewares/Third_Party/FatFs/src/ff.c **** 
1439:Middlewares/Third_Party/FatFs/src/ff.c **** static
1440:Middlewares/Third_Party/FatFs/src/ff.c **** DWORD clmt_clust (	/* <2:Error, >=2:Cluster number */
1441:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp,		/* Pointer to the file object */
1442:Middlewares/Third_Party/FatFs/src/ff.c **** 	FSIZE_t ofs		/* File offset to be converted to cluster# */
1443:Middlewares/Third_Party/FatFs/src/ff.c **** )
1444:Middlewares/Third_Party/FatFs/src/ff.c **** {
 840              		.loc 1 1444 0
 841              		.cfi_startproc
 842              		@ args = 0, pretend = 0, frame = 0
 843              		@ frame_needed = 0, uses_anonymous_args = 0
 844              		@ link register save eliminated.
 845              	.LVL100:
1445:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD cl, ncl, *tbl;
1446:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = fp->obj.fs;
 846              		.loc 1 1446 0
 847 0000 0268     		ldr	r2, [r0]
 848              	.LVL101:
1447:Middlewares/Third_Party/FatFs/src/ff.c **** 
1448:Middlewares/Third_Party/FatFs/src/ff.c **** 
1449:Middlewares/Third_Party/FatFs/src/ff.c **** 	tbl = fp->cltbl + 1;	/* Top of CLMT */
 849              		.loc 1 1449 0
 850 0002 C36A     		ldr	r3, [r0, #44]
 851 0004 0433     		adds	r3, r3, #4
 852              	.LVL102:
1450:Middlewares/Third_Party/FatFs/src/ff.c **** 	cl = (DWORD)(ofs / SS(fs) / fs->csize);	/* Cluster order from top of the file */
 853              		.loc 1 1450 0
 854 0006 490A     		lsrs	r1, r1, #9
 855              	.LVL103:
 856 0008 5289     		ldrh	r2, [r2, #10]
 857              	.LVL104:
 858 000a B1FBF2F1 		udiv	r1, r1, r2
 859              	.LVL105:
 860              	.L93:
1451:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (;;) {
1452:Middlewares/Third_Party/FatFs/src/ff.c **** 		ncl = *tbl++;			/* Number of cluters in the fragment */
 861              		.loc 1 1452 0
 862 000e 1868     		ldr	r0, [r3]
 863              	.LVL106:
1453:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ncl == 0) return 0;	/* End of table? (error) */
 864              		.loc 1 1453 0
 865 0010 30B1     		cbz	r0, .L90
1454:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cl < ncl) break;	/* In this fragment? */
 866              		.loc 1 1454 0
 867 0012 8142     		cmp	r1, r0
 868 0014 02D3     		bcc	.L92
1455:Middlewares/Third_Party/FatFs/src/ff.c **** 		cl -= ncl; tbl++;		/* Next fragment */
 869              		.loc 1 1455 0
 870 0016 091A     		subs	r1, r1, r0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 42


 871              	.LVL107:
 872 0018 0833     		adds	r3, r3, #8
 873              	.LVL108:
1452:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ncl == 0) return 0;	/* End of table? (error) */
 874              		.loc 1 1452 0
 875 001a F8E7     		b	.L93
 876              	.LVL109:
 877              	.L92:
1456:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1457:Middlewares/Third_Party/FatFs/src/ff.c **** 	return cl + *tbl;	/* Return the cluster number */
 878              		.loc 1 1457 0
 879 001c 5868     		ldr	r0, [r3, #4]
 880              	.LVL110:
 881 001e 0844     		add	r0, r0, r1
 882              	.L90:
1458:Middlewares/Third_Party/FatFs/src/ff.c **** }
 883              		.loc 1 1458 0
 884 0020 7047     		bx	lr
 885              		.cfi_endproc
 886              	.LFE164:
 888              		.section	.text.ld_clust,"ax",%progbits
 889              		.align	1
 890              		.syntax unified
 891              		.thumb
 892              		.thumb_func
 893              		.fpu fpv5-sp-d16
 895              	ld_clust:
 896              	.LFB168:
1459:Middlewares/Third_Party/FatFs/src/ff.c **** 
1460:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* _USE_FASTSEEK */
1461:Middlewares/Third_Party/FatFs/src/ff.c **** 
1462:Middlewares/Third_Party/FatFs/src/ff.c **** 
1463:Middlewares/Third_Party/FatFs/src/ff.c **** 
1464:Middlewares/Third_Party/FatFs/src/ff.c **** 
1465:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1466:Middlewares/Third_Party/FatFs/src/ff.c **** /* Directory handling - Set directory index                              */
1467:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1468:Middlewares/Third_Party/FatFs/src/ff.c **** 
1469:Middlewares/Third_Party/FatFs/src/ff.c **** static
1470:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT dir_sdi (	/* FR_OK(0):succeeded, !=0:error */
1471:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,		/* Pointer to directory object */
1472:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD ofs		/* Offset of directory table */
1473:Middlewares/Third_Party/FatFs/src/ff.c **** )
1474:Middlewares/Third_Party/FatFs/src/ff.c **** {
1475:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD csz, clst;
1476:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = dp->obj.fs;
1477:Middlewares/Third_Party/FatFs/src/ff.c **** 
1478:Middlewares/Third_Party/FatFs/src/ff.c **** 
1479:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (ofs >= (DWORD)((_FS_EXFAT && fs->fs_type == FS_EXFAT) ? MAX_DIR_EX : MAX_DIR) || ofs % SZDIRE)
1480:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_INT_ERR;
1481:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1482:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->dptr = ofs;				/* Set current offset */
1483:Middlewares/Third_Party/FatFs/src/ff.c **** 	clst = dp->obj.sclust;		/* Table start cluster (0:root) */
1484:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst == 0 && fs->fs_type >= FS_FAT32) {	/* Replace cluster# 0 with root cluster# */
1485:Middlewares/Third_Party/FatFs/src/ff.c **** 		clst = fs->dirbase;
1486:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_EXFAT) dp->obj.stat = 0;	/* exFAT: Root dir has an FAT chain */
1487:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 43


1488:Middlewares/Third_Party/FatFs/src/ff.c **** 
1489:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst == 0) {	/* Static table (root-directory in FAT12/16) */
1490:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs / SZDIRE >= fs->n_rootdir)	return FR_INT_ERR;	/* Is index out of range? */
1491:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->sect = fs->dirbase;
1492:Middlewares/Third_Party/FatFs/src/ff.c **** 
1493:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {			/* Dynamic table (sub-directory or root-directory in FAT32+) */
1494:Middlewares/Third_Party/FatFs/src/ff.c **** 		csz = (DWORD)fs->csize * SS(fs);	/* Bytes per cluster */
1495:Middlewares/Third_Party/FatFs/src/ff.c **** 		while (ofs >= csz) {				/* Follow cluster chain */
1496:Middlewares/Third_Party/FatFs/src/ff.c **** 			clst = get_fat(&dp->obj, clst);				/* Get next cluster */
1497:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
1498:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (clst < 2 || clst >= fs->n_fatent) return FR_INT_ERR;	/* Reached to end of table or internal 
1499:Middlewares/Third_Party/FatFs/src/ff.c **** 			ofs -= csz;
1500:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1501:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->sect = clust2sect(fs, clst);
1502:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1503:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->clust = clst;					/* Current cluster# */
1504:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!dp->sect) return FR_INT_ERR;
1505:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->sect += ofs / SS(fs);			/* Sector# of the directory entry */
1506:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->dir = fs->win + (ofs % SS(fs));	/* Pointer to the entry in the win[] */
1507:Middlewares/Third_Party/FatFs/src/ff.c **** 
1508:Middlewares/Third_Party/FatFs/src/ff.c **** 	return FR_OK;
1509:Middlewares/Third_Party/FatFs/src/ff.c **** }
1510:Middlewares/Third_Party/FatFs/src/ff.c **** 
1511:Middlewares/Third_Party/FatFs/src/ff.c **** 
1512:Middlewares/Third_Party/FatFs/src/ff.c **** 
1513:Middlewares/Third_Party/FatFs/src/ff.c **** 
1514:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1515:Middlewares/Third_Party/FatFs/src/ff.c **** /* Directory handling - Move directory table index next                  */
1516:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1517:Middlewares/Third_Party/FatFs/src/ff.c **** 
1518:Middlewares/Third_Party/FatFs/src/ff.c **** static
1519:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT dir_next (	/* FR_OK(0):succeeded, FR_NO_FILE:End of table, FR_DENIED:Could not stretch */
1520:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,		/* Pointer to the directory object */
1521:Middlewares/Third_Party/FatFs/src/ff.c **** 	int stretch		/* 0: Do not stretch table, 1: Stretch table if needed */
1522:Middlewares/Third_Party/FatFs/src/ff.c **** )
1523:Middlewares/Third_Party/FatFs/src/ff.c **** {
1524:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD ofs, clst;
1525:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = dp->obj.fs;
1526:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
1527:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT n;
1528:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1529:Middlewares/Third_Party/FatFs/src/ff.c **** 
1530:Middlewares/Third_Party/FatFs/src/ff.c **** 	ofs = dp->dptr + SZDIRE;	/* Next entry */
1531:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!dp->sect || ofs >= (DWORD)((_FS_EXFAT && fs->fs_type == FS_EXFAT) ? MAX_DIR_EX : MAX_DIR)) re
1532:Middlewares/Third_Party/FatFs/src/ff.c **** 
1533:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (ofs % SS(fs) == 0) {	/* Sector changed? */
1534:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->sect++;				/* Next sector */
1535:Middlewares/Third_Party/FatFs/src/ff.c **** 
1536:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!dp->clust) {		/* Static table */
1537:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ofs / SZDIRE >= fs->n_rootdir) {	/* Report EOT if it reached end of static table */
1538:Middlewares/Third_Party/FatFs/src/ff.c **** 				dp->sect = 0; return FR_NO_FILE;
1539:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1540:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1541:Middlewares/Third_Party/FatFs/src/ff.c **** 		else {					/* Dynamic table */
1542:Middlewares/Third_Party/FatFs/src/ff.c **** 			if ((ofs / SS(fs) & (fs->csize - 1)) == 0) {		/* Cluster changed? */
1543:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = get_fat(&dp->obj, dp->clust);			/* Get next cluster */
1544:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst <= 1) return FR_INT_ERR;				/* Internal error */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 44


1545:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;		/* Disk error */
1546:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst >= fs->n_fatent) {						/* Reached end of dynamic table */
1547:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
1548:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!stretch) {								/* If no stretch, report EOT */
1549:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->sect = 0; return FR_NO_FILE;
1550:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
1551:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = create_chain(&dp->obj, dp->clust);	/* Allocate a cluster */
1552:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0) return FR_DENIED;			/* No free cluster */
1553:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 1) return FR_INT_ERR;			/* Internal error */
1554:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
1555:Middlewares/Third_Party/FatFs/src/ff.c **** 					/* Clean-up the stretched table */
1556:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (_FS_EXFAT) dp->obj.stat |= 4;			/* The directory needs to be updated */
1557:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (sync_window(fs) != FR_OK) return FR_DISK_ERR;	/* Flush disk access window */
1558:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_set(fs->win, 0, SS(fs));				/* Clear window buffer */
1559:Middlewares/Third_Party/FatFs/src/ff.c **** 					for (n = 0, fs->winsect = clust2sect(fs, clst); n < fs->csize; n++, fs->winsect++) {	/* Fill t
1560:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->wflag = 1;
1561:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (sync_window(fs) != FR_OK) return FR_DISK_ERR;
1562:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
1563:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->winsect -= n;							/* Restore window offset */
1564:Middlewares/Third_Party/FatFs/src/ff.c **** #else
1565:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!stretch) dp->sect = 0;					/* (this line is to suppress compiler warning) */
1566:Middlewares/Third_Party/FatFs/src/ff.c **** 					dp->sect = 0; return FR_NO_FILE;			/* Report EOT */
1567:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1568:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
1569:Middlewares/Third_Party/FatFs/src/ff.c **** 				dp->clust = clst;		/* Initialize data for new cluster */
1570:Middlewares/Third_Party/FatFs/src/ff.c **** 				dp->sect = clust2sect(fs, clst);
1571:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1572:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1573:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1574:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->dptr = ofs;						/* Current entry */
1575:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->dir = fs->win + ofs % SS(fs);	/* Pointer to the entry in the win[] */
1576:Middlewares/Third_Party/FatFs/src/ff.c **** 
1577:Middlewares/Third_Party/FatFs/src/ff.c **** 	return FR_OK;
1578:Middlewares/Third_Party/FatFs/src/ff.c **** }
1579:Middlewares/Third_Party/FatFs/src/ff.c **** 
1580:Middlewares/Third_Party/FatFs/src/ff.c **** 
1581:Middlewares/Third_Party/FatFs/src/ff.c **** 
1582:Middlewares/Third_Party/FatFs/src/ff.c **** 
1583:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
1584:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1585:Middlewares/Third_Party/FatFs/src/ff.c **** /* Directory handling - Reserve a block of directory entries             */
1586:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1587:Middlewares/Third_Party/FatFs/src/ff.c **** 
1588:Middlewares/Third_Party/FatFs/src/ff.c **** static
1589:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT dir_alloc (	/* FR_OK(0):succeeded, !=0:error */
1590:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,		/* Pointer to the directory object */
1591:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT nent		/* Number of contiguous entries to allocate */
1592:Middlewares/Third_Party/FatFs/src/ff.c **** )
1593:Middlewares/Third_Party/FatFs/src/ff.c **** {
1594:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
1595:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT n;
1596:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = dp->obj.fs;
1597:Middlewares/Third_Party/FatFs/src/ff.c **** 
1598:Middlewares/Third_Party/FatFs/src/ff.c **** 
1599:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = dir_sdi(dp, 0);
1600:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
1601:Middlewares/Third_Party/FatFs/src/ff.c **** 		n = 0;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 45


1602:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
1603:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(fs, dp->sect);
1604:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
1605:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
1606:Middlewares/Third_Party/FatFs/src/ff.c **** 			if ((fs->fs_type == FS_EXFAT) ? (int)((dp->dir[XDIR_Type] & 0x80) == 0) : (int)(dp->dir[DIR_Name
1607:Middlewares/Third_Party/FatFs/src/ff.c **** #else
1608:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dp->dir[DIR_Name] == DDEM || dp->dir[DIR_Name] == 0) {
1609:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1610:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (++n == nent) break;	/* A block of contiguous free entries is found */
1611:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
1612:Middlewares/Third_Party/FatFs/src/ff.c **** 				n = 0;					/* Not a blank entry. Restart to search */
1613:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1614:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_next(dp, 1);
1615:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (res == FR_OK);	/* Next entry with table stretch enabled */
1616:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1617:Middlewares/Third_Party/FatFs/src/ff.c **** 
1618:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_NO_FILE) res = FR_DENIED;	/* No directory entry to allocate */
1619:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
1620:Middlewares/Third_Party/FatFs/src/ff.c **** }
1621:Middlewares/Third_Party/FatFs/src/ff.c **** 
1622:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* !_FS_READONLY */
1623:Middlewares/Third_Party/FatFs/src/ff.c **** 
1624:Middlewares/Third_Party/FatFs/src/ff.c **** 
1625:Middlewares/Third_Party/FatFs/src/ff.c **** 
1626:Middlewares/Third_Party/FatFs/src/ff.c **** 
1627:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1628:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT: Directory handling - Load/Store start cluster number             */
1629:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1630:Middlewares/Third_Party/FatFs/src/ff.c **** 
1631:Middlewares/Third_Party/FatFs/src/ff.c **** static
1632:Middlewares/Third_Party/FatFs/src/ff.c **** DWORD ld_clust (	/* Returns the top cluster value of the SFN entry */
1633:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,		/* Pointer to the fs object */
1634:Middlewares/Third_Party/FatFs/src/ff.c **** 	const BYTE* dir	/* Pointer to the key entry */
1635:Middlewares/Third_Party/FatFs/src/ff.c **** )
1636:Middlewares/Third_Party/FatFs/src/ff.c **** {
 897              		.loc 1 1636 0
 898              		.cfi_startproc
 899              		@ args = 0, pretend = 0, frame = 0
 900              		@ frame_needed = 0, uses_anonymous_args = 0
 901              	.LVL111:
 902 0000 70B5     		push	{r4, r5, r6, lr}
 903              	.LCFI12:
 904              		.cfi_def_cfa_offset 16
 905              		.cfi_offset 4, -16
 906              		.cfi_offset 5, -12
 907              		.cfi_offset 6, -8
 908              		.cfi_offset 14, -4
 909 0002 0646     		mov	r6, r0
 910 0004 0D46     		mov	r5, r1
1637:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD cl;
1638:Middlewares/Third_Party/FatFs/src/ff.c **** 
1639:Middlewares/Third_Party/FatFs/src/ff.c **** 	cl = ld_word(dir + DIR_FstClusLO);
 911              		.loc 1 1639 0
 912 0006 01F11A00 		add	r0, r1, #26
 913              	.LVL112:
 914 000a FFF7FEFF 		bl	ld_word
 915              	.LVL113:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 46


 916 000e 0446     		mov	r4, r0
 917              	.LVL114:
1640:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_FAT32) {
 918              		.loc 1 1640 0
 919 0010 3378     		ldrb	r3, [r6]	@ zero_extendqisi2
 920 0012 032B     		cmp	r3, #3
 921 0014 00D0     		beq	.L97
 922              	.L94:
1641:Middlewares/Third_Party/FatFs/src/ff.c **** 		cl |= (DWORD)ld_word(dir + DIR_FstClusHI) << 16;
1642:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1643:Middlewares/Third_Party/FatFs/src/ff.c **** 
1644:Middlewares/Third_Party/FatFs/src/ff.c **** 	return cl;
1645:Middlewares/Third_Party/FatFs/src/ff.c **** }
 923              		.loc 1 1645 0
 924 0016 70BD     		pop	{r4, r5, r6, pc}
 925              	.LVL115:
 926              	.L97:
1641:Middlewares/Third_Party/FatFs/src/ff.c **** 		cl |= (DWORD)ld_word(dir + DIR_FstClusHI) << 16;
 927              		.loc 1 1641 0
 928 0018 05F11400 		add	r0, r5, #20
 929              	.LVL116:
 930 001c FFF7FEFF 		bl	ld_word
 931              	.LVL117:
 932 0020 44EA0040 		orr	r0, r4, r0, lsl #16
 933              	.LVL118:
1644:Middlewares/Third_Party/FatFs/src/ff.c **** }
 934              		.loc 1 1644 0
 935 0024 F7E7     		b	.L94
 936              		.cfi_endproc
 937              	.LFE168:
 939              		.section	.text.st_clust,"ax",%progbits
 940              		.align	1
 941              		.syntax unified
 942              		.thumb
 943              		.thumb_func
 944              		.fpu fpv5-sp-d16
 946              	st_clust:
 947              	.LFB169:
1646:Middlewares/Third_Party/FatFs/src/ff.c **** 
1647:Middlewares/Third_Party/FatFs/src/ff.c **** 
1648:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
1649:Middlewares/Third_Party/FatFs/src/ff.c **** static
1650:Middlewares/Third_Party/FatFs/src/ff.c **** void st_clust (
1651:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,	/* Pointer to the fs object */
1652:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE* dir,	/* Pointer to the key entry */
1653:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD cl	/* Value to be set */
1654:Middlewares/Third_Party/FatFs/src/ff.c **** )
1655:Middlewares/Third_Party/FatFs/src/ff.c **** {
 948              		.loc 1 1655 0
 949              		.cfi_startproc
 950              		@ args = 0, pretend = 0, frame = 0
 951              		@ frame_needed = 0, uses_anonymous_args = 0
 952              	.LVL119:
 953 0000 70B5     		push	{r4, r5, r6, lr}
 954              	.LCFI13:
 955              		.cfi_def_cfa_offset 16
 956              		.cfi_offset 4, -16
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 47


 957              		.cfi_offset 5, -12
 958              		.cfi_offset 6, -8
 959              		.cfi_offset 14, -4
 960 0002 0646     		mov	r6, r0
 961 0004 0C46     		mov	r4, r1
 962 0006 1546     		mov	r5, r2
1656:Middlewares/Third_Party/FatFs/src/ff.c **** 	st_word(dir + DIR_FstClusLO, (WORD)cl);
 963              		.loc 1 1656 0
 964 0008 91B2     		uxth	r1, r2
 965              	.LVL120:
 966 000a 04F11A00 		add	r0, r4, #26
 967              	.LVL121:
 968 000e FFF7FEFF 		bl	st_word
 969              	.LVL122:
1657:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_FAT32) {
 970              		.loc 1 1657 0
 971 0012 3378     		ldrb	r3, [r6]	@ zero_extendqisi2
 972 0014 032B     		cmp	r3, #3
 973 0016 00D0     		beq	.L101
 974              	.L98:
 975 0018 70BD     		pop	{r4, r5, r6, pc}
 976              	.LVL123:
 977              	.L101:
1658:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(dir + DIR_FstClusHI, (WORD)(cl >> 16));
 978              		.loc 1 1658 0
 979 001a 290C     		lsrs	r1, r5, #16
 980 001c 04F11400 		add	r0, r4, #20
 981 0020 FFF7FEFF 		bl	st_word
 982              	.LVL124:
1659:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1660:Middlewares/Third_Party/FatFs/src/ff.c **** }
 983              		.loc 1 1660 0
 984 0024 F8E7     		b	.L98
 985              		.cfi_endproc
 986              	.LFE169:
 988              		.section	.text.pick_lfn,"ax",%progbits
 989              		.align	1
 990              		.syntax unified
 991              		.thumb
 992              		.thumb_func
 993              		.fpu fpv5-sp-d16
 995              	pick_lfn:
 996              	.LFB171:
1661:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1662:Middlewares/Third_Party/FatFs/src/ff.c **** 
1663:Middlewares/Third_Party/FatFs/src/ff.c **** 
1664:Middlewares/Third_Party/FatFs/src/ff.c **** 
1665:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0
1666:Middlewares/Third_Party/FatFs/src/ff.c **** /*------------------------------------------------------------------------*/
1667:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT-LFN: LFN handling                                                  */
1668:Middlewares/Third_Party/FatFs/src/ff.c **** /*------------------------------------------------------------------------*/
1669:Middlewares/Third_Party/FatFs/src/ff.c **** static
1670:Middlewares/Third_Party/FatFs/src/ff.c **** const BYTE LfnOfs[] = {1,3,5,7,9,14,16,18,20,22,24,28,30};	/* Offset of LFN characters in the direc
1671:Middlewares/Third_Party/FatFs/src/ff.c **** 
1672:Middlewares/Third_Party/FatFs/src/ff.c **** 
1673:Middlewares/Third_Party/FatFs/src/ff.c **** /*--------------------------------------------------------*/
1674:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT-LFN: Compare a part of file name with an LFN entry */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 48


1675:Middlewares/Third_Party/FatFs/src/ff.c **** /*--------------------------------------------------------*/
1676:Middlewares/Third_Party/FatFs/src/ff.c **** static
1677:Middlewares/Third_Party/FatFs/src/ff.c **** int cmp_lfn (				/* 1:matched, 0:not matched */
1678:Middlewares/Third_Party/FatFs/src/ff.c **** 	const WCHAR* lfnbuf,	/* Pointer to the LFN working buffer to be compared */
1679:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE* dir				/* Pointer to the directory entry containing the part of LFN */
1680:Middlewares/Third_Party/FatFs/src/ff.c **** )
1681:Middlewares/Third_Party/FatFs/src/ff.c **** {
1682:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, s;
1683:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR wc, uc;
1684:Middlewares/Third_Party/FatFs/src/ff.c **** 
1685:Middlewares/Third_Party/FatFs/src/ff.c **** 
1686:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (ld_word(dir + LDIR_FstClusLO) != 0) return 0;	/* Check LDIR_FstClusLO */
1687:Middlewares/Third_Party/FatFs/src/ff.c **** 
1688:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = ((dir[LDIR_Ord] & 0x3F) - 1) * 13;	/* Offset in the LFN buffer */
1689:Middlewares/Third_Party/FatFs/src/ff.c **** 
1690:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (wc = 1, s = 0; s < 13; s++) {		/* Process all characters in the entry */
1691:Middlewares/Third_Party/FatFs/src/ff.c **** 		uc = ld_word(dir + LfnOfs[s]);		/* Pick an LFN character */
1692:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (wc) {
1693:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i >= _MAX_LFN || ff_wtoupper(uc) != ff_wtoupper(lfnbuf[i++])) {	/* Compare it */
1694:Middlewares/Third_Party/FatFs/src/ff.c **** 				return 0;					/* Not matched */
1695:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1696:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc = uc;
1697:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
1698:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (uc != 0xFFFF) return 0;		/* Check filler */
1699:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1700:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1701:Middlewares/Third_Party/FatFs/src/ff.c **** 
1702:Middlewares/Third_Party/FatFs/src/ff.c **** 	if ((dir[LDIR_Ord] & LLEF) && wc && lfnbuf[i]) return 0;	/* Last segment matched but different len
1703:Middlewares/Third_Party/FatFs/src/ff.c **** 
1704:Middlewares/Third_Party/FatFs/src/ff.c **** 	return 1;		/* The part of LFN matched */
1705:Middlewares/Third_Party/FatFs/src/ff.c **** }
1706:Middlewares/Third_Party/FatFs/src/ff.c **** 
1707:Middlewares/Third_Party/FatFs/src/ff.c **** 
1708:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 1 || _FS_RPATH >= 2 || _USE_LABEL || _FS_EXFAT
1709:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------*/
1710:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT-LFN: Pick a part of file name from an LFN entry */
1711:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------*/
1712:Middlewares/Third_Party/FatFs/src/ff.c **** static
1713:Middlewares/Third_Party/FatFs/src/ff.c **** int pick_lfn (			/* 1:succeeded, 0:buffer overflow or invalid LFN entry */
1714:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR* lfnbuf,		/* Pointer to the LFN working buffer */
1715:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE* dir			/* Pointer to the LFN entry */
1716:Middlewares/Third_Party/FatFs/src/ff.c **** )
1717:Middlewares/Third_Party/FatFs/src/ff.c **** {
 997              		.loc 1 1717 0
 998              		.cfi_startproc
 999              		@ args = 0, pretend = 0, frame = 0
 1000              		@ frame_needed = 0, uses_anonymous_args = 0
 1001              	.LVL125:
 1002 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1003              	.LCFI14:
 1004              		.cfi_def_cfa_offset 24
 1005              		.cfi_offset 4, -24
 1006              		.cfi_offset 5, -20
 1007              		.cfi_offset 6, -16
 1008              		.cfi_offset 7, -12
 1009              		.cfi_offset 8, -8
 1010              		.cfi_offset 14, -4
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 49


 1011 0004 8046     		mov	r8, r0
 1012 0006 0F46     		mov	r7, r1
1718:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, s;
1719:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR wc, uc;
1720:Middlewares/Third_Party/FatFs/src/ff.c **** 
1721:Middlewares/Third_Party/FatFs/src/ff.c **** 
1722:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (ld_word(dir + LDIR_FstClusLO) != 0) return 0;	/* Check LDIR_FstClusLO is 0 */
 1013              		.loc 1 1722 0
 1014 0008 01F11A00 		add	r0, r1, #26
 1015              	.LVL126:
 1016 000c FFF7FEFF 		bl	ld_word
 1017              	.LVL127:
 1018 0010 58BB     		cbnz	r0, .L108
1723:Middlewares/Third_Party/FatFs/src/ff.c **** 
1724:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = ((dir[LDIR_Ord] & ~LLEF) - 1) * 13;	/* Offset in the LFN buffer */
 1019              		.loc 1 1724 0
 1020 0012 3D78     		ldrb	r5, [r7]	@ zero_extendqisi2
 1021 0014 25F04005 		bic	r5, r5, #64
 1022 0018 013D     		subs	r5, r5, #1
 1023 001a 05EB4503 		add	r3, r5, r5, lsl #1
 1024 001e 05EB8305 		add	r5, r5, r3, lsl #2
 1025              	.LVL128:
1725:Middlewares/Third_Party/FatFs/src/ff.c **** 
1726:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (wc = 1, s = 0; s < 13; s++) {		/* Process all characters in the entry */
 1026              		.loc 1 1726 0
 1027 0022 0126     		movs	r6, #1
 1028 0024 0024     		movs	r4, #0
 1029 0026 04E0     		b	.L104
 1030              	.LVL129:
 1031              	.L105:
1727:Middlewares/Third_Party/FatFs/src/ff.c **** 		uc = ld_word(dir + LfnOfs[s]);		/* Pick an LFN character */
1728:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (wc) {
1729:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i >= _MAX_LFN) return 0;	/* Buffer overflow? */
1730:Middlewares/Third_Party/FatFs/src/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
1731:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
1732:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (uc != 0xFFFF) return 0;		/* Check filler */
 1032              		.loc 1 1732 0
 1033 0028 4FF6FF73 		movw	r3, #65535
 1034 002c 9842     		cmp	r0, r3
 1035 002e 22D1     		bne	.L110
 1036              	.LVL130:
 1037              	.L106:
1726:Middlewares/Third_Party/FatFs/src/ff.c **** 		uc = ld_word(dir + LfnOfs[s]);		/* Pick an LFN character */
 1038              		.loc 1 1726 0 discriminator 2
 1039 0030 0134     		adds	r4, r4, #1
 1040              	.LVL131:
 1041              	.L104:
1726:Middlewares/Third_Party/FatFs/src/ff.c **** 		uc = ld_word(dir + LfnOfs[s]);		/* Pick an LFN character */
 1042              		.loc 1 1726 0 is_stmt 0 discriminator 1
 1043 0032 0C2C     		cmp	r4, #12
 1044 0034 0DD8     		bhi	.L114
1727:Middlewares/Third_Party/FatFs/src/ff.c **** 		uc = ld_word(dir + LfnOfs[s]);		/* Pick an LFN character */
 1045              		.loc 1 1727 0 is_stmt 1
 1046 0036 144B     		ldr	r3, .L115
 1047 0038 185D     		ldrb	r0, [r3, r4]	@ zero_extendqisi2
 1048 003a 3844     		add	r0, r0, r7
 1049 003c FFF7FEFF 		bl	ld_word
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 50


 1050              	.LVL132:
1728:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i >= _MAX_LFN) return 0;	/* Buffer overflow? */
 1051              		.loc 1 1728 0
 1052 0040 002E     		cmp	r6, #0
 1053 0042 F1D0     		beq	.L105
1729:Middlewares/Third_Party/FatFs/src/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
 1054              		.loc 1 1729 0
 1055 0044 FE2D     		cmp	r5, #254
 1056 0046 13D8     		bhi	.L109
 1057              	.LVL133:
1730:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 1058              		.loc 1 1730 0
 1059 0048 28F81500 		strh	r0, [r8, r5, lsl #1]	@ movhi
 1060 004c 0646     		mov	r6, r0
 1061 004e 0135     		adds	r5, r5, #1
 1062              	.LVL134:
 1063 0050 EEE7     		b	.L106
 1064              	.LVL135:
 1065              	.L114:
1733:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1734:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1735:Middlewares/Third_Party/FatFs/src/ff.c **** 
1736:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (dir[LDIR_Ord] & LLEF) {				/* Put terminator if it is the last LFN part */
 1066              		.loc 1 1736 0
 1067 0052 3B78     		ldrb	r3, [r7]	@ zero_extendqisi2
 1068 0054 13F0400F 		tst	r3, #64
 1069 0058 10D0     		beq	.L111
1737:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i >= _MAX_LFN) return 0;		/* Buffer overflow? */
 1070              		.loc 1 1737 0
 1071 005a FE2D     		cmp	r5, #254
 1072 005c 11D8     		bhi	.L112
1738:Middlewares/Third_Party/FatFs/src/ff.c **** 		lfnbuf[i] = 0;
 1073              		.loc 1 1738 0
 1074 005e 0023     		movs	r3, #0
 1075 0060 28F81530 		strh	r3, [r8, r5, lsl #1]	@ movhi
1739:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1740:Middlewares/Third_Party/FatFs/src/ff.c **** 
1741:Middlewares/Third_Party/FatFs/src/ff.c **** 	return 1;		/* The part of LFN is valid */
 1076              		.loc 1 1741 0
 1077 0064 0120     		movs	r0, #1
 1078 0066 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1079              	.LVL136:
 1080              	.L108:
1722:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1081              		.loc 1 1722 0
 1082 006a 0020     		movs	r0, #0
 1083 006c BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1084              	.LVL137:
 1085              	.L109:
1729:Middlewares/Third_Party/FatFs/src/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
 1086              		.loc 1 1729 0
 1087 0070 0020     		movs	r0, #0
 1088              	.LVL138:
 1089 0072 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1090              	.LVL139:
 1091              	.L110:
1732:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 51


 1092              		.loc 1 1732 0
 1093 0076 0020     		movs	r0, #0
 1094              	.LVL140:
 1095 0078 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1096              	.LVL141:
 1097              	.L111:
 1098              		.loc 1 1741 0
 1099 007c 0120     		movs	r0, #1
 1100 007e BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1101              	.LVL142:
 1102              	.L112:
1737:Middlewares/Third_Party/FatFs/src/ff.c **** 		lfnbuf[i] = 0;
 1103              		.loc 1 1737 0
 1104 0082 0020     		movs	r0, #0
1742:Middlewares/Third_Party/FatFs/src/ff.c **** }
 1105              		.loc 1 1742 0
 1106 0084 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1107              	.LVL143:
 1108              	.L116:
 1109              		.align	2
 1110              	.L115:
 1111 0088 00000000 		.word	.LANCHOR1
 1112              		.cfi_endproc
 1113              	.LFE171:
 1115              		.section	.text.put_lfn,"ax",%progbits
 1116              		.align	1
 1117              		.syntax unified
 1118              		.thumb
 1119              		.thumb_func
 1120              		.fpu fpv5-sp-d16
 1122              	put_lfn:
 1123              	.LFB172:
1743:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1744:Middlewares/Third_Party/FatFs/src/ff.c **** 
1745:Middlewares/Third_Party/FatFs/src/ff.c **** 
1746:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
1747:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------*/
1748:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT-LFN: Create an entry of LFN entries */
1749:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------*/
1750:Middlewares/Third_Party/FatFs/src/ff.c **** static
1751:Middlewares/Third_Party/FatFs/src/ff.c **** void put_lfn (
1752:Middlewares/Third_Party/FatFs/src/ff.c **** 	const WCHAR* lfn,	/* Pointer to the LFN */
1753:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE* dir,			/* Pointer to the LFN entry to be created */
1754:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE ord,			/* LFN order (1-20) */
1755:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE sum			/* Checksum of the corresponding SFN */
1756:Middlewares/Third_Party/FatFs/src/ff.c **** )
1757:Middlewares/Third_Party/FatFs/src/ff.c **** {
 1124              		.loc 1 1757 0
 1125              		.cfi_startproc
 1126              		@ args = 0, pretend = 0, frame = 0
 1127              		@ frame_needed = 0, uses_anonymous_args = 0
 1128              	.LVL144:
 1129 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 1130              	.LCFI15:
 1131              		.cfi_def_cfa_offset 32
 1132              		.cfi_offset 3, -32
 1133              		.cfi_offset 4, -28
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 52


 1134              		.cfi_offset 5, -24
 1135              		.cfi_offset 6, -20
 1136              		.cfi_offset 7, -16
 1137              		.cfi_offset 8, -12
 1138              		.cfi_offset 9, -8
 1139              		.cfi_offset 14, -4
 1140 0004 8046     		mov	r8, r0
 1141 0006 0F46     		mov	r7, r1
 1142 0008 9146     		mov	r9, r2
1758:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, s;
1759:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR wc;
1760:Middlewares/Third_Party/FatFs/src/ff.c **** 
1761:Middlewares/Third_Party/FatFs/src/ff.c **** 
1762:Middlewares/Third_Party/FatFs/src/ff.c **** 	dir[LDIR_Chksum] = sum;			/* Set checksum */
 1143              		.loc 1 1762 0
 1144 000a 4B73     		strb	r3, [r1, #13]
1763:Middlewares/Third_Party/FatFs/src/ff.c **** 	dir[LDIR_Attr] = AM_LFN;		/* Set attribute. LFN entry */
 1145              		.loc 1 1763 0
 1146 000c 0F23     		movs	r3, #15
 1147              	.LVL145:
 1148 000e CB72     		strb	r3, [r1, #11]
1764:Middlewares/Third_Party/FatFs/src/ff.c **** 	dir[LDIR_Type] = 0;
 1149              		.loc 1 1764 0
 1150 0010 0024     		movs	r4, #0
 1151 0012 0C73     		strb	r4, [r1, #12]
1765:Middlewares/Third_Party/FatFs/src/ff.c **** 	st_word(dir + LDIR_FstClusLO, 0);
 1152              		.loc 1 1765 0
 1153 0014 2146     		mov	r1, r4
 1154              	.LVL146:
 1155 0016 07F11A00 		add	r0, r7, #26
 1156              	.LVL147:
 1157 001a FFF7FEFF 		bl	st_word
 1158              	.LVL148:
1766:Middlewares/Third_Party/FatFs/src/ff.c **** 
1767:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = (ord - 1) * 13;				/* Get offset in the LFN working buffer */
 1159              		.loc 1 1767 0
 1160 001e 09F1FF36 		add	r6, r9, #-1
 1161 0022 06EB4603 		add	r3, r6, r6, lsl #1
 1162 0026 06EB8306 		add	r6, r6, r3, lsl #2
 1163              	.LVL149:
1768:Middlewares/Third_Party/FatFs/src/ff.c **** 	s = wc = 0;
 1164              		.loc 1 1768 0
 1165 002a 2546     		mov	r5, r4
 1166 002c 02E0     		b	.L120
 1167              	.LVL150:
 1168              	.L119:
1769:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
1770:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (wc != 0xFFFF) wc = lfn[i++];	/* Get an effective character */
1771:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(dir + LfnOfs[s], wc);		/* Put it */
1772:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (wc == 0) wc = 0xFFFF;		/* Padding characters for left locations */
1773:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (++s < 13);
 1169              		.loc 1 1773 0
 1170 002e 0134     		adds	r4, r4, #1
 1171              	.LVL151:
 1172 0030 0C2C     		cmp	r4, #12
 1173 0032 11D8     		bhi	.L125
 1174              	.LVL152:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 53


 1175              	.L120:
1770:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(dir + LfnOfs[s], wc);		/* Put it */
 1176              		.loc 1 1770 0
 1177 0034 4FF6FF73 		movw	r3, #65535
 1178 0038 9D42     		cmp	r5, r3
 1179 003a 02D0     		beq	.L118
 1180              	.LVL153:
1770:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(dir + LfnOfs[s], wc);		/* Put it */
 1181              		.loc 1 1770 0 is_stmt 0 discriminator 1
 1182 003c 38F81650 		ldrh	r5, [r8, r6, lsl #1]
 1183              	.LVL154:
 1184 0040 0136     		adds	r6, r6, #1
 1185              	.LVL155:
 1186              	.L118:
1771:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (wc == 0) wc = 0xFFFF;		/* Padding characters for left locations */
 1187              		.loc 1 1771 0 is_stmt 1
 1188 0042 0C4B     		ldr	r3, .L126
 1189 0044 185D     		ldrb	r0, [r3, r4]	@ zero_extendqisi2
 1190 0046 2946     		mov	r1, r5
 1191 0048 3844     		add	r0, r0, r7
 1192 004a FFF7FEFF 		bl	st_word
 1193              	.LVL156:
1772:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (++s < 13);
 1194              		.loc 1 1772 0
 1195 004e 002D     		cmp	r5, #0
 1196 0050 EDD1     		bne	.L119
 1197 0052 4FF6FF75 		movw	r5, #65535
 1198              	.LVL157:
 1199 0056 EAE7     		b	.L119
 1200              	.LVL158:
 1201              	.L125:
1774:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (wc == 0xFFFF || !lfn[i]) ord |= LLEF;	/* Last LFN part is the start of LFN sequence */
 1202              		.loc 1 1774 0
 1203 0058 4FF6FF73 		movw	r3, #65535
 1204 005c 9D42     		cmp	r5, r3
 1205 005e 02D0     		beq	.L121
 1206              		.loc 1 1774 0 is_stmt 0 discriminator 2
 1207 0060 38F81630 		ldrh	r3, [r8, r6, lsl #1]
 1208 0064 0BB9     		cbnz	r3, .L122
 1209              	.L121:
 1210              		.loc 1 1774 0 discriminator 3
 1211 0066 49F04009 		orr	r9, r9, #64
 1212              	.LVL159:
 1213              	.L122:
1775:Middlewares/Third_Party/FatFs/src/ff.c **** 	dir[LDIR_Ord] = ord;			/* Set the LFN order */
 1214              		.loc 1 1775 0 is_stmt 1
 1215 006a 87F80090 		strb	r9, [r7]
 1216 006e BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 1217              	.LVL160:
 1218              	.L127:
 1219 0072 00BF     		.align	2
 1220              	.L126:
 1221 0074 00000000 		.word	.LANCHOR1
 1222              		.cfi_endproc
 1223              	.LFE172:
 1225              		.section	.text.gen_numname,"ax",%progbits
 1226              		.align	1
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 54


 1227              		.syntax unified
 1228              		.thumb
 1229              		.thumb_func
 1230              		.fpu fpv5-sp-d16
 1232              	gen_numname:
 1233              	.LFB173:
1776:Middlewares/Third_Party/FatFs/src/ff.c **** }
1777:Middlewares/Third_Party/FatFs/src/ff.c **** 
1778:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* !_FS_READONLY */
1779:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* _USE_LFN != 0 */
1780:Middlewares/Third_Party/FatFs/src/ff.c **** 
1781:Middlewares/Third_Party/FatFs/src/ff.c **** 
1782:Middlewares/Third_Party/FatFs/src/ff.c **** 
1783:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0 && !_FS_READONLY
1784:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1785:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT-LFN: Create a Numbered SFN                                        */
1786:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1787:Middlewares/Third_Party/FatFs/src/ff.c **** 
1788:Middlewares/Third_Party/FatFs/src/ff.c **** static
1789:Middlewares/Third_Party/FatFs/src/ff.c **** void gen_numname (
1790:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE* dst,			/* Pointer to the buffer to store numbered SFN */
1791:Middlewares/Third_Party/FatFs/src/ff.c **** 	const BYTE* src,	/* Pointer to SFN */
1792:Middlewares/Third_Party/FatFs/src/ff.c **** 	const WCHAR* lfn,	/* Pointer to LFN */
1793:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT seq			/* Sequence number */
1794:Middlewares/Third_Party/FatFs/src/ff.c **** )
1795:Middlewares/Third_Party/FatFs/src/ff.c **** {
 1234              		.loc 1 1795 0
 1235              		.cfi_startproc
 1236              		@ args = 0, pretend = 0, frame = 8
 1237              		@ frame_needed = 0, uses_anonymous_args = 0
 1238              	.LVL161:
 1239 0000 70B5     		push	{r4, r5, r6, lr}
 1240              	.LCFI16:
 1241              		.cfi_def_cfa_offset 16
 1242              		.cfi_offset 4, -16
 1243              		.cfi_offset 5, -12
 1244              		.cfi_offset 6, -8
 1245              		.cfi_offset 14, -4
 1246 0002 82B0     		sub	sp, sp, #8
 1247              	.LCFI17:
 1248              		.cfi_def_cfa_offset 24
 1249 0004 0546     		mov	r5, r0
 1250 0006 1646     		mov	r6, r2
 1251 0008 1C46     		mov	r4, r3
1796:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE ns[8], c;
1797:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, j;
1798:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR wc;
1799:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD sr;
1800:Middlewares/Third_Party/FatFs/src/ff.c **** 
1801:Middlewares/Third_Party/FatFs/src/ff.c **** 
1802:Middlewares/Third_Party/FatFs/src/ff.c **** 	mem_cpy(dst, src, 11);
 1252              		.loc 1 1802 0
 1253 000a 0B22     		movs	r2, #11
 1254              	.LVL162:
 1255 000c FFF7FEFF 		bl	mem_cpy
 1256              	.LVL163:
1803:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 55


1804:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (seq > 5) {	/* In case of many collisions, generate a hash number instead of sequential number 
 1257              		.loc 1 1804 0
 1258 0010 052C     		cmp	r4, #5
 1259 0012 11D8     		bhi	.L141
 1260              	.LVL164:
 1261              	.L130:
1805:Middlewares/Third_Party/FatFs/src/ff.c **** 		sr = seq;
1806:Middlewares/Third_Party/FatFs/src/ff.c **** 		while (*lfn) {	/* Create a CRC */
1807:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc = *lfn++;
1808:Middlewares/Third_Party/FatFs/src/ff.c **** 			for (i = 0; i < 16; i++) {
1809:Middlewares/Third_Party/FatFs/src/ff.c **** 				sr = (sr << 1) + (wc & 1);
1810:Middlewares/Third_Party/FatFs/src/ff.c **** 				wc >>= 1;
1811:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (sr & 0x10000) sr ^= 0x11021;
1812:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1813:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1814:Middlewares/Third_Party/FatFs/src/ff.c **** 		seq = (UINT)sr;
 1262              		.loc 1 1814 0
 1263 0014 0723     		movs	r3, #7
 1264 0016 1FE0     		b	.L136
 1265              	.LVL165:
 1266              	.L132:
1808:Middlewares/Third_Party/FatFs/src/ff.c **** 				sr = (sr << 1) + (wc & 1);
 1267              		.loc 1 1808 0 discriminator 2
 1268 0018 0131     		adds	r1, r1, #1
 1269              	.LVL166:
 1270              	.L131:
1808:Middlewares/Third_Party/FatFs/src/ff.c **** 				sr = (sr << 1) + (wc & 1);
 1271              		.loc 1 1808 0 is_stmt 0 discriminator 1
 1272 001a 0F29     		cmp	r1, #15
 1273 001c 0DD8     		bhi	.L129
1809:Middlewares/Third_Party/FatFs/src/ff.c **** 				wc >>= 1;
 1274              		.loc 1 1809 0 is_stmt 1
 1275 001e 02F00100 		and	r0, r2, #1
 1276 0022 00EB4303 		add	r3, r0, r3, lsl #1
 1277              	.LVL167:
1810:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (sr & 0x10000) sr ^= 0x11021;
 1278              		.loc 1 1810 0
 1279 0026 5208     		lsrs	r2, r2, #1
 1280              	.LVL168:
1811:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 1281              		.loc 1 1811 0
 1282 0028 13F4803F 		tst	r3, #65536
 1283 002c F4D0     		beq	.L132
1811:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 1284              		.loc 1 1811 0 is_stmt 0 discriminator 1
 1285 002e 83F48833 		eor	r3, r3, #69632
 1286              	.LVL169:
 1287 0032 83F02103 		eor	r3, r3, #33
 1288              	.LVL170:
 1289 0036 EFE7     		b	.L132
 1290              	.LVL171:
 1291              	.L141:
 1292 0038 2346     		mov	r3, r4
 1293              	.L129:
 1294              	.LVL172:
1806:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc = *lfn++;
 1295              		.loc 1 1806 0 is_stmt 1
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 56


 1296 003a 3288     		ldrh	r2, [r6]
 1297 003c 12B1     		cbz	r2, .L145
1807:Middlewares/Third_Party/FatFs/src/ff.c **** 			for (i = 0; i < 16; i++) {
 1298              		.loc 1 1807 0
 1299 003e 0236     		adds	r6, r6, #2
 1300              	.LVL173:
1808:Middlewares/Third_Party/FatFs/src/ff.c **** 				sr = (sr << 1) + (wc & 1);
 1301              		.loc 1 1808 0
 1302 0040 0021     		movs	r1, #0
 1303 0042 EAE7     		b	.L131
 1304              	.LVL174:
 1305              	.L145:
 1306              		.loc 1 1814 0
 1307 0044 1C46     		mov	r4, r3
 1308              	.LVL175:
 1309 0046 E5E7     		b	.L130
 1310              	.LVL176:
 1311              	.L135:
1815:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1816:Middlewares/Third_Party/FatFs/src/ff.c **** 
1817:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* itoa (hexdecimal) */
1818:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = 7;
1819:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
1820:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = (BYTE)((seq % 16) + '0');
1821:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c > '9') c += 7;
1822:Middlewares/Third_Party/FatFs/src/ff.c **** 		ns[i--] = c;
 1312              		.loc 1 1822 0
 1313 0048 5A1E     		subs	r2, r3, #1
 1314              	.LVL177:
 1315 004a 02A8     		add	r0, sp, #8
 1316 004c 0344     		add	r3, r3, r0
 1317 004e 03F8081C 		strb	r1, [r3, #-8]
 1318              	.LVL178:
1823:Middlewares/Third_Party/FatFs/src/ff.c **** 		seq /= 16;
1824:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (seq);
 1319              		.loc 1 1824 0
 1320 0052 2409     		lsrs	r4, r4, #4
 1321              	.LVL179:
 1322 0054 09D0     		beq	.L146
1822:Middlewares/Third_Party/FatFs/src/ff.c **** 		seq /= 16;
 1323              		.loc 1 1822 0
 1324 0056 1346     		mov	r3, r2
 1325              	.LVL180:
 1326              	.L136:
1820:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c > '9') c += 7;
 1327              		.loc 1 1820 0
 1328 0058 04F00F02 		and	r2, r4, #15
 1329 005c 02F13001 		add	r1, r2, #48
 1330              	.LVL181:
1821:Middlewares/Third_Party/FatFs/src/ff.c **** 		ns[i--] = c;
 1331              		.loc 1 1821 0
 1332 0060 3929     		cmp	r1, #57
 1333 0062 F1D9     		bls	.L135
1821:Middlewares/Third_Party/FatFs/src/ff.c **** 		ns[i--] = c;
 1334              		.loc 1 1821 0 is_stmt 0 discriminator 1
 1335 0064 02F13701 		add	r1, r2, #55
 1336              	.LVL182:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 57


 1337 0068 EEE7     		b	.L135
 1338              	.LVL183:
 1339              	.L146:
1825:Middlewares/Third_Party/FatFs/src/ff.c **** 	ns[i] = '~';
 1340              		.loc 1 1825 0 is_stmt 1
 1341 006a 7E21     		movs	r1, #126
 1342              	.LVL184:
 1343 006c 0346     		mov	r3, r0
 1344              	.LVL185:
 1345 006e 1344     		add	r3, r3, r2
 1346 0070 03F8081C 		strb	r1, [r3, #-8]
 1347              	.LVL186:
1826:Middlewares/Third_Party/FatFs/src/ff.c **** 
1827:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Append the number */
1828:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (j = 0; j < i && dst[j] != ' '; j++) {
 1348              		.loc 1 1828 0
 1349 0074 00E0     		b	.L137
 1350              	.LVL187:
 1351              	.L139:
 1352              		.loc 1 1828 0 is_stmt 0 discriminator 2
 1353 0076 0134     		adds	r4, r4, #1
 1354              	.LVL188:
 1355              	.L137:
 1356              		.loc 1 1828 0 discriminator 1
 1357 0078 9442     		cmp	r4, r2
 1358 007a 08D2     		bcs	.L138
 1359              		.loc 1 1828 0 discriminator 3
 1360 007c 2B5D     		ldrb	r3, [r5, r4]	@ zero_extendqisi2
 1361 007e 202B     		cmp	r3, #32
 1362 0080 F9D1     		bne	.L139
 1363 0082 04E0     		b	.L138
 1364              	.LVL189:
 1365              	.L143:
1829:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (IsDBCS1(dst[j])) {
1830:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (j == i - 1) break;
1831:Middlewares/Third_Party/FatFs/src/ff.c **** 			j++;
1832:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1833:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1834:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
1835:Middlewares/Third_Party/FatFs/src/ff.c **** 		dst[j++] = (i < 8) ? ns[i++] : ' ';
 1366              		.loc 1 1835 0 is_stmt 1
 1367 0084 2020     		movs	r0, #32
 1368              	.L140:
 1369              		.loc 1 1835 0 is_stmt 0 discriminator 4
 1370 0086 1870     		strb	r0, [r3]
 1371 0088 0C46     		mov	r4, r1
1836:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (j < 8);
 1372              		.loc 1 1836 0 is_stmt 1 discriminator 4
 1373 008a 0729     		cmp	r1, #7
 1374 008c 09D8     		bhi	.L147
 1375              	.LVL190:
 1376              	.L138:
1835:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (j < 8);
 1377              		.loc 1 1835 0
 1378 008e 611C     		adds	r1, r4, #1
 1379              	.LVL191:
 1380 0090 2B19     		adds	r3, r5, r4
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 58


 1381 0092 072A     		cmp	r2, #7
 1382 0094 F6D8     		bhi	.L143
 1383              	.LVL192:
1835:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (j < 8);
 1384              		.loc 1 1835 0 is_stmt 0 discriminator 1
 1385 0096 02A8     		add	r0, sp, #8
 1386 0098 1044     		add	r0, r0, r2
 1387 009a 10F8080C 		ldrb	r0, [r0, #-8]	@ zero_extendqisi2
 1388 009e 0132     		adds	r2, r2, #1
 1389              	.LVL193:
 1390 00a0 F1E7     		b	.L140
 1391              	.L147:
1837:Middlewares/Third_Party/FatFs/src/ff.c **** }
 1392              		.loc 1 1837 0 is_stmt 1
 1393 00a2 02B0     		add	sp, sp, #8
 1394              	.LCFI18:
 1395              		.cfi_def_cfa_offset 16
 1396              		@ sp needed
 1397 00a4 70BD     		pop	{r4, r5, r6, pc}
 1398              		.cfi_endproc
 1399              	.LFE173:
 1401              		.section	.text.sum_sfn,"ax",%progbits
 1402              		.align	1
 1403              		.syntax unified
 1404              		.thumb
 1405              		.thumb_func
 1406              		.fpu fpv5-sp-d16
 1408              	sum_sfn:
 1409              	.LFB174:
1838:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* _USE_LFN != 0 && !_FS_READONLY */
1839:Middlewares/Third_Party/FatFs/src/ff.c **** 
1840:Middlewares/Third_Party/FatFs/src/ff.c **** 
1841:Middlewares/Third_Party/FatFs/src/ff.c **** 
1842:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0
1843:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1844:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT-LFN: Calculate checksum of an SFN entry                           */
1845:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1846:Middlewares/Third_Party/FatFs/src/ff.c **** 
1847:Middlewares/Third_Party/FatFs/src/ff.c **** static
1848:Middlewares/Third_Party/FatFs/src/ff.c **** BYTE sum_sfn (
1849:Middlewares/Third_Party/FatFs/src/ff.c **** 	const BYTE* dir		/* Pointer to the SFN entry */
1850:Middlewares/Third_Party/FatFs/src/ff.c **** )
1851:Middlewares/Third_Party/FatFs/src/ff.c **** {
 1410              		.loc 1 1851 0
 1411              		.cfi_startproc
 1412              		@ args = 0, pretend = 0, frame = 0
 1413              		@ frame_needed = 0, uses_anonymous_args = 0
 1414              		@ link register save eliminated.
 1415              	.LVL194:
 1416 0000 0146     		mov	r1, r0
 1417              	.LVL195:
1852:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE sum = 0;
1853:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT n = 11;
 1418              		.loc 1 1853 0
 1419 0002 0B22     		movs	r2, #11
1852:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE sum = 0;
 1420              		.loc 1 1852 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 59


 1421 0004 0020     		movs	r0, #0
 1422              	.LVL196:
 1423              	.L149:
1854:Middlewares/Third_Party/FatFs/src/ff.c **** 
1855:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
1856:Middlewares/Third_Party/FatFs/src/ff.c **** 		sum = (sum >> 1) + (sum << 7) + *dir++;
 1424              		.loc 1 1856 0 discriminator 1
 1425 0006 C301     		lsls	r3, r0, #7
 1426 0008 43EA5003 		orr	r3, r3, r0, lsr #1
 1427              	.LVL197:
 1428 000c 0878     		ldrb	r0, [r1]	@ zero_extendqisi2
 1429              	.LVL198:
 1430 000e 50FA83F3 		uxtab	r3, r0, r3
 1431 0012 D8B2     		uxtb	r0, r3
 1432              	.LVL199:
 1433 0014 0131     		adds	r1, r1, #1
 1434              	.LVL200:
1857:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (--n);
 1435              		.loc 1 1857 0 discriminator 1
 1436 0016 013A     		subs	r2, r2, #1
 1437              	.LVL201:
 1438 0018 F5D1     		bne	.L149
1858:Middlewares/Third_Party/FatFs/src/ff.c **** 	return sum;
1859:Middlewares/Third_Party/FatFs/src/ff.c **** }
 1439              		.loc 1 1859 0
 1440 001a 7047     		bx	lr
 1441              		.cfi_endproc
 1442              	.LFE174:
 1444              		.section	.text.get_ldnumber,"ax",%progbits
 1445              		.align	1
 1446              		.syntax unified
 1447              		.thumb
 1448              		.thumb_func
 1449              		.fpu fpv5-sp-d16
 1451              	get_ldnumber:
 1452              	.LFB182:
1860:Middlewares/Third_Party/FatFs/src/ff.c **** 
1861:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* _USE_LFN != 0 */
1862:Middlewares/Third_Party/FatFs/src/ff.c **** 
1863:Middlewares/Third_Party/FatFs/src/ff.c **** 
1864:Middlewares/Third_Party/FatFs/src/ff.c **** 
1865:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
1866:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1867:Middlewares/Third_Party/FatFs/src/ff.c **** /* exFAT: Checksum                                                       */
1868:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1869:Middlewares/Third_Party/FatFs/src/ff.c **** 
1870:Middlewares/Third_Party/FatFs/src/ff.c **** static
1871:Middlewares/Third_Party/FatFs/src/ff.c **** WORD xdir_sum (			/* Get checksum of the directoly block */
1872:Middlewares/Third_Party/FatFs/src/ff.c **** 	const BYTE* dir		/* Directory entry block to be calculated */
1873:Middlewares/Third_Party/FatFs/src/ff.c **** )
1874:Middlewares/Third_Party/FatFs/src/ff.c **** {
1875:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, szblk;
1876:Middlewares/Third_Party/FatFs/src/ff.c **** 	WORD sum;
1877:Middlewares/Third_Party/FatFs/src/ff.c **** 
1878:Middlewares/Third_Party/FatFs/src/ff.c **** 
1879:Middlewares/Third_Party/FatFs/src/ff.c **** 	szblk = (dir[XDIR_NumSec] + 1) * SZDIRE;
1880:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (i = sum = 0; i < szblk; i++) {
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 60


1881:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == XDIR_SetSum) {	/* Skip sum field */
1882:Middlewares/Third_Party/FatFs/src/ff.c **** 			i++;
1883:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
1884:Middlewares/Third_Party/FatFs/src/ff.c **** 			sum = ((sum & 1) ? 0x8000 : 0) + (sum >> 1) + dir[i];
1885:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1886:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1887:Middlewares/Third_Party/FatFs/src/ff.c **** 	return sum;
1888:Middlewares/Third_Party/FatFs/src/ff.c **** }
1889:Middlewares/Third_Party/FatFs/src/ff.c **** 
1890:Middlewares/Third_Party/FatFs/src/ff.c **** 
1891:Middlewares/Third_Party/FatFs/src/ff.c **** 
1892:Middlewares/Third_Party/FatFs/src/ff.c **** static
1893:Middlewares/Third_Party/FatFs/src/ff.c **** WORD xname_sum (		/* Get check sum (to be used as hash) of the name */
1894:Middlewares/Third_Party/FatFs/src/ff.c **** 	const WCHAR* name	/* File name to be calculated */
1895:Middlewares/Third_Party/FatFs/src/ff.c **** )
1896:Middlewares/Third_Party/FatFs/src/ff.c **** {
1897:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR chr;
1898:Middlewares/Third_Party/FatFs/src/ff.c **** 	WORD sum = 0;
1899:Middlewares/Third_Party/FatFs/src/ff.c **** 
1900:Middlewares/Third_Party/FatFs/src/ff.c **** 
1901:Middlewares/Third_Party/FatFs/src/ff.c **** 	while ((chr = *name++) != 0) {
1902:Middlewares/Third_Party/FatFs/src/ff.c **** 		chr = ff_wtoupper(chr);		/* File name needs to be ignored case */
1903:Middlewares/Third_Party/FatFs/src/ff.c **** 		sum = ((sum & 1) ? 0x8000 : 0) + (sum >> 1) + (chr & 0xFF);
1904:Middlewares/Third_Party/FatFs/src/ff.c **** 		sum = ((sum & 1) ? 0x8000 : 0) + (sum >> 1) + (chr >> 8);
1905:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1906:Middlewares/Third_Party/FatFs/src/ff.c **** 	return sum;
1907:Middlewares/Third_Party/FatFs/src/ff.c **** }
1908:Middlewares/Third_Party/FatFs/src/ff.c **** 
1909:Middlewares/Third_Party/FatFs/src/ff.c **** 
1910:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY && _USE_MKFS
1911:Middlewares/Third_Party/FatFs/src/ff.c **** static
1912:Middlewares/Third_Party/FatFs/src/ff.c **** DWORD xsum32 (
1913:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE  dat,	/* Data to be sumed */
1914:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD sum	/* Previous value */
1915:Middlewares/Third_Party/FatFs/src/ff.c **** )
1916:Middlewares/Third_Party/FatFs/src/ff.c **** {
1917:Middlewares/Third_Party/FatFs/src/ff.c **** 	sum = ((sum & 1) ? 0x80000000 : 0) + (sum >> 1) + dat;
1918:Middlewares/Third_Party/FatFs/src/ff.c **** 	return sum;
1919:Middlewares/Third_Party/FatFs/src/ff.c **** }
1920:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1921:Middlewares/Third_Party/FatFs/src/ff.c **** 
1922:Middlewares/Third_Party/FatFs/src/ff.c **** 
1923:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 1 || _FS_RPATH >= 2
1924:Middlewares/Third_Party/FatFs/src/ff.c **** /*------------------------------------------------------*/
1925:Middlewares/Third_Party/FatFs/src/ff.c **** /* exFAT: Get object information from a directory block */
1926:Middlewares/Third_Party/FatFs/src/ff.c **** /*------------------------------------------------------*/
1927:Middlewares/Third_Party/FatFs/src/ff.c **** 
1928:Middlewares/Third_Party/FatFs/src/ff.c **** static
1929:Middlewares/Third_Party/FatFs/src/ff.c **** void get_xdir_info (
1930:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE* dirb,			/* Pointer to the direcotry entry block 85+C0+C1s */
1931:Middlewares/Third_Party/FatFs/src/ff.c **** 	FILINFO* fno		/* Buffer to store the extracted file information */
1932:Middlewares/Third_Party/FatFs/src/ff.c **** )
1933:Middlewares/Third_Party/FatFs/src/ff.c **** {
1934:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT di, si;
1935:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR w;
1936:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_LFN_UNICODE
1937:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT nc;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 61


1938:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1939:Middlewares/Third_Party/FatFs/src/ff.c **** 
1940:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get file name */
1941:Middlewares/Third_Party/FatFs/src/ff.c **** 	di = 0;
1942:Middlewares/Third_Party/FatFs/src/ff.c **** #if _LFN_UNICODE
1943:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (si = SZDIRE * 2; di < dirb[XDIR_NumName]; si += 2, di++) {
1944:Middlewares/Third_Party/FatFs/src/ff.c **** 		if ((si % SZDIRE) == 0) si += 2;		/* Skip entry type field */
1945:Middlewares/Third_Party/FatFs/src/ff.c **** 		w = ld_word(dirb + si);					/* Get a character */
1946:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (di >= _MAX_LFN) { di = 0; break; }	/* Buffer overflow --> inaccessible object name */
1947:Middlewares/Third_Party/FatFs/src/ff.c **** 		fno->fname[di] = w;						/* Store it */
1948:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1949:Middlewares/Third_Party/FatFs/src/ff.c **** #else
1950:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (si = SZDIRE * 2, nc = 0; nc < dirb[XDIR_NumName]; si += 2, nc++) {
1951:Middlewares/Third_Party/FatFs/src/ff.c **** 		if ((si % SZDIRE) == 0) si += 2;		/* Skip entry type field */
1952:Middlewares/Third_Party/FatFs/src/ff.c **** 		w = ff_convert(ld_word(dirb + si), 0);	/* Get a character and Unicode -> OEM */
1953:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_DF1S && w >= 0x100) {				/* Is it a double byte char? (always false at SBCS cfg) */
1954:Middlewares/Third_Party/FatFs/src/ff.c **** 			fno->fname[di++] = (char)(w >> 8);	/* Put 1st byte of the DBC */
1955:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1956:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (w == 0 || di >= _MAX_LFN) { di = 0; break; }	/* Invalid char or buffer overflow --> inaccessi
1957:Middlewares/Third_Party/FatFs/src/ff.c **** 		fno->fname[di++] = (char)w;
1958:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1959:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1960:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (di == 0) fno->fname[di++] = '?';	/* Inaccessible object name? */
1961:Middlewares/Third_Party/FatFs/src/ff.c **** 	fno->fname[di] = 0;						/* Terminate file name */
1962:Middlewares/Third_Party/FatFs/src/ff.c **** 
1963:Middlewares/Third_Party/FatFs/src/ff.c **** 	fno->altname[0] = 0;							/* No SFN */
1964:Middlewares/Third_Party/FatFs/src/ff.c **** 	fno->fattrib = dirb[XDIR_Attr];					/* Attribute */
1965:Middlewares/Third_Party/FatFs/src/ff.c **** 	fno->fsize = (fno->fattrib & AM_DIR) ? 0 : ld_qword(dirb + XDIR_FileSize);	/* Size */
1966:Middlewares/Third_Party/FatFs/src/ff.c **** 	fno->ftime = ld_word(dirb + XDIR_ModTime + 0);	/* Time */
1967:Middlewares/Third_Party/FatFs/src/ff.c **** 	fno->fdate = ld_word(dirb + XDIR_ModTime + 2);	/* Date */
1968:Middlewares/Third_Party/FatFs/src/ff.c **** }
1969:Middlewares/Third_Party/FatFs/src/ff.c **** 
1970:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* _FS_MINIMIZE <= 1 || _FS_RPATH >= 2 */
1971:Middlewares/Third_Party/FatFs/src/ff.c **** 
1972:Middlewares/Third_Party/FatFs/src/ff.c **** 
1973:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------*/
1974:Middlewares/Third_Party/FatFs/src/ff.c **** /* exFAT: Get a directry entry block */
1975:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------*/
1976:Middlewares/Third_Party/FatFs/src/ff.c **** 
1977:Middlewares/Third_Party/FatFs/src/ff.c **** static
1978:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT load_xdir (	/* FR_INT_ERR: invalid entry block */
1979:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp			/* Pointer to the reading direcotry object pointing the 85 entry */
1980:Middlewares/Third_Party/FatFs/src/ff.c **** )
1981:Middlewares/Third_Party/FatFs/src/ff.c **** {
1982:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
1983:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, sz_ent;
1984:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE* dirb = dp->obj.fs->dirbuf;	/* Pointer to the on-memory direcotry entry block 85+C0+C1s */
1985:Middlewares/Third_Party/FatFs/src/ff.c **** 
1986:Middlewares/Third_Party/FatFs/src/ff.c **** 
1987:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Load 85 entry */
1988:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = move_window(dp->obj.fs, dp->sect);
1989:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) return res;
1990:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (dp->dir[XDIR_Type] != 0x85) return FR_INT_ERR;
1991:Middlewares/Third_Party/FatFs/src/ff.c **** 	mem_cpy(dirb + 0, dp->dir, SZDIRE);
1992:Middlewares/Third_Party/FatFs/src/ff.c **** 	sz_ent = (dirb[XDIR_NumSec] + 1) * SZDIRE;
1993:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (sz_ent < 3 * SZDIRE || sz_ent > 19 * SZDIRE) return FR_INT_ERR;
1994:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 62


1995:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Load C0 entry */
1996:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = dir_next(dp, 0);
1997:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) return res;
1998:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = move_window(dp->obj.fs, dp->sect);
1999:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) return res;
2000:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (dp->dir[XDIR_Type] != 0xC0) return FR_INT_ERR;
2001:Middlewares/Third_Party/FatFs/src/ff.c **** 	mem_cpy(dirb + SZDIRE, dp->dir, SZDIRE);
2002:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (MAXDIRB(dirb[XDIR_NumName]) > sz_ent) return FR_INT_ERR;
2003:Middlewares/Third_Party/FatFs/src/ff.c **** 
2004:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Load C1 entries */
2005:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = SZDIRE * 2;	/* C1 offset */
2006:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
2007:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_next(dp, 0);
2008:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) return res;
2009:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(dp->obj.fs, dp->sect);
2010:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) return res;
2011:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (dp->dir[XDIR_Type] != 0xC1) return FR_INT_ERR;
2012:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i < MAXDIRB(_MAX_LFN)) mem_cpy(dirb + i, dp->dir, SZDIRE);
2013:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while ((i += SZDIRE) < sz_ent);
2014:Middlewares/Third_Party/FatFs/src/ff.c **** 
2015:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Sanity check (do it when accessible object name) */
2016:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (i <= MAXDIRB(_MAX_LFN)) {
2017:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (xdir_sum(dirb) != ld_word(dirb + XDIR_SetSum)) return FR_INT_ERR;
2018:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2019:Middlewares/Third_Party/FatFs/src/ff.c **** 	return FR_OK;
2020:Middlewares/Third_Party/FatFs/src/ff.c **** }
2021:Middlewares/Third_Party/FatFs/src/ff.c **** 
2022:Middlewares/Third_Party/FatFs/src/ff.c **** 
2023:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY || _FS_RPATH != 0
2024:Middlewares/Third_Party/FatFs/src/ff.c **** /*------------------------------------------------*/
2025:Middlewares/Third_Party/FatFs/src/ff.c **** /* exFAT: Load the object's directory entry block */
2026:Middlewares/Third_Party/FatFs/src/ff.c **** /*------------------------------------------------*/
2027:Middlewares/Third_Party/FatFs/src/ff.c **** static
2028:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT load_obj_dir (
2029:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,			/* Blank directory object to be used to access containing direcotry */
2030:Middlewares/Third_Party/FatFs/src/ff.c **** 	const _FDID* obj	/* Object with its containing directory information */
2031:Middlewares/Third_Party/FatFs/src/ff.c **** )
2032:Middlewares/Third_Party/FatFs/src/ff.c **** {
2033:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
2034:Middlewares/Third_Party/FatFs/src/ff.c **** 
2035:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Open object containing directory */
2036:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->obj.fs = obj->fs;
2037:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->obj.sclust = obj->c_scl;
2038:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->obj.stat = (BYTE)obj->c_size;
2039:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->obj.objsize = obj->c_size & 0xFFFFFF00;
2040:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->blk_ofs = obj->c_ofs;
2041:Middlewares/Third_Party/FatFs/src/ff.c **** 
2042:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = dir_sdi(dp, dp->blk_ofs);	/* Goto object's entry block */
2043:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
2044:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = load_xdir(dp);		/* Load the object's entry block */
2045:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2046:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
2047:Middlewares/Third_Party/FatFs/src/ff.c **** }
2048:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2049:Middlewares/Third_Party/FatFs/src/ff.c **** 
2050:Middlewares/Third_Party/FatFs/src/ff.c **** 
2051:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 63


2052:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------*/
2053:Middlewares/Third_Party/FatFs/src/ff.c **** /* exFAT: Store the directory block to the media */
2054:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------*/
2055:Middlewares/Third_Party/FatFs/src/ff.c **** static
2056:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT store_xdir (
2057:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp				/* Pointer to the direcotry object */
2058:Middlewares/Third_Party/FatFs/src/ff.c **** )
2059:Middlewares/Third_Party/FatFs/src/ff.c **** {
2060:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
2061:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT nent;
2062:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE* dirb = dp->obj.fs->dirbuf;	/* Pointer to the direcotry entry block 85+C0+C1s */
2063:Middlewares/Third_Party/FatFs/src/ff.c **** 
2064:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Create set sum */
2065:Middlewares/Third_Party/FatFs/src/ff.c **** 	st_word(dirb + XDIR_SetSum, xdir_sum(dirb));
2066:Middlewares/Third_Party/FatFs/src/ff.c **** 	nent = dirb[XDIR_NumSec] + 1;
2067:Middlewares/Third_Party/FatFs/src/ff.c **** 
2068:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Store the set of directory to the volume */
2069:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = dir_sdi(dp, dp->blk_ofs);
2070:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (res == FR_OK) {
2071:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(dp->obj.fs, dp->sect);
2072:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) break;
2073:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_cpy(dp->dir, dirb, SZDIRE);
2074:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->obj.fs->wflag = 1;
2075:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (--nent == 0) break;
2076:Middlewares/Third_Party/FatFs/src/ff.c **** 		dirb += SZDIRE;
2077:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_next(dp, 0);
2078:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2079:Middlewares/Third_Party/FatFs/src/ff.c **** 	return (res == FR_OK || res == FR_DISK_ERR) ? res : FR_INT_ERR;
2080:Middlewares/Third_Party/FatFs/src/ff.c **** }
2081:Middlewares/Third_Party/FatFs/src/ff.c **** 
2082:Middlewares/Third_Party/FatFs/src/ff.c **** 
2083:Middlewares/Third_Party/FatFs/src/ff.c **** 
2084:Middlewares/Third_Party/FatFs/src/ff.c **** /*-------------------------------------------*/
2085:Middlewares/Third_Party/FatFs/src/ff.c **** /* exFAT: Create a new directory enrty block */
2086:Middlewares/Third_Party/FatFs/src/ff.c **** /*-------------------------------------------*/
2087:Middlewares/Third_Party/FatFs/src/ff.c **** 
2088:Middlewares/Third_Party/FatFs/src/ff.c **** static
2089:Middlewares/Third_Party/FatFs/src/ff.c **** void create_xdir (
2090:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE* dirb,			/* Pointer to the direcotry entry block buffer */
2091:Middlewares/Third_Party/FatFs/src/ff.c **** 	const WCHAR* lfn	/* Pointer to the nul terminated file name */
2092:Middlewares/Third_Party/FatFs/src/ff.c **** )
2093:Middlewares/Third_Party/FatFs/src/ff.c **** {
2094:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
2095:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE nb, nc;
2096:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR chr;
2097:Middlewares/Third_Party/FatFs/src/ff.c **** 
2098:Middlewares/Third_Party/FatFs/src/ff.c **** 
2099:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Create 85+C0 entry */
2100:Middlewares/Third_Party/FatFs/src/ff.c **** 	mem_set(dirb, 0, 2 * SZDIRE);
2101:Middlewares/Third_Party/FatFs/src/ff.c **** 	dirb[XDIR_Type] = 0x85;
2102:Middlewares/Third_Party/FatFs/src/ff.c **** 	dirb[XDIR_Type + SZDIRE] = 0xC0;
2103:Middlewares/Third_Party/FatFs/src/ff.c **** 
2104:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Create C1 entries */
2105:Middlewares/Third_Party/FatFs/src/ff.c **** 	nc = 0; nb = 1; chr = 1; i = SZDIRE * 2;
2106:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
2107:Middlewares/Third_Party/FatFs/src/ff.c **** 		dirb[i++] = 0xC1; dirb[i++] = 0;	/* Entry type C1 */
2108:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {	/* Fill name field */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 64


2109:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (chr && (chr = lfn[nc]) != 0) nc++;	/* Get a character if exist */
2110:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(dirb + i, chr); 		/* Store it */
2111:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while ((i += 2) % SZDIRE != 0);
2112:Middlewares/Third_Party/FatFs/src/ff.c **** 		nb++;
2113:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (lfn[nc]);	/* Fill next entry if any char follows */
2114:Middlewares/Third_Party/FatFs/src/ff.c **** 
2115:Middlewares/Third_Party/FatFs/src/ff.c **** 	dirb[XDIR_NumName] = nc;	/* Set name length */
2116:Middlewares/Third_Party/FatFs/src/ff.c **** 	dirb[XDIR_NumSec] = nb;		/* Set block length */
2117:Middlewares/Third_Party/FatFs/src/ff.c **** 	st_word(dirb + XDIR_NameHash, xname_sum(lfn));	/* Set name hash */
2118:Middlewares/Third_Party/FatFs/src/ff.c **** }
2119:Middlewares/Third_Party/FatFs/src/ff.c **** 
2120:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* !_FS_READONLY */
2121:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* _FS_EXFAT */
2122:Middlewares/Third_Party/FatFs/src/ff.c **** 
2123:Middlewares/Third_Party/FatFs/src/ff.c **** 
2124:Middlewares/Third_Party/FatFs/src/ff.c **** 
2125:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 1 || _FS_RPATH >= 2 || _USE_LABEL || _FS_EXFAT
2126:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2127:Middlewares/Third_Party/FatFs/src/ff.c **** /* Read an object from the directory                                     */
2128:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2129:Middlewares/Third_Party/FatFs/src/ff.c **** 
2130:Middlewares/Third_Party/FatFs/src/ff.c **** static
2131:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT dir_read (
2132:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,		/* Pointer to the directory object */
2133:Middlewares/Third_Party/FatFs/src/ff.c **** 	int vol			/* Filtered by 0:file/directory or 1:volume label */
2134:Middlewares/Third_Party/FatFs/src/ff.c **** )
2135:Middlewares/Third_Party/FatFs/src/ff.c **** {
2136:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res = FR_NO_FILE;
2137:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = dp->obj.fs;
2138:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE a, c;
2139:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0
2140:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE ord = 0xFF, sum = 0xFF;
2141:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2142:Middlewares/Third_Party/FatFs/src/ff.c **** 
2143:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (dp->sect) {
2144:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(fs, dp->sect);
2145:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) break;
2146:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = dp->dir[DIR_Name];	/* Test for the entry type */
2147:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 0) {
2148:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_NO_FILE; break; /* Reached to end of the directory */
2149:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2150:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
2151:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->fs_type == FS_EXFAT) {	/* On the exFAT volume */
2152:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (_USE_LABEL && vol) {
2153:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (c == 0x83) break;	/* Volume label entry? */
2154:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
2155:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (c == 0x85) {		/* Start of the file entry block? */
2156:Middlewares/Third_Party/FatFs/src/ff.c **** 					dp->blk_ofs = dp->dptr;	/* Get location of the block */
2157:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = load_xdir(dp);	/* Load the entry block */
2158:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res == FR_OK) {
2159:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->obj.attr = fs->dirbuf[XDIR_Attr] & AM_MASK;	/* Get attribute */
2160:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
2161:Middlewares/Third_Party/FatFs/src/ff.c **** 					break;
2162:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2163:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2164:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else
2165:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 65


2166:Middlewares/Third_Party/FatFs/src/ff.c **** 		{	/* On the FAT12/16/32 volume */
2167:Middlewares/Third_Party/FatFs/src/ff.c **** 			dp->obj.attr = a = dp->dir[DIR_Attr] & AM_MASK;	/* Get attribute */
2168:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0	/* LFN configuration */
2169:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (c == DDEM || c == '.' || (int)((a & ~AM_ARC) == AM_VOL) != vol) {	/* An entry without valid 
2170:Middlewares/Third_Party/FatFs/src/ff.c **** 				ord = 0xFF;
2171:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
2172:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (a == AM_LFN) {			/* An LFN entry is found */
2173:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (c & LLEF) {			/* Is it start of an LFN sequence? */
2174:Middlewares/Third_Party/FatFs/src/ff.c **** 						sum = dp->dir[LDIR_Chksum];
2175:Middlewares/Third_Party/FatFs/src/ff.c **** 						c &= (BYTE)~LLEF; ord = c;
2176:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->blk_ofs = dp->dptr;
2177:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
2178:Middlewares/Third_Party/FatFs/src/ff.c **** 					/* Check LFN validity and capture it */
2179:Middlewares/Third_Party/FatFs/src/ff.c **** 					ord = (c == ord && sum == dp->dir[LDIR_Chksum] && pick_lfn(fs->lfnbuf, dp->dir)) ? ord - 1 : 0
2180:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {					/* An SFN entry is found */
2181:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (ord || sum != sum_sfn(dp->dir)) {	/* Is there a valid LFN? */
2182:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->blk_ofs = 0xFFFFFFFF;			/* It has no LFN. */
2183:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
2184:Middlewares/Third_Party/FatFs/src/ff.c **** 					break;
2185:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2186:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2187:Middlewares/Third_Party/FatFs/src/ff.c **** #else		/* Non LFN configuration */
2188:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (c != DDEM && c != '.' && a != AM_LFN && (int)((a & ~AM_ARC) == AM_VOL) == vol) {	/* Is it a 
2189:Middlewares/Third_Party/FatFs/src/ff.c **** 				break;
2190:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2191:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2192:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2193:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_next(dp, 0);		/* Next entry */
2194:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) break;
2195:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2196:Middlewares/Third_Party/FatFs/src/ff.c **** 
2197:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) dp->sect = 0;		/* Terminate the read operation on error or EOT */
2198:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
2199:Middlewares/Third_Party/FatFs/src/ff.c **** }
2200:Middlewares/Third_Party/FatFs/src/ff.c **** 
2201:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* _FS_MINIMIZE <= 1 || _USE_LABEL || _FS_RPATH >= 2 */
2202:Middlewares/Third_Party/FatFs/src/ff.c **** 
2203:Middlewares/Third_Party/FatFs/src/ff.c **** 
2204:Middlewares/Third_Party/FatFs/src/ff.c **** 
2205:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2206:Middlewares/Third_Party/FatFs/src/ff.c **** /* Directory handling - Find an object in the directory                  */
2207:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2208:Middlewares/Third_Party/FatFs/src/ff.c **** 
2209:Middlewares/Third_Party/FatFs/src/ff.c **** static
2210:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT dir_find (	/* FR_OK(0):succeeded, !=0:error */
2211:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp			/* Pointer to the directory object with the file name */
2212:Middlewares/Third_Party/FatFs/src/ff.c **** )
2213:Middlewares/Third_Party/FatFs/src/ff.c **** {
2214:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
2215:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = dp->obj.fs;
2216:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE c;
2217:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0
2218:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE a, ord, sum;
2219:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2220:Middlewares/Third_Party/FatFs/src/ff.c **** 
2221:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = dir_sdi(dp, 0);			/* Rewind directory object */
2222:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) return res;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 66


2223:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
2224:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_EXFAT) {	/* On the exFAT volume */
2225:Middlewares/Third_Party/FatFs/src/ff.c **** 		BYTE nc;
2226:Middlewares/Third_Party/FatFs/src/ff.c **** 		UINT di, ni;
2227:Middlewares/Third_Party/FatFs/src/ff.c **** 		WORD hash = xname_sum(fs->lfnbuf);		/* Hash value of the name to find */
2228:Middlewares/Third_Party/FatFs/src/ff.c **** 
2229:Middlewares/Third_Party/FatFs/src/ff.c **** 		while ((res = dir_read(dp, 0)) == FR_OK) {	/* Read an item */
2230:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_LFN < 255
2231:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->dirbuf[XDIR_NumName] > _MAX_LFN) continue;			/* Skip comparison if inaccessible object n
2232:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2233:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ld_word(fs->dirbuf + XDIR_NameHash) != hash) continue;	/* Skip comparison if hash mismatched
2234:Middlewares/Third_Party/FatFs/src/ff.c **** 			for (nc = fs->dirbuf[XDIR_NumName], di = SZDIRE * 2, ni = 0; nc; nc--, di += 2, ni++) {	/* Compa
2235:Middlewares/Third_Party/FatFs/src/ff.c **** 				if ((di % SZDIRE) == 0) di += 2;
2236:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (ff_wtoupper(ld_word(fs->dirbuf + di)) != ff_wtoupper(fs->lfnbuf[ni])) break;
2237:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2238:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (nc == 0 && !fs->lfnbuf[ni]) break;	/* Name matched? */
2239:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2240:Middlewares/Third_Party/FatFs/src/ff.c **** 		return res;
2241:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2242:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2243:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* On the FAT12/16/32 volume */
2244:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0
2245:Middlewares/Third_Party/FatFs/src/ff.c **** 	ord = sum = 0xFF; dp->blk_ofs = 0xFFFFFFFF;	/* Reset LFN sequence */
2246:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2247:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
2248:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(fs, dp->sect);
2249:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) break;
2250:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = dp->dir[DIR_Name];
2251:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
2252:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0	/* LFN configuration */
2253:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->obj.attr = a = dp->dir[DIR_Attr] & AM_MASK;
2254:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == DDEM || ((a & AM_VOL) && a != AM_LFN)) {	/* An entry without valid data */
2255:Middlewares/Third_Party/FatFs/src/ff.c **** 			ord = 0xFF; dp->blk_ofs = 0xFFFFFFFF;	/* Reset LFN sequence */
2256:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
2257:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (a == AM_LFN) {			/* An LFN entry is found */
2258:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!(dp->fn[NSFLAG] & NS_NOLFN)) {
2259:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (c & LLEF) {		/* Is it start of LFN sequence? */
2260:Middlewares/Third_Party/FatFs/src/ff.c **** 						sum = dp->dir[LDIR_Chksum];
2261:Middlewares/Third_Party/FatFs/src/ff.c **** 						c &= (BYTE)~LLEF; ord = c;	/* LFN start order */
2262:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->blk_ofs = dp->dptr;	/* Start offset of LFN */
2263:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
2264:Middlewares/Third_Party/FatFs/src/ff.c **** 					/* Check validity of the LFN entry and compare it with given name */
2265:Middlewares/Third_Party/FatFs/src/ff.c **** 					ord = (c == ord && sum == dp->dir[LDIR_Chksum] && cmp_lfn(fs->lfnbuf, dp->dir)) ? ord - 1 : 0x
2266:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2267:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {					/* An SFN entry is found */
2268:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!ord && sum == sum_sfn(dp->dir)) break;	/* LFN matched? */
2269:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!(dp->fn[NSFLAG] & NS_LOSS) && !mem_cmp(dp->dir, dp->fn, 11)) break;	/* SFN matched? */
2270:Middlewares/Third_Party/FatFs/src/ff.c **** 				ord = 0xFF; dp->blk_ofs = 0xFFFFFFFF;	/* Reset LFN sequence */
2271:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2272:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2273:Middlewares/Third_Party/FatFs/src/ff.c **** #else		/* Non LFN configuration */
2274:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->obj.attr = dp->dir[DIR_Attr] & AM_MASK;
2275:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!(dp->dir[DIR_Attr] & AM_VOL) && !mem_cmp(dp->dir, dp->fn, 11)) break;	/* Is it a valid entry
2276:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2277:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_next(dp, 0);	/* Next entry */
2278:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (res == FR_OK);
2279:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 67


2280:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
2281:Middlewares/Third_Party/FatFs/src/ff.c **** }
2282:Middlewares/Third_Party/FatFs/src/ff.c **** 
2283:Middlewares/Third_Party/FatFs/src/ff.c **** 
2284:Middlewares/Third_Party/FatFs/src/ff.c **** 
2285:Middlewares/Third_Party/FatFs/src/ff.c **** 
2286:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
2287:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2288:Middlewares/Third_Party/FatFs/src/ff.c **** /* Register an object to the directory                                   */
2289:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2290:Middlewares/Third_Party/FatFs/src/ff.c **** 
2291:Middlewares/Third_Party/FatFs/src/ff.c **** static
2292:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT dir_register (	/* FR_OK:succeeded, FR_DENIED:no free entry or too many SFN collision, FR_DI
2293:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp				/* Target directory with object name to be created */
2294:Middlewares/Third_Party/FatFs/src/ff.c **** )
2295:Middlewares/Third_Party/FatFs/src/ff.c **** {
2296:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
2297:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = dp->obj.fs;
2298:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0	/* LFN configuration */
2299:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT n, nlen, nent;
2300:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE sn[12], sum;
2301:Middlewares/Third_Party/FatFs/src/ff.c **** 
2302:Middlewares/Third_Party/FatFs/src/ff.c **** 
2303:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (dp->fn[NSFLAG] & (NS_DOT | NS_NONAME)) return FR_INVALID_NAME;	/* Check name validity */
2304:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (nlen = 0; fs->lfnbuf[nlen]; nlen++) ;	/* Get lfn length */
2305:Middlewares/Third_Party/FatFs/src/ff.c **** 
2306:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
2307:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_EXFAT) {	/* On the exFAT volume */
2308:Middlewares/Third_Party/FatFs/src/ff.c **** 		DIR dj;
2309:Middlewares/Third_Party/FatFs/src/ff.c **** 
2310:Middlewares/Third_Party/FatFs/src/ff.c **** 		nent = (nlen + 14) / 15 + 2;	/* Number of entries to allocate (85+C0+C1s) */
2311:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_alloc(dp, nent);		/* Allocate entries */
2312:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) return res;
2313:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->blk_ofs = dp->dptr - SZDIRE * (nent - 1);	/* Set the allocated entry block offset */
2314:Middlewares/Third_Party/FatFs/src/ff.c **** 
2315:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (dp->obj.sclust != 0 && (dp->obj.stat & 4)) {	/* Has the sub-directory been stretched? */
2316:Middlewares/Third_Party/FatFs/src/ff.c **** 			dp->obj.objsize += (DWORD)fs->csize * SS(fs);	/* Increase the directory size by cluster size */
2317:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = fill_first_frag(&dp->obj);				/* Fill first fragment on the FAT if needed */
2318:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) return res;
2319:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = fill_last_frag(&dp->obj, dp->clust, 0xFFFFFFFF);	/* Fill last fragment on the FAT if neede
2320:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) return res;
2321:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = load_obj_dir(&dj, &dp->obj);				/* Load the object status */
2322:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) return res;
2323:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_qword(fs->dirbuf + XDIR_FileSize, dp->obj.objsize);		/* Update the allocation status */
2324:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_qword(fs->dirbuf + XDIR_ValidFileSize, dp->obj.objsize);
2325:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->dirbuf[XDIR_GenFlags] = dp->obj.stat | 1;
2326:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = store_xdir(&dj);							/* Store the object status */
2327:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) return res;
2328:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2329:Middlewares/Third_Party/FatFs/src/ff.c **** 
2330:Middlewares/Third_Party/FatFs/src/ff.c **** 		create_xdir(fs->dirbuf, fs->lfnbuf);	/* Create on-memory directory block to be written later */
2331:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_OK;
2332:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2333:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2334:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* On the FAT12/16/32 volume */
2335:Middlewares/Third_Party/FatFs/src/ff.c **** 	mem_cpy(sn, dp->fn, 12);
2336:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (sn[NSFLAG] & NS_LOSS) {			/* When LFN is out of 8.3 format, generate a numbered name */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 68


2337:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->fn[NSFLAG] = NS_NOLFN;		/* Find only SFN */
2338:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (n = 1; n < 100; n++) {
2339:Middlewares/Third_Party/FatFs/src/ff.c **** 			gen_numname(dp->fn, sn, fs->lfnbuf, n);	/* Generate a numbered name */
2340:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_find(dp);				/* Check if the name collides with existing SFN */
2341:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
2342:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2343:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (n == 100) return FR_DENIED;		/* Abort if too many collisions */
2344:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_NO_FILE) return res;	/* Abort if the result is other than 'not collided' */
2345:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->fn[NSFLAG] = sn[NSFLAG];
2346:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2347:Middlewares/Third_Party/FatFs/src/ff.c **** 
2348:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Create an SFN with/without LFNs. */
2349:Middlewares/Third_Party/FatFs/src/ff.c **** 	nent = (sn[NSFLAG] & NS_LFN) ? (nlen + 12) / 13 + 1 : 1;	/* Number of entries to allocate */
2350:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = dir_alloc(dp, nent);		/* Allocate entries */
2351:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK && --nent) {	/* Set LFN entry if needed */
2352:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_sdi(dp, dp->dptr - nent * SZDIRE);
2353:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
2354:Middlewares/Third_Party/FatFs/src/ff.c **** 			sum = sum_sfn(dp->fn);	/* Checksum value of the SFN tied to the LFN */
2355:Middlewares/Third_Party/FatFs/src/ff.c **** 			do {					/* Store LFN entries in bottom first */
2356:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = move_window(fs, dp->sect);
2357:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res != FR_OK) break;
2358:Middlewares/Third_Party/FatFs/src/ff.c **** 				put_lfn(fs->lfnbuf, dp->dir, (BYTE)nent, sum);
2359:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->wflag = 1;
2360:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_next(dp, 0);	/* Next entry */
2361:Middlewares/Third_Party/FatFs/src/ff.c **** 			} while (res == FR_OK && --nent);
2362:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2363:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2364:Middlewares/Third_Party/FatFs/src/ff.c **** 
2365:Middlewares/Third_Party/FatFs/src/ff.c **** #else	/* Non LFN configuration */
2366:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = dir_alloc(dp, 1);		/* Allocate an entry for SFN */
2367:Middlewares/Third_Party/FatFs/src/ff.c **** 
2368:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2369:Middlewares/Third_Party/FatFs/src/ff.c **** 
2370:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Set SFN entry */
2371:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
2372:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(fs, dp->sect);
2373:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
2374:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(dp->dir, 0, SZDIRE);	/* Clean the entry */
2375:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_cpy(dp->dir + DIR_Name, dp->fn, 11);	/* Put SFN */
2376:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0
2377:Middlewares/Third_Party/FatFs/src/ff.c **** 			dp->dir[DIR_NTres] = dp->fn[NSFLAG] & (NS_BODY | NS_EXT);	/* Put NT flag */
2378:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2379:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
2380:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2381:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2382:Middlewares/Third_Party/FatFs/src/ff.c **** 
2383:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
2384:Middlewares/Third_Party/FatFs/src/ff.c **** }
2385:Middlewares/Third_Party/FatFs/src/ff.c **** 
2386:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
2387:Middlewares/Third_Party/FatFs/src/ff.c **** 
2388:Middlewares/Third_Party/FatFs/src/ff.c **** 
2389:Middlewares/Third_Party/FatFs/src/ff.c **** 
2390:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY && _FS_MINIMIZE == 0
2391:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2392:Middlewares/Third_Party/FatFs/src/ff.c **** /* Remove an object from the directory                                   */
2393:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 69


2394:Middlewares/Third_Party/FatFs/src/ff.c **** 
2395:Middlewares/Third_Party/FatFs/src/ff.c **** static
2396:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT dir_remove (	/* FR_OK:Succeeded, FR_DISK_ERR:A disk error */
2397:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp				/* Directory object pointing the entry to be removed */
2398:Middlewares/Third_Party/FatFs/src/ff.c **** )
2399:Middlewares/Third_Party/FatFs/src/ff.c **** {
2400:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
2401:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = dp->obj.fs;
2402:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0	/* LFN configuration */
2403:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD last = dp->dptr;
2404:Middlewares/Third_Party/FatFs/src/ff.c **** 
2405:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = (dp->blk_ofs == 0xFFFFFFFF) ? FR_OK : dir_sdi(dp, dp->blk_ofs);	/* Goto top of the entry blo
2406:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
2407:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
2408:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(fs, dp->sect);
2409:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
2410:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Mark an entry 'deleted' */
2411:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (_FS_EXFAT && fs->fs_type == FS_EXFAT) {	/* On the exFAT volume */
2412:Middlewares/Third_Party/FatFs/src/ff.c **** 				dp->dir[XDIR_Type] &= 0x7F;
2413:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {									/* On the FAT12/16/32 volume */
2414:Middlewares/Third_Party/FatFs/src/ff.c **** 				dp->dir[DIR_Name] = DDEM;
2415:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2416:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
2417:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dp->dptr >= last) break;	/* If reached last entry then all entries of the object has been de
2418:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_next(dp, 0);	/* Next entry */
2419:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (res == FR_OK);
2420:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_NO_FILE) res = FR_INT_ERR;
2421:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2422:Middlewares/Third_Party/FatFs/src/ff.c **** #else			/* Non LFN configuration */
2423:Middlewares/Third_Party/FatFs/src/ff.c **** 
2424:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = move_window(fs, dp->sect);
2425:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
2426:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->dir[DIR_Name] = DDEM;
2427:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->wflag = 1;
2428:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2429:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2430:Middlewares/Third_Party/FatFs/src/ff.c **** 
2431:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
2432:Middlewares/Third_Party/FatFs/src/ff.c **** }
2433:Middlewares/Third_Party/FatFs/src/ff.c **** 
2434:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY && _FS_MINIMIZE == 0 */
2435:Middlewares/Third_Party/FatFs/src/ff.c **** 
2436:Middlewares/Third_Party/FatFs/src/ff.c **** 
2437:Middlewares/Third_Party/FatFs/src/ff.c **** 
2438:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 1 || _FS_RPATH >= 2
2439:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2440:Middlewares/Third_Party/FatFs/src/ff.c **** /* Get file information from directory entry                             */
2441:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2442:Middlewares/Third_Party/FatFs/src/ff.c **** 
2443:Middlewares/Third_Party/FatFs/src/ff.c **** static
2444:Middlewares/Third_Party/FatFs/src/ff.c **** void get_fileinfo (		/* No return code */
2445:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,			/* Pointer to the directory object */
2446:Middlewares/Third_Party/FatFs/src/ff.c **** 	FILINFO* fno	 	/* Pointer to the file information to be filled */
2447:Middlewares/Third_Party/FatFs/src/ff.c **** )
2448:Middlewares/Third_Party/FatFs/src/ff.c **** {
2449:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, j;
2450:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR c;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 70


2451:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD tm;
2452:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0
2453:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR w, lfv;
2454:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = dp->obj.fs;
2455:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2456:Middlewares/Third_Party/FatFs/src/ff.c **** 
2457:Middlewares/Third_Party/FatFs/src/ff.c **** 
2458:Middlewares/Third_Party/FatFs/src/ff.c **** 	fno->fname[0] = 0;		/* Invaidate file info */
2459:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!dp->sect) return;	/* Exit if read pointer has reached end of directory */
2460:Middlewares/Third_Party/FatFs/src/ff.c **** 
2461:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0	/* LFN configuration */
2462:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
2463:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_EXFAT) {	/* On the exFAT volume */
2464:Middlewares/Third_Party/FatFs/src/ff.c **** 		get_xdir_info(fs->dirbuf, fno);
2465:Middlewares/Third_Party/FatFs/src/ff.c **** 		return;
2466:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else
2467:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2468:Middlewares/Third_Party/FatFs/src/ff.c **** 	{	/* On the FAT12/16/32 volume */
2469:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (dp->blk_ofs != 0xFFFFFFFF) {	/* Get LFN if available */
2470:Middlewares/Third_Party/FatFs/src/ff.c **** 			i = j = 0;
2471:Middlewares/Third_Party/FatFs/src/ff.c **** 			while ((w = fs->lfnbuf[j++]) != 0) {	/* Get an LFN character */
2472:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_LFN_UNICODE
2473:Middlewares/Third_Party/FatFs/src/ff.c **** 				w = ff_convert(w, 0);		/* Unicode -> OEM */
2474:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (w == 0) { i = 0; break; }	/* No LFN if it could not be converted */
2475:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (_DF1S && w >= 0x100) {	/* Put 1st byte if it is a DBC (always false at SBCS cfg) */
2476:Middlewares/Third_Party/FatFs/src/ff.c **** 					fno->fname[i++] = (char)(w >> 8);
2477:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2478:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2479:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (i >= _MAX_LFN) { i = 0; break; }	/* No LFN if buffer overflow */
2480:Middlewares/Third_Party/FatFs/src/ff.c **** 				fno->fname[i++] = (TCHAR)w;
2481:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2482:Middlewares/Third_Party/FatFs/src/ff.c **** 			fno->fname[i] = 0;	/* Terminate the LFN */
2483:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2484:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2485:Middlewares/Third_Party/FatFs/src/ff.c **** 
2486:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = j = 0;
2487:Middlewares/Third_Party/FatFs/src/ff.c **** 	lfv = fno->fname[i];	/* LFN is exist if non-zero */
2488:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (i < 11) {		/* Copy name body and extension */
2489:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = (TCHAR)dp->dir[i++];
2490:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == ' ') continue;				/* Skip padding spaces */
2491:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == RDDEM) c = (TCHAR)DDEM;	/* Restore replaced DDEM character */
2492:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == 9) {						/* Insert a . if extension is exist */
2493:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!lfv) fno->fname[j] = '.';
2494:Middlewares/Third_Party/FatFs/src/ff.c **** 			fno->altname[j++] = '.';
2495:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2496:Middlewares/Third_Party/FatFs/src/ff.c **** #if _LFN_UNICODE
2497:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (IsDBCS1(c) && i != 8 && i != 11 && IsDBCS2(dp->dir[i])) {
2498:Middlewares/Third_Party/FatFs/src/ff.c **** 			c = c << 8 | dp->dir[i++];
2499:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2500:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = ff_convert(c, 1);	/* OEM -> Unicode */
2501:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!c) c = '?';
2502:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2503:Middlewares/Third_Party/FatFs/src/ff.c **** 		fno->altname[j] = c;
2504:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!lfv) {
2505:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (IsUpper(c) && (dp->dir[DIR_NTres] & ((i >= 9) ? NS_EXT : NS_BODY))) {
2506:Middlewares/Third_Party/FatFs/src/ff.c **** 				c += 0x20;			/* To lower */
2507:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 71


2508:Middlewares/Third_Party/FatFs/src/ff.c **** 			fno->fname[j] = c;
2509:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2510:Middlewares/Third_Party/FatFs/src/ff.c **** 		j++;
2511:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2512:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!lfv) {
2513:Middlewares/Third_Party/FatFs/src/ff.c **** 		fno->fname[j] = 0;
2514:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!dp->dir[DIR_NTres]) j = 0;	/* Altname is no longer needed if neither LFN nor case info is ex
2515:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2516:Middlewares/Third_Party/FatFs/src/ff.c **** 	fno->altname[j] = 0;	/* Terminate the SFN */
2517:Middlewares/Third_Party/FatFs/src/ff.c **** 
2518:Middlewares/Third_Party/FatFs/src/ff.c **** #else	/* Non-LFN configuration */
2519:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = j = 0;
2520:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (i < 11) {		/* Copy name body and extension */
2521:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = (TCHAR)dp->dir[i++];
2522:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == ' ') continue;				/* Skip padding spaces */
2523:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == RDDEM) c = (TCHAR)DDEM;	/* Restore replaced DDEM character */
2524:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == 9) fno->fname[j++] = '.';	/* Insert a . if extension is exist */
2525:Middlewares/Third_Party/FatFs/src/ff.c **** 		fno->fname[j++] = c;
2526:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2527:Middlewares/Third_Party/FatFs/src/ff.c **** 	fno->fname[j] = 0;
2528:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2529:Middlewares/Third_Party/FatFs/src/ff.c **** 
2530:Middlewares/Third_Party/FatFs/src/ff.c **** 	fno->fattrib = dp->dir[DIR_Attr];				/* Attribute */
2531:Middlewares/Third_Party/FatFs/src/ff.c **** 	fno->fsize = ld_dword(dp->dir + DIR_FileSize);	/* Size */
2532:Middlewares/Third_Party/FatFs/src/ff.c **** 	tm = ld_dword(dp->dir + DIR_ModTime);			/* Timestamp */
2533:Middlewares/Third_Party/FatFs/src/ff.c **** 	fno->ftime = (WORD)tm; fno->fdate = (WORD)(tm >> 16);
2534:Middlewares/Third_Party/FatFs/src/ff.c **** }
2535:Middlewares/Third_Party/FatFs/src/ff.c **** 
2536:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _FS_MINIMIZE <= 1 || _FS_RPATH >= 2 */
2537:Middlewares/Third_Party/FatFs/src/ff.c **** 
2538:Middlewares/Third_Party/FatFs/src/ff.c **** 
2539:Middlewares/Third_Party/FatFs/src/ff.c **** 
2540:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FIND && _FS_MINIMIZE <= 1
2541:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2542:Middlewares/Third_Party/FatFs/src/ff.c **** /* Pattern matching                                                      */
2543:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2544:Middlewares/Third_Party/FatFs/src/ff.c **** 
2545:Middlewares/Third_Party/FatFs/src/ff.c **** static
2546:Middlewares/Third_Party/FatFs/src/ff.c **** WCHAR get_achar (		/* Get a character and advances ptr 1 or 2 */
2547:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR** ptr	/* Pointer to pointer to the SBCS/DBCS/Unicode string */
2548:Middlewares/Third_Party/FatFs/src/ff.c **** )
2549:Middlewares/Third_Party/FatFs/src/ff.c **** {
2550:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_LFN_UNICODE
2551:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR chr;
2552:Middlewares/Third_Party/FatFs/src/ff.c **** 
2553:Middlewares/Third_Party/FatFs/src/ff.c **** 	chr = (BYTE)*(*ptr)++;					/* Get a byte */
2554:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (IsLower(chr)) chr -= 0x20;			/* To upper ASCII char */
2555:Middlewares/Third_Party/FatFs/src/ff.c **** #ifdef _EXCVT
2556:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (chr >= 0x80) chr = ExCvt[chr - 0x80];	/* To upper SBCS extended char */
2557:Middlewares/Third_Party/FatFs/src/ff.c **** #else
2558:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (IsDBCS1(chr) && IsDBCS2(**ptr)) {		/* Get DBC 2nd byte if needed */
2559:Middlewares/Third_Party/FatFs/src/ff.c **** 		chr = chr << 8 | (BYTE)*(*ptr)++;
2560:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2561:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2562:Middlewares/Third_Party/FatFs/src/ff.c **** 	return chr;
2563:Middlewares/Third_Party/FatFs/src/ff.c **** #else
2564:Middlewares/Third_Party/FatFs/src/ff.c **** 	return ff_wtoupper(*(*ptr)++);			/* Get a word and to upper */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 72


2565:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2566:Middlewares/Third_Party/FatFs/src/ff.c **** }
2567:Middlewares/Third_Party/FatFs/src/ff.c **** 
2568:Middlewares/Third_Party/FatFs/src/ff.c **** 
2569:Middlewares/Third_Party/FatFs/src/ff.c **** static
2570:Middlewares/Third_Party/FatFs/src/ff.c **** int pattern_matching (	/* 0:not matched, 1:matched */
2571:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* pat,	/* Matching pattern */
2572:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* nam,	/* String to be tested */
2573:Middlewares/Third_Party/FatFs/src/ff.c **** 	int skip,			/* Number of pre-skip chars (number of ?s) */
2574:Middlewares/Third_Party/FatFs/src/ff.c **** 	int inf				/* Infinite search (* specified) */
2575:Middlewares/Third_Party/FatFs/src/ff.c **** )
2576:Middlewares/Third_Party/FatFs/src/ff.c **** {
2577:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR *pp, *np;
2578:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR pc, nc;
2579:Middlewares/Third_Party/FatFs/src/ff.c **** 	int nm, nx;
2580:Middlewares/Third_Party/FatFs/src/ff.c **** 
2581:Middlewares/Third_Party/FatFs/src/ff.c **** 
2582:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (skip--) {				/* Pre-skip name chars */
2583:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!get_achar(&nam)) return 0;	/* Branch mismatched if less name chars */
2584:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2585:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!*pat && inf) return 1;		/* (short circuit) */
2586:Middlewares/Third_Party/FatFs/src/ff.c **** 
2587:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
2588:Middlewares/Third_Party/FatFs/src/ff.c **** 		pp = pat; np = nam;			/* Top of pattern and name to match */
2589:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (;;) {
2590:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (*pp == '?' || *pp == '*') {	/* Wildcard? */
2591:Middlewares/Third_Party/FatFs/src/ff.c **** 				nm = nx = 0;
2592:Middlewares/Third_Party/FatFs/src/ff.c **** 				do {				/* Analyze the wildcard chars */
2593:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (*pp++ == '?') nm++; else nx = 1;
2594:Middlewares/Third_Party/FatFs/src/ff.c **** 				} while (*pp == '?' || *pp == '*');
2595:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (pattern_matching(pp, np, nm, nx)) return 1;	/* Test new branch (recurs upto number of wildc
2596:Middlewares/Third_Party/FatFs/src/ff.c **** 				nc = *np; break;	/* Branch mismatched */
2597:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2598:Middlewares/Third_Party/FatFs/src/ff.c **** 			pc = get_achar(&pp);	/* Get a pattern char */
2599:Middlewares/Third_Party/FatFs/src/ff.c **** 			nc = get_achar(&np);	/* Get a name char */
2600:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (pc != nc) break;	/* Branch mismatched? */
2601:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (pc == 0) return 1;	/* Branch matched? (matched at end of both strings) */
2602:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2603:Middlewares/Third_Party/FatFs/src/ff.c **** 		get_achar(&nam);			/* nam++ */
2604:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (inf && nc);			/* Retry until end of name if infinite search is specified */
2605:Middlewares/Third_Party/FatFs/src/ff.c **** 
2606:Middlewares/Third_Party/FatFs/src/ff.c **** 	return 0;
2607:Middlewares/Third_Party/FatFs/src/ff.c **** }
2608:Middlewares/Third_Party/FatFs/src/ff.c **** 
2609:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _USE_FIND && _FS_MINIMIZE <= 1 */
2610:Middlewares/Third_Party/FatFs/src/ff.c **** 
2611:Middlewares/Third_Party/FatFs/src/ff.c **** 
2612:Middlewares/Third_Party/FatFs/src/ff.c **** 
2613:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2614:Middlewares/Third_Party/FatFs/src/ff.c **** /* Pick a top segment and create the object name in directory form       */
2615:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2616:Middlewares/Third_Party/FatFs/src/ff.c **** 
2617:Middlewares/Third_Party/FatFs/src/ff.c **** static
2618:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT create_name (	/* FR_OK: successful, FR_INVALID_NAME: could not create */
2619:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,			/* Pointer to the directory object */
2620:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR** path	/* Pointer to pointer to the segment in the path string */
2621:Middlewares/Third_Party/FatFs/src/ff.c **** )
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 73


2622:Middlewares/Third_Party/FatFs/src/ff.c **** {
2623:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0	/* LFN configuration */
2624:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE b, cf;
2625:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR w, *lfn;
2626:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, ni, si, di;
2627:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR *p;
2628:Middlewares/Third_Party/FatFs/src/ff.c **** 
2629:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Create LFN in Unicode */
2630:Middlewares/Third_Party/FatFs/src/ff.c **** 	p = *path; lfn = dp->obj.fs->lfnbuf; si = di = 0;
2631:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (;;) {
2632:Middlewares/Third_Party/FatFs/src/ff.c **** 		w = p[si++];					/* Get a character */
2633:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (w < ' ') break;				/* Break if end of the path name */
2634:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (w == '/' || w == '\\') {	/* Break if a separator is found */
2635:Middlewares/Third_Party/FatFs/src/ff.c **** 			while (p[si] == '/' || p[si] == '\\') si++;	/* Skip duplicated separator if exist */
2636:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
2637:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2638:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (di >= _MAX_LFN) return FR_INVALID_NAME;	/* Reject too long name */
2639:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_LFN_UNICODE
2640:Middlewares/Third_Party/FatFs/src/ff.c **** 		w &= 0xFF;
2641:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (IsDBCS1(w)) {				/* Check if it is a DBC 1st byte (always false on SBCS cfg) */
2642:Middlewares/Third_Party/FatFs/src/ff.c **** 			b = (BYTE)p[si++];			/* Get 2nd byte */
2643:Middlewares/Third_Party/FatFs/src/ff.c **** 			w = (w << 8) + b;			/* Create a DBC */
2644:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!IsDBCS2(b)) return FR_INVALID_NAME;	/* Reject invalid sequence */
2645:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2646:Middlewares/Third_Party/FatFs/src/ff.c **** 		w = ff_convert(w, 1);			/* Convert ANSI/OEM to Unicode */
2647:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!w) return FR_INVALID_NAME;	/* Reject invalid code */
2648:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2649:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (w < 0x80 && chk_chr("\"*:<>\?|\x7F", w)) return FR_INVALID_NAME;	/* Reject illegal characters
2650:Middlewares/Third_Party/FatFs/src/ff.c **** 		lfn[di++] = w;					/* Store the Unicode character */
2651:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2652:Middlewares/Third_Party/FatFs/src/ff.c **** 	*path = &p[si];						/* Return pointer to the next segment */
2653:Middlewares/Third_Party/FatFs/src/ff.c **** 	cf = (w < ' ') ? NS_LAST : 0;		/* Set last segment flag if end of the path */
2654:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH != 0
2655:Middlewares/Third_Party/FatFs/src/ff.c **** 	if ((di == 1 && lfn[di - 1] == '.') ||
2656:Middlewares/Third_Party/FatFs/src/ff.c **** 		(di == 2 && lfn[di - 1] == '.' && lfn[di - 2] == '.')) {	/* Is this segment a dot name? */
2657:Middlewares/Third_Party/FatFs/src/ff.c **** 		lfn[di] = 0;
2658:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = 0; i < 11; i++)		/* Create dot name for SFN entry */
2659:Middlewares/Third_Party/FatFs/src/ff.c **** 			dp->fn[i] = (i < di) ? '.' : ' ';
2660:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->fn[i] = cf | NS_DOT;		/* This is a dot entry */
2661:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_OK;
2662:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2663:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2664:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (di) {						/* Snip off trailing spaces and dots if exist */
2665:Middlewares/Third_Party/FatFs/src/ff.c **** 		w = lfn[di - 1];
2666:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (w != ' ' && w != '.') break;
2667:Middlewares/Third_Party/FatFs/src/ff.c **** 		di--;
2668:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2669:Middlewares/Third_Party/FatFs/src/ff.c **** 	lfn[di] = 0;						/* LFN is created */
2670:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (di == 0) return FR_INVALID_NAME;	/* Reject nul name */
2671:Middlewares/Third_Party/FatFs/src/ff.c **** 
2672:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Create SFN in directory form */
2673:Middlewares/Third_Party/FatFs/src/ff.c **** 	mem_set(dp->fn, ' ', 11);
2674:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (si = 0; lfn[si] == ' ' || lfn[si] == '.'; si++) ;	/* Strip leading spaces and dots */
2675:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (si) cf |= NS_LOSS | NS_LFN;
2676:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (di && lfn[di - 1] != '.') di--;	/* Find extension (di<=si: no extension) */
2677:Middlewares/Third_Party/FatFs/src/ff.c **** 
2678:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = b = 0; ni = 8;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 74


2679:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (;;) {
2680:Middlewares/Third_Party/FatFs/src/ff.c **** 		w = lfn[si++];					/* Get an LFN character */
2681:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!w) break;					/* Break on end of the LFN */
2682:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (w == ' ' || (w == '.' && si != di)) {	/* Remove spaces and dots */
2683:Middlewares/Third_Party/FatFs/src/ff.c **** 			cf |= NS_LOSS | NS_LFN; continue;
2684:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2685:Middlewares/Third_Party/FatFs/src/ff.c **** 
2686:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i >= ni || si == di) {		/* Extension or end of SFN */
2687:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ni == 11) {				/* Long extension */
2688:Middlewares/Third_Party/FatFs/src/ff.c **** 				cf |= NS_LOSS | NS_LFN; break;
2689:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2690:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (si != di) cf |= NS_LOSS | NS_LFN;	/* Out of 8.3 format */
2691:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (si > di) break;			/* No extension */
2692:Middlewares/Third_Party/FatFs/src/ff.c **** 			si = di; i = 8; ni = 11;	/* Enter extension section */
2693:Middlewares/Third_Party/FatFs/src/ff.c **** 			b <<= 2; continue;
2694:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2695:Middlewares/Third_Party/FatFs/src/ff.c **** 
2696:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (w >= 0x80) {				/* Non ASCII character */
2697:Middlewares/Third_Party/FatFs/src/ff.c **** #ifdef _EXCVT
2698:Middlewares/Third_Party/FatFs/src/ff.c **** 			w = ff_convert(w, 0);		/* Unicode -> OEM code */
2699:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (w) w = ExCvt[w - 0x80];	/* Convert extended character to upper (SBCS) */
2700:Middlewares/Third_Party/FatFs/src/ff.c **** #else
2701:Middlewares/Third_Party/FatFs/src/ff.c **** 			w = ff_convert(ff_wtoupper(w), 0);	/* Upper converted Unicode -> OEM code */
2702:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2703:Middlewares/Third_Party/FatFs/src/ff.c **** 			cf |= NS_LFN;				/* Force create LFN entry */
2704:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2705:Middlewares/Third_Party/FatFs/src/ff.c **** 
2706:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_DF1S && w >= 0x100) {		/* Is this DBC? (always false at SBCS cfg) */
2707:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i >= ni - 1) {
2708:Middlewares/Third_Party/FatFs/src/ff.c **** 				cf |= NS_LOSS | NS_LFN; i = ni; continue;
2709:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2710:Middlewares/Third_Party/FatFs/src/ff.c **** 			dp->fn[i++] = (BYTE)(w >> 8);
2711:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {						/* SBC */
2712:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!w || chk_chr("+,;=[]", w)) {	/* Replace illegal characters for SFN */
2713:Middlewares/Third_Party/FatFs/src/ff.c **** 				w = '_'; cf |= NS_LOSS | NS_LFN;/* Lossy conversion */
2714:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
2715:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (IsUpper(w)) {		/* ASCII large capital */
2716:Middlewares/Third_Party/FatFs/src/ff.c **** 					b |= 2;
2717:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
2718:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (IsLower(w)) {	/* ASCII small capital */
2719:Middlewares/Third_Party/FatFs/src/ff.c **** 						b |= 1; w -= 0x20;
2720:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
2721:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2722:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2723:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2724:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->fn[i++] = (BYTE)w;
2725:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2726:Middlewares/Third_Party/FatFs/src/ff.c **** 
2727:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (dp->fn[0] == DDEM) dp->fn[0] = RDDEM;	/* If the first character collides with DDEM, replace it
2728:Middlewares/Third_Party/FatFs/src/ff.c **** 
2729:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (ni == 8) b <<= 2;
2730:Middlewares/Third_Party/FatFs/src/ff.c **** 	if ((b & 0x0C) == 0x0C || (b & 0x03) == 0x03) cf |= NS_LFN;	/* Create LFN entry when there are com
2731:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(cf & NS_LFN)) {						/* When LFN is in 8.3 format without extended character, NT flags are c
2732:Middlewares/Third_Party/FatFs/src/ff.c **** 		if ((b & 0x03) == 0x01) cf |= NS_EXT;	/* NT flag (Extension has only small capital) */
2733:Middlewares/Third_Party/FatFs/src/ff.c **** 		if ((b & 0x0C) == 0x04) cf |= NS_BODY;	/* NT flag (Filename has only small capital) */
2734:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2735:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 75


2736:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->fn[NSFLAG] = cf;	/* SFN is created */
2737:Middlewares/Third_Party/FatFs/src/ff.c **** 
2738:Middlewares/Third_Party/FatFs/src/ff.c **** 	return FR_OK;
2739:Middlewares/Third_Party/FatFs/src/ff.c **** 
2740:Middlewares/Third_Party/FatFs/src/ff.c **** 
2741:Middlewares/Third_Party/FatFs/src/ff.c **** #else	/* _USE_LFN != 0 : Non-LFN configuration */
2742:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE c, d, *sfn;
2743:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT ni, si, i;
2744:Middlewares/Third_Party/FatFs/src/ff.c **** 	const char *p;
2745:Middlewares/Third_Party/FatFs/src/ff.c **** 
2746:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Create file name in directory form */
2747:Middlewares/Third_Party/FatFs/src/ff.c **** 	p = *path; sfn = dp->fn;
2748:Middlewares/Third_Party/FatFs/src/ff.c **** 	mem_set(sfn, ' ', 11);
2749:Middlewares/Third_Party/FatFs/src/ff.c **** 	si = i = 0; ni = 8;
2750:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH != 0
2751:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (p[si] == '.') { /* Is this a dot entry? */
2752:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (;;) {
2753:Middlewares/Third_Party/FatFs/src/ff.c **** 			c = (BYTE)p[si++];
2754:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (c != '.' || si >= 3) break;
2755:Middlewares/Third_Party/FatFs/src/ff.c **** 			sfn[i++] = c;
2756:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2757:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c != '/' && c != '\\' && c > ' ') return FR_INVALID_NAME;
2758:Middlewares/Third_Party/FatFs/src/ff.c **** 		*path = p + si;								/* Return pointer to the next segment */
2759:Middlewares/Third_Party/FatFs/src/ff.c **** 		sfn[NSFLAG] = (c <= ' ') ? NS_LAST | NS_DOT : NS_DOT;	/* Set last segment flag if end of the path
2760:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_OK;
2761:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2762:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2763:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (;;) {
2764:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = (BYTE)p[si++];
2765:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c <= ' ') break; 			/* Break if end of the path name */
2766:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == '/' || c == '\\') {	/* Break if a separator is found */
2767:Middlewares/Third_Party/FatFs/src/ff.c **** 			while (p[si] == '/' || p[si] == '\\') si++;	/* Skip duplicated separator if exist */
2768:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
2769:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2770:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == '.' || i >= ni) {		/* End of body or over size? */
2771:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ni == 11 || c != '.') return FR_INVALID_NAME;	/* Over size or invalid dot */
2772:Middlewares/Third_Party/FatFs/src/ff.c **** 			i = 8; ni = 11;				/* Goto extension */
2773:Middlewares/Third_Party/FatFs/src/ff.c **** 			continue;
2774:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2775:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c >= 0x80) {				/* Extended character? */
2776:Middlewares/Third_Party/FatFs/src/ff.c **** #ifdef _EXCVT
2777:Middlewares/Third_Party/FatFs/src/ff.c **** 			c = ExCvt[c - 0x80];		/* To upper extended characters (SBCS cfg) */
2778:Middlewares/Third_Party/FatFs/src/ff.c **** #else
2779:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_DF1S
2780:Middlewares/Third_Party/FatFs/src/ff.c **** 			return FR_INVALID_NAME;		/* Reject extended characters (ASCII only cfg) */
2781:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2782:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2783:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2784:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (IsDBCS1(c)) {				/* Check if it is a DBC 1st byte (always false at SBCS cfg.) */
2785:Middlewares/Third_Party/FatFs/src/ff.c **** 			d = (BYTE)p[si++];			/* Get 2nd byte */
2786:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!IsDBCS2(d) || i >= ni - 1) return FR_INVALID_NAME;	/* Reject invalid DBC */
2787:Middlewares/Third_Party/FatFs/src/ff.c **** 			sfn[i++] = c;
2788:Middlewares/Third_Party/FatFs/src/ff.c **** 			sfn[i++] = d;
2789:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {						/* SBC */
2790:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (chk_chr("\"*+,:;<=>\?[]|\x7F", c)) return FR_INVALID_NAME;	/* Reject illegal chrs for SFN */
2791:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (IsLower(c)) c -= 0x20;	/* To upper */
2792:Middlewares/Third_Party/FatFs/src/ff.c **** 			sfn[i++] = c;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 76


2793:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2794:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2795:Middlewares/Third_Party/FatFs/src/ff.c **** 	*path = p + si;						/* Return pointer to the next segment */
2796:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (i == 0) return FR_INVALID_NAME;	/* Reject nul string */
2797:Middlewares/Third_Party/FatFs/src/ff.c **** 
2798:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (sfn[0] == DDEM) sfn[0] = RDDEM;	/* If the first character collides with DDEM, replace it with 
2799:Middlewares/Third_Party/FatFs/src/ff.c **** 	sfn[NSFLAG] = (c <= ' ') ? NS_LAST : 0;		/* Set last segment flag if end of the path */
2800:Middlewares/Third_Party/FatFs/src/ff.c **** 
2801:Middlewares/Third_Party/FatFs/src/ff.c **** 	return FR_OK;
2802:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _USE_LFN != 0 */
2803:Middlewares/Third_Party/FatFs/src/ff.c **** }
2804:Middlewares/Third_Party/FatFs/src/ff.c **** 
2805:Middlewares/Third_Party/FatFs/src/ff.c **** 
2806:Middlewares/Third_Party/FatFs/src/ff.c **** 
2807:Middlewares/Third_Party/FatFs/src/ff.c **** 
2808:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2809:Middlewares/Third_Party/FatFs/src/ff.c **** /* Follow a file path                                                    */
2810:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2811:Middlewares/Third_Party/FatFs/src/ff.c **** 
2812:Middlewares/Third_Party/FatFs/src/ff.c **** static
2813:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT follow_path (	/* FR_OK(0): successful, !=0: error code */
2814:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,			/* Directory object to return last directory and found object */
2815:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path	/* Full-path string to find a file or directory */
2816:Middlewares/Third_Party/FatFs/src/ff.c **** )
2817:Middlewares/Third_Party/FatFs/src/ff.c **** {
2818:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
2819:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE ns;
2820:Middlewares/Third_Party/FatFs/src/ff.c **** 	_FDID *obj = &dp->obj;
2821:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = obj->fs;
2822:Middlewares/Third_Party/FatFs/src/ff.c **** 
2823:Middlewares/Third_Party/FatFs/src/ff.c **** 
2824:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH != 0
2825:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (*path != '/' && *path != '\\') {	/* Without heading separator */
2826:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->sclust = fs->cdir;				/* Start from current directory */
2827:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else
2828:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2829:Middlewares/Third_Party/FatFs/src/ff.c **** 	{										/* With heading separator */
2830:Middlewares/Third_Party/FatFs/src/ff.c **** 		while (*path == '/' || *path == '\\') path++;	/* Strip heading separator */
2831:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->sclust = 0;					/* Start from root directory */
2832:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2833:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
2834:Middlewares/Third_Party/FatFs/src/ff.c **** 	obj->n_frag = 0;	/* Invalidate last fragment counter of the object */
2835:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH != 0
2836:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_EXFAT && obj->sclust) {	/* Retrieve the sub-directory status if needed */
2837:Middlewares/Third_Party/FatFs/src/ff.c **** 		DIR dj;
2838:Middlewares/Third_Party/FatFs/src/ff.c **** 
2839:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->c_scl = fs->cdc_scl;
2840:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->c_size = fs->cdc_size;
2841:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->c_ofs = fs->cdc_ofs;
2842:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = load_obj_dir(&dj, obj);
2843:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) return res;
2844:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->objsize = ld_dword(fs->dirbuf + XDIR_FileSize);
2845:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->stat = fs->dirbuf[XDIR_GenFlags] & 2;
2846:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2847:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2848:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2849:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 77


2850:Middlewares/Third_Party/FatFs/src/ff.c **** 	if ((UINT)*path < ' ') {				/* Null path name is the origin directory itself */
2851:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->fn[NSFLAG] = NS_NONAME;
2852:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_sdi(dp, 0);
2853:Middlewares/Third_Party/FatFs/src/ff.c **** 
2854:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {								/* Follow path */
2855:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (;;) {
2856:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = create_name(dp, &path);	/* Get a segment name of the path */
2857:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
2858:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_find(dp);				/* Find an object with the segment name */
2859:Middlewares/Third_Party/FatFs/src/ff.c **** 			ns = dp->fn[NSFLAG];
2860:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) {				/* Failed to find the object */
2861:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE) {	/* Object is not found */
2862:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (_FS_RPATH && (ns & NS_DOT)) {	/* If dot entry is not exist, stay there */
2863:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (!(ns & NS_LAST)) continue;	/* Continue to follow if not last segment */
2864:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->fn[NSFLAG] = NS_NONAME;
2865:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = FR_OK;
2866:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else {							/* Could not find the object */
2867:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (!(ns & NS_LAST)) res = FR_NO_PATH;	/* Adjust error code if not last segment */
2868:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
2869:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2870:Middlewares/Third_Party/FatFs/src/ff.c **** 				break;
2871:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2872:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ns & NS_LAST) break;			/* Last segment matched. Function completed. */
2873:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Get into the sub-directory */
2874:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!(obj->attr & AM_DIR)) {		/* It is not a sub-directory and cannot follow */
2875:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_NO_PATH; break;
2876:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2877:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
2878:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->fs_type == FS_EXFAT) {		/* Save containing directory information for next dir */
2879:Middlewares/Third_Party/FatFs/src/ff.c **** 				obj->c_scl = obj->sclust;
2880:Middlewares/Third_Party/FatFs/src/ff.c **** 				obj->c_size = ((DWORD)obj->objsize & 0xFFFFFF00) | obj->stat;
2881:Middlewares/Third_Party/FatFs/src/ff.c **** 				obj->c_ofs = dp->blk_ofs;
2882:Middlewares/Third_Party/FatFs/src/ff.c **** 				obj->sclust = ld_dword(fs->dirbuf + XDIR_FstClus);	/* Open next directory */
2883:Middlewares/Third_Party/FatFs/src/ff.c **** 				obj->stat = fs->dirbuf[XDIR_GenFlags] & 2;
2884:Middlewares/Third_Party/FatFs/src/ff.c **** 				obj->objsize = ld_qword(fs->dirbuf + XDIR_FileSize);
2885:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else
2886:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2887:Middlewares/Third_Party/FatFs/src/ff.c **** 			{
2888:Middlewares/Third_Party/FatFs/src/ff.c **** 				obj->sclust = ld_clust(fs, fs->win + dp->dptr % SS(fs));	/* Open next directory */
2889:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2890:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2891:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2892:Middlewares/Third_Party/FatFs/src/ff.c **** 
2893:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
2894:Middlewares/Third_Party/FatFs/src/ff.c **** }
2895:Middlewares/Third_Party/FatFs/src/ff.c **** 
2896:Middlewares/Third_Party/FatFs/src/ff.c **** 
2897:Middlewares/Third_Party/FatFs/src/ff.c **** 
2898:Middlewares/Third_Party/FatFs/src/ff.c **** 
2899:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2900:Middlewares/Third_Party/FatFs/src/ff.c **** /* Get logical drive number from path name                               */
2901:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2902:Middlewares/Third_Party/FatFs/src/ff.c **** 
2903:Middlewares/Third_Party/FatFs/src/ff.c **** static
2904:Middlewares/Third_Party/FatFs/src/ff.c **** int get_ldnumber (		/* Returns logical drive number (-1:invalid drive) */
2905:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR** path	/* Pointer to pointer to the path name */
2906:Middlewares/Third_Party/FatFs/src/ff.c **** )
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 78


2907:Middlewares/Third_Party/FatFs/src/ff.c **** {
 1453              		.loc 1 2907 0
 1454              		.cfi_startproc
 1455              		@ args = 0, pretend = 0, frame = 0
 1456              		@ frame_needed = 0, uses_anonymous_args = 0
 1457              		@ link register save eliminated.
 1458              	.LVL202:
2908:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR *tp, *tt;
2909:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
2910:Middlewares/Third_Party/FatFs/src/ff.c **** 	int vol = -1;
2911:Middlewares/Third_Party/FatFs/src/ff.c **** #if _STR_VOLUME_ID		/* Find string drive id */
2912:Middlewares/Third_Party/FatFs/src/ff.c **** 	static const char* const volid[] = {_VOLUME_STRS};
2913:Middlewares/Third_Party/FatFs/src/ff.c **** 	const char *sp;
2914:Middlewares/Third_Party/FatFs/src/ff.c **** 	char c;
2915:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR tc;
2916:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2917:Middlewares/Third_Party/FatFs/src/ff.c **** 
2918:Middlewares/Third_Party/FatFs/src/ff.c **** 
2919:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (*path) {	/* If the pointer is not a null */
 1459              		.loc 1 2919 0
 1460 0000 0168     		ldr	r1, [r0]
 1461 0002 09B1     		cbz	r1, .L162
 1462 0004 0A46     		mov	r2, r1
 1463 0006 03E0     		b	.L151
 1464              	.L162:
2910:Middlewares/Third_Party/FatFs/src/ff.c **** #if _STR_VOLUME_ID		/* Find string drive id */
 1465              		.loc 1 2910 0
 1466 0008 4FF0FF33 		mov	r3, #-1
 1467 000c 09E0     		b	.L159
 1468              	.LVL203:
 1469              	.L153:
2920:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (tt = *path; (UINT)*tt >= (_USE_LFN ? ' ' : '!') && *tt != ':'; tt++) ;	/* Find ':' in the pa
 1470              		.loc 1 2920 0 discriminator 3
 1471 000e 0132     		adds	r2, r2, #1
 1472              	.LVL204:
 1473              	.L151:
 1474              		.loc 1 2920 0 is_stmt 0 discriminator 1
 1475 0010 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 1476 0012 3A2B     		cmp	r3, #58
 1477 0014 18BF     		it	ne
 1478 0016 1F2B     		cmpne	r3, #31
 1479 0018 F9D8     		bhi	.L153
2921:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (*tt == ':') {	/* If a ':' is exist in the path name */
 1480              		.loc 1 2921 0 is_stmt 1
 1481 001a 3A2B     		cmp	r3, #58
 1482 001c 03D0     		beq	.L163
2922:Middlewares/Third_Party/FatFs/src/ff.c **** 			tp = *path;
2923:Middlewares/Third_Party/FatFs/src/ff.c **** 			i = *tp++ - '0';
2924:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i < 10 && tp == tt) {	/* Is there a numeric drive id? */
2925:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (i < _VOLUMES) {	/* If a drive id is found, get the value and strip it */
2926:Middlewares/Third_Party/FatFs/src/ff.c **** 					vol = (int)i;
2927:Middlewares/Third_Party/FatFs/src/ff.c **** 					*path = ++tt;
2928:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2929:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2930:Middlewares/Third_Party/FatFs/src/ff.c **** #if _STR_VOLUME_ID
2931:Middlewares/Third_Party/FatFs/src/ff.c **** 			 else {	/* No numeric drive number, find string drive id */
2932:Middlewares/Third_Party/FatFs/src/ff.c **** 				i = 0; tt++;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 79


2933:Middlewares/Third_Party/FatFs/src/ff.c **** 				do {
2934:Middlewares/Third_Party/FatFs/src/ff.c **** 					sp = volid[i]; tp = *path;
2935:Middlewares/Third_Party/FatFs/src/ff.c **** 					do {	/* Compare a string drive id with path name */
2936:Middlewares/Third_Party/FatFs/src/ff.c **** 						c = *sp++; tc = *tp++;
2937:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (IsLower(tc)) tc -= 0x20;
2938:Middlewares/Third_Party/FatFs/src/ff.c **** 					} while (c && (TCHAR)c == tc);
2939:Middlewares/Third_Party/FatFs/src/ff.c **** 				} while ((c || tp != tt) && ++i < _VOLUMES);	/* Repeat for each id until pattern match */
2940:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (i < _VOLUMES) {	/* If a drive id is found, get the value and strip it */
2941:Middlewares/Third_Party/FatFs/src/ff.c **** 					vol = (int)i;
2942:Middlewares/Third_Party/FatFs/src/ff.c **** 					*path = tt;
2943:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2944:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2945:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2946:Middlewares/Third_Party/FatFs/src/ff.c **** 			return vol;
2947:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2948:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH != 0 && _VOLUMES >= 2
2949:Middlewares/Third_Party/FatFs/src/ff.c **** 		vol = CurrVol;	/* Current drive */
 1483              		.loc 1 2949 0
 1484 001e 0D4B     		ldr	r3, .L164
 1485 0020 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1486              	.LVL205:
 1487              	.L159:
2950:Middlewares/Third_Party/FatFs/src/ff.c **** #else
2951:Middlewares/Third_Party/FatFs/src/ff.c **** 		vol = 0;		/* Drive 0 */
2952:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2953:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2954:Middlewares/Third_Party/FatFs/src/ff.c **** 	return vol;
2955:Middlewares/Third_Party/FatFs/src/ff.c **** }
 1488              		.loc 1 2955 0
 1489 0022 1846     		mov	r0, r3
 1490              	.LVL206:
 1491 0024 7047     		bx	lr
 1492              	.LVL207:
 1493              	.L163:
2907:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR *tp, *tt;
 1494              		.loc 1 2907 0
 1495 0026 10B4     		push	{r4}
 1496              	.LCFI19:
 1497              		.cfi_def_cfa_offset 4
 1498              		.cfi_offset 4, -4
 1499              	.LVL208:
2923:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i < 10 && tp == tt) {	/* Is there a numeric drive id? */
 1500              		.loc 1 2923 0
 1501 0028 4C1C     		adds	r4, r1, #1
 1502              	.LVL209:
 1503 002a 0B78     		ldrb	r3, [r1]	@ zero_extendqisi2
 1504 002c 303B     		subs	r3, r3, #48
 1505              	.LVL210:
2924:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (i < _VOLUMES) {	/* If a drive id is found, get the value and strip it */
 1506              		.loc 1 2924 0
 1507 002e 092B     		cmp	r3, #9
 1508 0030 98BF     		it	ls
 1509 0032 A242     		cmpls	r2, r4
 1510 0034 07D1     		bne	.L156
2925:Middlewares/Third_Party/FatFs/src/ff.c **** 					vol = (int)i;
 1511              		.loc 1 2925 0
 1512 0036 012B     		cmp	r3, #1
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 80


 1513 0038 08D8     		bhi	.L157
 1514              	.LVL211:
2927:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 1515              		.loc 1 2927 0
 1516 003a 0132     		adds	r2, r2, #1
 1517              	.LVL212:
 1518 003c 0260     		str	r2, [r0]
 1519              	.LVL213:
 1520              	.L150:
 1521              		.loc 1 2955 0
 1522 003e 1846     		mov	r0, r3
 1523              	.LVL214:
 1524 0040 5DF8044B 		ldr	r4, [sp], #4
 1525              	.LCFI20:
 1526              		.cfi_remember_state
 1527              		.cfi_restore 4
 1528              		.cfi_def_cfa_offset 0
 1529              	.LVL215:
 1530 0044 7047     		bx	lr
 1531              	.LVL216:
 1532              	.L156:
 1533              	.LCFI21:
 1534              		.cfi_restore_state
2910:Middlewares/Third_Party/FatFs/src/ff.c **** #if _STR_VOLUME_ID		/* Find string drive id */
 1535              		.loc 1 2910 0
 1536 0046 4FF0FF33 		mov	r3, #-1
 1537              	.LVL217:
 1538 004a F8E7     		b	.L150
 1539              	.LVL218:
 1540              	.L157:
 1541 004c 4FF0FF33 		mov	r3, #-1
 1542              	.LVL219:
 1543 0050 F5E7     		b	.L150
 1544              	.L165:
 1545 0052 00BF     		.align	2
 1546              	.L164:
 1547 0054 00000000 		.word	.LANCHOR2
 1548              		.cfi_endproc
 1549              	.LFE182:
 1551              		.section	.text.putc_init,"ax",%progbits
 1552              		.align	1
 1553              		.syntax unified
 1554              		.thumb
 1555              		.thumb_func
 1556              		.fpu fpv5-sp-d16
 1558              	putc_init:
 1559              	.LFB208:
2956:Middlewares/Third_Party/FatFs/src/ff.c **** 
2957:Middlewares/Third_Party/FatFs/src/ff.c **** 
2958:Middlewares/Third_Party/FatFs/src/ff.c **** 
2959:Middlewares/Third_Party/FatFs/src/ff.c **** 
2960:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2961:Middlewares/Third_Party/FatFs/src/ff.c **** /* Load a sector and check if it is an FAT boot sector                   */
2962:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2963:Middlewares/Third_Party/FatFs/src/ff.c **** 
2964:Middlewares/Third_Party/FatFs/src/ff.c **** static
2965:Middlewares/Third_Party/FatFs/src/ff.c **** BYTE check_fs (	/* 0:FAT, 1:exFAT, 2:Valid BS but not FAT, 3:Not a BS, 4:Disk error */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 81


2966:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,	/* File system object */
2967:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD sect	/* Sector# (lba) to load and check if it is an FAT-VBR or not */
2968:Middlewares/Third_Party/FatFs/src/ff.c **** )
2969:Middlewares/Third_Party/FatFs/src/ff.c **** {
2970:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->wflag = 0; fs->winsect = 0xFFFFFFFF;		/* Invaidate window */
2971:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (move_window(fs, sect) != FR_OK) return 4;	/* Load boot record */
2972:Middlewares/Third_Party/FatFs/src/ff.c **** 
2973:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (ld_word(fs->win + BS_55AA) != 0xAA55) return 3;	/* Check boot record signature (always placed 
2974:Middlewares/Third_Party/FatFs/src/ff.c **** 
2975:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->win[BS_JmpBoot] == 0xE9 || (fs->win[BS_JmpBoot] == 0xEB && fs->win[BS_JmpBoot + 2] == 0x90
2976:Middlewares/Third_Party/FatFs/src/ff.c **** 		if ((ld_dword(fs->win + BS_FilSysType) & 0xFFFFFF) == 0x544146) return 0;	/* Check "FAT" string *
2977:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ld_dword(fs->win + BS_FilSysType32) == 0x33544146) return 0;			/* Check "FAT3" string */
2978:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2979:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
2980:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!mem_cmp(fs->win + BS_JmpBoot, "\xEB\x76\x90" "EXFAT   ", 11)) return 1;
2981:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2982:Middlewares/Third_Party/FatFs/src/ff.c **** 	return 2;
2983:Middlewares/Third_Party/FatFs/src/ff.c **** }
2984:Middlewares/Third_Party/FatFs/src/ff.c **** 
2985:Middlewares/Third_Party/FatFs/src/ff.c **** 
2986:Middlewares/Third_Party/FatFs/src/ff.c **** 
2987:Middlewares/Third_Party/FatFs/src/ff.c **** 
2988:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2989:Middlewares/Third_Party/FatFs/src/ff.c **** /* Find logical drive and check if the volume is mounted                 */
2990:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2991:Middlewares/Third_Party/FatFs/src/ff.c **** 
2992:Middlewares/Third_Party/FatFs/src/ff.c **** static
2993:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT find_volume (	/* FR_OK(0): successful, !=0: any error occurred */
2994:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR** path,	/* Pointer to pointer to the path name (drive number) */
2995:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS** rfs,		/* Pointer to pointer to the found file system object */
2996:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE mode			/* !=0: Check write protection for write access */
2997:Middlewares/Third_Party/FatFs/src/ff.c **** )
2998:Middlewares/Third_Party/FatFs/src/ff.c **** {
2999:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE fmt, *pt;
3000:Middlewares/Third_Party/FatFs/src/ff.c **** 	int vol;
3001:Middlewares/Third_Party/FatFs/src/ff.c **** 	DSTATUS stat;
3002:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD bsect, fasize, tsect, sysect, nclst, szbfat, br[4];
3003:Middlewares/Third_Party/FatFs/src/ff.c **** 	WORD nrsv;
3004:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
3005:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
3006:Middlewares/Third_Party/FatFs/src/ff.c **** 
3007:Middlewares/Third_Party/FatFs/src/ff.c **** 
3008:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive number */
3009:Middlewares/Third_Party/FatFs/src/ff.c **** 	*rfs = 0;
3010:Middlewares/Third_Party/FatFs/src/ff.c **** 	vol = get_ldnumber(path);
3011:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
3012:Middlewares/Third_Party/FatFs/src/ff.c **** 
3013:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Check if the file system object is valid or not */
3014:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs = FatFs[vol];					/* Get pointer to the file system object */
3015:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!fs) return FR_NOT_ENABLED;		/* Is the file system object available? */
3016:Middlewares/Third_Party/FatFs/src/ff.c **** 
3017:Middlewares/Third_Party/FatFs/src/ff.c **** 	ENTER_FF(fs);						/* Lock the volume */
3018:Middlewares/Third_Party/FatFs/src/ff.c **** 	*rfs = fs;							/* Return pointer to the file system object */
3019:Middlewares/Third_Party/FatFs/src/ff.c **** 
3020:Middlewares/Third_Party/FatFs/src/ff.c **** 	mode &= (BYTE)~FA_READ;				/* Desired access mode, write access or not */
3021:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type) {					/* If the volume has been mounted */
3022:Middlewares/Third_Party/FatFs/src/ff.c **** 		stat = disk_status(fs->drv);
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 82


3023:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!(stat & STA_NOINIT)) {		/* and the physical drive is kept initialized */
3024:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!_FS_READONLY && mode && (stat & STA_PROTECT)) {	/* Check write protection if needed */
3025:Middlewares/Third_Party/FatFs/src/ff.c **** 				return FR_WRITE_PROTECTED;
3026:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3027:Middlewares/Third_Party/FatFs/src/ff.c **** 			return FR_OK;				/* The file system object is valid */
3028:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3029:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3030:Middlewares/Third_Party/FatFs/src/ff.c **** 
3031:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* The file system object is not valid. */
3032:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Following code attempts to mount the volume. (analyze BPB and initialize the fs object) */
3033:Middlewares/Third_Party/FatFs/src/ff.c **** 
3034:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->fs_type = 0;					/* Clear the file system object */
3035:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->drv = LD2PD(vol);				/* Bind the logical drive and a physical drive */
3036:Middlewares/Third_Party/FatFs/src/ff.c **** 	stat = disk_initialize(fs->drv);	/* Initialize the physical drive */
3037:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_NOINIT) { 			/* Check if the initialization succeeded */
3038:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_NOT_READY;			/* Failed to initialize due to no medium or hard error */
3039:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3040:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!_FS_READONLY && mode && (stat & STA_PROTECT)) { /* Check disk write protection if needed */
3041:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_WRITE_PROTECTED;
3042:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3043:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_SS != _MIN_SS					/* Get sector size (multiple sector size cfg only) */
3044:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (disk_ioctl(fs->drv, GET_SECTOR_SIZE, &SS(fs)) != RES_OK) return FR_DISK_ERR;
3045:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (SS(fs) > _MAX_SS || SS(fs) < _MIN_SS || (SS(fs) & (SS(fs) - 1))) return FR_DISK_ERR;
3046:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3047:Middlewares/Third_Party/FatFs/src/ff.c **** 
3048:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Find an FAT partition on the drive. Supports only generic partitioning rules, FDISK and SFD. */
3049:Middlewares/Third_Party/FatFs/src/ff.c **** 	bsect = 0;
3050:Middlewares/Third_Party/FatFs/src/ff.c **** 	fmt = check_fs(fs, bsect);			/* Load sector 0 and check if it is an FAT-VBR as SFD */
3051:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == 2 || (fmt < 2 && LD2PT(vol) != 0)) {	/* Not an FAT-VBR or forced partition number */
3052:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = 0; i < 4; i++) {		/* Get partition offset */
3053:Middlewares/Third_Party/FatFs/src/ff.c **** 			pt = fs->win + (MBR_Table + i * SZ_PTE);
3054:Middlewares/Third_Party/FatFs/src/ff.c **** 			br[i] = pt[PTE_System] ? ld_dword(pt + PTE_StLba) : 0;
3055:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3056:Middlewares/Third_Party/FatFs/src/ff.c **** 		i = LD2PT(vol);					/* Partition number: 0:auto, 1-4:forced */
3057:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i) i--;
3058:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {							/* Find an FAT volume */
3059:Middlewares/Third_Party/FatFs/src/ff.c **** 			bsect = br[i];
3060:Middlewares/Third_Party/FatFs/src/ff.c **** 			fmt = bsect ? check_fs(fs, bsect) : 3;	/* Check the partition */
3061:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (LD2PT(vol) == 0 && fmt >= 2 && ++i < 4);
3062:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3063:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == 4) return FR_DISK_ERR;		/* An error occured in the disk I/O layer */
3064:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt >= 2) return FR_NO_FILESYSTEM;	/* No FAT volume is found */
3065:Middlewares/Third_Party/FatFs/src/ff.c **** 
3066:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* An FAT volume is found (bsect). Following code initializes the file system object */
3067:Middlewares/Third_Party/FatFs/src/ff.c **** 
3068:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
3069:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == 1) {
3070:Middlewares/Third_Party/FatFs/src/ff.c **** 		QWORD maxlba;
3071:Middlewares/Third_Party/FatFs/src/ff.c **** 
3072:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = BPB_ZeroedEx; i < BPB_ZeroedEx + 53 && fs->win[i] == 0; i++) ;	/* Check zero filler */
3073:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i < BPB_ZeroedEx + 53) return FR_NO_FILESYSTEM;
3074:Middlewares/Third_Party/FatFs/src/ff.c **** 
3075:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ld_word(fs->win + BPB_FSVerEx) != 0x100) return FR_NO_FILESYSTEM;	/* Check exFAT revision (Mu
3076:Middlewares/Third_Party/FatFs/src/ff.c **** 
3077:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (1 << fs->win[BPB_BytsPerSecEx] != SS(fs)) {	/* (BPB_BytsPerSecEx must be equal to the physica
3078:Middlewares/Third_Party/FatFs/src/ff.c **** 			return FR_NO_FILESYSTEM;
3079:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 83


3080:Middlewares/Third_Party/FatFs/src/ff.c **** 
3081:Middlewares/Third_Party/FatFs/src/ff.c **** 		maxlba = ld_qword(fs->win + BPB_TotSecEx) + bsect;	/* Last LBA + 1 of the volume */
3082:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (maxlba >= 0x100000000) return FR_NO_FILESYSTEM;	/* (It cannot be handled in 32-bit LBA) */
3083:Middlewares/Third_Party/FatFs/src/ff.c **** 
3084:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsize = ld_dword(fs->win + BPB_FatSzEx);	/* Number of sectors per FAT */
3085:Middlewares/Third_Party/FatFs/src/ff.c **** 
3086:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->n_fats = fs->win[BPB_NumFATsEx];			/* Number of FATs */
3087:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->n_fats != 1) return FR_NO_FILESYSTEM;	/* (Supports only 1 FAT) */
3088:Middlewares/Third_Party/FatFs/src/ff.c **** 
3089:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->csize = 1 << fs->win[BPB_SecPerClusEx];		/* Cluster size */
3090:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->csize == 0)	return FR_NO_FILESYSTEM;	/* (Must be 1..32768) */
3091:Middlewares/Third_Party/FatFs/src/ff.c **** 
3092:Middlewares/Third_Party/FatFs/src/ff.c **** 		nclst = ld_dword(fs->win + BPB_NumClusEx);		/* Number of clusters */
3093:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nclst > MAX_EXFAT) return FR_NO_FILESYSTEM;	/* (Too many clusters) */
3094:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->n_fatent = nclst + 2;
3095:Middlewares/Third_Party/FatFs/src/ff.c **** 
3096:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Boundaries and Limits */
3097:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->volbase = bsect;
3098:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->database = bsect + ld_dword(fs->win + BPB_DataOfsEx);
3099:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fatbase = bsect + ld_dword(fs->win + BPB_FatOfsEx);
3100:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (maxlba < (QWORD)fs->database + nclst * fs->csize) return FR_NO_FILESYSTEM;	/* (Volume size mu
3101:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->dirbase = ld_dword(fs->win + BPB_RootClusEx);
3102:Middlewares/Third_Party/FatFs/src/ff.c **** 
3103:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Check if bitmap location is in assumption (at the first cluster) */
3104:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (move_window(fs, clust2sect(fs, fs->dirbase)) != FR_OK) return FR_DISK_ERR;
3105:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = 0; i < SS(fs); i += SZDIRE) {
3106:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->win[i] == 0x81 && ld_dword(fs->win + i + 20) == 2) break;	/* 81 entry with cluster #2? *
3107:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3108:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == SS(fs)) return FR_NO_FILESYSTEM;
3109:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
3110:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->last_clst = fs->free_clst = 0xFFFFFFFF;		/* Initialize cluster allocation information */
3111:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3112:Middlewares/Third_Party/FatFs/src/ff.c **** 		fmt = FS_EXFAT;			/* FAT sub-type */
3113:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else
3114:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* _FS_EXFAT */
3115:Middlewares/Third_Party/FatFs/src/ff.c **** 	{
3116:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ld_word(fs->win + BPB_BytsPerSec) != SS(fs)) return FR_NO_FILESYSTEM;	/* (BPB_BytsPerSec must
3117:Middlewares/Third_Party/FatFs/src/ff.c **** 
3118:Middlewares/Third_Party/FatFs/src/ff.c **** 		fasize = ld_word(fs->win + BPB_FATSz16);		/* Number of sectors per FAT */
3119:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fasize == 0) fasize = ld_dword(fs->win + BPB_FATSz32);
3120:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsize = fasize;
3121:Middlewares/Third_Party/FatFs/src/ff.c **** 
3122:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->n_fats = fs->win[BPB_NumFATs];				/* Number of FATs */
3123:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->n_fats != 1 && fs->n_fats != 2) return FR_NO_FILESYSTEM;	/* (Must be 1 or 2) */
3124:Middlewares/Third_Party/FatFs/src/ff.c **** 		fasize *= fs->n_fats;							/* Number of sectors for FAT area */
3125:Middlewares/Third_Party/FatFs/src/ff.c **** 
3126:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->csize = fs->win[BPB_SecPerClus];			/* Cluster size */
3127:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->csize == 0 || (fs->csize & (fs->csize - 1))) return FR_NO_FILESYSTEM;	/* (Must be power o
3128:Middlewares/Third_Party/FatFs/src/ff.c **** 
3129:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->n_rootdir = ld_word(fs->win + BPB_RootEntCnt);	/* Number of root directory entries */
3130:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->n_rootdir % (SS(fs) / SZDIRE)) return FR_NO_FILESYSTEM;	/* (Must be sector aligned) */
3131:Middlewares/Third_Party/FatFs/src/ff.c **** 
3132:Middlewares/Third_Party/FatFs/src/ff.c **** 		tsect = ld_word(fs->win + BPB_TotSec16);		/* Number of sectors on the volume */
3133:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (tsect == 0) tsect = ld_dword(fs->win + BPB_TotSec32);
3134:Middlewares/Third_Party/FatFs/src/ff.c **** 
3135:Middlewares/Third_Party/FatFs/src/ff.c **** 		nrsv = ld_word(fs->win + BPB_RsvdSecCnt);		/* Number of reserved sectors */
3136:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nrsv == 0) return FR_NO_FILESYSTEM;			/* (Must not be 0) */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 84


3137:Middlewares/Third_Party/FatFs/src/ff.c **** 
3138:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Determine the FAT sub type */
3139:Middlewares/Third_Party/FatFs/src/ff.c **** 		sysect = nrsv + fasize + fs->n_rootdir / (SS(fs) / SZDIRE);	/* RSV + FAT + DIR */
3140:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (tsect < sysect) return FR_NO_FILESYSTEM;	/* (Invalid volume size) */
3141:Middlewares/Third_Party/FatFs/src/ff.c **** 		nclst = (tsect - sysect) / fs->csize;			/* Number of clusters */
3142:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nclst == 0) return FR_NO_FILESYSTEM;		/* (Invalid volume size) */
3143:Middlewares/Third_Party/FatFs/src/ff.c **** 		fmt = FS_FAT32;
3144:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nclst <= MAX_FAT16) fmt = FS_FAT16;
3145:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nclst <= MAX_FAT12) fmt = FS_FAT12;
3146:Middlewares/Third_Party/FatFs/src/ff.c **** 
3147:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Boundaries and Limits */
3148:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->n_fatent = nclst + 2;						/* Number of FAT entries */
3149:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->volbase = bsect;							/* Volume start sector */
3150:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fatbase = bsect + nrsv; 					/* FAT start sector */
3151:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->database = bsect + sysect;					/* Data start sector */
3152:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fmt == FS_FAT32) {
3153:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ld_word(fs->win + BPB_FSVer32) != 0) return FR_NO_FILESYSTEM;	/* (Must be FAT32 revision 0.0
3154:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->n_rootdir) return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must be 0) */
3155:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->dirbase = ld_dword(fs->win + BPB_RootClus32);	/* Root directory start cluster */
3156:Middlewares/Third_Party/FatFs/src/ff.c **** 			szbfat = fs->n_fatent * 4;					/* (Needed FAT size) */
3157:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
3158:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->n_rootdir == 0)	return FR_NO_FILESYSTEM;/* (BPB_RootEntCnt must not be 0) */
3159:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->dirbase = fs->fatbase + fasize;			/* Root directory start sector */
3160:Middlewares/Third_Party/FatFs/src/ff.c **** 			szbfat = (fmt == FS_FAT16) ?				/* (Needed FAT size) */
3161:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->n_fatent * 2 : fs->n_fatent * 3 / 2 + (fs->n_fatent & 1);
3162:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3163:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->fsize < (szbfat + (SS(fs) - 1)) / SS(fs)) return FR_NO_FILESYSTEM;	/* (BPB_FATSz must not
3164:Middlewares/Third_Party/FatFs/src/ff.c **** 
3165:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
3166:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Get FSINFO if available */
3167:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->last_clst = fs->free_clst = 0xFFFFFFFF;		/* Initialize cluster allocation information */
3168:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsi_flag = 0x80;
3169:Middlewares/Third_Party/FatFs/src/ff.c **** #if (_FS_NOFSINFO & 3) != 3
3170:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fmt == FS_FAT32				/* Enable FSINFO only if FAT32 and BPB_FSInfo32 == 1 */
3171:Middlewares/Third_Party/FatFs/src/ff.c **** 			&& ld_word(fs->win + BPB_FSInfo32) == 1
3172:Middlewares/Third_Party/FatFs/src/ff.c **** 			&& move_window(fs, bsect + 1) == FR_OK)
3173:Middlewares/Third_Party/FatFs/src/ff.c **** 		{
3174:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->fsi_flag = 0;
3175:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ld_word(fs->win + BS_55AA) == 0xAA55	/* Load FSINFO data if available */
3176:Middlewares/Third_Party/FatFs/src/ff.c **** 				&& ld_dword(fs->win + FSI_LeadSig) == 0x41615252
3177:Middlewares/Third_Party/FatFs/src/ff.c **** 				&& ld_dword(fs->win + FSI_StrucSig) == 0x61417272)
3178:Middlewares/Third_Party/FatFs/src/ff.c **** 			{
3179:Middlewares/Third_Party/FatFs/src/ff.c **** #if (_FS_NOFSINFO & 1) == 0
3180:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->free_clst = ld_dword(fs->win + FSI_Free_Count);
3181:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3182:Middlewares/Third_Party/FatFs/src/ff.c **** #if (_FS_NOFSINFO & 2) == 0
3183:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->last_clst = ld_dword(fs->win + FSI_Nxt_Free);
3184:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3185:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3186:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3187:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* (_FS_NOFSINFO & 3) != 3 */
3188:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* !_FS_READONLY */
3189:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3190:Middlewares/Third_Party/FatFs/src/ff.c **** 
3191:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->fs_type = fmt;		/* FAT sub-type */
3192:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->id = ++Fsid;		/* File system mount ID */
3193:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN == 1
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 85


3194:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->lfnbuf = LfnBuf;	/* Static LFN working buffer */
3195:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
3196:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->dirbuf = DirBuf;	/* Static directory block scratchpad buuffer */
3197:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3198:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3199:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH != 0
3200:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->cdir = 0;			/* Initialize current directory */
3201:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3202:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0			/* Clear file lock semaphores */
3203:Middlewares/Third_Party/FatFs/src/ff.c **** 	clear_lock(fs);
3204:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3205:Middlewares/Third_Party/FatFs/src/ff.c **** 	return FR_OK;
3206:Middlewares/Third_Party/FatFs/src/ff.c **** }
3207:Middlewares/Third_Party/FatFs/src/ff.c **** 
3208:Middlewares/Third_Party/FatFs/src/ff.c **** 
3209:Middlewares/Third_Party/FatFs/src/ff.c **** 
3210:Middlewares/Third_Party/FatFs/src/ff.c **** 
3211:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3212:Middlewares/Third_Party/FatFs/src/ff.c **** /* Check if the file/directory object is valid or not                    */
3213:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3214:Middlewares/Third_Party/FatFs/src/ff.c **** 
3215:Middlewares/Third_Party/FatFs/src/ff.c **** static
3216:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT validate (	/* Returns FR_OK or FR_INVALID_OBJECT */
3217:Middlewares/Third_Party/FatFs/src/ff.c **** 	_FDID* obj,		/* Pointer to the _OBJ, the 1st member in the FIL/DIR object, to check validity */
3218:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS** fs		/* Pointer to pointer to the owner file system object to return */
3219:Middlewares/Third_Party/FatFs/src/ff.c **** )
3220:Middlewares/Third_Party/FatFs/src/ff.c **** {
3221:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3222:Middlewares/Third_Party/FatFs/src/ff.c **** 
3223:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!obj || !obj->fs || !obj->fs->fs_type || obj->fs->id != obj->id || (disk_status(obj->fs->drv) 
3224:Middlewares/Third_Party/FatFs/src/ff.c **** 		*fs = 0;
3225:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_INVALID_OBJECT;	/* The object is invalid */
3226:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
3227:Middlewares/Third_Party/FatFs/src/ff.c **** 		*fs = obj->fs;			/* Owner file sytem object */
3228:Middlewares/Third_Party/FatFs/src/ff.c **** 		ENTER_FF(obj->fs);		/* Lock file system */
3229:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_OK;			/* Valid object */
3230:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3231:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
3232:Middlewares/Third_Party/FatFs/src/ff.c **** }
3233:Middlewares/Third_Party/FatFs/src/ff.c **** 
3234:Middlewares/Third_Party/FatFs/src/ff.c **** 
3235:Middlewares/Third_Party/FatFs/src/ff.c **** 
3236:Middlewares/Third_Party/FatFs/src/ff.c **** 
3237:Middlewares/Third_Party/FatFs/src/ff.c **** /*---------------------------------------------------------------------------
3238:Middlewares/Third_Party/FatFs/src/ff.c **** 
3239:Middlewares/Third_Party/FatFs/src/ff.c ****    Public Functions (FatFs API)
3240:Middlewares/Third_Party/FatFs/src/ff.c **** 
3241:Middlewares/Third_Party/FatFs/src/ff.c **** ----------------------------------------------------------------------------*/
3242:Middlewares/Third_Party/FatFs/src/ff.c **** 
3243:Middlewares/Third_Party/FatFs/src/ff.c **** 
3244:Middlewares/Third_Party/FatFs/src/ff.c **** 
3245:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3246:Middlewares/Third_Party/FatFs/src/ff.c **** /* Mount/Unmount a Logical Drive                                         */
3247:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3248:Middlewares/Third_Party/FatFs/src/ff.c **** 
3249:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_mount (
3250:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,			/* Pointer to the file system object (NULL:unmount)*/
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 86


3251:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path,	/* Logical drive number to be mounted/unmounted */
3252:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE opt			/* Mode option 0:Do not mount (delayed mount), 1:Mount immediately */
3253:Middlewares/Third_Party/FatFs/src/ff.c **** )
3254:Middlewares/Third_Party/FatFs/src/ff.c **** {
3255:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *cfs;
3256:Middlewares/Third_Party/FatFs/src/ff.c **** 	int vol;
3257:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3258:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR *rp = path;
3259:Middlewares/Third_Party/FatFs/src/ff.c **** 
3260:Middlewares/Third_Party/FatFs/src/ff.c **** 
3261:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive number */
3262:Middlewares/Third_Party/FatFs/src/ff.c **** 	vol = get_ldnumber(&rp);
3263:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
3264:Middlewares/Third_Party/FatFs/src/ff.c **** 	cfs = FatFs[vol];					/* Pointer to fs object */
3265:Middlewares/Third_Party/FatFs/src/ff.c **** 
3266:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (cfs) {
3267:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
3268:Middlewares/Third_Party/FatFs/src/ff.c **** 		clear_lock(cfs);
3269:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3270:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT						/* Discard sync object of the current volume */
3271:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!ff_del_syncobj(cfs->sobj)) return FR_INT_ERR;
3272:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3273:Middlewares/Third_Party/FatFs/src/ff.c **** 		cfs->fs_type = 0;				/* Clear old fs object */
3274:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3275:Middlewares/Third_Party/FatFs/src/ff.c **** 
3276:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs) {
3277:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fs_type = 0;				/* Clear new fs object */
3278:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT						/* Create sync object for the new volume */
3279:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!ff_cre_syncobj((BYTE)vol, &fs->sobj)) return FR_INT_ERR;
3280:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3281:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3282:Middlewares/Third_Party/FatFs/src/ff.c **** 	FatFs[vol] = fs;					/* Register new fs object */
3283:Middlewares/Third_Party/FatFs/src/ff.c **** 
3284:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!fs || opt != 1) return FR_OK;	/* Do not mount now, it will be mounted later */
3285:Middlewares/Third_Party/FatFs/src/ff.c **** 
3286:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path, &fs, 0);	/* Force mounted the volume */
3287:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
3288:Middlewares/Third_Party/FatFs/src/ff.c **** }
3289:Middlewares/Third_Party/FatFs/src/ff.c **** 
3290:Middlewares/Third_Party/FatFs/src/ff.c **** 
3291:Middlewares/Third_Party/FatFs/src/ff.c **** 
3292:Middlewares/Third_Party/FatFs/src/ff.c **** 
3293:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3294:Middlewares/Third_Party/FatFs/src/ff.c **** /* Open or Create a File                                                 */
3295:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3296:Middlewares/Third_Party/FatFs/src/ff.c **** 
3297:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_open (
3298:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp,			/* Pointer to the blank file object */
3299:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path,	/* Pointer to the file name */
3300:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE mode			/* Access mode and file open mode flags */
3301:Middlewares/Third_Party/FatFs/src/ff.c **** )
3302:Middlewares/Third_Party/FatFs/src/ff.c **** {
3303:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3304:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
3305:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
3306:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
3307:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD dw, cl, bcs, clst, sc;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 87


3308:Middlewares/Third_Party/FatFs/src/ff.c **** 	FSIZE_t ofs;
3309:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3310:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEF_NAMBUF
3311:Middlewares/Third_Party/FatFs/src/ff.c **** 
3312:Middlewares/Third_Party/FatFs/src/ff.c **** 
3313:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!fp) return FR_INVALID_OBJECT;
3314:Middlewares/Third_Party/FatFs/src/ff.c **** 
3315:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive */
3316:Middlewares/Third_Party/FatFs/src/ff.c **** 	mode &= _FS_READONLY ? FA_READ : FA_READ | FA_WRITE | FA_CREATE_ALWAYS | FA_CREATE_NEW | FA_OPEN_A
3317:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path, &fs, mode);
3318:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
3319:Middlewares/Third_Party/FatFs/src/ff.c **** 		dj.obj.fs = fs;
3320:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
3321:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
3322:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY	/* R/W configuration */
3323:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
3324:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {	/* Origin directory itself? */
3325:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;
3326:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3327:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
3328:Middlewares/Third_Party/FatFs/src/ff.c **** 			else {
3329:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = chk_lock(&dj, (mode & ~FA_READ) ? 1 : 0);
3330:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3331:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3332:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3333:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Create or Open a file */
3334:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (mode & (FA_CREATE_ALWAYS | FA_OPEN_ALWAYS | FA_CREATE_NEW)) {
3335:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) {					/* No file, create new */
3336:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE) {		/* There is no file to open, create a new entry */
3337:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
3338:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = enq_lock() ? dir_register(&dj) : FR_TOO_MANY_OPEN_FILES;
3339:Middlewares/Third_Party/FatFs/src/ff.c **** #else
3340:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = dir_register(&dj);
3341:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3342:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3343:Middlewares/Third_Party/FatFs/src/ff.c **** 				mode |= FA_CREATE_ALWAYS;		/* File is created */
3344:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3345:Middlewares/Third_Party/FatFs/src/ff.c **** 			else {								/* Any object is already existing */
3346:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dj.obj.attr & (AM_RDO | AM_DIR)) {	/* Cannot overwrite it (R/O or DIR) */
3347:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_DENIED;
3348:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
3349:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (mode & FA_CREATE_NEW) res = FR_EXIST;	/* Cannot create as new file */
3350:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3351:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3352:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK && (mode & FA_CREATE_ALWAYS)) {	/* Truncate it if overwrite mode */
3353:Middlewares/Third_Party/FatFs/src/ff.c **** 				dw = GET_FATTIME();
3354:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
3355:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fs->fs_type == FS_EXFAT) {
3356:Middlewares/Third_Party/FatFs/src/ff.c **** 					/* Get current allocation info */
3357:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->obj.fs = fs;
3358:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->obj.sclust = ld_dword(fs->dirbuf + XDIR_FstClus);
3359:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->obj.objsize = ld_qword(fs->dirbuf + XDIR_FileSize);
3360:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->obj.stat = fs->dirbuf[XDIR_GenFlags] & 2;
3361:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->obj.n_frag = 0;
3362:Middlewares/Third_Party/FatFs/src/ff.c **** 					/* Initialize directory entry block */
3363:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(fs->dirbuf + XDIR_CrtTime, dw);	/* Set created time */
3364:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->dirbuf[XDIR_CrtTime10] = 0;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 88


3365:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(fs->dirbuf + XDIR_ModTime, dw);	/* Set modified time */
3366:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->dirbuf[XDIR_ModTime10] = 0;
3367:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->dirbuf[XDIR_Attr] = AM_ARC;				/* Reset attribute */
3368:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(fs->dirbuf + XDIR_FstClus, 0);		/* Reset file allocation info */
3369:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_qword(fs->dirbuf + XDIR_FileSize, 0);
3370:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_qword(fs->dirbuf + XDIR_ValidFileSize, 0);
3371:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->dirbuf[XDIR_GenFlags] = 1;
3372:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = store_xdir(&dj);
3373:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res == FR_OK && fp->obj.sclust) {		/* Remove the cluster chain if exist */
3374:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = remove_chain(&fp->obj, fp->obj.sclust, 0);
3375:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->last_clst = fp->obj.sclust - 1;		/* Reuse the cluster hole */
3376:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
3377:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else
3378:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3379:Middlewares/Third_Party/FatFs/src/ff.c **** 				{
3380:Middlewares/Third_Party/FatFs/src/ff.c **** 					/* Clean directory info */
3381:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dj.dir + DIR_CrtTime, dw);	/* Set created time */
3382:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dj.dir + DIR_ModTime, dw);	/* Set modified time */
3383:Middlewares/Third_Party/FatFs/src/ff.c **** 					dj.dir[DIR_Attr] = AM_ARC;			/* Reset attribute */
3384:Middlewares/Third_Party/FatFs/src/ff.c **** 					cl = ld_clust(fs, dj.dir);			/* Get cluster chain */
3385:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fs, dj.dir, 0);			/* Reset file allocation info */
3386:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dj.dir + DIR_FileSize, 0);
3387:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->wflag = 1;
3388:Middlewares/Third_Party/FatFs/src/ff.c **** 
3389:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (cl) {							/* Remove the cluster chain if exist */
3390:Middlewares/Third_Party/FatFs/src/ff.c **** 						dw = fs->winsect;
3391:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = remove_chain(&dj.obj, cl, 0);
3392:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (res == FR_OK) {
3393:Middlewares/Third_Party/FatFs/src/ff.c **** 							res = move_window(fs, dw);
3394:Middlewares/Third_Party/FatFs/src/ff.c **** 							fs->last_clst = cl - 1;		/* Reuse the cluster hole */
3395:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
3396:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
3397:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3398:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3399:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3400:Middlewares/Third_Party/FatFs/src/ff.c **** 		else {	/* Open an existing file */
3401:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {					/* Following succeeded */
3402:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dj.obj.attr & AM_DIR) {		/* It is a directory */
3403:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_NO_FILE;
3404:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
3405:Middlewares/Third_Party/FatFs/src/ff.c **** 					if ((mode & FA_WRITE) && (dj.obj.attr & AM_RDO)) { /* R/O violation */
3406:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = FR_DENIED;
3407:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
3408:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3409:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3410:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3411:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
3412:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (mode & FA_CREATE_ALWAYS)		/* Set file change flag if created or overwritten */
3413:Middlewares/Third_Party/FatFs/src/ff.c **** 				mode |= FA_MODIFIED;
3414:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->dir_sect = fs->winsect;			/* Pointer to the directory entry */
3415:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->dir_ptr = dj.dir;
3416:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
3417:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->obj.lockid = inc_lock(&dj, (mode & ~FA_READ) ? 1 : 0);
3418:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!fp->obj.lockid) res = FR_INT_ERR;
3419:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3420:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3421:Middlewares/Third_Party/FatFs/src/ff.c **** #else		/* R/O configuration */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 89


3422:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
3423:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {	/* Origin directory itself? */
3424:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;
3425:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
3426:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dj.obj.attr & AM_DIR) {		/* It is a directory */
3427:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_NO_FILE;
3428:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3429:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3430:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3431:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3432:Middlewares/Third_Party/FatFs/src/ff.c **** 
3433:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
3434:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
3435:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->fs_type == FS_EXFAT) {
3436:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->obj.c_scl = dj.obj.sclust;							/* Get containing directory info */
3437:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->obj.c_size = ((DWORD)dj.obj.objsize & 0xFFFFFF00) | dj.obj.stat;
3438:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->obj.c_ofs = dj.blk_ofs;
3439:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->obj.sclust = ld_dword(fs->dirbuf + XDIR_FstClus);	/* Get object allocation info */
3440:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->obj.objsize = ld_qword(fs->dirbuf + XDIR_FileSize);
3441:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->obj.stat = fs->dirbuf[XDIR_GenFlags] & 2;
3442:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else
3443:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3444:Middlewares/Third_Party/FatFs/src/ff.c **** 			{
3445:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->obj.sclust = ld_clust(fs, dj.dir);					/* Get object allocation info */
3446:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->obj.objsize = ld_dword(dj.dir + DIR_FileSize);
3447:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3448:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FASTSEEK
3449:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->cltbl = 0;			/* Disable fast seek mode */
3450:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3451:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->obj.fs = fs;	 	/* Validate the file object */
3452:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->obj.id = fs->id;
3453:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->flag = mode;		/* Set file access mode */
3454:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->err = 0;			/* Clear error flag */
3455:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->sect = 0;			/* Invalidate current data sector */
3456:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->fptr = 0;			/* Set file pointer top of the file */
3457:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
3458:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
3459:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(fp->buf, 0, _MAX_SS);	/* Clear sector buffer */
3460:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3461:Middlewares/Third_Party/FatFs/src/ff.c **** 			if ((mode & FA_SEEKEND) && fp->obj.objsize > 0) {	/* Seek to end of file if FA_OPEN_APPEND is sp
3462:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fptr = fp->obj.objsize;			/* Offset to seek */
3463:Middlewares/Third_Party/FatFs/src/ff.c **** 				bcs = (DWORD)fs->csize * SS(fs);	/* Cluster size in byte */
3464:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = fp->obj.sclust;				/* Follow the cluster chain */
3465:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (ofs = fp->obj.objsize; res == FR_OK && ofs > bcs; ofs -= bcs) {
3466:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = get_fat(&fp->obj, clst);
3467:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst <= 1) res = FR_INT_ERR;
3468:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) res = FR_DISK_ERR;
3469:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3470:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;
3471:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK && ofs % SS(fs)) {	/* Fill sector buffer if not on the sector boundary */
3472:Middlewares/Third_Party/FatFs/src/ff.c **** 					if ((sc = clust2sect(fs, clst)) == 0) {
3473:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = FR_INT_ERR;
3474:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else {
3475:Middlewares/Third_Party/FatFs/src/ff.c **** 						fp->sect = sc + (DWORD)(ofs / SS(fs));
3476:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
3477:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (disk_read(fs->drv, fp->buf, fp->sect, 1) != RES_OK) res = FR_DISK_ERR;
3478:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 90


3479:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
3480:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3481:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3482:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3483:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3484:Middlewares/Third_Party/FatFs/src/ff.c **** 
3485:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_NAMBUF();
3486:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3487:Middlewares/Third_Party/FatFs/src/ff.c **** 
3488:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) fp->obj.fs = 0;	/* Invalidate file object on error */
3489:Middlewares/Third_Party/FatFs/src/ff.c **** 
3490:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
3491:Middlewares/Third_Party/FatFs/src/ff.c **** }
3492:Middlewares/Third_Party/FatFs/src/ff.c **** 
3493:Middlewares/Third_Party/FatFs/src/ff.c **** 
3494:Middlewares/Third_Party/FatFs/src/ff.c **** 
3495:Middlewares/Third_Party/FatFs/src/ff.c **** 
3496:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3497:Middlewares/Third_Party/FatFs/src/ff.c **** /* Read File                                                             */
3498:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3499:Middlewares/Third_Party/FatFs/src/ff.c **** 
3500:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_read (
3501:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp, 	/* Pointer to the file object */
3502:Middlewares/Third_Party/FatFs/src/ff.c **** 	void* buff,	/* Pointer to data buffer */
3503:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT btr,	/* Number of bytes to read */
3504:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT* br	/* Pointer to number of bytes read */
3505:Middlewares/Third_Party/FatFs/src/ff.c **** )
3506:Middlewares/Third_Party/FatFs/src/ff.c **** {
3507:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3508:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
3509:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst, sect;
3510:Middlewares/Third_Party/FatFs/src/ff.c **** 	FSIZE_t remain;
3511:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT rcnt, cc, csect;
3512:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *rbuff = (BYTE*)buff;
3513:Middlewares/Third_Party/FatFs/src/ff.c **** 
3514:Middlewares/Third_Party/FatFs/src/ff.c **** 
3515:Middlewares/Third_Party/FatFs/src/ff.c **** 	*br = 0;	/* Clear read byte counter */
3516:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(&fp->obj, &fs);				/* Check validity of the file object */
3517:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);	/* Check validity */
3518:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_READ)) LEAVE_FF(fs, FR_DENIED); /* Check access mode */
3519:Middlewares/Third_Party/FatFs/src/ff.c **** 	remain = fp->obj.objsize - fp->fptr;
3520:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (btr > remain) btr = (UINT)remain;		/* Truncate btr by remaining bytes */
3521:Middlewares/Third_Party/FatFs/src/ff.c **** 
3522:Middlewares/Third_Party/FatFs/src/ff.c **** 	for ( ;  btr;								/* Repeat until all data read */
3523:Middlewares/Third_Party/FatFs/src/ff.c **** 		rbuff += rcnt, fp->fptr += rcnt, *br += rcnt, btr -= rcnt) {
3524:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr % SS(fs) == 0) {			/* On the sector boundary? */
3525:Middlewares/Third_Party/FatFs/src/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs) & (fs->csize - 1));	/* Sector offset in the cluster */
3526:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (csect == 0) {					/* On the cluster boundary? */
3527:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr == 0) {			/* On the top of the file? */
3528:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = fp->obj.sclust;		/* Follow cluster chain from the origin */
3529:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {						/* Middle or end of the file */
3530:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FASTSEEK
3531:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (fp->cltbl) {
3532:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = clmt_clust(fp, fp->fptr);	/* Get cluster# from the CLMT */
3533:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else
3534:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3535:Middlewares/Third_Party/FatFs/src/ff.c **** 					{
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 91


3536:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = get_fat(&fp->obj, fp->clust);	/* Follow cluster chain on the FAT */
3537:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
3538:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3539:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst < 2) ABORT(fs, FR_INT_ERR);
3540:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
3541:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;				/* Update current cluster */
3542:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3543:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect = clust2sect(fs, fp->clust);	/* Get current sector */
3544:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!sect) ABORT(fs, FR_INT_ERR);
3545:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
3546:Middlewares/Third_Party/FatFs/src/ff.c **** 			cc = btr / SS(fs);					/* When remaining bytes >= sector size, */
3547:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cc) {							/* Read maximum contiguous sectors directly */
3548:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (csect + cc > fs->csize) {	/* Clip at cluster boundary */
3549:Middlewares/Third_Party/FatFs/src/ff.c **** 					cc = fs->csize - csect;
3550:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3551:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_read(fs->drv, rbuff, sect, cc) != RES_OK) ABORT(fs, FR_DISK_ERR);
3552:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY && _FS_MINIMIZE <= 2			/* Replace one of the read sectors with cached data if it 
3553:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
3554:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fs->wflag && fs->winsect - sect < cc) {
3555:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(rbuff + ((fs->winsect - sect) * SS(fs)), fs->win, SS(fs));
3556:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3557:Middlewares/Third_Party/FatFs/src/ff.c **** #else
3558:Middlewares/Third_Party/FatFs/src/ff.c **** 				if ((fp->flag & FA_DIRTY) && fp->sect - sect < cc) {
3559:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(rbuff + ((fp->sect - sect) * SS(fs)), fp->buf, SS(fs));
3560:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3561:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3562:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3563:Middlewares/Third_Party/FatFs/src/ff.c **** 				rcnt = SS(fs) * cc;				/* Number of bytes transferred */
3564:Middlewares/Third_Party/FatFs/src/ff.c **** 				continue;
3565:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3566:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
3567:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fp->sect != sect) {			/* Load data sector if not in cache */
3568:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
3569:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->flag & FA_DIRTY) {		/* Write-back dirty sector cache */
3570:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
3571:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
3572:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3573:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3574:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_read(fs->drv, fp->buf, sect, 1) != RES_OK)	ABORT(fs, FR_DISK_ERR);	/* Fill sector cach
3575:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3576:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3577:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->sect = sect;
3578:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3579:Middlewares/Third_Party/FatFs/src/ff.c **** 		rcnt = SS(fs) - (UINT)fp->fptr % SS(fs);	/* Number of bytes left in the sector */
3580:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rcnt > btr) rcnt = btr;					/* Clip it by btr if needed */
3581:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
3582:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (move_window(fs, fp->sect) != FR_OK) ABORT(fs, FR_DISK_ERR);	/* Move sector window */
3583:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_cpy(rbuff, fs->win + fp->fptr % SS(fs), rcnt);	/* Extract partial sector */
3584:Middlewares/Third_Party/FatFs/src/ff.c **** #else
3585:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_cpy(rbuff, fp->buf + fp->fptr % SS(fs), rcnt);	/* Extract partial sector */
3586:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3587:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3588:Middlewares/Third_Party/FatFs/src/ff.c **** 
3589:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, FR_OK);
3590:Middlewares/Third_Party/FatFs/src/ff.c **** }
3591:Middlewares/Third_Party/FatFs/src/ff.c **** 
3592:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 92


3593:Middlewares/Third_Party/FatFs/src/ff.c **** 
3594:Middlewares/Third_Party/FatFs/src/ff.c **** 
3595:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
3596:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3597:Middlewares/Third_Party/FatFs/src/ff.c **** /* Write File                                                            */
3598:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3599:Middlewares/Third_Party/FatFs/src/ff.c **** 
3600:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_write (
3601:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp,			/* Pointer to the file object */
3602:Middlewares/Third_Party/FatFs/src/ff.c **** 	const void* buff,	/* Pointer to the data to be written */
3603:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT btw,			/* Number of bytes to write */
3604:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT* bw			/* Pointer to number of bytes written */
3605:Middlewares/Third_Party/FatFs/src/ff.c **** )
3606:Middlewares/Third_Party/FatFs/src/ff.c **** {
3607:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3608:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
3609:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst, sect;
3610:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT wcnt, cc, csect;
3611:Middlewares/Third_Party/FatFs/src/ff.c **** 	const BYTE *wbuff = (const BYTE*)buff;
3612:Middlewares/Third_Party/FatFs/src/ff.c **** 
3613:Middlewares/Third_Party/FatFs/src/ff.c **** 
3614:Middlewares/Third_Party/FatFs/src/ff.c **** 	*bw = 0;	/* Clear write byte counter */
3615:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(&fp->obj, &fs);			/* Check validity of the file object */
3616:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);	/* Check validity */
3617:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
3618:Middlewares/Third_Party/FatFs/src/ff.c **** 
3619:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Check fptr wrap-around (file size cannot reach 4GiB on FATxx) */
3620:Middlewares/Third_Party/FatFs/src/ff.c **** 	if ((!_FS_EXFAT || fs->fs_type != FS_EXFAT) && (DWORD)(fp->fptr + btw) < (DWORD)fp->fptr) {
3621:Middlewares/Third_Party/FatFs/src/ff.c **** 		btw = (UINT)(0xFFFFFFFF - (DWORD)fp->fptr);
3622:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3623:Middlewares/Third_Party/FatFs/src/ff.c **** 
3624:Middlewares/Third_Party/FatFs/src/ff.c **** 	for ( ;  btw;							/* Repeat until all data written */
3625:Middlewares/Third_Party/FatFs/src/ff.c **** 		wbuff += wcnt, fp->fptr += wcnt, fp->obj.objsize = (fp->fptr > fp->obj.objsize) ? fp->fptr : fp->
3626:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr % SS(fs) == 0) {		/* On the sector boundary? */
3627:Middlewares/Third_Party/FatFs/src/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs)) & (fs->csize - 1);	/* Sector offset in the cluster */
3628:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (csect == 0) {				/* On the cluster boundary? */
3629:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr == 0) {		/* On the top of the file? */
3630:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = fp->obj.sclust;	/* Follow from the origin */
3631:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0) {		/* If no cluster is allocated, */
3632:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = create_chain(&fp->obj, 0);	/* create a new cluster chain */
3633:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
3634:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {					/* On the middle or end of the file */
3635:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FASTSEEK
3636:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (fp->cltbl) {
3637:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = clmt_clust(fp, fp->fptr);	/* Get cluster# from the CLMT */
3638:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else
3639:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3640:Middlewares/Third_Party/FatFs/src/ff.c **** 					{
3641:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = create_chain(&fp->obj, fp->clust);	/* Follow or stretch cluster chain on the FAT */
3642:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
3643:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3644:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0) break;		/* Could not allocate a new cluster (disk full) */
3645:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 1) ABORT(fs, FR_INT_ERR);
3646:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
3647:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;			/* Update current cluster */
3648:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->obj.sclust == 0) fp->obj.sclust = clst;	/* Set start cluster if the first write */
3649:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 93


3650:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
3651:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->winsect == fp->sect && sync_window(fs) != FR_OK) ABORT(fs, FR_DISK_ERR);	/* Write-back s
3652:Middlewares/Third_Party/FatFs/src/ff.c **** #else
3653:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fp->flag & FA_DIRTY) {		/* Write-back sector cache */
3654:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
3655:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
3656:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3657:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3658:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect = clust2sect(fs, fp->clust);	/* Get current sector */
3659:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!sect) ABORT(fs, FR_INT_ERR);
3660:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
3661:Middlewares/Third_Party/FatFs/src/ff.c **** 			cc = btw / SS(fs);				/* When remaining bytes >= sector size, */
3662:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cc) {						/* Write maximum contiguous sectors directly */
3663:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (csect + cc > fs->csize) {	/* Clip at cluster boundary */
3664:Middlewares/Third_Party/FatFs/src/ff.c **** 					cc = fs->csize - csect;
3665:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3666:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fs->drv, wbuff, sect, cc) != RES_OK) ABORT(fs, FR_DISK_ERR);
3667:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 2
3668:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
3669:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fs->winsect - sect < cc) {	/* Refill sector cache if it gets invalidated by the direct writ
3670:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(fs->win, wbuff + ((fs->winsect - sect) * SS(fs)), SS(fs));
3671:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->wflag = 0;
3672:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3673:Middlewares/Third_Party/FatFs/src/ff.c **** #else
3674:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->sect - sect < cc) { /* Refill sector cache if it gets invalidated by the direct write *
3675:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(fp->buf, wbuff + ((fp->sect - sect) * SS(fs)), SS(fs));
3676:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
3677:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3678:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3679:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3680:Middlewares/Third_Party/FatFs/src/ff.c **** 				wcnt = SS(fs) * cc;		/* Number of bytes transferred */
3681:Middlewares/Third_Party/FatFs/src/ff.c **** 				continue;
3682:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3683:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
3684:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fp->fptr >= fp->obj.objsize) {	/* Avoid silly cache filling on the growing edge */
3685:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (sync_window(fs) != FR_OK) ABORT(fs, FR_DISK_ERR);
3686:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->winsect = sect;
3687:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3688:Middlewares/Third_Party/FatFs/src/ff.c **** #else
3689:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fp->sect != sect && 		/* Fill sector cache with file data */
3690:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fptr < fp->obj.objsize &&
3691:Middlewares/Third_Party/FatFs/src/ff.c **** 				disk_read(fs->drv, fp->buf, sect, 1) != RES_OK) {
3692:Middlewares/Third_Party/FatFs/src/ff.c **** 					ABORT(fs, FR_DISK_ERR);
3693:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3694:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3695:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->sect = sect;
3696:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3697:Middlewares/Third_Party/FatFs/src/ff.c **** 		wcnt = SS(fs) - (UINT)fp->fptr % SS(fs);	/* Number of bytes left in the sector */
3698:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (wcnt > btw) wcnt = btw;					/* Clip it by btw if needed */
3699:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
3700:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (move_window(fs, fp->sect) != FR_OK) ABORT(fs, FR_DISK_ERR);	/* Move sector window */
3701:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_cpy(fs->win + fp->fptr % SS(fs), wbuff, wcnt);	/* Fit data to the sector */
3702:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->wflag = 1;
3703:Middlewares/Third_Party/FatFs/src/ff.c **** #else
3704:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_cpy(fp->buf + fp->fptr % SS(fs), wbuff, wcnt);	/* Fit data to the sector */
3705:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->flag |= FA_DIRTY;
3706:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 94


3707:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3708:Middlewares/Third_Party/FatFs/src/ff.c **** 
3709:Middlewares/Third_Party/FatFs/src/ff.c **** 	fp->flag |= FA_MODIFIED;				/* Set file change flag */
3710:Middlewares/Third_Party/FatFs/src/ff.c **** 
3711:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, FR_OK);
3712:Middlewares/Third_Party/FatFs/src/ff.c **** }
3713:Middlewares/Third_Party/FatFs/src/ff.c **** 
3714:Middlewares/Third_Party/FatFs/src/ff.c **** 
3715:Middlewares/Third_Party/FatFs/src/ff.c **** 
3716:Middlewares/Third_Party/FatFs/src/ff.c **** 
3717:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3718:Middlewares/Third_Party/FatFs/src/ff.c **** /* Synchronize the File                                                  */
3719:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3720:Middlewares/Third_Party/FatFs/src/ff.c **** 
3721:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_sync (
3722:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp		/* Pointer to the file object */
3723:Middlewares/Third_Party/FatFs/src/ff.c **** )
3724:Middlewares/Third_Party/FatFs/src/ff.c **** {
3725:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3726:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
3727:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD tm;
3728:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *dir;
3729:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
3730:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
3731:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEF_NAMBUF
3732:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3733:Middlewares/Third_Party/FatFs/src/ff.c **** 
3734:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(&fp->obj, &fs);	/* Check validity of the file object */
3735:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
3736:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->flag & FA_MODIFIED) {	/* Is there any change to the file? */
3737:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
3738:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fp->flag & FA_DIRTY) {	/* Write-back cached data if needed */
3739:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) LEAVE_FF(fs, FR_DISK_ERR);
3740:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
3741:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3742:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3743:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Update the directory entry */
3744:Middlewares/Third_Party/FatFs/src/ff.c **** 			tm = GET_FATTIME();				/* Modified time */
3745:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
3746:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->fs_type == FS_EXFAT) {
3747:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = fill_first_frag(&fp->obj);	/* Fill first fragment on the FAT if needed */
3748:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) {
3749:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = fill_last_frag(&fp->obj, fp->clust, 0xFFFFFFFF);	/* Fill last fragment on the FAT if nee
3750:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3751:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) {
3752:Middlewares/Third_Party/FatFs/src/ff.c **** 					INIT_NAMBUF(fs);
3753:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = load_obj_dir(&dj, &fp->obj);	/* Load directory entry block */
3754:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res == FR_OK) {
3755:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->dirbuf[XDIR_Attr] |= AM_ARC;				/* Set archive bit */
3756:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->dirbuf[XDIR_GenFlags] = fp->obj.stat | 1;	/* Update file allocation info */
3757:Middlewares/Third_Party/FatFs/src/ff.c **** 						st_dword(fs->dirbuf + XDIR_FstClus, fp->obj.sclust);
3758:Middlewares/Third_Party/FatFs/src/ff.c **** 						st_qword(fs->dirbuf + XDIR_FileSize, fp->obj.objsize);
3759:Middlewares/Third_Party/FatFs/src/ff.c **** 						st_qword(fs->dirbuf + XDIR_ValidFileSize, fp->obj.objsize);
3760:Middlewares/Third_Party/FatFs/src/ff.c **** 						st_dword(fs->dirbuf + XDIR_ModTime, tm);		/* Update modified time */
3761:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->dirbuf[XDIR_ModTime10] = 0;
3762:Middlewares/Third_Party/FatFs/src/ff.c **** 						st_dword(fs->dirbuf + XDIR_AccTime, 0);
3763:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = store_xdir(&dj);	/* Restore it to the directory */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 95


3764:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (res == FR_OK) {
3765:Middlewares/Third_Party/FatFs/src/ff.c **** 							res = sync_fs(fs);
3766:Middlewares/Third_Party/FatFs/src/ff.c **** 							fp->flag &= (BYTE)~FA_MODIFIED;
3767:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
3768:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
3769:Middlewares/Third_Party/FatFs/src/ff.c **** 					FREE_NAMBUF();
3770:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3771:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else
3772:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3773:Middlewares/Third_Party/FatFs/src/ff.c **** 			{
3774:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = move_window(fs, fp->dir_sect);
3775:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) {
3776:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir = fp->dir_ptr;
3777:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir[DIR_Attr] |= AM_ARC;						/* Set archive bit */
3778:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fp->obj.fs, dir, fp->obj.sclust);		/* Update file allocation info  */
3779:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dir + DIR_FileSize, (DWORD)fp->obj.objsize);	/* Update file size */
3780:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dir + DIR_ModTime, tm);				/* Update modified time */
3781:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_word(dir + DIR_LstAccDate, 0);
3782:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->wflag = 1;
3783:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = sync_fs(fs);					/* Restore it to the directory */
3784:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->flag &= (BYTE)~FA_MODIFIED;
3785:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3786:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3787:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3788:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3789:Middlewares/Third_Party/FatFs/src/ff.c **** 
3790:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
3791:Middlewares/Third_Party/FatFs/src/ff.c **** }
3792:Middlewares/Third_Party/FatFs/src/ff.c **** 
3793:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
3794:Middlewares/Third_Party/FatFs/src/ff.c **** 
3795:Middlewares/Third_Party/FatFs/src/ff.c **** 
3796:Middlewares/Third_Party/FatFs/src/ff.c **** 
3797:Middlewares/Third_Party/FatFs/src/ff.c **** 
3798:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3799:Middlewares/Third_Party/FatFs/src/ff.c **** /* Close File                                                            */
3800:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3801:Middlewares/Third_Party/FatFs/src/ff.c **** 
3802:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_close (
3803:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp		/* Pointer to the file object to be closed */
3804:Middlewares/Third_Party/FatFs/src/ff.c **** )
3805:Middlewares/Third_Party/FatFs/src/ff.c **** {
3806:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3807:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
3808:Middlewares/Third_Party/FatFs/src/ff.c **** 
3809:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
3810:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = f_sync(fp);					/* Flush cached data */
3811:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK)
3812:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3813:Middlewares/Third_Party/FatFs/src/ff.c **** 	{
3814:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = validate(&fp->obj, &fs);	/* Lock volume */
3815:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
3816:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
3817:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dec_lock(fp->obj.lockid);	/* Decrement file open counter */
3818:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK)
3819:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3820:Middlewares/Third_Party/FatFs/src/ff.c **** 			{
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 96


3821:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->obj.fs = 0;			/* Invalidate file object */
3822:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3823:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
3824:Middlewares/Third_Party/FatFs/src/ff.c **** 			unlock_fs(fs, FR_OK);		/* Unlock volume */
3825:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3826:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3827:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3828:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
3829:Middlewares/Third_Party/FatFs/src/ff.c **** }
3830:Middlewares/Third_Party/FatFs/src/ff.c **** 
3831:Middlewares/Third_Party/FatFs/src/ff.c **** 
3832:Middlewares/Third_Party/FatFs/src/ff.c **** 
3833:Middlewares/Third_Party/FatFs/src/ff.c **** 
3834:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH >= 1
3835:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3836:Middlewares/Third_Party/FatFs/src/ff.c **** /* Change Current Directory or Current Drive, Get Current Directory      */
3837:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3838:Middlewares/Third_Party/FatFs/src/ff.c **** 
3839:Middlewares/Third_Party/FatFs/src/ff.c **** #if _VOLUMES >= 2
3840:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_chdrive (
3841:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path		/* Drive number */
3842:Middlewares/Third_Party/FatFs/src/ff.c **** )
3843:Middlewares/Third_Party/FatFs/src/ff.c **** {
3844:Middlewares/Third_Party/FatFs/src/ff.c **** 	int vol;
3845:Middlewares/Third_Party/FatFs/src/ff.c **** 
3846:Middlewares/Third_Party/FatFs/src/ff.c **** 
3847:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive number */
3848:Middlewares/Third_Party/FatFs/src/ff.c **** 	vol = get_ldnumber(&path);
3849:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
3850:Middlewares/Third_Party/FatFs/src/ff.c **** 
3851:Middlewares/Third_Party/FatFs/src/ff.c **** 	CurrVol = (BYTE)vol;	/* Set it as current volume */
3852:Middlewares/Third_Party/FatFs/src/ff.c **** 
3853:Middlewares/Third_Party/FatFs/src/ff.c **** 	return FR_OK;
3854:Middlewares/Third_Party/FatFs/src/ff.c **** }
3855:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3856:Middlewares/Third_Party/FatFs/src/ff.c **** 
3857:Middlewares/Third_Party/FatFs/src/ff.c **** 
3858:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_chdir (
3859:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path	/* Pointer to the directory path */
3860:Middlewares/Third_Party/FatFs/src/ff.c **** )
3861:Middlewares/Third_Party/FatFs/src/ff.c **** {
3862:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3863:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
3864:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
3865:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEF_NAMBUF
3866:Middlewares/Third_Party/FatFs/src/ff.c **** 
3867:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive */
3868:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path, &fs, 0);
3869:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
3870:Middlewares/Third_Party/FatFs/src/ff.c **** 		dj.obj.fs = fs;
3871:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
3872:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);		/* Follow the path */
3873:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {					/* Follow completed */
3874:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {
3875:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->cdir = dj.obj.sclust;	/* It is the start directory itself */
3876:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
3877:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fs->fs_type == FS_EXFAT) {
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 97


3878:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->cdc_scl = dj.obj.c_scl;
3879:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->cdc_size = dj.obj.c_size;
3880:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->cdc_ofs = dj.obj.c_ofs;
3881:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3882:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3883:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
3884:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dj.obj.attr & AM_DIR) {	/* It is a sub-directory */
3885:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
3886:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (fs->fs_type == FS_EXFAT) {
3887:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->cdir = ld_dword(fs->dirbuf + XDIR_FstClus);		/* Sub-directory cluster */
3888:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->cdc_scl = dj.obj.sclust;						/* Save containing directory information */
3889:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->cdc_size = ((DWORD)dj.obj.objsize & 0xFFFFFF00) | dj.obj.stat;
3890:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->cdc_ofs = dj.blk_ofs;
3891:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else
3892:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3893:Middlewares/Third_Party/FatFs/src/ff.c **** 					{
3894:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->cdir = ld_clust(fs, dj.dir);					/* Sub-directory cluster */
3895:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
3896:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
3897:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_NO_PATH;		/* Reached but a file */
3898:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3899:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3900:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3901:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_NAMBUF();
3902:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_NO_FILE) res = FR_NO_PATH;
3903:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3904:Middlewares/Third_Party/FatFs/src/ff.c **** 
3905:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
3906:Middlewares/Third_Party/FatFs/src/ff.c **** }
3907:Middlewares/Third_Party/FatFs/src/ff.c **** 
3908:Middlewares/Third_Party/FatFs/src/ff.c **** 
3909:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH >= 2
3910:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_getcwd (
3911:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR* buff,	/* Pointer to the directory path */
3912:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT len		/* Size of path */
3913:Middlewares/Third_Party/FatFs/src/ff.c **** )
3914:Middlewares/Third_Party/FatFs/src/ff.c **** {
3915:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3916:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
3917:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
3918:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, n;
3919:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD ccl;
3920:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR *tp;
3921:Middlewares/Third_Party/FatFs/src/ff.c **** 	FILINFO fno;
3922:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEF_NAMBUF
3923:Middlewares/Third_Party/FatFs/src/ff.c **** 
3924:Middlewares/Third_Party/FatFs/src/ff.c **** 
3925:Middlewares/Third_Party/FatFs/src/ff.c **** 	*buff = 0;
3926:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive */
3927:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume((const TCHAR**)&buff, &fs, 0);	/* Get current volume */
3928:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
3929:Middlewares/Third_Party/FatFs/src/ff.c **** 		dj.obj.fs = fs;
3930:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
3931:Middlewares/Third_Party/FatFs/src/ff.c **** 		i = len;			/* Bottom of buffer (directory stack base) */
3932:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!_FS_EXFAT || fs->fs_type != FS_EXFAT) {	/* (Cannot do getcwd on exFAT and returns root path)
3933:Middlewares/Third_Party/FatFs/src/ff.c **** 			dj.obj.sclust = fs->cdir;				/* Start to follow upper directory from current directory */
3934:Middlewares/Third_Party/FatFs/src/ff.c **** 			while ((ccl = dj.obj.sclust) != 0) {	/* Repeat while current directory is a sub-directory */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 98


3935:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_sdi(&dj, 1 * SZDIRE);	/* Get parent directory */
3936:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res != FR_OK) break;
3937:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = move_window(fs, dj.sect);
3938:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res != FR_OK) break;
3939:Middlewares/Third_Party/FatFs/src/ff.c **** 				dj.obj.sclust = ld_clust(fs, dj.dir);	/* Goto parent directory */
3940:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_sdi(&dj, 0);
3941:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res != FR_OK) break;
3942:Middlewares/Third_Party/FatFs/src/ff.c **** 				do {							/* Find the entry links to the child directory */
3943:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = dir_read(&dj, 0);
3944:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res != FR_OK) break;
3945:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (ccl == ld_clust(fs, dj.dir)) break;	/* Found the entry */
3946:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = dir_next(&dj, 0);
3947:Middlewares/Third_Party/FatFs/src/ff.c **** 				} while (res == FR_OK);
3948:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE) res = FR_INT_ERR;/* It cannot be 'not found'. */
3949:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res != FR_OK) break;
3950:Middlewares/Third_Party/FatFs/src/ff.c **** 				get_fileinfo(&dj, &fno);		/* Get the directory name and push it to the buffer */
3951:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (n = 0; fno.fname[n]; n++) ;
3952:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (i < n + 3) {
3953:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_NOT_ENOUGH_CORE; break;
3954:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3955:Middlewares/Third_Party/FatFs/src/ff.c **** 				while (n) buff[--i] = fno.fname[--n];
3956:Middlewares/Third_Party/FatFs/src/ff.c **** 				buff[--i] = '/';
3957:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3958:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3959:Middlewares/Third_Party/FatFs/src/ff.c **** 		tp = buff;
3960:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
3961:Middlewares/Third_Party/FatFs/src/ff.c **** #if _VOLUMES >= 2
3962:Middlewares/Third_Party/FatFs/src/ff.c **** 			*tp++ = '0' + CurrVol;			/* Put drive number */
3963:Middlewares/Third_Party/FatFs/src/ff.c **** 			*tp++ = ':';
3964:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3965:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i == len) {					/* Root-directory */
3966:Middlewares/Third_Party/FatFs/src/ff.c **** 				*tp++ = '/';
3967:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {						/* Sub-directroy */
3968:Middlewares/Third_Party/FatFs/src/ff.c **** 				do		/* Add stacked path str */
3969:Middlewares/Third_Party/FatFs/src/ff.c **** 					*tp++ = buff[i++];
3970:Middlewares/Third_Party/FatFs/src/ff.c **** 				while (i < len);
3971:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3972:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3973:Middlewares/Third_Party/FatFs/src/ff.c **** 		*tp = 0;
3974:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_NAMBUF();
3975:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3976:Middlewares/Third_Party/FatFs/src/ff.c **** 
3977:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
3978:Middlewares/Third_Party/FatFs/src/ff.c **** }
3979:Middlewares/Third_Party/FatFs/src/ff.c **** 
3980:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _FS_RPATH >= 2 */
3981:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _FS_RPATH >= 1 */
3982:Middlewares/Third_Party/FatFs/src/ff.c **** 
3983:Middlewares/Third_Party/FatFs/src/ff.c **** 
3984:Middlewares/Third_Party/FatFs/src/ff.c **** 
3985:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 2
3986:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3987:Middlewares/Third_Party/FatFs/src/ff.c **** /* Seek File R/W Pointer                                                 */
3988:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3989:Middlewares/Third_Party/FatFs/src/ff.c **** 
3990:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_lseek (
3991:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp,		/* Pointer to the file object */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 99


3992:Middlewares/Third_Party/FatFs/src/ff.c **** 	FSIZE_t ofs		/* File pointer from top of file */
3993:Middlewares/Third_Party/FatFs/src/ff.c **** )
3994:Middlewares/Third_Party/FatFs/src/ff.c **** {
3995:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3996:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
3997:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst, bcs, nsect;
3998:Middlewares/Third_Party/FatFs/src/ff.c **** 	FSIZE_t ifptr;
3999:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FASTSEEK
4000:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD cl, pcl, ncl, tcl, dsc, tlen, ulen, *tbl;
4001:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4002:Middlewares/Third_Party/FatFs/src/ff.c **** 
4003:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(&fp->obj, &fs);		/* Check validity of the file object */
4004:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) res = (FRESULT)fp->err;
4005:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT && !_FS_READONLY
4006:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK && fs->fs_type == FS_EXFAT) {
4007:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = fill_last_frag(&fp->obj, fp->clust, 0xFFFFFFFF);	/* Fill last fragment on the FAT if needed
4008:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4009:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4010:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) LEAVE_FF(fs, res);
4011:Middlewares/Third_Party/FatFs/src/ff.c **** 
4012:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FASTSEEK
4013:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fp->cltbl) {	/* Fast seek */
4014:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs == CREATE_LINKMAP) {	/* Create CLMT */
4015:Middlewares/Third_Party/FatFs/src/ff.c **** 			tbl = fp->cltbl;
4016:Middlewares/Third_Party/FatFs/src/ff.c **** 			tlen = *tbl++; ulen = 2;	/* Given table size and required table size */
4017:Middlewares/Third_Party/FatFs/src/ff.c **** 			cl = fp->obj.sclust;		/* Origin of the chain */
4018:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cl) {
4019:Middlewares/Third_Party/FatFs/src/ff.c **** 				do {
4020:Middlewares/Third_Party/FatFs/src/ff.c **** 					/* Get a fragment */
4021:Middlewares/Third_Party/FatFs/src/ff.c **** 					tcl = cl; ncl = 0; ulen += 2;	/* Top, length and used items */
4022:Middlewares/Third_Party/FatFs/src/ff.c **** 					do {
4023:Middlewares/Third_Party/FatFs/src/ff.c **** 						pcl = cl; ncl++;
4024:Middlewares/Third_Party/FatFs/src/ff.c **** 						cl = get_fat(&fp->obj, cl);
4025:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl <= 1) ABORT(fs, FR_INT_ERR);
4026:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
4027:Middlewares/Third_Party/FatFs/src/ff.c **** 					} while (cl == pcl + 1);
4028:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (ulen <= tlen) {		/* Store the length and top of the fragment */
4029:Middlewares/Third_Party/FatFs/src/ff.c **** 						*tbl++ = ncl; *tbl++ = tcl;
4030:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
4031:Middlewares/Third_Party/FatFs/src/ff.c **** 				} while (cl < fs->n_fatent);	/* Repeat until end of chain */
4032:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4033:Middlewares/Third_Party/FatFs/src/ff.c **** 			*fp->cltbl = ulen;	/* Number of items used */
4034:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ulen <= tlen) {
4035:Middlewares/Third_Party/FatFs/src/ff.c **** 				*tbl = 0;		/* Terminate table */
4036:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
4037:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_NOT_ENOUGH_CORE;	/* Given table size is smaller than required */
4038:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4039:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {						/* Fast seek */
4040:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ofs > fp->obj.objsize) ofs = fp->obj.objsize;	/* Clip offset at the file size */
4041:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->fptr = ofs;				/* Set file pointer */
4042:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ofs) {
4043:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clmt_clust(fp, ofs - 1);
4044:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc = clust2sect(fs, fp->clust);
4045:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!dsc) ABORT(fs, FR_INT_ERR);
4046:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc += (DWORD)((ofs - 1) / SS(fs)) & (fs->csize - 1);
4047:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr % SS(fs) && dsc != fp->sect) {	/* Refill sector cache if needed */
4048:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 100


4049:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
4050:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (fp->flag & FA_DIRTY) {		/* Write-back dirty sector cache */
4051:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
4052:Middlewares/Third_Party/FatFs/src/ff.c **** 						fp->flag &= (BYTE)~FA_DIRTY;
4053:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
4054:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4055:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (disk_read(fs->drv, fp->buf, dsc, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);	/* Load current sec
4056:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4057:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->sect = dsc;
4058:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4059:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4060:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4061:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else
4062:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4063:Middlewares/Third_Party/FatFs/src/ff.c **** 
4064:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Normal Seek */
4065:Middlewares/Third_Party/FatFs/src/ff.c **** 	{
4066:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
4067:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->fs_type != FS_EXFAT && ofs >= 0x100000000) ofs = 0xFFFFFFFF;	/* Clip at 4GiB-1 if at FATx
4068:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4069:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs > fp->obj.objsize && (_FS_READONLY || !(fp->flag & FA_WRITE))) {	/* In read-only mode, cl
4070:Middlewares/Third_Party/FatFs/src/ff.c **** 			ofs = fp->obj.objsize;
4071:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4072:Middlewares/Third_Party/FatFs/src/ff.c **** 		ifptr = fp->fptr;
4073:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->fptr = nsect = 0;
4074:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs) {
4075:Middlewares/Third_Party/FatFs/src/ff.c **** 			bcs = (DWORD)fs->csize * SS(fs);	/* Cluster size (byte) */
4076:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ifptr > 0 &&
4077:Middlewares/Third_Party/FatFs/src/ff.c **** 				(ofs - 1) / bcs >= (ifptr - 1) / bcs) {	/* When seek to same or following cluster, */
4078:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fptr = (ifptr - 1) & ~(FSIZE_t)(bcs - 1);	/* start from the current cluster */
4079:Middlewares/Third_Party/FatFs/src/ff.c **** 				ofs -= fp->fptr;
4080:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = fp->clust;
4081:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {									/* When seek to back cluster, */
4082:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = fp->obj.sclust;					/* start from the first cluster */
4083:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
4084:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0) {						/* If no cluster chain, create a new chain */
4085:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = create_chain(&fp->obj, 0);
4086:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 1) ABORT(fs, FR_INT_ERR);
4087:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
4088:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->obj.sclust = clst;
4089:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4090:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4091:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;
4092:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4093:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (clst != 0) {
4094:Middlewares/Third_Party/FatFs/src/ff.c **** 				while (ofs > bcs) {						/* Cluster following loop */
4095:Middlewares/Third_Party/FatFs/src/ff.c **** 					ofs -= bcs; fp->fptr += bcs;
4096:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
4097:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (fp->flag & FA_WRITE) {			/* Check if in write mode or not */
4098:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (_FS_EXFAT && fp->fptr > fp->obj.objsize) {	/* No FAT chain object needs correct objsize t
4099:Middlewares/Third_Party/FatFs/src/ff.c **** 							fp->obj.objsize = fp->fptr;
4100:Middlewares/Third_Party/FatFs/src/ff.c **** 							fp->flag |= FA_MODIFIED;
4101:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
4102:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = create_chain(&fp->obj, clst);	/* Follow chain with forceed stretch */
4103:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (clst == 0) {				/* Clip file size in case of disk full */
4104:Middlewares/Third_Party/FatFs/src/ff.c **** 							ofs = 0; break;
4105:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 101


4106:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else
4107:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4108:Middlewares/Third_Party/FatFs/src/ff.c **** 					{
4109:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = get_fat(&fp->obj, clst);	/* Follow cluster chain if not in write mode */
4110:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
4111:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
4112:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst <= 1 || clst >= fs->n_fatent) ABORT(fs, FR_INT_ERR);
4113:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->clust = clst;
4114:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4115:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fptr += ofs;
4116:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (ofs % SS(fs)) {
4117:Middlewares/Third_Party/FatFs/src/ff.c **** 					nsect = clust2sect(fs, clst);	/* Current sector */
4118:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!nsect) ABORT(fs, FR_INT_ERR);
4119:Middlewares/Third_Party/FatFs/src/ff.c **** 					nsect += (DWORD)(ofs / SS(fs));
4120:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4121:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4122:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4123:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!_FS_READONLY && fp->fptr > fp->obj.objsize) {		/* Set file change flag if the file size is e
4124:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->obj.objsize = fp->fptr;
4125:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->flag |= FA_MODIFIED;
4126:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4127:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr % SS(fs) && nsect != fp->sect) {	/* Fill sector cache if needed */
4128:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
4129:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
4130:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fp->flag & FA_DIRTY) {			/* Write-back dirty sector cache */
4131:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
4132:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
4133:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4134:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4135:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_read(fs->drv, fp->buf, nsect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);	/* Fill sector cach
4136:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4137:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->sect = nsect;
4138:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4139:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4140:Middlewares/Third_Party/FatFs/src/ff.c **** 
4141:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
4142:Middlewares/Third_Party/FatFs/src/ff.c **** }
4143:Middlewares/Third_Party/FatFs/src/ff.c **** 
4144:Middlewares/Third_Party/FatFs/src/ff.c **** 
4145:Middlewares/Third_Party/FatFs/src/ff.c **** 
4146:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 1
4147:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4148:Middlewares/Third_Party/FatFs/src/ff.c **** /* Create a Directory Object                                             */
4149:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4150:Middlewares/Third_Party/FatFs/src/ff.c **** 
4151:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_opendir (
4152:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,			/* Pointer to directory object to create */
4153:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path	/* Pointer to the directory path */
4154:Middlewares/Third_Party/FatFs/src/ff.c **** )
4155:Middlewares/Third_Party/FatFs/src/ff.c **** {
4156:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
4157:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
4158:Middlewares/Third_Party/FatFs/src/ff.c **** 	_FDID *obj;
4159:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEF_NAMBUF
4160:Middlewares/Third_Party/FatFs/src/ff.c **** 
4161:Middlewares/Third_Party/FatFs/src/ff.c **** 
4162:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!dp) return FR_INVALID_OBJECT;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 102


4163:Middlewares/Third_Party/FatFs/src/ff.c **** 
4164:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive */
4165:Middlewares/Third_Party/FatFs/src/ff.c **** 	obj = &dp->obj;
4166:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path, &fs, 0);
4167:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
4168:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->fs = fs;
4169:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
4170:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(dp, path);			/* Follow the path to the directory */
4171:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {						/* Follow completed */
4172:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!(dp->fn[NSFLAG] & NS_NONAME)) {	/* It is not the origin directory itself */
4173:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (obj->attr & AM_DIR) {		/* This object is a sub-directory */
4174:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
4175:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (fs->fs_type == FS_EXFAT) {
4176:Middlewares/Third_Party/FatFs/src/ff.c **** 						obj->c_scl = obj->sclust;							/* Get containing directory inforamation */
4177:Middlewares/Third_Party/FatFs/src/ff.c **** 						obj->c_size = ((DWORD)obj->objsize & 0xFFFFFF00) | obj->stat;
4178:Middlewares/Third_Party/FatFs/src/ff.c **** 						obj->c_ofs = dp->blk_ofs;
4179:Middlewares/Third_Party/FatFs/src/ff.c **** 						obj->sclust = ld_dword(fs->dirbuf + XDIR_FstClus);	/* Get object allocation info */
4180:Middlewares/Third_Party/FatFs/src/ff.c **** 						obj->objsize = ld_qword(fs->dirbuf + XDIR_FileSize);
4181:Middlewares/Third_Party/FatFs/src/ff.c **** 						obj->stat = fs->dirbuf[XDIR_GenFlags] & 2;
4182:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else
4183:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4184:Middlewares/Third_Party/FatFs/src/ff.c **** 					{
4185:Middlewares/Third_Party/FatFs/src/ff.c **** 						obj->sclust = ld_clust(fs, dp->dir);	/* Get object allocation info */
4186:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
4187:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {						/* This object is a file */
4188:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_NO_PATH;
4189:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4190:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4191:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {
4192:Middlewares/Third_Party/FatFs/src/ff.c **** 				obj->id = fs->id;
4193:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_sdi(dp, 0);			/* Rewind directory */
4194:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
4195:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) {
4196:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (obj->sclust) {
4197:Middlewares/Third_Party/FatFs/src/ff.c **** 						obj->lockid = inc_lock(dp, 0);	/* Lock the sub directory */
4198:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (!obj->lockid) res = FR_TOO_MANY_OPEN_FILES;
4199:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else {
4200:Middlewares/Third_Party/FatFs/src/ff.c **** 						obj->lockid = 0;	/* Root directory need not to be locked */
4201:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
4202:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4203:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4204:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4205:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4206:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_NAMBUF();
4207:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_NO_FILE) res = FR_NO_PATH;
4208:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4209:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) obj->fs = 0;		/* Invalidate the directory object if function faild */
4210:Middlewares/Third_Party/FatFs/src/ff.c **** 
4211:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
4212:Middlewares/Third_Party/FatFs/src/ff.c **** }
4213:Middlewares/Third_Party/FatFs/src/ff.c **** 
4214:Middlewares/Third_Party/FatFs/src/ff.c **** 
4215:Middlewares/Third_Party/FatFs/src/ff.c **** 
4216:Middlewares/Third_Party/FatFs/src/ff.c **** 
4217:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4218:Middlewares/Third_Party/FatFs/src/ff.c **** /* Close Directory                                                       */
4219:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 103


4220:Middlewares/Third_Party/FatFs/src/ff.c **** 
4221:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_closedir (
4222:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR *dp		/* Pointer to the directory object to be closed */
4223:Middlewares/Third_Party/FatFs/src/ff.c **** )
4224:Middlewares/Third_Party/FatFs/src/ff.c **** {
4225:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
4226:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
4227:Middlewares/Third_Party/FatFs/src/ff.c **** 
4228:Middlewares/Third_Party/FatFs/src/ff.c **** 
4229:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(&dp->obj, &fs);			/* Check validity of the file object */
4230:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
4231:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
4232:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (dp->obj.lockid) {				/* Decrement sub-directory open counter */
4233:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dec_lock(dp->obj.lockid);
4234:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4235:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK)
4236:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4237:Middlewares/Third_Party/FatFs/src/ff.c **** 		{
4238:Middlewares/Third_Party/FatFs/src/ff.c **** 			dp->obj.fs = 0;			/* Invalidate directory object */
4239:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4240:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
4241:Middlewares/Third_Party/FatFs/src/ff.c **** 		unlock_fs(fs, FR_OK);		/* Unlock volume */
4242:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4243:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4244:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
4245:Middlewares/Third_Party/FatFs/src/ff.c **** }
4246:Middlewares/Third_Party/FatFs/src/ff.c **** 
4247:Middlewares/Third_Party/FatFs/src/ff.c **** 
4248:Middlewares/Third_Party/FatFs/src/ff.c **** 
4249:Middlewares/Third_Party/FatFs/src/ff.c **** 
4250:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4251:Middlewares/Third_Party/FatFs/src/ff.c **** /* Read Directory Entries in Sequence                                    */
4252:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4253:Middlewares/Third_Party/FatFs/src/ff.c **** 
4254:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_readdir (
4255:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,			/* Pointer to the open directory object */
4256:Middlewares/Third_Party/FatFs/src/ff.c **** 	FILINFO* fno		/* Pointer to file information to return */
4257:Middlewares/Third_Party/FatFs/src/ff.c **** )
4258:Middlewares/Third_Party/FatFs/src/ff.c **** {
4259:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
4260:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
4261:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEF_NAMBUF
4262:Middlewares/Third_Party/FatFs/src/ff.c **** 
4263:Middlewares/Third_Party/FatFs/src/ff.c **** 
4264:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(&dp->obj, &fs);	/* Check validity of the directory object */
4265:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
4266:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!fno) {
4267:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_sdi(dp, 0);			/* Rewind the directory object */
4268:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
4269:Middlewares/Third_Party/FatFs/src/ff.c **** 			INIT_NAMBUF(fs);
4270:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_read(dp, 0);			/* Read an item */
4271:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_NO_FILE) res = FR_OK;	/* Ignore end of directory */
4272:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {				/* A valid entry is found */
4273:Middlewares/Third_Party/FatFs/src/ff.c **** 				get_fileinfo(dp, fno);		/* Get the object information */
4274:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_next(dp, 0);		/* Increment index for next */
4275:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE) res = FR_OK;	/* Ignore end of directory now */
4276:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 104


4277:Middlewares/Third_Party/FatFs/src/ff.c **** 			FREE_NAMBUF();
4278:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4279:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4280:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
4281:Middlewares/Third_Party/FatFs/src/ff.c **** }
4282:Middlewares/Third_Party/FatFs/src/ff.c **** 
4283:Middlewares/Third_Party/FatFs/src/ff.c **** 
4284:Middlewares/Third_Party/FatFs/src/ff.c **** 
4285:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FIND
4286:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4287:Middlewares/Third_Party/FatFs/src/ff.c **** /* Find Next File                                                        */
4288:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4289:Middlewares/Third_Party/FatFs/src/ff.c **** 
4290:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_findnext (
4291:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,		/* Pointer to the open directory object */
4292:Middlewares/Third_Party/FatFs/src/ff.c **** 	FILINFO* fno	/* Pointer to the file information structure */
4293:Middlewares/Third_Party/FatFs/src/ff.c **** )
4294:Middlewares/Third_Party/FatFs/src/ff.c **** {
4295:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
4296:Middlewares/Third_Party/FatFs/src/ff.c **** 
4297:Middlewares/Third_Party/FatFs/src/ff.c **** 
4298:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (;;) {
4299:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = f_readdir(dp, fno);		/* Get a directory item */
4300:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK || !fno || !fno->fname[0]) break;	/* Terminate if any error or end of directory 
4301:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (pattern_matching(dp->pat, fno->fname, 0, 0)) break;		/* Test for the file name */
4302:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0 && _USE_FIND == 2
4303:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (pattern_matching(dp->pat, fno->altname, 0, 0)) break;	/* Test for alternative name if exist *
4304:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4305:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4306:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
4307:Middlewares/Third_Party/FatFs/src/ff.c **** }
4308:Middlewares/Third_Party/FatFs/src/ff.c **** 
4309:Middlewares/Third_Party/FatFs/src/ff.c **** 
4310:Middlewares/Third_Party/FatFs/src/ff.c **** 
4311:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4312:Middlewares/Third_Party/FatFs/src/ff.c **** /* Find First File                                                       */
4313:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4314:Middlewares/Third_Party/FatFs/src/ff.c **** 
4315:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_findfirst (
4316:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,				/* Pointer to the blank directory object */
4317:Middlewares/Third_Party/FatFs/src/ff.c **** 	FILINFO* fno,			/* Pointer to the file information structure */
4318:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path,		/* Pointer to the directory to open */
4319:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* pattern	/* Pointer to the matching pattern */
4320:Middlewares/Third_Party/FatFs/src/ff.c **** )
4321:Middlewares/Third_Party/FatFs/src/ff.c **** {
4322:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
4323:Middlewares/Third_Party/FatFs/src/ff.c **** 
4324:Middlewares/Third_Party/FatFs/src/ff.c **** 
4325:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->pat = pattern;		/* Save pointer to pattern string */
4326:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = f_opendir(dp, path);		/* Open the target directory */
4327:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
4328:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = f_findnext(dp, fno);	/* Find the first item */
4329:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4330:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
4331:Middlewares/Third_Party/FatFs/src/ff.c **** }
4332:Middlewares/Third_Party/FatFs/src/ff.c **** 
4333:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* _USE_FIND */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 105


4334:Middlewares/Third_Party/FatFs/src/ff.c **** 
4335:Middlewares/Third_Party/FatFs/src/ff.c **** 
4336:Middlewares/Third_Party/FatFs/src/ff.c **** 
4337:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE == 0
4338:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4339:Middlewares/Third_Party/FatFs/src/ff.c **** /* Get File Status                                                       */
4340:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4341:Middlewares/Third_Party/FatFs/src/ff.c **** 
4342:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_stat (
4343:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path,	/* Pointer to the file path */
4344:Middlewares/Third_Party/FatFs/src/ff.c **** 	FILINFO* fno		/* Pointer to file information to return */
4345:Middlewares/Third_Party/FatFs/src/ff.c **** )
4346:Middlewares/Third_Party/FatFs/src/ff.c **** {
4347:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
4348:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
4349:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEF_NAMBUF
4350:Middlewares/Third_Party/FatFs/src/ff.c **** 
4351:Middlewares/Third_Party/FatFs/src/ff.c **** 
4352:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive */
4353:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path, &dj.obj.fs, 0);
4354:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
4355:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(dj.obj.fs);
4356:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
4357:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {				/* Follow completed */
4358:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {	/* It is origin directory */
4359:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;
4360:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {							/* Found an object */
4361:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fno) get_fileinfo(&dj, fno);
4362:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4363:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4364:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_NAMBUF();
4365:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4366:Middlewares/Third_Party/FatFs/src/ff.c **** 
4367:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(dj.obj.fs, res);
4368:Middlewares/Third_Party/FatFs/src/ff.c **** }
4369:Middlewares/Third_Party/FatFs/src/ff.c **** 
4370:Middlewares/Third_Party/FatFs/src/ff.c **** 
4371:Middlewares/Third_Party/FatFs/src/ff.c **** 
4372:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
4373:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4374:Middlewares/Third_Party/FatFs/src/ff.c **** /* Get Number of Free Clusters                                           */
4375:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4376:Middlewares/Third_Party/FatFs/src/ff.c **** 
4377:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_getfree (
4378:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path,	/* Path name of the logical drive number */
4379:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD* nclst,		/* Pointer to a variable to return number of free clusters */
4380:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS** fatfs		/* Pointer to return pointer to corresponding file system object */
4381:Middlewares/Third_Party/FatFs/src/ff.c **** )
4382:Middlewares/Third_Party/FatFs/src/ff.c **** {
4383:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
4384:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
4385:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD nfree, clst, sect, stat;
4386:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
4387:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *p;
4388:Middlewares/Third_Party/FatFs/src/ff.c **** 	_FDID obj;
4389:Middlewares/Third_Party/FatFs/src/ff.c **** 
4390:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 106


4391:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive */
4392:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path, &fs, 0);
4393:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
4394:Middlewares/Third_Party/FatFs/src/ff.c **** 		*fatfs = fs;				/* Return ptr to the fs object */
4395:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* If free_clst is valid, return it without full cluster scan */
4396:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->free_clst <= fs->n_fatent - 2) {
4397:Middlewares/Third_Party/FatFs/src/ff.c **** 			*nclst = fs->free_clst;
4398:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
4399:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Get number of free clusters */
4400:Middlewares/Third_Party/FatFs/src/ff.c **** 			nfree = 0;
4401:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->fs_type == FS_FAT12) {	/* FAT12: Sector unalighed FAT entries */
4402:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = 2; obj.fs = fs;
4403:Middlewares/Third_Party/FatFs/src/ff.c **** 				do {
4404:Middlewares/Third_Party/FatFs/src/ff.c **** 					stat = get_fat(&obj, clst);
4405:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (stat == 0xFFFFFFFF) { res = FR_DISK_ERR; break; }
4406:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (stat == 1) { res = FR_INT_ERR; break; }
4407:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (stat == 0) nfree++;
4408:Middlewares/Third_Party/FatFs/src/ff.c **** 				} while (++clst < fs->n_fatent);
4409:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
4410:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
4411:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fs->fs_type == FS_EXFAT) {	/* exFAT: Scan bitmap table */
4412:Middlewares/Third_Party/FatFs/src/ff.c **** 					BYTE bm;
4413:Middlewares/Third_Party/FatFs/src/ff.c **** 					UINT b;
4414:Middlewares/Third_Party/FatFs/src/ff.c **** 
4415:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = fs->n_fatent - 2;
4416:Middlewares/Third_Party/FatFs/src/ff.c **** 					sect = fs->database;
4417:Middlewares/Third_Party/FatFs/src/ff.c **** 					i = 0;
4418:Middlewares/Third_Party/FatFs/src/ff.c **** 					do {
4419:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (i == 0 && (res = move_window(fs, sect++)) != FR_OK) break;
4420:Middlewares/Third_Party/FatFs/src/ff.c **** 						for (b = 8, bm = fs->win[i]; b && clst; b--, clst--) {
4421:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (!(bm & 1)) nfree++;
4422:Middlewares/Third_Party/FatFs/src/ff.c **** 							bm >>= 1;
4423:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
4424:Middlewares/Third_Party/FatFs/src/ff.c **** 						i = (i + 1) % SS(fs);
4425:Middlewares/Third_Party/FatFs/src/ff.c **** 					} while (clst);
4426:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else
4427:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4428:Middlewares/Third_Party/FatFs/src/ff.c **** 				{	/* FAT16/32: Sector alighed FAT entries */
4429:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = fs->n_fatent; sect = fs->fatbase;
4430:Middlewares/Third_Party/FatFs/src/ff.c **** 					i = 0; p = 0;
4431:Middlewares/Third_Party/FatFs/src/ff.c **** 					do {
4432:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (i == 0) {
4433:Middlewares/Third_Party/FatFs/src/ff.c **** 							res = move_window(fs, sect++);
4434:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (res != FR_OK) break;
4435:Middlewares/Third_Party/FatFs/src/ff.c **** 							p = fs->win;
4436:Middlewares/Third_Party/FatFs/src/ff.c **** 							i = SS(fs);
4437:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
4438:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (fs->fs_type == FS_FAT16) {
4439:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (ld_word(p) == 0) nfree++;
4440:Middlewares/Third_Party/FatFs/src/ff.c **** 							p += 2; i -= 2;
4441:Middlewares/Third_Party/FatFs/src/ff.c **** 						} else {
4442:Middlewares/Third_Party/FatFs/src/ff.c **** 							if ((ld_dword(p) & 0x0FFFFFFF) == 0) nfree++;
4443:Middlewares/Third_Party/FatFs/src/ff.c **** 							p += 4; i -= 4;
4444:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
4445:Middlewares/Third_Party/FatFs/src/ff.c **** 					} while (--clst);
4446:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4447:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 107


4448:Middlewares/Third_Party/FatFs/src/ff.c **** 			*nclst = nfree;			/* Return the free clusters */
4449:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->free_clst = nfree;	/* Now free_clst is valid */
4450:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->fsi_flag |= 1;		/* FSInfo is to be updated */
4451:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4452:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4453:Middlewares/Third_Party/FatFs/src/ff.c **** 
4454:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
4455:Middlewares/Third_Party/FatFs/src/ff.c **** }
4456:Middlewares/Third_Party/FatFs/src/ff.c **** 
4457:Middlewares/Third_Party/FatFs/src/ff.c **** 
4458:Middlewares/Third_Party/FatFs/src/ff.c **** 
4459:Middlewares/Third_Party/FatFs/src/ff.c **** 
4460:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4461:Middlewares/Third_Party/FatFs/src/ff.c **** /* Truncate File                                                         */
4462:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4463:Middlewares/Third_Party/FatFs/src/ff.c **** 
4464:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_truncate (
4465:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp		/* Pointer to the file object */
4466:Middlewares/Third_Party/FatFs/src/ff.c **** )
4467:Middlewares/Third_Party/FatFs/src/ff.c **** {
4468:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
4469:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
4470:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD ncl;
4471:Middlewares/Third_Party/FatFs/src/ff.c **** 
4472:Middlewares/Third_Party/FatFs/src/ff.c **** 
4473:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(&fp->obj, &fs);	/* Check validity of the file object */
4474:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);
4475:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
4476:Middlewares/Third_Party/FatFs/src/ff.c **** 
4477:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fp->fptr < fp->obj.objsize) {	/* Process when fptr is not on the eof */
4478:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr == 0) {	/* When set file size to zero, remove entire cluster chain */
4479:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = remove_chain(&fp->obj, fp->obj.sclust, 0);
4480:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->obj.sclust = 0;
4481:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {				/* When truncate a part of the file, remove remaining clusters */
4482:Middlewares/Third_Party/FatFs/src/ff.c **** 			ncl = get_fat(&fp->obj, fp->clust);
4483:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_OK;
4484:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ncl == 0xFFFFFFFF) res = FR_DISK_ERR;
4485:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ncl == 1) res = FR_INT_ERR;
4486:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK && ncl < fs->n_fatent) {
4487:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = remove_chain(&fp->obj, ncl, fp->clust);
4488:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4489:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4490:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->obj.objsize = fp->fptr;	/* Set file size to current R/W point */
4491:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->flag |= FA_MODIFIED;
4492:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
4493:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK && (fp->flag & FA_DIRTY)) {
4494:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) {
4495:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_DISK_ERR;
4496:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
4497:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
4498:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4499:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4500:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4501:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) ABORT(fs, res);
4502:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4503:Middlewares/Third_Party/FatFs/src/ff.c **** 
4504:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 108


4505:Middlewares/Third_Party/FatFs/src/ff.c **** }
4506:Middlewares/Third_Party/FatFs/src/ff.c **** 
4507:Middlewares/Third_Party/FatFs/src/ff.c **** 
4508:Middlewares/Third_Party/FatFs/src/ff.c **** 
4509:Middlewares/Third_Party/FatFs/src/ff.c **** 
4510:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4511:Middlewares/Third_Party/FatFs/src/ff.c **** /* Delete a File/Directory                                               */
4512:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4513:Middlewares/Third_Party/FatFs/src/ff.c **** 
4514:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_unlink (
4515:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path		/* Pointer to the file or directory path */
4516:Middlewares/Third_Party/FatFs/src/ff.c **** )
4517:Middlewares/Third_Party/FatFs/src/ff.c **** {
4518:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
4519:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj, sdj;
4520:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD dclst = 0;
4521:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
4522:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
4523:Middlewares/Third_Party/FatFs/src/ff.c **** 	_FDID obj;
4524:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4525:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEF_NAMBUF
4526:Middlewares/Third_Party/FatFs/src/ff.c **** 
4527:Middlewares/Third_Party/FatFs/src/ff.c **** 
4528:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive */
4529:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path, &fs, FA_WRITE);
4530:Middlewares/Third_Party/FatFs/src/ff.c **** 	dj.obj.fs = fs;
4531:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
4532:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
4533:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);		/* Follow the file path */
4534:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_RPATH && res == FR_OK && (dj.fn[NSFLAG] & NS_DOT)) {
4535:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_INVALID_NAME;			/* Cannot remove dot entry */
4536:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4537:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
4538:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) res = chk_lock(&dj, 2);	/* Check if it is an open object */
4539:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4540:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {					/* The object is accessible */
4541:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {
4542:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;		/* Cannot remove the origin directory */
4543:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
4544:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dj.obj.attr & AM_RDO) {
4545:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_DENIED;		/* Cannot remove R/O object */
4546:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4547:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4548:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {
4549:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
4550:Middlewares/Third_Party/FatFs/src/ff.c **** 				obj.fs = fs;
4551:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fs->fs_type == FS_EXFAT) {
4552:Middlewares/Third_Party/FatFs/src/ff.c **** 					obj.sclust = dclst = ld_dword(fs->dirbuf + XDIR_FstClus);
4553:Middlewares/Third_Party/FatFs/src/ff.c **** 					obj.objsize = ld_qword(fs->dirbuf + XDIR_FileSize);
4554:Middlewares/Third_Party/FatFs/src/ff.c **** 					obj.stat = fs->dirbuf[XDIR_GenFlags] & 2;
4555:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else
4556:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4557:Middlewares/Third_Party/FatFs/src/ff.c **** 				{
4558:Middlewares/Third_Party/FatFs/src/ff.c **** 					dclst = ld_clust(fs, dj.dir);
4559:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4560:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dj.obj.attr & AM_DIR) {			/* Is it a sub-directory? */
4561:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH != 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 109


4562:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (dclst == fs->cdir) {		 		/* Is it the current directory? */
4563:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = FR_DENIED;
4564:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else
4565:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4566:Middlewares/Third_Party/FatFs/src/ff.c **** 					{
4567:Middlewares/Third_Party/FatFs/src/ff.c **** 						sdj.obj.fs = fs;						/* Open the sub-directory */
4568:Middlewares/Third_Party/FatFs/src/ff.c **** 						sdj.obj.sclust = dclst;
4569:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
4570:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (fs->fs_type == FS_EXFAT) {
4571:Middlewares/Third_Party/FatFs/src/ff.c **** 							sdj.obj.objsize = obj.objsize;
4572:Middlewares/Third_Party/FatFs/src/ff.c **** 							sdj.obj.stat = obj.stat;
4573:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
4574:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4575:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = dir_sdi(&sdj, 0);
4576:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (res == FR_OK) {
4577:Middlewares/Third_Party/FatFs/src/ff.c **** 							res = dir_read(&sdj, 0);			/* Read an item */
4578:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (res == FR_OK) res = FR_DENIED;	/* Not empty? */
4579:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (res == FR_NO_FILE) res = FR_OK;	/* Empty? */
4580:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
4581:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
4582:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4583:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4584:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {
4585:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_remove(&dj);			/* Remove the directory entry */
4586:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK && dclst) {	/* Remove the cluster chain if exist */
4587:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
4588:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = remove_chain(&obj, dclst, 0);
4589:Middlewares/Third_Party/FatFs/src/ff.c **** #else
4590:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = remove_chain(&dj.obj, dclst, 0);
4591:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4592:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4593:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) res = sync_fs(fs);
4594:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4595:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4596:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_NAMBUF();
4597:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4598:Middlewares/Third_Party/FatFs/src/ff.c **** 
4599:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
4600:Middlewares/Third_Party/FatFs/src/ff.c **** }
4601:Middlewares/Third_Party/FatFs/src/ff.c **** 
4602:Middlewares/Third_Party/FatFs/src/ff.c **** 
4603:Middlewares/Third_Party/FatFs/src/ff.c **** 
4604:Middlewares/Third_Party/FatFs/src/ff.c **** 
4605:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4606:Middlewares/Third_Party/FatFs/src/ff.c **** /* Create a Directory                                                    */
4607:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4608:Middlewares/Third_Party/FatFs/src/ff.c **** 
4609:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_mkdir (
4610:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path		/* Pointer to the directory path */
4611:Middlewares/Third_Party/FatFs/src/ff.c **** )
4612:Middlewares/Third_Party/FatFs/src/ff.c **** {
4613:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
4614:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
4615:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
4616:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *dir;
4617:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT n;
4618:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD dsc, dcl, pcl, tm;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 110


4619:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEF_NAMBUF
4620:Middlewares/Third_Party/FatFs/src/ff.c **** 
4621:Middlewares/Third_Party/FatFs/src/ff.c **** 
4622:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive */
4623:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path, &fs, FA_WRITE);
4624:Middlewares/Third_Party/FatFs/src/ff.c **** 	dj.obj.fs = fs;
4625:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
4626:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
4627:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);			/* Follow the file path */
4628:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) res = FR_EXIST;		/* Any object with same name is already existing */
4629:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_RPATH && res == FR_NO_FILE && (dj.fn[NSFLAG] & NS_DOT)) {
4630:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_INVALID_NAME;
4631:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4632:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_NO_FILE) {				/* Can create a new directory */
4633:Middlewares/Third_Party/FatFs/src/ff.c **** 			dcl = create_chain(&dj.obj, 0);		/* Allocate a cluster for the new directory table */
4634:Middlewares/Third_Party/FatFs/src/ff.c **** 			dj.obj.objsize = (DWORD)fs->csize * SS(fs);
4635:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_OK;
4636:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dcl == 0) res = FR_DENIED;		/* No space to allocate a new cluster */
4637:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dcl == 1) res = FR_INT_ERR;
4638:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dcl == 0xFFFFFFFF) res = FR_DISK_ERR;
4639:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) res = sync_window(fs);	/* Flush FAT */
4640:Middlewares/Third_Party/FatFs/src/ff.c **** 			tm = GET_FATTIME();
4641:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {					/* Initialize the new directory table */
4642:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc = clust2sect(fs, dcl);
4643:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir = fs->win;
4644:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_set(dir, 0, SS(fs));
4645:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!_FS_EXFAT || fs->fs_type != FS_EXFAT) {
4646:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_set(dir + DIR_Name, ' ', 11);	/* Create "." entry */
4647:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir[DIR_Name] = '.';
4648:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir[DIR_Attr] = AM_DIR;
4649:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dir + DIR_ModTime, tm);
4650:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fs, dir, dcl);
4651:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(dir + SZDIRE, dir, SZDIRE); 	/* Create ".." entry */
4652:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir[SZDIRE + 1] = '.'; pcl = dj.obj.sclust;
4653:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (fs->fs_type == FS_FAT32 && pcl == fs->dirbase) pcl = 0;
4654:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fs, dir + SZDIRE, pcl);
4655:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4656:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (n = fs->csize; n; n--) {	/* Write dot entries and clear following sectors */
4657:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->winsect = dsc++;
4658:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->wflag = 1;
4659:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = sync_window(fs);
4660:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res != FR_OK) break;
4661:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_set(dir, 0, SS(fs));
4662:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4663:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4664:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {
4665:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_register(&dj);	/* Register the object to the directoy */
4666:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4667:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {
4668:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
4669:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fs->fs_type == FS_EXFAT) {	/* Initialize directory entry block */
4670:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(fs->dirbuf + XDIR_ModTime, tm);	/* Created time */
4671:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(fs->dirbuf + XDIR_FstClus, dcl);	/* Table start cluster */
4672:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(fs->dirbuf + XDIR_FileSize, (DWORD)dj.obj.objsize);	/* File size needs to be valid */
4673:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(fs->dirbuf + XDIR_ValidFileSize, (DWORD)dj.obj.objsize);
4674:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->dirbuf[XDIR_GenFlags] = 3;				/* Initialize the object flag (contiguous) */
4675:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->dirbuf[XDIR_Attr] = AM_DIR;				/* Attribute */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 111


4676:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = store_xdir(&dj);
4677:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else
4678:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4679:Middlewares/Third_Party/FatFs/src/ff.c **** 				{
4680:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir = dj.dir;
4681:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dir + DIR_ModTime, tm);	/* Created time */
4682:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fs, dir, dcl);				/* Table start cluster */
4683:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir[DIR_Attr] = AM_DIR;				/* Attribute */
4684:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->wflag = 1;
4685:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4686:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) {
4687:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = sync_fs(fs);
4688:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4689:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
4690:Middlewares/Third_Party/FatFs/src/ff.c **** 				remove_chain(&dj.obj, dcl, 0);		/* Could not register, remove cluster chain */
4691:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4692:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4693:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_NAMBUF();
4694:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4695:Middlewares/Third_Party/FatFs/src/ff.c **** 
4696:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
4697:Middlewares/Third_Party/FatFs/src/ff.c **** }
4698:Middlewares/Third_Party/FatFs/src/ff.c **** 
4699:Middlewares/Third_Party/FatFs/src/ff.c **** 
4700:Middlewares/Third_Party/FatFs/src/ff.c **** 
4701:Middlewares/Third_Party/FatFs/src/ff.c **** 
4702:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4703:Middlewares/Third_Party/FatFs/src/ff.c **** /* Rename a File/Directory                                               */
4704:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4705:Middlewares/Third_Party/FatFs/src/ff.c **** 
4706:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_rename (
4707:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path_old,	/* Pointer to the object name to be renamed */
4708:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path_new	/* Pointer to the new name */
4709:Middlewares/Third_Party/FatFs/src/ff.c **** )
4710:Middlewares/Third_Party/FatFs/src/ff.c **** {
4711:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
4712:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR djo, djn;
4713:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
4714:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE buf[_FS_EXFAT ? SZDIRE * 2 : 24], *dir;
4715:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD dw;
4716:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEF_NAMBUF
4717:Middlewares/Third_Party/FatFs/src/ff.c **** 
4718:Middlewares/Third_Party/FatFs/src/ff.c **** 
4719:Middlewares/Third_Party/FatFs/src/ff.c **** 	get_ldnumber(&path_new);						/* Snip drive number of new name off */
4720:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path_old, &fs, FA_WRITE);	/* Get logical drive of the old object */
4721:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
4722:Middlewares/Third_Party/FatFs/src/ff.c **** 		djo.obj.fs = fs;
4723:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
4724:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&djo, path_old);		/* Check old object */
4725:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK && (djo.fn[NSFLAG] & (NS_DOT | NS_NONAME))) res = FR_INVALID_NAME;	/* Check vali
4726:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
4727:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
4728:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = chk_lock(&djo, 2);
4729:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4730:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4731:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {						/* Object to be renamed is found */
4732:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 112


4733:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->fs_type == FS_EXFAT) {	/* At exFAT */
4734:Middlewares/Third_Party/FatFs/src/ff.c **** 				BYTE nf, nn;
4735:Middlewares/Third_Party/FatFs/src/ff.c **** 				WORD nh;
4736:Middlewares/Third_Party/FatFs/src/ff.c **** 
4737:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_cpy(buf, fs->dirbuf, SZDIRE * 2);	/* Save 85+C0 entry of old object */
4738:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_cpy(&djn, &djo, sizeof djo);
4739:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = follow_path(&djn, path_new);		/* Make sure if new object name is not in use */
4740:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) {						/* Is new name already in use by any other object? */
4741:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = (djn.obj.sclust == djo.obj.sclust && djn.dptr == djo.dptr) ? FR_NO_FILE : FR_EXIST;
4742:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4743:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE) { 				/* It is a valid path and no name collision */
4744:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = dir_register(&djn);			/* Register the new entry */
4745:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res == FR_OK) {
4746:Middlewares/Third_Party/FatFs/src/ff.c **** 						nf = fs->dirbuf[XDIR_NumSec]; nn = fs->dirbuf[XDIR_NumName];
4747:Middlewares/Third_Party/FatFs/src/ff.c **** 						nh = ld_word(fs->dirbuf + XDIR_NameHash);
4748:Middlewares/Third_Party/FatFs/src/ff.c **** 						mem_cpy(fs->dirbuf, buf, SZDIRE * 2);
4749:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->dirbuf[XDIR_NumSec] = nf; fs->dirbuf[XDIR_NumName] = nn;
4750:Middlewares/Third_Party/FatFs/src/ff.c **** 						st_word(fs->dirbuf + XDIR_NameHash, nh);
4751:Middlewares/Third_Party/FatFs/src/ff.c **** /* Start of critical section where an interruption can cause a cross-link */
4752:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = store_xdir(&djn);
4753:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
4754:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4755:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else
4756:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4757:Middlewares/Third_Party/FatFs/src/ff.c **** 			{	/* At FAT12/FAT16/FAT32 */
4758:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_cpy(buf, djo.dir + DIR_Attr, 21);	/* Save information about the object except name */
4759:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_cpy(&djn, &djo, sizeof (DIR));		/* Duplicate the directory object */
4760:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = follow_path(&djn, path_new);		/* Make sure if new object name is not in use */
4761:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) {						/* Is new name already in use by any other object? */
4762:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = (djn.obj.sclust == djo.obj.sclust && djn.dptr == djo.dptr) ? FR_NO_FILE : FR_EXIST;
4763:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4764:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE) { 				/* It is a valid path and no name collision */
4765:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = dir_register(&djn);			/* Register the new entry */
4766:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res == FR_OK) {
4767:Middlewares/Third_Party/FatFs/src/ff.c **** 						dir = djn.dir;					/* Copy information about object except name */
4768:Middlewares/Third_Party/FatFs/src/ff.c **** 						mem_cpy(dir + 13, buf + 2, 19);
4769:Middlewares/Third_Party/FatFs/src/ff.c **** 						dir[DIR_Attr] = buf[0] | AM_ARC;
4770:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->wflag = 1;
4771:Middlewares/Third_Party/FatFs/src/ff.c **** 						if ((dir[DIR_Attr] & AM_DIR) && djo.obj.sclust != djn.obj.sclust) {	/* Update .. entry in the
4772:Middlewares/Third_Party/FatFs/src/ff.c **** 							dw = clust2sect(fs, ld_clust(fs, dir));
4773:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (!dw) {
4774:Middlewares/Third_Party/FatFs/src/ff.c **** 								res = FR_INT_ERR;
4775:Middlewares/Third_Party/FatFs/src/ff.c **** 							} else {
4776:Middlewares/Third_Party/FatFs/src/ff.c **** /* Start of critical section where an interruption can cause a cross-link */
4777:Middlewares/Third_Party/FatFs/src/ff.c **** 								res = move_window(fs, dw);
4778:Middlewares/Third_Party/FatFs/src/ff.c **** 								dir = fs->win + SZDIRE * 1;	/* Ptr to .. entry */
4779:Middlewares/Third_Party/FatFs/src/ff.c **** 								if (res == FR_OK && dir[1] == '.') {
4780:Middlewares/Third_Party/FatFs/src/ff.c **** 									st_clust(fs, dir, djn.obj.sclust);
4781:Middlewares/Third_Party/FatFs/src/ff.c **** 									fs->wflag = 1;
4782:Middlewares/Third_Party/FatFs/src/ff.c **** 								}
4783:Middlewares/Third_Party/FatFs/src/ff.c **** 							}
4784:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
4785:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
4786:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4787:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4788:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {
4789:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_remove(&djo);		/* Remove old entry */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 113


4790:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) {
4791:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = sync_fs(fs);
4792:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4793:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4794:Middlewares/Third_Party/FatFs/src/ff.c **** /* End of the critical section */
4795:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4796:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_NAMBUF();
4797:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4798:Middlewares/Third_Party/FatFs/src/ff.c **** 
4799:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
4800:Middlewares/Third_Party/FatFs/src/ff.c **** }
4801:Middlewares/Third_Party/FatFs/src/ff.c **** 
4802:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
4803:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _FS_MINIMIZE == 0 */
4804:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _FS_MINIMIZE <= 1 */
4805:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _FS_MINIMIZE <= 2 */
4806:Middlewares/Third_Party/FatFs/src/ff.c **** 
4807:Middlewares/Third_Party/FatFs/src/ff.c **** 
4808:Middlewares/Third_Party/FatFs/src/ff.c **** 
4809:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_CHMOD && !_FS_READONLY
4810:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4811:Middlewares/Third_Party/FatFs/src/ff.c **** /* Change Attribute                                                      */
4812:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4813:Middlewares/Third_Party/FatFs/src/ff.c **** 
4814:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_chmod (
4815:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path,	/* Pointer to the file path */
4816:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE attr,			/* Attribute bits */
4817:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE mask			/* Attribute mask to change */
4818:Middlewares/Third_Party/FatFs/src/ff.c **** )
4819:Middlewares/Third_Party/FatFs/src/ff.c **** {
4820:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
4821:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
4822:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
4823:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEF_NAMBUF
4824:Middlewares/Third_Party/FatFs/src/ff.c **** 
4825:Middlewares/Third_Party/FatFs/src/ff.c **** 
4826:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path, &fs, FA_WRITE);	/* Get logical drive */
4827:Middlewares/Third_Party/FatFs/src/ff.c **** 	dj.obj.fs = fs;
4828:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
4829:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
4830:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
4831:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK && (dj.fn[NSFLAG] & (NS_DOT | NS_NONAME))) res = FR_INVALID_NAME;	/* Check objec
4832:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
4833:Middlewares/Third_Party/FatFs/src/ff.c **** 			mask &= AM_RDO|AM_HID|AM_SYS|AM_ARC;	/* Valid attribute mask */
4834:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
4835:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->fs_type == FS_EXFAT) {
4836:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->dirbuf[XDIR_Attr] = (attr & mask) | (fs->dirbuf[XDIR_Attr] & (BYTE)~mask);	/* Apply attribu
4837:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = store_xdir(&dj);
4838:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else
4839:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4840:Middlewares/Third_Party/FatFs/src/ff.c **** 			{
4841:Middlewares/Third_Party/FatFs/src/ff.c **** 				dj.dir[DIR_Attr] = (attr & mask) | (dj.dir[DIR_Attr] & (BYTE)~mask);	/* Apply attribute change 
4842:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->wflag = 1;
4843:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4844:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {
4845:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = sync_fs(fs);
4846:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 114


4847:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4848:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_NAMBUF();
4849:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4850:Middlewares/Third_Party/FatFs/src/ff.c **** 
4851:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
4852:Middlewares/Third_Party/FatFs/src/ff.c **** }
4853:Middlewares/Third_Party/FatFs/src/ff.c **** 
4854:Middlewares/Third_Party/FatFs/src/ff.c **** 
4855:Middlewares/Third_Party/FatFs/src/ff.c **** 
4856:Middlewares/Third_Party/FatFs/src/ff.c **** 
4857:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4858:Middlewares/Third_Party/FatFs/src/ff.c **** /* Change Timestamp                                                      */
4859:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4860:Middlewares/Third_Party/FatFs/src/ff.c **** 
4861:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_utime (
4862:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path,	/* Pointer to the file/directory name */
4863:Middlewares/Third_Party/FatFs/src/ff.c **** 	const FILINFO* fno	/* Pointer to the time stamp to be set */
4864:Middlewares/Third_Party/FatFs/src/ff.c **** )
4865:Middlewares/Third_Party/FatFs/src/ff.c **** {
4866:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
4867:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
4868:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
4869:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEF_NAMBUF
4870:Middlewares/Third_Party/FatFs/src/ff.c **** 
4871:Middlewares/Third_Party/FatFs/src/ff.c **** 
4872:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path, &fs, FA_WRITE);	/* Get logical drive */
4873:Middlewares/Third_Party/FatFs/src/ff.c **** 	dj.obj.fs = fs;
4874:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
4875:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
4876:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
4877:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK && (dj.fn[NSFLAG] & (NS_DOT | NS_NONAME))) res = FR_INVALID_NAME;	/* Check objec
4878:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
4879:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
4880:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->fs_type == FS_EXFAT) {
4881:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_dword(fs->dirbuf + XDIR_ModTime, (DWORD)fno->fdate << 16 | fno->ftime);
4882:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = store_xdir(&dj);
4883:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else
4884:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4885:Middlewares/Third_Party/FatFs/src/ff.c **** 			{
4886:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_dword(dj.dir + DIR_ModTime, (DWORD)fno->fdate << 16 | fno->ftime);
4887:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->wflag = 1;
4888:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4889:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {
4890:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = sync_fs(fs);
4891:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4892:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4893:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_NAMBUF();
4894:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4895:Middlewares/Third_Party/FatFs/src/ff.c **** 
4896:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
4897:Middlewares/Third_Party/FatFs/src/ff.c **** }
4898:Middlewares/Third_Party/FatFs/src/ff.c **** 
4899:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* _USE_CHMOD && !_FS_READONLY */
4900:Middlewares/Third_Party/FatFs/src/ff.c **** 
4901:Middlewares/Third_Party/FatFs/src/ff.c **** 
4902:Middlewares/Third_Party/FatFs/src/ff.c **** 
4903:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LABEL
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 115


4904:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4905:Middlewares/Third_Party/FatFs/src/ff.c **** /* Get Volume Label                                                      */
4906:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4907:Middlewares/Third_Party/FatFs/src/ff.c **** 
4908:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_getlabel (
4909:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path,	/* Path name of the logical drive number */
4910:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR* label,		/* Pointer to a buffer to return the volume label */
4911:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD* vsn			/* Pointer to a variable to return the volume serial number */
4912:Middlewares/Third_Party/FatFs/src/ff.c **** )
4913:Middlewares/Third_Party/FatFs/src/ff.c **** {
4914:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
4915:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
4916:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
4917:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT si, di;
4918:Middlewares/Third_Party/FatFs/src/ff.c **** #if _LFN_UNICODE || _FS_EXFAT
4919:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR w;
4920:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4921:Middlewares/Third_Party/FatFs/src/ff.c **** 
4922:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive */
4923:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path, &fs, 0);
4924:Middlewares/Third_Party/FatFs/src/ff.c **** 
4925:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get volume label */
4926:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK && label) {
4927:Middlewares/Third_Party/FatFs/src/ff.c **** 		dj.obj.fs = fs; dj.obj.sclust = 0;	/* Open root directory */
4928:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_sdi(&dj, 0);
4929:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
4930:Middlewares/Third_Party/FatFs/src/ff.c **** 		 	res = dir_read(&dj, 1);			/* Find a volume label entry */
4931:Middlewares/Third_Party/FatFs/src/ff.c **** 		 	if (res == FR_OK) {
4932:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
4933:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fs->fs_type == FS_EXFAT) {
4934:Middlewares/Third_Party/FatFs/src/ff.c **** 					for (si = di = 0; si < dj.dir[XDIR_NumLabel]; si++) {	/* Extract volume label from 83 entry */
4935:Middlewares/Third_Party/FatFs/src/ff.c **** 						w = ld_word(dj.dir + XDIR_Label + si * 2);
4936:Middlewares/Third_Party/FatFs/src/ff.c **** #if _LFN_UNICODE
4937:Middlewares/Third_Party/FatFs/src/ff.c **** 						label[di++] = w;
4938:Middlewares/Third_Party/FatFs/src/ff.c **** #else
4939:Middlewares/Third_Party/FatFs/src/ff.c **** 						w = ff_convert(w, 0);	/* Unicode -> OEM */
4940:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (w == 0) w = '?';	/* Replace wrong character */
4941:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (_DF1S && w >= 0x100) label[di++] = (char)(w >> 8);
4942:Middlewares/Third_Party/FatFs/src/ff.c **** 						label[di++] = (char)w;
4943:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4944:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
4945:Middlewares/Third_Party/FatFs/src/ff.c **** 					label[di] = 0;
4946:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else
4947:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4948:Middlewares/Third_Party/FatFs/src/ff.c **** 				{
4949:Middlewares/Third_Party/FatFs/src/ff.c **** 					si = di = 0;		/* Extract volume label from AM_VOL entry with code comversion */
4950:Middlewares/Third_Party/FatFs/src/ff.c **** 					do {
4951:Middlewares/Third_Party/FatFs/src/ff.c **** #if _LFN_UNICODE
4952:Middlewares/Third_Party/FatFs/src/ff.c **** 						w = (si < 11) ? dj.dir[si++] : ' ';
4953:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (IsDBCS1(w) && si < 11 && IsDBCS2(dj.dir[si])) {
4954:Middlewares/Third_Party/FatFs/src/ff.c **** 							w = w << 8 | dj.dir[si++];
4955:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
4956:Middlewares/Third_Party/FatFs/src/ff.c **** 						label[di++] = ff_convert(w, 1);	/* OEM -> Unicode */
4957:Middlewares/Third_Party/FatFs/src/ff.c **** #else
4958:Middlewares/Third_Party/FatFs/src/ff.c **** 						label[di++] = dj.dir[si++];
4959:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4960:Middlewares/Third_Party/FatFs/src/ff.c **** 					} while (di < 11);
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 116


4961:Middlewares/Third_Party/FatFs/src/ff.c **** 					do {				/* Truncate trailing spaces */
4962:Middlewares/Third_Party/FatFs/src/ff.c **** 						label[di] = 0;
4963:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (di == 0) break;
4964:Middlewares/Third_Party/FatFs/src/ff.c **** 					} while (label[--di] == ' ');
4965:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4966:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4967:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4968:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_NO_FILE) {	/* No label entry and return nul string */
4969:Middlewares/Third_Party/FatFs/src/ff.c **** 			label[0] = 0;
4970:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_OK;
4971:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4972:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4973:Middlewares/Third_Party/FatFs/src/ff.c **** 
4974:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get volume serial number */
4975:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK && vsn) {
4976:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(fs, fs->volbase);
4977:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
4978:Middlewares/Third_Party/FatFs/src/ff.c **** 			switch (fs->fs_type) {
4979:Middlewares/Third_Party/FatFs/src/ff.c **** 			case FS_EXFAT:
4980:Middlewares/Third_Party/FatFs/src/ff.c **** 				di = BPB_VolIDEx; break;
4981:Middlewares/Third_Party/FatFs/src/ff.c **** 
4982:Middlewares/Third_Party/FatFs/src/ff.c **** 			case FS_FAT32:
4983:Middlewares/Third_Party/FatFs/src/ff.c **** 				di = BS_VolID32; break;
4984:Middlewares/Third_Party/FatFs/src/ff.c **** 
4985:Middlewares/Third_Party/FatFs/src/ff.c **** 			default:
4986:Middlewares/Third_Party/FatFs/src/ff.c **** 				di = BS_VolID;
4987:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4988:Middlewares/Third_Party/FatFs/src/ff.c **** 			*vsn = ld_dword(fs->win + di);
4989:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4990:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4991:Middlewares/Third_Party/FatFs/src/ff.c **** 
4992:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
4993:Middlewares/Third_Party/FatFs/src/ff.c **** }
4994:Middlewares/Third_Party/FatFs/src/ff.c **** 
4995:Middlewares/Third_Party/FatFs/src/ff.c **** 
4996:Middlewares/Third_Party/FatFs/src/ff.c **** 
4997:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
4998:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4999:Middlewares/Third_Party/FatFs/src/ff.c **** /* Set Volume Label                                                      */
5000:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
5001:Middlewares/Third_Party/FatFs/src/ff.c **** 
5002:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_setlabel (
5003:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* label	/* Pointer to the volume label to set */
5004:Middlewares/Third_Party/FatFs/src/ff.c **** )
5005:Middlewares/Third_Party/FatFs/src/ff.c **** {
5006:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
5007:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
5008:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
5009:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE dirvn[22];
5010:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, j, slen;
5011:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR w;
5012:Middlewares/Third_Party/FatFs/src/ff.c **** 	static const char badchr[] = "\"*+,.:;<=>\?[]|\x7F";
5013:Middlewares/Third_Party/FatFs/src/ff.c **** 
5014:Middlewares/Third_Party/FatFs/src/ff.c **** 
5015:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive */
5016:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&label, &fs, FA_WRITE);
5017:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) LEAVE_FF(fs, res);
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 117


5018:Middlewares/Third_Party/FatFs/src/ff.c **** 	dj.obj.fs = fs;
5019:Middlewares/Third_Party/FatFs/src/ff.c **** 
5020:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get length of given volume label */
5021:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (slen = 0; (UINT)label[slen] >= ' '; slen++) ;	/* Get name length */
5022:Middlewares/Third_Party/FatFs/src/ff.c **** 
5023:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
5024:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_EXFAT) {	/* On the exFAT volume */
5025:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = j = 0; i < slen; ) {	/* Create volume label in directory form */
5026:Middlewares/Third_Party/FatFs/src/ff.c **** 			w = label[i++];
5027:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_LFN_UNICODE
5028:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (IsDBCS1(w)) {
5029:Middlewares/Third_Party/FatFs/src/ff.c **** 				w = (i < slen && IsDBCS2(label[i])) ? w << 8 | (BYTE)label[i++] : 0;
5030:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5031:Middlewares/Third_Party/FatFs/src/ff.c **** 			w = ff_convert(w, 1);
5032:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5033:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (w == 0 || chk_chr(badchr, w) || j == 22) {	/* Check validity check validity of the volume la
5034:Middlewares/Third_Party/FatFs/src/ff.c **** 				LEAVE_FF(fs, FR_INVALID_NAME);
5035:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5036:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(dirvn + j, w); j += 2;
5037:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5038:Middlewares/Third_Party/FatFs/src/ff.c **** 		slen = j;
5039:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else
5040:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5041:Middlewares/Third_Party/FatFs/src/ff.c **** 	{	/* On the FAT12/16/32 volume */
5042:Middlewares/Third_Party/FatFs/src/ff.c **** 		for ( ; slen && label[slen - 1] == ' '; slen--) ;	/* Remove trailing spaces */
5043:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (slen) {		/* Is there a volume label to be set? */
5044:Middlewares/Third_Party/FatFs/src/ff.c **** 			dirvn[0] = 0; i = j = 0;	/* Create volume label in directory form */
5045:Middlewares/Third_Party/FatFs/src/ff.c **** 			do {
5046:Middlewares/Third_Party/FatFs/src/ff.c **** #if _LFN_UNICODE
5047:Middlewares/Third_Party/FatFs/src/ff.c **** 				w = ff_convert(ff_wtoupper(label[i++]), 0);
5048:Middlewares/Third_Party/FatFs/src/ff.c **** #else
5049:Middlewares/Third_Party/FatFs/src/ff.c **** 				w = (BYTE)label[i++];
5050:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (IsDBCS1(w)) {
5051:Middlewares/Third_Party/FatFs/src/ff.c **** 					w = (j < 10 && i < slen && IsDBCS2(label[i])) ? w << 8 | (BYTE)label[i++] : 0;
5052:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
5053:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0
5054:Middlewares/Third_Party/FatFs/src/ff.c **** 				w = ff_convert(ff_wtoupper(ff_convert(w, 1)), 0);
5055:Middlewares/Third_Party/FatFs/src/ff.c **** #else
5056:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (IsLower(w)) w -= 0x20;			/* To upper ASCII characters */
5057:Middlewares/Third_Party/FatFs/src/ff.c **** #ifdef _EXCVT
5058:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (w >= 0x80) w = ExCvt[w - 0x80];	/* To upper extended characters (SBCS cfg) */
5059:Middlewares/Third_Party/FatFs/src/ff.c **** #else
5060:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!_DF1S && w >= 0x80) w = 0;		/* Reject extended characters (ASCII cfg) */
5061:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5062:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5063:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5064:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (w == 0 || chk_chr(badchr, w) || j >= (UINT)((w >= 0x100) ? 10 : 11)) {	/* Reject invalid ch
5065:Middlewares/Third_Party/FatFs/src/ff.c **** 					LEAVE_FF(fs, FR_INVALID_NAME);
5066:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
5067:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (w >= 0x100) dirvn[j++] = (BYTE)(w >> 8);
5068:Middlewares/Third_Party/FatFs/src/ff.c **** 				dirvn[j++] = (BYTE)w;
5069:Middlewares/Third_Party/FatFs/src/ff.c **** 			} while (i < slen);
5070:Middlewares/Third_Party/FatFs/src/ff.c **** 			while (j < 11) dirvn[j++] = ' ';	/* Fill remaining name field */
5071:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dirvn[0] == DDEM) LEAVE_FF(fs, FR_INVALID_NAME);	/* Reject illegal name (heading DDEM) */
5072:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5073:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
5074:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 118


5075:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Set volume label */
5076:Middlewares/Third_Party/FatFs/src/ff.c **** 	dj.obj.sclust = 0;		/* Open root directory */
5077:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = dir_sdi(&dj, 0);
5078:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
5079:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_read(&dj, 1);	/* Get volume label entry */
5080:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
5081:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (_FS_EXFAT && fs->fs_type == FS_EXFAT) {
5082:Middlewares/Third_Party/FatFs/src/ff.c **** 				dj.dir[XDIR_NumLabel] = (BYTE)(slen / 2);	/* Change the volume label */
5083:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_cpy(dj.dir + XDIR_Label, dirvn, slen);
5084:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
5085:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (slen) {
5086:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(dj.dir, dirvn, 11);	/* Change the volume label */
5087:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
5088:Middlewares/Third_Party/FatFs/src/ff.c **** 					dj.dir[DIR_Name] = DDEM;	/* Remove the volume label */
5089:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
5090:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5091:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
5092:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = sync_fs(fs);
5093:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {			/* No volume label entry is found or error */
5094:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_NO_FILE) {
5095:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_OK;
5096:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (slen) {	/* Create a volume label entry */
5097:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = dir_alloc(&dj, 1);	/* Allocate an entry */
5098:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res == FR_OK) {
5099:Middlewares/Third_Party/FatFs/src/ff.c **** 						mem_set(dj.dir, 0, SZDIRE);	/* Clear the entry */
5100:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (_FS_EXFAT && fs->fs_type == FS_EXFAT) {
5101:Middlewares/Third_Party/FatFs/src/ff.c **** 							dj.dir[XDIR_Type] = 0x83;		/* Create 83 entry */
5102:Middlewares/Third_Party/FatFs/src/ff.c **** 							dj.dir[XDIR_NumLabel] = (BYTE)(slen / 2);
5103:Middlewares/Third_Party/FatFs/src/ff.c **** 							mem_cpy(dj.dir + XDIR_Label, dirvn, slen);
5104:Middlewares/Third_Party/FatFs/src/ff.c **** 						} else {
5105:Middlewares/Third_Party/FatFs/src/ff.c **** 							dj.dir[DIR_Attr] = AM_VOL;		/* Create volume label entry */
5106:Middlewares/Third_Party/FatFs/src/ff.c **** 							mem_cpy(dj.dir, dirvn, 11);
5107:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
5108:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->wflag = 1;
5109:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = sync_fs(fs);
5110:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
5111:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
5112:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5113:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5114:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
5115:Middlewares/Third_Party/FatFs/src/ff.c **** 
5116:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
5117:Middlewares/Third_Party/FatFs/src/ff.c **** }
5118:Middlewares/Third_Party/FatFs/src/ff.c **** 
5119:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
5120:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _USE_LABEL */
5121:Middlewares/Third_Party/FatFs/src/ff.c **** 
5122:Middlewares/Third_Party/FatFs/src/ff.c **** 
5123:Middlewares/Third_Party/FatFs/src/ff.c **** 
5124:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_EXPAND && !_FS_READONLY
5125:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
5126:Middlewares/Third_Party/FatFs/src/ff.c **** /* Allocate a Contiguous Blocks to the File                              */
5127:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
5128:Middlewares/Third_Party/FatFs/src/ff.c **** 
5129:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_expand (
5130:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp,		/* Pointer to the file object */
5131:Middlewares/Third_Party/FatFs/src/ff.c **** 	FSIZE_t fsz,	/* File size to be expanded to */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 119


5132:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE opt		/* Operation mode 0:Find and prepare or 1:Find and allocate */
5133:Middlewares/Third_Party/FatFs/src/ff.c **** )
5134:Middlewares/Third_Party/FatFs/src/ff.c **** {
5135:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
5136:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
5137:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD n, clst, stcl, scl, ncl, tcl, lclst;
5138:Middlewares/Third_Party/FatFs/src/ff.c **** 
5139:Middlewares/Third_Party/FatFs/src/ff.c **** 
5140:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(&fp->obj, &fs);		/* Check validity of the file object */
5141:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);
5142:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fsz == 0 || fp->obj.objsize != 0 || !(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);
5143:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
5144:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type != FS_EXFAT && fsz >= 0x100000000) LEAVE_FF(fs, FR_DENIED);	/* Check if in size li
5145:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5146:Middlewares/Third_Party/FatFs/src/ff.c **** 	n = (DWORD)fs->csize * SS(fs);	/* Cluster size */
5147:Middlewares/Third_Party/FatFs/src/ff.c **** 	tcl = (DWORD)(fsz / n) + ((fsz & (n - 1)) ? 1 : 0);	/* Number of clusters required */
5148:Middlewares/Third_Party/FatFs/src/ff.c **** 	stcl = fs->last_clst; lclst = 0;
5149:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stcl < 2 || stcl >= fs->n_fatent) stcl = 2;
5150:Middlewares/Third_Party/FatFs/src/ff.c **** 
5151:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
5152:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_EXFAT) {
5153:Middlewares/Third_Party/FatFs/src/ff.c **** 		scl = find_bitmap(fs, stcl, tcl);			/* Find a contiguous cluster block */
5154:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (scl == 0) res = FR_DENIED;				/* No contiguous cluster block was found */
5155:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (scl == 0xFFFFFFFF) res = FR_DISK_ERR;
5156:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {	/* A contiguous free area is found */
5157:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (opt) {		/* Allocate it now */
5158:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = change_bitmap(fs, scl, tcl, 1);	/* Mark the cluster block 'in use' */
5159:Middlewares/Third_Party/FatFs/src/ff.c **** 				lclst = scl + tcl - 1;
5160:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {		/* Set it as suggested point for next allocation */
5161:Middlewares/Third_Party/FatFs/src/ff.c **** 				lclst = scl - 1;
5162:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5163:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5164:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else
5165:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5166:Middlewares/Third_Party/FatFs/src/ff.c **** 	{
5167:Middlewares/Third_Party/FatFs/src/ff.c **** 		scl = clst = stcl; ncl = 0;
5168:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (;;) {	/* Find a contiguous cluster block */
5169:Middlewares/Third_Party/FatFs/src/ff.c **** 			n = get_fat(&fp->obj, clst);
5170:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (++clst >= fs->n_fatent) clst = 2;
5171:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (n == 1) { res = FR_INT_ERR; break; }
5172:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (n == 0xFFFFFFFF) { res = FR_DISK_ERR; break; }
5173:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (n == 0) {	/* Is it a free cluster? */
5174:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (++ncl == tcl) break;	/* Break if a contiguous cluster block is found */
5175:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
5176:Middlewares/Third_Party/FatFs/src/ff.c **** 				scl = clst; ncl = 0;		/* Not a free cluster */
5177:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5178:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (clst == stcl) { res = FR_DENIED; break; }	/* No contiguous cluster? */
5179:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5180:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {	/* A contiguous free area is found */
5181:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (opt) {		/* Allocate it now */
5182:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (clst = scl, n = tcl; n; clst++, n--) {	/* Create a cluster chain on the FAT */
5183:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = put_fat(fs, clst, (n == 1) ? 0xFFFFFFFF : clst + 1);
5184:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res != FR_OK) break;
5185:Middlewares/Third_Party/FatFs/src/ff.c **** 					lclst = clst;
5186:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
5187:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {		/* Set it as suggested point for next allocation */
5188:Middlewares/Third_Party/FatFs/src/ff.c **** 				lclst = scl - 1;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 120


5189:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5190:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5191:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
5192:Middlewares/Third_Party/FatFs/src/ff.c **** 
5193:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
5194:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->last_clst = lclst;		/* Set suggested start cluster to start next */
5195:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (opt) {	/* Is it allocated now? */
5196:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->obj.sclust = scl;		/* Update object allocation information */
5197:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->obj.objsize = fsz;
5198:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (_FS_EXFAT) fp->obj.stat = 2;	/* Set status 'contiguous chain' */
5199:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->flag |= FA_MODIFIED;
5200:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->free_clst <= fs->n_fatent - 2) {	/* Update FSINFO */
5201:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->free_clst -= tcl;
5202:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->fsi_flag |= 1;
5203:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5204:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5205:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
5206:Middlewares/Third_Party/FatFs/src/ff.c **** 
5207:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
5208:Middlewares/Third_Party/FatFs/src/ff.c **** }
5209:Middlewares/Third_Party/FatFs/src/ff.c **** 
5210:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _USE_EXPAND && !_FS_READONLY */
5211:Middlewares/Third_Party/FatFs/src/ff.c **** 
5212:Middlewares/Third_Party/FatFs/src/ff.c **** 
5213:Middlewares/Third_Party/FatFs/src/ff.c **** 
5214:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FORWARD
5215:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
5216:Middlewares/Third_Party/FatFs/src/ff.c **** /* Forward data to the stream directly                                   */
5217:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
5218:Middlewares/Third_Party/FatFs/src/ff.c **** 
5219:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_forward (
5220:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp, 						/* Pointer to the file object */
5221:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT (*func)(const BYTE*,UINT),	/* Pointer to the streaming function */
5222:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT btf,						/* Number of bytes to forward */
5223:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT* bf						/* Pointer to number of bytes forwarded */
5224:Middlewares/Third_Party/FatFs/src/ff.c **** )
5225:Middlewares/Third_Party/FatFs/src/ff.c **** {
5226:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
5227:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
5228:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst, sect;
5229:Middlewares/Third_Party/FatFs/src/ff.c **** 	FSIZE_t remain;
5230:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT rcnt, csect;
5231:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *dbuf;
5232:Middlewares/Third_Party/FatFs/src/ff.c **** 
5233:Middlewares/Third_Party/FatFs/src/ff.c **** 
5234:Middlewares/Third_Party/FatFs/src/ff.c **** 	*bf = 0;	/* Clear transfer byte counter */
5235:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(&fp->obj, &fs);		/* Check validity of the file object */
5236:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);
5237:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_READ)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
5238:Middlewares/Third_Party/FatFs/src/ff.c **** 
5239:Middlewares/Third_Party/FatFs/src/ff.c **** 	remain = fp->obj.objsize - fp->fptr;
5240:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (btf > remain) btf = (UINT)remain;			/* Truncate btf by remaining bytes */
5241:Middlewares/Third_Party/FatFs/src/ff.c **** 
5242:Middlewares/Third_Party/FatFs/src/ff.c **** 	for ( ;  btf && (*func)(0, 0);					/* Repeat until all data transferred or stream goes busy */
5243:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->fptr += rcnt, *bf += rcnt, btf -= rcnt) {
5244:Middlewares/Third_Party/FatFs/src/ff.c **** 		csect = (UINT)(fp->fptr / SS(fs) & (fs->csize - 1));	/* Sector offset in the cluster */
5245:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr % SS(fs) == 0) {				/* On the sector boundary? */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 121


5246:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (csect == 0) {						/* On the cluster boundary? */
5247:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = (fp->fptr == 0) ?			/* On the top of the file? */
5248:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->obj.sclust : get_fat(&fp->obj, fp->clust);
5249:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst <= 1) ABORT(fs, FR_INT_ERR);
5250:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
5251:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;					/* Update current cluster */
5252:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5253:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5254:Middlewares/Third_Party/FatFs/src/ff.c **** 		sect = clust2sect(fs, fp->clust);			/* Get current data sector */
5255:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!sect) ABORT(fs, FR_INT_ERR);
5256:Middlewares/Third_Party/FatFs/src/ff.c **** 		sect += csect;
5257:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
5258:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (move_window(fs, sect) != FR_OK) ABORT(fs, FR_DISK_ERR);	/* Move sector window to the file dat
5259:Middlewares/Third_Party/FatFs/src/ff.c **** 		dbuf = fs->win;
5260:Middlewares/Third_Party/FatFs/src/ff.c **** #else
5261:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->sect != sect) {		/* Fill sector cache with file data */
5262:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
5263:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fp->flag & FA_DIRTY) {		/* Write-back dirty sector cache */
5264:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
5265:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
5266:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5267:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5268:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_read(fs->drv, fp->buf, sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
5269:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5270:Middlewares/Third_Party/FatFs/src/ff.c **** 		dbuf = fp->buf;
5271:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5272:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->sect = sect;
5273:Middlewares/Third_Party/FatFs/src/ff.c **** 		rcnt = SS(fs) - (UINT)fp->fptr % SS(fs);	/* Number of bytes left in the sector */
5274:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rcnt > btf) rcnt = btf;					/* Clip it by btr if needed */
5275:Middlewares/Third_Party/FatFs/src/ff.c **** 		rcnt = (*func)(dbuf + ((UINT)fp->fptr % SS(fs)), rcnt);	/* Forward the file data */
5276:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!rcnt) ABORT(fs, FR_INT_ERR);
5277:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
5278:Middlewares/Third_Party/FatFs/src/ff.c **** 
5279:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, FR_OK);
5280:Middlewares/Third_Party/FatFs/src/ff.c **** }
5281:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _USE_FORWARD */
5282:Middlewares/Third_Party/FatFs/src/ff.c **** 
5283:Middlewares/Third_Party/FatFs/src/ff.c **** 
5284:Middlewares/Third_Party/FatFs/src/ff.c **** 
5285:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_MKFS && !_FS_READONLY
5286:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
5287:Middlewares/Third_Party/FatFs/src/ff.c **** /* Create an FAT/exFAT volume                                            */
5288:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
5289:Middlewares/Third_Party/FatFs/src/ff.c **** 
5290:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_mkfs (
5291:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path,	/* Logical drive number */
5292:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE opt,			/* Format option */
5293:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD au,			/* Size of allocation unit (cluster) [byte] */
5294:Middlewares/Third_Party/FatFs/src/ff.c **** 	void* work,			/* Pointer to working buffer */
5295:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT len			/* Size of working buffer */
5296:Middlewares/Third_Party/FatFs/src/ff.c **** )
5297:Middlewares/Third_Party/FatFs/src/ff.c **** {
5298:Middlewares/Third_Party/FatFs/src/ff.c **** 	const UINT n_fats = 1;		/* Number of FATs for FAT12/16/32 volume (1 or 2) */
5299:Middlewares/Third_Party/FatFs/src/ff.c **** 	const UINT n_rootdir = 512;	/* Number of root directory entries for FAT12/16 volume */
5300:Middlewares/Third_Party/FatFs/src/ff.c **** 	static const WORD cst[] = {1, 4, 16, 64, 256, 512, 0};	/* Cluster size boundary for FAT12/16 volum
5301:Middlewares/Third_Party/FatFs/src/ff.c **** 	static const WORD cst32[] = {1, 2, 4, 8, 16, 32, 0};	/* Cluster size boundary for FAT32 volume (12
5302:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE fmt, sys, *buf, *pte, pdrv, part;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 122


5303:Middlewares/Third_Party/FatFs/src/ff.c **** 	WORD ss;
5304:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD szb_buf, sz_buf, sz_blk, n_clst, pau, sect, nsect, n;
5305:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD b_vol, b_fat, b_data;				/* Base LBA for volume, fat, data */
5306:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD sz_vol, sz_rsv, sz_fat, sz_dir;	/* Size for volume, fat, dir, data */
5307:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
5308:Middlewares/Third_Party/FatFs/src/ff.c **** 	int vol;
5309:Middlewares/Third_Party/FatFs/src/ff.c **** 	DSTATUS stat;
5310:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_TRIM || _FS_EXFAT
5311:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD tbl[3];
5312:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5313:Middlewares/Third_Party/FatFs/src/ff.c **** 
5314:Middlewares/Third_Party/FatFs/src/ff.c **** 
5315:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Check mounted drive and clear work area */
5316:Middlewares/Third_Party/FatFs/src/ff.c **** 	vol = get_ldnumber(&path);					/* Get target logical drive */
5317:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
5318:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (FatFs[vol]) FatFs[vol]->fs_type = 0;	/* Clear the volume */
5319:Middlewares/Third_Party/FatFs/src/ff.c **** 	pdrv = LD2PD(vol);	/* Physical drive */
5320:Middlewares/Third_Party/FatFs/src/ff.c **** 	part = LD2PT(vol);	/* Partition (0:create as new, 1-4:get from partition table) */
5321:Middlewares/Third_Party/FatFs/src/ff.c **** 
5322:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Check physical drive status */
5323:Middlewares/Third_Party/FatFs/src/ff.c **** 	stat = disk_initialize(pdrv);
5324:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_NOINIT) return FR_NOT_READY;
5325:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_PROTECT) return FR_WRITE_PROTECTED;
5326:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (disk_ioctl(pdrv, GET_BLOCK_SIZE, &sz_blk) != RES_OK || !sz_blk || sz_blk > 32768 || (sz_blk & 
5327:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_SS != _MIN_SS		/* Get sector size of the medium if variable sector size cfg. */
5328:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (disk_ioctl(pdrv, GET_SECTOR_SIZE, &ss) != RES_OK) return FR_DISK_ERR;
5329:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (ss > _MAX_SS || ss < _MIN_SS || (ss & (ss - 1))) return FR_DISK_ERR;
5330:Middlewares/Third_Party/FatFs/src/ff.c **** #else
5331:Middlewares/Third_Party/FatFs/src/ff.c **** 	ss = _MAX_SS;
5332:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5333:Middlewares/Third_Party/FatFs/src/ff.c **** 	if ((au != 0 && au < ss) || au > 0x1000000 || (au & (au - 1))) return FR_INVALID_PARAMETER;	/* Che
5334:Middlewares/Third_Party/FatFs/src/ff.c **** 	au /= ss;	/* Cluster size in unit of sector */
5335:Middlewares/Third_Party/FatFs/src/ff.c **** 
5336:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get working buffer */
5337:Middlewares/Third_Party/FatFs/src/ff.c **** 	buf = (BYTE*)work;		/* Working buffer */
5338:Middlewares/Third_Party/FatFs/src/ff.c **** 	sz_buf = len / ss;		/* Size of working buffer (sector) */
5339:Middlewares/Third_Party/FatFs/src/ff.c **** 	szb_buf = sz_buf * ss;	/* Size of working buffer (byte) */
5340:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!szb_buf) return FR_MKFS_ABORTED;
5341:Middlewares/Third_Party/FatFs/src/ff.c **** 
5342:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Determine where the volume to be located (b_vol, sz_vol) */
5343:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (_MULTI_PARTITION && part != 0) {
5344:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Get partition information from partition table in the MBR */
5345:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (disk_read(pdrv, buf, 0, 1) != RES_OK) return FR_DISK_ERR;	/* Load MBR */
5346:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ld_word(buf + BS_55AA) != 0xAA55) return FR_MKFS_ABORTED;	/* Check if MBR is valid */
5347:Middlewares/Third_Party/FatFs/src/ff.c **** 		pte = buf + (MBR_Table + (part - 1) * SZ_PTE);
5348:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!pte[PTE_System]) return FR_MKFS_ABORTED;	/* No partition? */
5349:Middlewares/Third_Party/FatFs/src/ff.c **** 		b_vol = ld_dword(pte + PTE_StLba);		/* Get volume start sector */
5350:Middlewares/Third_Party/FatFs/src/ff.c **** 		sz_vol = ld_dword(pte + PTE_SizLba);	/* Get volume size */
5351:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
5352:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Create a single-partition in this function */
5353:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (disk_ioctl(pdrv, GET_SECTOR_COUNT, &sz_vol) != RES_OK) return FR_DISK_ERR;
5354:Middlewares/Third_Party/FatFs/src/ff.c **** 		b_vol = (opt & FM_SFD) ? 0 : 63;		/* Volume start sector */
5355:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (sz_vol < b_vol) return FR_MKFS_ABORTED;
5356:Middlewares/Third_Party/FatFs/src/ff.c **** 		sz_vol -= b_vol;						/* Volume size */
5357:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
5358:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (sz_vol < 128) return FR_MKFS_ABORTED;	/* Check if volume size is >=128s */
5359:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 123


5360:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Pre-determine the FAT type */
5361:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
5362:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_EXFAT && (opt & FM_EXFAT)) {	/* exFAT possible? */
5363:Middlewares/Third_Party/FatFs/src/ff.c **** 			if ((opt & FM_ANY) == FM_EXFAT || sz_vol >= 0x4000000 || au > 128) {	/* exFAT only, vol >= 64Ms 
5364:Middlewares/Third_Party/FatFs/src/ff.c **** 				fmt = FS_EXFAT; break;
5365:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5366:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5367:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (au > 128) return FR_INVALID_PARAMETER;	/* Too large au for FAT/FAT32 */
5368:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (opt & FM_FAT32) {	/* FAT32 possible? */
5369:Middlewares/Third_Party/FatFs/src/ff.c **** 			if ((opt & FM_ANY) == FM_FAT32 || !(opt & FM_FAT)) {	/* FAT32 only or no-FAT? */
5370:Middlewares/Third_Party/FatFs/src/ff.c **** 				fmt = FS_FAT32; break;
5371:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5372:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5373:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!(opt & FM_FAT)) return FR_INVALID_PARAMETER;	/* no-FAT? */
5374:Middlewares/Third_Party/FatFs/src/ff.c **** 		fmt = FS_FAT16;
5375:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (0);
5376:Middlewares/Third_Party/FatFs/src/ff.c **** 
5377:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
5378:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == FS_EXFAT) {	/* Create an exFAT volume */
5379:Middlewares/Third_Party/FatFs/src/ff.c **** 		DWORD szb_bit, szb_case, sum, nb, cl;
5380:Middlewares/Third_Party/FatFs/src/ff.c **** 		WCHAR ch, si;
5381:Middlewares/Third_Party/FatFs/src/ff.c **** 		UINT j, st;
5382:Middlewares/Third_Party/FatFs/src/ff.c **** 		BYTE b;
5383:Middlewares/Third_Party/FatFs/src/ff.c **** 
5384:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (sz_vol < 0x1000) return FR_MKFS_ABORTED;	/* Too small volume? */
5385:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_TRIM
5386:Middlewares/Third_Party/FatFs/src/ff.c **** 		tbl[0] = b_vol; tbl[1] = b_vol + sz_vol - 1;	/* Inform the device the volume area may be erased *
5387:Middlewares/Third_Party/FatFs/src/ff.c **** 		disk_ioctl(pdrv, CTRL_TRIM, tbl);
5388:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5389:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Determine FAT location, data location and number of clusters */
5390:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!au) {	/* au auto-selection */
5391:Middlewares/Third_Party/FatFs/src/ff.c **** 			au = 8;
5392:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (sz_vol >= 0x80000) au = 64;		/* >= 512Ks */
5393:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (sz_vol >= 0x4000000) au = 256;	/* >= 64Ms */
5394:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5395:Middlewares/Third_Party/FatFs/src/ff.c **** 		b_fat = b_vol + 32;										/* FAT start at offset 32 */
5396:Middlewares/Third_Party/FatFs/src/ff.c **** 		sz_fat = ((sz_vol / au + 2) * 4 + ss - 1) / ss;			/* Number of FAT sectors */
5397:Middlewares/Third_Party/FatFs/src/ff.c **** 		b_data = (b_fat + sz_fat + sz_blk - 1) & ~(sz_blk - 1);	/* Align data area to the erase block bou
5398:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (b_data >= sz_vol / 2) return FR_MKFS_ABORTED;		/* Too small volume? */
5399:Middlewares/Third_Party/FatFs/src/ff.c **** 		n_clst = (sz_vol - (b_data - b_vol)) / au;				/* Number of clusters */
5400:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (n_clst <16) return FR_MKFS_ABORTED;					/* Too few clusters? */
5401:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (n_clst > MAX_EXFAT) return FR_MKFS_ABORTED;			/* Too many clusters? */
5402:Middlewares/Third_Party/FatFs/src/ff.c **** 
5403:Middlewares/Third_Party/FatFs/src/ff.c **** 		szb_bit = (n_clst + 7) / 8;						/* Size of allocation bitmap */
5404:Middlewares/Third_Party/FatFs/src/ff.c **** 		tbl[0] = (szb_bit + au * ss - 1) / (au * ss);	/* Number of allocation bitmap clusters */
5405:Middlewares/Third_Party/FatFs/src/ff.c **** 
5406:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Create a compressed up-case table */
5407:Middlewares/Third_Party/FatFs/src/ff.c **** 		sect = b_data + au * tbl[0];	/* Table start sector */
5408:Middlewares/Third_Party/FatFs/src/ff.c **** 		sum = 0;						/* Table checksum to be stored in the 82 entry */
5409:Middlewares/Third_Party/FatFs/src/ff.c **** 		st = si = i = j = szb_case = 0;
5410:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
5411:Middlewares/Third_Party/FatFs/src/ff.c **** 			switch (st) {
5412:Middlewares/Third_Party/FatFs/src/ff.c **** 			case 0:
5413:Middlewares/Third_Party/FatFs/src/ff.c **** 				ch = ff_wtoupper(si);	/* Get an up-case char */
5414:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (ch != si) {
5415:Middlewares/Third_Party/FatFs/src/ff.c **** 					si++; break;		/* Store the up-case char if exist */
5416:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 124


5417:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (j = 1; (WCHAR)(si + j) && (WCHAR)(si + j) == ff_wtoupper((WCHAR)(si + j)); j++) ;	/* Get r
5418:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (j >= 128) {
5419:Middlewares/Third_Party/FatFs/src/ff.c **** 					ch = 0xFFFF; st = 2; break;	/* Compress the no-case block if run is >= 128 */
5420:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
5421:Middlewares/Third_Party/FatFs/src/ff.c **** 				st = 1;			/* Do not compress short run */
5422:Middlewares/Third_Party/FatFs/src/ff.c **** 				/* go to next case */
5423:Middlewares/Third_Party/FatFs/src/ff.c **** 			case 1:
5424:Middlewares/Third_Party/FatFs/src/ff.c **** 				ch = si++;		/* Fill the short run */
5425:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (--j == 0) st = 0;
5426:Middlewares/Third_Party/FatFs/src/ff.c **** 				break;
5427:Middlewares/Third_Party/FatFs/src/ff.c **** 
5428:Middlewares/Third_Party/FatFs/src/ff.c **** 			default:
5429:Middlewares/Third_Party/FatFs/src/ff.c **** 				ch = (WCHAR)j; si += j;	/* Number of chars to skip */
5430:Middlewares/Third_Party/FatFs/src/ff.c **** 				st = 0;
5431:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5432:Middlewares/Third_Party/FatFs/src/ff.c **** 			sum = xsum32(buf[i + 0] = (BYTE)ch, sum);		/* Put it into the write buffer */
5433:Middlewares/Third_Party/FatFs/src/ff.c **** 			sum = xsum32(buf[i + 1] = (BYTE)(ch >> 8), sum);
5434:Middlewares/Third_Party/FatFs/src/ff.c **** 			i += 2; szb_case += 2;
5435:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!si || i == szb_buf) {		/* Write buffered data when buffer full or end of process */
5436:Middlewares/Third_Party/FatFs/src/ff.c **** 				n = (i + ss - 1) / ss;
5437:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(pdrv, buf, sect, n) != RES_OK) return FR_DISK_ERR;
5438:Middlewares/Third_Party/FatFs/src/ff.c **** 				sect += n; i = 0;
5439:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5440:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (si);
5441:Middlewares/Third_Party/FatFs/src/ff.c **** 		tbl[1] = (szb_case + au * ss - 1) / (au * ss);	/* Number of up-case table clusters */
5442:Middlewares/Third_Party/FatFs/src/ff.c **** 		tbl[2] = 1;										/* Number of root dir clusters */
5443:Middlewares/Third_Party/FatFs/src/ff.c **** 
5444:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Initialize the allocation bitmap */
5445:Middlewares/Third_Party/FatFs/src/ff.c **** 		sect = b_data; nsect = (szb_bit + ss - 1) / ss;	/* Start of bitmap and number of sectors */
5446:Middlewares/Third_Party/FatFs/src/ff.c **** 		nb = tbl[0] + tbl[1] + tbl[2];					/* Number of clusters in-use by system */
5447:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
5448:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(buf, 0, szb_buf);
5449:Middlewares/Third_Party/FatFs/src/ff.c **** 			for (i = 0; nb >= 8 && i < szb_buf; buf[i++] = 0xFF, nb -= 8) ;
5450:Middlewares/Third_Party/FatFs/src/ff.c **** 			for (b = 1; nb && i < szb_buf; buf[i] |= b, b <<= 1, nb--) ;
5451:Middlewares/Third_Party/FatFs/src/ff.c **** 			n = (nsect > sz_buf) ? sz_buf : nsect;		/* Write the buffered data */
5452:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(pdrv, buf, sect, n) != RES_OK) return FR_DISK_ERR;
5453:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += n; nsect -= n;
5454:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (nsect);
5455:Middlewares/Third_Party/FatFs/src/ff.c **** 
5456:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Initialize the FAT */
5457:Middlewares/Third_Party/FatFs/src/ff.c **** 		sect = b_fat; nsect = sz_fat;	/* Start of FAT and number of FAT sectors */
5458:Middlewares/Third_Party/FatFs/src/ff.c **** 		j = nb = cl = 0;
5459:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
5460:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(buf, 0, szb_buf); i = 0;	/* Clear work area and reset write index */
5461:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cl == 0) {	/* Set entry 0 and 1 */
5462:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_dword(buf + i, 0xFFFFFFF8); i += 4; cl++;
5463:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_dword(buf + i, 0xFFFFFFFF); i += 4; cl++;
5464:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5465:Middlewares/Third_Party/FatFs/src/ff.c **** 			do {			/* Create chains of bitmap, up-case and root dir */
5466:Middlewares/Third_Party/FatFs/src/ff.c **** 				while (nb && i < szb_buf) {			/* Create a chain */
5467:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(buf + i, (nb > 1) ? cl + 1 : 0xFFFFFFFF);
5468:Middlewares/Third_Party/FatFs/src/ff.c **** 					i += 4; cl++; nb--;
5469:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
5470:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!nb && j < 3) nb = tbl[j++];	/* Next chain */
5471:Middlewares/Third_Party/FatFs/src/ff.c **** 			} while (nb && i < szb_buf);
5472:Middlewares/Third_Party/FatFs/src/ff.c **** 			n = (nsect > sz_buf) ? sz_buf : nsect;	/* Write the buffered data */
5473:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(pdrv, buf, sect, n) != RES_OK) return FR_DISK_ERR;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 125


5474:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += n; nsect -= n;
5475:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (nsect);
5476:Middlewares/Third_Party/FatFs/src/ff.c **** 
5477:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Initialize the root directory */
5478:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_set(buf, 0, szb_buf);
5479:Middlewares/Third_Party/FatFs/src/ff.c **** 		buf[SZDIRE * 0 + 0] = 0x83;		/* 83 entry (volume label) */
5480:Middlewares/Third_Party/FatFs/src/ff.c **** 		buf[SZDIRE * 1 + 0] = 0x81;		/* 81 entry (allocation bitmap) */
5481:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_dword(buf + SZDIRE * 1 + 20, 2);
5482:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_dword(buf + SZDIRE * 1 + 24, szb_bit);
5483:Middlewares/Third_Party/FatFs/src/ff.c **** 		buf[SZDIRE * 2 + 0] = 0x82;		/* 82 entry (up-case table) */
5484:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_dword(buf + SZDIRE * 2 + 4, sum);
5485:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_dword(buf + SZDIRE * 2 + 20, 2 + tbl[0]);
5486:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_dword(buf + SZDIRE * 2 + 24, szb_case);
5487:Middlewares/Third_Party/FatFs/src/ff.c **** 		sect = b_data + au * (tbl[0] + tbl[1]);	nsect = au;	/* Start of the root directory and number of 
5488:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {	/* Fill root directory sectors */
5489:Middlewares/Third_Party/FatFs/src/ff.c **** 			n = (nsect > sz_buf) ? sz_buf : nsect;
5490:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(pdrv, buf, sect, n) != RES_OK) return FR_DISK_ERR;
5491:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(buf, 0, ss);
5492:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += n; nsect -= n;
5493:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (nsect);
5494:Middlewares/Third_Party/FatFs/src/ff.c **** 
5495:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Create two set of the exFAT VBR blocks */
5496:Middlewares/Third_Party/FatFs/src/ff.c **** 		sect = b_vol;
5497:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (n = 0; n < 2; n++) {
5498:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Main record (+0) */
5499:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(buf, 0, ss);
5500:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_cpy(buf + BS_JmpBoot, "\xEB\x76\x90" "EXFAT   ", 11);	/* Boot jump code (x86), OEM name */
5501:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BPB_VolOfsEx, b_vol);					/* Volume offset in the physical drive [sector] */
5502:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BPB_TotSecEx, sz_vol);					/* Volume size [sector] */
5503:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BPB_FatOfsEx, b_fat - b_vol);			/* FAT offset [sector] */
5504:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BPB_FatSzEx, sz_fat);					/* FAT size [sector] */
5505:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BPB_DataOfsEx, b_data - b_vol);			/* Data offset [sector] */
5506:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BPB_NumClusEx, n_clst);					/* Number of clusters */
5507:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BPB_RootClusEx, 2 + tbl[0] + tbl[1]);	/* Root dir cluster # */
5508:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BPB_VolIDEx, GET_FATTIME());				/* VSN */
5509:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BPB_FSVerEx, 0x100);						/* File system version (1.00) */
5510:Middlewares/Third_Party/FatFs/src/ff.c **** 			for (buf[BPB_BytsPerSecEx] = 0, i = ss; i >>= 1; buf[BPB_BytsPerSecEx]++) ;	/* Log2 of sector si
5511:Middlewares/Third_Party/FatFs/src/ff.c **** 			for (buf[BPB_SecPerClusEx] = 0, i = au; i >>= 1; buf[BPB_SecPerClusEx]++) ;	/* Log2 of cluster s
5512:Middlewares/Third_Party/FatFs/src/ff.c **** 			buf[BPB_NumFATsEx] = 1;					/* Number of FATs */
5513:Middlewares/Third_Party/FatFs/src/ff.c **** 			buf[BPB_DrvNumEx] = 0x80;				/* Drive number (for int13) */
5514:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BS_BootCodeEx, 0xFEEB);	/* Boot code (x86) */
5515:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BS_55AA, 0xAA55);			/* Signature (placed here regardless of sector size) */
5516:Middlewares/Third_Party/FatFs/src/ff.c **** 			for (i = sum = 0; i < ss; i++) {		/* VBR checksum */
5517:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (i != BPB_VolFlagEx && i != BPB_VolFlagEx + 1 && i != BPB_PercInUseEx) sum = xsum32(buf[i], 
5518:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5519:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(pdrv, buf, sect++, 1) != RES_OK) return FR_DISK_ERR;
5520:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Extended bootstrap record (+1..+8) */
5521:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(buf, 0, ss);
5522:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + ss - 2, 0xAA55);	/* Signature (placed at end of sector) */
5523:Middlewares/Third_Party/FatFs/src/ff.c **** 			for (j = 1; j < 9; j++) {
5524:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (i = 0; i < ss; sum = xsum32(buf[i++], sum)) ;	/* VBR checksum */
5525:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(pdrv, buf, sect++, 1) != RES_OK) return FR_DISK_ERR;
5526:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5527:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* OEM/Reserved record (+9..+10) */
5528:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(buf, 0, ss);
5529:Middlewares/Third_Party/FatFs/src/ff.c **** 			for ( ; j < 11; j++) {
5530:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (i = 0; i < ss; sum = xsum32(buf[i++], sum)) ;	/* VBR checksum */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 126


5531:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(pdrv, buf, sect++, 1) != RES_OK) return FR_DISK_ERR;
5532:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5533:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Sum record (+11) */
5534:Middlewares/Third_Party/FatFs/src/ff.c **** 			for (i = 0; i < ss; i += 4) st_dword(buf + i, sum);		/* Fill with checksum value */
5535:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(pdrv, buf, sect++, 1) != RES_OK) return FR_DISK_ERR;
5536:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5537:Middlewares/Third_Party/FatFs/src/ff.c **** 
5538:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else
5539:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* _FS_EXFAT */
5540:Middlewares/Third_Party/FatFs/src/ff.c **** 	{	/* Create an FAT12/16/32 volume */
5541:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
5542:Middlewares/Third_Party/FatFs/src/ff.c **** 			pau = au;
5543:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Pre-determine number of clusters and FAT sub-type */
5544:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {	/* FAT32 volume */
5545:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!pau) {	/* au auto-selection */
5546:Middlewares/Third_Party/FatFs/src/ff.c **** 					n = sz_vol / 0x20000;	/* Volume size in unit of 128KS */
5547:Middlewares/Third_Party/FatFs/src/ff.c **** 					for (i = 0, pau = 1; cst32[i] && cst32[i] <= n; i++, pau <<= 1) ;	/* Get from table */
5548:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
5549:Middlewares/Third_Party/FatFs/src/ff.c **** 				n_clst = sz_vol / pau;	/* Number of clusters */
5550:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_fat = (n_clst * 4 + 8 + ss - 1) / ss;	/* FAT size [sector] */
5551:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_rsv = 32;	/* Number of reserved sectors */
5552:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_dir = 0;		/* No static directory */
5553:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (n_clst <= MAX_FAT16 || n_clst > MAX_FAT32) return FR_MKFS_ABORTED;
5554:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {				/* FAT12/16 volume */
5555:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!pau) {	/* au auto-selection */
5556:Middlewares/Third_Party/FatFs/src/ff.c **** 					n = sz_vol / 0x1000;	/* Volume size in unit of 4KS */
5557:Middlewares/Third_Party/FatFs/src/ff.c **** 					for (i = 0, pau = 1; cst[i] && cst[i] <= n; i++, pau <<= 1) ;	/* Get from table */
5558:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
5559:Middlewares/Third_Party/FatFs/src/ff.c **** 				n_clst = sz_vol / pau;
5560:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (n_clst > MAX_FAT12) {
5561:Middlewares/Third_Party/FatFs/src/ff.c **** 					n = n_clst * 2 + 4;		/* FAT size [byte] */
5562:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
5563:Middlewares/Third_Party/FatFs/src/ff.c **** 					fmt = FS_FAT12;
5564:Middlewares/Third_Party/FatFs/src/ff.c **** 					n = (n_clst * 3 + 1) / 2 + 3;	/* FAT size [byte] */
5565:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
5566:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_fat = (n + ss - 1) / ss;		/* FAT size [sector] */
5567:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_rsv = 1;						/* Number of reserved sectors */
5568:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_dir = (DWORD)n_rootdir * SZDIRE / ss;	/* Rootdir size [sector] */
5569:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5570:Middlewares/Third_Party/FatFs/src/ff.c **** 			b_fat = b_vol + sz_rsv;						/* FAT base */
5571:Middlewares/Third_Party/FatFs/src/ff.c **** 			b_data = b_fat + sz_fat * n_fats + sz_dir;	/* Data base */
5572:Middlewares/Third_Party/FatFs/src/ff.c **** 
5573:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Align data base to erase block boundary (for flash memory media) */
5574:Middlewares/Third_Party/FatFs/src/ff.c **** 			n = ((b_data + sz_blk - 1) & ~(sz_blk - 1)) - b_data;	/* Next nearest erase block from current d
5575:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {		/* FAT32: Move FAT base */
5576:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_rsv += n; b_fat += n;
5577:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {					/* FAT12/16: Expand FAT size */
5578:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_fat += n / n_fats;
5579:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5580:Middlewares/Third_Party/FatFs/src/ff.c **** 
5581:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Determine number of clusters and final check of validity of the FAT sub-type */
5582:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (sz_vol < b_data + pau * 16 - b_vol) return FR_MKFS_ABORTED;	/* Too small volume */
5583:Middlewares/Third_Party/FatFs/src/ff.c **** 			n_clst = (sz_vol - sz_rsv - sz_fat * n_fats - sz_dir) / pau;
5584:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {
5585:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (n_clst <= MAX_FAT16) {	/* Too few clusters for FAT32 */
5586:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!au && (au = pau / 2) != 0) continue;	/* Adjust cluster size and retry */
5587:Middlewares/Third_Party/FatFs/src/ff.c **** 					return FR_MKFS_ABORTED;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 127


5588:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
5589:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5590:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT16) {
5591:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (n_clst > MAX_FAT16) {	/* Too many clusters for FAT16 */
5592:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!au && (pau * 2) <= 64) {
5593:Middlewares/Third_Party/FatFs/src/ff.c **** 						au = pau * 2; continue;		/* Adjust cluster size and retry */
5594:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
5595:Middlewares/Third_Party/FatFs/src/ff.c **** 					if ((opt & FM_FAT32)) {
5596:Middlewares/Third_Party/FatFs/src/ff.c **** 						fmt = FS_FAT32; continue;	/* Switch type to FAT32 and retry */
5597:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
5598:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!au && (au = pau * 2) <= 128) continue;	/* Adjust cluster size and retry */
5599:Middlewares/Third_Party/FatFs/src/ff.c **** 					return FR_MKFS_ABORTED;
5600:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
5601:Middlewares/Third_Party/FatFs/src/ff.c **** 				if  (n_clst <= MAX_FAT12) {	/* Too few clusters for FAT16 */
5602:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!au && (au = pau * 2) <= 128) continue;	/* Adjust cluster size and retry */
5603:Middlewares/Third_Party/FatFs/src/ff.c **** 					return FR_MKFS_ABORTED;
5604:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
5605:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5606:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT12 && n_clst > MAX_FAT12) return FR_MKFS_ABORTED;	/* Too many clusters for FAT1
5607:Middlewares/Third_Party/FatFs/src/ff.c **** 
5608:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Ok, it is the valid cluster configuration */
5609:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
5610:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (1);
5611:Middlewares/Third_Party/FatFs/src/ff.c **** 
5612:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_TRIM
5613:Middlewares/Third_Party/FatFs/src/ff.c **** 		tbl[0] = b_vol; tbl[1] = b_vol + sz_vol - 1;	/* Inform the device the volume area can be erased *
5614:Middlewares/Third_Party/FatFs/src/ff.c **** 		disk_ioctl(pdrv, CTRL_TRIM, tbl);
5615:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5616:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Create FAT VBR */
5617:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_set(buf, 0, ss);
5618:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_cpy(buf + BS_JmpBoot, "\xEB\xFE\x90" "MSDOS5.0", 11);/* Boot jump code (x86), OEM name */
5619:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(buf + BPB_BytsPerSec, ss);				/* Sector size [byte] */
5620:Middlewares/Third_Party/FatFs/src/ff.c **** 		buf[BPB_SecPerClus] = (BYTE)pau;				/* Cluster size [sector] */
5621:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(buf + BPB_RsvdSecCnt, (WORD)sz_rsv);	/* Size of reserved area */
5622:Middlewares/Third_Party/FatFs/src/ff.c **** 		buf[BPB_NumFATs] = (BYTE)n_fats;				/* Number of FATs */
5623:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(buf + BPB_RootEntCnt, (WORD)((fmt == FS_FAT32) ? 0 : n_rootdir));	/* Number of root direc
5624:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (sz_vol < 0x10000) {
5625:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BPB_TotSec16, (WORD)sz_vol);	/* Volume size in 16-bit LBA */
5626:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
5627:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BPB_TotSec32, sz_vol);		/* Volume size in 32-bit LBA */
5628:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5629:Middlewares/Third_Party/FatFs/src/ff.c **** 		buf[BPB_Media] = 0xF8;							/* Media descriptor byte */
5630:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(buf + BPB_SecPerTrk, 63);				/* Number of sectors per track (for int13) */
5631:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(buf + BPB_NumHeads, 255);				/* Number of heads (for int13) */
5632:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_dword(buf + BPB_HiddSec, b_vol);				/* Volume offset in the physical drive [sector] */
5633:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fmt == FS_FAT32) {
5634:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BS_VolID32, GET_FATTIME());	/* VSN */
5635:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BPB_FATSz32, sz_fat);		/* FAT size [sector] */
5636:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BPB_RootClus32, 2);			/* Root directory cluster # (2) */
5637:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BPB_FSInfo32, 1);				/* Offset of FSINFO sector (VBR + 1) */
5638:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BPB_BkBootSec32, 6);			/* Offset of backup VBR (VBR + 6) */
5639:Middlewares/Third_Party/FatFs/src/ff.c **** 			buf[BS_DrvNum32] = 0x80;					/* Drive number (for int13) */
5640:Middlewares/Third_Party/FatFs/src/ff.c **** 			buf[BS_BootSig32] = 0x29;					/* Extended boot signature */
5641:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_cpy(buf + BS_VolLab32, "NO NAME    " "FAT32   ", 19);	/* Volume label, FAT signature */
5642:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
5643:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BS_VolID, GET_FATTIME());	/* VSN */
5644:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BPB_FATSz16, (WORD)sz_fat);	/* FAT size [sector] */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 128


5645:Middlewares/Third_Party/FatFs/src/ff.c **** 			buf[BS_DrvNum] = 0x80;						/* Drive number (for int13) */
5646:Middlewares/Third_Party/FatFs/src/ff.c **** 			buf[BS_BootSig] = 0x29;						/* Extended boot signature */
5647:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_cpy(buf + BS_VolLab, "NO NAME    " "FAT     ", 19);	/* Volume label, FAT signature */
5648:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5649:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(buf + BS_55AA, 0xAA55);					/* Signature (offset is fixed here regardless of sector size)
5650:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (disk_write(pdrv, buf, b_vol, 1) != RES_OK) return FR_DISK_ERR;	/* Write it to the VBR sector 
5651:Middlewares/Third_Party/FatFs/src/ff.c **** 
5652:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Create FSINFO record if needed */
5653:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fmt == FS_FAT32) {
5654:Middlewares/Third_Party/FatFs/src/ff.c **** 			disk_write(pdrv, buf, b_vol + 6, 1);		/* Write backup VBR (VBR + 6) */
5655:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(buf, 0, ss);
5656:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + FSI_LeadSig, 0x41615252);
5657:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + FSI_StrucSig, 0x61417272);
5658:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + FSI_Free_Count, n_clst - 1);	/* Number of free clusters */
5659:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + FSI_Nxt_Free, 2);			/* Last allocated cluster# */
5660:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BS_55AA, 0xAA55);
5661:Middlewares/Third_Party/FatFs/src/ff.c **** 			disk_write(pdrv, buf, b_vol + 7, 1);		/* Write backup FSINFO (VBR + 7) */
5662:Middlewares/Third_Party/FatFs/src/ff.c **** 			disk_write(pdrv, buf, b_vol + 1, 1);		/* Write original FSINFO (VBR + 1) */
5663:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5664:Middlewares/Third_Party/FatFs/src/ff.c **** 
5665:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Initialize FAT area */
5666:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_set(buf, 0, (UINT)szb_buf);
5667:Middlewares/Third_Party/FatFs/src/ff.c **** 		sect = b_fat;		/* FAT start sector */
5668:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = 0; i < n_fats; i++) {			/* Initialize FATs each */
5669:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {
5670:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_dword(buf + 0, 0xFFFFFFF8);	/* Entry 0 */
5671:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_dword(buf + 4, 0xFFFFFFFF);	/* Entry 1 */
5672:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_dword(buf + 8, 0x0FFFFFFF);	/* Entry 2 (root directory) */
5673:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
5674:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_dword(buf + 0, (fmt == FS_FAT12) ? 0xFFFFF8 : 0xFFFFFFF8);	/* Entry 0 and 1 */
5675:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5676:Middlewares/Third_Party/FatFs/src/ff.c **** 			nsect = sz_fat;		/* Number of FAT sectors */
5677:Middlewares/Third_Party/FatFs/src/ff.c **** 			do {	/* Fill FAT sectors */
5678:Middlewares/Third_Party/FatFs/src/ff.c **** 				n = (nsect > sz_buf) ? sz_buf : nsect;
5679:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(pdrv, buf, sect, (UINT)n) != RES_OK) return FR_DISK_ERR;
5680:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_set(buf, 0, ss);
5681:Middlewares/Third_Party/FatFs/src/ff.c **** 				sect += n; nsect -= n;
5682:Middlewares/Third_Party/FatFs/src/ff.c **** 			} while (nsect);
5683:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5684:Middlewares/Third_Party/FatFs/src/ff.c **** 
5685:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Initialize root directory (fill with zero) */
5686:Middlewares/Third_Party/FatFs/src/ff.c **** 		nsect = (fmt == FS_FAT32) ? pau : sz_dir;	/* Number of root directory sectors */
5687:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
5688:Middlewares/Third_Party/FatFs/src/ff.c **** 			n = (nsect > sz_buf) ? sz_buf : nsect;
5689:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(pdrv, buf, sect, (UINT)n) != RES_OK) return FR_DISK_ERR;
5690:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += n; nsect -= n;
5691:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (nsect);
5692:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
5693:Middlewares/Third_Party/FatFs/src/ff.c **** 
5694:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Determine system ID in the partition table */
5695:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (_FS_EXFAT && fmt == FS_EXFAT) {
5696:Middlewares/Third_Party/FatFs/src/ff.c **** 		sys = 0x07;			/* HPFS/NTFS/exFAT */
5697:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
5698:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fmt == FS_FAT32) {
5699:Middlewares/Third_Party/FatFs/src/ff.c **** 			sys = 0x0C;		/* FAT32X */
5700:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
5701:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (sz_vol >= 0x10000) {
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 129


5702:Middlewares/Third_Party/FatFs/src/ff.c **** 				sys = 0x06;	/* FAT12/16 (>=64KS) */
5703:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
5704:Middlewares/Third_Party/FatFs/src/ff.c **** 				sys = (fmt == FS_FAT16) ? 0x04 : 0x01;	/* FAT16 (<64KS) : FAT12 (<64KS) */
5705:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5706:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5707:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
5708:Middlewares/Third_Party/FatFs/src/ff.c **** 
5709:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Update partition information */
5710:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (_MULTI_PARTITION && part != 0) {	/* Created in the existing partition */
5711:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Update system ID in the partition table */
5712:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (disk_read(pdrv, buf, 0, 1) != RES_OK) return FR_DISK_ERR;	/* Read the MBR */
5713:Middlewares/Third_Party/FatFs/src/ff.c **** 		buf[MBR_Table + (part - 1) * SZ_PTE + PTE_System] = sys;		/* Set system ID */
5714:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (disk_write(pdrv, buf, 0, 1) != RES_OK) return FR_DISK_ERR;	/* Write it back to the MBR */
5715:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {								/* Created as a new single partition */
5716:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!(opt & FM_SFD)) {	/* Create partition table if in FDISK format */
5717:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(buf, 0, ss);
5718:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BS_55AA, 0xAA55);		/* MBR signature */
5719:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte = buf + MBR_Table;				/* Create partition table for single partition in the drive */
5720:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_Boot] = 0;					/* Boot indicator */
5721:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_StHead] = 1;				/* Start head */
5722:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_StSec] = 1;					/* Start sector */
5723:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_StCyl] = 0;					/* Start cylinder */
5724:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_System] = sys;				/* System type */
5725:Middlewares/Third_Party/FatFs/src/ff.c **** 			n = (b_vol + sz_vol) / (63 * 255);	/* (End CHS may be invalid) */
5726:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_EdHead] = 254;				/* End head */
5727:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_EdSec] = (BYTE)(n >> 2 | 63);	/* End sector */
5728:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_EdCyl] = (BYTE)n;			/* End cylinder */
5729:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(pte + PTE_StLba, b_vol);	/* Start offset in LBA */
5730:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(pte + PTE_SizLba, sz_vol);	/* Size in sectors */
5731:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(pdrv, buf, 0, 1) != RES_OK) return FR_DISK_ERR;	/* Write it to the MBR */
5732:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5733:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
5734:Middlewares/Third_Party/FatFs/src/ff.c **** 
5735:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (disk_ioctl(pdrv, CTRL_SYNC, 0) != RES_OK) return FR_DISK_ERR;
5736:Middlewares/Third_Party/FatFs/src/ff.c **** 
5737:Middlewares/Third_Party/FatFs/src/ff.c **** 	return FR_OK;
5738:Middlewares/Third_Party/FatFs/src/ff.c **** }
5739:Middlewares/Third_Party/FatFs/src/ff.c **** 
5740:Middlewares/Third_Party/FatFs/src/ff.c **** 
5741:Middlewares/Third_Party/FatFs/src/ff.c **** 
5742:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MULTI_PARTITION
5743:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
5744:Middlewares/Third_Party/FatFs/src/ff.c **** /* Create partition table on the physical drive                          */
5745:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
5746:Middlewares/Third_Party/FatFs/src/ff.c **** 
5747:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_fdisk (
5748:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE pdrv,			/* Physical drive number */
5749:Middlewares/Third_Party/FatFs/src/ff.c **** 	const DWORD* szt,	/* Pointer to the size table for each partitions */
5750:Middlewares/Third_Party/FatFs/src/ff.c **** 	void* work			/* Pointer to the working buffer */
5751:Middlewares/Third_Party/FatFs/src/ff.c **** )
5752:Middlewares/Third_Party/FatFs/src/ff.c **** {
5753:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, n, sz_cyl, tot_cyl, b_cyl, e_cyl, p_cyl;
5754:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE s_hd, e_hd, *p, *buf = (BYTE*)work;
5755:Middlewares/Third_Party/FatFs/src/ff.c **** 	DSTATUS stat;
5756:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD sz_disk, sz_part, s_part;
5757:Middlewares/Third_Party/FatFs/src/ff.c **** 
5758:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 130


5759:Middlewares/Third_Party/FatFs/src/ff.c **** 	stat = disk_initialize(pdrv);
5760:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_NOINIT) return FR_NOT_READY;
5761:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_PROTECT) return FR_WRITE_PROTECTED;
5762:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (disk_ioctl(pdrv, GET_SECTOR_COUNT, &sz_disk)) return FR_DISK_ERR;
5763:Middlewares/Third_Party/FatFs/src/ff.c **** 
5764:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Determine the CHS without any consideration of the drive geometry */
5765:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (n = 16; n < 256 && sz_disk / n / 63 > 1024; n *= 2) ;
5766:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (n == 256) n--;
5767:Middlewares/Third_Party/FatFs/src/ff.c **** 	e_hd = n - 1;
5768:Middlewares/Third_Party/FatFs/src/ff.c **** 	sz_cyl = 63 * n;
5769:Middlewares/Third_Party/FatFs/src/ff.c **** 	tot_cyl = sz_disk / sz_cyl;
5770:Middlewares/Third_Party/FatFs/src/ff.c **** 
5771:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Create partition table */
5772:Middlewares/Third_Party/FatFs/src/ff.c **** 	mem_set(buf, 0, _MAX_SS);
5773:Middlewares/Third_Party/FatFs/src/ff.c **** 	p = buf + MBR_Table; b_cyl = 0;
5774:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (i = 0; i < 4; i++, p += SZ_PTE) {
5775:Middlewares/Third_Party/FatFs/src/ff.c **** 		p_cyl = (szt[i] <= 100U) ? (DWORD)tot_cyl * szt[i] / 100 : szt[i] / sz_cyl;	/* Number of cylinder
5776:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!p_cyl) continue;
5777:Middlewares/Third_Party/FatFs/src/ff.c **** 		s_part = (DWORD)sz_cyl * b_cyl;
5778:Middlewares/Third_Party/FatFs/src/ff.c **** 		sz_part = (DWORD)sz_cyl * p_cyl;
5779:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == 0) {	/* Exclude first track of cylinder 0 */
5780:Middlewares/Third_Party/FatFs/src/ff.c **** 			s_hd = 1;
5781:Middlewares/Third_Party/FatFs/src/ff.c **** 			s_part += 63; sz_part -= 63;
5782:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
5783:Middlewares/Third_Party/FatFs/src/ff.c **** 			s_hd = 0;
5784:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5785:Middlewares/Third_Party/FatFs/src/ff.c **** 		e_cyl = b_cyl + p_cyl - 1;	/* End cylinder */
5786:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (e_cyl >= tot_cyl) return FR_INVALID_PARAMETER;
5787:Middlewares/Third_Party/FatFs/src/ff.c **** 
5788:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Set partition table */
5789:Middlewares/Third_Party/FatFs/src/ff.c **** 		p[1] = s_hd;						/* Start head */
5790:Middlewares/Third_Party/FatFs/src/ff.c **** 		p[2] = (BYTE)((b_cyl >> 2) + 1);	/* Start sector */
5791:Middlewares/Third_Party/FatFs/src/ff.c **** 		p[3] = (BYTE)b_cyl;					/* Start cylinder */
5792:Middlewares/Third_Party/FatFs/src/ff.c **** 		p[4] = 0x07;						/* System type (temporary setting) */
5793:Middlewares/Third_Party/FatFs/src/ff.c **** 		p[5] = e_hd;						/* End head */
5794:Middlewares/Third_Party/FatFs/src/ff.c **** 		p[6] = (BYTE)((e_cyl >> 2) + 63);	/* End sector */
5795:Middlewares/Third_Party/FatFs/src/ff.c **** 		p[7] = (BYTE)e_cyl;					/* End cylinder */
5796:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_dword(p + 8, s_part);			/* Start sector in LBA */
5797:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_dword(p + 12, sz_part);			/* Number of sectors */
5798:Middlewares/Third_Party/FatFs/src/ff.c **** 
5799:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Next partition */
5800:Middlewares/Third_Party/FatFs/src/ff.c **** 		b_cyl += p_cyl;
5801:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
5802:Middlewares/Third_Party/FatFs/src/ff.c **** 	st_word(p, 0xAA55);
5803:Middlewares/Third_Party/FatFs/src/ff.c **** 
5804:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Write it to the MBR */
5805:Middlewares/Third_Party/FatFs/src/ff.c **** 	return (disk_write(pdrv, buf, 0, 1) != RES_OK || disk_ioctl(pdrv, CTRL_SYNC, 0) != RES_OK) ? FR_DI
5806:Middlewares/Third_Party/FatFs/src/ff.c **** }
5807:Middlewares/Third_Party/FatFs/src/ff.c **** 
5808:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _MULTI_PARTITION */
5809:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _USE_MKFS && !_FS_READONLY */
5810:Middlewares/Third_Party/FatFs/src/ff.c **** 
5811:Middlewares/Third_Party/FatFs/src/ff.c **** 
5812:Middlewares/Third_Party/FatFs/src/ff.c **** 
5813:Middlewares/Third_Party/FatFs/src/ff.c **** 
5814:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_STRFUNC
5815:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 131


5816:Middlewares/Third_Party/FatFs/src/ff.c **** /* Get a string from the file                                            */
5817:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
5818:Middlewares/Third_Party/FatFs/src/ff.c **** 
5819:Middlewares/Third_Party/FatFs/src/ff.c **** TCHAR* f_gets (
5820:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR* buff,	/* Pointer to the string buffer to read */
5821:Middlewares/Third_Party/FatFs/src/ff.c **** 	int len,		/* Size of string buffer (characters) */
5822:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp			/* Pointer to the file object */
5823:Middlewares/Third_Party/FatFs/src/ff.c **** )
5824:Middlewares/Third_Party/FatFs/src/ff.c **** {
5825:Middlewares/Third_Party/FatFs/src/ff.c **** 	int n = 0;
5826:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR c, *p = buff;
5827:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE s[2];
5828:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT rc;
5829:Middlewares/Third_Party/FatFs/src/ff.c **** 
5830:Middlewares/Third_Party/FatFs/src/ff.c **** 
5831:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (n < len - 1) {	/* Read characters until buffer gets filled */
5832:Middlewares/Third_Party/FatFs/src/ff.c **** #if _LFN_UNICODE
5833:Middlewares/Third_Party/FatFs/src/ff.c **** #if _STRF_ENCODE == 3		/* Read a character in UTF-8 */
5834:Middlewares/Third_Party/FatFs/src/ff.c **** 		f_read(fp, s, 1, &rc);
5835:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rc != 1) break;
5836:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = s[0];
5837:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c >= 0x80) {
5838:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (c < 0xC0) continue;	/* Skip stray trailer */
5839:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (c < 0xE0) {			/* Two-byte sequence (0x80-0x7FF) */
5840:Middlewares/Third_Party/FatFs/src/ff.c **** 				f_read(fp, s, 1, &rc);
5841:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (rc != 1) break;
5842:Middlewares/Third_Party/FatFs/src/ff.c **** 				c = (c & 0x1F) << 6 | (s[0] & 0x3F);
5843:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (c < 0x80) c = '?';	/* Reject invalid code range */
5844:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
5845:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (c < 0xF0) {		/* Three-byte sequence (0x800-0xFFFF) */
5846:Middlewares/Third_Party/FatFs/src/ff.c **** 					f_read(fp, s, 2, &rc);
5847:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (rc != 2) break;
5848:Middlewares/Third_Party/FatFs/src/ff.c **** 					c = c << 12 | (s[0] & 0x3F) << 6 | (s[1] & 0x3F);
5849:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (c < 0x800) c = '?';	/* Reject invalid code range */
5850:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {			/* Reject four-byte sequence */
5851:Middlewares/Third_Party/FatFs/src/ff.c **** 					c = '?';
5852:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
5853:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5854:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5855:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _STRF_ENCODE == 2		/* Read a character in UTF-16BE */
5856:Middlewares/Third_Party/FatFs/src/ff.c **** 		f_read(fp, s, 2, &rc);
5857:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rc != 2) break;
5858:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = s[1] + (s[0] << 8);
5859:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _STRF_ENCODE == 1		/* Read a character in UTF-16LE */
5860:Middlewares/Third_Party/FatFs/src/ff.c **** 		f_read(fp, s, 2, &rc);
5861:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rc != 2) break;
5862:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = s[0] + (s[1] << 8);
5863:Middlewares/Third_Party/FatFs/src/ff.c **** #else						/* Read a character in ANSI/OEM */
5864:Middlewares/Third_Party/FatFs/src/ff.c **** 		f_read(fp, s, 1, &rc);
5865:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rc != 1) break;
5866:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = s[0];
5867:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (IsDBCS1(c)) {
5868:Middlewares/Third_Party/FatFs/src/ff.c **** 			f_read(fp, s, 1, &rc);
5869:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (rc != 1) break;
5870:Middlewares/Third_Party/FatFs/src/ff.c **** 			c = (c << 8) + s[0];
5871:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5872:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = ff_convert(c, 1);	/* OEM -> Unicode */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 132


5873:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!c) c = '?';
5874:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5875:Middlewares/Third_Party/FatFs/src/ff.c **** #else						/* Read a character without conversion */
5876:Middlewares/Third_Party/FatFs/src/ff.c **** 		f_read(fp, s, 1, &rc);
5877:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rc != 1) break;
5878:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = s[0];
5879:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5880:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_USE_STRFUNC == 2 && c == '\r') continue;	/* Strip '\r' */
5881:Middlewares/Third_Party/FatFs/src/ff.c **** 		*p++ = c;
5882:Middlewares/Third_Party/FatFs/src/ff.c **** 		n++;
5883:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == '\n') break;		/* Break on EOL */
5884:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
5885:Middlewares/Third_Party/FatFs/src/ff.c **** 	*p = 0;
5886:Middlewares/Third_Party/FatFs/src/ff.c **** 	return n ? buff : 0;			/* When no data read (eof or error), return with error. */
5887:Middlewares/Third_Party/FatFs/src/ff.c **** }
5888:Middlewares/Third_Party/FatFs/src/ff.c **** 
5889:Middlewares/Third_Party/FatFs/src/ff.c **** 
5890:Middlewares/Third_Party/FatFs/src/ff.c **** 
5891:Middlewares/Third_Party/FatFs/src/ff.c **** 
5892:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
5893:Middlewares/Third_Party/FatFs/src/ff.c **** #include <stdarg.h>
5894:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
5895:Middlewares/Third_Party/FatFs/src/ff.c **** /* Put a character to the file                                           */
5896:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
5897:Middlewares/Third_Party/FatFs/src/ff.c **** 
5898:Middlewares/Third_Party/FatFs/src/ff.c **** typedef struct {
5899:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL *fp;		/* Ptr to the writing file */
5900:Middlewares/Third_Party/FatFs/src/ff.c **** 	int idx, nchr;	/* Write index of buf[] (-1:error), number of chars written */
5901:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE buf[64];	/* Write buffer */
5902:Middlewares/Third_Party/FatFs/src/ff.c **** } putbuff;
5903:Middlewares/Third_Party/FatFs/src/ff.c **** 
5904:Middlewares/Third_Party/FatFs/src/ff.c **** 
5905:Middlewares/Third_Party/FatFs/src/ff.c **** static
5906:Middlewares/Third_Party/FatFs/src/ff.c **** void putc_bfd (		/* Buffered write with code conversion */
5907:Middlewares/Third_Party/FatFs/src/ff.c **** 	putbuff* pb,
5908:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR c
5909:Middlewares/Third_Party/FatFs/src/ff.c **** )
5910:Middlewares/Third_Party/FatFs/src/ff.c **** {
5911:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT bw;
5912:Middlewares/Third_Party/FatFs/src/ff.c **** 	int i;
5913:Middlewares/Third_Party/FatFs/src/ff.c **** 
5914:Middlewares/Third_Party/FatFs/src/ff.c **** 
5915:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (_USE_STRFUNC == 2 && c == '\n') {	 /* LF -> CRLF conversion */
5916:Middlewares/Third_Party/FatFs/src/ff.c **** 		putc_bfd(pb, '\r');
5917:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
5918:Middlewares/Third_Party/FatFs/src/ff.c **** 
5919:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = pb->idx;		/* Write index of pb->buf[] */
5920:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (i < 0) return;
5921:Middlewares/Third_Party/FatFs/src/ff.c **** 
5922:Middlewares/Third_Party/FatFs/src/ff.c **** #if _LFN_UNICODE
5923:Middlewares/Third_Party/FatFs/src/ff.c **** #if _STRF_ENCODE == 3			/* Write a character in UTF-8 */
5924:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (c < 0x80) {				/* 7-bit */
5925:Middlewares/Third_Party/FatFs/src/ff.c **** 		pb->buf[i++] = (BYTE)c;
5926:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
5927:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c < 0x800) {		/* 11-bit */
5928:Middlewares/Third_Party/FatFs/src/ff.c **** 			pb->buf[i++] = (BYTE)(0xC0 | c >> 6);
5929:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {				/* 16-bit */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 133


5930:Middlewares/Third_Party/FatFs/src/ff.c **** 			pb->buf[i++] = (BYTE)(0xE0 | c >> 12);
5931:Middlewares/Third_Party/FatFs/src/ff.c **** 			pb->buf[i++] = (BYTE)(0x80 | (c >> 6 & 0x3F));
5932:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5933:Middlewares/Third_Party/FatFs/src/ff.c **** 		pb->buf[i++] = (BYTE)(0x80 | (c & 0x3F));
5934:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
5935:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _STRF_ENCODE == 2			/* Write a character in UTF-16BE */
5936:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->buf[i++] = (BYTE)(c >> 8);
5937:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->buf[i++] = (BYTE)c;
5938:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _STRF_ENCODE == 1			/* Write a character in UTF-16LE */
5939:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->buf[i++] = (BYTE)c;
5940:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->buf[i++] = (BYTE)(c >> 8);
5941:Middlewares/Third_Party/FatFs/src/ff.c **** #else							/* Write a character in ANSI/OEM */
5942:Middlewares/Third_Party/FatFs/src/ff.c **** 	c = ff_convert(c, 0);	/* Unicode -> OEM */
5943:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!c) c = '?';
5944:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (c >= 0x100)
5945:Middlewares/Third_Party/FatFs/src/ff.c **** 		pb->buf[i++] = (BYTE)(c >> 8);
5946:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->buf[i++] = (BYTE)c;
5947:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5948:Middlewares/Third_Party/FatFs/src/ff.c **** #else							/* Write a character without conversion */
5949:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->buf[i++] = (BYTE)c;
5950:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5951:Middlewares/Third_Party/FatFs/src/ff.c **** 
5952:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (i >= (int)(sizeof pb->buf) - 3) {	/* Write buffered characters to the file */
5953:Middlewares/Third_Party/FatFs/src/ff.c **** 		f_write(pb->fp, pb->buf, (UINT)i, &bw);
5954:Middlewares/Third_Party/FatFs/src/ff.c **** 		i = (bw == (UINT)i) ? 0 : -1;
5955:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
5956:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->idx = i;
5957:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->nchr++;
5958:Middlewares/Third_Party/FatFs/src/ff.c **** }
5959:Middlewares/Third_Party/FatFs/src/ff.c **** 
5960:Middlewares/Third_Party/FatFs/src/ff.c **** 
5961:Middlewares/Third_Party/FatFs/src/ff.c **** static
5962:Middlewares/Third_Party/FatFs/src/ff.c **** int putc_flush (		/* Flush left characters in the buffer */
5963:Middlewares/Third_Party/FatFs/src/ff.c **** 	putbuff* pb
5964:Middlewares/Third_Party/FatFs/src/ff.c **** )
5965:Middlewares/Third_Party/FatFs/src/ff.c **** {
5966:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT nw;
5967:Middlewares/Third_Party/FatFs/src/ff.c **** 
5968:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (   pb->idx >= 0	/* Flush buffered characters to the file */
5969:Middlewares/Third_Party/FatFs/src/ff.c **** 		&& f_write(pb->fp, pb->buf, (UINT)pb->idx, &nw) == FR_OK
5970:Middlewares/Third_Party/FatFs/src/ff.c **** 		&& (UINT)pb->idx == nw) return pb->nchr;
5971:Middlewares/Third_Party/FatFs/src/ff.c **** 	return EOF;
5972:Middlewares/Third_Party/FatFs/src/ff.c **** }
5973:Middlewares/Third_Party/FatFs/src/ff.c **** 
5974:Middlewares/Third_Party/FatFs/src/ff.c **** 
5975:Middlewares/Third_Party/FatFs/src/ff.c **** static
5976:Middlewares/Third_Party/FatFs/src/ff.c **** void putc_init (		/* Initialize write buffer */
5977:Middlewares/Third_Party/FatFs/src/ff.c **** 	putbuff* pb,
5978:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp
5979:Middlewares/Third_Party/FatFs/src/ff.c **** )
5980:Middlewares/Third_Party/FatFs/src/ff.c **** {
 1560              		.loc 1 5980 0
 1561              		.cfi_startproc
 1562              		@ args = 0, pretend = 0, frame = 0
 1563              		@ frame_needed = 0, uses_anonymous_args = 0
 1564              		@ link register save eliminated.
 1565              	.LVL220:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 134


5981:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->fp = fp;
 1566              		.loc 1 5981 0
 1567 0000 0160     		str	r1, [r0]
5982:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->nchr = pb->idx = 0;
 1568              		.loc 1 5982 0
 1569 0002 0023     		movs	r3, #0
 1570 0004 4360     		str	r3, [r0, #4]
 1571 0006 8360     		str	r3, [r0, #8]
 1572 0008 7047     		bx	lr
 1573              		.cfi_endproc
 1574              	.LFE208:
 1576              		.section	.text.lock_fs,"ax",%progbits
 1577              		.align	1
 1578              		.syntax unified
 1579              		.thumb
 1580              		.thumb_func
 1581              		.fpu fpv5-sp-d16
 1583              	lock_fs:
 1584              	.LFB149:
 745:Middlewares/Third_Party/FatFs/src/ff.c **** 	return (fs && ff_req_grant(fs->sobj)) ? 1 : 0;
 1585              		.loc 1 745 0
 1586              		.cfi_startproc
 1587              		@ args = 0, pretend = 0, frame = 0
 1588              		@ frame_needed = 0, uses_anonymous_args = 0
 1589              	.LVL221:
 1590 0000 08B5     		push	{r3, lr}
 1591              	.LCFI22:
 1592              		.cfi_def_cfa_offset 8
 1593              		.cfi_offset 3, -8
 1594              		.cfi_offset 14, -4
 746:Middlewares/Third_Party/FatFs/src/ff.c **** }
 1595              		.loc 1 746 0
 1596 0002 40B1     		cbz	r0, .L169
 746:Middlewares/Third_Party/FatFs/src/ff.c **** }
 1597              		.loc 1 746 0 is_stmt 0 discriminator 1
 1598 0004 0069     		ldr	r0, [r0, #16]
 1599              	.LVL222:
 1600 0006 FFF7FEFF 		bl	ff_req_grant
 1601              	.LVL223:
 1602 000a 0346     		mov	r3, r0
 1603 000c 08B9     		cbnz	r0, .L171
 1604              	.L167:
 747:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1605              		.loc 1 747 0 is_stmt 1
 1606 000e 1846     		mov	r0, r3
 1607 0010 08BD     		pop	{r3, pc}
 1608              	.L171:
 746:Middlewares/Third_Party/FatFs/src/ff.c **** }
 1609              		.loc 1 746 0
 1610 0012 0123     		movs	r3, #1
 1611 0014 FBE7     		b	.L167
 1612              	.LVL224:
 1613              	.L169:
 1614 0016 0023     		movs	r3, #0
 1615 0018 F9E7     		b	.L167
 1616              		.cfi_endproc
 1617              	.LFE149:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 135


 1619              		.section	.text.validate,"ax",%progbits
 1620              		.align	1
 1621              		.syntax unified
 1622              		.thumb
 1623              		.thumb_func
 1624              		.fpu fpv5-sp-d16
 1626              	validate:
 1627              	.LFB185:
3220:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 1628              		.loc 1 3220 0
 1629              		.cfi_startproc
 1630              		@ args = 0, pretend = 0, frame = 0
 1631              		@ frame_needed = 0, uses_anonymous_args = 0
 1632              	.LVL225:
 1633 0000 38B5     		push	{r3, r4, r5, lr}
 1634              	.LCFI23:
 1635              		.cfi_def_cfa_offset 16
 1636              		.cfi_offset 3, -16
 1637              		.cfi_offset 4, -12
 1638              		.cfi_offset 5, -8
 1639              		.cfi_offset 14, -4
 1640 0002 0C46     		mov	r4, r1
3223:Middlewares/Third_Party/FatFs/src/ff.c **** 		*fs = 0;
 1641              		.loc 1 3223 0
 1642 0004 20B1     		cbz	r0, .L173
 1643 0006 0546     		mov	r5, r0
3223:Middlewares/Third_Party/FatFs/src/ff.c **** 		*fs = 0;
 1644              		.loc 1 3223 0 is_stmt 0 discriminator 1
 1645 0008 0368     		ldr	r3, [r0]
 1646 000a 0BB1     		cbz	r3, .L173
3223:Middlewares/Third_Party/FatFs/src/ff.c **** 		*fs = 0;
 1647              		.loc 1 3223 0 discriminator 2
 1648 000c 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 1649 000e 1AB9     		cbnz	r2, .L178
 1650              	.LVL226:
 1651              	.L173:
3224:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_INVALID_OBJECT;	/* The object is invalid */
 1652              		.loc 1 3224 0 is_stmt 1
 1653 0010 0023     		movs	r3, #0
 1654 0012 2360     		str	r3, [r4]
 1655              	.LVL227:
3225:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
 1656              		.loc 1 3225 0
 1657 0014 0920     		movs	r0, #9
 1658 0016 38BD     		pop	{r3, r4, r5, pc}
 1659              	.LVL228:
 1660              	.L178:
3223:Middlewares/Third_Party/FatFs/src/ff.c **** 		*fs = 0;
 1661              		.loc 1 3223 0 discriminator 3
 1662 0018 D988     		ldrh	r1, [r3, #6]
 1663              	.LVL229:
 1664 001a 8288     		ldrh	r2, [r0, #4]
 1665 001c 9142     		cmp	r1, r2
 1666 001e F7D1     		bne	.L173
3223:Middlewares/Third_Party/FatFs/src/ff.c **** 		*fs = 0;
 1667              		.loc 1 3223 0 is_stmt 0 discriminator 4
 1668 0020 5878     		ldrb	r0, [r3, #1]	@ zero_extendqisi2
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 136


 1669              	.LVL230:
 1670 0022 FFF7FEFF 		bl	disk_status
 1671              	.LVL231:
 1672 0026 10F0010F 		tst	r0, #1
 1673 002a F1D1     		bne	.L173
3227:Middlewares/Third_Party/FatFs/src/ff.c **** 		ENTER_FF(obj->fs);		/* Lock file system */
 1674              		.loc 1 3227 0 is_stmt 1
 1675 002c 2B68     		ldr	r3, [r5]
 1676 002e 2360     		str	r3, [r4]
3228:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_OK;			/* Valid object */
 1677              		.loc 1 3228 0
 1678 0030 2868     		ldr	r0, [r5]
 1679 0032 FFF7FEFF 		bl	lock_fs
 1680              	.LVL232:
 1681 0036 08B9     		cbnz	r0, .L176
 1682 0038 0F20     		movs	r0, #15
 1683 003a 38BD     		pop	{r3, r4, r5, pc}
 1684              	.LVL233:
 1685              	.L176:
3229:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 1686              		.loc 1 3229 0
 1687 003c 0020     		movs	r0, #0
3232:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1688              		.loc 1 3232 0
 1689 003e 38BD     		pop	{r3, r4, r5, pc}
 1690              		.cfi_endproc
 1691              	.LFE185:
 1693              		.section	.text.sync_window,"ax",%progbits
 1694              		.align	1
 1695              		.syntax unified
 1696              		.thumb
 1697              		.thumb_func
 1698              		.fpu fpv5-sp-d16
 1700              	sync_window:
 1701              	.LFB156:
 886:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD wsect;
 1702              		.loc 1 886 0
 1703              		.cfi_startproc
 1704              		@ args = 0, pretend = 0, frame = 0
 1705              		@ frame_needed = 0, uses_anonymous_args = 0
 1706              	.LVL234:
 1707 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1708              	.LCFI24:
 1709              		.cfi_def_cfa_offset 24
 1710              		.cfi_offset 3, -24
 1711              		.cfi_offset 4, -20
 1712              		.cfi_offset 5, -16
 1713              		.cfi_offset 6, -12
 1714              		.cfi_offset 7, -8
 1715              		.cfi_offset 14, -4
 1716              	.LVL235:
 892:Middlewares/Third_Party/FatFs/src/ff.c **** 		wsect = fs->winsect;	/* Current sector number */
 1717              		.loc 1 892 0
 1718 0002 C378     		ldrb	r3, [r0, #3]	@ zero_extendqisi2
 1719 0004 0BB9     		cbnz	r3, .L187
 889:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1720              		.loc 1 889 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 137


 1721 0006 0020     		movs	r0, #0
 1722              	.LVL236:
 1723 0008 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1724              	.LVL237:
 1725              	.L187:
 1726 000a 0446     		mov	r4, r0
 893:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK) {
 1727              		.loc 1 893 0
 1728 000c 866B     		ldr	r6, [r0, #56]
 1729              	.LVL238:
 894:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_DISK_ERR;
 1730              		.loc 1 894 0
 1731 000e 00F13C07 		add	r7, r0, #60
 1732 0012 0123     		movs	r3, #1
 1733 0014 3246     		mov	r2, r6
 1734 0016 3946     		mov	r1, r7
 1735 0018 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 1736              	.LVL239:
 1737 001a FFF7FEFF 		bl	disk_write
 1738              	.LVL240:
 1739 001e A8B9     		cbnz	r0, .L184
 897:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (wsect - fs->fatbase < fs->fsize) {		/* Is it in the FAT area? */
 1740              		.loc 1 897 0
 1741 0020 0023     		movs	r3, #0
 1742 0022 E370     		strb	r3, [r4, #3]
 898:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (nf = fs->n_fats; nf >= 2; nf--) {	/* Reflect the change to all FAT copies */
 1743              		.loc 1 898 0
 1744 0024 E36A     		ldr	r3, [r4, #44]
 1745 0026 F31A     		subs	r3, r6, r3
 1746 0028 626A     		ldr	r2, [r4, #36]
 1747 002a 9342     		cmp	r3, r2
 1748 002c 10D2     		bcs	.L185
 899:Middlewares/Third_Party/FatFs/src/ff.c **** 					wsect += fs->fsize;
 1749              		.loc 1 899 0
 1750 002e A578     		ldrb	r5, [r4, #2]	@ zero_extendqisi2
 1751              	.LVL241:
 1752 0030 08E0     		b	.L181
 1753              	.L182:
 900:Middlewares/Third_Party/FatFs/src/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 1754              		.loc 1 900 0 discriminator 3
 1755 0032 636A     		ldr	r3, [r4, #36]
 1756 0034 1E44     		add	r6, r6, r3
 1757              	.LVL242:
 901:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 1758              		.loc 1 901 0 discriminator 3
 1759 0036 0123     		movs	r3, #1
 1760 0038 3246     		mov	r2, r6
 1761 003a 3946     		mov	r1, r7
 1762 003c 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 1763 003e FFF7FEFF 		bl	disk_write
 1764              	.LVL243:
 899:Middlewares/Third_Party/FatFs/src/ff.c **** 					wsect += fs->fsize;
 1765              		.loc 1 899 0 discriminator 3
 1766 0042 013D     		subs	r5, r5, #1
 1767              	.LVL244:
 1768              	.L181:
 899:Middlewares/Third_Party/FatFs/src/ff.c **** 					wsect += fs->fsize;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 138


 1769              		.loc 1 899 0 is_stmt 0 discriminator 1
 1770 0044 012D     		cmp	r5, #1
 1771 0046 F4D8     		bhi	.L182
 889:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1772              		.loc 1 889 0 is_stmt 1
 1773 0048 0020     		movs	r0, #0
 1774 004a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1775              	.LVL245:
 1776              	.L184:
 895:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 1777              		.loc 1 895 0
 1778 004c 0120     		movs	r0, #1
 1779 004e F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1780              	.LVL246:
 1781              	.L185:
 889:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1782              		.loc 1 889 0
 1783 0050 0020     		movs	r0, #0
 1784              	.LVL247:
 907:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 1785              		.loc 1 907 0
 1786 0052 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1787              		.cfi_endproc
 1788              	.LFE156:
 1790              		.section	.text.move_window,"ax",%progbits
 1791              		.align	1
 1792              		.syntax unified
 1793              		.thumb
 1794              		.thumb_func
 1795              		.fpu fpv5-sp-d16
 1797              	move_window:
 1798              	.LFB157:
 916:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res = FR_OK;
 1799              		.loc 1 916 0
 1800              		.cfi_startproc
 1801              		@ args = 0, pretend = 0, frame = 0
 1802              		@ frame_needed = 0, uses_anonymous_args = 0
 1803              	.LVL248:
 1804 0000 70B5     		push	{r4, r5, r6, lr}
 1805              	.LCFI25:
 1806              		.cfi_def_cfa_offset 16
 1807              		.cfi_offset 4, -16
 1808              		.cfi_offset 5, -12
 1809              		.cfi_offset 6, -8
 1810              		.cfi_offset 14, -4
 1811              	.LVL249:
 920:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 1812              		.loc 1 920 0
 1813 0002 836B     		ldr	r3, [r0, #56]
 1814 0004 8B42     		cmp	r3, r1
 1815 0006 14D0     		beq	.L191
 1816 0008 0446     		mov	r4, r0
 1817 000a 0D46     		mov	r5, r1
 922:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 1818              		.loc 1 922 0
 1819 000c FFF7FEFF 		bl	sync_window
 1820              	.LVL250:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 139


 924:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK) {
 1821              		.loc 1 924 0
 1822 0010 0646     		mov	r6, r0
 1823 0012 08B1     		cbz	r0, .L194
 1824              	.LVL251:
 1825              	.L189:
 933:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1826              		.loc 1 933 0
 1827 0014 3046     		mov	r0, r6
 1828 0016 70BD     		pop	{r4, r5, r6, pc}
 1829              	.LVL252:
 1830              	.L194:
 925:Middlewares/Third_Party/FatFs/src/ff.c **** 				sector = 0xFFFFFFFF;	/* Invalidate window if data is not reliable */
 1831              		.loc 1 925 0
 1832 0018 0123     		movs	r3, #1
 1833 001a 2A46     		mov	r2, r5
 1834 001c 04F13C01 		add	r1, r4, #60
 1835 0020 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 1836              	.LVL253:
 1837 0022 FFF7FEFF 		bl	disk_read
 1838              	.LVL254:
 1839 0026 10B1     		cbz	r0, .L190
 927:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 1840              		.loc 1 927 0
 1841 0028 0126     		movs	r6, #1
 926:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_DISK_ERR;
 1842              		.loc 1 926 0
 1843 002a 4FF0FF35 		mov	r5, #-1
 1844              	.LVL255:
 1845              	.L190:
 929:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 1846              		.loc 1 929 0
 1847 002e A563     		str	r5, [r4, #56]
 1848 0030 F0E7     		b	.L189
 1849              	.LVL256:
 1850              	.L191:
 917:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1851              		.loc 1 917 0
 1852 0032 0026     		movs	r6, #0
 1853 0034 EEE7     		b	.L189
 1854              		.cfi_endproc
 1855              	.LFE157:
 1857              		.section	.text.check_fs,"ax",%progbits
 1858              		.align	1
 1859              		.syntax unified
 1860              		.thumb
 1861              		.thumb_func
 1862              		.fpu fpv5-sp-d16
 1864              	check_fs:
 1865              	.LFB183:
2969:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->wflag = 0; fs->winsect = 0xFFFFFFFF;		/* Invaidate window */
 1866              		.loc 1 2969 0
 1867              		.cfi_startproc
 1868              		@ args = 0, pretend = 0, frame = 0
 1869              		@ frame_needed = 0, uses_anonymous_args = 0
 1870              	.LVL257:
 1871 0000 10B5     		push	{r4, lr}
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 140


 1872              	.LCFI26:
 1873              		.cfi_def_cfa_offset 8
 1874              		.cfi_offset 4, -8
 1875              		.cfi_offset 14, -4
 1876 0002 0446     		mov	r4, r0
2970:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (move_window(fs, sect) != FR_OK) return 4;	/* Load boot record */
 1877              		.loc 1 2970 0
 1878 0004 0023     		movs	r3, #0
 1879 0006 C370     		strb	r3, [r0, #3]
 1880 0008 4FF0FF33 		mov	r3, #-1
 1881 000c 8363     		str	r3, [r0, #56]
2971:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1882              		.loc 1 2971 0
 1883 000e FFF7FEFF 		bl	move_window
 1884              	.LVL258:
 1885 0012 08B1     		cbz	r0, .L204
 1886 0014 0420     		movs	r0, #4
 1887 0016 10BD     		pop	{r4, pc}
 1888              	.LVL259:
 1889              	.L204:
2973:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1890              		.loc 1 2973 0
 1891 0018 04F23A20 		addw	r0, r4, #570
 1892 001c FFF7FEFF 		bl	ld_word
 1893              	.LVL260:
 1894 0020 4AF65523 		movw	r3, #43605
 1895 0024 9842     		cmp	r0, r3
 1896 0026 01D0     		beq	.L205
 1897 0028 0320     		movs	r0, #3
 1898 002a 10BD     		pop	{r4, pc}
 1899              	.LVL261:
 1900              	.L205:
2975:Middlewares/Third_Party/FatFs/src/ff.c **** 		if ((ld_dword(fs->win + BS_FilSysType) & 0xFFFFFF) == 0x544146) return 0;	/* Check "FAT" string *
 1901              		.loc 1 2975 0
 1902 002c 94F83C30 		ldrb	r3, [r4, #60]	@ zero_extendqisi2
 1903 0030 E92B     		cmp	r3, #233
 1904 0032 07D0     		beq	.L197
2975:Middlewares/Third_Party/FatFs/src/ff.c **** 		if ((ld_dword(fs->win + BS_FilSysType) & 0xFFFFFF) == 0x544146) return 0;	/* Check "FAT" string *
 1905              		.loc 1 2975 0 is_stmt 0 discriminator 1
 1906 0034 E36B     		ldr	r3, [r4, #60]
 1907 0036 03F0FF13 		and	r3, r3, #16711935
 1908 003a 0D4A     		ldr	r2, .L207
 1909 003c 9342     		cmp	r3, r2
 1910 003e 01D0     		beq	.L197
2982:Middlewares/Third_Party/FatFs/src/ff.c **** }
 1911              		.loc 1 2982 0 is_stmt 1
 1912 0040 0220     		movs	r0, #2
 1913 0042 10BD     		pop	{r4, pc}
 1914              	.LVL262:
 1915              	.L197:
2976:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ld_dword(fs->win + BS_FilSysType32) == 0x33544146) return 0;			/* Check "FAT3" string */
 1916              		.loc 1 2976 0
 1917 0044 04F17200 		add	r0, r4, #114
 1918 0048 FFF7FEFF 		bl	ld_dword
 1919              	.LVL263:
 1920 004c 20F07F40 		bic	r0, r0, #-16777216
 1921 0050 084B     		ldr	r3, .L207+4
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 141


 1922 0052 9842     		cmp	r0, r3
 1923 0054 0AD0     		beq	.L201
2977:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 1924              		.loc 1 2977 0
 1925 0056 04F18E00 		add	r0, r4, #142
 1926 005a FFF7FEFF 		bl	ld_dword
 1927              	.LVL264:
 1928 005e 064B     		ldr	r3, .L207+8
 1929 0060 9842     		cmp	r0, r3
 1930 0062 01D0     		beq	.L206
2982:Middlewares/Third_Party/FatFs/src/ff.c **** }
 1931              		.loc 1 2982 0
 1932 0064 0220     		movs	r0, #2
2983:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1933              		.loc 1 2983 0
 1934 0066 10BD     		pop	{r4, pc}
 1935              	.LVL265:
 1936              	.L206:
2977:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 1937              		.loc 1 2977 0
 1938 0068 0020     		movs	r0, #0
 1939 006a 10BD     		pop	{r4, pc}
 1940              	.LVL266:
 1941              	.L201:
2976:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ld_dword(fs->win + BS_FilSysType32) == 0x33544146) return 0;			/* Check "FAT3" string */
 1942              		.loc 1 2976 0
 1943 006c 0020     		movs	r0, #0
 1944 006e 10BD     		pop	{r4, pc}
 1945              	.LVL267:
 1946              	.L208:
 1947              		.align	2
 1948              	.L207:
 1949 0070 EB009000 		.word	9437419
 1950 0074 46415400 		.word	5521734
 1951 0078 46415433 		.word	861159750
 1952              		.cfi_endproc
 1953              	.LFE183:
 1955              		.section	.text.find_volume,"ax",%progbits
 1956              		.align	1
 1957              		.syntax unified
 1958              		.thumb
 1959              		.thumb_func
 1960              		.fpu fpv5-sp-d16
 1962              	find_volume:
 1963              	.LFB184:
2998:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE fmt, *pt;
 1964              		.loc 1 2998 0
 1965              		.cfi_startproc
 1966              		@ args = 0, pretend = 0, frame = 16
 1967              		@ frame_needed = 0, uses_anonymous_args = 0
 1968              	.LVL268:
 1969 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 1970              	.LCFI27:
 1971              		.cfi_def_cfa_offset 32
 1972              		.cfi_offset 4, -32
 1973              		.cfi_offset 5, -28
 1974              		.cfi_offset 6, -24
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 142


 1975              		.cfi_offset 7, -20
 1976              		.cfi_offset 8, -16
 1977              		.cfi_offset 9, -12
 1978              		.cfi_offset 10, -8
 1979              		.cfi_offset 14, -4
 1980 0004 84B0     		sub	sp, sp, #16
 1981              	.LCFI28:
 1982              		.cfi_def_cfa_offset 48
 1983 0006 0C46     		mov	r4, r1
 1984 0008 1746     		mov	r7, r2
3009:Middlewares/Third_Party/FatFs/src/ff.c **** 	vol = get_ldnumber(path);
 1985              		.loc 1 3009 0
 1986 000a 0023     		movs	r3, #0
 1987 000c 0B60     		str	r3, [r1]
3010:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
 1988              		.loc 1 3010 0
 1989 000e FFF7FEFF 		bl	get_ldnumber
 1990              	.LVL269:
3011:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1991              		.loc 1 3011 0
 1992 0012 061E     		subs	r6, r0, #0
 1993 0014 C0F23E81 		blt	.L227
3014:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!fs) return FR_NOT_ENABLED;		/* Is the file system object available? */
 1994              		.loc 1 3014 0
 1995 0018 AD4B     		ldr	r3, .L262
 1996 001a 53F82650 		ldr	r5, [r3, r6, lsl #2]
 1997              	.LVL270:
3015:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1998              		.loc 1 3015 0
 1999 001e 002D     		cmp	r5, #0
 2000 0020 00F03C81 		beq	.L228
3017:Middlewares/Third_Party/FatFs/src/ff.c **** 	*rfs = fs;							/* Return pointer to the file system object */
 2001              		.loc 1 3017 0
 2002 0024 2846     		mov	r0, r5
 2003              	.LVL271:
 2004 0026 FFF7FEFF 		bl	lock_fs
 2005              	.LVL272:
 2006 002a 08B9     		cbnz	r0, .L254
 2007 002c 0F20     		movs	r0, #15
 2008 002e 32E1     		b	.L210
 2009              	.L254:
3018:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2010              		.loc 1 3018 0
 2011 0030 2560     		str	r5, [r4]
3020:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type) {					/* If the volume has been mounted */
 2012              		.loc 1 3020 0
 2013 0032 07F0FE07 		and	r7, r7, #254
 2014              	.LVL273:
3021:Middlewares/Third_Party/FatFs/src/ff.c **** 		stat = disk_status(fs->drv);
 2015              		.loc 1 3021 0
 2016 0036 2B78     		ldrb	r3, [r5]	@ zero_extendqisi2
 2017 0038 7BB1     		cbz	r3, .L211
3022:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!(stat & STA_NOINIT)) {		/* and the physical drive is kept initialized */
 2018              		.loc 1 3022 0
 2019 003a 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 2020 003c FFF7FEFF 		bl	disk_status
 2021              	.LVL274:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 143


3023:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!_FS_READONLY && mode && (stat & STA_PROTECT)) {	/* Check write protection if needed */
 2022              		.loc 1 3023 0
 2023 0040 10F0010F 		tst	r0, #1
 2024 0044 09D1     		bne	.L211
3024:Middlewares/Third_Party/FatFs/src/ff.c **** 				return FR_WRITE_PROTECTED;
 2025              		.loc 1 3024 0
 2026 0046 002F     		cmp	r7, #0
 2027 0048 00F02A81 		beq	.L230
3024:Middlewares/Third_Party/FatFs/src/ff.c **** 				return FR_WRITE_PROTECTED;
 2028              		.loc 1 3024 0 is_stmt 0 discriminator 1
 2029 004c 10F0040F 		tst	r0, #4
 2030 0050 01D0     		beq	.L255
3025:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 2031              		.loc 1 3025 0 is_stmt 1
 2032 0052 0A20     		movs	r0, #10
 2033              	.LVL275:
 2034 0054 1FE1     		b	.L210
 2035              	.LVL276:
 2036              	.L255:
3027:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2037              		.loc 1 3027 0
 2038 0056 0020     		movs	r0, #0
 2039              	.LVL277:
 2040 0058 1DE1     		b	.L210
 2041              	.L211:
3034:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->drv = LD2PD(vol);				/* Bind the logical drive and a physical drive */
 2042              		.loc 1 3034 0
 2043 005a 0023     		movs	r3, #0
 2044 005c 2B70     		strb	r3, [r5]
3035:Middlewares/Third_Party/FatFs/src/ff.c **** 	stat = disk_initialize(fs->drv);	/* Initialize the physical drive */
 2045              		.loc 1 3035 0
 2046 005e F0B2     		uxtb	r0, r6
 2047 0060 6870     		strb	r0, [r5, #1]
3036:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_NOINIT) { 			/* Check if the initialization succeeded */
 2048              		.loc 1 3036 0
 2049 0062 FFF7FEFF 		bl	disk_initialize
 2050              	.LVL278:
3037:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_NOT_READY;			/* Failed to initialize due to no medium or hard error */
 2051              		.loc 1 3037 0
 2052 0066 10F0010F 		tst	r0, #1
 2053 006a 01D0     		beq	.L256
3038:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 2054              		.loc 1 3038 0
 2055 006c 0320     		movs	r0, #3
 2056              	.LVL279:
 2057 006e 12E1     		b	.L210
 2058              	.LVL280:
 2059              	.L256:
3040:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_WRITE_PROTECTED;
 2060              		.loc 1 3040 0
 2061 0070 27B1     		cbz	r7, .L212
3040:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_WRITE_PROTECTED;
 2062              		.loc 1 3040 0 is_stmt 0 discriminator 1
 2063 0072 10F0040F 		tst	r0, #4
 2064 0076 01D0     		beq	.L212
3041:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 2065              		.loc 1 3041 0 is_stmt 1
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 144


 2066 0078 0A20     		movs	r0, #10
 2067              	.LVL281:
 2068 007a 0CE1     		b	.L210
 2069              	.LVL282:
 2070              	.L212:
3050:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == 2 || (fmt < 2 && LD2PT(vol) != 0)) {	/* Not an FAT-VBR or forced partition number */
 2071              		.loc 1 3050 0
 2072 007c 0021     		movs	r1, #0
 2073 007e 2846     		mov	r0, r5
 2074              	.LVL283:
 2075 0080 FFF7FEFF 		bl	check_fs
 2076              	.LVL284:
3051:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = 0; i < 4; i++) {		/* Get partition offset */
 2077              		.loc 1 3051 0
 2078 0084 0228     		cmp	r0, #2
 2079 0086 1DD0     		beq	.L234
3049:Middlewares/Third_Party/FatFs/src/ff.c **** 	fmt = check_fs(fs, bsect);			/* Load sector 0 and check if it is an FAT-VBR as SFD */
 2080              		.loc 1 3049 0
 2081 0088 0026     		movs	r6, #0
 2082              	.LVL285:
 2083              	.L214:
3063:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt >= 2) return FR_NO_FILESYSTEM;	/* No FAT volume is found */
 2084              		.loc 1 3063 0
 2085 008a 0428     		cmp	r0, #4
 2086 008c 00F00A81 		beq	.L237
3064:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2087              		.loc 1 3064 0
 2088 0090 0128     		cmp	r0, #1
 2089 0092 2CD9     		bls	.L257
 2090 0094 0D20     		movs	r0, #13
 2091              	.LVL286:
 2092 0096 FEE0     		b	.L210
 2093              	.LVL287:
 2094              	.L235:
3054:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2095              		.loc 1 3054 0
 2096 0098 0020     		movs	r0, #0
 2097              	.LVL288:
 2098              	.L215:
3054:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2099              		.loc 1 3054 0 is_stmt 0 discriminator 4
 2100 009a 04AB     		add	r3, sp, #16
 2101 009c 03EB8403 		add	r3, r3, r4, lsl #2
 2102 00a0 43F8100C 		str	r0, [r3, #-16]
3052:Middlewares/Third_Party/FatFs/src/ff.c **** 			pt = fs->win + (MBR_Table + i * SZ_PTE);
 2103              		.loc 1 3052 0 is_stmt 1 discriminator 4
 2104 00a4 0134     		adds	r4, r4, #1
 2105              	.LVL289:
 2106              	.L213:
3052:Middlewares/Third_Party/FatFs/src/ff.c **** 			pt = fs->win + (MBR_Table + i * SZ_PTE);
 2107              		.loc 1 3052 0 is_stmt 0 discriminator 2
 2108 00a6 032C     		cmp	r4, #3
 2109 00a8 0ED8     		bhi	.L258
3053:Middlewares/Third_Party/FatFs/src/ff.c **** 			br[i] = pt[PTE_System] ? ld_dword(pt + PTE_StLba) : 0;
 2110              		.loc 1 3053 0 is_stmt 1
 2111 00aa 05F13C00 		add	r0, r5, #60
 2112 00ae 2301     		lsls	r3, r4, #4
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 145


 2113 00b0 03F5DF73 		add	r3, r3, #446
 2114 00b4 1844     		add	r0, r0, r3
 2115              	.LVL290:
3054:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2116              		.loc 1 3054 0
 2117 00b6 0379     		ldrb	r3, [r0, #4]	@ zero_extendqisi2
 2118 00b8 002B     		cmp	r3, #0
 2119 00ba EDD0     		beq	.L235
3054:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2120              		.loc 1 3054 0 is_stmt 0 discriminator 1
 2121 00bc 0830     		adds	r0, r0, #8
 2122              	.LVL291:
 2123 00be FFF7FEFF 		bl	ld_dword
 2124              	.LVL292:
 2125 00c2 EAE7     		b	.L215
 2126              	.LVL293:
 2127              	.L234:
 2128 00c4 0024     		movs	r4, #0
 2129              	.LVL294:
 2130 00c6 EEE7     		b	.L213
 2131              	.LVL295:
 2132              	.L258:
 2133 00c8 0024     		movs	r4, #0
 2134              	.LVL296:
 2135              	.L218:
3059:Middlewares/Third_Party/FatFs/src/ff.c **** 			fmt = bsect ? check_fs(fs, bsect) : 3;	/* Check the partition */
 2136              		.loc 1 3059 0 is_stmt 1
 2137 00ca 04AB     		add	r3, sp, #16
 2138 00cc 03EB8403 		add	r3, r3, r4, lsl #2
 2139 00d0 53F8106C 		ldr	r6, [r3, #-16]
 2140              	.LVL297:
3060:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (LD2PT(vol) == 0 && fmt >= 2 && ++i < 4);
 2141              		.loc 1 3060 0
 2142 00d4 36B9     		cbnz	r6, .L259
 2143 00d6 0320     		movs	r0, #3
 2144              	.L217:
 2145              	.LVL298:
3061:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 2146              		.loc 1 3061 0 discriminator 4
 2147 00d8 0128     		cmp	r0, #1
 2148 00da D6D9     		bls	.L214
3061:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 2149              		.loc 1 3061 0 is_stmt 0 discriminator 1
 2150 00dc 0134     		adds	r4, r4, #1
 2151              	.LVL299:
 2152 00de 032C     		cmp	r4, #3
 2153 00e0 F3D9     		bls	.L218
 2154 00e2 D2E7     		b	.L214
 2155              	.LVL300:
 2156              	.L259:
3060:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (LD2PT(vol) == 0 && fmt >= 2 && ++i < 4);
 2157              		.loc 1 3060 0 is_stmt 1 discriminator 1
 2158 00e4 3146     		mov	r1, r6
 2159 00e6 2846     		mov	r0, r5
 2160 00e8 FFF7FEFF 		bl	check_fs
 2161              	.LVL301:
 2162 00ec F4E7     		b	.L217
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 146


 2163              	.LVL302:
 2164              	.L257:
3116:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2165              		.loc 1 3116 0
 2166 00ee 05F14700 		add	r0, r5, #71
 2167              	.LVL303:
 2168 00f2 FFF7FEFF 		bl	ld_word
 2169              	.LVL304:
 2170 00f6 B0F5007F 		cmp	r0, #512
 2171 00fa 01D0     		beq	.L260
 2172 00fc 0D20     		movs	r0, #13
 2173 00fe CAE0     		b	.L210
 2174              	.L260:
3118:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fasize == 0) fasize = ld_dword(fs->win + BPB_FATSz32);
 2175              		.loc 1 3118 0
 2176 0100 05F15200 		add	r0, r5, #82
 2177 0104 FFF7FEFF 		bl	ld_word
 2178              	.LVL305:
 2179 0108 8046     		mov	r8, r0
 2180              	.LVL306:
3119:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsize = fasize;
 2181              		.loc 1 3119 0
 2182 010a 20B9     		cbnz	r0, .L219
3119:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsize = fasize;
 2183              		.loc 1 3119 0 is_stmt 0 discriminator 1
 2184 010c 05F16000 		add	r0, r5, #96
 2185              	.LVL307:
 2186 0110 FFF7FEFF 		bl	ld_dword
 2187              	.LVL308:
 2188 0114 8046     		mov	r8, r0
 2189              	.LVL309:
 2190              	.L219:
3120:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2191              		.loc 1 3120 0 is_stmt 1
 2192 0116 C5F82480 		str	r8, [r5, #36]
3122:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->n_fats != 1 && fs->n_fats != 2) return FR_NO_FILESYSTEM;	/* (Must be 1 or 2) */
 2193              		.loc 1 3122 0
 2194 011a 95F84C90 		ldrb	r9, [r5, #76]	@ zero_extendqisi2
 2195 011e 85F80290 		strb	r9, [r5, #2]
3123:Middlewares/Third_Party/FatFs/src/ff.c **** 		fasize *= fs->n_fats;							/* Number of sectors for FAT area */
 2196              		.loc 1 3123 0
 2197 0122 09F1FF33 		add	r3, r9, #-1
 2198 0126 DBB2     		uxtb	r3, r3
 2199 0128 012B     		cmp	r3, #1
 2200 012a 01D9     		bls	.L261
 2201 012c 0D20     		movs	r0, #13
 2202              	.LVL310:
 2203 012e B2E0     		b	.L210
 2204              	.LVL311:
 2205              	.L261:
3124:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2206              		.loc 1 3124 0
 2207 0130 09FB08F9 		mul	r9, r9, r8
 2208              	.LVL312:
3126:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->csize == 0 || (fs->csize & (fs->csize - 1))) return FR_NO_FILESYSTEM;	/* (Must be power o
 2209              		.loc 1 3126 0
 2210 0134 95F84970 		ldrb	r7, [r5, #73]	@ zero_extendqisi2
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 147


 2211              	.LVL313:
 2212 0138 6F81     		strh	r7, [r5, #10]	@ movhi
3127:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2213              		.loc 1 3127 0
 2214 013a 002F     		cmp	r7, #0
 2215 013c 00F0B480 		beq	.L241
3127:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2216              		.loc 1 3127 0 is_stmt 0 discriminator 2
 2217 0140 7B1E     		subs	r3, r7, #1
 2218 0142 1F42     		tst	r7, r3
 2219 0144 40F0B280 		bne	.L242
3129:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->n_rootdir % (SS(fs) / SZDIRE)) return FR_NO_FILESYSTEM;	/* (Must be sector aligned) */
 2220              		.loc 1 3129 0 is_stmt 1
 2221 0148 05F14D00 		add	r0, r5, #77
 2222 014c FFF7FEFF 		bl	ld_word
 2223              	.LVL314:
 2224 0150 8246     		mov	r10, r0
 2225 0152 2881     		strh	r0, [r5, #8]	@ movhi
3130:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2226              		.loc 1 3130 0
 2227 0154 10F00F0F 		tst	r0, #15
 2228 0158 40F0AA80 		bne	.L243
3132:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (tsect == 0) tsect = ld_dword(fs->win + BPB_TotSec32);
 2229              		.loc 1 3132 0
 2230 015c 05F14F00 		add	r0, r5, #79
 2231 0160 FFF7FEFF 		bl	ld_word
 2232              	.LVL315:
 2233 0164 0446     		mov	r4, r0
 2234              	.LVL316:
3133:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2235              		.loc 1 3133 0
 2236 0166 20B9     		cbnz	r0, .L220
3133:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2237              		.loc 1 3133 0 is_stmt 0 discriminator 1
 2238 0168 05F15C00 		add	r0, r5, #92
 2239              	.LVL317:
 2240 016c FFF7FEFF 		bl	ld_dword
 2241              	.LVL318:
 2242 0170 0446     		mov	r4, r0
 2243              	.LVL319:
 2244              	.L220:
3135:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nrsv == 0) return FR_NO_FILESYSTEM;			/* (Must not be 0) */
 2245              		.loc 1 3135 0 is_stmt 1
 2246 0172 05F14A00 		add	r0, r5, #74
 2247              	.LVL320:
 2248 0176 FFF7FEFF 		bl	ld_word
 2249              	.LVL321:
3136:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2250              		.loc 1 3136 0
 2251 017a 0246     		mov	r2, r0
 2252 017c 0028     		cmp	r0, #0
 2253 017e 00F09980 		beq	.L244
3139:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (tsect < sysect) return FR_NO_FILESYSTEM;	/* (Invalid volume size) */
 2254              		.loc 1 3139 0
 2255 0182 09EB0003 		add	r3, r9, r0
 2256 0186 03EB1A13 		add	r3, r3, r10, lsr #4
 2257              	.LVL322:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 148


3140:Middlewares/Third_Party/FatFs/src/ff.c **** 		nclst = (tsect - sysect) / fs->csize;			/* Number of clusters */
 2258              		.loc 1 3140 0
 2259 018a 9C42     		cmp	r4, r3
 2260 018c C0F09480 		bcc	.L245
3141:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nclst == 0) return FR_NO_FILESYSTEM;		/* (Invalid volume size) */
 2261              		.loc 1 3141 0
 2262 0190 E41A     		subs	r4, r4, r3
 2263              	.LVL323:
 2264 0192 B4FBF7F4 		udiv	r4, r4, r7
 2265              	.LVL324:
3142:Middlewares/Third_Party/FatFs/src/ff.c **** 		fmt = FS_FAT32;
 2266              		.loc 1 3142 0
 2267 0196 002C     		cmp	r4, #0
 2268 0198 00F09080 		beq	.L246
 2269              	.LVL325:
3144:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nclst <= MAX_FAT12) fmt = FS_FAT12;
 2270              		.loc 1 3144 0
 2271 019c 4FF6F571 		movw	r1, #65525
 2272 01a0 8C42     		cmp	r4, r1
 2273 01a2 65D9     		bls	.L247
3143:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nclst <= MAX_FAT16) fmt = FS_FAT16;
 2274              		.loc 1 3143 0
 2275 01a4 0327     		movs	r7, #3
 2276              	.L221:
 2277              	.LVL326:
3145:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2278              		.loc 1 3145 0
 2279 01a6 40F6F571 		movw	r1, #4085
 2280 01aa 8C42     		cmp	r4, r1
 2281 01ac 00D8     		bhi	.L222
 2282 01ae 0127     		movs	r7, #1
 2283              	.LVL327:
 2284              	.L222:
3148:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->volbase = bsect;							/* Volume start sector */
 2285              		.loc 1 3148 0
 2286 01b0 0234     		adds	r4, r4, #2
 2287              	.LVL328:
 2288 01b2 2C62     		str	r4, [r5, #32]
3149:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fatbase = bsect + nrsv; 					/* FAT start sector */
 2289              		.loc 1 3149 0
 2290 01b4 AE62     		str	r6, [r5, #40]
3150:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->database = bsect + sysect;					/* Data start sector */
 2291              		.loc 1 3150 0
 2292 01b6 3244     		add	r2, r2, r6
 2293 01b8 EA62     		str	r2, [r5, #44]
3151:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fmt == FS_FAT32) {
 2294              		.loc 1 3151 0
 2295 01ba 3344     		add	r3, r3, r6
 2296              	.LVL329:
 2297 01bc 6B63     		str	r3, [r5, #52]
3152:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ld_word(fs->win + BPB_FSVer32) != 0) return FR_NO_FILESYSTEM;	/* (Must be FAT32 revision 0.0
 2298              		.loc 1 3152 0
 2299 01be 032F     		cmp	r7, #3
 2300 01c0 58D1     		bne	.L223
3153:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->n_rootdir) return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must be 0) */
 2301              		.loc 1 3153 0
 2302 01c2 05F16600 		add	r0, r5, #102
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 149


 2303              	.LVL330:
 2304 01c6 FFF7FEFF 		bl	ld_word
 2305              	.LVL331:
 2306 01ca 0028     		cmp	r0, #0
 2307 01cc 78D1     		bne	.L249
3154:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->dirbase = ld_dword(fs->win + BPB_RootClus32);	/* Root directory start cluster */
 2308              		.loc 1 3154 0
 2309 01ce BAF1000F 		cmp	r10, #0
 2310 01d2 77D1     		bne	.L250
3155:Middlewares/Third_Party/FatFs/src/ff.c **** 			szbfat = fs->n_fatent * 4;					/* (Needed FAT size) */
 2311              		.loc 1 3155 0
 2312 01d4 05F16800 		add	r0, r5, #104
 2313 01d8 FFF7FEFF 		bl	ld_dword
 2314              	.LVL332:
 2315 01dc 2863     		str	r0, [r5, #48]
3156:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 2316              		.loc 1 3156 0
 2317 01de A400     		lsls	r4, r4, #2
 2318              	.LVL333:
 2319              	.L224:
3163:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2320              		.loc 1 3163 0
 2321 01e0 04F2FF14 		addw	r4, r4, #511
 2322              	.LVL334:
 2323 01e4 B8EB542F 		cmp	r8, r4, lsr #9
 2324 01e8 70D3     		bcc	.L252
3167:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsi_flag = 0x80;
 2325              		.loc 1 3167 0
 2326 01ea 4FF0FF33 		mov	r3, #-1
 2327 01ee AB61     		str	r3, [r5, #24]
 2328 01f0 6B61     		str	r3, [r5, #20]
3168:Middlewares/Third_Party/FatFs/src/ff.c **** #if (_FS_NOFSINFO & 3) != 3
 2329              		.loc 1 3168 0
 2330 01f2 8023     		movs	r3, #128
 2331 01f4 2B71     		strb	r3, [r5, #4]
3170:Middlewares/Third_Party/FatFs/src/ff.c **** 			&& ld_word(fs->win + BPB_FSInfo32) == 1
 2332              		.loc 1 3170 0
 2333 01f6 032F     		cmp	r7, #3
 2334 01f8 2CD1     		bne	.L226
3171:Middlewares/Third_Party/FatFs/src/ff.c **** 			&& move_window(fs, bsect + 1) == FR_OK)
 2335              		.loc 1 3171 0
 2336 01fa 05F16C00 		add	r0, r5, #108
 2337 01fe FFF7FEFF 		bl	ld_word
 2338              	.LVL335:
 2339 0202 0128     		cmp	r0, #1
 2340 0204 26D1     		bne	.L226
3172:Middlewares/Third_Party/FatFs/src/ff.c **** 		{
 2341              		.loc 1 3172 0
 2342 0206 711C     		adds	r1, r6, #1
 2343 0208 2846     		mov	r0, r5
 2344 020a FFF7FEFF 		bl	move_window
 2345              	.LVL336:
 2346 020e 08BB     		cbnz	r0, .L226
3174:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ld_word(fs->win + BS_55AA) == 0xAA55	/* Load FSINFO data if available */
 2347              		.loc 1 3174 0
 2348 0210 0023     		movs	r3, #0
 2349 0212 2B71     		strb	r3, [r5, #4]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 150


3175:Middlewares/Third_Party/FatFs/src/ff.c **** 				&& ld_dword(fs->win + FSI_LeadSig) == 0x41615252
 2350              		.loc 1 3175 0
 2351 0214 05F23A20 		addw	r0, r5, #570
 2352 0218 FFF7FEFF 		bl	ld_word
 2353              	.LVL337:
 2354 021c 4AF65523 		movw	r3, #43605
 2355 0220 9842     		cmp	r0, r3
 2356 0222 17D1     		bne	.L226
3176:Middlewares/Third_Party/FatFs/src/ff.c **** 				&& ld_dword(fs->win + FSI_StrucSig) == 0x61417272)
 2357              		.loc 1 3176 0
 2358 0224 05F13C00 		add	r0, r5, #60
 2359 0228 FFF7FEFF 		bl	ld_dword
 2360              	.LVL338:
 2361 022c 294B     		ldr	r3, .L262+4
 2362 022e 9842     		cmp	r0, r3
 2363 0230 10D1     		bne	.L226
3177:Middlewares/Third_Party/FatFs/src/ff.c **** 			{
 2364              		.loc 1 3177 0
 2365 0232 05F50870 		add	r0, r5, #544
 2366 0236 FFF7FEFF 		bl	ld_dword
 2367              	.LVL339:
 2368 023a 274B     		ldr	r3, .L262+8
 2369 023c 9842     		cmp	r0, r3
 2370 023e 09D1     		bne	.L226
3180:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 2371              		.loc 1 3180 0
 2372 0240 05F50970 		add	r0, r5, #548
 2373 0244 FFF7FEFF 		bl	ld_dword
 2374              	.LVL340:
 2375 0248 A861     		str	r0, [r5, #24]
3183:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 2376              		.loc 1 3183 0
 2377 024a 05F50A70 		add	r0, r5, #552
 2378 024e FFF7FEFF 		bl	ld_dword
 2379              	.LVL341:
 2380 0252 6861     		str	r0, [r5, #20]
 2381              	.L226:
3191:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->id = ++Fsid;		/* File system mount ID */
 2382              		.loc 1 3191 0
 2383 0254 2F70     		strb	r7, [r5]
3192:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN == 1
 2384              		.loc 1 3192 0
 2385 0256 214A     		ldr	r2, .L262+12
 2386 0258 1388     		ldrh	r3, [r2]
 2387 025a 0133     		adds	r3, r3, #1
 2388 025c 9BB2     		uxth	r3, r3
 2389 025e 1380     		strh	r3, [r2]	@ movhi
 2390 0260 EB80     		strh	r3, [r5, #6]	@ movhi
3200:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 2391              		.loc 1 3200 0
 2392 0262 0024     		movs	r4, #0
 2393              	.LVL342:
 2394 0264 EC61     		str	r4, [r5, #28]
3203:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 2395              		.loc 1 3203 0
 2396 0266 2846     		mov	r0, r5
 2397 0268 FFF7FEFF 		bl	clear_lock
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 151


 2398              	.LVL343:
3205:Middlewares/Third_Party/FatFs/src/ff.c **** }
 2399              		.loc 1 3205 0
 2400 026c 2046     		mov	r0, r4
 2401 026e 12E0     		b	.L210
 2402              	.LVL344:
 2403              	.L247:
3144:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nclst <= MAX_FAT12) fmt = FS_FAT12;
 2404              		.loc 1 3144 0
 2405 0270 0227     		movs	r7, #2
 2406 0272 98E7     		b	.L221
 2407              	.LVL345:
 2408              	.L223:
3158:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->dirbase = fs->fatbase + fasize;			/* Root directory start sector */
 2409              		.loc 1 3158 0
 2410 0274 BAF1000F 		cmp	r10, #0
 2411 0278 26D0     		beq	.L251
3159:Middlewares/Third_Party/FatFs/src/ff.c **** 			szbfat = (fmt == FS_FAT16) ?				/* (Needed FAT size) */
 2412              		.loc 1 3159 0
 2413 027a 4A44     		add	r2, r2, r9
 2414 027c 2A63     		str	r2, [r5, #48]
3161:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2415              		.loc 1 3161 0
 2416 027e 022F     		cmp	r7, #2
 2417 0280 01D1     		bne	.L225
3161:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2418              		.loc 1 3161 0 is_stmt 0 discriminator 1
 2419 0282 6400     		lsls	r4, r4, #1
 2420              	.LVL346:
 2421 0284 ACE7     		b	.L224
 2422              	.LVL347:
 2423              	.L225:
3161:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2424              		.loc 1 3161 0 discriminator 2
 2425 0286 04EB4403 		add	r3, r4, r4, lsl #1
 2426 028a 04F00104 		and	r4, r4, #1
 2427              	.LVL348:
 2428 028e 04EB5304 		add	r4, r4, r3, lsr #1
 2429 0292 A5E7     		b	.L224
 2430              	.LVL349:
 2431              	.L227:
3011:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2432              		.loc 1 3011 0 is_stmt 1
 2433 0294 0B20     		movs	r0, #11
 2434              	.LVL350:
 2435              	.L210:
3206:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2436              		.loc 1 3206 0
 2437 0296 04B0     		add	sp, sp, #16
 2438              	.LCFI29:
 2439              		.cfi_remember_state
 2440              		.cfi_def_cfa_offset 32
 2441              		@ sp needed
 2442 0298 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 2443              	.LVL351:
 2444              	.L228:
 2445              	.LCFI30:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 152


 2446              		.cfi_restore_state
3015:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2447              		.loc 1 3015 0
 2448 029c 0C20     		movs	r0, #12
 2449              	.LVL352:
 2450 029e FAE7     		b	.L210
 2451              	.LVL353:
 2452              	.L230:
3027:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2453              		.loc 1 3027 0
 2454 02a0 0020     		movs	r0, #0
 2455              	.LVL354:
 2456 02a2 F8E7     		b	.L210
 2457              	.LVL355:
 2458              	.L237:
3063:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt >= 2) return FR_NO_FILESYSTEM;	/* No FAT volume is found */
 2459              		.loc 1 3063 0
 2460 02a4 0120     		movs	r0, #1
 2461              	.LVL356:
 2462 02a6 F6E7     		b	.L210
 2463              	.LVL357:
 2464              	.L241:
3127:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2465              		.loc 1 3127 0
 2466 02a8 0D20     		movs	r0, #13
 2467 02aa F4E7     		b	.L210
 2468              	.L242:
 2469 02ac 0D20     		movs	r0, #13
 2470 02ae F2E7     		b	.L210
 2471              	.L243:
3130:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2472              		.loc 1 3130 0
 2473 02b0 0D20     		movs	r0, #13
 2474 02b2 F0E7     		b	.L210
 2475              	.LVL358:
 2476              	.L244:
3136:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2477              		.loc 1 3136 0
 2478 02b4 0D20     		movs	r0, #13
 2479              	.LVL359:
 2480 02b6 EEE7     		b	.L210
 2481              	.LVL360:
 2482              	.L245:
3140:Middlewares/Third_Party/FatFs/src/ff.c **** 		nclst = (tsect - sysect) / fs->csize;			/* Number of clusters */
 2483              		.loc 1 3140 0
 2484 02b8 0D20     		movs	r0, #13
 2485              	.LVL361:
 2486 02ba ECE7     		b	.L210
 2487              	.LVL362:
 2488              	.L246:
3142:Middlewares/Third_Party/FatFs/src/ff.c **** 		fmt = FS_FAT32;
 2489              		.loc 1 3142 0
 2490 02bc 0D20     		movs	r0, #13
 2491              	.LVL363:
 2492 02be EAE7     		b	.L210
 2493              	.LVL364:
 2494              	.L249:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 153


3153:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->n_rootdir) return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must be 0) */
 2495              		.loc 1 3153 0
 2496 02c0 0D20     		movs	r0, #13
 2497 02c2 E8E7     		b	.L210
 2498              	.L250:
3154:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->dirbase = ld_dword(fs->win + BPB_RootClus32);	/* Root directory start cluster */
 2499              		.loc 1 3154 0
 2500 02c4 0D20     		movs	r0, #13
 2501 02c6 E6E7     		b	.L210
 2502              	.LVL365:
 2503              	.L251:
3158:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->dirbase = fs->fatbase + fasize;			/* Root directory start sector */
 2504              		.loc 1 3158 0
 2505 02c8 0D20     		movs	r0, #13
 2506              	.LVL366:
 2507 02ca E4E7     		b	.L210
 2508              	.LVL367:
 2509              	.L252:
3163:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2510              		.loc 1 3163 0
 2511 02cc 0D20     		movs	r0, #13
 2512 02ce E2E7     		b	.L210
 2513              	.L263:
 2514              		.align	2
 2515              	.L262:
 2516 02d0 00000000 		.word	.LANCHOR3
 2517 02d4 52526141 		.word	1096897106
 2518 02d8 72724161 		.word	1631679090
 2519 02dc 00000000 		.word	.LANCHOR4
 2520              		.cfi_endproc
 2521              	.LFE184:
 2523              		.section	.text.put_fat,"ax",%progbits
 2524              		.align	1
 2525              		.syntax unified
 2526              		.thumb
 2527              		.thumb_func
 2528              		.fpu fpv5-sp-d16
 2530              	put_fat:
 2531              	.LFB161:
1086:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT bc;
 2532              		.loc 1 1086 0
 2533              		.cfi_startproc
 2534              		@ args = 0, pretend = 0, frame = 0
 2535              		@ frame_needed = 0, uses_anonymous_args = 0
 2536              	.LVL368:
 2537 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 2538              	.LCFI31:
 2539              		.cfi_def_cfa_offset 32
 2540              		.cfi_offset 4, -32
 2541              		.cfi_offset 5, -28
 2542              		.cfi_offset 6, -24
 2543              		.cfi_offset 7, -20
 2544              		.cfi_offset 8, -16
 2545              		.cfi_offset 9, -12
 2546              		.cfi_offset 10, -8
 2547              		.cfi_offset 14, -4
 2548              	.LVL369:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 154


1091:Middlewares/Third_Party/FatFs/src/ff.c **** 		switch (fs->fs_type) {
 2549              		.loc 1 1091 0
 2550 0004 0129     		cmp	r1, #1
 2551 0006 7CD9     		bls	.L273
1091:Middlewares/Third_Party/FatFs/src/ff.c **** 		switch (fs->fs_type) {
 2552              		.loc 1 1091 0 is_stmt 0 discriminator 1
 2553 0008 036A     		ldr	r3, [r0, #32]
 2554 000a 9942     		cmp	r1, r3
 2555 000c 01D3     		bcc	.L278
1089:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2556              		.loc 1 1089 0 is_stmt 1
 2557 000e 0225     		movs	r5, #2
 2558 0010 78E0     		b	.L265
 2559              	.L278:
 2560 0012 1746     		mov	r7, r2
 2561 0014 0C46     		mov	r4, r1
 2562 0016 0646     		mov	r6, r0
1092:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT12 :	/* Bitfield items */
 2563              		.loc 1 1092 0
 2564 0018 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 2565 001a 022B     		cmp	r3, #2
 2566 001c 43D0     		beq	.L266
 2567 001e 032B     		cmp	r3, #3
 2568 0020 54D0     		beq	.L267
 2569 0022 012B     		cmp	r3, #1
 2570 0024 01D0     		beq	.L279
1089:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2571              		.loc 1 1089 0
 2572 0026 0225     		movs	r5, #2
 2573 0028 6CE0     		b	.L265
 2574              	.L279:
 2575              	.LVL370:
1094:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 2576              		.loc 1 1094 0
 2577 002a 01EB5108 		add	r8, r1, r1, lsr #1
 2578              	.LVL371:
1095:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 2579              		.loc 1 1095 0
 2580 002e C16A     		ldr	r1, [r0, #44]
 2581              	.LVL372:
 2582 0030 01EB5821 		add	r1, r1, r8, lsr #9
 2583 0034 FFF7FEFF 		bl	move_window
 2584              	.LVL373:
1096:Middlewares/Third_Party/FatFs/src/ff.c **** 			p = fs->win + bc++ % SS(fs);
 2585              		.loc 1 1096 0
 2586 0038 0546     		mov	r5, r0
 2587 003a 0028     		cmp	r0, #0
 2588 003c 62D1     		bne	.L265
1097:Middlewares/Third_Party/FatFs/src/ff.c **** 			*p = (clst & 1) ? ((*p & 0x0F) | ((BYTE)val << 4)) : (BYTE)val;
 2589              		.loc 1 1097 0
 2590 003e 06F13C0A 		add	r10, r6, #60
 2591 0042 08F10109 		add	r9, r8, #1
 2592              	.LVL374:
 2593 0046 C8F30808 		ubfx	r8, r8, #0, #9
 2594              	.LVL375:
1098:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2595              		.loc 1 1098 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 155


 2596 004a 14F00104 		ands	r4, r4, #1
 2597              	.LVL376:
 2598 004e 1FD0     		beq	.L269
1098:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2599              		.loc 1 1098 0 is_stmt 0 discriminator 1
 2600 0050 1AF90830 		ldrsb	r3, [r10, r8]
 2601 0054 03F00F03 		and	r3, r3, #15
 2602 0058 3A01     		lsls	r2, r7, #4
 2603 005a 02F47F62 		and	r2, r2, #4080
 2604 005e 1343     		orrs	r3, r3, r2
 2605 0060 DBB2     		uxtb	r3, r3
 2606              	.L270:
1098:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2607              		.loc 1 1098 0 discriminator 4
 2608 0062 0AF80830 		strb	r3, [r10, r8]
1099:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 2609              		.loc 1 1099 0 is_stmt 1 discriminator 4
 2610 0066 0123     		movs	r3, #1
 2611 0068 F370     		strb	r3, [r6, #3]
1100:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 2612              		.loc 1 1100 0 discriminator 4
 2613 006a F16A     		ldr	r1, [r6, #44]
 2614 006c 01EB5921 		add	r1, r1, r9, lsr #9
 2615 0070 3046     		mov	r0, r6
 2616              	.LVL377:
 2617 0072 FFF7FEFF 		bl	move_window
 2618              	.LVL378:
1101:Middlewares/Third_Party/FatFs/src/ff.c **** 			p = fs->win + bc % SS(fs);
 2619              		.loc 1 1101 0 discriminator 4
 2620 0076 0546     		mov	r5, r0
 2621 0078 0028     		cmp	r0, #0
 2622 007a 43D1     		bne	.L265
1102:Middlewares/Third_Party/FatFs/src/ff.c **** 			*p = (clst & 1) ? (BYTE)(val >> 4) : ((*p & 0xF0) | ((BYTE)(val >> 8) & 0x0F));
 2623              		.loc 1 1102 0
 2624 007c C9F30809 		ubfx	r9, r9, #0, #9
 2625              	.LVL379:
1103:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2626              		.loc 1 1103 0
 2627 0080 44B1     		cbz	r4, .L271
1103:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2628              		.loc 1 1103 0 is_stmt 0 discriminator 1
 2629 0082 C7F30712 		ubfx	r2, r7, #4, #8
 2630              	.LVL380:
 2631              	.L272:
1103:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2632              		.loc 1 1103 0 discriminator 4
 2633 0086 0AF80920 		strb	r2, [r10, r9]
1104:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 2634              		.loc 1 1104 0 is_stmt 1 discriminator 4
 2635 008a 0123     		movs	r3, #1
 2636 008c F370     		strb	r3, [r6, #3]
1105:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2637              		.loc 1 1105 0 discriminator 4
 2638 008e 39E0     		b	.L265
 2639              	.LVL381:
 2640              	.L269:
1098:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 156


 2641              		.loc 1 1098 0 discriminator 2
 2642 0090 FBB2     		uxtb	r3, r7
 2643 0092 E6E7     		b	.L270
 2644              	.LVL382:
 2645              	.L271:
1103:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2646              		.loc 1 1103 0 discriminator 2
 2647 0094 1AF90920 		ldrsb	r2, [r10, r9]
 2648 0098 22F00F02 		bic	r2, r2, #15
 2649 009c C7F30327 		ubfx	r7, r7, #8, #4
 2650              	.LVL383:
 2651 00a0 3A43     		orrs	r2, r2, r7
 2652 00a2 D2B2     		uxtb	r2, r2
 2653 00a4 EFE7     		b	.L272
 2654              	.LVL384:
 2655              	.L266:
1108:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 2656              		.loc 1 1108 0
 2657 00a6 C16A     		ldr	r1, [r0, #44]
 2658              	.LVL385:
 2659 00a8 01EB1421 		add	r1, r1, r4, lsr #8
 2660 00ac FFF7FEFF 		bl	move_window
 2661              	.LVL386:
1109:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(fs->win + clst * 2 % SS(fs), (WORD)val);
 2662              		.loc 1 1109 0
 2663 00b0 0546     		mov	r5, r0
 2664 00b2 38BB     		cbnz	r0, .L265
1110:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2665              		.loc 1 1110 0
 2666 00b4 06F13C00 		add	r0, r6, #60
 2667              	.LVL387:
 2668 00b8 6300     		lsls	r3, r4, #1
 2669 00ba 03F4FF73 		and	r3, r3, #510
 2670 00be B9B2     		uxth	r1, r7
 2671 00c0 1844     		add	r0, r0, r3
 2672 00c2 FFF7FEFF 		bl	st_word
 2673              	.LVL388:
1111:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 2674              		.loc 1 1111 0
 2675 00c6 0123     		movs	r3, #1
 2676 00c8 F370     		strb	r3, [r6, #3]
1112:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2677              		.loc 1 1112 0
 2678 00ca 1BE0     		b	.L265
 2679              	.LVL389:
 2680              	.L267:
1118:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 2681              		.loc 1 1118 0
 2682 00cc C16A     		ldr	r1, [r0, #44]
 2683              	.LVL390:
 2684 00ce 01EBD411 		add	r1, r1, r4, lsr #7
 2685 00d2 FFF7FEFF 		bl	move_window
 2686              	.LVL391:
1119:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!_FS_EXFAT || fs->fs_type != FS_EXFAT) {
 2687              		.loc 1 1119 0
 2688 00d6 0546     		mov	r5, r0
 2689 00d8 A0B9     		cbnz	r0, .L265
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 157


1121:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 2690              		.loc 1 1121 0
 2691 00da 27F07047 		bic	r7, r7, #-268435456
 2692              	.LVL392:
 2693 00de 06F13C03 		add	r3, r6, #60
 2694 00e2 A100     		lsls	r1, r4, #2
 2695 00e4 01F4FE71 		and	r1, r1, #508
 2696 00e8 5C18     		adds	r4, r3, r1
 2697              	.LVL393:
 2698 00ea 2046     		mov	r0, r4
 2699              	.LVL394:
 2700 00ec FFF7FEFF 		bl	ld_dword
 2701              	.LVL395:
 2702 00f0 00F07041 		and	r1, r0, #-268435456
 2703              	.LVL396:
1123:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2704              		.loc 1 1123 0
 2705 00f4 3943     		orrs	r1, r1, r7
 2706              	.LVL397:
 2707 00f6 2046     		mov	r0, r4
 2708 00f8 FFF7FEFF 		bl	st_dword
 2709              	.LVL398:
1124:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 2710              		.loc 1 1124 0
 2711 00fc 0123     		movs	r3, #1
 2712 00fe F370     		strb	r3, [r6, #3]
1125:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2713              		.loc 1 1125 0
 2714 0100 00E0     		b	.L265
 2715              	.LVL399:
 2716              	.L273:
1089:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2717              		.loc 1 1089 0
 2718 0102 0225     		movs	r5, #2
 2719              	.LVL400:
 2720              	.L265:
1129:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2721              		.loc 1 1129 0
 2722 0104 2846     		mov	r0, r5
 2723 0106 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 2724              		.cfi_endproc
 2725              	.LFE161:
 2727              		.section	.text.get_fat,"ax",%progbits
 2728              		.align	1
 2729              		.syntax unified
 2730              		.thumb
 2731              		.thumb_func
 2732              		.fpu fpv5-sp-d16
 2734              	get_fat:
 2735              	.LFB160:
1005:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT wc, bc;
 2736              		.loc 1 1005 0
 2737              		.cfi_startproc
 2738              		@ args = 0, pretend = 0, frame = 0
 2739              		@ frame_needed = 0, uses_anonymous_args = 0
 2740              	.LVL401:
 2741 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 158


 2742              	.LCFI32:
 2743              		.cfi_def_cfa_offset 24
 2744              		.cfi_offset 3, -24
 2745              		.cfi_offset 4, -20
 2746              		.cfi_offset 5, -16
 2747              		.cfi_offset 6, -12
 2748              		.cfi_offset 7, -8
 2749              		.cfi_offset 14, -4
1008:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2750              		.loc 1 1008 0
 2751 0002 0668     		ldr	r6, [r0]
 2752              	.LVL402:
1011:Middlewares/Third_Party/FatFs/src/ff.c **** 		val = 1;	/* Internal error */
 2753              		.loc 1 1011 0
 2754 0004 0129     		cmp	r1, #1
 2755 0006 5ED9     		bls	.L286
1011:Middlewares/Third_Party/FatFs/src/ff.c **** 		val = 1;	/* Internal error */
 2756              		.loc 1 1011 0 is_stmt 0 discriminator 1
 2757 0008 336A     		ldr	r3, [r6, #32]
 2758 000a 9942     		cmp	r1, r3
 2759 000c 5DD2     		bcs	.L287
 2760 000e 0C46     		mov	r4, r1
 2761              	.LVL403:
1017:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT12 :
 2762              		.loc 1 1017 0 is_stmt 1
 2763 0010 3378     		ldrb	r3, [r6]	@ zero_extendqisi2
 2764 0012 022B     		cmp	r3, #2
 2765 0014 30D0     		beq	.L282
 2766 0016 032B     		cmp	r3, #3
 2767 0018 41D0     		beq	.L283
 2768 001a 012B     		cmp	r3, #1
 2769 001c 01D0     		beq	.L295
1065:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2770              		.loc 1 1065 0
 2771 001e 0120     		movs	r0, #1
 2772              	.LVL404:
 2773 0020 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2774              	.LVL405:
 2775              	.L295:
1019:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
 2776              		.loc 1 1019 0
 2777 0022 01EB5105 		add	r5, r1, r1, lsr #1
 2778              	.LVL406:
1020:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc = fs->win[bc++ % SS(fs)];
 2779              		.loc 1 1020 0
 2780 0026 F16A     		ldr	r1, [r6, #44]
 2781              	.LVL407:
 2782 0028 01EB5521 		add	r1, r1, r5, lsr #9
 2783 002c 3046     		mov	r0, r6
 2784              	.LVL408:
 2785 002e FFF7FEFF 		bl	move_window
 2786              	.LVL409:
 2787 0032 10B1     		cbz	r0, .L296
1015:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2788              		.loc 1 1015 0
 2789 0034 4FF0FF30 		mov	r0, #-1
 2790 0038 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 159


 2791              	.LVL410:
 2792              	.L296:
1021:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
 2793              		.loc 1 1021 0
 2794 003a 6F1C     		adds	r7, r5, #1
 2795              	.LVL411:
 2796 003c C5F30805 		ubfx	r5, r5, #0, #9
 2797 0040 3544     		add	r5, r5, r6
 2798 0042 95F83C50 		ldrb	r5, [r5, #60]	@ zero_extendqisi2
 2799              	.LVL412:
1022:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc |= fs->win[bc % SS(fs)] << 8;
 2800              		.loc 1 1022 0
 2801 0046 F16A     		ldr	r1, [r6, #44]
 2802 0048 01EB5721 		add	r1, r1, r7, lsr #9
 2803 004c 3046     		mov	r0, r6
 2804 004e FFF7FEFF 		bl	move_window
 2805              	.LVL413:
 2806 0052 10B1     		cbz	r0, .L297
1015:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2807              		.loc 1 1015 0
 2808 0054 4FF0FF30 		mov	r0, #-1
 2809 0058 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2810              	.LVL414:
 2811              	.L297:
1023:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 2812              		.loc 1 1023 0
 2813 005a C7F30803 		ubfx	r3, r7, #0, #9
 2814 005e 3344     		add	r3, r3, r6
 2815 0060 93F83C00 		ldrb	r0, [r3, #60]	@ zero_extendqisi2
 2816 0064 45EA0020 		orr	r0, r5, r0, lsl #8
 2817              	.LVL415:
1024:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 2818              		.loc 1 1024 0
 2819 0068 14F0010F 		tst	r4, #1
 2820 006c 01D0     		beq	.L285
1024:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 2821              		.loc 1 1024 0 is_stmt 0 discriminator 1
 2822 006e 0009     		lsrs	r0, r0, #4
 2823              	.LVL416:
 2824 0070 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2825              	.LVL417:
 2826              	.L285:
1024:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 2827              		.loc 1 1024 0 discriminator 2
 2828 0072 C0F30B00 		ubfx	r0, r0, #0, #12
 2829              	.LVL418:
 2830 0076 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2831              	.LVL419:
 2832              	.L282:
1028:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = ld_word(fs->win + clst * 2 % SS(fs));
 2833              		.loc 1 1028 0 is_stmt 1
 2834 0078 F16A     		ldr	r1, [r6, #44]
 2835              	.LVL420:
 2836 007a 01EB1421 		add	r1, r1, r4, lsr #8
 2837 007e 3046     		mov	r0, r6
 2838              	.LVL421:
 2839 0080 FFF7FEFF 		bl	move_window
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 160


 2840              	.LVL422:
 2841 0084 10B1     		cbz	r0, .L298
1015:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2842              		.loc 1 1015 0
 2843 0086 4FF0FF30 		mov	r0, #-1
 2844 008a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2845              	.LVL423:
 2846              	.L298:
1029:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 2847              		.loc 1 1029 0
 2848 008c 06F13C00 		add	r0, r6, #60
 2849 0090 6100     		lsls	r1, r4, #1
 2850 0092 01F4FF71 		and	r1, r1, #510
 2851 0096 0844     		add	r0, r0, r1
 2852 0098 FFF7FEFF 		bl	ld_word
 2853              	.LVL424:
1030:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2854              		.loc 1 1030 0
 2855 009c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2856              	.LVL425:
 2857              	.L283:
1033:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = ld_dword(fs->win + clst * 4 % SS(fs)) & 0x0FFFFFFF;
 2858              		.loc 1 1033 0
 2859 009e F16A     		ldr	r1, [r6, #44]
 2860              	.LVL426:
 2861 00a0 01EBD411 		add	r1, r1, r4, lsr #7
 2862 00a4 3046     		mov	r0, r6
 2863              	.LVL427:
 2864 00a6 FFF7FEFF 		bl	move_window
 2865              	.LVL428:
 2866 00aa 10B1     		cbz	r0, .L299
1015:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2867              		.loc 1 1015 0
 2868 00ac 4FF0FF30 		mov	r0, #-1
1070:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2869              		.loc 1 1070 0
 2870 00b0 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2871              	.LVL429:
 2872              	.L299:
1034:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 2873              		.loc 1 1034 0
 2874 00b2 3C36     		adds	r6, r6, #60
 2875              	.LVL430:
 2876 00b4 A100     		lsls	r1, r4, #2
 2877 00b6 01F4FE70 		and	r0, r1, #508
 2878 00ba 3044     		add	r0, r0, r6
 2879 00bc FFF7FEFF 		bl	ld_dword
 2880              	.LVL431:
 2881 00c0 20F07040 		bic	r0, r0, #-268435456
 2882              	.LVL432:
1035:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 2883              		.loc 1 1035 0
 2884 00c4 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2885              	.LVL433:
 2886              	.L286:
1012:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2887              		.loc 1 1012 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 161


 2888 00c6 0120     		movs	r0, #1
 2889              	.LVL434:
 2890 00c8 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2891              	.LVL435:
 2892              	.L287:
 2893 00ca 0120     		movs	r0, #1
 2894              	.LVL436:
 2895 00cc F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2896              		.cfi_endproc
 2897              	.LFE160:
 2899              		.section	.text.dir_sdi,"ax",%progbits
 2900              		.align	1
 2901              		.syntax unified
 2902              		.thumb
 2903              		.thumb_func
 2904              		.fpu fpv5-sp-d16
 2906              	dir_sdi:
 2907              	.LFB165:
1474:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD csz, clst;
 2908              		.loc 1 1474 0
 2909              		.cfi_startproc
 2910              		@ args = 0, pretend = 0, frame = 0
 2911              		@ frame_needed = 0, uses_anonymous_args = 0
 2912              	.LVL437:
 2913 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 2914              	.LCFI33:
 2915              		.cfi_def_cfa_offset 24
 2916              		.cfi_offset 4, -24
 2917              		.cfi_offset 5, -20
 2918              		.cfi_offset 6, -16
 2919              		.cfi_offset 7, -12
 2920              		.cfi_offset 8, -8
 2921              		.cfi_offset 14, -4
1476:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2922              		.loc 1 1476 0
 2923 0004 0768     		ldr	r7, [r0]
 2924              	.LVL438:
1479:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_INT_ERR;
 2925              		.loc 1 1479 0
 2926 0006 B1F5001F 		cmp	r1, #2097152
 2927 000a 02D3     		bcc	.L315
1480:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 2928              		.loc 1 1480 0
 2929 000c 0220     		movs	r0, #2
 2930              	.LVL439:
 2931 000e BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 2932              	.LVL440:
 2933              	.L315:
 2934 0012 0646     		mov	r6, r0
 2935 0014 0C46     		mov	r4, r1
1479:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_INT_ERR;
 2936              		.loc 1 1479 0 discriminator 1
 2937 0016 11F01F0F 		tst	r1, #31
 2938 001a 02D0     		beq	.L316
1480:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 2939              		.loc 1 1480 0
 2940 001c 0220     		movs	r0, #2
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 162


 2941              	.LVL441:
 2942 001e BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 2943              	.LVL442:
 2944              	.L316:
1482:Middlewares/Third_Party/FatFs/src/ff.c **** 	clst = dp->obj.sclust;		/* Table start cluster (0:root) */
 2945              		.loc 1 1482 0
 2946 0022 7161     		str	r1, [r6, #20]
1483:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst == 0 && fs->fs_type >= FS_FAT32) {	/* Replace cluster# 0 with root cluster# */
 2947              		.loc 1 1483 0
 2948 0024 8568     		ldr	r5, [r0, #8]
 2949              	.LVL443:
1484:Middlewares/Third_Party/FatFs/src/ff.c **** 		clst = fs->dirbase;
 2950              		.loc 1 1484 0
 2951 0026 1DB9     		cbnz	r5, .L302
1484:Middlewares/Third_Party/FatFs/src/ff.c **** 		clst = fs->dirbase;
 2952              		.loc 1 1484 0 is_stmt 0 discriminator 1
 2953 0028 3B78     		ldrb	r3, [r7]	@ zero_extendqisi2
 2954 002a 022B     		cmp	r3, #2
 2955 002c 00D9     		bls	.L302
1485:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_EXFAT) dp->obj.stat = 0;	/* exFAT: Root dir has an FAT chain */
 2956              		.loc 1 1485 0 is_stmt 1
 2957 002e 3D6B     		ldr	r5, [r7, #48]
 2958              	.LVL444:
 2959              	.L302:
1489:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs / SZDIRE >= fs->n_rootdir)	return FR_INT_ERR;	/* Is index out of range? */
 2960              		.loc 1 1489 0
 2961 0030 75B9     		cbnz	r5, .L303
1490:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->sect = fs->dirbase;
 2962              		.loc 1 1490 0
 2963 0032 3B89     		ldrh	r3, [r7, #8]
 2964 0034 B3EB541F 		cmp	r3, r4, lsr #5
 2965 0038 02D8     		bhi	.L317
 2966 003a 0220     		movs	r0, #2
 2967              	.LVL445:
 2968 003c BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 2969              	.LVL446:
 2970              	.L317:
1491:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2971              		.loc 1 1491 0
 2972 0040 3B6B     		ldr	r3, [r7, #48]
 2973 0042 F361     		str	r3, [r6, #28]
 2974              	.LVL447:
 2975              	.L304:
1503:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!dp->sect) return FR_INT_ERR;
 2976              		.loc 1 1503 0
 2977 0044 B561     		str	r5, [r6, #24]
1504:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->sect += ofs / SS(fs);			/* Sector# of the directory entry */
 2978              		.loc 1 1504 0
 2979 0046 F369     		ldr	r3, [r6, #28]
 2980 0048 0BBB     		cbnz	r3, .L318
 2981 004a 0220     		movs	r0, #2
1509:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2982              		.loc 1 1509 0
 2983 004c BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 2984              	.LVL448:
 2985              	.L303:
1494:Middlewares/Third_Party/FatFs/src/ff.c **** 		while (ofs >= csz) {				/* Follow cluster chain */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 163


 2986              		.loc 1 1494 0
 2987 0050 B7F80A80 		ldrh	r8, [r7, #10]
 2988 0054 4FEA4828 		lsl	r8, r8, #9
 2989              	.LVL449:
1495:Middlewares/Third_Party/FatFs/src/ff.c **** 			clst = get_fat(&dp->obj, clst);				/* Get next cluster */
 2990              		.loc 1 1495 0
 2991 0058 01E0     		b	.L305
 2992              	.LVL450:
 2993              	.L320:
1499:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2994              		.loc 1 1499 0
 2995 005a A4EB0804 		sub	r4, r4, r8
 2996              	.LVL451:
 2997              	.L305:
1495:Middlewares/Third_Party/FatFs/src/ff.c **** 			clst = get_fat(&dp->obj, clst);				/* Get next cluster */
 2998              		.loc 1 1495 0
 2999 005e 4445     		cmp	r4, r8
 3000 0060 0FD3     		bcc	.L319
1496:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
 3001              		.loc 1 1496 0
 3002 0062 2946     		mov	r1, r5
 3003 0064 3046     		mov	r0, r6
 3004 0066 FFF7FEFF 		bl	get_fat
 3005              	.LVL452:
 3006 006a 0546     		mov	r5, r0
 3007              	.LVL453:
1497:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (clst < 2 || clst >= fs->n_fatent) return FR_INT_ERR;	/* Reached to end of table or internal 
 3008              		.loc 1 1497 0
 3009 006c B0F1FF3F 		cmp	r0, #-1
 3010 0070 18D0     		beq	.L310
1498:Middlewares/Third_Party/FatFs/src/ff.c **** 			ofs -= csz;
 3011              		.loc 1 1498 0
 3012 0072 0128     		cmp	r0, #1
 3013 0074 19D9     		bls	.L311
1498:Middlewares/Third_Party/FatFs/src/ff.c **** 			ofs -= csz;
 3014              		.loc 1 1498 0 is_stmt 0 discriminator 2
 3015 0076 3B6A     		ldr	r3, [r7, #32]
 3016 0078 9842     		cmp	r0, r3
 3017 007a EED3     		bcc	.L320
1498:Middlewares/Third_Party/FatFs/src/ff.c **** 			ofs -= csz;
 3018              		.loc 1 1498 0
 3019 007c 0220     		movs	r0, #2
 3020              	.LVL454:
 3021 007e BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 3022              	.LVL455:
 3023              	.L319:
1501:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3024              		.loc 1 1501 0 is_stmt 1
 3025 0082 2946     		mov	r1, r5
 3026 0084 3846     		mov	r0, r7
 3027 0086 FFF7FEFF 		bl	clust2sect
 3028              	.LVL456:
 3029 008a F061     		str	r0, [r6, #28]
 3030 008c DAE7     		b	.L304
 3031              	.LVL457:
 3032              	.L318:
1505:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->dir = fs->win + (ofs % SS(fs));	/* Pointer to the entry in the win[] */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 164


 3033              		.loc 1 1505 0
 3034 008e 03EB5423 		add	r3, r3, r4, lsr #9
 3035 0092 F361     		str	r3, [r6, #28]
1506:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3036              		.loc 1 1506 0
 3037 0094 3C37     		adds	r7, r7, #60
 3038              	.LVL458:
 3039 0096 C4F30804 		ubfx	r4, r4, #0, #9
 3040              	.LVL459:
 3041 009a 3C44     		add	r4, r4, r7
 3042 009c 3462     		str	r4, [r6, #32]
1508:Middlewares/Third_Party/FatFs/src/ff.c **** }
 3043              		.loc 1 1508 0
 3044 009e 0020     		movs	r0, #0
 3045 00a0 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 3046              	.LVL460:
 3047              	.L310:
1497:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (clst < 2 || clst >= fs->n_fatent) return FR_INT_ERR;	/* Reached to end of table or internal 
 3048              		.loc 1 1497 0
 3049 00a4 0120     		movs	r0, #1
 3050              	.LVL461:
 3051 00a6 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 3052              	.LVL462:
 3053              	.L311:
1498:Middlewares/Third_Party/FatFs/src/ff.c **** 			ofs -= csz;
 3054              		.loc 1 1498 0
 3055 00aa 0220     		movs	r0, #2
 3056              	.LVL463:
 3057 00ac BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 3058              		.cfi_endproc
 3059              	.LFE165:
 3061              		.section	.text.create_chain,"ax",%progbits
 3062              		.align	1
 3063              		.syntax unified
 3064              		.thumb
 3065              		.thumb_func
 3066              		.fpu fpv5-sp-d16
 3068              	create_chain:
 3069              	.LFB163:
1355:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD cs, ncl, scl;
 3070              		.loc 1 1355 0
 3071              		.cfi_startproc
 3072              		@ args = 0, pretend = 0, frame = 0
 3073              		@ frame_needed = 0, uses_anonymous_args = 0
 3074              	.LVL464:
 3075 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 3076              	.LCFI34:
 3077              		.cfi_def_cfa_offset 24
 3078              		.cfi_offset 4, -24
 3079              		.cfi_offset 5, -20
 3080              		.cfi_offset 6, -16
 3081              		.cfi_offset 7, -12
 3082              		.cfi_offset 8, -8
 3083              		.cfi_offset 14, -4
 3084 0004 0746     		mov	r7, r0
1358:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3085              		.loc 1 1358 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 165


 3086 0006 0668     		ldr	r6, [r0]
 3087              	.LVL465:
1361:Middlewares/Third_Party/FatFs/src/ff.c **** 		scl = fs->last_clst;				/* Get suggested cluster to start from */
 3088              		.loc 1 1361 0
 3089 0008 8846     		mov	r8, r1
 3090 000a 31B9     		cbnz	r1, .L322
1362:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (scl == 0 || scl >= fs->n_fatent) scl = 1;
 3091              		.loc 1 1362 0
 3092 000c 7569     		ldr	r5, [r6, #20]
 3093              	.LVL466:
1363:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3094              		.loc 1 1363 0
 3095 000e 8DB1     		cbz	r5, .L331
1363:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3096              		.loc 1 1363 0 is_stmt 0 discriminator 2
 3097 0010 336A     		ldr	r3, [r6, #32]
 3098 0012 9D42     		cmp	r5, r3
 3099 0014 0FD3     		bcc	.L323
1363:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3100              		.loc 1 1363 0
 3101 0016 0125     		movs	r5, #1
 3102              	.LVL467:
 3103 0018 0DE0     		b	.L323
 3104              	.LVL468:
 3105              	.L322:
1366:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs < 2) return 1;				/* Invalid FAT value */
 3106              		.loc 1 1366 0 is_stmt 1
 3107 001a FFF7FEFF 		bl	get_fat
 3108              	.LVL469:
 3109 001e 0346     		mov	r3, r0
 3110              	.LVL470:
1367:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs == 0xFFFFFFFF) return cs;	/* A disk error occurred */
 3111              		.loc 1 1367 0
 3112 0020 0128     		cmp	r0, #1
 3113 0022 4BD9     		bls	.L333
1368:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs < fs->n_fatent) return cs;	/* It is already followed by next cluster */
 3114              		.loc 1 1368 0
 3115 0024 B0F1FF3F 		cmp	r0, #-1
 3116 0028 4DD0     		beq	.L321
1369:Middlewares/Third_Party/FatFs/src/ff.c **** 		scl = clst;
 3117              		.loc 1 1369 0
 3118 002a 326A     		ldr	r2, [r6, #32]
 3119 002c 9042     		cmp	r0, r2
 3120 002e 4AD3     		bcc	.L321
1370:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3121              		.loc 1 1370 0
 3122 0030 4546     		mov	r5, r8
 3123 0032 00E0     		b	.L323
 3124              	.LVL471:
 3125              	.L331:
1363:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3126              		.loc 1 1363 0
 3127 0034 0125     		movs	r5, #1
 3128              	.LVL472:
 3129              	.L323:
1400:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (;;) {
 3130              		.loc 1 1400 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 166


 3131 0036 2C46     		mov	r4, r5
 3132 0038 0CE0     		b	.L327
 3133              	.LVL473:
 3134              	.L325:
1407:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cs == 0) break;				/* Found a free cluster */
 3135              		.loc 1 1407 0
 3136 003a 2146     		mov	r1, r4
 3137 003c 3846     		mov	r0, r7
 3138 003e FFF7FEFF 		bl	get_fat
 3139              	.LVL474:
1408:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cs == 1 || cs == 0xFFFFFFFF) return cs;	/* An error occurred */
 3140              		.loc 1 1408 0
 3141 0042 0346     		mov	r3, r0
 3142 0044 70B1     		cbz	r0, .L326
1409:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ncl == scl) return 0;		/* No free cluster */
 3143              		.loc 1 1409 0
 3144 0046 B0F1FF3F 		cmp	r0, #-1
 3145 004a 18BF     		it	ne
 3146 004c 0128     		cmpne	r0, #1
 3147 004e 3AD0     		beq	.L321
1410:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 3148              		.loc 1 1410 0
 3149 0050 AC42     		cmp	r4, r5
 3150 0052 37D0     		beq	.L338
 3151              	.LVL475:
 3152              	.L327:
1402:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ncl >= fs->n_fatent) {		/* Check wrap-around */
 3153              		.loc 1 1402 0
 3154 0054 0134     		adds	r4, r4, #1
 3155              	.LVL476:
1403:Middlewares/Third_Party/FatFs/src/ff.c **** 				ncl = 2;
 3156              		.loc 1 1403 0
 3157 0056 336A     		ldr	r3, [r6, #32]
 3158 0058 9C42     		cmp	r4, r3
 3159 005a EED3     		bcc	.L325
 3160              	.LVL477:
1405:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 3161              		.loc 1 1405 0
 3162 005c 012D     		cmp	r5, #1
 3163 005e 2FD9     		bls	.L334
1404:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (ncl > scl) return 0;	/* No free cluster */
 3164              		.loc 1 1404 0
 3165 0060 0224     		movs	r4, #2
 3166 0062 EAE7     		b	.L325
 3167              	.LVL478:
 3168              	.L326:
1412:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK && clst != 0) {
 3169              		.loc 1 1412 0
 3170 0064 4FF0FF32 		mov	r2, #-1
 3171 0068 2146     		mov	r1, r4
 3172 006a 3046     		mov	r0, r6
 3173              	.LVL479:
 3174 006c FFF7FEFF 		bl	put_fat
 3175              	.LVL480:
1413:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = put_fat(fs, clst, ncl);	/* Link it from the previous one if needed */
 3176              		.loc 1 1413 0
 3177 0070 0346     		mov	r3, r0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 167


 3178 0072 B0FA80F0 		clz	r0, r0
 3179              	.LVL481:
 3180 0076 4009     		lsrs	r0, r0, #5
 3181 0078 B8F1000F 		cmp	r8, #0
 3182 007c 08BF     		it	eq
 3183 007e 0020     		moveq	r0, #0
 3184 0080 70B9     		cbnz	r0, .L339
 3185              	.L328:
 3186              	.LVL482:
1418:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->last_clst = ncl;
 3187              		.loc 1 1418 0
 3188 0082 A3B9     		cbnz	r3, .L329
1419:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->free_clst <= fs->n_fatent - 2) fs->free_clst--;
 3189              		.loc 1 1419 0
 3190 0084 7461     		str	r4, [r6, #20]
1420:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsi_flag |= 1;
 3191              		.loc 1 1420 0
 3192 0086 B269     		ldr	r2, [r6, #24]
 3193 0088 336A     		ldr	r3, [r6, #32]
 3194              	.LVL483:
 3195 008a 023B     		subs	r3, r3, #2
 3196 008c 9A42     		cmp	r2, r3
 3197 008e 01D8     		bhi	.L330
1420:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsi_flag |= 1;
 3198              		.loc 1 1420 0 is_stmt 0 discriminator 1
 3199 0090 013A     		subs	r2, r2, #1
 3200 0092 B261     		str	r2, [r6, #24]
 3201              	.L330:
1421:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
 3202              		.loc 1 1421 0 is_stmt 1
 3203 0094 3379     		ldrb	r3, [r6, #4]	@ zero_extendqisi2
 3204 0096 43F00103 		orr	r3, r3, #1
 3205 009a 3371     		strb	r3, [r6, #4]
 3206 009c 2346     		mov	r3, r4
 3207 009e 12E0     		b	.L321
 3208              	.L339:
1414:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 3209              		.loc 1 1414 0
 3210 00a0 2246     		mov	r2, r4
 3211 00a2 4146     		mov	r1, r8
 3212 00a4 3046     		mov	r0, r6
 3213 00a6 FFF7FEFF 		bl	put_fat
 3214              	.LVL484:
 3215 00aa 0346     		mov	r3, r0
 3216              	.LVL485:
 3217 00ac E9E7     		b	.L328
 3218              	.L329:
1423:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3219              		.loc 1 1423 0
 3220 00ae 012B     		cmp	r3, #1
 3221 00b0 01D0     		beq	.L340
 3222 00b2 0123     		movs	r3, #1
 3223              	.LVL486:
 3224 00b4 07E0     		b	.L321
 3225              	.LVL487:
 3226              	.L340:
 3227 00b6 4FF0FF33 		mov	r3, #-1
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 168


 3228              	.LVL488:
 3229 00ba 04E0     		b	.L321
 3230              	.LVL489:
 3231              	.L333:
1367:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs == 0xFFFFFFFF) return cs;	/* A disk error occurred */
 3232              		.loc 1 1367 0
 3233 00bc 0123     		movs	r3, #1
 3234 00be 02E0     		b	.L321
 3235              	.LVL490:
 3236              	.L334:
1405:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 3237              		.loc 1 1405 0
 3238 00c0 0023     		movs	r3, #0
 3239 00c2 00E0     		b	.L321
 3240              	.LVL491:
 3241              	.L338:
1410:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 3242              		.loc 1 1410 0
 3243 00c4 0023     		movs	r3, #0
 3244              	.LVL492:
 3245              	.L321:
1427:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3246              		.loc 1 1427 0
 3247 00c6 1846     		mov	r0, r3
 3248 00c8 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 3249              		.cfi_endproc
 3250              	.LFE163:
 3252              		.section	.text.remove_chain,"ax",%progbits
 3253              		.align	1
 3254              		.syntax unified
 3255              		.thumb
 3256              		.thumb_func
 3257              		.fpu fpv5-sp-d16
 3259              	remove_chain:
 3260              	.LFB162:
1276:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res = FR_OK;
 3261              		.loc 1 1276 0
 3262              		.cfi_startproc
 3263              		@ args = 0, pretend = 0, frame = 0
 3264              		@ frame_needed = 0, uses_anonymous_args = 0
 3265              	.LVL493:
 3266 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 3267              	.LCFI35:
 3268              		.cfi_def_cfa_offset 24
 3269              		.cfi_offset 3, -24
 3270              		.cfi_offset 4, -20
 3271              		.cfi_offset 5, -16
 3272              		.cfi_offset 6, -12
 3273              		.cfi_offset 7, -8
 3274              		.cfi_offset 14, -4
 3275 0002 0E46     		mov	r6, r1
 3276              	.LVL494:
1279:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT || _USE_TRIM
 3277              		.loc 1 1279 0
 3278 0004 0468     		ldr	r4, [r0]
 3279              	.LVL495:
1287:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 169


 3280              		.loc 1 1287 0
 3281 0006 0129     		cmp	r1, #1
 3282 0008 30D9     		bls	.L346
 3283 000a 0746     		mov	r7, r0
 3284 000c 1146     		mov	r1, r2
 3285              	.LVL496:
1287:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3286              		.loc 1 1287 0 is_stmt 0 discriminator 2
 3287 000e 236A     		ldr	r3, [r4, #32]
 3288 0010 9E42     		cmp	r6, r3
 3289 0012 01D3     		bcc	.L352
1287:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3290              		.loc 1 1287 0
 3291 0014 0221     		movs	r1, #2
 3292 0016 2AE0     		b	.L342
 3293              	.LVL497:
 3294              	.L352:
1290:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = put_fat(fs, pclst, 0xFFFFFFFF);
 3295              		.loc 1 1290 0 is_stmt 1
 3296 0018 52B1     		cbz	r2, .L345
1291:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) return res;
 3297              		.loc 1 1291 0
 3298 001a 4FF0FF32 		mov	r2, #-1
 3299 001e 2046     		mov	r0, r4
 3300              	.LVL498:
 3301 0020 FFF7FEFF 		bl	put_fat
 3302              	.LVL499:
1292:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3303              		.loc 1 1292 0
 3304 0024 0146     		mov	r1, r0
 3305 0026 18B1     		cbz	r0, .L345
 3306 0028 21E0     		b	.L342
 3307              	.LVL500:
 3308              	.L344:
1327:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (clst < fs->n_fatent);	/* Repeat while not the last link */
 3309              		.loc 1 1327 0
 3310 002a 2E46     		mov	r6, r5
1328:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3311              		.loc 1 1328 0
 3312 002c 9542     		cmp	r5, r2
 3313 002e 1ED2     		bcs	.L342
 3314              	.LVL501:
 3315              	.L345:
1297:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nxt == 0) break;				/* Empty cluster? */
 3316              		.loc 1 1297 0
 3317 0030 3146     		mov	r1, r6
 3318 0032 3846     		mov	r0, r7
 3319 0034 FFF7FEFF 		bl	get_fat
 3320              	.LVL502:
1298:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nxt == 1) return FR_INT_ERR;	/* Internal error? */
 3321              		.loc 1 1298 0
 3322 0038 0546     		mov	r5, r0
 3323 003a D0B1     		cbz	r0, .L348
1299:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nxt == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error? */
 3324              		.loc 1 1299 0
 3325 003c 0128     		cmp	r0, #1
 3326 003e 1AD0     		beq	.L349
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 170


1300:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!_FS_EXFAT || fs->fs_type != FS_EXFAT) {
 3327              		.loc 1 1300 0
 3328 0040 B0F1FF3F 		cmp	r0, #-1
 3329 0044 19D0     		beq	.L350
1302:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) return res;
 3330              		.loc 1 1302 0
 3331 0046 0022     		movs	r2, #0
 3332 0048 3146     		mov	r1, r6
 3333 004a 2046     		mov	r0, r4
 3334              	.LVL503:
 3335 004c FFF7FEFF 		bl	put_fat
 3336              	.LVL504:
1303:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 3337              		.loc 1 1303 0
 3338 0050 0146     		mov	r1, r0
 3339 0052 60B9     		cbnz	r0, .L342
1305:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->free_clst++;
 3340              		.loc 1 1305 0
 3341 0054 A369     		ldr	r3, [r4, #24]
 3342 0056 226A     		ldr	r2, [r4, #32]
 3343 0058 901E     		subs	r0, r2, #2
 3344              	.LVL505:
 3345 005a 8342     		cmp	r3, r0
 3346 005c E5D2     		bcs	.L344
1306:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->fsi_flag |= 1;
 3347              		.loc 1 1306 0
 3348 005e 0133     		adds	r3, r3, #1
 3349 0060 A361     		str	r3, [r4, #24]
1307:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 3350              		.loc 1 1307 0
 3351 0062 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 3352 0064 43F00103 		orr	r3, r3, #1
 3353 0068 2371     		strb	r3, [r4, #4]
 3354 006a DEE7     		b	.L344
 3355              	.LVL506:
 3356              	.L346:
1287:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3357              		.loc 1 1287 0
 3358 006c 0221     		movs	r1, #2
 3359              	.LVL507:
 3360              	.L342:
1342:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3361              		.loc 1 1342 0
 3362 006e 0846     		mov	r0, r1
 3363 0070 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 3364              	.LVL508:
 3365              	.L348:
1341:Middlewares/Third_Party/FatFs/src/ff.c **** }
 3366              		.loc 1 1341 0
 3367 0072 0021     		movs	r1, #0
 3368 0074 FBE7     		b	.L342
 3369              	.L349:
1299:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nxt == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error? */
 3370              		.loc 1 1299 0
 3371 0076 0221     		movs	r1, #2
 3372 0078 F9E7     		b	.L342
 3373              	.L350:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 171


1300:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!_FS_EXFAT || fs->fs_type != FS_EXFAT) {
 3374              		.loc 1 1300 0
 3375 007a 0121     		movs	r1, #1
 3376 007c F7E7     		b	.L342
 3377              		.cfi_endproc
 3378              	.LFE162:
 3380              		.section	.text.dir_next,"ax",%progbits
 3381              		.align	1
 3382              		.syntax unified
 3383              		.thumb
 3384              		.thumb_func
 3385              		.fpu fpv5-sp-d16
 3387              	dir_next:
 3388              	.LFB166:
1523:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD ofs, clst;
 3389              		.loc 1 1523 0
 3390              		.cfi_startproc
 3391              		@ args = 0, pretend = 0, frame = 0
 3392              		@ frame_needed = 0, uses_anonymous_args = 0
 3393              	.LVL509:
 3394 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 3395              	.LCFI36:
 3396              		.cfi_def_cfa_offset 32
 3397              		.cfi_offset 3, -32
 3398              		.cfi_offset 4, -28
 3399              		.cfi_offset 5, -24
 3400              		.cfi_offset 6, -20
 3401              		.cfi_offset 7, -16
 3402              		.cfi_offset 8, -12
 3403              		.cfi_offset 9, -8
 3404              		.cfi_offset 14, -4
1525:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 3405              		.loc 1 1525 0
 3406 0004 0668     		ldr	r6, [r0]
 3407              	.LVL510:
1530:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!dp->sect || ofs >= (DWORD)((_FS_EXFAT && fs->fs_type == FS_EXFAT) ? MAX_DIR_EX : MAX_DIR)) re
 3408              		.loc 1 1530 0
 3409 0006 4369     		ldr	r3, [r0, #20]
 3410 0008 03F12005 		add	r5, r3, #32
 3411              	.LVL511:
1531:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3412              		.loc 1 1531 0
 3413 000c C369     		ldr	r3, [r0, #28]
 3414 000e 13B9     		cbnz	r3, .L371
 3415 0010 0420     		movs	r0, #4
 3416              	.LVL512:
 3417 0012 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 3418              	.LVL513:
 3419              	.L371:
1531:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3420              		.loc 1 1531 0 is_stmt 0 discriminator 2
 3421 0016 B5F5001F 		cmp	r5, #2097152
 3422 001a 02D3     		bcc	.L372
1531:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3423              		.loc 1 1531 0
 3424 001c 0420     		movs	r0, #4
 3425              	.LVL514:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 172


 3426 001e BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 3427              	.LVL515:
 3428              	.L372:
 3429 0022 8846     		mov	r8, r1
 3430 0024 0446     		mov	r4, r0
1533:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->sect++;				/* Next sector */
 3431              		.loc 1 1533 0 is_stmt 1
 3432 0026 C5F30807 		ubfx	r7, r5, #0, #9
 3433 002a 8FB9     		cbnz	r7, .L355
1534:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3434              		.loc 1 1534 0
 3435 002c 0133     		adds	r3, r3, #1
 3436 002e C361     		str	r3, [r0, #28]
1536:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ofs / SZDIRE >= fs->n_rootdir) {	/* Report EOT if it reached end of static table */
 3437              		.loc 1 1536 0
 3438 0030 8169     		ldr	r1, [r0, #24]
 3439              	.LVL516:
 3440 0032 41B9     		cbnz	r1, .L356
1537:Middlewares/Third_Party/FatFs/src/ff.c **** 				dp->sect = 0; return FR_NO_FILE;
 3441              		.loc 1 1537 0
 3442 0034 3389     		ldrh	r3, [r6, #8]
 3443 0036 B3EB551F 		cmp	r3, r5, lsr #5
 3444 003a 09D8     		bhi	.L355
1538:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 3445              		.loc 1 1538 0
 3446 003c 0023     		movs	r3, #0
 3447 003e C361     		str	r3, [r0, #28]
 3448 0040 0420     		movs	r0, #4
 3449              	.LVL517:
 3450 0042 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 3451              	.LVL518:
 3452              	.L356:
1542:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = get_fat(&dp->obj, dp->clust);			/* Get next cluster */
 3453              		.loc 1 1542 0
 3454 0046 7389     		ldrh	r3, [r6, #10]
 3455 0048 013B     		subs	r3, r3, #1
 3456 004a 13EA5523 		ands	r3, r3, r5, lsr #9
 3457 004e 06D0     		beq	.L373
 3458              	.LVL519:
 3459              	.L355:
1574:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->dir = fs->win + ofs % SS(fs);	/* Pointer to the entry in the win[] */
 3460              		.loc 1 1574 0
 3461 0050 6561     		str	r5, [r4, #20]
1575:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3462              		.loc 1 1575 0
 3463 0052 3C36     		adds	r6, r6, #60
 3464              	.LVL520:
 3465 0054 3E44     		add	r6, r6, r7
 3466              	.LVL521:
 3467 0056 2662     		str	r6, [r4, #32]
1577:Middlewares/Third_Party/FatFs/src/ff.c **** }
 3468              		.loc 1 1577 0
 3469 0058 0020     		movs	r0, #0
 3470 005a BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 3471              	.LVL522:
 3472              	.L373:
1543:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst <= 1) return FR_INT_ERR;				/* Internal error */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 173


 3473              		.loc 1 1543 0
 3474 005e FFF7FEFF 		bl	get_fat
 3475              	.LVL523:
 3476 0062 8146     		mov	r9, r0
 3477              	.LVL524:
1544:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;		/* Disk error */
 3478              		.loc 1 1544 0
 3479 0064 0128     		cmp	r0, #1
 3480 0066 48D9     		bls	.L363
1545:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst >= fs->n_fatent) {						/* Reached end of dynamic table */
 3481              		.loc 1 1545 0
 3482 0068 B0F1FF3F 		cmp	r0, #-1
 3483 006c 48D0     		beq	.L364
1546:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 3484              		.loc 1 1546 0
 3485 006e 336A     		ldr	r3, [r6, #32]
 3486 0070 9842     		cmp	r0, r3
 3487 0072 3AD3     		bcc	.L357
1548:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->sect = 0; return FR_NO_FILE;
 3488              		.loc 1 1548 0
 3489 0074 B8F1000F 		cmp	r8, #0
 3490 0078 04D1     		bne	.L358
1549:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 3491              		.loc 1 1549 0
 3492 007a 0023     		movs	r3, #0
 3493 007c E361     		str	r3, [r4, #28]
 3494 007e 0420     		movs	r0, #4
 3495              	.LVL525:
 3496 0080 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 3497              	.LVL526:
 3498              	.L358:
1551:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0) return FR_DENIED;			/* No free cluster */
 3499              		.loc 1 1551 0
 3500 0084 A169     		ldr	r1, [r4, #24]
 3501 0086 2046     		mov	r0, r4
 3502              	.LVL527:
 3503 0088 FFF7FEFF 		bl	create_chain
 3504              	.LVL528:
1552:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 1) return FR_INT_ERR;			/* Internal error */
 3505              		.loc 1 1552 0
 3506 008c 8146     		mov	r9, r0
 3507 008e 10B9     		cbnz	r0, .L374
 3508 0090 0720     		movs	r0, #7
 3509              	.LVL529:
 3510 0092 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 3511              	.LVL530:
 3512              	.L374:
1553:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
 3513              		.loc 1 1553 0
 3514 0096 0128     		cmp	r0, #1
 3515 0098 35D0     		beq	.L366
1554:Middlewares/Third_Party/FatFs/src/ff.c **** 					/* Clean-up the stretched table */
 3516              		.loc 1 1554 0
 3517 009a B0F1FF3F 		cmp	r0, #-1
 3518 009e 35D0     		beq	.L367
1557:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_set(fs->win, 0, SS(fs));				/* Clear window buffer */
 3519              		.loc 1 1557 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 174


 3520 00a0 3046     		mov	r0, r6
 3521              	.LVL531:
 3522 00a2 FFF7FEFF 		bl	sync_window
 3523              	.LVL532:
 3524 00a6 A0BB     		cbnz	r0, .L368
1558:Middlewares/Third_Party/FatFs/src/ff.c **** 					for (n = 0, fs->winsect = clust2sect(fs, clst); n < fs->csize; n++, fs->winsect++) {	/* Fill t
 3525              		.loc 1 1558 0
 3526 00a8 4FF40072 		mov	r2, #512
 3527 00ac 0021     		movs	r1, #0
 3528 00ae 06F13C00 		add	r0, r6, #60
 3529 00b2 FFF7FEFF 		bl	mem_set
 3530              	.LVL533:
1559:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->wflag = 1;
 3531              		.loc 1 1559 0
 3532 00b6 4946     		mov	r1, r9
 3533 00b8 3046     		mov	r0, r6
 3534 00ba FFF7FEFF 		bl	clust2sect
 3535              	.LVL534:
 3536 00be B063     		str	r0, [r6, #56]
 3537 00c0 4FF00008 		mov	r8, #0
 3538              	.LVL535:
 3539              	.L359:
1559:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->wflag = 1;
 3540              		.loc 1 1559 0 is_stmt 0 discriminator 1
 3541 00c4 7389     		ldrh	r3, [r6, #10]
 3542 00c6 9845     		cmp	r8, r3
 3543 00c8 0BD2     		bcs	.L375
1560:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (sync_window(fs) != FR_OK) return FR_DISK_ERR;
 3544              		.loc 1 1560 0 is_stmt 1
 3545 00ca 0123     		movs	r3, #1
 3546 00cc F370     		strb	r3, [r6, #3]
1561:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 3547              		.loc 1 1561 0
 3548 00ce 3046     		mov	r0, r6
 3549 00d0 FFF7FEFF 		bl	sync_window
 3550              	.LVL536:
 3551 00d4 00BB     		cbnz	r0, .L369
1559:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->wflag = 1;
 3552              		.loc 1 1559 0 discriminator 2
 3553 00d6 08F10108 		add	r8, r8, #1
 3554              	.LVL537:
 3555 00da B36B     		ldr	r3, [r6, #56]
 3556 00dc 0133     		adds	r3, r3, #1
 3557 00de B363     		str	r3, [r6, #56]
 3558 00e0 F0E7     		b	.L359
 3559              	.L375:
1563:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 3560              		.loc 1 1563 0
 3561 00e2 B36B     		ldr	r3, [r6, #56]
 3562 00e4 A3EB0803 		sub	r3, r3, r8
 3563 00e8 B363     		str	r3, [r6, #56]
 3564              	.LVL538:
 3565              	.L357:
1569:Middlewares/Third_Party/FatFs/src/ff.c **** 				dp->sect = clust2sect(fs, clst);
 3566              		.loc 1 1569 0
 3567 00ea C4F81890 		str	r9, [r4, #24]
1570:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 175


 3568              		.loc 1 1570 0
 3569 00ee 4946     		mov	r1, r9
 3570 00f0 3046     		mov	r0, r6
 3571 00f2 FFF7FEFF 		bl	clust2sect
 3572              	.LVL539:
 3573 00f6 E061     		str	r0, [r4, #28]
 3574 00f8 AAE7     		b	.L355
 3575              	.LVL540:
 3576              	.L363:
1544:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;		/* Disk error */
 3577              		.loc 1 1544 0
 3578 00fa 0220     		movs	r0, #2
 3579              	.LVL541:
 3580 00fc BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 3581              	.LVL542:
 3582              	.L364:
1545:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst >= fs->n_fatent) {						/* Reached end of dynamic table */
 3583              		.loc 1 1545 0
 3584 0100 0120     		movs	r0, #1
 3585              	.LVL543:
 3586 0102 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 3587              	.LVL544:
 3588              	.L366:
1553:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
 3589              		.loc 1 1553 0
 3590 0106 0220     		movs	r0, #2
 3591              	.LVL545:
 3592 0108 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 3593              	.LVL546:
 3594              	.L367:
1554:Middlewares/Third_Party/FatFs/src/ff.c **** 					/* Clean-up the stretched table */
 3595              		.loc 1 1554 0
 3596 010c 0120     		movs	r0, #1
 3597              	.LVL547:
 3598 010e BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 3599              	.LVL548:
 3600              	.L368:
1557:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_set(fs->win, 0, SS(fs));				/* Clear window buffer */
 3601              		.loc 1 1557 0
 3602 0112 0120     		movs	r0, #1
 3603 0114 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 3604              	.LVL549:
 3605              	.L369:
1561:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 3606              		.loc 1 1561 0
 3607 0118 0120     		movs	r0, #1
1578:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3608              		.loc 1 1578 0
 3609 011a BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 3610              		.cfi_endproc
 3611              	.LFE166:
 3613              		.section	.text.dir_alloc,"ax",%progbits
 3614              		.align	1
 3615              		.syntax unified
 3616              		.thumb
 3617              		.thumb_func
 3618              		.fpu fpv5-sp-d16
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 176


 3620              	dir_alloc:
 3621              	.LFB167:
1593:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 3622              		.loc 1 1593 0
 3623              		.cfi_startproc
 3624              		@ args = 0, pretend = 0, frame = 0
 3625              		@ frame_needed = 0, uses_anonymous_args = 0
 3626              	.LVL550:
 3627 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 3628              	.LCFI37:
 3629              		.cfi_def_cfa_offset 24
 3630              		.cfi_offset 3, -24
 3631              		.cfi_offset 4, -20
 3632              		.cfi_offset 5, -16
 3633              		.cfi_offset 6, -12
 3634              		.cfi_offset 7, -8
 3635              		.cfi_offset 14, -4
 3636 0002 0446     		mov	r4, r0
 3637 0004 0F46     		mov	r7, r1
1596:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3638              		.loc 1 1596 0
 3639 0006 0668     		ldr	r6, [r0]
 3640              	.LVL551:
1599:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 3641              		.loc 1 1599 0
 3642 0008 0021     		movs	r1, #0
 3643              	.LVL552:
 3644 000a FFF7FEFF 		bl	dir_sdi
 3645              	.LVL553:
1600:Middlewares/Third_Party/FatFs/src/ff.c **** 		n = 0;
 3646              		.loc 1 1600 0
 3647 000e 0246     		mov	r2, r0
 3648 0010 B8B9     		cbnz	r0, .L377
 3649 0012 0025     		movs	r5, #0
 3650 0014 06E0     		b	.L379
 3651              	.LVL554:
 3652              	.L381:
1612:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 3653              		.loc 1 1612 0
 3654 0016 0025     		movs	r5, #0
 3655              	.LVL555:
 3656              	.L378:
1614:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (res == FR_OK);	/* Next entry with table stretch enabled */
 3657              		.loc 1 1614 0
 3658 0018 0121     		movs	r1, #1
 3659 001a 2046     		mov	r0, r4
 3660              	.LVL556:
 3661 001c FFF7FEFF 		bl	dir_next
 3662              	.LVL557:
1615:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3663              		.loc 1 1615 0
 3664 0020 0246     		mov	r2, r0
 3665 0022 70B9     		cbnz	r0, .L377
 3666              	.LVL558:
 3667              	.L379:
1603:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 3668              		.loc 1 1603 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 177


 3669 0024 E169     		ldr	r1, [r4, #28]
 3670 0026 3046     		mov	r0, r6
 3671              	.LVL559:
 3672 0028 FFF7FEFF 		bl	move_window
 3673              	.LVL560:
1604:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 3674              		.loc 1 1604 0
 3675 002c 0246     		mov	r2, r0
 3676 002e 40B9     		cbnz	r0, .L377
1608:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 3677              		.loc 1 1608 0
 3678 0030 236A     		ldr	r3, [r4, #32]
 3679 0032 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3680 0034 002B     		cmp	r3, #0
 3681 0036 18BF     		it	ne
 3682 0038 E52B     		cmpne	r3, #229
 3683 003a ECD1     		bne	.L381
1610:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
 3684              		.loc 1 1610 0
 3685 003c 0135     		adds	r5, r5, #1
 3686              	.LVL561:
 3687 003e BD42     		cmp	r5, r7
 3688 0040 EAD1     		bne	.L378
 3689              	.LVL562:
 3690              	.L377:
1618:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 3691              		.loc 1 1618 0
 3692 0042 042A     		cmp	r2, #4
 3693 0044 01D0     		beq	.L384
 3694              	.LVL563:
 3695              	.L380:
1620:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3696              		.loc 1 1620 0
 3697 0046 1046     		mov	r0, r2
 3698 0048 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 3699              	.LVL564:
 3700              	.L384:
1618:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 3701              		.loc 1 1618 0
 3702 004a 0722     		movs	r2, #7
 3703              	.LVL565:
 3704 004c FBE7     		b	.L380
 3705              		.cfi_endproc
 3706              	.LFE167:
 3708              		.section	.text.dir_read,"ax",%progbits
 3709              		.align	1
 3710              		.syntax unified
 3711              		.thumb
 3712              		.thumb_func
 3713              		.fpu fpv5-sp-d16
 3715              	dir_read:
 3716              	.LFB175:
2135:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res = FR_NO_FILE;
 3717              		.loc 1 2135 0
 3718              		.cfi_startproc
 3719              		@ args = 0, pretend = 0, frame = 0
 3720              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 178


 3721              	.LVL566:
 3722 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 3723              	.LCFI38:
 3724              		.cfi_def_cfa_offset 32
 3725              		.cfi_offset 3, -32
 3726              		.cfi_offset 4, -28
 3727              		.cfi_offset 5, -24
 3728              		.cfi_offset 6, -20
 3729              		.cfi_offset 7, -16
 3730              		.cfi_offset 8, -12
 3731              		.cfi_offset 9, -8
 3732              		.cfi_offset 14, -4
 3733 0004 0446     		mov	r4, r0
 3734 0006 8846     		mov	r8, r1
 3735              	.LVL567:
2137:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE a, c;
 3736              		.loc 1 2137 0
 3737 0008 0768     		ldr	r7, [r0]
 3738              	.LVL568:
2140:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 3739              		.loc 1 2140 0
 3740 000a 4FF0FF09 		mov	r9, #255
 3741 000e 4E46     		mov	r6, r9
2136:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = dp->obj.fs;
 3742              		.loc 1 2136 0
 3743 0010 0425     		movs	r5, #4
2143:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(fs, dp->sect);
 3744              		.loc 1 2143 0
 3745 0012 2CE0     		b	.L386
 3746              	.LVL569:
 3747              	.L403:
2172:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (c & LLEF) {			/* Is it start of an LFN sequence? */
 3748              		.loc 1 2172 0
 3749 0014 0F2B     		cmp	r3, #15
 3750 0016 19D1     		bne	.L389
2173:Middlewares/Third_Party/FatFs/src/ff.c **** 						sum = dp->dir[LDIR_Chksum];
 3751              		.loc 1 2173 0
 3752 0018 12F0400F 		tst	r2, #64
 3753 001c 06D0     		beq	.L390
2174:Middlewares/Third_Party/FatFs/src/ff.c **** 						c &= (BYTE)~LLEF; ord = c;
 3754              		.loc 1 2174 0
 3755 001e 91F80D90 		ldrb	r9, [r1, #13]	@ zero_extendqisi2
 3756              	.LVL570:
2175:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->blk_ofs = dp->dptr;
 3757              		.loc 1 2175 0
 3758 0022 02F0BF02 		and	r2, r2, #191
 3759              	.LVL571:
2176:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 3760              		.loc 1 2176 0
 3761 0026 6369     		ldr	r3, [r4, #20]
 3762              	.LVL572:
 3763 0028 2363     		str	r3, [r4, #48]
2175:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->blk_ofs = dp->dptr;
 3764              		.loc 1 2175 0
 3765 002a 1646     		mov	r6, r2
 3766              	.LVL573:
 3767              	.L390:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 179


2179:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {					/* An SFN entry is found */
 3768              		.loc 1 2179 0
 3769 002c B242     		cmp	r2, r6
 3770 002e 01D0     		beq	.L401
 3771 0030 FF26     		movs	r6, #255
 3772              	.LVL574:
 3773 0032 16E0     		b	.L388
 3774              	.LVL575:
 3775              	.L401:
2179:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {					/* An SFN entry is found */
 3776              		.loc 1 2179 0 is_stmt 0 discriminator 1
 3777 0034 4B7B     		ldrb	r3, [r1, #13]	@ zero_extendqisi2
 3778 0036 9945     		cmp	r9, r3
 3779 0038 01D0     		beq	.L402
2179:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {					/* An SFN entry is found */
 3780              		.loc 1 2179 0
 3781 003a FF26     		movs	r6, #255
 3782              	.LVL576:
 3783 003c 11E0     		b	.L388
 3784              	.LVL577:
 3785              	.L402:
2179:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {					/* An SFN entry is found */
 3786              		.loc 1 2179 0 discriminator 3
 3787 003e F868     		ldr	r0, [r7, #12]
 3788 0040 FFF7FEFF 		bl	pick_lfn
 3789              	.LVL578:
 3790 0044 78B3     		cbz	r0, .L399
2179:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {					/* An SFN entry is found */
 3791              		.loc 1 2179 0 discriminator 5
 3792 0046 013E     		subs	r6, r6, #1
 3793              	.LVL579:
 3794 0048 F6B2     		uxtb	r6, r6
 3795 004a 0AE0     		b	.L388
 3796              	.LVL580:
 3797              	.L389:
2181:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->blk_ofs = 0xFFFFFFFF;			/* It has no LFN. */
 3798              		.loc 1 2181 0 is_stmt 1
 3799 004c 26B9     		cbnz	r6, .L391
2181:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->blk_ofs = 0xFFFFFFFF;			/* It has no LFN. */
 3800              		.loc 1 2181 0 is_stmt 0 discriminator 1
 3801 004e 0846     		mov	r0, r1
 3802 0050 FFF7FEFF 		bl	sum_sfn
 3803              	.LVL581:
 3804 0054 8145     		cmp	r9, r0
 3805 0056 29D0     		beq	.L387
 3806              	.L391:
2182:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 3807              		.loc 1 2182 0 is_stmt 1
 3808 0058 4FF0FF33 		mov	r3, #-1
 3809 005c 2363     		str	r3, [r4, #48]
 3810 005e 25E0     		b	.L387
 3811              	.LVL582:
 3812              	.L395:
2170:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
 3813              		.loc 1 2170 0
 3814 0060 FF26     		movs	r6, #255
 3815              	.LVL583:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 180


 3816              	.L388:
2193:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) break;
 3817              		.loc 1 2193 0
 3818 0062 0021     		movs	r1, #0
 3819 0064 2046     		mov	r0, r4
 3820 0066 FFF7FEFF 		bl	dir_next
 3821              	.LVL584:
2194:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3822              		.loc 1 2194 0
 3823 006a 0546     		mov	r5, r0
 3824 006c F0B9     		cbnz	r0, .L387
 3825              	.LVL585:
 3826              	.L386:
2143:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(fs, dp->sect);
 3827              		.loc 1 2143 0
 3828 006e E169     		ldr	r1, [r4, #28]
 3829 0070 E1B1     		cbz	r1, .L387
2144:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) break;
 3830              		.loc 1 2144 0
 3831 0072 3846     		mov	r0, r7
 3832 0074 FFF7FEFF 		bl	move_window
 3833              	.LVL586:
2145:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = dp->dir[DIR_Name];	/* Test for the entry type */
 3834              		.loc 1 2145 0
 3835 0078 0546     		mov	r5, r0
 3836 007a B8B9     		cbnz	r0, .L387
2146:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 0) {
 3837              		.loc 1 2146 0
 3838 007c 216A     		ldr	r1, [r4, #32]
 3839 007e 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
 3840              	.LVL587:
2147:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_NO_FILE; break; /* Reached to end of the directory */
 3841              		.loc 1 2147 0
 3842 0080 9AB1     		cbz	r2, .L394
2167:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0	/* LFN configuration */
 3843              		.loc 1 2167 0
 3844 0082 CB7A     		ldrb	r3, [r1, #11]	@ zero_extendqisi2
 3845 0084 03F03F03 		and	r3, r3, #63
 3846              	.LVL588:
 3847 0088 A371     		strb	r3, [r4, #6]
2169:Middlewares/Third_Party/FatFs/src/ff.c **** 				ord = 0xFF;
 3848              		.loc 1 2169 0
 3849 008a 2E2A     		cmp	r2, #46
 3850 008c 18BF     		it	ne
 3851 008e E52A     		cmpne	r2, #229
 3852 0090 E6D0     		beq	.L395
2169:Middlewares/Third_Party/FatFs/src/ff.c **** 				ord = 0xFF;
 3853              		.loc 1 2169 0 is_stmt 0 discriminator 1
 3854 0092 23F02000 		bic	r0, r3, #32
 3855              	.LVL589:
 3856 0096 0828     		cmp	r0, #8
 3857 0098 14BF     		ite	ne
 3858 009a 0020     		movne	r0, #0
 3859 009c 0120     		moveq	r0, #1
 3860 009e 4045     		cmp	r0, r8
 3861 00a0 B8D0     		beq	.L403
2170:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 181


 3862              		.loc 1 2170 0 is_stmt 1
 3863 00a2 FF26     		movs	r6, #255
 3864              	.LVL590:
 3865 00a4 DDE7     		b	.L388
 3866              	.LVL591:
 3867              	.L399:
2179:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {					/* An SFN entry is found */
 3868              		.loc 1 2179 0
 3869 00a6 FF26     		movs	r6, #255
 3870              	.LVL592:
 3871 00a8 DBE7     		b	.L388
 3872              	.LVL593:
 3873              	.L394:
2148:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 3874              		.loc 1 2148 0
 3875 00aa 0425     		movs	r5, #4
 3876              	.LVL594:
 3877              	.L387:
2197:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 3878              		.loc 1 2197 0
 3879 00ac 0DB1     		cbz	r5, .L393
2197:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 3880              		.loc 1 2197 0 is_stmt 0 discriminator 1
 3881 00ae 0023     		movs	r3, #0
 3882 00b0 E361     		str	r3, [r4, #28]
 3883              	.L393:
2199:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3884              		.loc 1 2199 0 is_stmt 1
 3885 00b2 2846     		mov	r0, r5
 3886 00b4 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 3887              		.cfi_endproc
 3888              	.LFE175:
 3890              		.section	.text.dir_remove,"ax",%progbits
 3891              		.align	1
 3892              		.syntax unified
 3893              		.thumb
 3894              		.thumb_func
 3895              		.fpu fpv5-sp-d16
 3897              	dir_remove:
 3898              	.LFB178:
2399:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 3899              		.loc 1 2399 0
 3900              		.cfi_startproc
 3901              		@ args = 0, pretend = 0, frame = 0
 3902              		@ frame_needed = 0, uses_anonymous_args = 0
 3903              	.LVL595:
 3904 0000 70B5     		push	{r4, r5, r6, lr}
 3905              	.LCFI39:
 3906              		.cfi_def_cfa_offset 16
 3907              		.cfi_offset 4, -16
 3908              		.cfi_offset 5, -12
 3909              		.cfi_offset 6, -8
 3910              		.cfi_offset 14, -4
 3911 0002 0446     		mov	r4, r0
2401:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0	/* LFN configuration */
 3912              		.loc 1 2401 0
 3913 0004 0568     		ldr	r5, [r0]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 182


 3914              	.LVL596:
2403:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3915              		.loc 1 2403 0
 3916 0006 4669     		ldr	r6, [r0, #20]
 3917              	.LVL597:
2405:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 3918              		.loc 1 2405 0
 3919 0008 016B     		ldr	r1, [r0, #48]
 3920 000a B1F1FF3F 		cmp	r1, #-1
 3921 000e 1CD0     		beq	.L409
2405:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 3922              		.loc 1 2405 0 is_stmt 0 discriminator 1
 3923 0010 FFF7FEFF 		bl	dir_sdi
 3924              	.LVL598:
 3925 0014 0346     		mov	r3, r0
 3926              	.L405:
 3927              	.LVL599:
2406:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
 3928              		.loc 1 2406 0 is_stmt 1 discriminator 4
 3929 0016 B3B9     		cbnz	r3, .L406
 3930              	.LVL600:
 3931              	.L408:
2408:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 3932              		.loc 1 2408 0
 3933 0018 E169     		ldr	r1, [r4, #28]
 3934 001a 2846     		mov	r0, r5
 3935 001c FFF7FEFF 		bl	move_window
 3936              	.LVL601:
2409:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Mark an entry 'deleted' */
 3937              		.loc 1 2409 0
 3938 0020 0346     		mov	r3, r0
 3939 0022 70B9     		cbnz	r0, .L407
2414:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 3940              		.loc 1 2414 0
 3941 0024 226A     		ldr	r2, [r4, #32]
 3942 0026 E521     		movs	r1, #229
 3943 0028 1170     		strb	r1, [r2]
2416:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dp->dptr >= last) break;	/* If reached last entry then all entries of the object has been de
 3944              		.loc 1 2416 0
 3945 002a 0122     		movs	r2, #1
 3946 002c EA70     		strb	r2, [r5, #3]
2417:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_next(dp, 0);	/* Next entry */
 3947              		.loc 1 2417 0
 3948 002e 6269     		ldr	r2, [r4, #20]
 3949 0030 9642     		cmp	r6, r2
 3950 0032 06D9     		bls	.L407
2418:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (res == FR_OK);
 3951              		.loc 1 2418 0
 3952 0034 0021     		movs	r1, #0
 3953 0036 2046     		mov	r0, r4
 3954              	.LVL602:
 3955 0038 FFF7FEFF 		bl	dir_next
 3956              	.LVL603:
2419:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_NO_FILE) res = FR_INT_ERR;
 3957              		.loc 1 2419 0
 3958 003c 0346     		mov	r3, r0
 3959 003e 0028     		cmp	r0, #0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 183


 3960 0040 EAD0     		beq	.L408
 3961              	.L407:
 3962              	.LVL604:
2420:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3963              		.loc 1 2420 0
 3964 0042 042B     		cmp	r3, #4
 3965 0044 03D0     		beq	.L412
 3966              	.LVL605:
 3967              	.L406:
2432:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3968              		.loc 1 2432 0
 3969 0046 1846     		mov	r0, r3
 3970 0048 70BD     		pop	{r4, r5, r6, pc}
 3971              	.LVL606:
 3972              	.L409:
2405:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 3973              		.loc 1 2405 0
 3974 004a 0023     		movs	r3, #0
 3975 004c E3E7     		b	.L405
 3976              	.LVL607:
 3977              	.L412:
2420:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3978              		.loc 1 2420 0
 3979 004e 0223     		movs	r3, #2
 3980              	.LVL608:
 3981 0050 F9E7     		b	.L406
 3982              		.cfi_endproc
 3983              	.LFE178:
 3985              		.section	.text.unlock_fs,"ax",%progbits
 3986              		.align	1
 3987              		.syntax unified
 3988              		.thumb
 3989              		.thumb_func
 3990              		.fpu fpv5-sp-d16
 3992              	unlock_fs:
 3993              	.LFB150:
 755:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs && res != FR_NOT_ENABLED && res != FR_INVALID_DRIVE && res != FR_TIMEOUT) {
 3994              		.loc 1 755 0
 3995              		.cfi_startproc
 3996              		@ args = 0, pretend = 0, frame = 0
 3997              		@ frame_needed = 0, uses_anonymous_args = 0
 3998              	.LVL609:
 756:Middlewares/Third_Party/FatFs/src/ff.c **** 		ff_rel_grant(fs->sobj);
 3999              		.loc 1 756 0
 4000 0000 0028     		cmp	r0, #0
 4001 0002 18BF     		it	ne
 4002 0004 0C29     		cmpne	r1, #12
 4003 0006 0BD0     		beq	.L416
 755:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs && res != FR_NOT_ENABLED && res != FR_INVALID_DRIVE && res != FR_TIMEOUT) {
 4004              		.loc 1 755 0 discriminator 1
 4005 0008 08B5     		push	{r3, lr}
 4006              	.LCFI40:
 4007              		.cfi_def_cfa_offset 8
 4008              		.cfi_offset 3, -8
 4009              		.cfi_offset 14, -4
 756:Middlewares/Third_Party/FatFs/src/ff.c **** 		ff_rel_grant(fs->sobj);
 4010              		.loc 1 756 0 discriminator 1
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 184


 4011 000a B1F10F02 		subs	r2, r1, #15
 4012 000e 18BF     		it	ne
 4013 0010 0122     		movne	r2, #1
 4014 0012 0B29     		cmp	r1, #11
 4015 0014 03D0     		beq	.L413
 4016 0016 12B1     		cbz	r2, .L413
 757:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 4017              		.loc 1 757 0
 4018 0018 0069     		ldr	r0, [r0, #16]
 4019              	.LVL610:
 4020 001a FFF7FEFF 		bl	ff_rel_grant
 4021              	.LVL611:
 4022              	.L413:
 4023 001e 08BD     		pop	{r3, pc}
 4024              	.LVL612:
 4025              	.L416:
 4026              	.LCFI41:
 4027              		.cfi_def_cfa_offset 0
 4028              		.cfi_restore 3
 4029              		.cfi_restore 14
 4030 0020 7047     		bx	lr
 4031              		.cfi_endproc
 4032              	.LFE150:
 4034              		.section	.text.create_name,"ax",%progbits
 4035              		.align	1
 4036              		.syntax unified
 4037              		.thumb
 4038              		.thumb_func
 4039              		.fpu fpv5-sp-d16
 4041              	create_name:
 4042              	.LFB180:
2622:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0	/* LFN configuration */
 4043              		.loc 1 2622 0
 4044              		.cfi_startproc
 4045              		@ args = 0, pretend = 0, frame = 8
 4046              		@ frame_needed = 0, uses_anonymous_args = 0
 4047              	.LVL613:
 4048 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 4049              	.LCFI42:
 4050              		.cfi_def_cfa_offset 36
 4051              		.cfi_offset 4, -36
 4052              		.cfi_offset 5, -32
 4053              		.cfi_offset 6, -28
 4054              		.cfi_offset 7, -24
 4055              		.cfi_offset 8, -20
 4056              		.cfi_offset 9, -16
 4057              		.cfi_offset 10, -12
 4058              		.cfi_offset 11, -8
 4059              		.cfi_offset 14, -4
 4060 0004 83B0     		sub	sp, sp, #12
 4061              	.LCFI43:
 4062              		.cfi_def_cfa_offset 48
 4063 0006 0746     		mov	r7, r0
 4064 0008 8A46     		mov	r10, r1
2630:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (;;) {
 4065              		.loc 1 2630 0
 4066 000a D1F80090 		ldr	r9, [r1]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 185


 4067              	.LVL614:
 4068 000e 0368     		ldr	r3, [r0]
 4069 0010 DD68     		ldr	r5, [r3, #12]
 4070              	.LVL615:
 4071 0012 0024     		movs	r4, #0
 4072 0014 23E0     		b	.L426
 4073              	.LVL616:
 4074              	.L423:
2635:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 4075              		.loc 1 2635 0 discriminator 2
 4076 0016 08F10108 		add	r8, r8, #1
 4077              	.LVL617:
 4078              	.L421:
2635:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 4079              		.loc 1 2635 0 is_stmt 0 discriminator 1
 4080 001a 19F80830 		ldrb	r3, [r9, r8]	@ zero_extendqisi2
 4081 001e 5C2B     		cmp	r3, #92
 4082 0020 18BF     		it	ne
 4083 0022 2F2B     		cmpne	r3, #47
 4084 0024 F7D0     		beq	.L423
 4085              	.L420:
2652:Middlewares/Third_Party/FatFs/src/ff.c **** 	cf = (w < ' ') ? NS_LAST : 0;		/* Set last segment flag if end of the path */
 4086              		.loc 1 2652 0 is_stmt 1
 4087 0026 09EB0803 		add	r3, r9, r8
 4088 002a CAF80030 		str	r3, [r10]
2653:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH != 0
 4089              		.loc 1 2653 0
 4090 002e 1F28     		cmp	r0, #31
 4091 0030 33D8     		bhi	.L464
 4092 0032 4FF00408 		mov	r8, #4
 4093              	.LVL618:
 4094              	.L427:
2655:Middlewares/Third_Party/FatFs/src/ff.c **** 		(di == 2 && lfn[di - 1] == '.' && lfn[di - 2] == '.')) {	/* Is this segment a dot name? */
 4095              		.loc 1 2655 0 discriminator 4
 4096 0036 012C     		cmp	r4, #1
 4097 0038 32D0     		beq	.L470
 4098              	.L428:
2655:Middlewares/Third_Party/FatFs/src/ff.c **** 		(di == 2 && lfn[di - 1] == '.' && lfn[di - 2] == '.')) {	/* Is this segment a dot name? */
 4099              		.loc 1 2655 0 is_stmt 0 discriminator 3
 4100 003a 022C     		cmp	r4, #2
 4101 003c 3BD0     		beq	.L471
 4102              	.LVL619:
 4103              	.L430:
2664:Middlewares/Third_Party/FatFs/src/ff.c **** 		w = lfn[di - 1];
 4104              		.loc 1 2664 0 is_stmt 1
 4105 003e 002C     		cmp	r4, #0
 4106 0040 59D0     		beq	.L434
2665:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (w != ' ' && w != '.') break;
 4107              		.loc 1 2665 0
 4108 0042 6FF00043 		mvn	r3, #-2147483648
 4109 0046 2344     		add	r3, r3, r4
 4110 0048 35F81330 		ldrh	r3, [r5, r3, lsl #1]
 4111              	.LVL620:
2666:Middlewares/Third_Party/FatFs/src/ff.c **** 		di--;
 4112              		.loc 1 2666 0
 4113 004c 202B     		cmp	r3, #32
 4114 004e 18BF     		it	ne
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 186


 4115 0050 2E2B     		cmpne	r3, #46
 4116 0052 50D1     		bne	.L434
2667:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 4117              		.loc 1 2667 0
 4118 0054 013C     		subs	r4, r4, #1
 4119              	.LVL621:
 4120 0056 F2E7     		b	.L430
 4121              	.LVL622:
 4122              	.L425:
2650:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 4123              		.loc 1 2650 0
 4124 0058 25F81460 		strh	r6, [r5, r4, lsl #1]	@ movhi
2632:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (w < ' ') break;				/* Break if end of the path name */
 4125              		.loc 1 2632 0
 4126 005c 4446     		mov	r4, r8
 4127              	.LVL623:
 4128              	.L426:
 4129 005e 04F10108 		add	r8, r4, #1
 4130              	.LVL624:
 4131 0062 19F80400 		ldrb	r0, [r9, r4]	@ zero_extendqisi2
 4132              	.LVL625:
2633:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (w == '/' || w == '\\') {	/* Break if a separator is found */
 4133              		.loc 1 2633 0
 4134 0066 1F28     		cmp	r0, #31
 4135 0068 DDD9     		bls	.L420
2634:Middlewares/Third_Party/FatFs/src/ff.c **** 			while (p[si] == '/' || p[si] == '\\') si++;	/* Skip duplicated separator if exist */
 4136              		.loc 1 2634 0
 4137 006a 5C28     		cmp	r0, #92
 4138 006c 18BF     		it	ne
 4139 006e 2F28     		cmpne	r0, #47
 4140 0070 D3D0     		beq	.L421
2638:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_LFN_UNICODE
 4141              		.loc 1 2638 0
 4142 0072 FE2C     		cmp	r4, #254
 4143 0074 00F20381 		bhi	.L461
2646:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!w) return FR_INVALID_NAME;	/* Reject invalid code */
 4144              		.loc 1 2646 0
 4145 0078 0121     		movs	r1, #1
 4146 007a FFF7FEFF 		bl	ff_convert
 4147              	.LVL626:
2647:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 4148              		.loc 1 2647 0
 4149 007e 0646     		mov	r6, r0
 4150 0080 0028     		cmp	r0, #0
 4151 0082 00F0FE80 		beq	.L462
2649:Middlewares/Third_Party/FatFs/src/ff.c **** 		lfn[di++] = w;					/* Store the Unicode character */
 4152              		.loc 1 2649 0
 4153 0086 7F28     		cmp	r0, #127
 4154 0088 E6D8     		bhi	.L425
2649:Middlewares/Third_Party/FatFs/src/ff.c **** 		lfn[di++] = w;					/* Store the Unicode character */
 4155              		.loc 1 2649 0 is_stmt 0 discriminator 1
 4156 008a 0146     		mov	r1, r0
 4157 008c 7E48     		ldr	r0, .L481
 4158              	.LVL627:
 4159 008e FFF7FEFF 		bl	chk_chr
 4160              	.LVL628:
 4161 0092 0028     		cmp	r0, #0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 187


 4162 0094 E0D0     		beq	.L425
2649:Middlewares/Third_Party/FatFs/src/ff.c **** 		lfn[di++] = w;					/* Store the Unicode character */
 4163              		.loc 1 2649 0
 4164 0096 0620     		movs	r0, #6
 4165 0098 32E0     		b	.L424
 4166              	.LVL629:
 4167              	.L464:
2653:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH != 0
 4168              		.loc 1 2653 0 is_stmt 1
 4169 009a 4FF00008 		mov	r8, #0
 4170              	.LVL630:
 4171 009e CAE7     		b	.L427
 4172              	.LVL631:
 4173              	.L470:
2655:Middlewares/Third_Party/FatFs/src/ff.c **** 		(di == 2 && lfn[di - 1] == '.' && lfn[di - 2] == '.')) {	/* Is this segment a dot name? */
 4174              		.loc 1 2655 0 discriminator 1
 4175 00a0 6FF00043 		mvn	r3, #-2147483648
 4176 00a4 2344     		add	r3, r3, r4
 4177 00a6 35F81330 		ldrh	r3, [r5, r3, lsl #1]
 4178 00aa 2E2B     		cmp	r3, #46
 4179 00ac C5D1     		bne	.L428
 4180              	.L429:
2657:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = 0; i < 11; i++)		/* Create dot name for SFN entry */
 4181              		.loc 1 2657 0
 4182 00ae 0023     		movs	r3, #0
 4183 00b0 25F81430 		strh	r3, [r5, r4, lsl #1]	@ movhi
 4184              	.LVL632:
2658:Middlewares/Third_Party/FatFs/src/ff.c **** 			dp->fn[i] = (i < di) ? '.' : ' ';
 4185              		.loc 1 2658 0
 4186 00b4 12E0     		b	.L431
 4187              	.LVL633:
 4188              	.L471:
2656:Middlewares/Third_Party/FatFs/src/ff.c **** 		lfn[di] = 0;
 4189              		.loc 1 2656 0
 4190 00b6 6FF00043 		mvn	r3, #-2147483648
 4191 00ba 2344     		add	r3, r3, r4
 4192 00bc 35F81330 		ldrh	r3, [r5, r3, lsl #1]
 4193 00c0 2E2B     		cmp	r3, #46
 4194 00c2 BCD1     		bne	.L430
2656:Middlewares/Third_Party/FatFs/src/ff.c **** 		lfn[di] = 0;
 4195              		.loc 1 2656 0 is_stmt 0 discriminator 1
 4196 00c4 714B     		ldr	r3, .L481+4
 4197 00c6 2344     		add	r3, r3, r4
 4198 00c8 35F81330 		ldrh	r3, [r5, r3, lsl #1]
 4199 00cc 2E2B     		cmp	r3, #46
 4200 00ce B6D1     		bne	.L430
 4201 00d0 EDE7     		b	.L429
 4202              	.LVL634:
 4203              	.L465:
2659:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->fn[i] = cf | NS_DOT;		/* This is a dot entry */
 4204              		.loc 1 2659 0 is_stmt 1
 4205 00d2 2021     		movs	r1, #32
 4206              	.L432:
2659:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->fn[i] = cf | NS_DOT;		/* This is a dot entry */
 4207              		.loc 1 2659 0 is_stmt 0 discriminator 4
 4208 00d4 FA18     		adds	r2, r7, r3
 4209 00d6 82F82410 		strb	r1, [r2, #36]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 188


2658:Middlewares/Third_Party/FatFs/src/ff.c **** 			dp->fn[i] = (i < di) ? '.' : ' ';
 4210              		.loc 1 2658 0 is_stmt 1 discriminator 4
 4211 00da 0133     		adds	r3, r3, #1
 4212              	.LVL635:
 4213              	.L431:
2658:Middlewares/Third_Party/FatFs/src/ff.c **** 			dp->fn[i] = (i < di) ? '.' : ' ';
 4214              		.loc 1 2658 0 is_stmt 0 discriminator 2
 4215 00dc 0A2B     		cmp	r3, #10
 4216 00de 03D8     		bhi	.L472
2659:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->fn[i] = cf | NS_DOT;		/* This is a dot entry */
 4217              		.loc 1 2659 0 is_stmt 1
 4218 00e0 A342     		cmp	r3, r4
 4219 00e2 F6D2     		bcs	.L465
 4220 00e4 2E21     		movs	r1, #46
 4221 00e6 F5E7     		b	.L432
 4222              	.L472:
2660:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_OK;
 4223              		.loc 1 2660 0
 4224 00e8 3B44     		add	r3, r3, r7
 4225              	.LVL636:
 4226 00ea 48F02008 		orr	r8, r8, #32
 4227              	.LVL637:
 4228 00ee 83F82480 		strb	r8, [r3, #36]
2661:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 4229              		.loc 1 2661 0
 4230 00f2 0020     		movs	r0, #0
 4231              	.LVL638:
 4232 00f4 04E0     		b	.L424
 4233              	.LVL639:
 4234              	.L434:
2669:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (di == 0) return FR_INVALID_NAME;	/* Reject nul name */
 4235              		.loc 1 2669 0
 4236 00f6 0023     		movs	r3, #0
 4237 00f8 25F81430 		strh	r3, [r5, r4, lsl #1]	@ movhi
2670:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4238              		.loc 1 2670 0
 4239 00fc 1CB9     		cbnz	r4, .L473
 4240 00fe 0620     		movs	r0, #6
 4241              	.LVL640:
 4242              	.L424:
2803:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4243              		.loc 1 2803 0
 4244 0100 03B0     		add	sp, sp, #12
 4245              	.LCFI44:
 4246              		.cfi_remember_state
 4247              		.cfi_def_cfa_offset 36
 4248              		@ sp needed
 4249 0102 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 4250              	.LVL641:
 4251              	.L473:
 4252              	.LCFI45:
 4253              		.cfi_restore_state
2673:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (si = 0; lfn[si] == ' ' || lfn[si] == '.'; si++) ;	/* Strip leading spaces and dots */
 4254              		.loc 1 2673 0
 4255 0106 0B22     		movs	r2, #11
 4256 0108 2021     		movs	r1, #32
 4257 010a 07F12400 		add	r0, r7, #36
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 189


 4258 010e FFF7FEFF 		bl	mem_set
 4259              	.LVL642:
2674:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (si) cf |= NS_LOSS | NS_LFN;
 4260              		.loc 1 2674 0
 4261 0112 0023     		movs	r3, #0
 4262 0114 00E0     		b	.L436
 4263              	.LVL643:
 4264              	.L437:
2674:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (si) cf |= NS_LOSS | NS_LFN;
 4265              		.loc 1 2674 0 is_stmt 0 discriminator 3
 4266 0116 0133     		adds	r3, r3, #1
 4267              	.LVL644:
 4268              	.L436:
2674:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (si) cf |= NS_LOSS | NS_LFN;
 4269              		.loc 1 2674 0 discriminator 1
 4270 0118 35F81320 		ldrh	r2, [r5, r3, lsl #1]
 4271 011c 2E2A     		cmp	r2, #46
 4272 011e 18BF     		it	ne
 4273 0120 202A     		cmpne	r2, #32
 4274 0122 F8D0     		beq	.L437
2675:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (di && lfn[di - 1] != '.') di--;	/* Find extension (di<=si: no extension) */
 4275              		.loc 1 2675 0 is_stmt 1
 4276 0124 1BB1     		cbz	r3, .L439
2675:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (di && lfn[di - 1] != '.') di--;	/* Find extension (di<=si: no extension) */
 4277              		.loc 1 2675 0 is_stmt 0 discriminator 1
 4278 0126 48F00308 		orr	r8, r8, #3
 4279              	.LVL645:
 4280 012a 00E0     		b	.L439
 4281              	.L441:
2676:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4282              		.loc 1 2676 0 is_stmt 1 discriminator 3
 4283 012c 013C     		subs	r4, r4, #1
 4284              	.LVL646:
 4285              	.L439:
2676:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4286              		.loc 1 2676 0 is_stmt 0 discriminator 1
 4287 012e 6CB1     		cbz	r4, .L467
2676:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4288              		.loc 1 2676 0 discriminator 2
 4289 0130 6FF00042 		mvn	r2, #-2147483648
 4290 0134 2244     		add	r2, r2, r4
 4291 0136 35F81220 		ldrh	r2, [r5, r2, lsl #1]
 4292 013a 2E2A     		cmp	r2, #46
 4293 013c F6D1     		bne	.L441
 4294 013e 4FF0080B 		mov	fp, #8
 4295 0142 4FF0000A 		mov	r10, #0
 4296              	.LVL647:
 4297 0146 CDF804A0 		str	r10, [sp, #4]
 4298 014a 08E0     		b	.L440
 4299              	.LVL648:
 4300              	.L467:
 4301 014c A246     		mov	r10, r4
 4302              	.LVL649:
 4303 014e 4FF0080B 		mov	fp, #8
 4304 0152 0022     		movs	r2, #0
 4305 0154 0192     		str	r2, [sp, #4]
 4306 0156 02E0     		b	.L440
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 190


 4307              	.LVL650:
 4308              	.L443:
2683:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 4309              		.loc 1 2683 0 is_stmt 1
 4310 0158 48F00308 		orr	r8, r8, #3
 4311              	.LVL651:
2680:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!w) break;					/* Break on end of the LFN */
 4312              		.loc 1 2680 0
 4313 015c 4B46     		mov	r3, r9
 4314              	.LVL652:
 4315              	.L440:
 4316 015e 03F10109 		add	r9, r3, #1
 4317              	.LVL653:
 4318 0162 35F81360 		ldrh	r6, [r5, r3, lsl #1]
 4319              	.LVL654:
2681:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (w == ' ' || (w == '.' && si != di)) {	/* Remove spaces and dots */
 4320              		.loc 1 2681 0
 4321 0166 1EB3     		cbz	r6, .L442
2682:Middlewares/Third_Party/FatFs/src/ff.c **** 			cf |= NS_LOSS | NS_LFN; continue;
 4322              		.loc 1 2682 0
 4323 0168 202E     		cmp	r6, #32
 4324 016a F5D0     		beq	.L443
2682:Middlewares/Third_Party/FatFs/src/ff.c **** 			cf |= NS_LOSS | NS_LFN; continue;
 4325              		.loc 1 2682 0 is_stmt 0 discriminator 1
 4326 016c 2E2E     		cmp	r6, #46
 4327 016e 14BF     		ite	ne
 4328 0170 0023     		movne	r3, #0
 4329 0172 0123     		moveq	r3, #1
 4330 0174 4C45     		cmp	r4, r9
 4331 0176 08BF     		it	eq
 4332 0178 0023     		moveq	r3, #0
 4333 017a 002B     		cmp	r3, #0
 4334 017c ECD1     		bne	.L443
2686:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ni == 11) {				/* Long extension */
 4335              		.loc 1 2686 0 is_stmt 1
 4336 017e 4C45     		cmp	r4, r9
 4337 0180 18BF     		it	ne
 4338 0182 DA45     		cmpne	r10, fp
 4339 0184 32D3     		bcc	.L446
2687:Middlewares/Third_Party/FatFs/src/ff.c **** 				cf |= NS_LOSS | NS_LFN; break;
 4340              		.loc 1 2687 0
 4341 0186 BBF10B0F 		cmp	fp, #11
 4342 018a 0FD0     		beq	.L474
2690:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (si > di) break;			/* No extension */
 4343              		.loc 1 2690 0
 4344 018c 4C45     		cmp	r4, r9
 4345 018e 01D0     		beq	.L448
2690:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (si > di) break;			/* No extension */
 4346              		.loc 1 2690 0 is_stmt 0 discriminator 1
 4347 0190 48F00308 		orr	r8, r8, #3
 4348              	.LVL655:
 4349              	.L448:
2691:Middlewares/Third_Party/FatFs/src/ff.c **** 			si = di; i = 8; ni = 11;	/* Enter extension section */
 4350              		.loc 1 2691 0 is_stmt 1
 4351 0194 4C45     		cmp	r4, r9
 4352 0196 0BD3     		bcc	.L442
 4353              	.LVL656:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 191


2693:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 4354              		.loc 1 2693 0
 4355 0198 019B     		ldr	r3, [sp, #4]
 4356 019a 9B00     		lsls	r3, r3, #2
 4357 019c DBB2     		uxtb	r3, r3
 4358 019e 0193     		str	r3, [sp, #4]
 4359              	.LVL657:
2692:Middlewares/Third_Party/FatFs/src/ff.c **** 			b <<= 2; continue;
 4360              		.loc 1 2692 0
 4361 01a0 2346     		mov	r3, r4
 4362 01a2 4FF00B0B 		mov	fp, #11
 4363 01a6 4FF0080A 		mov	r10, #8
2693:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 4364              		.loc 1 2693 0
 4365 01aa D8E7     		b	.L440
 4366              	.LVL658:
 4367              	.L474:
2688:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 4368              		.loc 1 2688 0
 4369 01ac 48F00308 		orr	r8, r8, #3
 4370              	.LVL659:
 4371              	.L442:
2727:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4372              		.loc 1 2727 0
 4373 01b0 97F82430 		ldrb	r3, [r7, #36]	@ zero_extendqisi2
 4374 01b4 E52B     		cmp	r3, #229
 4375 01b6 50D0     		beq	.L475
 4376              	.L455:
2729:Middlewares/Third_Party/FatFs/src/ff.c **** 	if ((b & 0x0C) == 0x0C || (b & 0x03) == 0x03) cf |= NS_LFN;	/* Create LFN entry when there are com
 4377              		.loc 1 2729 0
 4378 01b8 BBF1080F 		cmp	fp, #8
 4379 01bc 51D0     		beq	.L476
 4380              	.L456:
 4381 01be 0199     		ldr	r1, [sp, #4]
 4382 01c0 01F00C02 		and	r2, r1, #12
2730:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(cf & NS_LFN)) {						/* When LFN is in 8.3 format without extended character, NT flags are c
 4383              		.loc 1 2730 0
 4384 01c4 0C2A     		cmp	r2, #12
 4385 01c6 51D0     		beq	.L457
2730:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(cf & NS_LFN)) {						/* When LFN is in 8.3 format without extended character, NT flags are c
 4386              		.loc 1 2730 0 is_stmt 0 discriminator 2
 4387 01c8 01F00303 		and	r3, r1, #3
 4388 01cc 032B     		cmp	r3, #3
 4389 01ce 4DD0     		beq	.L457
 4390              	.L458:
2731:Middlewares/Third_Party/FatFs/src/ff.c **** 		if ((b & 0x03) == 0x01) cf |= NS_EXT;	/* NT flag (Extension has only small capital) */
 4391              		.loc 1 2731 0 is_stmt 1
 4392 01d0 18F0020F 		tst	r8, #2
 4393 01d4 06D1     		bne	.L459
2732:Middlewares/Third_Party/FatFs/src/ff.c **** 		if ((b & 0x0C) == 0x04) cf |= NS_BODY;	/* NT flag (Filename has only small capital) */
 4394              		.loc 1 2732 0
 4395 01d6 019B     		ldr	r3, [sp, #4]
 4396 01d8 03F00303 		and	r3, r3, #3
 4397 01dc 012B     		cmp	r3, #1
 4398 01de 48D0     		beq	.L477
 4399              	.L460:
2733:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 192


 4400              		.loc 1 2733 0
 4401 01e0 042A     		cmp	r2, #4
 4402 01e2 49D0     		beq	.L478
 4403              	.L459:
2736:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4404              		.loc 1 2736 0
 4405 01e4 87F82F80 		strb	r8, [r7, #47]
2738:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4406              		.loc 1 2738 0
 4407 01e8 0020     		movs	r0, #0
 4408 01ea 89E7     		b	.L424
 4409              	.L446:
2696:Middlewares/Third_Party/FatFs/src/ff.c **** #ifdef _EXCVT
 4410              		.loc 1 2696 0
 4411 01ec 7F2E     		cmp	r6, #127
 4412 01ee 0BD8     		bhi	.L479
 4413              	.L449:
2712:Middlewares/Third_Party/FatFs/src/ff.c **** 				w = '_'; cf |= NS_LOSS | NS_LFN;/* Lossy conversion */
 4414              		.loc 1 2712 0
 4415 01f0 BEB9     		cbnz	r6, .L480
 4416              	.L451:
 4417              	.LVL660:
2713:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
 4418              		.loc 1 2713 0
 4419 01f2 48F00308 		orr	r8, r8, #3
 4420              	.LVL661:
 4421 01f6 5F26     		movs	r6, #95
 4422              	.LVL662:
 4423              	.L453:
2724:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 4424              		.loc 1 2724 0
 4425 01f8 07EB0A03 		add	r3, r7, r10
 4426 01fc 83F82460 		strb	r6, [r3, #36]
2680:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!w) break;					/* Break on end of the LFN */
 4427              		.loc 1 2680 0
 4428 0200 4B46     		mov	r3, r9
2724:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 4429              		.loc 1 2724 0
 4430 0202 0AF1010A 		add	r10, r10, #1
 4431              	.LVL663:
 4432 0206 AAE7     		b	.L440
 4433              	.L479:
2698:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (w) w = ExCvt[w - 0x80];	/* Convert extended character to upper (SBCS) */
 4434              		.loc 1 2698 0
 4435 0208 0021     		movs	r1, #0
 4436 020a 3046     		mov	r0, r6
 4437 020c FFF7FEFF 		bl	ff_convert
 4438              	.LVL664:
2699:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 4439              		.loc 1 2699 0
 4440 0210 0646     		mov	r6, r0
 4441 0212 18B1     		cbz	r0, .L450
2699:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 4442              		.loc 1 2699 0 is_stmt 0 discriminator 1
 4443 0214 A0F18006 		sub	r6, r0, #128
 4444 0218 1D4B     		ldr	r3, .L481+8
 4445 021a 9E5D     		ldrb	r6, [r3, r6]	@ zero_extendqisi2
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 193


 4446              	.LVL665:
 4447              	.L450:
2703:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 4448              		.loc 1 2703 0 is_stmt 1
 4449 021c 48F00208 		orr	r8, r8, #2
 4450              	.LVL666:
 4451 0220 E6E7     		b	.L449
 4452              	.L480:
2712:Middlewares/Third_Party/FatFs/src/ff.c **** 				w = '_'; cf |= NS_LOSS | NS_LFN;/* Lossy conversion */
 4453              		.loc 1 2712 0 discriminator 1
 4454 0222 3146     		mov	r1, r6
 4455 0224 1B48     		ldr	r0, .L481+12
 4456 0226 FFF7FEFF 		bl	chk_chr
 4457              	.LVL667:
 4458 022a 0028     		cmp	r0, #0
 4459 022c E1D1     		bne	.L451
2715:Middlewares/Third_Party/FatFs/src/ff.c **** 					b |= 2;
 4460              		.loc 1 2715 0
 4461 022e A6F14103 		sub	r3, r6, #65
 4462 0232 9BB2     		uxth	r3, r3
 4463 0234 192B     		cmp	r3, #25
 4464 0236 04D8     		bhi	.L454
2716:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
 4465              		.loc 1 2716 0
 4466 0238 019B     		ldr	r3, [sp, #4]
 4467 023a 43F00203 		orr	r3, r3, #2
 4468 023e 0193     		str	r3, [sp, #4]
 4469              	.LVL668:
 4470 0240 DAE7     		b	.L453
 4471              	.L454:
2718:Middlewares/Third_Party/FatFs/src/ff.c **** 						b |= 1; w -= 0x20;
 4472              		.loc 1 2718 0
 4473 0242 A6F16103 		sub	r3, r6, #97
 4474 0246 9BB2     		uxth	r3, r3
 4475 0248 192B     		cmp	r3, #25
 4476 024a D5D8     		bhi	.L453
2719:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 4477              		.loc 1 2719 0
 4478 024c 019B     		ldr	r3, [sp, #4]
 4479 024e 43F00103 		orr	r3, r3, #1
 4480 0252 0193     		str	r3, [sp, #4]
 4481              	.LVL669:
 4482 0254 203E     		subs	r6, r6, #32
 4483              	.LVL670:
 4484 0256 B6B2     		uxth	r6, r6
 4485              	.LVL671:
 4486 0258 CEE7     		b	.L453
 4487              	.L475:
2727:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4488              		.loc 1 2727 0 discriminator 1
 4489 025a 0523     		movs	r3, #5
 4490 025c 87F82430 		strb	r3, [r7, #36]
 4491 0260 AAE7     		b	.L455
 4492              	.L476:
2729:Middlewares/Third_Party/FatFs/src/ff.c **** 	if ((b & 0x0C) == 0x0C || (b & 0x03) == 0x03) cf |= NS_LFN;	/* Create LFN entry when there are com
 4493              		.loc 1 2729 0 discriminator 1
 4494 0262 019B     		ldr	r3, [sp, #4]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 194


 4495 0264 9B00     		lsls	r3, r3, #2
 4496 0266 DBB2     		uxtb	r3, r3
 4497 0268 0193     		str	r3, [sp, #4]
 4498              	.LVL672:
 4499 026a A8E7     		b	.L456
 4500              	.L457:
2730:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(cf & NS_LFN)) {						/* When LFN is in 8.3 format without extended character, NT flags are c
 4501              		.loc 1 2730 0 discriminator 3
 4502 026c 48F00208 		orr	r8, r8, #2
 4503              	.LVL673:
 4504 0270 AEE7     		b	.L458
 4505              	.L477:
2732:Middlewares/Third_Party/FatFs/src/ff.c **** 		if ((b & 0x0C) == 0x04) cf |= NS_BODY;	/* NT flag (Filename has only small capital) */
 4506              		.loc 1 2732 0 discriminator 1
 4507 0272 48F01008 		orr	r8, r8, #16
 4508              	.LVL674:
 4509 0276 B3E7     		b	.L460
 4510              	.L478:
2733:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 4511              		.loc 1 2733 0 discriminator 1
 4512 0278 48F00808 		orr	r8, r8, #8
 4513              	.LVL675:
 4514 027c B2E7     		b	.L459
 4515              	.LVL676:
 4516              	.L461:
2638:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_LFN_UNICODE
 4517              		.loc 1 2638 0
 4518 027e 0620     		movs	r0, #6
 4519              	.LVL677:
 4520 0280 3EE7     		b	.L424
 4521              	.LVL678:
 4522              	.L462:
2647:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 4523              		.loc 1 2647 0
 4524 0282 0620     		movs	r0, #6
 4525              	.LVL679:
 4526 0284 3CE7     		b	.L424
 4527              	.L482:
 4528 0286 00BF     		.align	2
 4529              	.L481:
 4530 0288 00000000 		.word	.LC0
 4531 028c FEFFFF7F 		.word	2147483646
 4532 0290 00000000 		.word	.LANCHOR5
 4533 0294 0C000000 		.word	.LC1
 4534              		.cfi_endproc
 4535              	.LFE180:
 4537              		.section	.text.get_fileinfo,"ax",%progbits
 4538              		.align	1
 4539              		.syntax unified
 4540              		.thumb
 4541              		.thumb_func
 4542              		.fpu fpv5-sp-d16
 4544              	get_fileinfo:
 4545              	.LFB179:
2448:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, j;
 4546              		.loc 1 2448 0
 4547              		.cfi_startproc
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 195


 4548              		@ args = 0, pretend = 0, frame = 0
 4549              		@ frame_needed = 0, uses_anonymous_args = 0
 4550              	.LVL680:
 4551 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 4552              	.LCFI46:
 4553              		.cfi_def_cfa_offset 24
 4554              		.cfi_offset 4, -24
 4555              		.cfi_offset 5, -20
 4556              		.cfi_offset 6, -16
 4557              		.cfi_offset 7, -12
 4558              		.cfi_offset 8, -8
 4559              		.cfi_offset 14, -4
2454:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 4560              		.loc 1 2454 0
 4561 0004 D0F80080 		ldr	r8, [r0]
 4562              	.LVL681:
2458:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!dp->sect) return;	/* Exit if read pointer has reached end of directory */
 4563              		.loc 1 2458 0
 4564 0008 0023     		movs	r3, #0
 4565 000a 8B75     		strb	r3, [r1, #22]
2459:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4566              		.loc 1 2459 0
 4567 000c C369     		ldr	r3, [r0, #28]
 4568 000e 002B     		cmp	r3, #0
 4569 0010 69D0     		beq	.L483
 4570 0012 0D46     		mov	r5, r1
 4571 0014 0646     		mov	r6, r0
2469:Middlewares/Third_Party/FatFs/src/ff.c **** 			i = j = 0;
 4572              		.loc 1 2469 0
 4573 0016 036B     		ldr	r3, [r0, #48]
 4574 0018 B3F1FF3F 		cmp	r3, #-1
 4575 001c 14D0     		beq	.L486
 4576 001e 0024     		movs	r4, #0
 4577              	.LVL682:
 4578              	.L485:
2471:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_LFN_UNICODE
 4579              		.loc 1 2471 0
 4580 0020 D8F80C30 		ldr	r3, [r8, #12]
 4581 0024 671C     		adds	r7, r4, #1
 4582              	.LVL683:
 4583 0026 33F81400 		ldrh	r0, [r3, r4, lsl #1]
 4584              	.LVL684:
 4585 002a 50B1     		cbz	r0, .L487
2473:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (w == 0) { i = 0; break; }	/* No LFN if it could not be converted */
 4586              		.loc 1 2473 0
 4587 002c 0021     		movs	r1, #0
 4588 002e FFF7FEFF 		bl	ff_convert
 4589              	.LVL685:
2474:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (_DF1S && w >= 0x100) {	/* Put 1st byte if it is a DBC (always false at SBCS cfg) */
 4590              		.loc 1 2474 0
 4591 0032 28B1     		cbz	r0, .L500
2479:Middlewares/Third_Party/FatFs/src/ff.c **** 				fno->fname[i++] = (TCHAR)w;
 4592              		.loc 1 2479 0
 4593 0034 FE2C     		cmp	r4, #254
 4594 0036 0BD8     		bhi	.L501
 4595              	.LVL686:
2480:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 196


 4596              		.loc 1 2480 0
 4597 0038 2C44     		add	r4, r4, r5
 4598 003a A075     		strb	r0, [r4, #22]
 4599 003c 3C46     		mov	r4, r7
 4600 003e EFE7     		b	.L485
 4601              	.LVL687:
 4602              	.L500:
2474:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (_DF1S && w >= 0x100) {	/* Put 1st byte if it is a DBC (always false at SBCS cfg) */
 4603              		.loc 1 2474 0
 4604 0040 0024     		movs	r4, #0
 4605              	.LVL688:
 4606              	.L487:
2482:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 4607              		.loc 1 2482 0
 4608 0042 2C44     		add	r4, r4, r5
 4609              	.LVL689:
 4610 0044 0023     		movs	r3, #0
 4611 0046 A375     		strb	r3, [r4, #22]
 4612              	.LVL690:
 4613              	.L486:
2487:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (i < 11) {		/* Copy name body and extension */
 4614              		.loc 1 2487 0
 4615 0048 AC7D     		ldrb	r4, [r5, #22]	@ zero_extendqisi2
 4616              	.LVL691:
2486:Middlewares/Third_Party/FatFs/src/ff.c **** 	lfv = fno->fname[i];	/* LFN is exist if non-zero */
 4617              		.loc 1 2486 0
 4618 004a 0022     		movs	r2, #0
 4619 004c 1346     		mov	r3, r2
2488:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = (TCHAR)dp->dir[i++];
 4620              		.loc 1 2488 0
 4621 004e 12E0     		b	.L489
 4622              	.LVL692:
 4623              	.L501:
2479:Middlewares/Third_Party/FatFs/src/ff.c **** 				fno->fname[i++] = (TCHAR)w;
 4624              		.loc 1 2479 0
 4625 0050 0024     		movs	r4, #0
 4626              	.LVL693:
 4627 0052 F6E7     		b	.L487
 4628              	.LVL694:
 4629              	.L507:
2491:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == 9) {						/* Insert a . if extension is exist */
 4630              		.loc 1 2491 0
 4631 0054 E523     		movs	r3, #229
 4632              	.LVL695:
 4633 0056 17E0     		b	.L491
 4634              	.LVL696:
 4635              	.L508:
2493:Middlewares/Third_Party/FatFs/src/ff.c **** 			fno->altname[j++] = '.';
 4636              		.loc 1 2493 0
 4637 0058 14B9     		cbnz	r4, .L493
2493:Middlewares/Third_Party/FatFs/src/ff.c **** 			fno->altname[j++] = '.';
 4638              		.loc 1 2493 0 is_stmt 0 discriminator 1
 4639 005a A818     		adds	r0, r5, r2
 4640 005c 2E27     		movs	r7, #46
 4641 005e 8775     		strb	r7, [r0, #22]
 4642              	.L493:
 4643              	.LVL697:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 197


2494:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 4644              		.loc 1 2494 0 is_stmt 1
 4645 0060 A818     		adds	r0, r5, r2
 4646 0062 2E27     		movs	r7, #46
 4647 0064 4772     		strb	r7, [r0, #9]
 4648 0066 0132     		adds	r2, r2, #1
 4649              	.LVL698:
 4650 0068 10E0     		b	.L492
 4651              	.L509:
2505:Middlewares/Third_Party/FatFs/src/ff.c **** 				c += 0x20;			/* To lower */
 4652              		.loc 1 2505 0
 4653 006a 1027     		movs	r7, #16
 4654 006c 1CE0     		b	.L496
 4655              	.L495:
2508:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 4656              		.loc 1 2508 0
 4657 006e A818     		adds	r0, r5, r2
 4658 0070 8375     		strb	r3, [r0, #22]
 4659              	.L494:
2510:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 4660              		.loc 1 2510 0
 4661 0072 0132     		adds	r2, r2, #1
 4662              	.LVL699:
 4663              	.L490:
2505:Middlewares/Third_Party/FatFs/src/ff.c **** 				c += 0x20;			/* To lower */
 4664              		.loc 1 2505 0
 4665 0074 0B46     		mov	r3, r1
 4666              	.LVL700:
 4667              	.L489:
2488:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = (TCHAR)dp->dir[i++];
 4668              		.loc 1 2488 0
 4669 0076 0A2B     		cmp	r3, #10
 4670 0078 1BD8     		bhi	.L506
2489:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == ' ') continue;				/* Skip padding spaces */
 4671              		.loc 1 2489 0
 4672 007a 306A     		ldr	r0, [r6, #32]
 4673 007c 591C     		adds	r1, r3, #1
 4674              	.LVL701:
 4675 007e C35C     		ldrb	r3, [r0, r3]	@ zero_extendqisi2
 4676              	.LVL702:
2490:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == RDDEM) c = (TCHAR)DDEM;	/* Restore replaced DDEM character */
 4677              		.loc 1 2490 0
 4678 0080 202B     		cmp	r3, #32
 4679 0082 F7D0     		beq	.L490
2491:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == 9) {						/* Insert a . if extension is exist */
 4680              		.loc 1 2491 0
 4681 0084 052B     		cmp	r3, #5
 4682 0086 E5D0     		beq	.L507
 4683              	.LVL703:
 4684              	.L491:
2492:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!lfv) fno->fname[j] = '.';
 4685              		.loc 1 2492 0
 4686 0088 0929     		cmp	r1, #9
 4687 008a E5D0     		beq	.L508
 4688              	.L492:
2503:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!lfv) {
 4689              		.loc 1 2503 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 198


 4690 008c A818     		adds	r0, r5, r2
 4691 008e 4372     		strb	r3, [r0, #9]
2504:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (IsUpper(c) && (dp->dir[DIR_NTres] & ((i >= 9) ? NS_EXT : NS_BODY))) {
 4692              		.loc 1 2504 0
 4693 0090 002C     		cmp	r4, #0
 4694 0092 EED1     		bne	.L494
2505:Middlewares/Third_Party/FatFs/src/ff.c **** 				c += 0x20;			/* To lower */
 4695              		.loc 1 2505 0
 4696 0094 A3F14100 		sub	r0, r3, #65
 4697 0098 C0B2     		uxtb	r0, r0
 4698 009a 1928     		cmp	r0, #25
 4699 009c E7D8     		bhi	.L495
2505:Middlewares/Third_Party/FatFs/src/ff.c **** 				c += 0x20;			/* To lower */
 4700              		.loc 1 2505 0 is_stmt 0 discriminator 1
 4701 009e 306A     		ldr	r0, [r6, #32]
 4702 00a0 007B     		ldrb	r0, [r0, #12]	@ zero_extendqisi2
 4703 00a2 0829     		cmp	r1, #8
 4704 00a4 E1D8     		bhi	.L509
2505:Middlewares/Third_Party/FatFs/src/ff.c **** 				c += 0x20;			/* To lower */
 4705              		.loc 1 2505 0
 4706 00a6 0827     		movs	r7, #8
 4707              	.L496:
2505:Middlewares/Third_Party/FatFs/src/ff.c **** 				c += 0x20;			/* To lower */
 4708              		.loc 1 2505 0 discriminator 5
 4709 00a8 0742     		tst	r7, r0
 4710 00aa E0D0     		beq	.L495
2506:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 4711              		.loc 1 2506 0 is_stmt 1
 4712 00ac 2033     		adds	r3, r3, #32
 4713              	.LVL704:
 4714 00ae DBB2     		uxtb	r3, r3
 4715              	.LVL705:
 4716 00b0 DDE7     		b	.L495
 4717              	.LVL706:
 4718              	.L506:
2512:Middlewares/Third_Party/FatFs/src/ff.c **** 		fno->fname[j] = 0;
 4719              		.loc 1 2512 0
 4720 00b2 34B9     		cbnz	r4, .L498
2513:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!dp->dir[DIR_NTres]) j = 0;	/* Altname is no longer needed if neither LFN nor case info is ex
 4721              		.loc 1 2513 0
 4722 00b4 AB18     		adds	r3, r5, r2
 4723              	.LVL707:
 4724 00b6 0021     		movs	r1, #0
 4725 00b8 9975     		strb	r1, [r3, #22]
2514:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 4726              		.loc 1 2514 0
 4727 00ba 336A     		ldr	r3, [r6, #32]
 4728 00bc 1B7B     		ldrb	r3, [r3, #12]	@ zero_extendqisi2
 4729 00be 03B9     		cbnz	r3, .L498
 4730 00c0 0A46     		mov	r2, r1
 4731              	.LVL708:
 4732              	.L498:
2516:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4733              		.loc 1 2516 0
 4734 00c2 2A44     		add	r2, r2, r5
 4735              	.LVL709:
 4736 00c4 0023     		movs	r3, #0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 199


 4737 00c6 5372     		strb	r3, [r2, #9]
2530:Middlewares/Third_Party/FatFs/src/ff.c **** 	fno->fsize = ld_dword(dp->dir + DIR_FileSize);	/* Size */
 4738              		.loc 1 2530 0
 4739 00c8 336A     		ldr	r3, [r6, #32]
 4740 00ca DB7A     		ldrb	r3, [r3, #11]	@ zero_extendqisi2
 4741 00cc 2B72     		strb	r3, [r5, #8]
2531:Middlewares/Third_Party/FatFs/src/ff.c **** 	tm = ld_dword(dp->dir + DIR_ModTime);			/* Timestamp */
 4742              		.loc 1 2531 0
 4743 00ce 306A     		ldr	r0, [r6, #32]
 4744 00d0 1C30     		adds	r0, r0, #28
 4745 00d2 FFF7FEFF 		bl	ld_dword
 4746              	.LVL710:
 4747 00d6 2860     		str	r0, [r5]
2532:Middlewares/Third_Party/FatFs/src/ff.c **** 	fno->ftime = (WORD)tm; fno->fdate = (WORD)(tm >> 16);
 4748              		.loc 1 2532 0
 4749 00d8 306A     		ldr	r0, [r6, #32]
 4750 00da 1630     		adds	r0, r0, #22
 4751 00dc FFF7FEFF 		bl	ld_dword
 4752              	.LVL711:
2533:Middlewares/Third_Party/FatFs/src/ff.c **** }
 4753              		.loc 1 2533 0
 4754 00e0 E880     		strh	r0, [r5, #6]	@ movhi
 4755 00e2 000C     		lsrs	r0, r0, #16
 4756              	.LVL712:
 4757 00e4 A880     		strh	r0, [r5, #4]	@ movhi
 4758              	.LVL713:
 4759              	.L483:
 4760 00e6 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 4761              		.cfi_endproc
 4762              	.LFE179:
 4764              		.section	.text.cmp_lfn,"ax",%progbits
 4765              		.align	1
 4766              		.syntax unified
 4767              		.thumb
 4768              		.thumb_func
 4769              		.fpu fpv5-sp-d16
 4771              	cmp_lfn:
 4772              	.LFB170:
1681:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, s;
 4773              		.loc 1 1681 0
 4774              		.cfi_startproc
 4775              		@ args = 0, pretend = 0, frame = 0
 4776              		@ frame_needed = 0, uses_anonymous_args = 0
 4777              	.LVL714:
 4778 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 4779              	.LCFI47:
 4780              		.cfi_def_cfa_offset 32
 4781              		.cfi_offset 4, -32
 4782              		.cfi_offset 5, -28
 4783              		.cfi_offset 6, -24
 4784              		.cfi_offset 7, -20
 4785              		.cfi_offset 8, -16
 4786              		.cfi_offset 9, -12
 4787              		.cfi_offset 10, -8
 4788              		.cfi_offset 14, -4
 4789 0004 8146     		mov	r9, r0
 4790 0006 8846     		mov	r8, r1
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 200


1686:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4791              		.loc 1 1686 0
 4792 0008 01F11A00 		add	r0, r1, #26
 4793              	.LVL715:
 4794 000c FFF7FEFF 		bl	ld_word
 4795              	.LVL716:
 4796 0010 B0BB     		cbnz	r0, .L516
1688:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4797              		.loc 1 1688 0
 4798 0012 98F80050 		ldrb	r5, [r8]	@ zero_extendqisi2
 4799 0016 05F03F05 		and	r5, r5, #63
 4800 001a 013D     		subs	r5, r5, #1
 4801 001c 05EB4503 		add	r3, r5, r5, lsl #1
 4802 0020 05EB8305 		add	r5, r5, r3, lsl #2
 4803              	.LVL717:
1690:Middlewares/Third_Party/FatFs/src/ff.c **** 		uc = ld_word(dir + LfnOfs[s]);		/* Pick an LFN character */
 4804              		.loc 1 1690 0
 4805 0024 0127     		movs	r7, #1
 4806 0026 0024     		movs	r4, #0
 4807 0028 04E0     		b	.L512
 4808              	.LVL718:
 4809              	.L513:
1698:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 4810              		.loc 1 1698 0
 4811 002a 4FF6FF73 		movw	r3, #65535
 4812 002e 9842     		cmp	r0, r3
 4813 0030 2FD1     		bne	.L519
 4814              	.LVL719:
 4815              	.L514:
1690:Middlewares/Third_Party/FatFs/src/ff.c **** 		uc = ld_word(dir + LfnOfs[s]);		/* Pick an LFN character */
 4816              		.loc 1 1690 0 discriminator 2
 4817 0032 0134     		adds	r4, r4, #1
 4818              	.LVL720:
 4819              	.L512:
1690:Middlewares/Third_Party/FatFs/src/ff.c **** 		uc = ld_word(dir + LfnOfs[s]);		/* Pick an LFN character */
 4820              		.loc 1 1690 0 is_stmt 0 discriminator 1
 4821 0034 0C2C     		cmp	r4, #12
 4822 0036 17D8     		bhi	.L524
1691:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (wc) {
 4823              		.loc 1 1691 0 is_stmt 1
 4824 0038 1C4B     		ldr	r3, .L525
 4825 003a 185D     		ldrb	r0, [r3, r4]	@ zero_extendqisi2
 4826 003c 4044     		add	r0, r0, r8
 4827 003e FFF7FEFF 		bl	ld_word
 4828              	.LVL721:
 4829 0042 0646     		mov	r6, r0
 4830              	.LVL722:
1692:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i >= _MAX_LFN || ff_wtoupper(uc) != ff_wtoupper(lfnbuf[i++])) {	/* Compare it */
 4831              		.loc 1 1692 0
 4832 0044 002F     		cmp	r7, #0
 4833 0046 F0D0     		beq	.L513
1693:Middlewares/Third_Party/FatFs/src/ff.c **** 				return 0;					/* Not matched */
 4834              		.loc 1 1693 0
 4835 0048 FE2D     		cmp	r5, #254
 4836 004a 1CD8     		bhi	.L517
1693:Middlewares/Third_Party/FatFs/src/ff.c **** 				return 0;					/* Not matched */
 4837              		.loc 1 1693 0 is_stmt 0 discriminator 1
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 201


 4838 004c FFF7FEFF 		bl	ff_wtoupper
 4839              	.LVL723:
 4840 0050 0746     		mov	r7, r0
 4841              	.LVL724:
 4842 0052 05F1010A 		add	r10, r5, #1
 4843              	.LVL725:
 4844 0056 39F81500 		ldrh	r0, [r9, r5, lsl #1]
 4845 005a FFF7FEFF 		bl	ff_wtoupper
 4846              	.LVL726:
 4847 005e 8742     		cmp	r7, r0
 4848 0060 14D1     		bne	.L518
1696:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 4849              		.loc 1 1696 0 is_stmt 1
 4850 0062 3746     		mov	r7, r6
1693:Middlewares/Third_Party/FatFs/src/ff.c **** 				return 0;					/* Not matched */
 4851              		.loc 1 1693 0
 4852 0064 5546     		mov	r5, r10
 4853 0066 E4E7     		b	.L514
 4854              	.LVL727:
 4855              	.L524:
1702:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4856              		.loc 1 1702 0
 4857 0068 98F80030 		ldrb	r3, [r8]	@ zero_extendqisi2
 4858 006c 13F0400F 		tst	r3, #64
 4859 0070 12D0     		beq	.L520
1702:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4860              		.loc 1 1702 0 is_stmt 0 discriminator 1
 4861 0072 A7B1     		cbz	r7, .L521
1702:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4862              		.loc 1 1702 0 discriminator 2
 4863 0074 39F81530 		ldrh	r3, [r9, r5, lsl #1]
 4864 0078 A3B9     		cbnz	r3, .L522
1704:Middlewares/Third_Party/FatFs/src/ff.c **** }
 4865              		.loc 1 1704 0 is_stmt 1
 4866 007a 0120     		movs	r0, #1
 4867 007c BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 4868              	.LVL728:
 4869              	.L516:
1686:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4870              		.loc 1 1686 0
 4871 0080 0020     		movs	r0, #0
 4872 0082 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 4873              	.LVL729:
 4874              	.L517:
1694:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 4875              		.loc 1 1694 0
 4876 0086 0020     		movs	r0, #0
 4877              	.LVL730:
 4878 0088 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 4879              	.LVL731:
 4880              	.L518:
 4881 008c 0020     		movs	r0, #0
 4882 008e BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 4883              	.LVL732:
 4884              	.L519:
1698:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 4885              		.loc 1 1698 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 202


 4886 0092 0020     		movs	r0, #0
 4887              	.LVL733:
 4888 0094 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 4889              	.LVL734:
 4890              	.L520:
1704:Middlewares/Third_Party/FatFs/src/ff.c **** }
 4891              		.loc 1 1704 0
 4892 0098 0120     		movs	r0, #1
 4893 009a BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 4894              	.LVL735:
 4895              	.L521:
 4896 009e 0120     		movs	r0, #1
 4897 00a0 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 4898              	.LVL736:
 4899              	.L522:
1702:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4900              		.loc 1 1702 0
 4901 00a4 0020     		movs	r0, #0
1705:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4902              		.loc 1 1705 0
 4903 00a6 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 4904              	.LVL737:
 4905              	.L526:
 4906 00aa 00BF     		.align	2
 4907              	.L525:
 4908 00ac 00000000 		.word	.LANCHOR1
 4909              		.cfi_endproc
 4910              	.LFE170:
 4912              		.section	.text.dir_find,"ax",%progbits
 4913              		.align	1
 4914              		.syntax unified
 4915              		.thumb
 4916              		.thumb_func
 4917              		.fpu fpv5-sp-d16
 4919              	dir_find:
 4920              	.LFB176:
2213:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 4921              		.loc 1 2213 0
 4922              		.cfi_startproc
 4923              		@ args = 0, pretend = 0, frame = 0
 4924              		@ frame_needed = 0, uses_anonymous_args = 0
 4925              	.LVL738:
 4926 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 4927              	.LCFI48:
 4928              		.cfi_def_cfa_offset 32
 4929              		.cfi_offset 3, -32
 4930              		.cfi_offset 4, -28
 4931              		.cfi_offset 5, -24
 4932              		.cfi_offset 6, -20
 4933              		.cfi_offset 7, -16
 4934              		.cfi_offset 8, -12
 4935              		.cfi_offset 9, -8
 4936              		.cfi_offset 14, -4
 4937 0004 0446     		mov	r4, r0
2215:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE c;
 4938              		.loc 1 2215 0
 4939 0006 D0F80080 		ldr	r8, [r0]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 203


 4940              	.LVL739:
2221:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) return res;
 4941              		.loc 1 2221 0
 4942 000a 0021     		movs	r1, #0
 4943 000c FFF7FEFF 		bl	dir_sdi
 4944              	.LVL740:
2222:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 4945              		.loc 1 2222 0
 4946 0010 0646     		mov	r6, r0
 4947 0012 0028     		cmp	r0, #0
 4948 0014 64D1     		bne	.L528
 4949              	.LVL741:
2245:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 4950              		.loc 1 2245 0
 4951 0016 4FF0FF33 		mov	r3, #-1
 4952 001a 2363     		str	r3, [r4, #48]
 4953 001c 4FF0FF09 		mov	r9, #255
 4954 0020 4F46     		mov	r7, r9
 4955 0022 0AE0     		b	.L536
 4956              	.LVL742:
 4957              	.L529:
2255:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 4958              		.loc 1 2255 0
 4959 0024 4FF0FF33 		mov	r3, #-1
 4960              	.LVL743:
 4961 0028 2363     		str	r3, [r4, #48]
 4962 002a FF27     		movs	r7, #255
 4963              	.LVL744:
 4964              	.L531:
2277:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (res == FR_OK);
 4965              		.loc 1 2277 0
 4966 002c 0021     		movs	r1, #0
 4967 002e 2046     		mov	r0, r4
 4968 0030 FFF7FEFF 		bl	dir_next
 4969              	.LVL745:
2278:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4970              		.loc 1 2278 0
 4971 0034 0646     		mov	r6, r0
 4972 0036 0028     		cmp	r0, #0
 4973 0038 52D1     		bne	.L528
 4974              	.LVL746:
 4975              	.L536:
2248:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) break;
 4976              		.loc 1 2248 0
 4977 003a E169     		ldr	r1, [r4, #28]
 4978 003c 4046     		mov	r0, r8
 4979              	.LVL747:
 4980 003e FFF7FEFF 		bl	move_window
 4981              	.LVL748:
2249:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = dp->dir[DIR_Name];
 4982              		.loc 1 2249 0
 4983 0042 0646     		mov	r6, r0
 4984 0044 0028     		cmp	r0, #0
 4985 0046 4BD1     		bne	.L528
2250:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
 4986              		.loc 1 2250 0
 4987 0048 256A     		ldr	r5, [r4, #32]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 204


 4988 004a 2B78     		ldrb	r3, [r5]	@ zero_extendqisi2
 4989              	.LVL749:
2251:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0	/* LFN configuration */
 4990              		.loc 1 2251 0
 4991 004c 002B     		cmp	r3, #0
 4992 004e 46D0     		beq	.L537
2253:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == DDEM || ((a & AM_VOL) && a != AM_LFN)) {	/* An entry without valid data */
 4993              		.loc 1 2253 0
 4994 0050 E97A     		ldrb	r1, [r5, #11]	@ zero_extendqisi2
 4995 0052 01F03F02 		and	r2, r1, #63
 4996              	.LVL750:
 4997 0056 A271     		strb	r2, [r4, #6]
2254:Middlewares/Third_Party/FatFs/src/ff.c **** 			ord = 0xFF; dp->blk_ofs = 0xFFFFFFFF;	/* Reset LFN sequence */
 4998              		.loc 1 2254 0
 4999 0058 E52B     		cmp	r3, #229
 5000 005a E3D0     		beq	.L529
2254:Middlewares/Third_Party/FatFs/src/ff.c **** 			ord = 0xFF; dp->blk_ofs = 0xFFFFFFFF;	/* Reset LFN sequence */
 5001              		.loc 1 2254 0 is_stmt 0 discriminator 1
 5002 005c 11F0080F 		tst	r1, #8
 5003 0060 01D0     		beq	.L530
2254:Middlewares/Third_Party/FatFs/src/ff.c **** 			ord = 0xFF; dp->blk_ofs = 0xFFFFFFFF;	/* Reset LFN sequence */
 5004              		.loc 1 2254 0 discriminator 2
 5005 0062 0F2A     		cmp	r2, #15
 5006 0064 DED1     		bne	.L529
 5007              	.L530:
2257:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!(dp->fn[NSFLAG] & NS_NOLFN)) {
 5008              		.loc 1 2257 0 is_stmt 1
 5009 0066 0F2A     		cmp	r2, #15
 5010 0068 16D0     		beq	.L542
2268:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!(dp->fn[NSFLAG] & NS_LOSS) && !mem_cmp(dp->dir, dp->fn, 11)) break;	/* SFN matched? */
 5011              		.loc 1 2268 0
 5012 006a 27B9     		cbnz	r7, .L534
2268:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!(dp->fn[NSFLAG] & NS_LOSS) && !mem_cmp(dp->dir, dp->fn, 11)) break;	/* SFN matched? */
 5013              		.loc 1 2268 0 is_stmt 0 discriminator 1
 5014 006c 2846     		mov	r0, r5
 5015              	.LVL751:
 5016 006e FFF7FEFF 		bl	sum_sfn
 5017              	.LVL752:
 5018 0072 8145     		cmp	r9, r0
 5019 0074 34D0     		beq	.L528
 5020              	.L534:
2269:Middlewares/Third_Party/FatFs/src/ff.c **** 				ord = 0xFF; dp->blk_ofs = 0xFFFFFFFF;	/* Reset LFN sequence */
 5021              		.loc 1 2269 0 is_stmt 1
 5022 0076 94F82F30 		ldrb	r3, [r4, #47]	@ zero_extendqisi2
 5023 007a 13F0010F 		tst	r3, #1
 5024 007e 06D1     		bne	.L535
2269:Middlewares/Third_Party/FatFs/src/ff.c **** 				ord = 0xFF; dp->blk_ofs = 0xFFFFFFFF;	/* Reset LFN sequence */
 5025              		.loc 1 2269 0 is_stmt 0 discriminator 1
 5026 0080 0B22     		movs	r2, #11
 5027 0082 04F12401 		add	r1, r4, #36
 5028 0086 2846     		mov	r0, r5
 5029 0088 FFF7FEFF 		bl	mem_cmp
 5030              	.LVL753:
 5031 008c 40B3     		cbz	r0, .L528
 5032              	.L535:
 5033              	.LVL754:
2270:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 205


 5034              		.loc 1 2270 0 is_stmt 1
 5035 008e 4FF0FF33 		mov	r3, #-1
 5036 0092 2363     		str	r3, [r4, #48]
 5037 0094 FF27     		movs	r7, #255
 5038 0096 C9E7     		b	.L531
 5039              	.LVL755:
 5040              	.L542:
2258:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (c & LLEF) {		/* Is it start of LFN sequence? */
 5041              		.loc 1 2258 0
 5042 0098 94F82F20 		ldrb	r2, [r4, #47]	@ zero_extendqisi2
 5043              	.LVL756:
 5044 009c 12F0400F 		tst	r2, #64
 5045 00a0 C4D1     		bne	.L531
2259:Middlewares/Third_Party/FatFs/src/ff.c **** 						sum = dp->dir[LDIR_Chksum];
 5046              		.loc 1 2259 0
 5047 00a2 13F0400F 		tst	r3, #64
 5048 00a6 06D0     		beq	.L533
2260:Middlewares/Third_Party/FatFs/src/ff.c **** 						c &= (BYTE)~LLEF; ord = c;	/* LFN start order */
 5049              		.loc 1 2260 0
 5050 00a8 95F80D90 		ldrb	r9, [r5, #13]	@ zero_extendqisi2
 5051              	.LVL757:
2261:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->blk_ofs = dp->dptr;	/* Start offset of LFN */
 5052              		.loc 1 2261 0
 5053 00ac 03F0BF03 		and	r3, r3, #191
 5054              	.LVL758:
2262:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 5055              		.loc 1 2262 0
 5056 00b0 6269     		ldr	r2, [r4, #20]
 5057 00b2 2263     		str	r2, [r4, #48]
2261:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->blk_ofs = dp->dptr;	/* Start offset of LFN */
 5058              		.loc 1 2261 0
 5059 00b4 1F46     		mov	r7, r3
 5060              	.LVL759:
 5061              	.L533:
2265:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 5062              		.loc 1 2265 0
 5063 00b6 BB42     		cmp	r3, r7
 5064 00b8 01D0     		beq	.L543
 5065 00ba FF27     		movs	r7, #255
 5066              	.LVL760:
 5067 00bc B6E7     		b	.L531
 5068              	.LVL761:
 5069              	.L543:
2265:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 5070              		.loc 1 2265 0 is_stmt 0 discriminator 1
 5071 00be 6B7B     		ldrb	r3, [r5, #13]	@ zero_extendqisi2
 5072              	.LVL762:
 5073 00c0 9945     		cmp	r9, r3
 5074 00c2 01D0     		beq	.L544
2265:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 5075              		.loc 1 2265 0
 5076 00c4 FF27     		movs	r7, #255
 5077              	.LVL763:
 5078 00c6 B1E7     		b	.L531
 5079              	.LVL764:
 5080              	.L544:
2265:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 206


 5081              		.loc 1 2265 0 discriminator 3
 5082 00c8 2946     		mov	r1, r5
 5083 00ca D8F80C00 		ldr	r0, [r8, #12]
 5084              	.LVL765:
 5085 00ce FFF7FEFF 		bl	cmp_lfn
 5086              	.LVL766:
 5087 00d2 10B1     		cbz	r0, .L540
2265:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 5088              		.loc 1 2265 0 discriminator 5
 5089 00d4 013F     		subs	r7, r7, #1
 5090              	.LVL767:
 5091 00d6 FFB2     		uxtb	r7, r7
 5092 00d8 A8E7     		b	.L531
 5093              	.LVL768:
 5094              	.L540:
2265:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 5095              		.loc 1 2265 0
 5096 00da FF27     		movs	r7, #255
 5097              	.LVL769:
 5098 00dc A6E7     		b	.L531
 5099              	.LVL770:
 5100              	.L537:
2251:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0	/* LFN configuration */
 5101              		.loc 1 2251 0 is_stmt 1
 5102 00de 0426     		movs	r6, #4
 5103              	.LVL771:
 5104              	.L528:
2281:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5105              		.loc 1 2281 0
 5106 00e0 3046     		mov	r0, r6
 5107 00e2 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 5108              		.cfi_endproc
 5109              	.LFE176:
 5111              		.section	.text.follow_path,"ax",%progbits
 5112              		.align	1
 5113              		.syntax unified
 5114              		.thumb
 5115              		.thumb_func
 5116              		.fpu fpv5-sp-d16
 5118              	follow_path:
 5119              	.LFB181:
2817:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 5120              		.loc 1 2817 0
 5121              		.cfi_startproc
 5122              		@ args = 0, pretend = 0, frame = 8
 5123              		@ frame_needed = 0, uses_anonymous_args = 0
 5124              	.LVL772:
 5125 0000 70B5     		push	{r4, r5, r6, lr}
 5126              	.LCFI49:
 5127              		.cfi_def_cfa_offset 16
 5128              		.cfi_offset 4, -16
 5129              		.cfi_offset 5, -12
 5130              		.cfi_offset 6, -8
 5131              		.cfi_offset 14, -4
 5132 0002 82B0     		sub	sp, sp, #8
 5133              	.LCFI50:
 5134              		.cfi_def_cfa_offset 24
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 207


 5135 0004 0446     		mov	r4, r0
 5136 0006 0191     		str	r1, [sp, #4]
 5137              	.LVL773:
2821:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5138              		.loc 1 2821 0
 5139 0008 0568     		ldr	r5, [r0]
 5140              	.LVL774:
2825:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->sclust = fs->cdir;				/* Start from current directory */
 5141              		.loc 1 2825 0
 5142 000a 0B78     		ldrb	r3, [r1]	@ zero_extendqisi2
 5143 000c 2F2B     		cmp	r3, #47
 5144 000e 18BF     		it	ne
 5145 0010 5C2B     		cmpne	r3, #92
 5146 0012 10D0     		beq	.L546
2826:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else
 5147              		.loc 1 2826 0
 5148 0014 EB69     		ldr	r3, [r5, #28]
 5149 0016 8360     		str	r3, [r0, #8]
 5150              	.L547:
2850:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->fn[NSFLAG] = NS_NONAME;
 5151              		.loc 1 2850 0
 5152 0018 019B     		ldr	r3, [sp, #4]
 5153 001a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5154 001c 1F2B     		cmp	r3, #31
 5155 001e 2BD8     		bhi	.L549
2851:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_sdi(dp, 0);
 5156              		.loc 1 2851 0
 5157 0020 8023     		movs	r3, #128
 5158 0022 84F82F30 		strb	r3, [r4, #47]
2852:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5159              		.loc 1 2852 0
 5160 0026 0021     		movs	r1, #0
 5161              	.LVL775:
 5162 0028 2046     		mov	r0, r4
 5163              	.LVL776:
 5164 002a FFF7FEFF 		bl	dir_sdi
 5165              	.LVL777:
 5166 002e 0646     		mov	r6, r0
 5167              	.LVL778:
 5168 0030 3AE0     		b	.L550
 5169              	.LVL779:
 5170              	.L548:
2830:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->sclust = 0;					/* Start from root directory */
 5171              		.loc 1 2830 0 discriminator 2
 5172 0032 0133     		adds	r3, r3, #1
 5173 0034 0193     		str	r3, [sp, #4]
 5174              	.L546:
2830:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->sclust = 0;					/* Start from root directory */
 5175              		.loc 1 2830 0 is_stmt 0 discriminator 1
 5176 0036 019B     		ldr	r3, [sp, #4]
 5177 0038 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 5178 003a 5C2A     		cmp	r2, #92
 5179 003c 18BF     		it	ne
 5180 003e 2F2A     		cmpne	r2, #47
 5181 0040 F7D0     		beq	.L548
2831:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 5182              		.loc 1 2831 0 is_stmt 1
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 208


 5183 0042 0023     		movs	r3, #0
 5184 0044 A360     		str	r3, [r4, #8]
 5185 0046 E7E7     		b	.L547
 5186              	.LVL780:
 5187              	.L552:
2867:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 5188              		.loc 1 2867 0
 5189 0048 13F0040F 		tst	r3, #4
 5190 004c 01D1     		bne	.L559
 5191 004e 0526     		movs	r6, #5
 5192 0050 2AE0     		b	.L550
 5193              	.L559:
2858:Middlewares/Third_Party/FatFs/src/ff.c **** 			ns = dp->fn[NSFLAG];
 5194              		.loc 1 2858 0
 5195 0052 0646     		mov	r6, r0
 5196 0054 28E0     		b	.L550
 5197              	.L551:
2872:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Get into the sub-directory */
 5198              		.loc 1 2872 0
 5199 0056 13F0040F 		tst	r3, #4
 5200 005a 2AD1     		bne	.L556
2874:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_NO_PATH; break;
 5201              		.loc 1 2874 0
 5202 005c A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
 5203              	.LVL781:
 5204 005e 13F0100F 		tst	r3, #16
 5205 0062 28D0     		beq	.L557
2888:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 5206              		.loc 1 2888 0
 5207 0064 05F13C01 		add	r1, r5, #60
 5208 0068 6369     		ldr	r3, [r4, #20]
 5209 006a C3F30803 		ubfx	r3, r3, #0, #9
 5210 006e 1944     		add	r1, r1, r3
 5211 0070 2846     		mov	r0, r5
 5212              	.LVL782:
 5213 0072 FFF7FEFF 		bl	ld_clust
 5214              	.LVL783:
 5215 0076 A060     		str	r0, [r4, #8]
 5216              	.L549:
2856:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 5217              		.loc 1 2856 0
 5218 0078 01A9     		add	r1, sp, #4
 5219 007a 2046     		mov	r0, r4
 5220 007c FFF7FEFF 		bl	create_name
 5221              	.LVL784:
2857:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_find(dp);				/* Find an object with the segment name */
 5222              		.loc 1 2857 0
 5223 0080 0646     		mov	r6, r0
 5224 0082 88B9     		cbnz	r0, .L550
2858:Middlewares/Third_Party/FatFs/src/ff.c **** 			ns = dp->fn[NSFLAG];
 5225              		.loc 1 2858 0
 5226 0084 2046     		mov	r0, r4
 5227              	.LVL785:
 5228 0086 FFF7FEFF 		bl	dir_find
 5229              	.LVL786:
2859:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) {				/* Failed to find the object */
 5230              		.loc 1 2859 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 209


 5231 008a 94F82F30 		ldrb	r3, [r4, #47]	@ zero_extendqisi2
 5232              	.LVL787:
2860:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE) {	/* Object is not found */
 5233              		.loc 1 2860 0
 5234 008e 0028     		cmp	r0, #0
 5235 0090 E1D0     		beq	.L551
2861:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (_FS_RPATH && (ns & NS_DOT)) {	/* If dot entry is not exist, stay there */
 5236              		.loc 1 2861 0
 5237 0092 0428     		cmp	r0, #4
 5238 0094 0BD1     		bne	.L554
2862:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (!(ns & NS_LAST)) continue;	/* Continue to follow if not last segment */
 5239              		.loc 1 2862 0
 5240 0096 13F0200F 		tst	r3, #32
 5241 009a D5D0     		beq	.L552
2863:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->fn[NSFLAG] = NS_NONAME;
 5242              		.loc 1 2863 0
 5243 009c 13F0040F 		tst	r3, #4
 5244 00a0 EAD0     		beq	.L549
2864:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = FR_OK;
 5245              		.loc 1 2864 0
 5246 00a2 8023     		movs	r3, #128
 5247              	.LVL788:
 5248 00a4 84F82F30 		strb	r3, [r4, #47]
 5249              	.LVL789:
 5250              	.L550:
2894:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5251              		.loc 1 2894 0
 5252 00a8 3046     		mov	r0, r6
 5253 00aa 02B0     		add	sp, sp, #8
 5254              	.LCFI51:
 5255              		.cfi_remember_state
 5256              		.cfi_def_cfa_offset 16
 5257              		@ sp needed
 5258 00ac 70BD     		pop	{r4, r5, r6, pc}
 5259              	.LVL790:
 5260              	.L554:
 5261              	.LCFI52:
 5262              		.cfi_restore_state
2858:Middlewares/Third_Party/FatFs/src/ff.c **** 			ns = dp->fn[NSFLAG];
 5263              		.loc 1 2858 0
 5264 00ae 0646     		mov	r6, r0
 5265 00b0 FAE7     		b	.L550
 5266              	.L556:
 5267 00b2 0646     		mov	r6, r0
 5268 00b4 F8E7     		b	.L550
 5269              	.LVL791:
 5270              	.L557:
2875:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 5271              		.loc 1 2875 0
 5272 00b6 0526     		movs	r6, #5
 5273 00b8 F6E7     		b	.L550
 5274              		.cfi_endproc
 5275              	.LFE181:
 5277              		.section	.text.dir_register,"ax",%progbits
 5278              		.align	1
 5279              		.syntax unified
 5280              		.thumb
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 210


 5281              		.thumb_func
 5282              		.fpu fpv5-sp-d16
 5284              	dir_register:
 5285              	.LFB177:
2295:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 5286              		.loc 1 2295 0
 5287              		.cfi_startproc
 5288              		@ args = 0, pretend = 0, frame = 16
 5289              		@ frame_needed = 0, uses_anonymous_args = 0
 5290              	.LVL792:
 5291 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 5292              	.LCFI53:
 5293              		.cfi_def_cfa_offset 28
 5294              		.cfi_offset 4, -28
 5295              		.cfi_offset 5, -24
 5296              		.cfi_offset 6, -20
 5297              		.cfi_offset 7, -16
 5298              		.cfi_offset 8, -12
 5299              		.cfi_offset 9, -8
 5300              		.cfi_offset 14, -4
 5301 0004 85B0     		sub	sp, sp, #20
 5302              	.LCFI54:
 5303              		.cfi_def_cfa_offset 48
2297:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0	/* LFN configuration */
 5304              		.loc 1 2297 0
 5305 0006 0568     		ldr	r5, [r0]
 5306              	.LVL793:
2303:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (nlen = 0; fs->lfnbuf[nlen]; nlen++) ;	/* Get lfn length */
 5307              		.loc 1 2303 0
 5308 0008 90F82F30 		ldrb	r3, [r0, #47]	@ zero_extendqisi2
 5309 000c 13F0A00F 		tst	r3, #160
 5310 0010 05D0     		beq	.L575
 5311 0012 4FF00609 		mov	r9, #6
 5312              	.LVL794:
 5313              	.L561:
2384:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5314              		.loc 1 2384 0
 5315 0016 4846     		mov	r0, r9
 5316 0018 05B0     		add	sp, sp, #20
 5317              	.LCFI55:
 5318              		.cfi_remember_state
 5319              		.cfi_def_cfa_offset 28
 5320              		@ sp needed
 5321 001a BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 5322              	.LVL795:
 5323              	.L575:
 5324              	.LCFI56:
 5325              		.cfi_restore_state
 5326 001e 0024     		movs	r4, #0
 5327 0020 00E0     		b	.L562
 5328              	.LVL796:
 5329              	.L563:
2304:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5330              		.loc 1 2304 0 discriminator 3
 5331 0022 0134     		adds	r4, r4, #1
 5332              	.LVL797:
 5333              	.L562:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 211


2304:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5334              		.loc 1 2304 0 is_stmt 0 discriminator 1
 5335 0024 EB68     		ldr	r3, [r5, #12]
 5336 0026 33F81430 		ldrh	r3, [r3, r4, lsl #1]
 5337 002a 002B     		cmp	r3, #0
 5338 002c F9D1     		bne	.L563
 5339 002e 0646     		mov	r6, r0
2335:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (sn[NSFLAG] & NS_LOSS) {			/* When LFN is out of 8.3 format, generate a numbered name */
 5340              		.loc 1 2335 0 is_stmt 1
 5341 0030 00F12407 		add	r7, r0, #36
 5342 0034 0C22     		movs	r2, #12
 5343 0036 3946     		mov	r1, r7
 5344 0038 01A8     		add	r0, sp, #4
 5345              	.LVL798:
 5346 003a FFF7FEFF 		bl	mem_cpy
 5347              	.LVL799:
2336:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->fn[NSFLAG] = NS_NOLFN;		/* Find only SFN */
 5348              		.loc 1 2336 0
 5349 003e 9DF80F30 		ldrb	r3, [sp, #15]	@ zero_extendqisi2
 5350 0042 13F0010F 		tst	r3, #1
 5351 0046 1FD0     		beq	.L564
2337:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (n = 1; n < 100; n++) {
 5352              		.loc 1 2337 0
 5353 0048 4023     		movs	r3, #64
 5354 004a 86F82F30 		strb	r3, [r6, #47]
 5355              	.LVL800:
2338:Middlewares/Third_Party/FatFs/src/ff.c **** 			gen_numname(dp->fn, sn, fs->lfnbuf, n);	/* Generate a numbered name */
 5356              		.loc 1 2338 0
 5357 004e 4FF00108 		mov	r8, #1
 5358              	.LVL801:
 5359              	.L565:
2338:Middlewares/Third_Party/FatFs/src/ff.c **** 			gen_numname(dp->fn, sn, fs->lfnbuf, n);	/* Generate a numbered name */
 5360              		.loc 1 2338 0 is_stmt 0 discriminator 1
 5361 0052 B8F1630F 		cmp	r8, #99
 5362 0056 0DD8     		bhi	.L566
2339:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_find(dp);				/* Check if the name collides with existing SFN */
 5363              		.loc 1 2339 0 is_stmt 1
 5364 0058 4346     		mov	r3, r8
 5365 005a EA68     		ldr	r2, [r5, #12]
 5366 005c 01A9     		add	r1, sp, #4
 5367 005e 3846     		mov	r0, r7
 5368 0060 FFF7FEFF 		bl	gen_numname
 5369              	.LVL802:
2340:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 5370              		.loc 1 2340 0
 5371 0064 3046     		mov	r0, r6
 5372 0066 FFF7FEFF 		bl	dir_find
 5373              	.LVL803:
2341:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 5374              		.loc 1 2341 0
 5375 006a 8146     		mov	r9, r0
 5376 006c 10B9     		cbnz	r0, .L566
2338:Middlewares/Third_Party/FatFs/src/ff.c **** 			gen_numname(dp->fn, sn, fs->lfnbuf, n);	/* Generate a numbered name */
 5377              		.loc 1 2338 0 discriminator 2
 5378 006e 08F10108 		add	r8, r8, #1
 5379              	.LVL804:
 5380 0072 EEE7     		b	.L565
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 212


 5381              	.LVL805:
 5382              	.L566:
2343:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_NO_FILE) return res;	/* Abort if the result is other than 'not collided' */
 5383              		.loc 1 2343 0
 5384 0074 B8F1640F 		cmp	r8, #100
 5385 0078 5ED0     		beq	.L572
2344:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->fn[NSFLAG] = sn[NSFLAG];
 5386              		.loc 1 2344 0
 5387 007a B9F1040F 		cmp	r9, #4
 5388 007e CAD1     		bne	.L561
2345:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 5389              		.loc 1 2345 0
 5390 0080 9DF80F30 		ldrb	r3, [sp, #15]	@ zero_extendqisi2
 5391 0084 86F82F30 		strb	r3, [r6, #47]
 5392              	.LVL806:
 5393              	.L564:
2349:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = dir_alloc(dp, nent);		/* Allocate entries */
 5394              		.loc 1 2349 0
 5395 0088 9DF80F30 		ldrb	r3, [sp, #15]	@ zero_extendqisi2
 5396 008c 13F0020F 		tst	r3, #2
 5397 0090 2AD0     		beq	.L573
2349:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = dir_alloc(dp, nent);		/* Allocate entries */
 5398              		.loc 1 2349 0 is_stmt 0 discriminator 1
 5399 0092 0C34     		adds	r4, r4, #12
 5400              	.LVL807:
 5401 0094 2A4B     		ldr	r3, .L577
 5402 0096 A3FB0434 		umull	r3, r4, r3, r4
 5403              	.LVL808:
 5404 009a A408     		lsrs	r4, r4, #2
 5405 009c 0134     		adds	r4, r4, #1
 5406              	.L568:
 5407              	.LVL809:
2350:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK && --nent) {	/* Set LFN entry if needed */
 5408              		.loc 1 2350 0 is_stmt 1 discriminator 4
 5409 009e 2146     		mov	r1, r4
 5410 00a0 3046     		mov	r0, r6
 5411 00a2 FFF7FEFF 		bl	dir_alloc
 5412              	.LVL810:
2351:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_sdi(dp, dp->dptr - nent * SZDIRE);
 5413              		.loc 1 2351 0 discriminator 4
 5414 00a6 8146     		mov	r9, r0
 5415 00a8 08B9     		cbnz	r0, .L569
 5416              	.LVL811:
2351:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_sdi(dp, dp->dptr - nent * SZDIRE);
 5417              		.loc 1 2351 0 is_stmt 0 discriminator 1
 5418 00aa 013C     		subs	r4, r4, #1
 5419              	.LVL812:
 5420 00ac 1ED1     		bne	.L576
 5421              	.L569:
 5422              	.LVL813:
2371:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(fs, dp->sect);
 5423              		.loc 1 2371 0 is_stmt 1
 5424 00ae B9F1000F 		cmp	r9, #0
 5425 00b2 B0D1     		bne	.L561
2372:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
 5426              		.loc 1 2372 0
 5427 00b4 F169     		ldr	r1, [r6, #28]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 213


 5428 00b6 2846     		mov	r0, r5
 5429 00b8 FFF7FEFF 		bl	move_window
 5430              	.LVL814:
2373:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(dp->dir, 0, SZDIRE);	/* Clean the entry */
 5431              		.loc 1 2373 0
 5432 00bc 8146     		mov	r9, r0
 5433 00be 0028     		cmp	r0, #0
 5434 00c0 A9D1     		bne	.L561
2374:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_cpy(dp->dir + DIR_Name, dp->fn, 11);	/* Put SFN */
 5435              		.loc 1 2374 0
 5436 00c2 2022     		movs	r2, #32
 5437 00c4 0021     		movs	r1, #0
 5438 00c6 306A     		ldr	r0, [r6, #32]
 5439              	.LVL815:
 5440 00c8 FFF7FEFF 		bl	mem_set
 5441              	.LVL816:
2375:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0
 5442              		.loc 1 2375 0
 5443 00cc 0B22     		movs	r2, #11
 5444 00ce 3946     		mov	r1, r7
 5445 00d0 306A     		ldr	r0, [r6, #32]
 5446 00d2 FFF7FEFF 		bl	mem_cpy
 5447              	.LVL817:
2377:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5448              		.loc 1 2377 0
 5449 00d6 326A     		ldr	r2, [r6, #32]
 5450 00d8 96F82F30 		ldrb	r3, [r6, #47]	@ zero_extendqisi2
 5451 00dc 03F01803 		and	r3, r3, #24
 5452 00e0 1373     		strb	r3, [r2, #12]
2379:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 5453              		.loc 1 2379 0
 5454 00e2 0123     		movs	r3, #1
 5455 00e4 EB70     		strb	r3, [r5, #3]
 5456 00e6 96E7     		b	.L561
 5457              	.LVL818:
 5458              	.L573:
2349:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = dir_alloc(dp, nent);		/* Allocate entries */
 5459              		.loc 1 2349 0
 5460 00e8 0124     		movs	r4, #1
 5461              	.LVL819:
 5462 00ea D8E7     		b	.L568
 5463              	.LVL820:
 5464              	.L576:
2352:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
 5465              		.loc 1 2352 0
 5466 00ec 7169     		ldr	r1, [r6, #20]
 5467 00ee A1EB4411 		sub	r1, r1, r4, lsl #5
 5468 00f2 3046     		mov	r0, r6
 5469              	.LVL821:
 5470 00f4 FFF7FEFF 		bl	dir_sdi
 5471              	.LVL822:
2353:Middlewares/Third_Party/FatFs/src/ff.c **** 			sum = sum_sfn(dp->fn);	/* Checksum value of the SFN tied to the LFN */
 5472              		.loc 1 2353 0
 5473 00f8 8146     		mov	r9, r0
 5474 00fa 0028     		cmp	r0, #0
 5475 00fc D7D1     		bne	.L569
2354:Middlewares/Third_Party/FatFs/src/ff.c **** 			do {					/* Store LFN entries in bottom first */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 214


 5476              		.loc 1 2354 0
 5477 00fe 3846     		mov	r0, r7
 5478              	.LVL823:
 5479 0100 FFF7FEFF 		bl	sum_sfn
 5480              	.LVL824:
 5481 0104 8046     		mov	r8, r0
 5482              	.LVL825:
 5483              	.L570:
2356:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res != FR_OK) break;
 5484              		.loc 1 2356 0
 5485 0106 F169     		ldr	r1, [r6, #28]
 5486 0108 2846     		mov	r0, r5
 5487 010a FFF7FEFF 		bl	move_window
 5488              	.LVL826:
2357:Middlewares/Third_Party/FatFs/src/ff.c **** 				put_lfn(fs->lfnbuf, dp->dir, (BYTE)nent, sum);
 5489              		.loc 1 2357 0
 5490 010e 8146     		mov	r9, r0
 5491 0110 0028     		cmp	r0, #0
 5492 0112 CCD1     		bne	.L569
2358:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->wflag = 1;
 5493              		.loc 1 2358 0
 5494 0114 4346     		mov	r3, r8
 5495 0116 E2B2     		uxtb	r2, r4
 5496 0118 316A     		ldr	r1, [r6, #32]
 5497 011a E868     		ldr	r0, [r5, #12]
 5498              	.LVL827:
 5499 011c FFF7FEFF 		bl	put_lfn
 5500              	.LVL828:
2359:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_next(dp, 0);	/* Next entry */
 5501              		.loc 1 2359 0
 5502 0120 0123     		movs	r3, #1
 5503 0122 EB70     		strb	r3, [r5, #3]
2360:Middlewares/Third_Party/FatFs/src/ff.c **** 			} while (res == FR_OK && --nent);
 5504              		.loc 1 2360 0
 5505 0124 0021     		movs	r1, #0
 5506 0126 3046     		mov	r0, r6
 5507 0128 FFF7FEFF 		bl	dir_next
 5508              	.LVL829:
2361:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 5509              		.loc 1 2361 0
 5510 012c 8146     		mov	r9, r0
 5511 012e 0028     		cmp	r0, #0
 5512 0130 BDD1     		bne	.L569
 5513              	.LVL830:
2361:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 5514              		.loc 1 2361 0 is_stmt 0 discriminator 1
 5515 0132 013C     		subs	r4, r4, #1
 5516              	.LVL831:
 5517 0134 E7D1     		bne	.L570
 5518 0136 BAE7     		b	.L569
 5519              	.LVL832:
 5520              	.L572:
2343:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_NO_FILE) return res;	/* Abort if the result is other than 'not collided' */
 5521              		.loc 1 2343 0 is_stmt 1
 5522 0138 4FF00709 		mov	r9, #7
 5523              	.LVL833:
 5524 013c 6BE7     		b	.L561
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 215


 5525              	.L578:
 5526 013e 00BF     		.align	2
 5527              	.L577:
 5528 0140 4FECC44E 		.word	1321528399
 5529              		.cfi_endproc
 5530              	.LFE177:
 5532              		.section	.text.sync_fs,"ax",%progbits
 5533              		.align	1
 5534              		.syntax unified
 5535              		.thumb
 5536              		.thumb_func
 5537              		.fpu fpv5-sp-d16
 5539              	sync_fs:
 5540              	.LFB158:
 947:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 5541              		.loc 1 947 0
 5542              		.cfi_startproc
 5543              		@ args = 0, pretend = 0, frame = 0
 5544              		@ frame_needed = 0, uses_anonymous_args = 0
 5545              	.LVL834:
 5546 0000 70B5     		push	{r4, r5, r6, lr}
 5547              	.LCFI57:
 5548              		.cfi_def_cfa_offset 16
 5549              		.cfi_offset 4, -16
 5550              		.cfi_offset 5, -12
 5551              		.cfi_offset 6, -8
 5552              		.cfi_offset 14, -4
 5553 0002 0446     		mov	r4, r0
 951:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 5554              		.loc 1 951 0
 5555 0004 FFF7FEFF 		bl	sync_window
 5556              	.LVL835:
 952:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Update FSInfo sector if needed */
 5557              		.loc 1 952 0
 5558 0008 0546     		mov	r5, r0
 5559 000a 48B9     		cbnz	r0, .L580
 954:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Create FSInfo structure */
 5560              		.loc 1 954 0
 5561 000c 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 5562 000e 032B     		cmp	r3, #3
 5563 0010 08D0     		beq	.L584
 5564              	.LVL836:
 5565              	.L581:
 968:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 5566              		.loc 1 968 0
 5567 0012 0022     		movs	r2, #0
 5568 0014 1146     		mov	r1, r2
 5569 0016 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 5570 0018 FFF7FEFF 		bl	disk_ioctl
 5571              	.LVL837:
 5572 001c 00B1     		cbz	r0, .L580
 5573 001e 0125     		movs	r5, #1
 5574              	.L580:
 5575              	.LVL838:
 972:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5576              		.loc 1 972 0
 5577 0020 2846     		mov	r0, r5
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 216


 5578 0022 70BD     		pop	{r4, r5, r6, pc}
 5579              	.LVL839:
 5580              	.L584:
 954:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Create FSInfo structure */
 5581              		.loc 1 954 0 discriminator 1
 5582 0024 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 5583 0026 012B     		cmp	r3, #1
 5584 0028 F3D1     		bne	.L581
 956:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(fs->win + BS_55AA, 0xAA55);
 5585              		.loc 1 956 0
 5586 002a 04F13C06 		add	r6, r4, #60
 5587 002e 4FF40072 		mov	r2, #512
 5588 0032 0021     		movs	r1, #0
 5589 0034 3046     		mov	r0, r6
 5590              	.LVL840:
 5591 0036 FFF7FEFF 		bl	mem_set
 5592              	.LVL841:
 957:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(fs->win + FSI_LeadSig, 0x41615252);
 5593              		.loc 1 957 0
 5594 003a 4AF65521 		movw	r1, #43605
 5595 003e 04F23A20 		addw	r0, r4, #570
 5596 0042 FFF7FEFF 		bl	st_word
 5597              	.LVL842:
 958:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(fs->win + FSI_StrucSig, 0x61417272);
 5598              		.loc 1 958 0
 5599 0046 0F49     		ldr	r1, .L585
 5600 0048 3046     		mov	r0, r6
 5601 004a FFF7FEFF 		bl	st_dword
 5602              	.LVL843:
 959:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(fs->win + FSI_Free_Count, fs->free_clst);
 5603              		.loc 1 959 0
 5604 004e 0E49     		ldr	r1, .L585+4
 5605 0050 04F50870 		add	r0, r4, #544
 5606 0054 FFF7FEFF 		bl	st_dword
 5607              	.LVL844:
 960:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(fs->win + FSI_Nxt_Free, fs->last_clst);
 5608              		.loc 1 960 0
 5609 0058 A169     		ldr	r1, [r4, #24]
 5610 005a 04F50970 		add	r0, r4, #548
 5611 005e FFF7FEFF 		bl	st_dword
 5612              	.LVL845:
 961:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Write it into the FSInfo sector */
 5613              		.loc 1 961 0
 5614 0062 6169     		ldr	r1, [r4, #20]
 5615 0064 04F50A70 		add	r0, r4, #552
 5616 0068 FFF7FEFF 		bl	st_dword
 5617              	.LVL846:
 963:Middlewares/Third_Party/FatFs/src/ff.c **** 			disk_write(fs->drv, fs->win, fs->winsect, 1);
 5618              		.loc 1 963 0
 5619 006c A26A     		ldr	r2, [r4, #40]
 5620 006e 0132     		adds	r2, r2, #1
 5621 0070 A263     		str	r2, [r4, #56]
 964:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->fsi_flag = 0;
 5622              		.loc 1 964 0
 5623 0072 0123     		movs	r3, #1
 5624 0074 3146     		mov	r1, r6
 5625 0076 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 217


 5626 0078 FFF7FEFF 		bl	disk_write
 5627              	.LVL847:
 965:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 5628              		.loc 1 965 0
 5629 007c 0023     		movs	r3, #0
 5630 007e 2371     		strb	r3, [r4, #4]
 5631 0080 C7E7     		b	.L581
 5632              	.L586:
 5633 0082 00BF     		.align	2
 5634              	.L585:
 5635 0084 52526141 		.word	1096897106
 5636 0088 72724161 		.word	1631679090
 5637              		.cfi_endproc
 5638              	.LFE158:
 5640              		.section	.text.f_mount,"ax",%progbits
 5641              		.align	1
 5642              		.global	f_mount
 5643              		.syntax unified
 5644              		.thumb
 5645              		.thumb_func
 5646              		.fpu fpv5-sp-d16
 5648              	f_mount:
 5649              	.LFB186:
3254:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *cfs;
 5650              		.loc 1 3254 0
 5651              		.cfi_startproc
 5652              		@ args = 0, pretend = 0, frame = 16
 5653              		@ frame_needed = 0, uses_anonymous_args = 0
 5654              	.LVL848:
 5655 0000 70B5     		push	{r4, r5, r6, lr}
 5656              	.LCFI58:
 5657              		.cfi_def_cfa_offset 16
 5658              		.cfi_offset 4, -16
 5659              		.cfi_offset 5, -12
 5660              		.cfi_offset 6, -8
 5661              		.cfi_offset 14, -4
 5662 0002 84B0     		sub	sp, sp, #16
 5663              	.LCFI59:
 5664              		.cfi_def_cfa_offset 32
 5665 0004 0190     		str	r0, [sp, #4]
 5666 0006 0091     		str	r1, [sp]
 5667 0008 1646     		mov	r6, r2
3258:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5668              		.loc 1 3258 0
 5669 000a 04A8     		add	r0, sp, #16
 5670              	.LVL849:
 5671 000c 40F8041D 		str	r1, [r0, #-4]!
3262:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
 5672              		.loc 1 3262 0
 5673 0010 FFF7FEFF 		bl	get_ldnumber
 5674              	.LVL850:
3263:Middlewares/Third_Party/FatFs/src/ff.c **** 	cfs = FatFs[vol];					/* Pointer to fs object */
 5675              		.loc 1 3263 0
 5676 0014 051E     		subs	r5, r0, #0
 5677 0016 34DB     		blt	.L591
3264:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5678              		.loc 1 3264 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 218


 5679 0018 1C4B     		ldr	r3, .L598
 5680 001a 53F82540 		ldr	r4, [r3, r5, lsl #2]
 5681              	.LVL851:
3266:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 5682              		.loc 1 3266 0
 5683 001e 54B1     		cbz	r4, .L589
3268:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5684              		.loc 1 3268 0
 5685 0020 2046     		mov	r0, r4
 5686              	.LVL852:
 5687 0022 FFF7FEFF 		bl	clear_lock
 5688              	.LVL853:
3271:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5689              		.loc 1 3271 0
 5690 0026 2069     		ldr	r0, [r4, #16]
 5691 0028 FFF7FEFF 		bl	ff_del_syncobj
 5692              	.LVL854:
 5693 002c 08B9     		cbnz	r0, .L596
 5694 002e 0224     		movs	r4, #2
 5695              	.LVL855:
 5696 0030 28E0     		b	.L588
 5697              	.LVL856:
 5698              	.L596:
3273:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 5699              		.loc 1 3273 0
 5700 0032 0023     		movs	r3, #0
 5701 0034 2370     		strb	r3, [r4]
 5702              	.L589:
3276:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fs_type = 0;				/* Clear new fs object */
 5703              		.loc 1 3276 0
 5704 0036 019B     		ldr	r3, [sp, #4]
 5705 0038 4BB1     		cbz	r3, .L590
3277:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT						/* Create sync object for the new volume */
 5706              		.loc 1 3277 0
 5707 003a 0022     		movs	r2, #0
 5708 003c 1A70     		strb	r2, [r3]
3279:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5709              		.loc 1 3279 0
 5710 003e 0199     		ldr	r1, [sp, #4]
 5711 0040 1031     		adds	r1, r1, #16
 5712 0042 E8B2     		uxtb	r0, r5
 5713 0044 FFF7FEFF 		bl	ff_cre_syncobj
 5714              	.LVL857:
 5715 0048 08B9     		cbnz	r0, .L590
 5716 004a 0224     		movs	r4, #2
 5717              	.LVL858:
 5718 004c 1AE0     		b	.L588
 5719              	.LVL859:
 5720              	.L590:
3282:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5721              		.loc 1 3282 0
 5722 004e 019B     		ldr	r3, [sp, #4]
 5723 0050 0E4A     		ldr	r2, .L598
 5724 0052 42F82530 		str	r3, [r2, r5, lsl #2]
3284:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5725              		.loc 1 3284 0
 5726 0056 16F1FF36 		adds	r6, r6, #-1
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 219


 5727 005a 18BF     		it	ne
 5728 005c 0126     		movne	r6, #1
 5729 005e 002B     		cmp	r3, #0
 5730 0060 08BF     		it	eq
 5731 0062 46F00106 		orreq	r6, r6, #1
 5732 0066 0EB1     		cbz	r6, .L597
 5733 0068 0024     		movs	r4, #0
 5734              	.LVL860:
 5735 006a 0BE0     		b	.L588
 5736              	.LVL861:
 5737              	.L597:
3286:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
 5738              		.loc 1 3286 0
 5739 006c 0022     		movs	r2, #0
 5740 006e 01A9     		add	r1, sp, #4
 5741 0070 6846     		mov	r0, sp
 5742 0072 FFF7FEFF 		bl	find_volume
 5743              	.LVL862:
 5744 0076 0446     		mov	r4, r0
 5745              	.LVL863:
3287:Middlewares/Third_Party/FatFs/src/ff.c **** }
 5746              		.loc 1 3287 0
 5747 0078 0146     		mov	r1, r0
 5748 007a 0198     		ldr	r0, [sp, #4]
 5749              	.LVL864:
 5750 007c FFF7FEFF 		bl	unlock_fs
 5751              	.LVL865:
 5752 0080 00E0     		b	.L588
 5753              	.LVL866:
 5754              	.L591:
3263:Middlewares/Third_Party/FatFs/src/ff.c **** 	cfs = FatFs[vol];					/* Pointer to fs object */
 5755              		.loc 1 3263 0
 5756 0082 0B24     		movs	r4, #11
 5757              	.LVL867:
 5758              	.L588:
3288:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5759              		.loc 1 3288 0
 5760 0084 2046     		mov	r0, r4
 5761 0086 04B0     		add	sp, sp, #16
 5762              	.LCFI60:
 5763              		.cfi_def_cfa_offset 16
 5764              		@ sp needed
 5765 0088 70BD     		pop	{r4, r5, r6, pc}
 5766              	.LVL868:
 5767              	.L599:
 5768 008a 00BF     		.align	2
 5769              	.L598:
 5770 008c 00000000 		.word	.LANCHOR3
 5771              		.cfi_endproc
 5772              	.LFE186:
 5774              		.section	.text.f_open,"ax",%progbits
 5775              		.align	1
 5776              		.global	f_open
 5777              		.syntax unified
 5778              		.thumb
 5779              		.thumb_func
 5780              		.fpu fpv5-sp-d16
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 220


 5782              	f_open:
 5783              	.LFB187:
3302:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 5784              		.loc 1 3302 0
 5785              		.cfi_startproc
 5786              		@ args = 0, pretend = 0, frame = 64
 5787              		@ frame_needed = 0, uses_anonymous_args = 0
 5788              	.LVL869:
 5789 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 5790              	.LCFI61:
 5791              		.cfi_def_cfa_offset 32
 5792              		.cfi_offset 4, -32
 5793              		.cfi_offset 5, -28
 5794              		.cfi_offset 6, -24
 5795              		.cfi_offset 7, -20
 5796              		.cfi_offset 8, -16
 5797              		.cfi_offset 9, -12
 5798              		.cfi_offset 10, -8
 5799              		.cfi_offset 14, -4
 5800 0004 90B0     		sub	sp, sp, #64
 5801              	.LCFI62:
 5802              		.cfi_def_cfa_offset 96
 5803 0006 0191     		str	r1, [sp, #4]
3313:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5804              		.loc 1 3313 0
 5805 0008 0028     		cmp	r0, #0
 5806 000a 00F02781 		beq	.L618
 5807 000e 0646     		mov	r6, r0
 5808 0010 1546     		mov	r5, r2
3316:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path, &fs, mode);
 5809              		.loc 1 3316 0
 5810 0012 02F03F07 		and	r7, r2, #63
 5811              	.LVL870:
3317:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 5812              		.loc 1 3317 0
 5813 0016 3A46     		mov	r2, r7
 5814 0018 02A9     		add	r1, sp, #8
 5815              	.LVL871:
 5816 001a 01A8     		add	r0, sp, #4
 5817              	.LVL872:
 5818 001c FFF7FEFF 		bl	find_volume
 5819              	.LVL873:
3318:Middlewares/Third_Party/FatFs/src/ff.c **** 		dj.obj.fs = fs;
 5820              		.loc 1 3318 0
 5821 0020 0446     		mov	r4, r0
 5822 0022 50B1     		cbz	r0, .L631
 5823              	.LVL874:
 5824              	.L602:
3488:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5825              		.loc 1 3488 0
 5826 0024 0CB1     		cbz	r4, .L617
3488:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5827              		.loc 1 3488 0 is_stmt 0 discriminator 1
 5828 0026 0023     		movs	r3, #0
 5829 0028 3360     		str	r3, [r6]
 5830              	.L617:
3490:Middlewares/Third_Party/FatFs/src/ff.c **** }
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 221


 5831              		.loc 1 3490 0 is_stmt 1
 5832 002a 2146     		mov	r1, r4
 5833 002c 0298     		ldr	r0, [sp, #8]
 5834 002e FFF7FEFF 		bl	unlock_fs
 5835              	.LVL875:
 5836              	.L601:
3491:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5837              		.loc 1 3491 0
 5838 0032 2046     		mov	r0, r4
 5839 0034 10B0     		add	sp, sp, #64
 5840              	.LCFI63:
 5841              		.cfi_remember_state
 5842              		.cfi_def_cfa_offset 32
 5843              		@ sp needed
 5844 0036 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 5845              	.LVL876:
 5846              	.L631:
 5847              	.LCFI64:
 5848              		.cfi_restore_state
3319:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
 5849              		.loc 1 3319 0
 5850 003a 029B     		ldr	r3, [sp, #8]
 5851 003c 0393     		str	r3, [sp, #12]
3320:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
 5852              		.loc 1 3320 0
 5853 003e 4FF40070 		mov	r0, #512
 5854              	.LVL877:
 5855 0042 FFF7FEFF 		bl	ff_memalloc
 5856              	.LVL878:
 5857 0046 8046     		mov	r8, r0
 5858 0048 0028     		cmp	r0, #0
 5859 004a 3DD0     		beq	.L632
3320:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
 5860              		.loc 1 3320 0 is_stmt 0 discriminator 2
 5861 004c 029B     		ldr	r3, [sp, #8]
 5862 004e D860     		str	r0, [r3, #12]
3321:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY	/* R/W configuration */
 5863              		.loc 1 3321 0 is_stmt 1 discriminator 2
 5864 0050 0199     		ldr	r1, [sp, #4]
 5865 0052 03A8     		add	r0, sp, #12
 5866              	.LVL879:
 5867 0054 FFF7FEFF 		bl	follow_path
 5868              	.LVL880:
3323:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {	/* Origin directory itself? */
 5869              		.loc 1 3323 0 discriminator 2
 5870 0058 0446     		mov	r4, r0
 5871 005a 60B9     		cbnz	r0, .L604
3324:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;
 5872              		.loc 1 3324 0
 5873 005c 9DF93B30 		ldrsb	r3, [sp, #59]
 5874 0060 002B     		cmp	r3, #0
 5875 0062 37DB     		blt	.L619
3329:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 5876              		.loc 1 3329 0
 5877 0064 37F00103 		bics	r3, r7, #1
 5878 0068 14BF     		ite	ne
 5879 006a 0121     		movne	r1, #1
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 222


 5880 006c 0021     		moveq	r1, #0
 5881 006e 03A8     		add	r0, sp, #12
 5882              	.LVL881:
 5883 0070 FFF7FEFF 		bl	chk_lock
 5884              	.LVL882:
 5885 0074 0446     		mov	r4, r0
 5886              	.LVL883:
 5887              	.L604:
3334:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) {					/* No file, create new */
 5888              		.loc 1 3334 0
 5889 0076 15F01C0F 		tst	r5, #28
 5890 007a 7FD0     		beq	.L605
3335:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE) {		/* There is no file to open, create a new entry */
 5891              		.loc 1 3335 0
 5892 007c 002C     		cmp	r4, #0
 5893 007e 35D0     		beq	.L606
3336:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 5894              		.loc 1 3336 0
 5895 0080 042C     		cmp	r4, #4
 5896 0082 29D0     		beq	.L633
 5897              	.LVL884:
 5898              	.L607:
3343:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 5899              		.loc 1 3343 0
 5900 0084 47F00807 		orr	r7, r7, #8
 5901              	.LVL885:
 5902              	.L608:
3352:Middlewares/Third_Party/FatFs/src/ff.c **** 				dw = GET_FATTIME();
 5903              		.loc 1 3352 0
 5904 0088 14B9     		cbnz	r4, .L609
3352:Middlewares/Third_Party/FatFs/src/ff.c **** 				dw = GET_FATTIME();
 5905              		.loc 1 3352 0 is_stmt 0 discriminator 1
 5906 008a 17F0080F 		tst	r7, #8
 5907 008e 39D1     		bne	.L634
 5908              	.LVL886:
 5909              	.L609:
3411:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (mode & FA_CREATE_ALWAYS)		/* Set file change flag if created or overwritten */
 5910              		.loc 1 3411 0 is_stmt 1
 5911 0090 A4B9     		cbnz	r4, .L610
3412:Middlewares/Third_Party/FatFs/src/ff.c **** 				mode |= FA_MODIFIED;
 5912              		.loc 1 3412 0
 5913 0092 17F0080F 		tst	r7, #8
 5914 0096 01D0     		beq	.L611
3413:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->dir_sect = fs->winsect;			/* Pointer to the directory entry */
 5915              		.loc 1 3413 0
 5916 0098 47F04007 		orr	r7, r7, #64
 5917              	.LVL887:
 5918              	.L611:
3414:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->dir_ptr = dj.dir;
 5919              		.loc 1 3414 0
 5920 009c 029B     		ldr	r3, [sp, #8]
 5921 009e 9B6B     		ldr	r3, [r3, #56]
 5922 00a0 7362     		str	r3, [r6, #36]
3415:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 5923              		.loc 1 3415 0
 5924 00a2 0B9B     		ldr	r3, [sp, #44]
 5925 00a4 B362     		str	r3, [r6, #40]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 223


3417:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!fp->obj.lockid) res = FR_INT_ERR;
 5926              		.loc 1 3417 0
 5927 00a6 37F00103 		bics	r3, r7, #1
 5928 00aa 14BF     		ite	ne
 5929 00ac 0121     		movne	r1, #1
 5930 00ae 0021     		moveq	r1, #0
 5931 00b0 03A8     		add	r0, sp, #12
 5932 00b2 FFF7FEFF 		bl	inc_lock
 5933              	.LVL888:
 5934 00b6 3061     		str	r0, [r6, #16]
3418:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5935              		.loc 1 3418 0
 5936 00b8 00B9     		cbnz	r0, .L610
 5937 00ba 0224     		movs	r4, #2
 5938              	.LVL889:
 5939              	.L610:
3433:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 5940              		.loc 1 3433 0
 5941 00bc 002C     		cmp	r4, #0
 5942 00be 70D0     		beq	.L635
 5943              	.LVL890:
 5944              	.L612:
3485:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 5945              		.loc 1 3485 0
 5946 00c0 4046     		mov	r0, r8
 5947 00c2 FFF7FEFF 		bl	ff_memfree
 5948              	.LVL891:
 5949 00c6 ADE7     		b	.L602
 5950              	.LVL892:
 5951              	.L632:
3320:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
 5952              		.loc 1 3320 0 discriminator 1
 5953 00c8 1121     		movs	r1, #17
 5954 00ca 0298     		ldr	r0, [sp, #8]
 5955              	.LVL893:
 5956 00cc FFF7FEFF 		bl	unlock_fs
 5957              	.LVL894:
 5958 00d0 1124     		movs	r4, #17
 5959 00d2 AEE7     		b	.L601
 5960              	.LVL895:
 5961              	.L619:
3325:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 5962              		.loc 1 3325 0
 5963 00d4 0624     		movs	r4, #6
 5964 00d6 CEE7     		b	.L604
 5965              	.LVL896:
 5966              	.L633:
3338:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 5967              		.loc 1 3338 0
 5968 00d8 FFF7FEFF 		bl	enq_lock
 5969              	.LVL897:
 5970 00dc 08B9     		cbnz	r0, .L636
 5971 00de 1224     		movs	r4, #18
 5972              	.LVL898:
 5973 00e0 D0E7     		b	.L607
 5974              	.LVL899:
 5975              	.L636:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 224


3338:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 5976              		.loc 1 3338 0 is_stmt 0 discriminator 1
 5977 00e2 03A8     		add	r0, sp, #12
 5978 00e4 FFF7FEFF 		bl	dir_register
 5979              	.LVL900:
 5980 00e8 0446     		mov	r4, r0
 5981              	.LVL901:
 5982 00ea CBE7     		b	.L607
 5983              	.LVL902:
 5984              	.L606:
3346:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_DENIED;
 5985              		.loc 1 3346 0 is_stmt 1
 5986 00ec 9DF81230 		ldrb	r3, [sp, #18]	@ zero_extendqisi2
 5987 00f0 13F0110F 		tst	r3, #17
 5988 00f4 04D1     		bne	.L621
3349:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 5989              		.loc 1 3349 0
 5990 00f6 15F0040F 		tst	r5, #4
 5991 00fa C5D0     		beq	.L608
 5992 00fc 0824     		movs	r4, #8
 5993              	.LVL903:
 5994 00fe C3E7     		b	.L608
 5995              	.LVL904:
 5996              	.L621:
3347:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
 5997              		.loc 1 3347 0
 5998 0100 0724     		movs	r4, #7
 5999              	.LVL905:
 6000 0102 C1E7     		b	.L608
 6001              	.LVL906:
 6002              	.L634:
3353:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 6003              		.loc 1 3353 0
 6004 0104 FFF7FEFF 		bl	get_fattime
 6005              	.LVL907:
 6006 0108 0546     		mov	r5, r0
 6007              	.LVL908:
3381:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dj.dir + DIR_ModTime, dw);	/* Set modified time */
 6008              		.loc 1 3381 0
 6009 010a 0146     		mov	r1, r0
 6010 010c 0B98     		ldr	r0, [sp, #44]
 6011              	.LVL909:
 6012 010e 0E30     		adds	r0, r0, #14
 6013 0110 FFF7FEFF 		bl	st_dword
 6014              	.LVL910:
3382:Middlewares/Third_Party/FatFs/src/ff.c **** 					dj.dir[DIR_Attr] = AM_ARC;			/* Reset attribute */
 6015              		.loc 1 3382 0
 6016 0114 2946     		mov	r1, r5
 6017 0116 0B98     		ldr	r0, [sp, #44]
 6018 0118 1630     		adds	r0, r0, #22
 6019 011a FFF7FEFF 		bl	st_dword
 6020              	.LVL911:
3383:Middlewares/Third_Party/FatFs/src/ff.c **** 					cl = ld_clust(fs, dj.dir);			/* Get cluster chain */
 6021              		.loc 1 3383 0
 6022 011e 2022     		movs	r2, #32
 6023 0120 0B9B     		ldr	r3, [sp, #44]
 6024 0122 DA72     		strb	r2, [r3, #11]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 225


3384:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fs, dj.dir, 0);			/* Reset file allocation info */
 6025              		.loc 1 3384 0
 6026 0124 029D     		ldr	r5, [sp, #8]
 6027              	.LVL912:
 6028 0126 DDF82C90 		ldr	r9, [sp, #44]
 6029 012a 4946     		mov	r1, r9
 6030 012c 2846     		mov	r0, r5
 6031 012e FFF7FEFF 		bl	ld_clust
 6032              	.LVL913:
 6033 0132 8246     		mov	r10, r0
 6034              	.LVL914:
3385:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dj.dir + DIR_FileSize, 0);
 6035              		.loc 1 3385 0
 6036 0134 0022     		movs	r2, #0
 6037 0136 4946     		mov	r1, r9
 6038 0138 2846     		mov	r0, r5
 6039              	.LVL915:
 6040 013a FFF7FEFF 		bl	st_clust
 6041              	.LVL916:
3386:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->wflag = 1;
 6042              		.loc 1 3386 0
 6043 013e 0021     		movs	r1, #0
 6044 0140 0B98     		ldr	r0, [sp, #44]
 6045 0142 1C30     		adds	r0, r0, #28
 6046 0144 FFF7FEFF 		bl	st_dword
 6047              	.LVL917:
3387:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6048              		.loc 1 3387 0
 6049 0148 0122     		movs	r2, #1
 6050 014a 029B     		ldr	r3, [sp, #8]
 6051 014c DA70     		strb	r2, [r3, #3]
3389:Middlewares/Third_Party/FatFs/src/ff.c **** 						dw = fs->winsect;
 6052              		.loc 1 3389 0
 6053 014e BAF1000F 		cmp	r10, #0
 6054 0152 9DD0     		beq	.L609
3390:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = remove_chain(&dj.obj, cl, 0);
 6055              		.loc 1 3390 0
 6056 0154 029B     		ldr	r3, [sp, #8]
 6057 0156 9D6B     		ldr	r5, [r3, #56]
 6058              	.LVL918:
3391:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (res == FR_OK) {
 6059              		.loc 1 3391 0
 6060 0158 0022     		movs	r2, #0
 6061 015a 5146     		mov	r1, r10
 6062 015c 03A8     		add	r0, sp, #12
 6063 015e FFF7FEFF 		bl	remove_chain
 6064              	.LVL919:
3392:Middlewares/Third_Party/FatFs/src/ff.c **** 							res = move_window(fs, dw);
 6065              		.loc 1 3392 0
 6066 0162 0446     		mov	r4, r0
 6067 0164 0028     		cmp	r0, #0
 6068 0166 93D1     		bne	.L609
3393:Middlewares/Third_Party/FatFs/src/ff.c **** 							fs->last_clst = cl - 1;		/* Reuse the cluster hole */
 6069              		.loc 1 3393 0
 6070 0168 2946     		mov	r1, r5
 6071 016a 0298     		ldr	r0, [sp, #8]
 6072              	.LVL920:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 226


 6073 016c FFF7FEFF 		bl	move_window
 6074              	.LVL921:
 6075 0170 0446     		mov	r4, r0
 6076              	.LVL922:
3394:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
 6077              		.loc 1 3394 0
 6078 0172 0AF1FF33 		add	r3, r10, #-1
 6079 0176 029A     		ldr	r2, [sp, #8]
 6080 0178 5361     		str	r3, [r2, #20]
 6081 017a 89E7     		b	.L609
 6082              	.LVL923:
 6083              	.L605:
3401:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dj.obj.attr & AM_DIR) {		/* It is a directory */
 6084              		.loc 1 3401 0
 6085 017c 002C     		cmp	r4, #0
 6086 017e 87D1     		bne	.L609
3402:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_NO_FILE;
 6087              		.loc 1 3402 0
 6088 0180 9DF81230 		ldrb	r3, [sp, #18]	@ zero_extendqisi2
 6089 0184 13F0100F 		tst	r3, #16
 6090 0188 09D1     		bne	.L623
3405:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = FR_DENIED;
 6091              		.loc 1 3405 0
 6092 018a 15F0020F 		tst	r5, #2
 6093 018e 3FF47FAF 		beq	.L609
3405:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = FR_DENIED;
 6094              		.loc 1 3405 0 is_stmt 0 discriminator 1
 6095 0192 13F0010F 		tst	r3, #1
 6096 0196 3FF47BAF 		beq	.L609
3406:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 6097              		.loc 1 3406 0 is_stmt 1
 6098 019a 0724     		movs	r4, #7
 6099              	.LVL924:
 6100 019c 78E7     		b	.L609
 6101              	.LVL925:
 6102              	.L623:
3403:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
 6103              		.loc 1 3403 0
 6104 019e 0424     		movs	r4, #4
 6105              	.LVL926:
 6106 01a0 76E7     		b	.L609
 6107              	.LVL927:
 6108              	.L635:
3445:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->obj.objsize = ld_dword(dj.dir + DIR_FileSize);
 6109              		.loc 1 3445 0
 6110 01a2 029D     		ldr	r5, [sp, #8]
 6111 01a4 DDF82C90 		ldr	r9, [sp, #44]
 6112 01a8 4946     		mov	r1, r9
 6113 01aa 2846     		mov	r0, r5
 6114 01ac FFF7FEFF 		bl	ld_clust
 6115              	.LVL928:
 6116 01b0 B060     		str	r0, [r6, #8]
3446:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6117              		.loc 1 3446 0
 6118 01b2 09F11C00 		add	r0, r9, #28
 6119 01b6 FFF7FEFF 		bl	ld_dword
 6120              	.LVL929:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 227


 6121 01ba F060     		str	r0, [r6, #12]
3449:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 6122              		.loc 1 3449 0
 6123 01bc 0021     		movs	r1, #0
 6124 01be F162     		str	r1, [r6, #44]
3451:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->obj.id = fs->id;
 6125              		.loc 1 3451 0
 6126 01c0 3560     		str	r5, [r6]
3452:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->flag = mode;		/* Set file access mode */
 6127              		.loc 1 3452 0
 6128 01c2 EB88     		ldrh	r3, [r5, #6]
 6129 01c4 B380     		strh	r3, [r6, #4]	@ movhi
3453:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->err = 0;			/* Clear error flag */
 6130              		.loc 1 3453 0
 6131 01c6 3775     		strb	r7, [r6, #20]
3454:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->sect = 0;			/* Invalidate current data sector */
 6132              		.loc 1 3454 0
 6133 01c8 7175     		strb	r1, [r6, #21]
3455:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->fptr = 0;			/* Set file pointer top of the file */
 6134              		.loc 1 3455 0
 6135 01ca 3162     		str	r1, [r6, #32]
3456:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 6136              		.loc 1 3456 0
 6137 01cc B161     		str	r1, [r6, #24]
3459:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 6138              		.loc 1 3459 0
 6139 01ce 06F13009 		add	r9, r6, #48
 6140 01d2 4FF40072 		mov	r2, #512
 6141 01d6 4846     		mov	r0, r9
 6142 01d8 FFF7FEFF 		bl	mem_set
 6143              	.LVL930:
3461:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fptr = fp->obj.objsize;			/* Offset to seek */
 6144              		.loc 1 3461 0
 6145 01dc 17F0200F 		tst	r7, #32
 6146 01e0 3FF46EAF 		beq	.L612
3461:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fptr = fp->obj.objsize;			/* Offset to seek */
 6147              		.loc 1 3461 0 is_stmt 0 discriminator 1
 6148 01e4 F568     		ldr	r5, [r6, #12]
 6149 01e6 002D     		cmp	r5, #0
 6150 01e8 3FF46AAF 		beq	.L612
3462:Middlewares/Third_Party/FatFs/src/ff.c **** 				bcs = (DWORD)fs->csize * SS(fs);	/* Cluster size in byte */
 6151              		.loc 1 3462 0 is_stmt 1
 6152 01ec B561     		str	r5, [r6, #24]
3463:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = fp->obj.sclust;				/* Follow the cluster chain */
 6153              		.loc 1 3463 0
 6154 01ee 029B     		ldr	r3, [sp, #8]
 6155 01f0 5F89     		ldrh	r7, [r3, #10]
 6156              	.LVL931:
 6157 01f2 7F02     		lsls	r7, r7, #9
 6158              	.LVL932:
3464:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (ofs = fp->obj.objsize; res == FR_OK && ofs > bcs; ofs -= bcs) {
 6159              		.loc 1 3464 0
 6160 01f4 B168     		ldr	r1, [r6, #8]
 6161              	.LVL933:
3465:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = get_fat(&fp->obj, clst);
 6162              		.loc 1 3465 0
 6163 01f6 02E0     		b	.L613
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 228


 6164              	.LVL934:
 6165              	.L638:
3467:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) res = FR_DISK_ERR;
 6166              		.loc 1 3467 0
 6167 01f8 0224     		movs	r4, #2
 6168              	.LVL935:
 6169 01fa 0DE0     		b	.L614
 6170              	.L615:
 6171              	.LVL936:
3465:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = get_fat(&fp->obj, clst);
 6172              		.loc 1 3465 0 discriminator 2
 6173 01fc ED1B     		subs	r5, r5, r7
 6174              	.LVL937:
 6175              	.L613:
3465:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = get_fat(&fp->obj, clst);
 6176              		.loc 1 3465 0 is_stmt 0 discriminator 1
 6177 01fe B4FA84F3 		clz	r3, r4
 6178 0202 5B09     		lsrs	r3, r3, #5
 6179 0204 BD42     		cmp	r5, r7
 6180 0206 98BF     		it	ls
 6181 0208 0023     		movls	r3, #0
 6182 020a 53B1     		cbz	r3, .L637
3466:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst <= 1) res = FR_INT_ERR;
 6183              		.loc 1 3466 0 is_stmt 1
 6184 020c 3046     		mov	r0, r6
 6185 020e FFF7FEFF 		bl	get_fat
 6186              	.LVL938:
 6187 0212 0146     		mov	r1, r0
 6188              	.LVL939:
3467:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) res = FR_DISK_ERR;
 6189              		.loc 1 3467 0
 6190 0214 0128     		cmp	r0, #1
 6191 0216 EFD9     		bls	.L638
 6192              	.LVL940:
 6193              	.L614:
3468:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 6194              		.loc 1 3468 0
 6195 0218 B1F1FF3F 		cmp	r1, #-1
 6196 021c EED1     		bne	.L615
 6197 021e 0124     		movs	r4, #1
 6198              	.LVL941:
 6199 0220 ECE7     		b	.L615
 6200              	.LVL942:
 6201              	.L637:
3470:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK && ofs % SS(fs)) {	/* Fill sector buffer if not on the sector boundary */
 6202              		.loc 1 3470 0
 6203 0222 F161     		str	r1, [r6, #28]
3471:Middlewares/Third_Party/FatFs/src/ff.c **** 					if ((sc = clust2sect(fs, clst)) == 0) {
 6204              		.loc 1 3471 0
 6205 0224 002C     		cmp	r4, #0
 6206 0226 7FF44BAF 		bne	.L612
3471:Middlewares/Third_Party/FatFs/src/ff.c **** 					if ((sc = clust2sect(fs, clst)) == 0) {
 6207              		.loc 1 3471 0 is_stmt 0 discriminator 1
 6208 022a C5F30803 		ubfx	r3, r5, #0, #9
 6209 022e 002B     		cmp	r3, #0
 6210 0230 3FF446AF 		beq	.L612
3472:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = FR_INT_ERR;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 229


 6211              		.loc 1 3472 0 is_stmt 1
 6212 0234 029F     		ldr	r7, [sp, #8]
 6213              	.LVL943:
 6214 0236 3846     		mov	r0, r7
 6215 0238 FFF7FEFF 		bl	clust2sect
 6216              	.LVL944:
 6217 023c 08B9     		cbnz	r0, .L639
3473:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else {
 6218              		.loc 1 3473 0
 6219 023e 0224     		movs	r4, #2
 6220              	.LVL945:
 6221 0240 3EE7     		b	.L612
 6222              	.LVL946:
 6223              	.L639:
3475:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 6224              		.loc 1 3475 0
 6225 0242 00EB5522 		add	r2, r0, r5, lsr #9
 6226 0246 3262     		str	r2, [r6, #32]
3477:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 6227              		.loc 1 3477 0
 6228 0248 0123     		movs	r3, #1
 6229 024a 4946     		mov	r1, r9
 6230 024c 7878     		ldrb	r0, [r7, #1]	@ zero_extendqisi2
 6231              	.LVL947:
 6232 024e FFF7FEFF 		bl	disk_read
 6233              	.LVL948:
 6234 0252 0028     		cmp	r0, #0
 6235 0254 3FF434AF 		beq	.L612
 6236 0258 0124     		movs	r4, #1
 6237              	.LVL949:
 6238 025a 31E7     		b	.L612
 6239              	.LVL950:
 6240              	.L618:
3313:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6241              		.loc 1 3313 0
 6242 025c 0924     		movs	r4, #9
 6243 025e E8E6     		b	.L601
 6244              		.cfi_endproc
 6245              	.LFE187:
 6247              		.section	.text.f_read,"ax",%progbits
 6248              		.align	1
 6249              		.global	f_read
 6250              		.syntax unified
 6251              		.thumb
 6252              		.thumb_func
 6253              		.fpu fpv5-sp-d16
 6255              	f_read:
 6256              	.LFB188:
3506:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 6257              		.loc 1 3506 0
 6258              		.cfi_startproc
 6259              		@ args = 0, pretend = 0, frame = 16
 6260              		@ frame_needed = 0, uses_anonymous_args = 0
 6261              	.LVL951:
 6262 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 6263              	.LCFI65:
 6264              		.cfi_def_cfa_offset 36
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 230


 6265              		.cfi_offset 4, -36
 6266              		.cfi_offset 5, -32
 6267              		.cfi_offset 6, -28
 6268              		.cfi_offset 7, -24
 6269              		.cfi_offset 8, -20
 6270              		.cfi_offset 9, -16
 6271              		.cfi_offset 10, -12
 6272              		.cfi_offset 11, -8
 6273              		.cfi_offset 14, -4
 6274 0004 85B0     		sub	sp, sp, #20
 6275              	.LCFI66:
 6276              		.cfi_def_cfa_offset 56
 6277 0006 0446     		mov	r4, r0
 6278 0008 8846     		mov	r8, r1
 6279 000a 1646     		mov	r6, r2
 6280 000c 9946     		mov	r9, r3
 6281              	.LVL952:
3515:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(&fp->obj, &fs);				/* Check validity of the file object */
 6282              		.loc 1 3515 0
 6283 000e 0023     		movs	r3, #0
 6284              	.LVL953:
 6285 0010 C9F80030 		str	r3, [r9]
3516:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);	/* Check validity */
 6286              		.loc 1 3516 0
 6287 0014 0190     		str	r0, [sp, #4]
 6288 0016 03A9     		add	r1, sp, #12
 6289              	.LVL954:
 6290 0018 FFF7FEFF 		bl	validate
 6291              	.LVL955:
3517:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_READ)) LEAVE_FF(fs, FR_DENIED); /* Check access mode */
 6292              		.loc 1 3517 0
 6293 001c 0090     		str	r0, [sp]
 6294 001e 68B9     		cbnz	r0, .L641
3517:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_READ)) LEAVE_FF(fs, FR_DENIED); /* Check access mode */
 6295              		.loc 1 3517 0 is_stmt 0 discriminator 2
 6296 0020 637D     		ldrb	r3, [r4, #21]	@ zero_extendqisi2
 6297 0022 0093     		str	r3, [sp]
 6298              	.LVL956:
 6299 0024 53B9     		cbnz	r3, .L641
3518:Middlewares/Third_Party/FatFs/src/ff.c **** 	remain = fp->obj.objsize - fp->fptr;
 6300              		.loc 1 3518 0 is_stmt 1
 6301 0026 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
 6302              	.LVL957:
 6303 0028 13F0010F 		tst	r3, #1
 6304 002c 0ED0     		beq	.L668
3519:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (btr > remain) btr = (UINT)remain;		/* Truncate btr by remaining bytes */
 6305              		.loc 1 3519 0
 6306 002e E368     		ldr	r3, [r4, #12]
 6307 0030 A269     		ldr	r2, [r4, #24]
 6308 0032 9B1A     		subs	r3, r3, r2
 6309              	.LVL958:
3520:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6310              		.loc 1 3520 0
 6311 0034 B342     		cmp	r3, r6
 6312 0036 75D2     		bcs	.L646
 6313 0038 1E46     		mov	r6, r3
 6314              	.LVL959:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 231


 6315 003a 73E0     		b	.L646
 6316              	.LVL960:
 6317              	.L641:
3517:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_READ)) LEAVE_FF(fs, FR_DENIED); /* Check access mode */
 6318              		.loc 1 3517 0 discriminator 3
 6319 003c 0099     		ldr	r1, [sp]
 6320 003e 0398     		ldr	r0, [sp, #12]
 6321 0040 FFF7FEFF 		bl	unlock_fs
 6322              	.LVL961:
 6323              	.L643:
3590:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6324              		.loc 1 3590 0
 6325 0044 0098     		ldr	r0, [sp]
 6326 0046 05B0     		add	sp, sp, #20
 6327              	.LCFI67:
 6328              		.cfi_remember_state
 6329              		.cfi_def_cfa_offset 36
 6330              		@ sp needed
 6331 0048 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 6332              	.LVL962:
 6333              	.L668:
 6334              	.LCFI68:
 6335              		.cfi_restore_state
3518:Middlewares/Third_Party/FatFs/src/ff.c **** 	remain = fp->obj.objsize - fp->fptr;
 6336              		.loc 1 3518 0 discriminator 1
 6337 004c 0721     		movs	r1, #7
 6338 004e 0398     		ldr	r0, [sp, #12]
 6339 0050 FFF7FEFF 		bl	unlock_fs
 6340              	.LVL963:
 6341 0054 0723     		movs	r3, #7
 6342 0056 0093     		str	r3, [sp]
 6343              	.LVL964:
 6344 0058 F4E7     		b	.L643
 6345              	.LVL965:
 6346              	.L649:
3531:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = clmt_clust(fp, fp->fptr);	/* Get cluster# from the CLMT */
 6347              		.loc 1 3531 0
 6348 005a E36A     		ldr	r3, [r4, #44]
 6349 005c 1BB1     		cbz	r3, .L651
3532:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else
 6350              		.loc 1 3532 0
 6351 005e 2046     		mov	r0, r4
 6352 0060 FFF7FEFF 		bl	clmt_clust
 6353              	.LVL966:
 6354 0064 6EE0     		b	.L650
 6355              	.LVL967:
 6356              	.L651:
3536:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 6357              		.loc 1 3536 0
 6358 0066 E169     		ldr	r1, [r4, #28]
 6359 0068 0198     		ldr	r0, [sp, #4]
 6360 006a FFF7FEFF 		bl	get_fat
 6361              	.LVL968:
 6362 006e 69E0     		b	.L650
 6363              	.L672:
3539:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 6364              		.loc 1 3539 0 discriminator 1
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 232


 6365 0070 0225     		movs	r5, #2
 6366 0072 6575     		strb	r5, [r4, #21]
 6367 0074 2946     		mov	r1, r5
 6368 0076 0398     		ldr	r0, [sp, #12]
 6369              	.LVL969:
 6370 0078 FFF7FEFF 		bl	unlock_fs
 6371              	.LVL970:
 6372 007c 0095     		str	r5, [sp]
 6373              	.LVL971:
 6374 007e E1E7     		b	.L643
 6375              	.LVL972:
 6376              	.L673:
3540:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;				/* Update current cluster */
 6377              		.loc 1 3540 0 discriminator 1
 6378 0080 0125     		movs	r5, #1
 6379 0082 6575     		strb	r5, [r4, #21]
 6380 0084 2946     		mov	r1, r5
 6381 0086 0398     		ldr	r0, [sp, #12]
 6382              	.LVL973:
 6383 0088 FFF7FEFF 		bl	unlock_fs
 6384              	.LVL974:
 6385 008c 0095     		str	r5, [sp]
 6386              	.LVL975:
 6387 008e D9E7     		b	.L643
 6388              	.LVL976:
 6389              	.L674:
3544:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
 6390              		.loc 1 3544 0 discriminator 1
 6391 0090 0225     		movs	r5, #2
 6392 0092 6575     		strb	r5, [r4, #21]
 6393 0094 2946     		mov	r1, r5
 6394 0096 5846     		mov	r0, fp
 6395              	.LVL977:
 6396 0098 FFF7FEFF 		bl	unlock_fs
 6397              	.LVL978:
 6398 009c 0095     		str	r5, [sp]
 6399              	.LVL979:
 6400 009e D1E7     		b	.L643
 6401              	.LVL980:
 6402              	.L675:
3551:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY && _FS_MINIMIZE <= 2			/* Replace one of the read sectors with cached data if it 
 6403              		.loc 1 3551 0 discriminator 1
 6404 00a0 0125     		movs	r5, #1
 6405              	.LVL981:
 6406 00a2 6575     		strb	r5, [r4, #21]
 6407 00a4 2946     		mov	r1, r5
 6408 00a6 0398     		ldr	r0, [sp, #12]
 6409 00a8 FFF7FEFF 		bl	unlock_fs
 6410              	.LVL982:
 6411 00ac 0095     		str	r5, [sp]
 6412              	.LVL983:
 6413 00ae C9E7     		b	.L643
 6414              	.LVL984:
 6415              	.L676:
3558:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(rbuff + ((fp->sect - sect) * SS(fs)), fp->buf, SS(fs));
 6416              		.loc 1 3558 0 discriminator 1
 6417 00b0 206A     		ldr	r0, [r4, #32]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 233


 6418 00b2 A0EB0A00 		sub	r0, r0, r10
 6419 00b6 8542     		cmp	r5, r0
 6420 00b8 69D9     		bls	.L658
3559:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 6421              		.loc 1 3559 0
 6422 00ba 4FF40072 		mov	r2, #512
 6423 00be 04F13001 		add	r1, r4, #48
 6424 00c2 08EB4020 		add	r0, r8, r0, lsl #9
 6425 00c6 FFF7FEFF 		bl	mem_cpy
 6426              	.LVL985:
 6427 00ca 60E0     		b	.L658
 6428              	.L655:
3567:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 6429              		.loc 1 3567 0
 6430 00cc 226A     		ldr	r2, [r4, #32]
 6431 00ce 9245     		cmp	r10, r2
 6432 00d0 0DD0     		beq	.L660
3569:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
 6433              		.loc 1 3569 0
 6434 00d2 94F91430 		ldrsb	r3, [r4, #20]
 6435 00d6 002B     		cmp	r3, #0
 6436 00d8 5BDB     		blt	.L669
 6437              	.L661:
3574:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6438              		.loc 1 3574 0
 6439 00da 0123     		movs	r3, #1
 6440 00dc 5246     		mov	r2, r10
 6441 00de 04F13001 		add	r1, r4, #48
 6442 00e2 0398     		ldr	r0, [sp, #12]
 6443 00e4 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 6444 00e6 FFF7FEFF 		bl	disk_read
 6445              	.LVL986:
 6446 00ea 0028     		cmp	r0, #0
 6447 00ec 66D1     		bne	.L670
 6448              	.L660:
3577:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 6449              		.loc 1 3577 0
 6450 00ee C4F820A0 		str	r10, [r4, #32]
 6451              	.LVL987:
 6452              	.L647:
3579:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rcnt > btr) rcnt = btr;					/* Clip it by btr if needed */
 6453              		.loc 1 3579 0
 6454 00f2 A369     		ldr	r3, [r4, #24]
 6455 00f4 C3F30803 		ubfx	r3, r3, #0, #9
 6456 00f8 C3F50075 		rsb	r5, r3, #512
 6457              	.LVL988:
3580:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
 6458              		.loc 1 3580 0
 6459 00fc AE42     		cmp	r6, r5
 6460 00fe 00D2     		bcs	.L663
 6461 0100 3546     		mov	r5, r6
 6462              	.LVL989:
 6463              	.L663:
3585:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 6464              		.loc 1 3585 0
 6465 0102 04F13001 		add	r1, r4, #48
 6466 0106 2A46     		mov	r2, r5
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 234


 6467 0108 1944     		add	r1, r1, r3
 6468 010a 4046     		mov	r0, r8
 6469 010c FFF7FEFF 		bl	mem_cpy
 6470              	.LVL990:
 6471              	.L659:
3523:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr % SS(fs) == 0) {			/* On the sector boundary? */
 6472              		.loc 1 3523 0
 6473 0110 A844     		add	r8, r8, r5
 6474              	.LVL991:
 6475 0112 A369     		ldr	r3, [r4, #24]
 6476 0114 2B44     		add	r3, r3, r5
 6477 0116 A361     		str	r3, [r4, #24]
 6478 0118 D9F80030 		ldr	r3, [r9]
 6479 011c 2B44     		add	r3, r3, r5
 6480 011e C9F80030 		str	r3, [r9]
 6481 0122 761B     		subs	r6, r6, r5
 6482              	.LVL992:
 6483              	.L646:
3522:Middlewares/Third_Party/FatFs/src/ff.c **** 		rbuff += rcnt, fp->fptr += rcnt, *br += rcnt, btr -= rcnt) {
 6484              		.loc 1 3522 0
 6485 0124 002E     		cmp	r6, #0
 6486 0126 51D0     		beq	.L671
3524:Middlewares/Third_Party/FatFs/src/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs) & (fs->csize - 1));	/* Sector offset in the cluster */
 6487              		.loc 1 3524 0
 6488 0128 A169     		ldr	r1, [r4, #24]
 6489 012a C1F30803 		ubfx	r3, r1, #0, #9
 6490 012e 002B     		cmp	r3, #0
 6491 0130 DFD1     		bne	.L647
3525:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (csect == 0) {					/* On the cluster boundary? */
 6492              		.loc 1 3525 0
 6493 0132 039B     		ldr	r3, [sp, #12]
 6494 0134 5F89     		ldrh	r7, [r3, #10]
 6495 0136 013F     		subs	r7, r7, #1
 6496              	.LVL993:
3526:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr == 0) {			/* On the top of the file? */
 6497              		.loc 1 3526 0
 6498 0138 17EA5127 		ands	r7, r7, r1, lsr #9
 6499              	.LVL994:
 6500 013c 08D1     		bne	.L648
3527:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = fp->obj.sclust;		/* Follow cluster chain from the origin */
 6501              		.loc 1 3527 0
 6502 013e 0029     		cmp	r1, #0
 6503 0140 8BD1     		bne	.L649
3528:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {						/* Middle or end of the file */
 6504              		.loc 1 3528 0
 6505 0142 A068     		ldr	r0, [r4, #8]
 6506              	.LVL995:
 6507              	.L650:
3539:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 6508              		.loc 1 3539 0
 6509 0144 0128     		cmp	r0, #1
 6510 0146 93D9     		bls	.L672
3540:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;				/* Update current cluster */
 6511              		.loc 1 3540 0
 6512 0148 B0F1FF3F 		cmp	r0, #-1
 6513 014c 98D0     		beq	.L673
3541:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 235


 6514              		.loc 1 3541 0
 6515 014e E061     		str	r0, [r4, #28]
 6516              	.LVL996:
 6517              	.L648:
3543:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!sect) ABORT(fs, FR_INT_ERR);
 6518              		.loc 1 3543 0
 6519 0150 DDF80CB0 		ldr	fp, [sp, #12]
 6520 0154 E169     		ldr	r1, [r4, #28]
 6521 0156 5846     		mov	r0, fp
 6522 0158 FFF7FEFF 		bl	clust2sect
 6523              	.LVL997:
3544:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
 6524              		.loc 1 3544 0
 6525 015c 8246     		mov	r10, r0
 6526 015e 0028     		cmp	r0, #0
 6527 0160 96D0     		beq	.L674
3545:Middlewares/Third_Party/FatFs/src/ff.c **** 			cc = btr / SS(fs);					/* When remaining bytes >= sector size, */
 6528              		.loc 1 3545 0
 6529 0162 BA44     		add	r10, r10, r7
 6530              	.LVL998:
3547:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (csect + cc > fs->csize) {	/* Clip at cluster boundary */
 6531              		.loc 1 3547 0
 6532 0164 750A     		lsrs	r5, r6, #9
 6533              	.LVL999:
 6534 0166 B1D0     		beq	.L655
3548:Middlewares/Third_Party/FatFs/src/ff.c **** 					cc = fs->csize - csect;
 6535              		.loc 1 3548 0
 6536 0168 7B19     		adds	r3, r7, r5
 6537 016a BBF80A20 		ldrh	r2, [fp, #10]
 6538 016e 9342     		cmp	r3, r2
 6539 0170 00D9     		bls	.L656
3549:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 6540              		.loc 1 3549 0
 6541 0172 D51B     		subs	r5, r2, r7
 6542              	.LVL1000:
 6543              	.L656:
3551:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY && _FS_MINIMIZE <= 2			/* Replace one of the read sectors with cached data if it 
 6544              		.loc 1 3551 0
 6545 0174 2B46     		mov	r3, r5
 6546 0176 5246     		mov	r2, r10
 6547 0178 4146     		mov	r1, r8
 6548 017a 9BF80100 		ldrb	r0, [fp, #1]	@ zero_extendqisi2
 6549 017e FFF7FEFF 		bl	disk_read
 6550              	.LVL1001:
 6551 0182 0028     		cmp	r0, #0
 6552 0184 8CD1     		bne	.L675
3558:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(rbuff + ((fp->sect - sect) * SS(fs)), fp->buf, SS(fs));
 6553              		.loc 1 3558 0
 6554 0186 94F91430 		ldrsb	r3, [r4, #20]
 6555 018a 002B     		cmp	r3, #0
 6556 018c 90DB     		blt	.L676
 6557              	.L658:
3563:Middlewares/Third_Party/FatFs/src/ff.c **** 				continue;
 6558              		.loc 1 3563 0
 6559 018e 6D02     		lsls	r5, r5, #9
 6560              	.LVL1002:
3564:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 236


 6561              		.loc 1 3564 0
 6562 0190 BEE7     		b	.L659
 6563              	.LVL1003:
 6564              	.L669:
3570:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
 6565              		.loc 1 3570 0
 6566 0192 0123     		movs	r3, #1
 6567 0194 04F13001 		add	r1, r4, #48
 6568 0198 9BF80100 		ldrb	r0, [fp, #1]	@ zero_extendqisi2
 6569 019c FFF7FEFF 		bl	disk_write
 6570              	.LVL1004:
 6571 01a0 20B9     		cbnz	r0, .L677
3571:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 6572              		.loc 1 3571 0
 6573 01a2 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
 6574 01a4 03F07F03 		and	r3, r3, #127
 6575 01a8 2375     		strb	r3, [r4, #20]
 6576 01aa 96E7     		b	.L661
 6577              	.L677:
3570:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
 6578              		.loc 1 3570 0 discriminator 1
 6579 01ac 0125     		movs	r5, #1
 6580              	.LVL1005:
 6581 01ae 6575     		strb	r5, [r4, #21]
 6582 01b0 2946     		mov	r1, r5
 6583 01b2 0398     		ldr	r0, [sp, #12]
 6584 01b4 FFF7FEFF 		bl	unlock_fs
 6585              	.LVL1006:
 6586 01b8 0095     		str	r5, [sp]
 6587              	.LVL1007:
 6588 01ba 43E7     		b	.L643
 6589              	.LVL1008:
 6590              	.L670:
3574:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6591              		.loc 1 3574 0 discriminator 1
 6592 01bc 0125     		movs	r5, #1
 6593              	.LVL1009:
 6594 01be 6575     		strb	r5, [r4, #21]
 6595 01c0 2946     		mov	r1, r5
 6596 01c2 0398     		ldr	r0, [sp, #12]
 6597 01c4 FFF7FEFF 		bl	unlock_fs
 6598              	.LVL1010:
 6599 01c8 0095     		str	r5, [sp]
 6600              	.LVL1011:
 6601 01ca 3BE7     		b	.L643
 6602              	.LVL1012:
 6603              	.L671:
3589:Middlewares/Third_Party/FatFs/src/ff.c **** }
 6604              		.loc 1 3589 0
 6605 01cc 0021     		movs	r1, #0
 6606 01ce 0398     		ldr	r0, [sp, #12]
 6607 01d0 FFF7FEFF 		bl	unlock_fs
 6608              	.LVL1013:
 6609 01d4 36E7     		b	.L643
 6610              		.cfi_endproc
 6611              	.LFE188:
 6613              		.section	.text.f_write,"ax",%progbits
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 237


 6614              		.align	1
 6615              		.global	f_write
 6616              		.syntax unified
 6617              		.thumb
 6618              		.thumb_func
 6619              		.fpu fpv5-sp-d16
 6621              	f_write:
 6622              	.LFB189:
3606:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 6623              		.loc 1 3606 0
 6624              		.cfi_startproc
 6625              		@ args = 0, pretend = 0, frame = 16
 6626              		@ frame_needed = 0, uses_anonymous_args = 0
 6627              	.LVL1014:
 6628 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 6629              	.LCFI69:
 6630              		.cfi_def_cfa_offset 36
 6631              		.cfi_offset 4, -36
 6632              		.cfi_offset 5, -32
 6633              		.cfi_offset 6, -28
 6634              		.cfi_offset 7, -24
 6635              		.cfi_offset 8, -20
 6636              		.cfi_offset 9, -16
 6637              		.cfi_offset 10, -12
 6638              		.cfi_offset 11, -8
 6639              		.cfi_offset 14, -4
 6640 0004 85B0     		sub	sp, sp, #20
 6641              	.LCFI70:
 6642              		.cfi_def_cfa_offset 56
 6643 0006 0446     		mov	r4, r0
 6644 0008 8846     		mov	r8, r1
 6645 000a 1646     		mov	r6, r2
 6646 000c 9946     		mov	r9, r3
 6647              	.LVL1015:
3614:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(&fp->obj, &fs);			/* Check validity of the file object */
 6648              		.loc 1 3614 0
 6649 000e 0023     		movs	r3, #0
 6650              	.LVL1016:
 6651 0010 C9F80030 		str	r3, [r9]
3615:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);	/* Check validity */
 6652              		.loc 1 3615 0
 6653 0014 0190     		str	r0, [sp, #4]
 6654 0016 03A9     		add	r1, sp, #12
 6655              	.LVL1017:
 6656 0018 FFF7FEFF 		bl	validate
 6657              	.LVL1018:
3616:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
 6658              		.loc 1 3616 0
 6659 001c 0090     		str	r0, [sp]
 6660 001e 60B9     		cbnz	r0, .L679
3616:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
 6661              		.loc 1 3616 0 is_stmt 0 discriminator 2
 6662 0020 637D     		ldrb	r3, [r4, #21]	@ zero_extendqisi2
 6663 0022 0093     		str	r3, [sp]
 6664              	.LVL1019:
 6665 0024 4BB9     		cbnz	r3, .L679
3617:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 238


 6666              		.loc 1 3617 0 is_stmt 1
 6667 0026 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
 6668              	.LVL1020:
 6669 0028 13F0020F 		tst	r3, #2
 6670 002c 0DD0     		beq	.L706
3620:Middlewares/Third_Party/FatFs/src/ff.c **** 		btw = (UINT)(0xFFFFFFFF - (DWORD)fp->fptr);
 6671              		.loc 1 3620 0
 6672 002e A369     		ldr	r3, [r4, #24]
 6673 0030 F342     		cmn	r3, r6
 6674 0032 C0F0BB80 		bcc	.L684
3621:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 6675              		.loc 1 3621 0
 6676 0036 DE43     		mvns	r6, r3
 6677              	.LVL1021:
 6678 0038 B8E0     		b	.L684
 6679              	.LVL1022:
 6680              	.L679:
3616:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
 6681              		.loc 1 3616 0 discriminator 3
 6682 003a 0099     		ldr	r1, [sp]
 6683 003c 0398     		ldr	r0, [sp, #12]
 6684 003e FFF7FEFF 		bl	unlock_fs
 6685              	.LVL1023:
 6686              	.L681:
3712:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6687              		.loc 1 3712 0
 6688 0042 0098     		ldr	r0, [sp]
 6689 0044 05B0     		add	sp, sp, #20
 6690              	.LCFI71:
 6691              		.cfi_remember_state
 6692              		.cfi_def_cfa_offset 36
 6693              		@ sp needed
 6694 0046 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 6695              	.LVL1024:
 6696              	.L706:
 6697              	.LCFI72:
 6698              		.cfi_restore_state
3617:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6699              		.loc 1 3617 0 discriminator 1
 6700 004a 0721     		movs	r1, #7
 6701 004c 0398     		ldr	r0, [sp, #12]
 6702 004e FFF7FEFF 		bl	unlock_fs
 6703              	.LVL1025:
 6704 0052 0723     		movs	r3, #7
 6705 0054 0093     		str	r3, [sp]
 6706              	.LVL1026:
 6707 0056 F4E7     		b	.L681
 6708              	.LVL1027:
 6709              	.L687:
3636:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = clmt_clust(fp, fp->fptr);	/* Get cluster# from the CLMT */
 6710              		.loc 1 3636 0
 6711 0058 E36A     		ldr	r3, [r4, #44]
 6712 005a A3B3     		cbz	r3, .L689
3637:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else
 6713              		.loc 1 3637 0
 6714 005c 2046     		mov	r0, r4
 6715 005e FFF7FEFF 		bl	clmt_clust
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 239


 6716              	.LVL1028:
 6717              	.L688:
3644:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 1) ABORT(fs, FR_INT_ERR);
 6718              		.loc 1 3644 0
 6719 0062 0028     		cmp	r0, #0
 6720 0064 00F0CC80 		beq	.L690
3645:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 6721              		.loc 1 3645 0
 6722 0068 0128     		cmp	r0, #1
 6723 006a 31D0     		beq	.L707
3646:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;			/* Update current cluster */
 6724              		.loc 1 3646 0
 6725 006c B0F1FF3F 		cmp	r0, #-1
 6726 0070 36D0     		beq	.L708
3647:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->obj.sclust == 0) fp->obj.sclust = clst;	/* Set start cluster if the first write */
 6727              		.loc 1 3647 0
 6728 0072 E061     		str	r0, [r4, #28]
3648:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6729              		.loc 1 3648 0
 6730 0074 A368     		ldr	r3, [r4, #8]
 6731 0076 03B9     		cbnz	r3, .L686
3648:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6732              		.loc 1 3648 0 is_stmt 0 discriminator 1
 6733 0078 A060     		str	r0, [r4, #8]
 6734              	.LVL1029:
 6735              	.L686:
3653:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
 6736              		.loc 1 3653 0 is_stmt 1
 6737 007a 94F91430 		ldrsb	r3, [r4, #20]
 6738 007e 002B     		cmp	r3, #0
 6739 0080 36DB     		blt	.L709
 6740              	.L693:
3658:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!sect) ABORT(fs, FR_INT_ERR);
 6741              		.loc 1 3658 0
 6742 0082 DDF80CB0 		ldr	fp, [sp, #12]
 6743 0086 E169     		ldr	r1, [r4, #28]
 6744 0088 5846     		mov	r0, fp
 6745 008a FFF7FEFF 		bl	clust2sect
 6746              	.LVL1030:
3659:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
 6747              		.loc 1 3659 0
 6748 008e 8246     		mov	r10, r0
 6749 0090 0028     		cmp	r0, #0
 6750 0092 43D0     		beq	.L710
3660:Middlewares/Third_Party/FatFs/src/ff.c **** 			cc = btw / SS(fs);				/* When remaining bytes >= sector size, */
 6751              		.loc 1 3660 0
 6752 0094 BA44     		add	r10, r10, r7
 6753              	.LVL1031:
3662:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (csect + cc > fs->csize) {	/* Clip at cluster boundary */
 6754              		.loc 1 3662 0
 6755 0096 750A     		lsrs	r5, r6, #9
 6756              	.LVL1032:
 6757 0098 5DD0     		beq	.L696
3663:Middlewares/Third_Party/FatFs/src/ff.c **** 					cc = fs->csize - csect;
 6758              		.loc 1 3663 0
 6759 009a 7B19     		adds	r3, r7, r5
 6760 009c BBF80A20 		ldrh	r2, [fp, #10]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 240


 6761 00a0 9342     		cmp	r3, r2
 6762 00a2 00D9     		bls	.L697
3664:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 6763              		.loc 1 3664 0
 6764 00a4 D51B     		subs	r5, r2, r7
 6765              	.LVL1033:
 6766              	.L697:
3666:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 2
 6767              		.loc 1 3666 0
 6768 00a6 2B46     		mov	r3, r5
 6769 00a8 5246     		mov	r2, r10
 6770 00aa 4146     		mov	r1, r8
 6771 00ac 9BF80100 		ldrb	r0, [fp, #1]	@ zero_extendqisi2
 6772 00b0 FFF7FEFF 		bl	disk_write
 6773              	.LVL1034:
 6774 00b4 0028     		cmp	r0, #0
 6775 00b6 39D1     		bne	.L711
3674:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(fp->buf, wbuff + ((fp->sect - sect) * SS(fs)), SS(fs));
 6776              		.loc 1 3674 0
 6777 00b8 216A     		ldr	r1, [r4, #32]
 6778 00ba A1EB0A01 		sub	r1, r1, r10
 6779 00be 8D42     		cmp	r5, r1
 6780 00c0 3CD8     		bhi	.L712
 6781              	.L699:
3680:Middlewares/Third_Party/FatFs/src/ff.c **** 				continue;
 6782              		.loc 1 3680 0
 6783 00c2 6D02     		lsls	r5, r5, #9
 6784              	.LVL1035:
3681:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6785              		.loc 1 3681 0
 6786 00c4 63E0     		b	.L700
 6787              	.LVL1036:
 6788              	.L689:
3641:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 6789              		.loc 1 3641 0
 6790 00c6 E169     		ldr	r1, [r4, #28]
 6791 00c8 0198     		ldr	r0, [sp, #4]
 6792 00ca FFF7FEFF 		bl	create_chain
 6793              	.LVL1037:
 6794 00ce C8E7     		b	.L688
 6795              	.L707:
3645:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 6796              		.loc 1 3645 0 discriminator 1
 6797 00d0 0225     		movs	r5, #2
 6798 00d2 6575     		strb	r5, [r4, #21]
 6799 00d4 2946     		mov	r1, r5
 6800 00d6 0398     		ldr	r0, [sp, #12]
 6801              	.LVL1038:
 6802 00d8 FFF7FEFF 		bl	unlock_fs
 6803              	.LVL1039:
 6804 00dc 0095     		str	r5, [sp]
 6805              	.LVL1040:
 6806 00de B0E7     		b	.L681
 6807              	.LVL1041:
 6808              	.L708:
3646:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;			/* Update current cluster */
 6809              		.loc 1 3646 0 discriminator 1
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 241


 6810 00e0 0125     		movs	r5, #1
 6811 00e2 6575     		strb	r5, [r4, #21]
 6812 00e4 2946     		mov	r1, r5
 6813 00e6 0398     		ldr	r0, [sp, #12]
 6814              	.LVL1042:
 6815 00e8 FFF7FEFF 		bl	unlock_fs
 6816              	.LVL1043:
 6817 00ec 0095     		str	r5, [sp]
 6818              	.LVL1044:
 6819 00ee A8E7     		b	.L681
 6820              	.LVL1045:
 6821              	.L709:
3654:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 6822              		.loc 1 3654 0
 6823 00f0 0123     		movs	r3, #1
 6824 00f2 226A     		ldr	r2, [r4, #32]
 6825 00f4 04F13001 		add	r1, r4, #48
 6826 00f8 0398     		ldr	r0, [sp, #12]
 6827 00fa 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 6828 00fc FFF7FEFF 		bl	disk_write
 6829              	.LVL1046:
 6830 0100 20B9     		cbnz	r0, .L713
3655:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6831              		.loc 1 3655 0
 6832 0102 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
 6833 0104 03F07F03 		and	r3, r3, #127
 6834 0108 2375     		strb	r3, [r4, #20]
 6835 010a BAE7     		b	.L693
 6836              	.L713:
3654:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 6837              		.loc 1 3654 0 discriminator 1
 6838 010c 0125     		movs	r5, #1
 6839 010e 6575     		strb	r5, [r4, #21]
 6840 0110 2946     		mov	r1, r5
 6841 0112 0398     		ldr	r0, [sp, #12]
 6842 0114 FFF7FEFF 		bl	unlock_fs
 6843              	.LVL1047:
 6844 0118 0095     		str	r5, [sp]
 6845              	.LVL1048:
 6846 011a 92E7     		b	.L681
 6847              	.LVL1049:
 6848              	.L710:
3659:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
 6849              		.loc 1 3659 0 discriminator 1
 6850 011c 0225     		movs	r5, #2
 6851 011e 6575     		strb	r5, [r4, #21]
 6852 0120 2946     		mov	r1, r5
 6853 0122 5846     		mov	r0, fp
 6854              	.LVL1050:
 6855 0124 FFF7FEFF 		bl	unlock_fs
 6856              	.LVL1051:
 6857 0128 0095     		str	r5, [sp]
 6858              	.LVL1052:
 6859 012a 8AE7     		b	.L681
 6860              	.LVL1053:
 6861              	.L711:
3666:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 2
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 242


 6862              		.loc 1 3666 0 discriminator 1
 6863 012c 0125     		movs	r5, #1
 6864              	.LVL1054:
 6865 012e 6575     		strb	r5, [r4, #21]
 6866 0130 2946     		mov	r1, r5
 6867 0132 0398     		ldr	r0, [sp, #12]
 6868 0134 FFF7FEFF 		bl	unlock_fs
 6869              	.LVL1055:
 6870 0138 0095     		str	r5, [sp]
 6871              	.LVL1056:
 6872 013a 82E7     		b	.L681
 6873              	.LVL1057:
 6874              	.L712:
3675:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
 6875              		.loc 1 3675 0
 6876 013c 4FF40072 		mov	r2, #512
 6877 0140 08EB4121 		add	r1, r8, r1, lsl #9
 6878 0144 04F13000 		add	r0, r4, #48
 6879 0148 FFF7FEFF 		bl	mem_cpy
 6880              	.LVL1058:
3676:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 6881              		.loc 1 3676 0
 6882 014c 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
 6883 014e 03F07F03 		and	r3, r3, #127
 6884 0152 2375     		strb	r3, [r4, #20]
 6885 0154 B5E7     		b	.L699
 6886              	.L696:
3689:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fptr < fp->obj.objsize &&
 6887              		.loc 1 3689 0
 6888 0156 236A     		ldr	r3, [r4, #32]
 6889 0158 9A45     		cmp	r10, r3
 6890 015a 03D0     		beq	.L701
3690:Middlewares/Third_Party/FatFs/src/ff.c **** 				disk_read(fs->drv, fp->buf, sect, 1) != RES_OK) {
 6891              		.loc 1 3690 0 discriminator 1
 6892 015c A269     		ldr	r2, [r4, #24]
 6893 015e E368     		ldr	r3, [r4, #12]
3689:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fptr < fp->obj.objsize &&
 6894              		.loc 1 3689 0 discriminator 1
 6895 0160 9A42     		cmp	r2, r3
 6896 0162 3BD3     		bcc	.L714
 6897              	.L701:
3695:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 6898              		.loc 1 3695 0
 6899 0164 C4F820A0 		str	r10, [r4, #32]
 6900              	.LVL1059:
 6901              	.L685:
3697:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (wcnt > btw) wcnt = btw;					/* Clip it by btw if needed */
 6902              		.loc 1 3697 0
 6903 0168 A369     		ldr	r3, [r4, #24]
 6904 016a C3F30803 		ubfx	r3, r3, #0, #9
 6905 016e C3F50075 		rsb	r5, r3, #512
 6906              	.LVL1060:
3698:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
 6907              		.loc 1 3698 0
 6908 0172 AE42     		cmp	r6, r5
 6909 0174 00D2     		bcs	.L702
 6910 0176 3546     		mov	r5, r6
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 243


 6911              	.LVL1061:
 6912              	.L702:
3704:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->flag |= FA_DIRTY;
 6913              		.loc 1 3704 0
 6914 0178 04F13000 		add	r0, r4, #48
 6915 017c 2A46     		mov	r2, r5
 6916 017e 4146     		mov	r1, r8
 6917 0180 1844     		add	r0, r0, r3
 6918 0182 FFF7FEFF 		bl	mem_cpy
 6919              	.LVL1062:
3705:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 6920              		.loc 1 3705 0
 6921 0186 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
 6922 0188 63F07F03 		orn	r3, r3, #127
 6923 018c 2375     		strb	r3, [r4, #20]
 6924              	.L700:
3625:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr % SS(fs) == 0) {		/* On the sector boundary? */
 6925              		.loc 1 3625 0
 6926 018e A844     		add	r8, r8, r5
 6927              	.LVL1063:
 6928 0190 A369     		ldr	r3, [r4, #24]
 6929 0192 2B44     		add	r3, r3, r5
 6930 0194 A361     		str	r3, [r4, #24]
 6931 0196 E268     		ldr	r2, [r4, #12]
 6932 0198 9342     		cmp	r3, r2
 6933 019a 38BF     		it	cc
 6934 019c 1346     		movcc	r3, r2
 6935 019e E360     		str	r3, [r4, #12]
 6936 01a0 D9F80030 		ldr	r3, [r9]
 6937 01a4 2B44     		add	r3, r3, r5
 6938 01a6 C9F80030 		str	r3, [r9]
 6939 01aa 761B     		subs	r6, r6, r5
 6940              	.LVL1064:
 6941              	.L684:
3624:Middlewares/Third_Party/FatFs/src/ff.c **** 		wbuff += wcnt, fp->fptr += wcnt, fp->obj.objsize = (fp->fptr > fp->obj.objsize) ? fp->fptr : fp->
 6942              		.loc 1 3624 0
 6943 01ac 46B3     		cbz	r6, .L690
3626:Middlewares/Third_Party/FatFs/src/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs)) & (fs->csize - 1);	/* Sector offset in the cluster */
 6944              		.loc 1 3626 0
 6945 01ae A169     		ldr	r1, [r4, #24]
 6946 01b0 C1F30803 		ubfx	r3, r1, #0, #9
 6947 01b4 002B     		cmp	r3, #0
 6948 01b6 D7D1     		bne	.L685
3627:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (csect == 0) {				/* On the cluster boundary? */
 6949              		.loc 1 3627 0
 6950 01b8 039B     		ldr	r3, [sp, #12]
 6951 01ba 5F89     		ldrh	r7, [r3, #10]
 6952 01bc 013F     		subs	r7, r7, #1
 6953              	.LVL1065:
3628:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr == 0) {		/* On the top of the file? */
 6954              		.loc 1 3628 0
 6955 01be 17EA5127 		ands	r7, r7, r1, lsr #9
 6956              	.LVL1066:
 6957 01c2 7FF45AAF 		bne	.L686
3629:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = fp->obj.sclust;	/* Follow from the origin */
 6958              		.loc 1 3629 0
 6959 01c6 0029     		cmp	r1, #0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 244


 6960 01c8 7FF446AF 		bne	.L687
3630:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0) {		/* If no cluster is allocated, */
 6961              		.loc 1 3630 0
 6962 01cc A068     		ldr	r0, [r4, #8]
 6963              	.LVL1067:
3631:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = create_chain(&fp->obj, 0);	/* create a new cluster chain */
 6964              		.loc 1 3631 0
 6965 01ce 0028     		cmp	r0, #0
 6966 01d0 7FF447AF 		bne	.L688
3632:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 6967              		.loc 1 3632 0
 6968 01d4 0198     		ldr	r0, [sp, #4]
 6969              	.LVL1068:
 6970 01d6 FFF7FEFF 		bl	create_chain
 6971              	.LVL1069:
 6972 01da 42E7     		b	.L688
 6973              	.LVL1070:
 6974              	.L714:
3691:Middlewares/Third_Party/FatFs/src/ff.c **** 					ABORT(fs, FR_DISK_ERR);
 6975              		.loc 1 3691 0
 6976 01dc 0123     		movs	r3, #1
 6977 01de 5246     		mov	r2, r10
 6978 01e0 04F13001 		add	r1, r4, #48
 6979 01e4 9BF80100 		ldrb	r0, [fp, #1]	@ zero_extendqisi2
 6980 01e8 FFF7FEFF 		bl	disk_read
 6981              	.LVL1071:
3690:Middlewares/Third_Party/FatFs/src/ff.c **** 				disk_read(fs->drv, fp->buf, sect, 1) != RES_OK) {
 6982              		.loc 1 3690 0
 6983 01ec 0028     		cmp	r0, #0
 6984 01ee B9D0     		beq	.L701
3692:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6985              		.loc 1 3692 0
 6986 01f0 0125     		movs	r5, #1
 6987              	.LVL1072:
 6988 01f2 6575     		strb	r5, [r4, #21]
 6989 01f4 2946     		mov	r1, r5
 6990 01f6 0398     		ldr	r0, [sp, #12]
 6991 01f8 FFF7FEFF 		bl	unlock_fs
 6992              	.LVL1073:
 6993 01fc 0095     		str	r5, [sp]
 6994              	.LVL1074:
 6995 01fe 20E7     		b	.L681
 6996              	.LVL1075:
 6997              	.L690:
3709:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6998              		.loc 1 3709 0
 6999 0200 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
 7000 0202 43F04003 		orr	r3, r3, #64
 7001 0206 2375     		strb	r3, [r4, #20]
3711:Middlewares/Third_Party/FatFs/src/ff.c **** }
 7002              		.loc 1 3711 0
 7003 0208 0021     		movs	r1, #0
 7004 020a 0398     		ldr	r0, [sp, #12]
 7005 020c FFF7FEFF 		bl	unlock_fs
 7006              	.LVL1076:
 7007 0210 17E7     		b	.L681
 7008              		.cfi_endproc
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 245


 7009              	.LFE189:
 7011              		.section	.text.putc_bfd,"ax",%progbits
 7012              		.align	1
 7013              		.syntax unified
 7014              		.thumb
 7015              		.thumb_func
 7016              		.fpu fpv5-sp-d16
 7018              	putc_bfd:
 7019              	.LFB206:
5910:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT bw;
 7020              		.loc 1 5910 0
 7021              		.cfi_startproc
 7022              		@ args = 0, pretend = 0, frame = 8
 7023              		@ frame_needed = 0, uses_anonymous_args = 0
 7024              	.LVL1077:
 7025 0000 70B5     		push	{r4, r5, r6, lr}
 7026              	.LCFI73:
 7027              		.cfi_def_cfa_offset 16
 7028              		.cfi_offset 4, -16
 7029              		.cfi_offset 5, -12
 7030              		.cfi_offset 6, -8
 7031              		.cfi_offset 14, -4
 7032 0002 82B0     		sub	sp, sp, #8
 7033              	.LCFI74:
 7034              		.cfi_def_cfa_offset 24
 7035 0004 0446     		mov	r4, r0
 7036 0006 0E46     		mov	r6, r1
5915:Middlewares/Third_Party/FatFs/src/ff.c **** 		putc_bfd(pb, '\r');
 7037              		.loc 1 5915 0
 7038 0008 0A29     		cmp	r1, #10
 7039 000a 0DD0     		beq	.L722
 7040              	.LVL1078:
 7041              	.L716:
5919:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (i < 0) return;
 7042              		.loc 1 5919 0
 7043 000c 6368     		ldr	r3, [r4, #4]
 7044              	.LVL1079:
5920:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7045              		.loc 1 5920 0
 7046 000e 002B     		cmp	r3, #0
 7047 0010 08DB     		blt	.L715
5949:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7048              		.loc 1 5949 0
 7049 0012 5D1C     		adds	r5, r3, #1
 7050              	.LVL1080:
 7051 0014 2344     		add	r3, r3, r4
 7052 0016 1E73     		strb	r6, [r3, #12]
5952:Middlewares/Third_Party/FatFs/src/ff.c **** 		f_write(pb->fp, pb->buf, (UINT)i, &bw);
 7053              		.loc 1 5952 0
 7054 0018 3C2D     		cmp	r5, #60
 7055 001a 09DC     		bgt	.L723
 7056              	.LVL1081:
 7057              	.L718:
5956:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->nchr++;
 7058              		.loc 1 5956 0
 7059 001c 6560     		str	r5, [r4, #4]
5957:Middlewares/Third_Party/FatFs/src/ff.c **** }
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 246


 7060              		.loc 1 5957 0
 7061 001e A368     		ldr	r3, [r4, #8]
 7062 0020 0133     		adds	r3, r3, #1
 7063 0022 A360     		str	r3, [r4, #8]
 7064              	.LVL1082:
 7065              	.L715:
5958:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7066              		.loc 1 5958 0
 7067 0024 02B0     		add	sp, sp, #8
 7068              	.LCFI75:
 7069              		.cfi_remember_state
 7070              		.cfi_def_cfa_offset 16
 7071              		@ sp needed
 7072 0026 70BD     		pop	{r4, r5, r6, pc}
 7073              	.LVL1083:
 7074              	.L722:
 7075              	.LCFI76:
 7076              		.cfi_restore_state
5916:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 7077              		.loc 1 5916 0
 7078 0028 0D21     		movs	r1, #13
 7079              	.LVL1084:
 7080 002a FFF7E9FF 		bl	putc_bfd
 7081              	.LVL1085:
 7082 002e EDE7     		b	.L716
 7083              	.LVL1086:
 7084              	.L723:
5953:Middlewares/Third_Party/FatFs/src/ff.c **** 		i = (bw == (UINT)i) ? 0 : -1;
 7085              		.loc 1 5953 0
 7086 0030 01AB     		add	r3, sp, #4
 7087 0032 2A46     		mov	r2, r5
 7088 0034 04F10C01 		add	r1, r4, #12
 7089 0038 2068     		ldr	r0, [r4]
 7090 003a FFF7FEFF 		bl	f_write
 7091              	.LVL1087:
5954:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 7092              		.loc 1 5954 0
 7093 003e 019B     		ldr	r3, [sp, #4]
 7094 0040 9D42     		cmp	r5, r3
 7095 0042 02D0     		beq	.L724
 7096 0044 4FF0FF35 		mov	r5, #-1
 7097              	.LVL1088:
 7098 0048 E8E7     		b	.L718
 7099              	.LVL1089:
 7100              	.L724:
 7101 004a 0025     		movs	r5, #0
 7102              	.LVL1090:
 7103 004c E6E7     		b	.L718
 7104              		.cfi_endproc
 7105              	.LFE206:
 7107              		.section	.text.putc_flush,"ax",%progbits
 7108              		.align	1
 7109              		.syntax unified
 7110              		.thumb
 7111              		.thumb_func
 7112              		.fpu fpv5-sp-d16
 7114              	putc_flush:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 247


 7115              	.LFB207:
5965:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT nw;
 7116              		.loc 1 5965 0
 7117              		.cfi_startproc
 7118              		@ args = 0, pretend = 0, frame = 8
 7119              		@ frame_needed = 0, uses_anonymous_args = 0
 7120              	.LVL1091:
5968:Middlewares/Third_Party/FatFs/src/ff.c **** 		&& f_write(pb->fp, pb->buf, (UINT)pb->idx, &nw) == FR_OK
 7121              		.loc 1 5968 0
 7122 0000 4268     		ldr	r2, [r0, #4]
 7123 0002 002A     		cmp	r2, #0
 7124 0004 10DB     		blt	.L727
5965:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT nw;
 7125              		.loc 1 5965 0
 7126 0006 10B5     		push	{r4, lr}
 7127              	.LCFI77:
 7128              		.cfi_def_cfa_offset 8
 7129              		.cfi_offset 4, -8
 7130              		.cfi_offset 14, -4
 7131 0008 82B0     		sub	sp, sp, #8
 7132              	.LCFI78:
 7133              		.cfi_def_cfa_offset 16
 7134 000a 0446     		mov	r4, r0
5969:Middlewares/Third_Party/FatFs/src/ff.c **** 		&& (UINT)pb->idx == nw) return pb->nchr;
 7135              		.loc 1 5969 0
 7136 000c 01AB     		add	r3, sp, #4
 7137 000e 00F10C01 		add	r1, r0, #12
 7138 0012 0068     		ldr	r0, [r0]
 7139              	.LVL1092:
 7140 0014 FFF7FEFF 		bl	f_write
 7141              	.LVL1093:
 7142 0018 48B9     		cbnz	r0, .L728
5970:Middlewares/Third_Party/FatFs/src/ff.c **** 	return EOF;
 7143              		.loc 1 5970 0
 7144 001a 6268     		ldr	r2, [r4, #4]
 7145 001c 019B     		ldr	r3, [sp, #4]
 7146 001e 9A42     		cmp	r2, r3
 7147 0020 08D1     		bne	.L729
5970:Middlewares/Third_Party/FatFs/src/ff.c **** 	return EOF;
 7148              		.loc 1 5970 0 is_stmt 0 discriminator 1
 7149 0022 A068     		ldr	r0, [r4, #8]
 7150              	.L725:
5972:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7151              		.loc 1 5972 0 is_stmt 1
 7152 0024 02B0     		add	sp, sp, #8
 7153              	.LCFI79:
 7154              		.cfi_def_cfa_offset 8
 7155              		@ sp needed
 7156 0026 10BD     		pop	{r4, pc}
 7157              	.LVL1094:
 7158              	.L727:
 7159              	.LCFI80:
 7160              		.cfi_def_cfa_offset 0
 7161              		.cfi_restore 4
 7162              		.cfi_restore 14
5971:Middlewares/Third_Party/FatFs/src/ff.c **** }
 7163              		.loc 1 5971 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 248


 7164 0028 4FF0FF30 		mov	r0, #-1
 7165              	.LVL1095:
 7166 002c 7047     		bx	lr
 7167              	.LVL1096:
 7168              	.L728:
 7169              	.LCFI81:
 7170              		.cfi_def_cfa_offset 16
 7171              		.cfi_offset 4, -8
 7172              		.cfi_offset 14, -4
 7173 002e 4FF0FF30 		mov	r0, #-1
 7174 0032 F7E7     		b	.L725
 7175              	.L729:
 7176 0034 4FF0FF30 		mov	r0, #-1
 7177 0038 F4E7     		b	.L725
 7178              		.cfi_endproc
 7179              	.LFE207:
 7181              		.section	.text.f_sync,"ax",%progbits
 7182              		.align	1
 7183              		.global	f_sync
 7184              		.syntax unified
 7185              		.thumb
 7186              		.thumb_func
 7187              		.fpu fpv5-sp-d16
 7189              	f_sync:
 7190              	.LFB190:
3724:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 7191              		.loc 1 3724 0
 7192              		.cfi_startproc
 7193              		@ args = 0, pretend = 0, frame = 8
 7194              		@ frame_needed = 0, uses_anonymous_args = 0
 7195              	.LVL1097:
 7196 0000 70B5     		push	{r4, r5, r6, lr}
 7197              	.LCFI82:
 7198              		.cfi_def_cfa_offset 16
 7199              		.cfi_offset 4, -16
 7200              		.cfi_offset 5, -12
 7201              		.cfi_offset 6, -8
 7202              		.cfi_offset 14, -4
 7203 0002 82B0     		sub	sp, sp, #8
 7204              	.LCFI83:
 7205              		.cfi_def_cfa_offset 24
 7206 0004 0546     		mov	r5, r0
3734:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 7207              		.loc 1 3734 0
 7208 0006 01A9     		add	r1, sp, #4
 7209 0008 FFF7FEFF 		bl	validate
 7210              	.LVL1098:
3735:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->flag & FA_MODIFIED) {	/* Is there any change to the file? */
 7211              		.loc 1 3735 0
 7212 000c 0446     		mov	r4, r0
 7213 000e 78B9     		cbnz	r0, .L735
3736:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 7214              		.loc 1 3736 0
 7215 0010 2B7D     		ldrb	r3, [r5, #20]	@ zero_extendqisi2
 7216 0012 13F0400F 		tst	r3, #64
 7217 0016 0BD0     		beq	.L735
3738:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) LEAVE_FF(fs, FR_DISK_ERR);
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 249


 7218              		.loc 1 3738 0
 7219 0018 13F0800F 		tst	r3, #128
 7220 001c 0FD1     		bne	.L740
 7221              	.LVL1099:
 7222              	.L736:
3744:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 7223              		.loc 1 3744 0
 7224 001e FFF7FEFF 		bl	get_fattime
 7225              	.LVL1100:
 7226 0022 0646     		mov	r6, r0
 7227              	.LVL1101:
3774:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) {
 7228              		.loc 1 3774 0
 7229 0024 696A     		ldr	r1, [r5, #36]
 7230 0026 0198     		ldr	r0, [sp, #4]
 7231              	.LVL1102:
 7232 0028 FFF7FEFF 		bl	move_window
 7233              	.LVL1103:
3775:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir = fp->dir_ptr;
 7234              		.loc 1 3775 0
 7235 002c 0446     		mov	r4, r0
 7236 002e D0B1     		cbz	r0, .L741
 7237              	.LVL1104:
 7238              	.L735:
3790:Middlewares/Third_Party/FatFs/src/ff.c **** }
 7239              		.loc 1 3790 0
 7240 0030 2146     		mov	r1, r4
 7241 0032 0198     		ldr	r0, [sp, #4]
 7242 0034 FFF7FEFF 		bl	unlock_fs
 7243              	.LVL1105:
 7244              	.L738:
3791:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7245              		.loc 1 3791 0
 7246 0038 2046     		mov	r0, r4
 7247 003a 02B0     		add	sp, sp, #8
 7248              	.LCFI84:
 7249              		.cfi_remember_state
 7250              		.cfi_def_cfa_offset 16
 7251              		@ sp needed
 7252 003c 70BD     		pop	{r4, r5, r6, pc}
 7253              	.LVL1106:
 7254              	.L740:
 7255              	.LCFI85:
 7256              		.cfi_restore_state
3739:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 7257              		.loc 1 3739 0
 7258 003e 0123     		movs	r3, #1
 7259 0040 2A6A     		ldr	r2, [r5, #32]
 7260 0042 05F13001 		add	r1, r5, #48
 7261 0046 0198     		ldr	r0, [sp, #4]
 7262              	.LVL1107:
 7263 0048 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 7264 004a FFF7FEFF 		bl	disk_write
 7265              	.LVL1108:
 7266 004e 20B9     		cbnz	r0, .L742
3740:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 7267              		.loc 1 3740 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 250


 7268 0050 2B7D     		ldrb	r3, [r5, #20]	@ zero_extendqisi2
 7269 0052 03F07F03 		and	r3, r3, #127
 7270 0056 2B75     		strb	r3, [r5, #20]
 7271 0058 E1E7     		b	.L736
 7272              	.L742:
3739:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 7273              		.loc 1 3739 0 discriminator 1
 7274 005a 0121     		movs	r1, #1
 7275 005c 0198     		ldr	r0, [sp, #4]
 7276 005e FFF7FEFF 		bl	unlock_fs
 7277              	.LVL1109:
 7278 0062 0124     		movs	r4, #1
 7279 0064 E8E7     		b	.L738
 7280              	.LVL1110:
 7281              	.L741:
3776:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir[DIR_Attr] |= AM_ARC;						/* Set archive bit */
 7282              		.loc 1 3776 0
 7283 0066 AC6A     		ldr	r4, [r5, #40]
 7284              	.LVL1111:
3777:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fp->obj.fs, dir, fp->obj.sclust);		/* Update file allocation info  */
 7285              		.loc 1 3777 0
 7286 0068 E37A     		ldrb	r3, [r4, #11]	@ zero_extendqisi2
 7287 006a 43F02003 		orr	r3, r3, #32
 7288 006e E372     		strb	r3, [r4, #11]
3778:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dir + DIR_FileSize, (DWORD)fp->obj.objsize);	/* Update file size */
 7289              		.loc 1 3778 0
 7290 0070 AA68     		ldr	r2, [r5, #8]
 7291 0072 2146     		mov	r1, r4
 7292 0074 2868     		ldr	r0, [r5]
 7293              	.LVL1112:
 7294 0076 FFF7FEFF 		bl	st_clust
 7295              	.LVL1113:
3779:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dir + DIR_ModTime, tm);				/* Update modified time */
 7296              		.loc 1 3779 0
 7297 007a E968     		ldr	r1, [r5, #12]
 7298 007c 04F11C00 		add	r0, r4, #28
 7299 0080 FFF7FEFF 		bl	st_dword
 7300              	.LVL1114:
3780:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_word(dir + DIR_LstAccDate, 0);
 7301              		.loc 1 3780 0
 7302 0084 3146     		mov	r1, r6
 7303 0086 04F11600 		add	r0, r4, #22
 7304 008a FFF7FEFF 		bl	st_dword
 7305              	.LVL1115:
3781:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->wflag = 1;
 7306              		.loc 1 3781 0
 7307 008e 0021     		movs	r1, #0
 7308 0090 04F11200 		add	r0, r4, #18
 7309 0094 FFF7FEFF 		bl	st_word
 7310              	.LVL1116:
3782:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = sync_fs(fs);					/* Restore it to the directory */
 7311              		.loc 1 3782 0
 7312 0098 0122     		movs	r2, #1
 7313 009a 019B     		ldr	r3, [sp, #4]
 7314 009c DA70     		strb	r2, [r3, #3]
3783:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->flag &= (BYTE)~FA_MODIFIED;
 7315              		.loc 1 3783 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 251


 7316 009e 0198     		ldr	r0, [sp, #4]
 7317 00a0 FFF7FEFF 		bl	sync_fs
 7318              	.LVL1117:
 7319 00a4 0446     		mov	r4, r0
 7320              	.LVL1118:
3784:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 7321              		.loc 1 3784 0
 7322 00a6 2B7D     		ldrb	r3, [r5, #20]	@ zero_extendqisi2
 7323 00a8 23F04003 		bic	r3, r3, #64
 7324 00ac 2B75     		strb	r3, [r5, #20]
 7325 00ae BFE7     		b	.L735
 7326              		.cfi_endproc
 7327              	.LFE190:
 7329              		.section	.text.f_close,"ax",%progbits
 7330              		.align	1
 7331              		.global	f_close
 7332              		.syntax unified
 7333              		.thumb
 7334              		.thumb_func
 7335              		.fpu fpv5-sp-d16
 7337              	f_close:
 7338              	.LFB191:
3805:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 7339              		.loc 1 3805 0
 7340              		.cfi_startproc
 7341              		@ args = 0, pretend = 0, frame = 8
 7342              		@ frame_needed = 0, uses_anonymous_args = 0
 7343              	.LVL1119:
 7344 0000 30B5     		push	{r4, r5, lr}
 7345              	.LCFI86:
 7346              		.cfi_def_cfa_offset 12
 7347              		.cfi_offset 4, -12
 7348              		.cfi_offset 5, -8
 7349              		.cfi_offset 14, -4
 7350 0002 83B0     		sub	sp, sp, #12
 7351              	.LCFI87:
 7352              		.cfi_def_cfa_offset 24
 7353 0004 0546     		mov	r5, r0
3810:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK)
 7354              		.loc 1 3810 0
 7355 0006 FFF7FEFF 		bl	f_sync
 7356              	.LVL1120:
3811:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7357              		.loc 1 3811 0
 7358 000a 0446     		mov	r4, r0
 7359 000c 10B1     		cbz	r0, .L747
 7360              	.LVL1121:
 7361              	.L744:
3829:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7362              		.loc 1 3829 0
 7363 000e 2046     		mov	r0, r4
 7364 0010 03B0     		add	sp, sp, #12
 7365              	.LCFI88:
 7366              		.cfi_remember_state
 7367              		.cfi_def_cfa_offset 12
 7368              		@ sp needed
 7369 0012 30BD     		pop	{r4, r5, pc}
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 252


 7370              	.LVL1122:
 7371              	.L747:
 7372              	.LCFI89:
 7373              		.cfi_restore_state
3814:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
 7374              		.loc 1 3814 0
 7375 0014 01A9     		add	r1, sp, #4
 7376 0016 2846     		mov	r0, r5
 7377              	.LVL1123:
 7378 0018 FFF7FEFF 		bl	validate
 7379              	.LVL1124:
3815:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 7380              		.loc 1 3815 0
 7381 001c 0446     		mov	r4, r0
 7382 001e 0028     		cmp	r0, #0
 7383 0020 F5D1     		bne	.L744
3817:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK)
 7384              		.loc 1 3817 0
 7385 0022 2869     		ldr	r0, [r5, #16]
 7386              	.LVL1125:
 7387 0024 FFF7FEFF 		bl	dec_lock
 7388              	.LVL1126:
3818:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7389              		.loc 1 3818 0
 7390 0028 0446     		mov	r4, r0
 7391 002a 08B9     		cbnz	r0, .L745
3821:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 7392              		.loc 1 3821 0
 7393 002c 0023     		movs	r3, #0
 7394 002e 2B60     		str	r3, [r5]
 7395              	.L745:
3824:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7396              		.loc 1 3824 0
 7397 0030 0021     		movs	r1, #0
 7398 0032 0198     		ldr	r0, [sp, #4]
 7399              	.LVL1127:
 7400 0034 FFF7FEFF 		bl	unlock_fs
 7401              	.LVL1128:
 7402 0038 E9E7     		b	.L744
 7403              		.cfi_endproc
 7404              	.LFE191:
 7406              		.section	.text.f_chdrive,"ax",%progbits
 7407              		.align	1
 7408              		.global	f_chdrive
 7409              		.syntax unified
 7410              		.thumb
 7411              		.thumb_func
 7412              		.fpu fpv5-sp-d16
 7414              	f_chdrive:
 7415              	.LFB192:
3843:Middlewares/Third_Party/FatFs/src/ff.c **** 	int vol;
 7416              		.loc 1 3843 0
 7417              		.cfi_startproc
 7418              		@ args = 0, pretend = 0, frame = 8
 7419              		@ frame_needed = 0, uses_anonymous_args = 0
 7420              	.LVL1129:
 7421 0000 00B5     		push	{lr}
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 253


 7422              	.LCFI90:
 7423              		.cfi_def_cfa_offset 4
 7424              		.cfi_offset 14, -4
 7425 0002 83B0     		sub	sp, sp, #12
 7426              	.LCFI91:
 7427              		.cfi_def_cfa_offset 16
 7428 0004 02AB     		add	r3, sp, #8
 7429 0006 43F8040D 		str	r0, [r3, #-4]!
3848:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
 7430              		.loc 1 3848 0
 7431 000a 1846     		mov	r0, r3
 7432              	.LVL1130:
 7433 000c FFF7FEFF 		bl	get_ldnumber
 7434              	.LVL1131:
3849:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7435              		.loc 1 3849 0
 7436 0010 0028     		cmp	r0, #0
 7437 0012 05DB     		blt	.L750
3851:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7438              		.loc 1 3851 0
 7439 0014 034B     		ldr	r3, .L752
 7440 0016 1870     		strb	r0, [r3]
3853:Middlewares/Third_Party/FatFs/src/ff.c **** }
 7441              		.loc 1 3853 0
 7442 0018 0020     		movs	r0, #0
 7443              	.LVL1132:
 7444              	.L749:
3854:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7445              		.loc 1 3854 0
 7446 001a 03B0     		add	sp, sp, #12
 7447              	.LCFI92:
 7448              		.cfi_remember_state
 7449              		.cfi_def_cfa_offset 4
 7450              		@ sp needed
 7451 001c 5DF804FB 		ldr	pc, [sp], #4
 7452              	.LVL1133:
 7453              	.L750:
 7454              	.LCFI93:
 7455              		.cfi_restore_state
3849:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7456              		.loc 1 3849 0
 7457 0020 0B20     		movs	r0, #11
 7458              	.LVL1134:
 7459 0022 FAE7     		b	.L749
 7460              	.L753:
 7461              		.align	2
 7462              	.L752:
 7463 0024 00000000 		.word	.LANCHOR2
 7464              		.cfi_endproc
 7465              	.LFE192:
 7467              		.section	.text.f_chdir,"ax",%progbits
 7468              		.align	1
 7469              		.global	f_chdir
 7470              		.syntax unified
 7471              		.thumb
 7472              		.thumb_func
 7473              		.fpu fpv5-sp-d16
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 254


 7475              	f_chdir:
 7476              	.LFB193:
3861:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 7477              		.loc 1 3861 0
 7478              		.cfi_startproc
 7479              		@ args = 0, pretend = 0, frame = 64
 7480              		@ frame_needed = 0, uses_anonymous_args = 0
 7481              	.LVL1135:
 7482 0000 70B5     		push	{r4, r5, r6, lr}
 7483              	.LCFI94:
 7484              		.cfi_def_cfa_offset 16
 7485              		.cfi_offset 4, -16
 7486              		.cfi_offset 5, -12
 7487              		.cfi_offset 6, -8
 7488              		.cfi_offset 14, -4
 7489 0002 90B0     		sub	sp, sp, #64
 7490              	.LCFI95:
 7491              		.cfi_def_cfa_offset 80
 7492 0004 0190     		str	r0, [sp, #4]
3868:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 7493              		.loc 1 3868 0
 7494 0006 0022     		movs	r2, #0
 7495 0008 02A9     		add	r1, sp, #8
 7496 000a 01A8     		add	r0, sp, #4
 7497              	.LVL1136:
 7498 000c FFF7FEFF 		bl	find_volume
 7499              	.LVL1137:
3869:Middlewares/Third_Party/FatFs/src/ff.c **** 		dj.obj.fs = fs;
 7500              		.loc 1 3869 0
 7501 0010 0446     		mov	r4, r0
 7502 0012 18BB     		cbnz	r0, .L755
3870:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
 7503              		.loc 1 3870 0
 7504 0014 029B     		ldr	r3, [sp, #8]
 7505 0016 0393     		str	r3, [sp, #12]
3871:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);		/* Follow the path */
 7506              		.loc 1 3871 0
 7507 0018 4FF40070 		mov	r0, #512
 7508              	.LVL1138:
 7509 001c FFF7FEFF 		bl	ff_memalloc
 7510              	.LVL1139:
 7511 0020 0546     		mov	r5, r0
 7512 0022 10B3     		cbz	r0, .L763
3871:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);		/* Follow the path */
 7513              		.loc 1 3871 0 is_stmt 0 discriminator 2
 7514 0024 029B     		ldr	r3, [sp, #8]
 7515 0026 D860     		str	r0, [r3, #12]
3872:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {					/* Follow completed */
 7516              		.loc 1 3872 0 is_stmt 1 discriminator 2
 7517 0028 0199     		ldr	r1, [sp, #4]
 7518 002a 03A8     		add	r0, sp, #12
 7519              	.LVL1140:
 7520 002c FFF7FEFF 		bl	follow_path
 7521              	.LVL1141:
3873:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {
 7522              		.loc 1 3873 0 discriminator 2
 7523 0030 0446     		mov	r4, r0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 255


 7524 0032 70B9     		cbnz	r0, .L758
3874:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->cdir = dj.obj.sclust;	/* It is the start directory itself */
 7525              		.loc 1 3874 0
 7526 0034 9DF93B30 		ldrsb	r3, [sp, #59]
 7527 0038 002B     		cmp	r3, #0
 7528 003a 1CDB     		blt	.L764
3884:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 7529              		.loc 1 3884 0
 7530 003c 9DF81230 		ldrb	r3, [sp, #18]	@ zero_extendqisi2
 7531 0040 13F0100F 		tst	r3, #16
 7532 0044 1BD0     		beq	.L760
3894:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 7533              		.loc 1 3894 0
 7534 0046 029E     		ldr	r6, [sp, #8]
 7535 0048 0B99     		ldr	r1, [sp, #44]
 7536 004a 3046     		mov	r0, r6
 7537              	.LVL1142:
 7538 004c FFF7FEFF 		bl	ld_clust
 7539              	.LVL1143:
 7540 0050 F061     		str	r0, [r6, #28]
 7541              	.L758:
 7542              	.LVL1144:
3901:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_NO_FILE) res = FR_NO_PATH;
 7543              		.loc 1 3901 0
 7544 0052 2846     		mov	r0, r5
 7545 0054 FFF7FEFF 		bl	ff_memfree
 7546              	.LVL1145:
3902:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 7547              		.loc 1 3902 0
 7548 0058 042C     		cmp	r4, #4
 7549 005a 12D0     		beq	.L765
 7550              	.LVL1146:
 7551              	.L755:
3905:Middlewares/Third_Party/FatFs/src/ff.c **** }
 7552              		.loc 1 3905 0
 7553 005c 2146     		mov	r1, r4
 7554 005e 0298     		ldr	r0, [sp, #8]
 7555 0060 FFF7FEFF 		bl	unlock_fs
 7556              	.LVL1147:
 7557              	.L757:
3906:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7558              		.loc 1 3906 0
 7559 0064 2046     		mov	r0, r4
 7560 0066 10B0     		add	sp, sp, #64
 7561              	.LCFI96:
 7562              		.cfi_remember_state
 7563              		.cfi_def_cfa_offset 16
 7564              		@ sp needed
 7565 0068 70BD     		pop	{r4, r5, r6, pc}
 7566              	.LVL1148:
 7567              	.L763:
 7568              	.LCFI97:
 7569              		.cfi_restore_state
3871:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);		/* Follow the path */
 7570              		.loc 1 3871 0 discriminator 1
 7571 006a 1121     		movs	r1, #17
 7572 006c 0298     		ldr	r0, [sp, #8]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 256


 7573              	.LVL1149:
 7574 006e FFF7FEFF 		bl	unlock_fs
 7575              	.LVL1150:
 7576 0072 1124     		movs	r4, #17
 7577 0074 F6E7     		b	.L757
 7578              	.LVL1151:
 7579              	.L764:
3875:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 7580              		.loc 1 3875 0
 7581 0076 059A     		ldr	r2, [sp, #20]
 7582 0078 029B     		ldr	r3, [sp, #8]
 7583 007a DA61     		str	r2, [r3, #28]
 7584 007c E9E7     		b	.L758
 7585              	.L760:
3897:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 7586              		.loc 1 3897 0
 7587 007e 0524     		movs	r4, #5
 7588 0080 E7E7     		b	.L758
 7589              	.LVL1152:
 7590              	.L765:
3902:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 7591              		.loc 1 3902 0
 7592 0082 0524     		movs	r4, #5
 7593              	.LVL1153:
 7594 0084 EAE7     		b	.L755
 7595              		.cfi_endproc
 7596              	.LFE193:
 7598              		.section	.text.f_lseek,"ax",%progbits
 7599              		.align	1
 7600              		.global	f_lseek
 7601              		.syntax unified
 7602              		.thumb
 7603              		.thumb_func
 7604              		.fpu fpv5-sp-d16
 7606              	f_lseek:
 7607              	.LFB194:
3994:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 7608              		.loc 1 3994 0
 7609              		.cfi_startproc
 7610              		@ args = 0, pretend = 0, frame = 16
 7611              		@ frame_needed = 0, uses_anonymous_args = 0
 7612              	.LVL1154:
 7613 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 7614              	.LCFI98:
 7615              		.cfi_def_cfa_offset 36
 7616              		.cfi_offset 4, -36
 7617              		.cfi_offset 5, -32
 7618              		.cfi_offset 6, -28
 7619              		.cfi_offset 7, -24
 7620              		.cfi_offset 8, -20
 7621              		.cfi_offset 9, -16
 7622              		.cfi_offset 10, -12
 7623              		.cfi_offset 11, -8
 7624              		.cfi_offset 14, -4
 7625 0004 85B0     		sub	sp, sp, #20
 7626              	.LCFI99:
 7627              		.cfi_def_cfa_offset 56
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 257


 7628 0006 0446     		mov	r4, r0
 7629 0008 0E46     		mov	r6, r1
4003:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) res = (FRESULT)fp->err;
 7630              		.loc 1 4003 0
 7631 000a 8046     		mov	r8, r0
 7632 000c 03A9     		add	r1, sp, #12
 7633              	.LVL1155:
 7634 000e FFF7FEFF 		bl	validate
 7635              	.LVL1156:
4004:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT && !_FS_READONLY
 7636              		.loc 1 4004 0
 7637 0012 0546     		mov	r5, r0
 7638 0014 00B9     		cbnz	r0, .L767
4004:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT && !_FS_READONLY
 7639              		.loc 1 4004 0 is_stmt 0 discriminator 1
 7640 0016 657D     		ldrb	r5, [r4, #21]	@ zero_extendqisi2
 7641              	.LVL1157:
 7642              	.L767:
4010:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7643              		.loc 1 4010 0 is_stmt 1
 7644 0018 ADB9     		cbnz	r5, .L812
4013:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs == CREATE_LINKMAP) {	/* Create CLMT */
 7645              		.loc 1 4013 0
 7646 001a E36A     		ldr	r3, [r4, #44]
 7647 001c 002B     		cmp	r3, #0
 7648 001e 00F0A880 		beq	.L770
4014:Middlewares/Third_Party/FatFs/src/ff.c **** 			tbl = fp->cltbl;
 7649              		.loc 1 4014 0
 7650 0022 B6F1FF3F 		cmp	r6, #-1
 7651 0026 13D0     		beq	.L813
4040:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->fptr = ofs;				/* Set file pointer */
 7652              		.loc 1 4040 0
 7653 0028 E768     		ldr	r7, [r4, #12]
 7654 002a BE42     		cmp	r6, r7
 7655 002c 00D8     		bhi	.L779
 7656 002e 3746     		mov	r7, r6
 7657              	.L779:
 7658              	.LVL1158:
4041:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ofs) {
 7659              		.loc 1 4041 0
 7660 0030 A761     		str	r7, [r4, #24]
4042:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clmt_clust(fp, ofs - 1);
 7661              		.loc 1 4042 0
 7662 0032 002F     		cmp	r7, #0
 7663 0034 52D1     		bne	.L814
 7664              	.LVL1159:
 7665              	.L778:
4141:Middlewares/Third_Party/FatFs/src/ff.c **** }
 7666              		.loc 1 4141 0
 7667 0036 2946     		mov	r1, r5
 7668 0038 0398     		ldr	r0, [sp, #12]
 7669 003a FFF7FEFF 		bl	unlock_fs
 7670              	.LVL1160:
 7671              	.L769:
4142:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7672              		.loc 1 4142 0
 7673 003e 2846     		mov	r0, r5
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 258


 7674 0040 05B0     		add	sp, sp, #20
 7675              	.LCFI100:
 7676              		.cfi_remember_state
 7677              		.cfi_def_cfa_offset 36
 7678              		@ sp needed
 7679 0042 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 7680              	.LVL1161:
 7681              	.L812:
 7682              	.LCFI101:
 7683              		.cfi_restore_state
4010:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7684              		.loc 1 4010 0 discriminator 1
 7685 0046 2946     		mov	r1, r5
 7686 0048 0398     		ldr	r0, [sp, #12]
 7687 004a FFF7FEFF 		bl	unlock_fs
 7688              	.LVL1162:
 7689 004e F6E7     		b	.L769
 7690              	.L813:
 7691              	.LVL1163:
4016:Middlewares/Third_Party/FatFs/src/ff.c **** 			cl = fp->obj.sclust;		/* Origin of the chain */
 7692              		.loc 1 4016 0
 7693 0050 1A1D     		adds	r2, r3, #4
 7694 0052 0192     		str	r2, [sp, #4]
 7695              	.LVL1164:
 7696 0054 D3F800B0 		ldr	fp, [r3]
 7697              	.LVL1165:
4017:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cl) {
 7698              		.loc 1 4017 0
 7699 0058 D4F808A0 		ldr	r10, [r4, #8]
 7700              	.LVL1166:
4018:Middlewares/Third_Party/FatFs/src/ff.c **** 				do {
 7701              		.loc 1 4018 0
 7702 005c BAF1000F 		cmp	r10, #0
 7703 0060 30D0     		beq	.L804
 7704 0062 4FF00209 		mov	r9, #2
 7705              	.LVL1167:
 7706              	.L777:
4021:Middlewares/Third_Party/FatFs/src/ff.c **** 					do {
 7707              		.loc 1 4021 0
 7708 0066 09F10209 		add	r9, r9, #2
 7709              	.LVL1168:
 7710 006a 5646     		mov	r6, r10
 7711 006c 0027     		movs	r7, #0
 7712              	.LVL1169:
 7713              	.L775:
4023:Middlewares/Third_Party/FatFs/src/ff.c **** 						cl = get_fat(&fp->obj, cl);
 7714              		.loc 1 4023 0
 7715 006e 0137     		adds	r7, r7, #1
 7716              	.LVL1170:
4024:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl <= 1) ABORT(fs, FR_INT_ERR);
 7717              		.loc 1 4024 0
 7718 0070 3146     		mov	r1, r6
 7719 0072 4046     		mov	r0, r8
 7720 0074 FFF7FEFF 		bl	get_fat
 7721              	.LVL1171:
4025:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 7722              		.loc 1 4025 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 259


 7723 0078 0128     		cmp	r0, #1
 7724 007a 15D9     		bls	.L815
4026:Middlewares/Third_Party/FatFs/src/ff.c **** 					} while (cl == pcl + 1);
 7725              		.loc 1 4026 0
 7726 007c B0F1FF3F 		cmp	r0, #-1
 7727 0080 19D0     		beq	.L816
4027:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (ulen <= tlen) {		/* Store the length and top of the fragment */
 7728              		.loc 1 4027 0
 7729 0082 731C     		adds	r3, r6, #1
4024:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl <= 1) ABORT(fs, FR_INT_ERR);
 7730              		.loc 1 4024 0
 7731 0084 0646     		mov	r6, r0
 7732              	.LVL1172:
4027:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (ulen <= tlen) {		/* Store the length and top of the fragment */
 7733              		.loc 1 4027 0
 7734 0086 9842     		cmp	r0, r3
 7735 0088 F1D0     		beq	.L775
4028:Middlewares/Third_Party/FatFs/src/ff.c **** 						*tbl++ = ncl; *tbl++ = tcl;
 7736              		.loc 1 4028 0
 7737 008a CB45     		cmp	fp, r9
 7738 008c 06D3     		bcc	.L776
 7739              	.LVL1173:
4029:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 7740              		.loc 1 4029 0
 7741 008e 019A     		ldr	r2, [sp, #4]
 7742 0090 1346     		mov	r3, r2
 7743              	.LVL1174:
 7744 0092 43F8087B 		str	r7, [r3], #8
 7745              	.LVL1175:
 7746 0096 C2F804A0 		str	r10, [r2, #4]
 7747 009a 0193     		str	r3, [sp, #4]
 7748              	.LVL1176:
 7749              	.L776:
4031:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 7750              		.loc 1 4031 0
 7751 009c 039B     		ldr	r3, [sp, #12]
 7752 009e 1B6A     		ldr	r3, [r3, #32]
 7753 00a0 9842     		cmp	r0, r3
 7754 00a2 11D2     		bcs	.L772
4024:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl <= 1) ABORT(fs, FR_INT_ERR);
 7755              		.loc 1 4024 0
 7756 00a4 8246     		mov	r10, r0
 7757              	.LVL1177:
 7758 00a6 DEE7     		b	.L777
 7759              	.LVL1178:
 7760              	.L815:
4025:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 7761              		.loc 1 4025 0 discriminator 1
 7762 00a8 0225     		movs	r5, #2
 7763              	.LVL1179:
 7764 00aa 6575     		strb	r5, [r4, #21]
 7765 00ac 2946     		mov	r1, r5
 7766 00ae 0398     		ldr	r0, [sp, #12]
 7767              	.LVL1180:
 7768 00b0 FFF7FEFF 		bl	unlock_fs
 7769              	.LVL1181:
 7770 00b4 C3E7     		b	.L769
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 260


 7771              	.LVL1182:
 7772              	.L816:
4026:Middlewares/Third_Party/FatFs/src/ff.c **** 					} while (cl == pcl + 1);
 7773              		.loc 1 4026 0 discriminator 1
 7774 00b6 0125     		movs	r5, #1
 7775              	.LVL1183:
 7776 00b8 6575     		strb	r5, [r4, #21]
 7777 00ba 2946     		mov	r1, r5
 7778 00bc 0398     		ldr	r0, [sp, #12]
 7779              	.LVL1184:
 7780 00be FFF7FEFF 		bl	unlock_fs
 7781              	.LVL1185:
 7782 00c2 BCE7     		b	.L769
 7783              	.LVL1186:
 7784              	.L804:
4016:Middlewares/Third_Party/FatFs/src/ff.c **** 			cl = fp->obj.sclust;		/* Origin of the chain */
 7785              		.loc 1 4016 0
 7786 00c4 4FF00209 		mov	r9, #2
 7787              	.LVL1187:
 7788              	.L772:
4033:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ulen <= tlen) {
 7789              		.loc 1 4033 0
 7790 00c8 E36A     		ldr	r3, [r4, #44]
 7791 00ca C3F80090 		str	r9, [r3]
4034:Middlewares/Third_Party/FatFs/src/ff.c **** 				*tbl = 0;		/* Terminate table */
 7792              		.loc 1 4034 0
 7793 00ce D945     		cmp	r9, fp
 7794 00d0 00F21781 		bhi	.L806
4035:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
 7795              		.loc 1 4035 0
 7796 00d4 0023     		movs	r3, #0
 7797 00d6 019A     		ldr	r2, [sp, #4]
 7798 00d8 1360     		str	r3, [r2]
 7799 00da ACE7     		b	.L778
 7800              	.LVL1188:
 7801              	.L814:
4043:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc = clust2sect(fs, fp->clust);
 7802              		.loc 1 4043 0
 7803 00dc 07F1FF38 		add	r8, r7, #-1
 7804 00e0 4146     		mov	r1, r8
 7805 00e2 2046     		mov	r0, r4
 7806 00e4 FFF7FEFF 		bl	clmt_clust
 7807              	.LVL1189:
 7808 00e8 0146     		mov	r1, r0
 7809 00ea E061     		str	r0, [r4, #28]
4044:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!dsc) ABORT(fs, FR_INT_ERR);
 7810              		.loc 1 4044 0
 7811 00ec 039E     		ldr	r6, [sp, #12]
 7812 00ee 3046     		mov	r0, r6
 7813 00f0 FFF7FEFF 		bl	clust2sect
 7814              	.LVL1190:
4045:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc += (DWORD)((ofs - 1) / SS(fs)) & (fs->csize - 1);
 7815              		.loc 1 4045 0
 7816 00f4 E0B1     		cbz	r0, .L817
4046:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr % SS(fs) && dsc != fp->sect) {	/* Refill sector cache if needed */
 7817              		.loc 1 4046 0
 7818 00f6 7189     		ldrh	r1, [r6, #10]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 261


 7819 00f8 0139     		subs	r1, r1, #1
 7820 00fa 01EA5821 		and	r1, r1, r8, lsr #9
 7821 00fe 00EB0108 		add	r8, r0, r1
 7822              	.LVL1191:
4047:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 7823              		.loc 1 4047 0
 7824 0102 C7F30807 		ubfx	r7, r7, #0, #9
 7825              	.LVL1192:
 7826 0106 002F     		cmp	r7, #0
 7827 0108 95D0     		beq	.L778
4047:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 7828              		.loc 1 4047 0 is_stmt 0 discriminator 1
 7829 010a 226A     		ldr	r2, [r4, #32]
 7830 010c 9045     		cmp	r8, r2
 7831 010e 92D0     		beq	.L778
4050:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
 7832              		.loc 1 4050 0 is_stmt 1
 7833 0110 94F91430 		ldrsb	r3, [r4, #20]
 7834 0114 002B     		cmp	r3, #0
 7835 0116 12DB     		blt	.L818
 7836              	.L781:
4055:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7837              		.loc 1 4055 0
 7838 0118 0123     		movs	r3, #1
 7839 011a 4246     		mov	r2, r8
 7840 011c 04F13001 		add	r1, r4, #48
 7841 0120 0398     		ldr	r0, [sp, #12]
 7842 0122 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 7843 0124 FFF7FEFF 		bl	disk_read
 7844              	.LVL1193:
 7845 0128 E0B9     		cbnz	r0, .L819
4057:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 7846              		.loc 1 4057 0
 7847 012a C4F82080 		str	r8, [r4, #32]
 7848 012e 82E7     		b	.L778
 7849              	.LVL1194:
 7850              	.L817:
4045:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc += (DWORD)((ofs - 1) / SS(fs)) & (fs->csize - 1);
 7851              		.loc 1 4045 0 discriminator 1
 7852 0130 0225     		movs	r5, #2
 7853              	.LVL1195:
 7854 0132 6575     		strb	r5, [r4, #21]
 7855 0134 2946     		mov	r1, r5
 7856 0136 3046     		mov	r0, r6
 7857              	.LVL1196:
 7858 0138 FFF7FEFF 		bl	unlock_fs
 7859              	.LVL1197:
 7860 013c 7FE7     		b	.L769
 7861              	.LVL1198:
 7862              	.L818:
4051:Middlewares/Third_Party/FatFs/src/ff.c **** 						fp->flag &= (BYTE)~FA_DIRTY;
 7863              		.loc 1 4051 0
 7864 013e 0123     		movs	r3, #1
 7865 0140 04F13001 		add	r1, r4, #48
 7866 0144 7078     		ldrb	r0, [r6, #1]	@ zero_extendqisi2
 7867 0146 FFF7FEFF 		bl	disk_write
 7868              	.LVL1199:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 262


 7869 014a 20B9     		cbnz	r0, .L820
4052:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 7870              		.loc 1 4052 0
 7871 014c 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
 7872 014e 03F07F03 		and	r3, r3, #127
 7873 0152 2375     		strb	r3, [r4, #20]
 7874 0154 E0E7     		b	.L781
 7875              	.L820:
4051:Middlewares/Third_Party/FatFs/src/ff.c **** 						fp->flag &= (BYTE)~FA_DIRTY;
 7876              		.loc 1 4051 0 discriminator 1
 7877 0156 0125     		movs	r5, #1
 7878              	.LVL1200:
 7879 0158 6575     		strb	r5, [r4, #21]
 7880 015a 2946     		mov	r1, r5
 7881 015c 0398     		ldr	r0, [sp, #12]
 7882 015e FFF7FEFF 		bl	unlock_fs
 7883              	.LVL1201:
 7884 0162 6CE7     		b	.L769
 7885              	.LVL1202:
 7886              	.L819:
4055:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7887              		.loc 1 4055 0 discriminator 1
 7888 0164 0125     		movs	r5, #1
 7889              	.LVL1203:
 7890 0166 6575     		strb	r5, [r4, #21]
 7891 0168 2946     		mov	r1, r5
 7892 016a 0398     		ldr	r0, [sp, #12]
 7893 016c FFF7FEFF 		bl	unlock_fs
 7894              	.LVL1204:
 7895 0170 65E7     		b	.L769
 7896              	.LVL1205:
 7897              	.L770:
4069:Middlewares/Third_Party/FatFs/src/ff.c **** 			ofs = fp->obj.objsize;
 7898              		.loc 1 4069 0
 7899 0172 E368     		ldr	r3, [r4, #12]
 7900 0174 9E42     		cmp	r6, r3
 7901 0176 04D9     		bls	.L784
4069:Middlewares/Third_Party/FatFs/src/ff.c **** 			ofs = fp->obj.objsize;
 7902              		.loc 1 4069 0 is_stmt 0 discriminator 1
 7903 0178 227D     		ldrb	r2, [r4, #20]	@ zero_extendqisi2
 7904 017a 12F0020F 		tst	r2, #2
 7905 017e 00D1     		bne	.L784
4070:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 7906              		.loc 1 4070 0 is_stmt 1
 7907 0180 1E46     		mov	r6, r3
 7908              	.LVL1206:
 7909              	.L784:
4072:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->fptr = nsect = 0;
 7910              		.loc 1 4072 0
 7911 0182 A369     		ldr	r3, [r4, #24]
 7912              	.LVL1207:
4073:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs) {
 7913              		.loc 1 4073 0
 7914 0184 0022     		movs	r2, #0
 7915 0186 A261     		str	r2, [r4, #24]
4074:Middlewares/Third_Party/FatFs/src/ff.c **** 			bcs = (DWORD)fs->csize * SS(fs);	/* Cluster size (byte) */
 7916              		.loc 1 4074 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 263


 7917 0188 002E     		cmp	r6, #0
 7918 018a 7BD0     		beq	.L808
4075:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ifptr > 0 &&
 7919              		.loc 1 4075 0
 7920 018c 039A     		ldr	r2, [sp, #12]
 7921 018e B2F80A90 		ldrh	r9, [r2, #10]
 7922 0192 4FEA4929 		lsl	r9, r9, #9
 7923              	.LVL1208:
4076:Middlewares/Third_Party/FatFs/src/ff.c **** 				(ofs - 1) / bcs >= (ifptr - 1) / bcs) {	/* When seek to same or following cluster, */
 7924              		.loc 1 4076 0
 7925 0196 73B1     		cbz	r3, .L786
4077:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fptr = (ifptr - 1) & ~(FSIZE_t)(bcs - 1);	/* start from the current cluster */
 7926              		.loc 1 4077 0 discriminator 1
 7927 0198 721E     		subs	r2, r6, #1
 7928 019a B2FBF9F2 		udiv	r2, r2, r9
 7929 019e 013B     		subs	r3, r3, #1
 7930              	.LVL1209:
 7931 01a0 B3FBF9F1 		udiv	r1, r3, r9
4076:Middlewares/Third_Party/FatFs/src/ff.c **** 				(ofs - 1) / bcs >= (ifptr - 1) / bcs) {	/* When seek to same or following cluster, */
 7932              		.loc 1 4076 0 discriminator 1
 7933 01a4 8A42     		cmp	r2, r1
 7934 01a6 06D3     		bcc	.L786
4078:Middlewares/Third_Party/FatFs/src/ff.c **** 				ofs -= fp->fptr;
 7935              		.loc 1 4078 0
 7936 01a8 C9F10002 		rsb	r2, r9, #0
 7937 01ac 1340     		ands	r3, r3, r2
 7938              	.LVL1210:
 7939 01ae A361     		str	r3, [r4, #24]
4079:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = fp->clust;
 7940              		.loc 1 4079 0
 7941 01b0 F61A     		subs	r6, r6, r3
 7942              	.LVL1211:
4080:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {									/* When seek to back cluster, */
 7943              		.loc 1 4080 0
 7944 01b2 E769     		ldr	r7, [r4, #28]
 7945              	.LVL1212:
 7946 01b4 02E0     		b	.L787
 7947              	.LVL1213:
 7948              	.L786:
4082:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 7949              		.loc 1 4082 0
 7950 01b6 A768     		ldr	r7, [r4, #8]
 7951              	.LVL1214:
4084:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = create_chain(&fp->obj, 0);
 7952              		.loc 1 4084 0
 7953 01b8 17B1     		cbz	r7, .L821
 7954              	.L788:
4091:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 7955              		.loc 1 4091 0
 7956 01ba E761     		str	r7, [r4, #28]
 7957              	.L787:
4093:Middlewares/Third_Party/FatFs/src/ff.c **** 				while (ofs > bcs) {						/* Cluster following loop */
 7958              		.loc 1 4093 0
 7959 01bc 4FBB     		cbnz	r7, .L791
 7960 01be 62E0     		b	.L785
 7961              	.L821:
4085:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 1) ABORT(fs, FR_INT_ERR);
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 264


 7962              		.loc 1 4085 0
 7963 01c0 0021     		movs	r1, #0
 7964 01c2 2046     		mov	r0, r4
 7965 01c4 FFF7FEFF 		bl	create_chain
 7966              	.LVL1215:
 7967 01c8 0746     		mov	r7, r0
 7968              	.LVL1216:
4086:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 7969              		.loc 1 4086 0
 7970 01ca 0128     		cmp	r0, #1
 7971 01cc 04D0     		beq	.L822
4087:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->obj.sclust = clst;
 7972              		.loc 1 4087 0
 7973 01ce B0F1FF3F 		cmp	r0, #-1
 7974 01d2 08D0     		beq	.L823
4088:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 7975              		.loc 1 4088 0
 7976 01d4 A060     		str	r0, [r4, #8]
 7977 01d6 F0E7     		b	.L788
 7978              	.L822:
4086:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 7979              		.loc 1 4086 0 discriminator 1
 7980 01d8 0225     		movs	r5, #2
 7981              	.LVL1217:
 7982 01da 6575     		strb	r5, [r4, #21]
 7983 01dc 2946     		mov	r1, r5
 7984 01de 0398     		ldr	r0, [sp, #12]
 7985              	.LVL1218:
 7986 01e0 FFF7FEFF 		bl	unlock_fs
 7987              	.LVL1219:
 7988 01e4 2BE7     		b	.L769
 7989              	.LVL1220:
 7990              	.L823:
4087:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->obj.sclust = clst;
 7991              		.loc 1 4087 0 discriminator 1
 7992 01e6 0125     		movs	r5, #1
 7993              	.LVL1221:
 7994 01e8 6575     		strb	r5, [r4, #21]
 7995 01ea 2946     		mov	r1, r5
 7996 01ec 0398     		ldr	r0, [sp, #12]
 7997              	.LVL1222:
 7998 01ee FFF7FEFF 		bl	unlock_fs
 7999              	.LVL1223:
 8000 01f2 24E7     		b	.L769
 8001              	.LVL1224:
 8002              	.L792:
4109:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 8003              		.loc 1 4109 0
 8004 01f4 3946     		mov	r1, r7
 8005 01f6 4046     		mov	r0, r8
 8006 01f8 FFF7FEFF 		bl	get_fat
 8007              	.LVL1225:
 8008 01fc 0746     		mov	r7, r0
 8009              	.LVL1226:
 8010              	.L794:
4111:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst <= 1 || clst >= fs->n_fatent) ABORT(fs, FR_INT_ERR);
 8011              		.loc 1 4111 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 265


 8012 01fe B7F1FF3F 		cmp	r7, #-1
 8013 0202 2AD0     		beq	.L824
4112:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->clust = clst;
 8014              		.loc 1 4112 0
 8015 0204 012F     		cmp	r7, #1
 8016 0206 2FD9     		bls	.L796
4112:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->clust = clst;
 8017              		.loc 1 4112 0 is_stmt 0 discriminator 2
 8018 0208 039B     		ldr	r3, [sp, #12]
 8019 020a 1B6A     		ldr	r3, [r3, #32]
 8020 020c 9F42     		cmp	r7, r3
 8021 020e 2BD2     		bcs	.L796
4113:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 8022              		.loc 1 4113 0 is_stmt 1
 8023 0210 E761     		str	r7, [r4, #28]
 8024              	.LVL1227:
 8025              	.L791:
4094:Middlewares/Third_Party/FatFs/src/ff.c **** 					ofs -= bcs; fp->fptr += bcs;
 8026              		.loc 1 4094 0
 8027 0212 4E45     		cmp	r6, r9
 8028 0214 10D9     		bls	.L793
4095:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 8029              		.loc 1 4095 0
 8030 0216 A6EB0906 		sub	r6, r6, r9
 8031              	.LVL1228:
 8032 021a A369     		ldr	r3, [r4, #24]
 8033 021c 4B44     		add	r3, r3, r9
 8034 021e A361     		str	r3, [r4, #24]
4097:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (_FS_EXFAT && fp->fptr > fp->obj.objsize) {	/* No FAT chain object needs correct objsize t
 8035              		.loc 1 4097 0
 8036 0220 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
 8037 0222 13F0020F 		tst	r3, #2
 8038 0226 E5D0     		beq	.L792
4102:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (clst == 0) {				/* Clip file size in case of disk full */
 8039              		.loc 1 4102 0
 8040 0228 3946     		mov	r1, r7
 8041 022a 4046     		mov	r0, r8
 8042 022c FFF7FEFF 		bl	create_chain
 8043              	.LVL1229:
4103:Middlewares/Third_Party/FatFs/src/ff.c **** 							ofs = 0; break;
 8044              		.loc 1 4103 0
 8045 0230 0746     		mov	r7, r0
 8046 0232 0028     		cmp	r0, #0
 8047 0234 E3D1     		bne	.L794
4104:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
 8048              		.loc 1 4104 0
 8049 0236 0026     		movs	r6, #0
 8050              	.LVL1230:
 8051              	.L793:
4115:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (ofs % SS(fs)) {
 8052              		.loc 1 4115 0
 8053 0238 A369     		ldr	r3, [r4, #24]
 8054 023a 3344     		add	r3, r3, r6
 8055 023c A361     		str	r3, [r4, #24]
4116:Middlewares/Third_Party/FatFs/src/ff.c **** 					nsect = clust2sect(fs, clst);	/* Current sector */
 8056              		.loc 1 4116 0
 8057 023e C6F30803 		ubfx	r3, r6, #0, #9
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 266


 8058 0242 002B     		cmp	r3, #0
 8059 0244 40D0     		beq	.L810
4117:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!nsect) ABORT(fs, FR_INT_ERR);
 8060              		.loc 1 4117 0
 8061 0246 DDF80C80 		ldr	r8, [sp, #12]
 8062 024a 3946     		mov	r1, r7
 8063 024c 4046     		mov	r0, r8
 8064 024e FFF7FEFF 		bl	clust2sect
 8065              	.LVL1231:
4118:Middlewares/Third_Party/FatFs/src/ff.c **** 					nsect += (DWORD)(ofs / SS(fs));
 8066              		.loc 1 4118 0
 8067 0252 80B1     		cbz	r0, .L825
4119:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 8068              		.loc 1 4119 0
 8069 0254 00EB5627 		add	r7, r0, r6, lsr #9
 8070              	.LVL1232:
 8071 0258 15E0     		b	.L785
 8072              	.LVL1233:
 8073              	.L824:
4111:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst <= 1 || clst >= fs->n_fatent) ABORT(fs, FR_INT_ERR);
 8074              		.loc 1 4111 0 discriminator 1
 8075 025a 0125     		movs	r5, #1
 8076              	.LVL1234:
 8077 025c 6575     		strb	r5, [r4, #21]
 8078 025e 2946     		mov	r1, r5
 8079 0260 0398     		ldr	r0, [sp, #12]
 8080              	.LVL1235:
 8081 0262 FFF7FEFF 		bl	unlock_fs
 8082              	.LVL1236:
 8083 0266 EAE6     		b	.L769
 8084              	.LVL1237:
 8085              	.L796:
4112:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->clust = clst;
 8086              		.loc 1 4112 0 discriminator 3
 8087 0268 0225     		movs	r5, #2
 8088              	.LVL1238:
 8089 026a 6575     		strb	r5, [r4, #21]
 8090 026c 2946     		mov	r1, r5
 8091 026e 0398     		ldr	r0, [sp, #12]
 8092              	.LVL1239:
 8093 0270 FFF7FEFF 		bl	unlock_fs
 8094              	.LVL1240:
 8095 0274 E3E6     		b	.L769
 8096              	.LVL1241:
 8097              	.L825:
4118:Middlewares/Third_Party/FatFs/src/ff.c **** 					nsect += (DWORD)(ofs / SS(fs));
 8098              		.loc 1 4118 0 discriminator 1
 8099 0276 0225     		movs	r5, #2
 8100              	.LVL1242:
 8101 0278 6575     		strb	r5, [r4, #21]
 8102 027a 2946     		mov	r1, r5
 8103 027c 4046     		mov	r0, r8
 8104              	.LVL1243:
 8105 027e FFF7FEFF 		bl	unlock_fs
 8106              	.LVL1244:
 8107 0282 DCE6     		b	.L769
 8108              	.LVL1245:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 267


 8109              	.L808:
4073:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs) {
 8110              		.loc 1 4073 0
 8111 0284 0027     		movs	r7, #0
 8112              	.LVL1246:
 8113              	.L785:
4123:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->obj.objsize = fp->fptr;
 8114              		.loc 1 4123 0
 8115 0286 A369     		ldr	r3, [r4, #24]
 8116 0288 E268     		ldr	r2, [r4, #12]
 8117 028a 9342     		cmp	r3, r2
 8118 028c 04D9     		bls	.L800
4124:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->flag |= FA_MODIFIED;
 8119              		.loc 1 4124 0
 8120 028e E360     		str	r3, [r4, #12]
4125:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 8121              		.loc 1 4125 0
 8122 0290 227D     		ldrb	r2, [r4, #20]	@ zero_extendqisi2
 8123 0292 42F04002 		orr	r2, r2, #64
 8124 0296 2275     		strb	r2, [r4, #20]
 8125              	.L800:
4127:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 8126              		.loc 1 4127 0
 8127 0298 C3F30803 		ubfx	r3, r3, #0, #9
 8128 029c 002B     		cmp	r3, #0
 8129 029e 3FF4CAAE 		beq	.L778
4127:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 8130              		.loc 1 4127 0 is_stmt 0 discriminator 1
 8131 02a2 226A     		ldr	r2, [r4, #32]
 8132 02a4 9742     		cmp	r7, r2
 8133 02a6 3FF4C6AE 		beq	.L778
4130:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
 8134              		.loc 1 4130 0 is_stmt 1
 8135 02aa 94F91430 		ldrsb	r3, [r4, #20]
 8136 02ae 002B     		cmp	r3, #0
 8137 02b0 0CDB     		blt	.L826
 8138              	.L801:
4135:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 8139              		.loc 1 4135 0
 8140 02b2 0123     		movs	r3, #1
 8141 02b4 3A46     		mov	r2, r7
 8142 02b6 04F13001 		add	r1, r4, #48
 8143 02ba 0398     		ldr	r0, [sp, #12]
 8144 02bc 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 8145 02be FFF7FEFF 		bl	disk_read
 8146              	.LVL1247:
 8147 02c2 B8B9     		cbnz	r0, .L827
4137:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 8148              		.loc 1 4137 0
 8149 02c4 2762     		str	r7, [r4, #32]
 8150 02c6 B6E6     		b	.L778
 8151              	.LVL1248:
 8152              	.L810:
4073:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs) {
 8153              		.loc 1 4073 0
 8154 02c8 0027     		movs	r7, #0
 8155              	.LVL1249:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 268


 8156 02ca DCE7     		b	.L785
 8157              	.LVL1250:
 8158              	.L826:
4131:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 8159              		.loc 1 4131 0
 8160 02cc 0123     		movs	r3, #1
 8161 02ce 04F13001 		add	r1, r4, #48
 8162 02d2 0398     		ldr	r0, [sp, #12]
 8163 02d4 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 8164 02d6 FFF7FEFF 		bl	disk_write
 8165              	.LVL1251:
 8166 02da 20B9     		cbnz	r0, .L828
4132:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 8167              		.loc 1 4132 0
 8168 02dc 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
 8169 02de 03F07F03 		and	r3, r3, #127
 8170 02e2 2375     		strb	r3, [r4, #20]
 8171 02e4 E5E7     		b	.L801
 8172              	.L828:
4131:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 8173              		.loc 1 4131 0 discriminator 1
 8174 02e6 0125     		movs	r5, #1
 8175              	.LVL1252:
 8176 02e8 6575     		strb	r5, [r4, #21]
 8177 02ea 2946     		mov	r1, r5
 8178 02ec 0398     		ldr	r0, [sp, #12]
 8179 02ee FFF7FEFF 		bl	unlock_fs
 8180              	.LVL1253:
 8181 02f2 A4E6     		b	.L769
 8182              	.LVL1254:
 8183              	.L827:
4135:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 8184              		.loc 1 4135 0 discriminator 1
 8185 02f4 0125     		movs	r5, #1
 8186              	.LVL1255:
 8187 02f6 6575     		strb	r5, [r4, #21]
 8188 02f8 2946     		mov	r1, r5
 8189 02fa 0398     		ldr	r0, [sp, #12]
 8190 02fc FFF7FEFF 		bl	unlock_fs
 8191              	.LVL1256:
 8192 0300 9DE6     		b	.L769
 8193              	.LVL1257:
 8194              	.L806:
4037:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 8195              		.loc 1 4037 0
 8196 0302 1125     		movs	r5, #17
 8197              	.LVL1258:
 8198 0304 97E6     		b	.L778
 8199              		.cfi_endproc
 8200              	.LFE194:
 8202              		.section	.text.f_opendir,"ax",%progbits
 8203              		.align	1
 8204              		.global	f_opendir
 8205              		.syntax unified
 8206              		.thumb
 8207              		.thumb_func
 8208              		.fpu fpv5-sp-d16
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 269


 8210              	f_opendir:
 8211              	.LFB195:
4155:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 8212              		.loc 1 4155 0
 8213              		.cfi_startproc
 8214              		@ args = 0, pretend = 0, frame = 16
 8215              		@ frame_needed = 0, uses_anonymous_args = 0
 8216              	.LVL1259:
 8217 0000 70B5     		push	{r4, r5, r6, lr}
 8218              	.LCFI102:
 8219              		.cfi_def_cfa_offset 16
 8220              		.cfi_offset 4, -16
 8221              		.cfi_offset 5, -12
 8222              		.cfi_offset 6, -8
 8223              		.cfi_offset 14, -4
 8224 0002 84B0     		sub	sp, sp, #16
 8225              	.LCFI103:
 8226              		.cfi_def_cfa_offset 32
 8227 0004 0191     		str	r1, [sp, #4]
4162:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8228              		.loc 1 4162 0
 8229 0006 0028     		cmp	r0, #0
 8230 0008 56D0     		beq	.L837
 8231 000a 0546     		mov	r5, r0
 8232              	.LVL1260:
4166:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 8233              		.loc 1 4166 0
 8234 000c 0022     		movs	r2, #0
 8235 000e 03A9     		add	r1, sp, #12
 8236              	.LVL1261:
 8237 0010 01A8     		add	r0, sp, #4
 8238              	.LVL1262:
 8239 0012 FFF7FEFF 		bl	find_volume
 8240              	.LVL1263:
4167:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->fs = fs;
 8241              		.loc 1 4167 0
 8242 0016 0446     		mov	r4, r0
 8243 0018 48B1     		cbz	r0, .L842
 8244              	.LVL1264:
 8245              	.L831:
4209:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8246              		.loc 1 4209 0
 8247 001a 0CB1     		cbz	r4, .L836
4209:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8248              		.loc 1 4209 0 is_stmt 0 discriminator 1
 8249 001c 0023     		movs	r3, #0
 8250 001e 2B60     		str	r3, [r5]
 8251              	.L836:
4211:Middlewares/Third_Party/FatFs/src/ff.c **** }
 8252              		.loc 1 4211 0 is_stmt 1
 8253 0020 2146     		mov	r1, r4
 8254 0022 0398     		ldr	r0, [sp, #12]
 8255 0024 FFF7FEFF 		bl	unlock_fs
 8256              	.LVL1265:
 8257              	.L830:
4212:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8258              		.loc 1 4212 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 270


 8259 0028 2046     		mov	r0, r4
 8260 002a 04B0     		add	sp, sp, #16
 8261              	.LCFI104:
 8262              		.cfi_remember_state
 8263              		.cfi_def_cfa_offset 16
 8264              		@ sp needed
 8265 002c 70BD     		pop	{r4, r5, r6, pc}
 8266              	.LVL1266:
 8267              	.L842:
 8268              	.LCFI105:
 8269              		.cfi_restore_state
4168:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
 8270              		.loc 1 4168 0
 8271 002e 039B     		ldr	r3, [sp, #12]
 8272 0030 2B60     		str	r3, [r5]
4169:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(dp, path);			/* Follow the path to the directory */
 8273              		.loc 1 4169 0
 8274 0032 4FF40070 		mov	r0, #512
 8275              	.LVL1267:
 8276 0036 FFF7FEFF 		bl	ff_memalloc
 8277              	.LVL1268:
 8278 003a 0646     		mov	r6, r0
 8279 003c E0B1     		cbz	r0, .L843
4169:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(dp, path);			/* Follow the path to the directory */
 8280              		.loc 1 4169 0 is_stmt 0 discriminator 2
 8281 003e 039B     		ldr	r3, [sp, #12]
 8282 0040 D860     		str	r0, [r3, #12]
4170:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {						/* Follow completed */
 8283              		.loc 1 4170 0 is_stmt 1 discriminator 2
 8284 0042 0199     		ldr	r1, [sp, #4]
 8285 0044 2846     		mov	r0, r5
 8286              	.LVL1269:
 8287 0046 FFF7FEFF 		bl	follow_path
 8288              	.LVL1270:
4171:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!(dp->fn[NSFLAG] & NS_NONAME)) {	/* It is not the origin directory itself */
 8289              		.loc 1 4171 0 discriminator 2
 8290 004a 0446     		mov	r4, r0
 8291 004c 68B9     		cbnz	r0, .L833
4172:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (obj->attr & AM_DIR) {		/* This object is a sub-directory */
 8292              		.loc 1 4172 0
 8293 004e 95F92F30 		ldrsb	r3, [r5, #47]
 8294 0052 002B     		cmp	r3, #0
 8295 0054 08DB     		blt	.L834
4173:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 8296              		.loc 1 4173 0
 8297 0056 AB79     		ldrb	r3, [r5, #6]	@ zero_extendqisi2
 8298 0058 13F0100F 		tst	r3, #16
 8299 005c 12D0     		beq	.L838
4185:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 8300              		.loc 1 4185 0
 8301 005e 296A     		ldr	r1, [r5, #32]
 8302 0060 0398     		ldr	r0, [sp, #12]
 8303              	.LVL1271:
 8304 0062 FFF7FEFF 		bl	ld_clust
 8305              	.LVL1272:
 8306 0066 A860     		str	r0, [r5, #8]
 8307              	.L834:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 271


 8308              	.LVL1273:
4191:Middlewares/Third_Party/FatFs/src/ff.c **** 				obj->id = fs->id;
 8309              		.loc 1 4191 0
 8310 0068 74B1     		cbz	r4, .L844
 8311              	.LVL1274:
 8312              	.L833:
4206:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_NO_FILE) res = FR_NO_PATH;
 8313              		.loc 1 4206 0
 8314 006a 3046     		mov	r0, r6
 8315 006c FFF7FEFF 		bl	ff_memfree
 8316              	.LVL1275:
4207:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 8317              		.loc 1 4207 0
 8318 0070 042C     		cmp	r4, #4
 8319 0072 D2D1     		bne	.L831
 8320 0074 0524     		movs	r4, #5
 8321              	.LVL1276:
 8322 0076 D0E7     		b	.L831
 8323              	.LVL1277:
 8324              	.L843:
4169:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(dp, path);			/* Follow the path to the directory */
 8325              		.loc 1 4169 0 discriminator 1
 8326 0078 1121     		movs	r1, #17
 8327 007a 0398     		ldr	r0, [sp, #12]
 8328              	.LVL1278:
 8329 007c FFF7FEFF 		bl	unlock_fs
 8330              	.LVL1279:
 8331 0080 1124     		movs	r4, #17
 8332 0082 D1E7     		b	.L830
 8333              	.LVL1280:
 8334              	.L838:
4188:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 8335              		.loc 1 4188 0
 8336 0084 0524     		movs	r4, #5
 8337 0086 EFE7     		b	.L834
 8338              	.LVL1281:
 8339              	.L844:
4192:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_sdi(dp, 0);			/* Rewind directory */
 8340              		.loc 1 4192 0
 8341 0088 039B     		ldr	r3, [sp, #12]
 8342 008a DB88     		ldrh	r3, [r3, #6]
 8343 008c AB80     		strh	r3, [r5, #4]	@ movhi
4193:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 8344              		.loc 1 4193 0
 8345 008e 0021     		movs	r1, #0
 8346 0090 2846     		mov	r0, r5
 8347 0092 FFF7FEFF 		bl	dir_sdi
 8348              	.LVL1282:
4195:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (obj->sclust) {
 8349              		.loc 1 4195 0
 8350 0096 0446     		mov	r4, r0
 8351 0098 0028     		cmp	r0, #0
 8352 009a E6D1     		bne	.L833
4196:Middlewares/Third_Party/FatFs/src/ff.c **** 						obj->lockid = inc_lock(dp, 0);	/* Lock the sub directory */
 8353              		.loc 1 4196 0
 8354 009c AB68     		ldr	r3, [r5, #8]
 8355 009e 13B9     		cbnz	r3, .L845
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 272


4200:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 8356              		.loc 1 4200 0
 8357 00a0 0023     		movs	r3, #0
 8358 00a2 2B61     		str	r3, [r5, #16]
 8359 00a4 E1E7     		b	.L833
 8360              	.L845:
4197:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (!obj->lockid) res = FR_TOO_MANY_OPEN_FILES;
 8361              		.loc 1 4197 0
 8362 00a6 0021     		movs	r1, #0
 8363 00a8 2846     		mov	r0, r5
 8364              	.LVL1283:
 8365 00aa FFF7FEFF 		bl	inc_lock
 8366              	.LVL1284:
 8367 00ae 2861     		str	r0, [r5, #16]
4198:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else {
 8368              		.loc 1 4198 0
 8369 00b0 0028     		cmp	r0, #0
 8370 00b2 DAD1     		bne	.L833
 8371 00b4 1224     		movs	r4, #18
 8372 00b6 D8E7     		b	.L833
 8373              	.LVL1285:
 8374              	.L837:
4162:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8375              		.loc 1 4162 0
 8376 00b8 0924     		movs	r4, #9
 8377 00ba B5E7     		b	.L830
 8378              		.cfi_endproc
 8379              	.LFE195:
 8381              		.section	.text.f_closedir,"ax",%progbits
 8382              		.align	1
 8383              		.global	f_closedir
 8384              		.syntax unified
 8385              		.thumb
 8386              		.thumb_func
 8387              		.fpu fpv5-sp-d16
 8389              	f_closedir:
 8390              	.LFB196:
4224:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 8391              		.loc 1 4224 0
 8392              		.cfi_startproc
 8393              		@ args = 0, pretend = 0, frame = 8
 8394              		@ frame_needed = 0, uses_anonymous_args = 0
 8395              	.LVL1286:
 8396 0000 30B5     		push	{r4, r5, lr}
 8397              	.LCFI106:
 8398              		.cfi_def_cfa_offset 12
 8399              		.cfi_offset 4, -12
 8400              		.cfi_offset 5, -8
 8401              		.cfi_offset 14, -4
 8402 0002 83B0     		sub	sp, sp, #12
 8403              	.LCFI107:
 8404              		.cfi_def_cfa_offset 24
 8405 0004 0546     		mov	r5, r0
4229:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 8406              		.loc 1 4229 0
 8407 0006 01A9     		add	r1, sp, #4
 8408 0008 FFF7FEFF 		bl	validate
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 273


 8409              	.LVL1287:
4230:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 8410              		.loc 1 4230 0
 8411 000c 0446     		mov	r4, r0
 8412 000e 40B9     		cbnz	r0, .L847
4232:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dec_lock(dp->obj.lockid);
 8413              		.loc 1 4232 0
 8414 0010 2869     		ldr	r0, [r5, #16]
 8415              	.LVL1288:
 8416 0012 48B9     		cbnz	r0, .L851
 8417              	.L848:
 8418              	.LVL1289:
4235:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 8419              		.loc 1 4235 0
 8420 0014 0CB9     		cbnz	r4, .L849
4238:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 8421              		.loc 1 4238 0
 8422 0016 0023     		movs	r3, #0
 8423 0018 2B60     		str	r3, [r5]
 8424              	.L849:
4241:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 8425              		.loc 1 4241 0
 8426 001a 0021     		movs	r1, #0
 8427 001c 0198     		ldr	r0, [sp, #4]
 8428 001e FFF7FEFF 		bl	unlock_fs
 8429              	.LVL1290:
 8430              	.L847:
4245:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8431              		.loc 1 4245 0
 8432 0022 2046     		mov	r0, r4
 8433 0024 03B0     		add	sp, sp, #12
 8434              	.LCFI108:
 8435              		.cfi_remember_state
 8436              		.cfi_def_cfa_offset 12
 8437              		@ sp needed
 8438 0026 30BD     		pop	{r4, r5, pc}
 8439              	.LVL1291:
 8440              	.L851:
 8441              	.LCFI109:
 8442              		.cfi_restore_state
4233:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 8443              		.loc 1 4233 0
 8444 0028 FFF7FEFF 		bl	dec_lock
 8445              	.LVL1292:
 8446 002c 0446     		mov	r4, r0
 8447              	.LVL1293:
 8448 002e F1E7     		b	.L848
 8449              		.cfi_endproc
 8450              	.LFE196:
 8452              		.section	.text.f_readdir,"ax",%progbits
 8453              		.align	1
 8454              		.global	f_readdir
 8455              		.syntax unified
 8456              		.thumb
 8457              		.thumb_func
 8458              		.fpu fpv5-sp-d16
 8460              	f_readdir:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 274


 8461              	.LFB197:
4258:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 8462              		.loc 1 4258 0
 8463              		.cfi_startproc
 8464              		@ args = 0, pretend = 0, frame = 8
 8465              		@ frame_needed = 0, uses_anonymous_args = 0
 8466              	.LVL1294:
 8467 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 8468              	.LCFI110:
 8469              		.cfi_def_cfa_offset 20
 8470              		.cfi_offset 4, -20
 8471              		.cfi_offset 5, -16
 8472              		.cfi_offset 6, -12
 8473              		.cfi_offset 7, -8
 8474              		.cfi_offset 14, -4
 8475 0002 83B0     		sub	sp, sp, #12
 8476              	.LCFI111:
 8477              		.cfi_def_cfa_offset 32
 8478 0004 0646     		mov	r6, r0
 8479 0006 0D46     		mov	r5, r1
4264:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 8480              		.loc 1 4264 0
 8481 0008 01A9     		add	r1, sp, #4
 8482              	.LVL1295:
 8483 000a FFF7FEFF 		bl	validate
 8484              	.LVL1296:
4265:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!fno) {
 8485              		.loc 1 4265 0
 8486 000e 0446     		mov	r4, r0
 8487 0010 98B9     		cbnz	r0, .L853
4266:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_sdi(dp, 0);			/* Rewind the directory object */
 8488              		.loc 1 4266 0
 8489 0012 CDB1     		cbz	r5, .L860
4269:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_read(dp, 0);			/* Read an item */
 8490              		.loc 1 4269 0
 8491 0014 4FF40070 		mov	r0, #512
 8492              	.LVL1297:
 8493 0018 FFF7FEFF 		bl	ff_memalloc
 8494              	.LVL1298:
 8495 001c 0746     		mov	r7, r0
 8496 001e C8B1     		cbz	r0, .L861
4269:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_read(dp, 0);			/* Read an item */
 8497              		.loc 1 4269 0 is_stmt 0 discriminator 2
 8498 0020 019B     		ldr	r3, [sp, #4]
 8499 0022 D860     		str	r0, [r3, #12]
4270:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_NO_FILE) res = FR_OK;	/* Ignore end of directory */
 8500              		.loc 1 4270 0 is_stmt 1 discriminator 2
 8501 0024 0021     		movs	r1, #0
 8502 0026 3046     		mov	r0, r6
 8503              	.LVL1299:
 8504 0028 FFF7FEFF 		bl	dir_read
 8505              	.LVL1300:
4271:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {				/* A valid entry is found */
 8506              		.loc 1 4271 0 discriminator 2
 8507 002c 0428     		cmp	r0, #4
 8508 002e 00D0     		beq	.L857
4270:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_NO_FILE) res = FR_OK;	/* Ignore end of directory */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 275


 8509              		.loc 1 4270 0
 8510 0030 0446     		mov	r4, r0
 8511              	.L857:
 8512              	.LVL1301:
4272:Middlewares/Third_Party/FatFs/src/ff.c **** 				get_fileinfo(dp, fno);		/* Get the object information */
 8513              		.loc 1 4272 0
 8514 0032 ACB1     		cbz	r4, .L862
 8515              	.LVL1302:
 8516              	.L858:
4277:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 8517              		.loc 1 4277 0
 8518 0034 3846     		mov	r0, r7
 8519 0036 FFF7FEFF 		bl	ff_memfree
 8520              	.LVL1303:
 8521              	.L853:
4280:Middlewares/Third_Party/FatFs/src/ff.c **** }
 8522              		.loc 1 4280 0
 8523 003a 2146     		mov	r1, r4
 8524 003c 0198     		ldr	r0, [sp, #4]
 8525 003e FFF7FEFF 		bl	unlock_fs
 8526              	.LVL1304:
 8527              	.L856:
4281:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8528              		.loc 1 4281 0
 8529 0042 2046     		mov	r0, r4
 8530 0044 03B0     		add	sp, sp, #12
 8531              	.LCFI112:
 8532              		.cfi_remember_state
 8533              		.cfi_def_cfa_offset 20
 8534              		@ sp needed
 8535 0046 F0BD     		pop	{r4, r5, r6, r7, pc}
 8536              	.LVL1305:
 8537              	.L860:
 8538              	.LCFI113:
 8539              		.cfi_restore_state
4267:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 8540              		.loc 1 4267 0
 8541 0048 0021     		movs	r1, #0
 8542 004a 3046     		mov	r0, r6
 8543              	.LVL1306:
 8544 004c FFF7FEFF 		bl	dir_sdi
 8545              	.LVL1307:
 8546 0050 0446     		mov	r4, r0
 8547              	.LVL1308:
 8548 0052 F2E7     		b	.L853
 8549              	.LVL1309:
 8550              	.L861:
4269:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_read(dp, 0);			/* Read an item */
 8551              		.loc 1 4269 0 discriminator 1
 8552 0054 1121     		movs	r1, #17
 8553 0056 0198     		ldr	r0, [sp, #4]
 8554              	.LVL1310:
 8555 0058 FFF7FEFF 		bl	unlock_fs
 8556              	.LVL1311:
 8557 005c 1124     		movs	r4, #17
 8558 005e F0E7     		b	.L856
 8559              	.LVL1312:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 276


 8560              	.L862:
4273:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_next(dp, 0);		/* Increment index for next */
 8561              		.loc 1 4273 0
 8562 0060 2946     		mov	r1, r5
 8563 0062 3046     		mov	r0, r6
 8564 0064 FFF7FEFF 		bl	get_fileinfo
 8565              	.LVL1313:
4274:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE) res = FR_OK;	/* Ignore end of directory now */
 8566              		.loc 1 4274 0
 8567 0068 0021     		movs	r1, #0
 8568 006a 3046     		mov	r0, r6
 8569 006c FFF7FEFF 		bl	dir_next
 8570              	.LVL1314:
4275:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 8571              		.loc 1 4275 0
 8572 0070 0428     		cmp	r0, #4
 8573 0072 DFD0     		beq	.L858
4274:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE) res = FR_OK;	/* Ignore end of directory now */
 8574              		.loc 1 4274 0
 8575 0074 0446     		mov	r4, r0
 8576 0076 DDE7     		b	.L858
 8577              		.cfi_endproc
 8578              	.LFE197:
 8580              		.section	.text.f_stat,"ax",%progbits
 8581              		.align	1
 8582              		.global	f_stat
 8583              		.syntax unified
 8584              		.thumb
 8585              		.thumb_func
 8586              		.fpu fpv5-sp-d16
 8588              	f_stat:
 8589              	.LFB198:
4346:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 8590              		.loc 1 4346 0
 8591              		.cfi_startproc
 8592              		@ args = 0, pretend = 0, frame = 64
 8593              		@ frame_needed = 0, uses_anonymous_args = 0
 8594              	.LVL1315:
 8595 0000 70B5     		push	{r4, r5, r6, lr}
 8596              	.LCFI114:
 8597              		.cfi_def_cfa_offset 16
 8598              		.cfi_offset 4, -16
 8599              		.cfi_offset 5, -12
 8600              		.cfi_offset 6, -8
 8601              		.cfi_offset 14, -4
 8602 0002 90B0     		sub	sp, sp, #64
 8603              	.LCFI115:
 8604              		.cfi_def_cfa_offset 80
 8605 0004 0190     		str	r0, [sp, #4]
 8606 0006 0E46     		mov	r6, r1
4353:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 8607              		.loc 1 4353 0
 8608 0008 0022     		movs	r2, #0
 8609 000a 03A9     		add	r1, sp, #12
 8610              	.LVL1316:
 8611 000c 01A8     		add	r0, sp, #4
 8612              	.LVL1317:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 277


 8613 000e FFF7FEFF 		bl	find_volume
 8614              	.LVL1318:
4354:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(dj.obj.fs);
 8615              		.loc 1 4354 0
 8616 0012 0446     		mov	r4, r0
 8617 0014 C8B9     		cbnz	r0, .L864
4355:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
 8618              		.loc 1 4355 0
 8619 0016 4FF40070 		mov	r0, #512
 8620              	.LVL1319:
 8621 001a FFF7FEFF 		bl	ff_memalloc
 8622              	.LVL1320:
 8623 001e 0546     		mov	r5, r0
 8624 0020 D0B1     		cbz	r0, .L870
4355:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
 8625              		.loc 1 4355 0 is_stmt 0 discriminator 2
 8626 0022 039B     		ldr	r3, [sp, #12]
 8627 0024 D860     		str	r0, [r3, #12]
4356:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {				/* Follow completed */
 8628              		.loc 1 4356 0 is_stmt 1 discriminator 2
 8629 0026 0199     		ldr	r1, [sp, #4]
 8630 0028 03A8     		add	r0, sp, #12
 8631              	.LVL1321:
 8632 002a FFF7FEFF 		bl	follow_path
 8633              	.LVL1322:
4357:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {	/* It is origin directory */
 8634              		.loc 1 4357 0 discriminator 2
 8635 002e 0446     		mov	r4, r0
 8636 0030 40B9     		cbnz	r0, .L867
4358:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;
 8637              		.loc 1 4358 0
 8638 0032 9DF93B30 		ldrsb	r3, [sp, #59]
 8639 0036 002B     		cmp	r3, #0
 8640 0038 14DB     		blt	.L868
4361:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 8641              		.loc 1 4361 0
 8642 003a 1EB1     		cbz	r6, .L867
4361:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 8643              		.loc 1 4361 0 is_stmt 0 discriminator 1
 8644 003c 3146     		mov	r1, r6
 8645 003e 03A8     		add	r0, sp, #12
 8646              	.LVL1323:
 8647 0040 FFF7FEFF 		bl	get_fileinfo
 8648              	.LVL1324:
 8649              	.L867:
4364:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 8650              		.loc 1 4364 0 is_stmt 1
 8651 0044 2846     		mov	r0, r5
 8652 0046 FFF7FEFF 		bl	ff_memfree
 8653              	.LVL1325:
 8654              	.L864:
4367:Middlewares/Third_Party/FatFs/src/ff.c **** }
 8655              		.loc 1 4367 0
 8656 004a 2146     		mov	r1, r4
 8657 004c 0398     		ldr	r0, [sp, #12]
 8658 004e FFF7FEFF 		bl	unlock_fs
 8659              	.LVL1326:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 278


 8660              	.L866:
4368:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8661              		.loc 1 4368 0
 8662 0052 2046     		mov	r0, r4
 8663 0054 10B0     		add	sp, sp, #64
 8664              	.LCFI116:
 8665              		.cfi_remember_state
 8666              		.cfi_def_cfa_offset 16
 8667              		@ sp needed
 8668 0056 70BD     		pop	{r4, r5, r6, pc}
 8669              	.LVL1327:
 8670              	.L870:
 8671              	.LCFI117:
 8672              		.cfi_restore_state
4355:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
 8673              		.loc 1 4355 0 discriminator 1
 8674 0058 1121     		movs	r1, #17
 8675 005a 0398     		ldr	r0, [sp, #12]
 8676              	.LVL1328:
 8677 005c FFF7FEFF 		bl	unlock_fs
 8678              	.LVL1329:
 8679 0060 1124     		movs	r4, #17
 8680 0062 F6E7     		b	.L866
 8681              	.LVL1330:
 8682              	.L868:
4359:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {							/* Found an object */
 8683              		.loc 1 4359 0
 8684 0064 0624     		movs	r4, #6
 8685 0066 EDE7     		b	.L867
 8686              		.cfi_endproc
 8687              	.LFE198:
 8689              		.section	.text.f_getfree,"ax",%progbits
 8690              		.align	1
 8691              		.global	f_getfree
 8692              		.syntax unified
 8693              		.thumb
 8694              		.thumb_func
 8695              		.fpu fpv5-sp-d16
 8697              	f_getfree:
 8698              	.LFB199:
4382:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 8699              		.loc 1 4382 0
 8700              		.cfi_startproc
 8701              		@ args = 0, pretend = 0, frame = 32
 8702              		@ frame_needed = 0, uses_anonymous_args = 0
 8703              	.LVL1331:
 8704 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 8705              	.LCFI118:
 8706              		.cfi_def_cfa_offset 32
 8707              		.cfi_offset 4, -32
 8708              		.cfi_offset 5, -28
 8709              		.cfi_offset 6, -24
 8710              		.cfi_offset 7, -20
 8711              		.cfi_offset 8, -16
 8712              		.cfi_offset 9, -12
 8713              		.cfi_offset 10, -8
 8714              		.cfi_offset 14, -4
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 279


 8715 0004 88B0     		sub	sp, sp, #32
 8716              	.LCFI119:
 8717              		.cfi_def_cfa_offset 64
 8718 0006 0190     		str	r0, [sp, #4]
 8719 0008 8A46     		mov	r10, r1
 8720 000a 1446     		mov	r4, r2
4392:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 8721              		.loc 1 4392 0
 8722 000c 0022     		movs	r2, #0
 8723              	.LVL1332:
 8724 000e 07A9     		add	r1, sp, #28
 8725              	.LVL1333:
 8726 0010 01A8     		add	r0, sp, #4
 8727              	.LVL1334:
 8728 0012 FFF7FEFF 		bl	find_volume
 8729              	.LVL1335:
4393:Middlewares/Third_Party/FatFs/src/ff.c **** 		*fatfs = fs;				/* Return ptr to the fs object */
 8730              		.loc 1 4393 0
 8731 0016 8046     		mov	r8, r0
 8732 0018 0028     		cmp	r0, #0
 8733 001a 5AD1     		bne	.L872
4394:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* If free_clst is valid, return it without full cluster scan */
 8734              		.loc 1 4394 0
 8735 001c 079B     		ldr	r3, [sp, #28]
 8736 001e 2360     		str	r3, [r4]
4396:Middlewares/Third_Party/FatFs/src/ff.c **** 			*nclst = fs->free_clst;
 8737              		.loc 1 4396 0
 8738 0020 9A69     		ldr	r2, [r3, #24]
 8739 0022 1E6A     		ldr	r6, [r3, #32]
 8740 0024 B11E     		subs	r1, r6, #2
 8741 0026 8A42     		cmp	r2, r1
 8742 0028 08D9     		bls	.L887
 8743              	.LVL1336:
4401:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = 2; obj.fs = fs;
 8744              		.loc 1 4401 0
 8745 002a 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 8746 002c 012A     		cmp	r2, #1
 8747 002e 08D0     		beq	.L888
 8748              	.LVL1337:
4429:Middlewares/Third_Party/FatFs/src/ff.c **** 					i = 0; p = 0;
 8749              		.loc 1 4429 0
 8750 0030 D3F82C90 		ldr	r9, [r3, #44]
 8751              	.LVL1338:
4430:Middlewares/Third_Party/FatFs/src/ff.c **** 					do {
 8752              		.loc 1 4430 0
 8753 0034 0024     		movs	r4, #0
 8754              	.LVL1339:
 8755 0036 2546     		mov	r5, r4
4400:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->fs_type == FS_FAT12) {	/* FAT12: Sector unalighed FAT entries */
 8756              		.loc 1 4400 0
 8757 0038 2746     		mov	r7, r4
 8758 003a 32E0     		b	.L883
 8759              	.LVL1340:
 8760              	.L887:
4397:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 8761              		.loc 1 4397 0
 8762 003c CAF80020 		str	r2, [r10]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 280


 8763 0040 47E0     		b	.L872
 8764              	.LVL1341:
 8765              	.L888:
4402:Middlewares/Third_Party/FatFs/src/ff.c **** 				do {
 8766              		.loc 1 4402 0
 8767 0042 0293     		str	r3, [sp, #8]
 8768 0044 0224     		movs	r4, #2
 8769              	.LVL1342:
4400:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->fs_type == FS_FAT12) {	/* FAT12: Sector unalighed FAT entries */
 8770              		.loc 1 4400 0
 8771 0046 0027     		movs	r7, #0
 8772 0048 04E0     		b	.L877
 8773              	.LVL1343:
 8774              	.L876:
4408:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
 8775              		.loc 1 4408 0
 8776 004a 0134     		adds	r4, r4, #1
 8777              	.LVL1344:
 8778 004c 079B     		ldr	r3, [sp, #28]
 8779 004e 1B6A     		ldr	r3, [r3, #32]
 8780 0050 9C42     		cmp	r4, r3
 8781 0052 36D2     		bcs	.L875
 8782              	.LVL1345:
 8783              	.L877:
4404:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (stat == 0xFFFFFFFF) { res = FR_DISK_ERR; break; }
 8784              		.loc 1 4404 0
 8785 0054 2146     		mov	r1, r4
 8786 0056 02A8     		add	r0, sp, #8
 8787 0058 FFF7FEFF 		bl	get_fat
 8788              	.LVL1346:
4405:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (stat == 1) { res = FR_INT_ERR; break; }
 8789              		.loc 1 4405 0
 8790 005c B0F1FF3F 		cmp	r0, #-1
 8791 0060 2DD0     		beq	.L884
4406:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (stat == 0) nfree++;
 8792              		.loc 1 4406 0
 8793 0062 0128     		cmp	r0, #1
 8794 0064 3DD0     		beq	.L885
4407:Middlewares/Third_Party/FatFs/src/ff.c **** 				} while (++clst < fs->n_fatent);
 8795              		.loc 1 4407 0
 8796 0066 0028     		cmp	r0, #0
 8797 0068 EFD1     		bne	.L876
4407:Middlewares/Third_Party/FatFs/src/ff.c **** 				} while (++clst < fs->n_fatent);
 8798              		.loc 1 4407 0 is_stmt 0 discriminator 1
 8799 006a 0137     		adds	r7, r7, #1
 8800              	.LVL1347:
 8801 006c EDE7     		b	.L876
 8802              	.LVL1348:
 8803              	.L889:
4433:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (res != FR_OK) break;
 8804              		.loc 1 4433 0 is_stmt 1
 8805 006e 09F10105 		add	r5, r9, #1
 8806              	.LVL1349:
 8807 0072 4946     		mov	r1, r9
 8808 0074 0798     		ldr	r0, [sp, #28]
 8809 0076 FFF7FEFF 		bl	move_window
 8810              	.LVL1350:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 281


4434:Middlewares/Third_Party/FatFs/src/ff.c **** 							p = fs->win;
 8811              		.loc 1 4434 0
 8812 007a 8046     		mov	r8, r0
 8813 007c 08BB     		cbnz	r0, .L875
4435:Middlewares/Third_Party/FatFs/src/ff.c **** 							i = SS(fs);
 8814              		.loc 1 4435 0
 8815 007e 079C     		ldr	r4, [sp, #28]
 8816              	.LVL1351:
 8817 0080 3C34     		adds	r4, r4, #60
 8818              	.LVL1352:
4433:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (res != FR_OK) break;
 8819              		.loc 1 4433 0
 8820 0082 A946     		mov	r9, r5
4436:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
 8821              		.loc 1 4436 0
 8822 0084 4FF40075 		mov	r5, #512
 8823              	.LVL1353:
 8824 0088 0DE0     		b	.L878
 8825              	.LVL1354:
 8826              	.L890:
4439:Middlewares/Third_Party/FatFs/src/ff.c **** 							p += 2; i -= 2;
 8827              		.loc 1 4439 0
 8828 008a 2046     		mov	r0, r4
 8829 008c FFF7FEFF 		bl	ld_word
 8830              	.LVL1355:
 8831 0090 00B9     		cbnz	r0, .L880
4439:Middlewares/Third_Party/FatFs/src/ff.c **** 							p += 2; i -= 2;
 8832              		.loc 1 4439 0 is_stmt 0 discriminator 1
 8833 0092 0137     		adds	r7, r7, #1
 8834              	.LVL1356:
 8835              	.L880:
4440:Middlewares/Third_Party/FatFs/src/ff.c **** 						} else {
 8836              		.loc 1 4440 0 is_stmt 1
 8837 0094 0234     		adds	r4, r4, #2
 8838              	.LVL1357:
 8839 0096 023D     		subs	r5, r5, #2
 8840              	.LVL1358:
 8841 0098 01E0     		b	.L881
 8842              	.L882:
4443:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
 8843              		.loc 1 4443 0
 8844 009a 0434     		adds	r4, r4, #4
 8845              	.LVL1359:
 8846 009c 043D     		subs	r5, r5, #4
 8847              	.LVL1360:
 8848              	.L881:
4445:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 8849              		.loc 1 4445 0
 8850 009e 013E     		subs	r6, r6, #1
 8851              	.LVL1361:
 8852 00a0 0FD0     		beq	.L875
 8853              	.LVL1362:
 8854              	.L883:
4432:Middlewares/Third_Party/FatFs/src/ff.c **** 							res = move_window(fs, sect++);
 8855              		.loc 1 4432 0
 8856 00a2 002D     		cmp	r5, #0
 8857 00a4 E3D0     		beq	.L889
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 282


 8858              	.LVL1363:
 8859              	.L878:
4438:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (ld_word(p) == 0) nfree++;
 8860              		.loc 1 4438 0
 8861 00a6 079B     		ldr	r3, [sp, #28]
 8862 00a8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8863 00aa 022B     		cmp	r3, #2
 8864 00ac EDD0     		beq	.L890
4442:Middlewares/Third_Party/FatFs/src/ff.c **** 							p += 4; i -= 4;
 8865              		.loc 1 4442 0
 8866 00ae 2046     		mov	r0, r4
 8867 00b0 FFF7FEFF 		bl	ld_dword
 8868              	.LVL1364:
 8869 00b4 30F07043 		bics	r3, r0, #-268435456
 8870 00b8 EFD1     		bne	.L882
4442:Middlewares/Third_Party/FatFs/src/ff.c **** 							p += 4; i -= 4;
 8871              		.loc 1 4442 0 is_stmt 0 discriminator 1
 8872 00ba 0137     		adds	r7, r7, #1
 8873              	.LVL1365:
 8874 00bc EDE7     		b	.L882
 8875              	.LVL1366:
 8876              	.L884:
4405:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (stat == 1) { res = FR_INT_ERR; break; }
 8877              		.loc 1 4405 0 is_stmt 1
 8878 00be 4FF00108 		mov	r8, #1
 8879              	.LVL1367:
 8880              	.L875:
4448:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->free_clst = nfree;	/* Now free_clst is valid */
 8881              		.loc 1 4448 0
 8882 00c2 CAF80070 		str	r7, [r10]
4449:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->fsi_flag |= 1;		/* FSInfo is to be updated */
 8883              		.loc 1 4449 0
 8884 00c6 079B     		ldr	r3, [sp, #28]
 8885 00c8 9F61     		str	r7, [r3, #24]
4450:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 8886              		.loc 1 4450 0
 8887 00ca 1A79     		ldrb	r2, [r3, #4]	@ zero_extendqisi2
 8888 00cc 42F00102 		orr	r2, r2, #1
 8889 00d0 1A71     		strb	r2, [r3, #4]
 8890              	.LVL1368:
 8891              	.L872:
4454:Middlewares/Third_Party/FatFs/src/ff.c **** }
 8892              		.loc 1 4454 0
 8893 00d2 4146     		mov	r1, r8
 8894 00d4 0798     		ldr	r0, [sp, #28]
 8895 00d6 FFF7FEFF 		bl	unlock_fs
 8896              	.LVL1369:
4455:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8897              		.loc 1 4455 0
 8898 00da 4046     		mov	r0, r8
 8899 00dc 08B0     		add	sp, sp, #32
 8900              	.LCFI120:
 8901              		.cfi_remember_state
 8902              		.cfi_def_cfa_offset 32
 8903              		@ sp needed
 8904 00de BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 8905              	.LVL1370:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 283


 8906              	.L885:
 8907              	.LCFI121:
 8908              		.cfi_restore_state
4406:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (stat == 0) nfree++;
 8909              		.loc 1 4406 0
 8910 00e2 4FF00208 		mov	r8, #2
 8911 00e6 ECE7     		b	.L875
 8912              		.cfi_endproc
 8913              	.LFE199:
 8915              		.section	.text.f_truncate,"ax",%progbits
 8916              		.align	1
 8917              		.global	f_truncate
 8918              		.syntax unified
 8919              		.thumb
 8920              		.thumb_func
 8921              		.fpu fpv5-sp-d16
 8923              	f_truncate:
 8924              	.LFB200:
4467:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 8925              		.loc 1 4467 0
 8926              		.cfi_startproc
 8927              		@ args = 0, pretend = 0, frame = 8
 8928              		@ frame_needed = 0, uses_anonymous_args = 0
 8929              	.LVL1371:
 8930 0000 30B5     		push	{r4, r5, lr}
 8931              	.LCFI122:
 8932              		.cfi_def_cfa_offset 12
 8933              		.cfi_offset 4, -12
 8934              		.cfi_offset 5, -8
 8935              		.cfi_offset 14, -4
 8936 0002 83B0     		sub	sp, sp, #12
 8937              	.LCFI123:
 8938              		.cfi_def_cfa_offset 24
 8939 0004 0546     		mov	r5, r0
4473:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);
 8940              		.loc 1 4473 0
 8941 0006 01A9     		add	r1, sp, #4
 8942 0008 FFF7FEFF 		bl	validate
 8943              	.LVL1372:
4474:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
 8944              		.loc 1 4474 0
 8945 000c 0446     		mov	r4, r0
 8946 000e 18BB     		cbnz	r0, .L892
4474:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
 8947              		.loc 1 4474 0 is_stmt 0 discriminator 2
 8948 0010 6C7D     		ldrb	r4, [r5, #21]	@ zero_extendqisi2
 8949              	.LVL1373:
 8950 0012 0CBB     		cbnz	r4, .L892
4475:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8951              		.loc 1 4475 0 is_stmt 1
 8952 0014 2B7D     		ldrb	r3, [r5, #20]	@ zero_extendqisi2
 8953 0016 13F0020F 		tst	r3, #2
 8954 001a 24D0     		beq	.L906
4477:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr == 0) {	/* When set file size to zero, remove entire cluster chain */
 8955              		.loc 1 4477 0
 8956 001c AB69     		ldr	r3, [r5, #24]
 8957 001e EA68     		ldr	r2, [r5, #12]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 284


 8958 0020 9342     		cmp	r3, r2
 8959 0022 14D2     		bcs	.L896
4478:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = remove_chain(&fp->obj, fp->obj.sclust, 0);
 8960              		.loc 1 4478 0
 8961 0024 2BBB     		cbnz	r3, .L897
4479:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->obj.sclust = 0;
 8962              		.loc 1 4479 0
 8963 0026 0022     		movs	r2, #0
 8964 0028 A968     		ldr	r1, [r5, #8]
 8965 002a 2846     		mov	r0, r5
 8966 002c FFF7FEFF 		bl	remove_chain
 8967              	.LVL1374:
 8968 0030 0446     		mov	r4, r0
 8969              	.LVL1375:
4480:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {				/* When truncate a part of the file, remove remaining clusters */
 8970              		.loc 1 4480 0
 8971 0032 0023     		movs	r3, #0
 8972 0034 AB60     		str	r3, [r5, #8]
 8973              	.L898:
4490:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->flag |= FA_MODIFIED;
 8974              		.loc 1 4490 0
 8975 0036 AB69     		ldr	r3, [r5, #24]
 8976 0038 EB60     		str	r3, [r5, #12]
4491:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 8977              		.loc 1 4491 0
 8978 003a 2B7D     		ldrb	r3, [r5, #20]	@ zero_extendqisi2
 8979 003c 43F04003 		orr	r3, r3, #64
 8980 0040 2B75     		strb	r3, [r5, #20]
4493:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) {
 8981              		.loc 1 4493 0
 8982 0042 14B9     		cbnz	r4, .L901
4493:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) {
 8983              		.loc 1 4493 0 is_stmt 0 discriminator 1
 8984 0044 13F0800F 		tst	r3, #128
 8985 0048 2DD1     		bne	.L907
 8986              	.LVL1376:
 8987              	.L901:
4501:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 8988              		.loc 1 4501 0 is_stmt 1
 8989 004a 002C     		cmp	r4, #0
 8990 004c 3BD1     		bne	.L908
 8991              	.L896:
4504:Middlewares/Third_Party/FatFs/src/ff.c **** }
 8992              		.loc 1 4504 0
 8993 004e 2146     		mov	r1, r4
 8994 0050 0198     		ldr	r0, [sp, #4]
 8995 0052 FFF7FEFF 		bl	unlock_fs
 8996              	.LVL1377:
 8997 0056 03E0     		b	.L894
 8998              	.LVL1378:
 8999              	.L892:
4474:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
 9000              		.loc 1 4474 0 discriminator 3
 9001 0058 2146     		mov	r1, r4
 9002 005a 0198     		ldr	r0, [sp, #4]
 9003 005c FFF7FEFF 		bl	unlock_fs
 9004              	.LVL1379:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 285


 9005              	.L894:
4505:Middlewares/Third_Party/FatFs/src/ff.c **** 
 9006              		.loc 1 4505 0
 9007 0060 2046     		mov	r0, r4
 9008 0062 03B0     		add	sp, sp, #12
 9009              	.LCFI124:
 9010              		.cfi_remember_state
 9011              		.cfi_def_cfa_offset 12
 9012              		@ sp needed
 9013 0064 30BD     		pop	{r4, r5, pc}
 9014              	.LVL1380:
 9015              	.L906:
 9016              	.LCFI125:
 9017              		.cfi_restore_state
4475:Middlewares/Third_Party/FatFs/src/ff.c **** 
 9018              		.loc 1 4475 0 discriminator 1
 9019 0066 0721     		movs	r1, #7
 9020 0068 0198     		ldr	r0, [sp, #4]
 9021 006a FFF7FEFF 		bl	unlock_fs
 9022              	.LVL1381:
 9023 006e 0724     		movs	r4, #7
 9024              	.LVL1382:
 9025 0070 F6E7     		b	.L894
 9026              	.LVL1383:
 9027              	.L897:
4482:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_OK;
 9028              		.loc 1 4482 0
 9029 0072 E969     		ldr	r1, [r5, #28]
 9030 0074 2846     		mov	r0, r5
 9031 0076 FFF7FEFF 		bl	get_fat
 9032              	.LVL1384:
4484:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ncl == 1) res = FR_INT_ERR;
 9033              		.loc 1 4484 0
 9034 007a B0F1FF3F 		cmp	r0, #-1
 9035 007e 0ED0     		beq	.L909
 9036              	.L899:
 9037              	.LVL1385:
4485:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK && ncl < fs->n_fatent) {
 9038              		.loc 1 4485 0
 9039 0080 0128     		cmp	r0, #1
 9040 0082 0ED0     		beq	.L910
 9041              	.LVL1386:
 9042              	.L900:
4486:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = remove_chain(&fp->obj, ncl, fp->clust);
 9043              		.loc 1 4486 0
 9044 0084 002C     		cmp	r4, #0
 9045 0086 D6D1     		bne	.L898
4486:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = remove_chain(&fp->obj, ncl, fp->clust);
 9046              		.loc 1 4486 0 is_stmt 0 discriminator 1
 9047 0088 019B     		ldr	r3, [sp, #4]
 9048 008a 1B6A     		ldr	r3, [r3, #32]
 9049 008c 9842     		cmp	r0, r3
 9050 008e D2D2     		bcs	.L898
4487:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 9051              		.loc 1 4487 0 is_stmt 1
 9052 0090 EA69     		ldr	r2, [r5, #28]
 9053 0092 0146     		mov	r1, r0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 286


 9054 0094 2846     		mov	r0, r5
 9055              	.LVL1387:
 9056 0096 FFF7FEFF 		bl	remove_chain
 9057              	.LVL1388:
 9058 009a 0446     		mov	r4, r0
 9059              	.LVL1389:
 9060 009c CBE7     		b	.L898
 9061              	.LVL1390:
 9062              	.L909:
4484:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ncl == 1) res = FR_INT_ERR;
 9063              		.loc 1 4484 0
 9064 009e 0124     		movs	r4, #1
 9065 00a0 EEE7     		b	.L899
 9066              	.LVL1391:
 9067              	.L910:
4485:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK && ncl < fs->n_fatent) {
 9068              		.loc 1 4485 0
 9069 00a2 0224     		movs	r4, #2
 9070              	.LVL1392:
 9071 00a4 EEE7     		b	.L900
 9072              	.LVL1393:
 9073              	.L907:
4494:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_DISK_ERR;
 9074              		.loc 1 4494 0
 9075 00a6 0123     		movs	r3, #1
 9076 00a8 2A6A     		ldr	r2, [r5, #32]
 9077 00aa 05F13001 		add	r1, r5, #48
 9078 00ae 0198     		ldr	r0, [sp, #4]
 9079 00b0 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 9080 00b2 FFF7FEFF 		bl	disk_write
 9081              	.LVL1394:
 9082 00b6 20B9     		cbnz	r0, .L904
4497:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 9083              		.loc 1 4497 0
 9084 00b8 2B7D     		ldrb	r3, [r5, #20]	@ zero_extendqisi2
 9085 00ba 03F07F03 		and	r3, r3, #127
 9086 00be 2B75     		strb	r3, [r5, #20]
 9087 00c0 C3E7     		b	.L901
 9088              	.L904:
4495:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
 9089              		.loc 1 4495 0
 9090 00c2 0124     		movs	r4, #1
 9091              	.LVL1395:
 9092 00c4 C1E7     		b	.L901
 9093              	.LVL1396:
 9094              	.L908:
4501:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 9095              		.loc 1 4501 0 discriminator 1
 9096 00c6 6C75     		strb	r4, [r5, #21]
 9097 00c8 2146     		mov	r1, r4
 9098 00ca 0198     		ldr	r0, [sp, #4]
 9099 00cc FFF7FEFF 		bl	unlock_fs
 9100              	.LVL1397:
 9101 00d0 C6E7     		b	.L894
 9102              		.cfi_endproc
 9103              	.LFE200:
 9105              		.section	.text.f_unlink,"ax",%progbits
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 287


 9106              		.align	1
 9107              		.global	f_unlink
 9108              		.syntax unified
 9109              		.thumb
 9110              		.thumb_func
 9111              		.fpu fpv5-sp-d16
 9113              	f_unlink:
 9114              	.LFB201:
4517:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 9115              		.loc 1 4517 0
 9116              		.cfi_startproc
 9117              		@ args = 0, pretend = 0, frame = 120
 9118              		@ frame_needed = 0, uses_anonymous_args = 0
 9119              	.LVL1398:
 9120 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 9121              	.LCFI126:
 9122              		.cfi_def_cfa_offset 20
 9123              		.cfi_offset 4, -20
 9124              		.cfi_offset 5, -16
 9125              		.cfi_offset 6, -12
 9126              		.cfi_offset 7, -8
 9127              		.cfi_offset 14, -4
 9128 0002 9FB0     		sub	sp, sp, #124
 9129              	.LCFI127:
 9130              		.cfi_def_cfa_offset 144
 9131 0004 0190     		str	r0, [sp, #4]
 9132              	.LVL1399:
4529:Middlewares/Third_Party/FatFs/src/ff.c **** 	dj.obj.fs = fs;
 9133              		.loc 1 4529 0
 9134 0006 0222     		movs	r2, #2
 9135 0008 03A9     		add	r1, sp, #12
 9136 000a 01A8     		add	r0, sp, #4
 9137              	.LVL1400:
 9138 000c FFF7FEFF 		bl	find_volume
 9139              	.LVL1401:
4530:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 9140              		.loc 1 4530 0
 9141 0010 039B     		ldr	r3, [sp, #12]
 9142 0012 1193     		str	r3, [sp, #68]
4531:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
 9143              		.loc 1 4531 0
 9144 0014 0446     		mov	r4, r0
 9145 0016 0028     		cmp	r0, #0
 9146 0018 55D1     		bne	.L912
4532:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);		/* Follow the file path */
 9147              		.loc 1 4532 0
 9148 001a 4FF40070 		mov	r0, #512
 9149              	.LVL1402:
 9150 001e FFF7FEFF 		bl	ff_memalloc
 9151              	.LVL1403:
 9152 0022 0546     		mov	r5, r0
 9153 0024 0028     		cmp	r0, #0
 9154 0026 3FD0     		beq	.L929
4532:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);		/* Follow the file path */
 9155              		.loc 1 4532 0 is_stmt 0 discriminator 2
 9156 0028 039B     		ldr	r3, [sp, #12]
 9157 002a D860     		str	r0, [r3, #12]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 288


4533:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_RPATH && res == FR_OK && (dj.fn[NSFLAG] & NS_DOT)) {
 9158              		.loc 1 4533 0 is_stmt 1 discriminator 2
 9159 002c 0199     		ldr	r1, [sp, #4]
 9160 002e 11A8     		add	r0, sp, #68
 9161              	.LVL1404:
 9162 0030 FFF7FEFF 		bl	follow_path
 9163              	.LVL1405:
4534:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_INVALID_NAME;			/* Cannot remove dot entry */
 9164              		.loc 1 4534 0 discriminator 2
 9165 0034 0446     		mov	r4, r0
 9166 0036 28B9     		cbnz	r0, .L915
4534:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_INVALID_NAME;			/* Cannot remove dot entry */
 9167              		.loc 1 4534 0 is_stmt 0 discriminator 1
 9168 0038 9DF87330 		ldrb	r3, [sp, #115]	@ zero_extendqisi2
 9169 003c 13F0200F 		tst	r3, #32
 9170 0040 00D0     		beq	.L915
4535:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 9171              		.loc 1 4535 0 is_stmt 1
 9172 0042 0624     		movs	r4, #6
 9173              	.L915:
 9174              	.LVL1406:
4538:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 9175              		.loc 1 4538 0
 9176 0044 24B9     		cbnz	r4, .L916
4538:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 9177              		.loc 1 4538 0 is_stmt 0 discriminator 1
 9178 0046 0221     		movs	r1, #2
 9179 0048 11A8     		add	r0, sp, #68
 9180 004a FFF7FEFF 		bl	chk_lock
 9181              	.LVL1407:
 9182 004e 0446     		mov	r4, r0
 9183              	.LVL1408:
 9184              	.L916:
4540:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {
 9185              		.loc 1 4540 0 is_stmt 1
 9186 0050 B4BB     		cbnz	r4, .L917
4541:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;		/* Cannot remove the origin directory */
 9187              		.loc 1 4541 0
 9188 0052 9DF97330 		ldrsb	r3, [sp, #115]
 9189 0056 002B     		cmp	r3, #0
 9190 0058 2CDB     		blt	.L923
4544:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_DENIED;		/* Cannot remove R/O object */
 9191              		.loc 1 4544 0
 9192 005a 9DF84A30 		ldrb	r3, [sp, #74]	@ zero_extendqisi2
 9193 005e 13F0010F 		tst	r3, #1
 9194 0062 29D1     		bne	.L924
 9195              	.LVL1409:
 9196              	.L918:
4548:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 9197              		.loc 1 4548 0
 9198 0064 54BB     		cbnz	r4, .L925
4558:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 9199              		.loc 1 4558 0
 9200 0066 039F     		ldr	r7, [sp, #12]
 9201 0068 1999     		ldr	r1, [sp, #100]
 9202 006a 3846     		mov	r0, r7
 9203 006c FFF7FEFF 		bl	ld_clust
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 289


 9204              	.LVL1410:
 9205 0070 0646     		mov	r6, r0
 9206              	.LVL1411:
4560:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH != 0
 9207              		.loc 1 4560 0
 9208 0072 9DF84A30 		ldrb	r3, [sp, #74]	@ zero_extendqisi2
 9209 0076 13F0100F 		tst	r3, #16
 9210 007a 20D0     		beq	.L919
4562:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = FR_DENIED;
 9211              		.loc 1 4562 0
 9212 007c FB69     		ldr	r3, [r7, #28]
 9213 007e 9842     		cmp	r0, r3
 9214 0080 28D0     		beq	.L926
4567:Middlewares/Third_Party/FatFs/src/ff.c **** 						sdj.obj.sclust = dclst;
 9215              		.loc 1 4567 0
 9216 0082 0497     		str	r7, [sp, #16]
4568:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 9217              		.loc 1 4568 0
 9218 0084 0690     		str	r0, [sp, #24]
4575:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (res == FR_OK) {
 9219              		.loc 1 4575 0
 9220 0086 0021     		movs	r1, #0
 9221 0088 04A8     		add	r0, sp, #16
 9222              	.LVL1412:
 9223 008a FFF7FEFF 		bl	dir_sdi
 9224              	.LVL1413:
4576:Middlewares/Third_Party/FatFs/src/ff.c **** 							res = dir_read(&sdj, 0);			/* Read an item */
 9225              		.loc 1 4576 0
 9226 008e 0446     		mov	r4, r0
 9227 0090 A8B9     		cbnz	r0, .L919
4577:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (res == FR_OK) res = FR_DENIED;	/* Not empty? */
 9228              		.loc 1 4577 0
 9229 0092 0021     		movs	r1, #0
 9230 0094 04A8     		add	r0, sp, #16
 9231              	.LVL1414:
 9232 0096 FFF7FEFF 		bl	dir_read
 9233              	.LVL1415:
4578:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (res == FR_NO_FILE) res = FR_OK;	/* Empty? */
 9234              		.loc 1 4578 0
 9235 009a 0346     		mov	r3, r0
 9236 009c 00B9     		cbnz	r0, .L920
 9237 009e 0723     		movs	r3, #7
 9238              	.L920:
 9239              	.LVL1416:
4579:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
 9240              		.loc 1 4579 0
 9241 00a0 042B     		cmp	r3, #4
 9242 00a2 0CD0     		beq	.L919
 9243 00a4 1C46     		mov	r4, r3
 9244 00a6 0AE0     		b	.L919
 9245              	.LVL1417:
 9246              	.L929:
4532:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);		/* Follow the file path */
 9247              		.loc 1 4532 0 discriminator 1
 9248 00a8 1121     		movs	r1, #17
 9249 00aa 0398     		ldr	r0, [sp, #12]
 9250              	.LVL1418:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 290


 9251 00ac FFF7FEFF 		bl	unlock_fs
 9252              	.LVL1419:
 9253 00b0 1124     		movs	r4, #17
 9254 00b2 0CE0     		b	.L914
 9255              	.LVL1420:
 9256              	.L923:
4542:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
 9257              		.loc 1 4542 0
 9258 00b4 0624     		movs	r4, #6
 9259              	.LVL1421:
 9260 00b6 D5E7     		b	.L918
 9261              	.LVL1422:
 9262              	.L924:
4545:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 9263              		.loc 1 4545 0
 9264 00b8 0724     		movs	r4, #7
 9265              	.LVL1423:
 9266 00ba D3E7     		b	.L918
 9267              	.LVL1424:
 9268              	.L925:
4520:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
 9269              		.loc 1 4520 0
 9270 00bc 0026     		movs	r6, #0
 9271              	.LVL1425:
 9272              	.L919:
4584:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_remove(&dj);			/* Remove the directory entry */
 9273              		.loc 1 4584 0
 9274 00be 5CB1     		cbz	r4, .L930
 9275              	.LVL1426:
 9276              	.L917:
4596:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 9277              		.loc 1 4596 0
 9278 00c0 2846     		mov	r0, r5
 9279 00c2 FFF7FEFF 		bl	ff_memfree
 9280              	.LVL1427:
 9281              	.L912:
4599:Middlewares/Third_Party/FatFs/src/ff.c **** }
 9282              		.loc 1 4599 0
 9283 00c6 2146     		mov	r1, r4
 9284 00c8 0398     		ldr	r0, [sp, #12]
 9285 00ca FFF7FEFF 		bl	unlock_fs
 9286              	.LVL1428:
 9287              	.L914:
4600:Middlewares/Third_Party/FatFs/src/ff.c **** 
 9288              		.loc 1 4600 0
 9289 00ce 2046     		mov	r0, r4
 9290 00d0 1FB0     		add	sp, sp, #124
 9291              	.LCFI128:
 9292              		.cfi_remember_state
 9293              		.cfi_def_cfa_offset 20
 9294              		@ sp needed
 9295 00d2 F0BD     		pop	{r4, r5, r6, r7, pc}
 9296              	.LVL1429:
 9297              	.L926:
 9298              	.LCFI129:
 9299              		.cfi_restore_state
4563:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 291


 9300              		.loc 1 4563 0
 9301 00d4 0724     		movs	r4, #7
 9302              	.LVL1430:
 9303 00d6 F2E7     		b	.L919
 9304              	.LVL1431:
 9305              	.L930:
4585:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK && dclst) {	/* Remove the cluster chain if exist */
 9306              		.loc 1 4585 0
 9307 00d8 11A8     		add	r0, sp, #68
 9308 00da FFF7FEFF 		bl	dir_remove
 9309              	.LVL1432:
4586:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 9310              		.loc 1 4586 0
 9311 00de 0446     		mov	r4, r0
 9312 00e0 B0FA80F0 		clz	r0, r0
 9313              	.LVL1433:
 9314 00e4 4009     		lsrs	r0, r0, #5
 9315 00e6 002E     		cmp	r6, #0
 9316 00e8 08BF     		it	eq
 9317 00ea 0020     		moveq	r0, #0
 9318 00ec 30B9     		cbnz	r0, .L931
 9319              	.L921:
 9320              	.LVL1434:
4593:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 9321              		.loc 1 4593 0
 9322 00ee 002C     		cmp	r4, #0
 9323 00f0 E6D1     		bne	.L917
4593:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 9324              		.loc 1 4593 0 is_stmt 0 discriminator 1
 9325 00f2 0398     		ldr	r0, [sp, #12]
 9326 00f4 FFF7FEFF 		bl	sync_fs
 9327              	.LVL1435:
 9328 00f8 0446     		mov	r4, r0
 9329              	.LVL1436:
 9330 00fa E1E7     		b	.L917
 9331              	.LVL1437:
 9332              	.L931:
4590:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 9333              		.loc 1 4590 0 is_stmt 1
 9334 00fc 0022     		movs	r2, #0
 9335 00fe 3146     		mov	r1, r6
 9336 0100 11A8     		add	r0, sp, #68
 9337 0102 FFF7FEFF 		bl	remove_chain
 9338              	.LVL1438:
 9339 0106 0446     		mov	r4, r0
 9340              	.LVL1439:
 9341 0108 F1E7     		b	.L921
 9342              		.cfi_endproc
 9343              	.LFE201:
 9345              		.section	.text.f_mkdir,"ax",%progbits
 9346              		.align	1
 9347              		.global	f_mkdir
 9348              		.syntax unified
 9349              		.thumb
 9350              		.thumb_func
 9351              		.fpu fpv5-sp-d16
 9353              	f_mkdir:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 292


 9354              	.LFB202:
4612:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 9355              		.loc 1 4612 0
 9356              		.cfi_startproc
 9357              		@ args = 0, pretend = 0, frame = 64
 9358              		@ frame_needed = 0, uses_anonymous_args = 0
 9359              	.LVL1440:
 9360 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 9361              	.LCFI130:
 9362              		.cfi_def_cfa_offset 36
 9363              		.cfi_offset 4, -36
 9364              		.cfi_offset 5, -32
 9365              		.cfi_offset 6, -28
 9366              		.cfi_offset 7, -24
 9367              		.cfi_offset 8, -20
 9368              		.cfi_offset 9, -16
 9369              		.cfi_offset 10, -12
 9370              		.cfi_offset 11, -8
 9371              		.cfi_offset 14, -4
 9372 0004 91B0     		sub	sp, sp, #68
 9373              	.LCFI131:
 9374              		.cfi_def_cfa_offset 104
 9375 0006 0190     		str	r0, [sp, #4]
4623:Middlewares/Third_Party/FatFs/src/ff.c **** 	dj.obj.fs = fs;
 9376              		.loc 1 4623 0
 9377 0008 0222     		movs	r2, #2
 9378 000a 02A9     		add	r1, sp, #8
 9379 000c 01A8     		add	r0, sp, #4
 9380              	.LVL1441:
 9381 000e FFF7FEFF 		bl	find_volume
 9382              	.LVL1442:
4624:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 9383              		.loc 1 4624 0
 9384 0012 029B     		ldr	r3, [sp, #8]
 9385 0014 0393     		str	r3, [sp, #12]
4625:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
 9386              		.loc 1 4625 0
 9387 0016 0446     		mov	r4, r0
 9388 0018 B0B9     		cbnz	r0, .L933
4626:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);			/* Follow the file path */
 9389              		.loc 1 4626 0
 9390 001a 4FF40070 		mov	r0, #512
 9391              	.LVL1443:
 9392 001e FFF7FEFF 		bl	ff_memalloc
 9393              	.LVL1444:
 9394 0022 0546     		mov	r5, r0
 9395 0024 C0B1     		cbz	r0, .L956
4626:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);			/* Follow the file path */
 9396              		.loc 1 4626 0 is_stmt 0 discriminator 2
 9397 0026 029B     		ldr	r3, [sp, #8]
 9398 0028 D860     		str	r0, [r3, #12]
4627:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) res = FR_EXIST;		/* Any object with same name is already existing */
 9399              		.loc 1 4627 0 is_stmt 1 discriminator 2
 9400 002a 0199     		ldr	r1, [sp, #4]
 9401 002c 03A8     		add	r0, sp, #12
 9402              	.LVL1445:
 9403 002e FFF7FEFF 		bl	follow_path
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 293


 9404              	.LVL1446:
4628:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_RPATH && res == FR_NO_FILE && (dj.fn[NSFLAG] & NS_DOT)) {
 9405              		.loc 1 4628 0 discriminator 2
 9406 0032 0646     		mov	r6, r0
 9407 0034 00B9     		cbnz	r0, .L936
4628:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_RPATH && res == FR_NO_FILE && (dj.fn[NSFLAG] & NS_DOT)) {
 9408              		.loc 1 4628 0 is_stmt 0
 9409 0036 0826     		movs	r6, #8
 9410              	.L936:
 9411              	.LVL1447:
4629:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_INVALID_NAME;
 9412              		.loc 1 4629 0 is_stmt 1
 9413 0038 042E     		cmp	r6, #4
 9414 003a 13D0     		beq	.L957
 9415              	.LVL1448:
 9416              	.L937:
4632:Middlewares/Third_Party/FatFs/src/ff.c **** 			dcl = create_chain(&dj.obj, 0);		/* Allocate a cluster for the new directory table */
 9417              		.loc 1 4632 0
 9418 003c 042E     		cmp	r6, #4
 9419 003e 18D0     		beq	.L958
 9420              	.LVL1449:
 9421              	.L938:
4693:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 9422              		.loc 1 4693 0
 9423 0040 2846     		mov	r0, r5
 9424 0042 FFF7FEFF 		bl	ff_memfree
 9425              	.LVL1450:
 9426 0046 3446     		mov	r4, r6
 9427              	.LVL1451:
 9428              	.L933:
4696:Middlewares/Third_Party/FatFs/src/ff.c **** }
 9429              		.loc 1 4696 0
 9430 0048 2146     		mov	r1, r4
 9431 004a 0298     		ldr	r0, [sp, #8]
 9432 004c FFF7FEFF 		bl	unlock_fs
 9433              	.LVL1452:
 9434              	.L935:
4697:Middlewares/Third_Party/FatFs/src/ff.c **** 
 9435              		.loc 1 4697 0
 9436 0050 2046     		mov	r0, r4
 9437 0052 11B0     		add	sp, sp, #68
 9438              	.LCFI132:
 9439              		.cfi_remember_state
 9440              		.cfi_def_cfa_offset 36
 9441              		@ sp needed
 9442 0054 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 9443              	.LVL1453:
 9444              	.L956:
 9445              	.LCFI133:
 9446              		.cfi_restore_state
4626:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);			/* Follow the file path */
 9447              		.loc 1 4626 0 discriminator 1
 9448 0058 1121     		movs	r1, #17
 9449 005a 0298     		ldr	r0, [sp, #8]
 9450              	.LVL1454:
 9451 005c FFF7FEFF 		bl	unlock_fs
 9452              	.LVL1455:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 294


 9453 0060 1124     		movs	r4, #17
 9454 0062 F5E7     		b	.L935
 9455              	.LVL1456:
 9456              	.L957:
4629:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_INVALID_NAME;
 9457              		.loc 1 4629 0 discriminator 1
 9458 0064 9DF83B30 		ldrb	r3, [sp, #59]	@ zero_extendqisi2
 9459 0068 13F0200F 		tst	r3, #32
 9460 006c E6D0     		beq	.L937
4630:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 9461              		.loc 1 4630 0
 9462 006e 0626     		movs	r6, #6
 9463              	.LVL1457:
 9464 0070 E4E7     		b	.L937
 9465              	.LVL1458:
 9466              	.L958:
4633:Middlewares/Third_Party/FatFs/src/ff.c **** 			dj.obj.objsize = (DWORD)fs->csize * SS(fs);
 9467              		.loc 1 4633 0
 9468 0072 0021     		movs	r1, #0
 9469 0074 03A8     		add	r0, sp, #12
 9470 0076 FFF7FEFF 		bl	create_chain
 9471              	.LVL1459:
4634:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_OK;
 9472              		.loc 1 4634 0
 9473 007a 029A     		ldr	r2, [sp, #8]
 9474 007c 5389     		ldrh	r3, [r2, #10]
 9475 007e 5B02     		lsls	r3, r3, #9
 9476 0080 0693     		str	r3, [sp, #24]
 9477              	.LVL1460:
4636:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dcl == 1) res = FR_INT_ERR;
 9478              		.loc 1 4636 0
 9479 0082 0746     		mov	r7, r0
 9480 0084 00B9     		cbnz	r0, .L939
 9481 0086 0724     		movs	r4, #7
 9482              	.L939:
 9483              	.LVL1461:
4637:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dcl == 0xFFFFFFFF) res = FR_DISK_ERR;
 9484              		.loc 1 4637 0
 9485 0088 012F     		cmp	r7, #1
 9486 008a 20D0     		beq	.L959
 9487              	.LVL1462:
 9488              	.L940:
4638:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) res = sync_window(fs);	/* Flush FAT */
 9489              		.loc 1 4638 0
 9490 008c B7F1FF3F 		cmp	r7, #-1
 9491 0090 1FD0     		beq	.L960
 9492              	.LVL1463:
 9493              	.L941:
4639:Middlewares/Third_Party/FatFs/src/ff.c **** 			tm = GET_FATTIME();
 9494              		.loc 1 4639 0
 9495 0092 04B3     		cbz	r4, .L961
 9496              	.LVL1464:
 9497              	.L942:
4640:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {					/* Initialize the new directory table */
 9498              		.loc 1 4640 0
 9499 0094 FFF7FEFF 		bl	get_fattime
 9500              	.LVL1465:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 295


 9501 0098 0090     		str	r0, [sp]
 9502              	.LVL1466:
4641:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc = clust2sect(fs, dcl);
 9503              		.loc 1 4641 0
 9504 009a 0CB3     		cbz	r4, .L962
 9505              	.LVL1467:
 9506              	.L943:
4664:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_register(&dj);	/* Register the object to the directoy */
 9507              		.loc 1 4664 0
 9508 009c 002C     		cmp	r4, #0
 9509 009e 76D0     		beq	.L963
 9510              	.L947:
4667:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 9511              		.loc 1 4667 0
 9512 00a0 002C     		cmp	r4, #0
 9513 00a2 79D1     		bne	.L948
4680:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dir + DIR_ModTime, tm);	/* Created time */
 9514              		.loc 1 4680 0
 9515 00a4 0B9C     		ldr	r4, [sp, #44]
 9516              	.LVL1468:
4681:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fs, dir, dcl);				/* Table start cluster */
 9517              		.loc 1 4681 0
 9518 00a6 0099     		ldr	r1, [sp]
 9519 00a8 04F11600 		add	r0, r4, #22
 9520 00ac FFF7FEFF 		bl	st_dword
 9521              	.LVL1469:
4682:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir[DIR_Attr] = AM_DIR;				/* Attribute */
 9522              		.loc 1 4682 0
 9523 00b0 3A46     		mov	r2, r7
 9524 00b2 2146     		mov	r1, r4
 9525 00b4 0298     		ldr	r0, [sp, #8]
 9526 00b6 FFF7FEFF 		bl	st_clust
 9527              	.LVL1470:
4683:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->wflag = 1;
 9528              		.loc 1 4683 0
 9529 00ba 1023     		movs	r3, #16
 9530 00bc E372     		strb	r3, [r4, #11]
4684:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 9531              		.loc 1 4684 0
 9532 00be 0122     		movs	r2, #1
 9533 00c0 029B     		ldr	r3, [sp, #8]
 9534 00c2 DA70     		strb	r2, [r3, #3]
4687:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 9535              		.loc 1 4687 0
 9536 00c4 0298     		ldr	r0, [sp, #8]
 9537 00c6 FFF7FEFF 		bl	sync_fs
 9538              	.LVL1471:
 9539 00ca 0646     		mov	r6, r0
 9540              	.LVL1472:
 9541 00cc B8E7     		b	.L938
 9542              	.LVL1473:
 9543              	.L959:
4637:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dcl == 0xFFFFFFFF) res = FR_DISK_ERR;
 9544              		.loc 1 4637 0
 9545 00ce 0224     		movs	r4, #2
 9546              	.LVL1474:
 9547 00d0 DCE7     		b	.L940
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 296


 9548              	.LVL1475:
 9549              	.L960:
4638:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) res = sync_window(fs);	/* Flush FAT */
 9550              		.loc 1 4638 0
 9551 00d2 0124     		movs	r4, #1
 9552              	.LVL1476:
 9553 00d4 DDE7     		b	.L941
 9554              	.LVL1477:
 9555              	.L961:
4639:Middlewares/Third_Party/FatFs/src/ff.c **** 			tm = GET_FATTIME();
 9556              		.loc 1 4639 0 discriminator 1
 9557 00d6 1046     		mov	r0, r2
 9558              	.LVL1478:
 9559 00d8 FFF7FEFF 		bl	sync_window
 9560              	.LVL1479:
 9561 00dc 0446     		mov	r4, r0
 9562              	.LVL1480:
 9563 00de D9E7     		b	.L942
 9564              	.LVL1481:
 9565              	.L962:
4642:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir = fs->win;
 9566              		.loc 1 4642 0
 9567 00e0 DDF80890 		ldr	r9, [sp, #8]
 9568 00e4 3946     		mov	r1, r7
 9569 00e6 4846     		mov	r0, r9
 9570              	.LVL1482:
 9571 00e8 FFF7FEFF 		bl	clust2sect
 9572              	.LVL1483:
 9573 00ec 0646     		mov	r6, r0
 9574              	.LVL1484:
4643:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_set(dir, 0, SS(fs));
 9575              		.loc 1 4643 0
 9576 00ee 09F13C08 		add	r8, r9, #60
 9577              	.LVL1485:
4644:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!_FS_EXFAT || fs->fs_type != FS_EXFAT) {
 9578              		.loc 1 4644 0
 9579 00f2 4FF40072 		mov	r2, #512
 9580 00f6 0021     		movs	r1, #0
 9581 00f8 4046     		mov	r0, r8
 9582              	.LVL1486:
 9583 00fa FFF7FEFF 		bl	mem_set
 9584              	.LVL1487:
4646:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir[DIR_Name] = '.';
 9585              		.loc 1 4646 0
 9586 00fe 0B22     		movs	r2, #11
 9587 0100 2021     		movs	r1, #32
 9588 0102 4046     		mov	r0, r8
 9589 0104 FFF7FEFF 		bl	mem_set
 9590              	.LVL1488:
4647:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir[DIR_Attr] = AM_DIR;
 9591              		.loc 1 4647 0
 9592 0108 4FF02E0B 		mov	fp, #46
 9593 010c 89F83CB0 		strb	fp, [r9, #60]
4648:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dir + DIR_ModTime, tm);
 9594              		.loc 1 4648 0
 9595 0110 1023     		movs	r3, #16
 9596 0112 89F84730 		strb	r3, [r9, #71]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 297


4649:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fs, dir, dcl);
 9597              		.loc 1 4649 0
 9598 0116 0099     		ldr	r1, [sp]
 9599 0118 09F15200 		add	r0, r9, #82
 9600 011c FFF7FEFF 		bl	st_dword
 9601              	.LVL1489:
4650:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(dir + SZDIRE, dir, SZDIRE); 	/* Create ".." entry */
 9602              		.loc 1 4650 0
 9603 0120 3A46     		mov	r2, r7
 9604 0122 4146     		mov	r1, r8
 9605 0124 0298     		ldr	r0, [sp, #8]
 9606 0126 FFF7FEFF 		bl	st_clust
 9607              	.LVL1490:
4651:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir[SZDIRE + 1] = '.'; pcl = dj.obj.sclust;
 9608              		.loc 1 4651 0
 9609 012a 09F15C0A 		add	r10, r9, #92
 9610 012e 2022     		movs	r2, #32
 9611 0130 4146     		mov	r1, r8
 9612 0132 5046     		mov	r0, r10
 9613 0134 FFF7FEFF 		bl	mem_cpy
 9614              	.LVL1491:
4652:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (fs->fs_type == FS_FAT32 && pcl == fs->dirbase) pcl = 0;
 9615              		.loc 1 4652 0
 9616 0138 89F85DB0 		strb	fp, [r9, #93]
 9617 013c 059A     		ldr	r2, [sp, #20]
 9618              	.LVL1492:
4653:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fs, dir + SZDIRE, pcl);
 9619              		.loc 1 4653 0
 9620 013e 0298     		ldr	r0, [sp, #8]
 9621 0140 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 9622 0142 032B     		cmp	r3, #3
 9623 0144 1ED0     		beq	.L964
 9624              	.LVL1493:
 9625              	.L944:
4654:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 9626              		.loc 1 4654 0
 9627 0146 5146     		mov	r1, r10
 9628 0148 FFF7FEFF 		bl	st_clust
 9629              	.LVL1494:
4656:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->winsect = dsc++;
 9630              		.loc 1 4656 0
 9631 014c 029B     		ldr	r3, [sp, #8]
 9632 014e B3F80A90 		ldrh	r9, [r3, #10]
 9633              	.LVL1495:
 9634              	.L945:
4656:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->winsect = dsc++;
 9635              		.loc 1 4656 0 is_stmt 0 discriminator 1
 9636 0152 B9F1000F 		cmp	r9, #0
 9637 0156 A1D0     		beq	.L943
4657:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->wflag = 1;
 9638              		.loc 1 4657 0 is_stmt 1
 9639 0158 029B     		ldr	r3, [sp, #8]
 9640 015a 06F1010B 		add	fp, r6, #1
 9641              	.LVL1496:
 9642 015e 9E63     		str	r6, [r3, #56]
4658:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = sync_window(fs);
 9643              		.loc 1 4658 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 298


 9644 0160 0122     		movs	r2, #1
 9645 0162 DA70     		strb	r2, [r3, #3]
4659:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res != FR_OK) break;
 9646              		.loc 1 4659 0
 9647 0164 0298     		ldr	r0, [sp, #8]
 9648 0166 FFF7FEFF 		bl	sync_window
 9649              	.LVL1497:
4660:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_set(dir, 0, SS(fs));
 9650              		.loc 1 4660 0
 9651 016a 0446     		mov	r4, r0
 9652 016c 0028     		cmp	r0, #0
 9653 016e 95D1     		bne	.L943
4661:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 9654              		.loc 1 4661 0 discriminator 2
 9655 0170 4FF40072 		mov	r2, #512
 9656 0174 0021     		movs	r1, #0
 9657 0176 4046     		mov	r0, r8
 9658              	.LVL1498:
 9659 0178 FFF7FEFF 		bl	mem_set
 9660              	.LVL1499:
4656:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->winsect = dsc++;
 9661              		.loc 1 4656 0 discriminator 2
 9662 017c 09F1FF39 		add	r9, r9, #-1
 9663              	.LVL1500:
4657:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->wflag = 1;
 9664              		.loc 1 4657 0 discriminator 2
 9665 0180 5E46     		mov	r6, fp
 9666 0182 E6E7     		b	.L945
 9667              	.LVL1501:
 9668              	.L964:
4653:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fs, dir + SZDIRE, pcl);
 9669              		.loc 1 4653 0 discriminator 1
 9670 0184 036B     		ldr	r3, [r0, #48]
 9671 0186 9A42     		cmp	r2, r3
 9672 0188 DDD1     		bne	.L944
4653:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fs, dir + SZDIRE, pcl);
 9673              		.loc 1 4653 0 is_stmt 0
 9674 018a 0022     		movs	r2, #0
 9675              	.LVL1502:
 9676 018c DBE7     		b	.L944
 9677              	.LVL1503:
 9678              	.L963:
4665:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 9679              		.loc 1 4665 0 is_stmt 1
 9680 018e 03A8     		add	r0, sp, #12
 9681 0190 FFF7FEFF 		bl	dir_register
 9682              	.LVL1504:
 9683 0194 0446     		mov	r4, r0
 9684              	.LVL1505:
 9685 0196 83E7     		b	.L947
 9686              	.L948:
4690:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 9687              		.loc 1 4690 0
 9688 0198 0022     		movs	r2, #0
 9689 019a 3946     		mov	r1, r7
 9690 019c 03A8     		add	r0, sp, #12
 9691 019e FFF7FEFF 		bl	remove_chain
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 299


 9692              	.LVL1506:
 9693 01a2 2646     		mov	r6, r4
 9694 01a4 4CE7     		b	.L938
 9695              		.cfi_endproc
 9696              	.LFE202:
 9698              		.section	.text.f_rename,"ax",%progbits
 9699              		.align	1
 9700              		.global	f_rename
 9701              		.syntax unified
 9702              		.thumb
 9703              		.thumb_func
 9704              		.fpu fpv5-sp-d16
 9706              	f_rename:
 9707              	.LFB203:
4710:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 9708              		.loc 1 4710 0
 9709              		.cfi_startproc
 9710              		@ args = 0, pretend = 0, frame = 144
 9711              		@ frame_needed = 0, uses_anonymous_args = 0
 9712              	.LVL1507:
 9713 0000 70B5     		push	{r4, r5, r6, lr}
 9714              	.LCFI134:
 9715              		.cfi_def_cfa_offset 16
 9716              		.cfi_offset 4, -16
 9717              		.cfi_offset 5, -12
 9718              		.cfi_offset 6, -8
 9719              		.cfi_offset 14, -4
 9720 0002 A4B0     		sub	sp, sp, #144
 9721              	.LCFI135:
 9722              		.cfi_def_cfa_offset 160
 9723 0004 0190     		str	r0, [sp, #4]
 9724 0006 24A8     		add	r0, sp, #144
 9725              	.LVL1508:
 9726 0008 40F8901D 		str	r1, [r0, #-144]!
4719:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path_old, &fs, FA_WRITE);	/* Get logical drive of the old object */
 9727              		.loc 1 4719 0
 9728 000c FFF7FEFF 		bl	get_ldnumber
 9729              	.LVL1509:
4720:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 9730              		.loc 1 4720 0
 9731 0010 0222     		movs	r2, #2
 9732 0012 09A9     		add	r1, sp, #36
 9733 0014 01A8     		add	r0, sp, #4
 9734 0016 FFF7FEFF 		bl	find_volume
 9735              	.LVL1510:
4721:Middlewares/Third_Party/FatFs/src/ff.c **** 		djo.obj.fs = fs;
 9736              		.loc 1 4721 0
 9737 001a 0446     		mov	r4, r0
 9738 001c F8B9     		cbnz	r0, .L966
4722:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
 9739              		.loc 1 4722 0
 9740 001e 099B     		ldr	r3, [sp, #36]
 9741 0020 1793     		str	r3, [sp, #92]
4723:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&djo, path_old);		/* Check old object */
 9742              		.loc 1 4723 0
 9743 0022 4FF40070 		mov	r0, #512
 9744              	.LVL1511:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 300


 9745 0026 FFF7FEFF 		bl	ff_memalloc
 9746              	.LVL1512:
 9747 002a 0546     		mov	r5, r0
 9748 002c F0B1     		cbz	r0, .L979
4723:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&djo, path_old);		/* Check old object */
 9749              		.loc 1 4723 0 is_stmt 0 discriminator 2
 9750 002e 099B     		ldr	r3, [sp, #36]
 9751 0030 D860     		str	r0, [r3, #12]
4724:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK && (djo.fn[NSFLAG] & (NS_DOT | NS_NONAME))) res = FR_INVALID_NAME;	/* Check vali
 9752              		.loc 1 4724 0 is_stmt 1 discriminator 2
 9753 0032 0199     		ldr	r1, [sp, #4]
 9754 0034 17A8     		add	r0, sp, #92
 9755              	.LVL1513:
 9756 0036 FFF7FEFF 		bl	follow_path
 9757              	.LVL1514:
4725:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 9758              		.loc 1 4725 0 discriminator 2
 9759 003a 0446     		mov	r4, r0
 9760 003c 28B9     		cbnz	r0, .L969
4725:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 9761              		.loc 1 4725 0 is_stmt 0 discriminator 1
 9762 003e 9DF88B30 		ldrb	r3, [sp, #139]	@ zero_extendqisi2
 9763 0042 13F0A00F 		tst	r3, #160
 9764 0046 00D0     		beq	.L969
4725:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 9765              		.loc 1 4725 0
 9766 0048 0624     		movs	r4, #6
 9767              	.L969:
 9768              	.LVL1515:
4727:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = chk_lock(&djo, 2);
 9769              		.loc 1 4727 0 is_stmt 1
 9770 004a 24B9     		cbnz	r4, .L970
4728:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 9771              		.loc 1 4728 0
 9772 004c 0221     		movs	r1, #2
 9773 004e 17A8     		add	r0, sp, #92
 9774 0050 FFF7FEFF 		bl	chk_lock
 9775              	.LVL1516:
 9776 0054 0446     		mov	r4, r0
 9777              	.LVL1517:
 9778              	.L970:
4731:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 9779              		.loc 1 4731 0
 9780 0056 7CB1     		cbz	r4, .L980
 9781              	.LVL1518:
 9782              	.L971:
4796:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 9783              		.loc 1 4796 0
 9784 0058 2846     		mov	r0, r5
 9785 005a FFF7FEFF 		bl	ff_memfree
 9786              	.LVL1519:
 9787              	.L966:
4799:Middlewares/Third_Party/FatFs/src/ff.c **** }
 9788              		.loc 1 4799 0
 9789 005e 2146     		mov	r1, r4
 9790 0060 0998     		ldr	r0, [sp, #36]
 9791 0062 FFF7FEFF 		bl	unlock_fs
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 301


 9792              	.LVL1520:
 9793              	.L968:
4800:Middlewares/Third_Party/FatFs/src/ff.c **** 
 9794              		.loc 1 4800 0
 9795 0066 2046     		mov	r0, r4
 9796 0068 24B0     		add	sp, sp, #144
 9797              	.LCFI136:
 9798              		.cfi_remember_state
 9799              		.cfi_def_cfa_offset 16
 9800              		@ sp needed
 9801 006a 70BD     		pop	{r4, r5, r6, pc}
 9802              	.LVL1521:
 9803              	.L979:
 9804              	.LCFI137:
 9805              		.cfi_restore_state
4723:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&djo, path_old);		/* Check old object */
 9806              		.loc 1 4723 0 discriminator 1
 9807 006c 1121     		movs	r1, #17
 9808 006e 0998     		ldr	r0, [sp, #36]
 9809              	.LVL1522:
 9810 0070 FFF7FEFF 		bl	unlock_fs
 9811              	.LVL1523:
 9812 0074 1124     		movs	r4, #17
 9813 0076 F6E7     		b	.L968
 9814              	.LVL1524:
 9815              	.L980:
4758:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_cpy(&djn, &djo, sizeof (DIR));		/* Duplicate the directory object */
 9816              		.loc 1 4758 0
 9817 0078 1522     		movs	r2, #21
 9818 007a 1F99     		ldr	r1, [sp, #124]
 9819 007c 0B31     		adds	r1, r1, #11
 9820 007e 03A8     		add	r0, sp, #12
 9821 0080 FFF7FEFF 		bl	mem_cpy
 9822              	.LVL1525:
4759:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = follow_path(&djn, path_new);		/* Make sure if new object name is not in use */
 9823              		.loc 1 4759 0
 9824 0084 3422     		movs	r2, #52
 9825 0086 17A9     		add	r1, sp, #92
 9826 0088 0AA8     		add	r0, sp, #40
 9827 008a FFF7FEFF 		bl	mem_cpy
 9828              	.LVL1526:
4760:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) {						/* Is new name already in use by any other object? */
 9829              		.loc 1 4760 0
 9830 008e 0099     		ldr	r1, [sp]
 9831 0090 0AA8     		add	r0, sp, #40
 9832 0092 FFF7FEFF 		bl	follow_path
 9833              	.LVL1527:
4761:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = (djn.obj.sclust == djo.obj.sclust && djn.dptr == djo.dptr) ? FR_NO_FILE : FR_EXIST;
 9834              		.loc 1 4761 0
 9835 0096 0446     		mov	r4, r0
 9836 0098 20B9     		cbnz	r0, .L972
4762:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 9837              		.loc 1 4762 0
 9838 009a 199B     		ldr	r3, [sp, #100]
 9839 009c 0C9A     		ldr	r2, [sp, #48]
 9840 009e 9A42     		cmp	r2, r3
 9841 00a0 0FD0     		beq	.L981
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 302


 9842 00a2 0824     		movs	r4, #8
 9843              	.L972:
 9844              	.LVL1528:
4764:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = dir_register(&djn);			/* Register the new entry */
 9845              		.loc 1 4764 0
 9846 00a4 042C     		cmp	r4, #4
 9847 00a6 14D0     		beq	.L982
 9848              	.LVL1529:
 9849              	.L973:
4788:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_remove(&djo);		/* Remove old entry */
 9850              		.loc 1 4788 0
 9851 00a8 002C     		cmp	r4, #0
 9852 00aa D5D1     		bne	.L971
4789:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) {
 9853              		.loc 1 4789 0
 9854 00ac 17A8     		add	r0, sp, #92
 9855 00ae FFF7FEFF 		bl	dir_remove
 9856              	.LVL1530:
4790:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = sync_fs(fs);
 9857              		.loc 1 4790 0
 9858 00b2 0446     		mov	r4, r0
 9859 00b4 0028     		cmp	r0, #0
 9860 00b6 CFD1     		bne	.L971
4791:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 9861              		.loc 1 4791 0
 9862 00b8 0998     		ldr	r0, [sp, #36]
 9863              	.LVL1531:
 9864 00ba FFF7FEFF 		bl	sync_fs
 9865              	.LVL1532:
 9866 00be 0446     		mov	r4, r0
 9867              	.LVL1533:
 9868 00c0 CAE7     		b	.L971
 9869              	.LVL1534:
 9870              	.L981:
4762:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 9871              		.loc 1 4762 0 discriminator 1
 9872 00c2 1C9B     		ldr	r3, [sp, #112]
 9873 00c4 0F9A     		ldr	r2, [sp, #60]
 9874 00c6 9A42     		cmp	r2, r3
 9875 00c8 01D0     		beq	.L976
4762:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 9876              		.loc 1 4762 0 is_stmt 0
 9877 00ca 0824     		movs	r4, #8
 9878 00cc EAE7     		b	.L972
 9879              	.L976:
 9880 00ce 0424     		movs	r4, #4
 9881 00d0 E8E7     		b	.L972
 9882              	.LVL1535:
 9883              	.L982:
4765:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res == FR_OK) {
 9884              		.loc 1 4765 0 is_stmt 1
 9885 00d2 0AA8     		add	r0, sp, #40
 9886 00d4 FFF7FEFF 		bl	dir_register
 9887              	.LVL1536:
4766:Middlewares/Third_Party/FatFs/src/ff.c **** 						dir = djn.dir;					/* Copy information about object except name */
 9888              		.loc 1 4766 0
 9889 00d8 0446     		mov	r4, r0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 303


 9890 00da 0028     		cmp	r0, #0
 9891 00dc E4D1     		bne	.L973
4767:Middlewares/Third_Party/FatFs/src/ff.c **** 						mem_cpy(dir + 13, buf + 2, 19);
 9892              		.loc 1 4767 0
 9893 00de 129E     		ldr	r6, [sp, #72]
 9894              	.LVL1537:
4768:Middlewares/Third_Party/FatFs/src/ff.c **** 						dir[DIR_Attr] = buf[0] | AM_ARC;
 9895              		.loc 1 4768 0
 9896 00e0 1322     		movs	r2, #19
 9897 00e2 0DF10E01 		add	r1, sp, #14
 9898 00e6 06F10D00 		add	r0, r6, #13
 9899              	.LVL1538:
 9900 00ea FFF7FEFF 		bl	mem_cpy
 9901              	.LVL1539:
4769:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->wflag = 1;
 9902              		.loc 1 4769 0
 9903 00ee 9DF80C30 		ldrb	r3, [sp, #12]	@ zero_extendqisi2
 9904 00f2 43F02003 		orr	r3, r3, #32
 9905 00f6 F372     		strb	r3, [r6, #11]
4770:Middlewares/Third_Party/FatFs/src/ff.c **** 						if ((dir[DIR_Attr] & AM_DIR) && djo.obj.sclust != djn.obj.sclust) {	/* Update .. entry in the
 9906              		.loc 1 4770 0
 9907 00f8 0122     		movs	r2, #1
 9908 00fa 099B     		ldr	r3, [sp, #36]
 9909 00fc DA70     		strb	r2, [r3, #3]
4771:Middlewares/Third_Party/FatFs/src/ff.c **** 							dw = clust2sect(fs, ld_clust(fs, dir));
 9910              		.loc 1 4771 0
 9911 00fe F37A     		ldrb	r3, [r6, #11]	@ zero_extendqisi2
 9912 0100 13F0100F 		tst	r3, #16
 9913 0104 D0D0     		beq	.L973
4771:Middlewares/Third_Party/FatFs/src/ff.c **** 							dw = clust2sect(fs, ld_clust(fs, dir));
 9914              		.loc 1 4771 0 is_stmt 0 discriminator 1
 9915 0106 0C9B     		ldr	r3, [sp, #48]
 9916 0108 199A     		ldr	r2, [sp, #100]
 9917 010a 9A42     		cmp	r2, r3
 9918 010c CCD0     		beq	.L973
4772:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (!dw) {
 9919              		.loc 1 4772 0 is_stmt 1
 9920 010e 099C     		ldr	r4, [sp, #36]
 9921 0110 3146     		mov	r1, r6
 9922 0112 2046     		mov	r0, r4
 9923 0114 FFF7FEFF 		bl	ld_clust
 9924              	.LVL1540:
 9925 0118 0146     		mov	r1, r0
 9926 011a 2046     		mov	r0, r4
 9927 011c FFF7FEFF 		bl	clust2sect
 9928              	.LVL1541:
4773:Middlewares/Third_Party/FatFs/src/ff.c **** 								res = FR_INT_ERR;
 9929              		.loc 1 4773 0
 9930 0120 0146     		mov	r1, r0
 9931 0122 08B9     		cbnz	r0, .L983
4774:Middlewares/Third_Party/FatFs/src/ff.c **** 							} else {
 9932              		.loc 1 4774 0
 9933 0124 0224     		movs	r4, #2
 9934 0126 BFE7     		b	.L973
 9935              	.L983:
4777:Middlewares/Third_Party/FatFs/src/ff.c **** 								dir = fs->win + SZDIRE * 1;	/* Ptr to .. entry */
 9936              		.loc 1 4777 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 304


 9937 0128 2046     		mov	r0, r4
 9938              	.LVL1542:
 9939 012a FFF7FEFF 		bl	move_window
 9940              	.LVL1543:
4778:Middlewares/Third_Party/FatFs/src/ff.c **** 								if (res == FR_OK && dir[1] == '.') {
 9941              		.loc 1 4778 0
 9942 012e 099B     		ldr	r3, [sp, #36]
 9943 0130 03F15C01 		add	r1, r3, #92
 9944              	.LVL1544:
4779:Middlewares/Third_Party/FatFs/src/ff.c **** 									st_clust(fs, dir, djn.obj.sclust);
 9945              		.loc 1 4779 0
 9946 0134 0446     		mov	r4, r0
 9947 0136 0028     		cmp	r0, #0
 9948 0138 B6D1     		bne	.L973
4779:Middlewares/Third_Party/FatFs/src/ff.c **** 									st_clust(fs, dir, djn.obj.sclust);
 9949              		.loc 1 4779 0 is_stmt 0 discriminator 1
 9950 013a 93F85D20 		ldrb	r2, [r3, #93]	@ zero_extendqisi2
 9951 013e 2E2A     		cmp	r2, #46
 9952 0140 B2D1     		bne	.L973
4780:Middlewares/Third_Party/FatFs/src/ff.c **** 									fs->wflag = 1;
 9953              		.loc 1 4780 0 is_stmt 1
 9954 0142 0C9A     		ldr	r2, [sp, #48]
 9955 0144 1846     		mov	r0, r3
 9956              	.LVL1545:
 9957 0146 FFF7FEFF 		bl	st_clust
 9958              	.LVL1546:
4781:Middlewares/Third_Party/FatFs/src/ff.c **** 								}
 9959              		.loc 1 4781 0
 9960 014a 0122     		movs	r2, #1
 9961 014c 099B     		ldr	r3, [sp, #36]
 9962 014e DA70     		strb	r2, [r3, #3]
 9963 0150 AAE7     		b	.L973
 9964              		.cfi_endproc
 9965              	.LFE203:
 9967              		.section	.text.f_mkfs,"ax",%progbits
 9968              		.align	1
 9969              		.global	f_mkfs
 9970              		.syntax unified
 9971              		.thumb
 9972              		.thumb_func
 9973              		.fpu fpv5-sp-d16
 9975              	f_mkfs:
 9976              	.LFB204:
5297:Middlewares/Third_Party/FatFs/src/ff.c **** 	const UINT n_fats = 1;		/* Number of FATs for FAT12/16/32 volume (1 or 2) */
 9977              		.loc 1 5297 0
 9978              		.cfi_startproc
 9979              		@ args = 4, pretend = 0, frame = 40
 9980              		@ frame_needed = 0, uses_anonymous_args = 0
 9981              	.LVL1547:
 9982 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 9983              	.LCFI138:
 9984              		.cfi_def_cfa_offset 36
 9985              		.cfi_offset 4, -36
 9986              		.cfi_offset 5, -32
 9987              		.cfi_offset 6, -28
 9988              		.cfi_offset 7, -24
 9989              		.cfi_offset 8, -20
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 305


 9990              		.cfi_offset 9, -16
 9991              		.cfi_offset 10, -12
 9992              		.cfi_offset 11, -8
 9993              		.cfi_offset 14, -4
 9994 0004 8BB0     		sub	sp, sp, #44
 9995              	.LCFI139:
 9996              		.cfi_def_cfa_offset 80
 9997 0006 0AAC     		add	r4, sp, #40
 9998 0008 44F80C0D 		str	r0, [r4, #-12]!
 9999 000c 0E46     		mov	r6, r1
 10000 000e 1746     		mov	r7, r2
 10001 0010 1D46     		mov	r5, r3
 10002              	.LVL1548:
5316:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
 10003              		.loc 1 5316 0
 10004 0012 2046     		mov	r0, r4
 10005              	.LVL1549:
 10006 0014 FFF7FEFF 		bl	get_ldnumber
 10007              	.LVL1550:
5317:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (FatFs[vol]) FatFs[vol]->fs_type = 0;	/* Clear the volume */
 10008              		.loc 1 5317 0
 10009 0018 0028     		cmp	r0, #0
 10010 001a C0F2E182 		blt	.L1027
5318:Middlewares/Third_Party/FatFs/src/ff.c **** 	pdrv = LD2PD(vol);	/* Physical drive */
 10011              		.loc 1 5318 0
 10012 001e 9D4B     		ldr	r3, .L1071
 10013 0020 53F82030 		ldr	r3, [r3, r0, lsl #2]
 10014 0024 0BB1     		cbz	r3, .L986
5318:Middlewares/Third_Party/FatFs/src/ff.c **** 	pdrv = LD2PD(vol);	/* Physical drive */
 10015              		.loc 1 5318 0 is_stmt 0 discriminator 1
 10016 0026 0022     		movs	r2, #0
 10017 0028 1A70     		strb	r2, [r3]
 10018              	.L986:
5319:Middlewares/Third_Party/FatFs/src/ff.c **** 	part = LD2PT(vol);	/* Partition (0:create as new, 1-4:get from partition table) */
 10019              		.loc 1 5319 0 is_stmt 1
 10020 002a C4B2     		uxtb	r4, r0
 10021              	.LVL1551:
5323:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_NOINIT) return FR_NOT_READY;
 10022              		.loc 1 5323 0
 10023 002c 2046     		mov	r0, r4
 10024              	.LVL1552:
 10025 002e FFF7FEFF 		bl	disk_initialize
 10026              	.LVL1553:
5324:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_PROTECT) return FR_WRITE_PROTECTED;
 10027              		.loc 1 5324 0
 10028 0032 10F0010F 		tst	r0, #1
 10029 0036 01D0     		beq	.L1065
 10030 0038 0320     		movs	r0, #3
 10031              	.LVL1554:
 10032 003a D2E2     		b	.L985
 10033              	.LVL1555:
 10034              	.L1065:
5325:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (disk_ioctl(pdrv, GET_BLOCK_SIZE, &sz_blk) != RES_OK || !sz_blk || sz_blk > 32768 || (sz_blk & 
 10035              		.loc 1 5325 0
 10036 003c 10F0040F 		tst	r0, #4
 10037 0040 01D0     		beq	.L1066
 10038 0042 0A20     		movs	r0, #10
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 306


 10039              	.LVL1556:
 10040 0044 CDE2     		b	.L985
 10041              	.LVL1557:
 10042              	.L1066:
5326:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_SS != _MIN_SS		/* Get sector size of the medium if variable sector size cfg. */
 10043              		.loc 1 5326 0
 10044 0046 09AA     		add	r2, sp, #36
 10045 0048 0321     		movs	r1, #3
 10046 004a 2046     		mov	r0, r4
 10047              	.LVL1558:
 10048 004c FFF7FEFF 		bl	disk_ioctl
 10049              	.LVL1559:
 10050 0050 38B9     		cbnz	r0, .L987
5326:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_SS != _MIN_SS		/* Get sector size of the medium if variable sector size cfg. */
 10051              		.loc 1 5326 0 is_stmt 0 discriminator 2
 10052 0052 099B     		ldr	r3, [sp, #36]
 10053 0054 2BB1     		cbz	r3, .L987
5326:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_SS != _MIN_SS		/* Get sector size of the medium if variable sector size cfg. */
 10054              		.loc 1 5326 0 discriminator 4
 10055 0056 B3F5004F 		cmp	r3, #32768
 10056 005a 02D8     		bhi	.L987
5326:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_SS != _MIN_SS		/* Get sector size of the medium if variable sector size cfg. */
 10057              		.loc 1 5326 0 discriminator 6
 10058 005c 5A1E     		subs	r2, r3, #1
 10059 005e 1342     		tst	r3, r2
 10060 0060 01D0     		beq	.L988
 10061              	.L987:
5326:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_SS != _MIN_SS		/* Get sector size of the medium if variable sector size cfg. */
 10062              		.loc 1 5326 0 discriminator 7
 10063 0062 0123     		movs	r3, #1
 10064 0064 0993     		str	r3, [sp, #36]
 10065              	.L988:
 10066              	.LVL1560:
5333:Middlewares/Third_Party/FatFs/src/ff.c **** 	au /= ss;	/* Cluster size in unit of sector */
 10067              		.loc 1 5333 0 is_stmt 1
 10068 0066 27B1     		cbz	r7, .L989
5333:Middlewares/Third_Party/FatFs/src/ff.c **** 	au /= ss;	/* Cluster size in unit of sector */
 10069              		.loc 1 5333 0 is_stmt 0 discriminator 1
 10070 0068 B7F5007F 		cmp	r7, #512
 10071 006c 01D2     		bcs	.L989
5333:Middlewares/Third_Party/FatFs/src/ff.c **** 	au /= ss;	/* Cluster size in unit of sector */
 10072              		.loc 1 5333 0
 10073 006e 1320     		movs	r0, #19
 10074 0070 B7E2     		b	.L985
 10075              	.L989:
5333:Middlewares/Third_Party/FatFs/src/ff.c **** 	au /= ss;	/* Cluster size in unit of sector */
 10076              		.loc 1 5333 0 discriminator 4
 10077 0072 B7F1807F 		cmp	r7, #16777216
 10078 0076 01D9     		bls	.L1067
5333:Middlewares/Third_Party/FatFs/src/ff.c **** 	au /= ss;	/* Cluster size in unit of sector */
 10079              		.loc 1 5333 0
 10080 0078 1320     		movs	r0, #19
 10081 007a B2E2     		b	.L985
 10082              	.L1067:
5333:Middlewares/Third_Party/FatFs/src/ff.c **** 	au /= ss;	/* Cluster size in unit of sector */
 10083              		.loc 1 5333 0 discriminator 6
 10084 007c 7B1E     		subs	r3, r7, #1
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 307


 10085 007e 1F42     		tst	r7, r3
 10086 0080 01D0     		beq	.L1068
5333:Middlewares/Third_Party/FatFs/src/ff.c **** 	au /= ss;	/* Cluster size in unit of sector */
 10087              		.loc 1 5333 0
 10088 0082 1320     		movs	r0, #19
 10089 0084 ADE2     		b	.L985
 10090              	.L1068:
5334:Middlewares/Third_Party/FatFs/src/ff.c **** 
 10091              		.loc 1 5334 0 is_stmt 1
 10092 0086 4FEA5729 		lsr	r9, r7, #9
 10093              	.LVL1561:
5338:Middlewares/Third_Party/FatFs/src/ff.c **** 	szb_buf = sz_buf * ss;	/* Size of working buffer (byte) */
 10094              		.loc 1 5338 0
 10095 008a 149B     		ldr	r3, [sp, #80]
 10096 008c 5B0A     		lsrs	r3, r3, #9
 10097 008e 0593     		str	r3, [sp, #20]
 10098              	.LVL1562:
5339:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!szb_buf) return FR_MKFS_ABORTED;
 10099              		.loc 1 5339 0
 10100 0090 DFF804A2 		ldr	r10, .L1071+4
 10101 0094 149B     		ldr	r3, [sp, #80]
 10102              	.LVL1563:
 10103 0096 03EA0A0A 		and	r10, r3, r10
 10104              	.LVL1564:
5340:Middlewares/Third_Party/FatFs/src/ff.c **** 
 10105              		.loc 1 5340 0
 10106 009a BAF1000F 		cmp	r10, #0
 10107 009e 01D1     		bne	.L1069
 10108 00a0 0E20     		movs	r0, #14
 10109 00a2 9EE2     		b	.L985
 10110              	.L1069:
5353:Middlewares/Third_Party/FatFs/src/ff.c **** 		b_vol = (opt & FM_SFD) ? 0 : 63;		/* Volume start sector */
 10111              		.loc 1 5353 0
 10112 00a4 08AA     		add	r2, sp, #32
 10113 00a6 0121     		movs	r1, #1
 10114 00a8 2046     		mov	r0, r4
 10115 00aa FFF7FEFF 		bl	disk_ioctl
 10116              	.LVL1565:
 10117 00ae 0028     		cmp	r0, #0
 10118 00b0 40F09A82 		bne	.L1034
5354:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (sz_vol < b_vol) return FR_MKFS_ABORTED;
 10119              		.loc 1 5354 0
 10120 00b4 16F00803 		ands	r3, r6, #8
 10121 00b8 0693     		str	r3, [sp, #24]
 10122 00ba 0CD0     		beq	.L1035
 10123 00bc 4FF00008 		mov	r8, #0
 10124              	.L990:
 10125              	.LVL1566:
5355:Middlewares/Third_Party/FatFs/src/ff.c **** 		sz_vol -= b_vol;						/* Volume size */
 10126              		.loc 1 5355 0 discriminator 4
 10127 00c0 089A     		ldr	r2, [sp, #32]
 10128 00c2 9045     		cmp	r8, r2
 10129 00c4 00F29282 		bhi	.L1036
5356:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 10130              		.loc 1 5356 0
 10131 00c8 A2EB0802 		sub	r2, r2, r8
 10132 00cc 0892     		str	r2, [sp, #32]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 308


5358:Middlewares/Third_Party/FatFs/src/ff.c **** 
 10133              		.loc 1 5358 0
 10134 00ce 7F2A     		cmp	r2, #127
 10135 00d0 04D8     		bhi	.L1070
 10136 00d2 0E20     		movs	r0, #14
 10137 00d4 85E2     		b	.L985
 10138              	.LVL1567:
 10139              	.L1035:
5354:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (sz_vol < b_vol) return FR_MKFS_ABORTED;
 10140              		.loc 1 5354 0
 10141 00d6 4FF03F08 		mov	r8, #63
 10142 00da F1E7     		b	.L990
 10143              	.LVL1568:
 10144              	.L1070:
5367:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (opt & FM_FAT32) {	/* FAT32 possible? */
 10145              		.loc 1 5367 0
 10146 00dc B9F1800F 		cmp	r9, #128
 10147 00e0 00F28682 		bhi	.L1038
5368:Middlewares/Third_Party/FatFs/src/ff.c **** 			if ((opt & FM_ANY) == FM_FAT32 || !(opt & FM_FAT)) {	/* FAT32 only or no-FAT? */
 10148              		.loc 1 5368 0
 10149 00e4 16F00201 		ands	r1, r6, #2
 10150 00e8 06D0     		beq	.L991
5369:Middlewares/Third_Party/FatFs/src/ff.c **** 				fmt = FS_FAT32; break;
 10151              		.loc 1 5369 0
 10152 00ea 06F00703 		and	r3, r6, #7
 10153 00ee 022B     		cmp	r3, #2
 10154 00f0 69D0     		beq	.L1039
5369:Middlewares/Third_Party/FatFs/src/ff.c **** 				fmt = FS_FAT32; break;
 10155              		.loc 1 5369 0 is_stmt 0 discriminator 1
 10156 00f2 16F0010F 		tst	r6, #1
 10157 00f6 6AD0     		beq	.L1040
 10158              	.L991:
5373:Middlewares/Third_Party/FatFs/src/ff.c **** 		fmt = FS_FAT16;
 10159              		.loc 1 5373 0 is_stmt 1
 10160 00f8 16F0010F 		tst	r6, #1
 10161 00fc 00F07A82 		beq	.L1041
5374:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (0);
 10162              		.loc 1 5374 0
 10163 0100 0227     		movs	r7, #2
 10164 0102 4846     		mov	r0, r9
 10165 0104 0191     		str	r1, [sp, #4]
 10166              	.LVL1569:
 10167              	.L993:
5544:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!pau) {	/* au auto-selection */
 10168              		.loc 1 5544 0
 10169 0106 032F     		cmp	r7, #3
 10170 0108 70D1     		bne	.L994
5545:Middlewares/Third_Party/FatFs/src/ff.c **** 					n = sz_vol / 0x20000;	/* Volume size in unit of 128KS */
 10171              		.loc 1 5545 0
 10172 010a 0028     		cmp	r0, #0
 10173 010c 6AD1     		bne	.L1042
5546:Middlewares/Third_Party/FatFs/src/ff.c **** 					for (i = 0, pau = 1; cst32[i] && cst32[i] <= n; i++, pau <<= 1) ;	/* Get from table */
 10174              		.loc 1 5546 0
 10175 010e 4FEA524C 		lsr	ip, r2, #17
 10176              	.LVL1570:
5547:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10177              		.loc 1 5547 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 309


 10178 0112 0023     		movs	r3, #0
 10179 0114 0126     		movs	r6, #1
 10180 0116 0199     		ldr	r1, [sp, #4]
 10181              	.LVL1571:
 10182              	.L996:
5547:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10183              		.loc 1 5547 0 is_stmt 0 discriminator 1
 10184 0118 DFF880E1 		ldr	lr, .L1071+8
 10185 011c 3EF813E0 		ldrh	lr, [lr, r3, lsl #1]
 10186 0120 BEF1000F 		cmp	lr, #0
 10187 0124 60D0     		beq	.L1061
5547:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10188              		.loc 1 5547 0 discriminator 3
 10189 0126 F445     		cmp	ip, lr
 10190 0128 59D2     		bcs	.L997
 10191 012a 0191     		str	r1, [sp, #4]
 10192              	.LVL1572:
 10193              	.L995:
5549:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_fat = (n_clst * 4 + 8 + ss - 1) / ss;	/* FAT size [sector] */
 10194              		.loc 1 5549 0 is_stmt 1
 10195 012c B2FBF6FE 		udiv	lr, r2, r6
 10196              	.LVL1573:
5550:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_rsv = 32;	/* Number of reserved sectors */
 10197              		.loc 1 5550 0
 10198 0130 0EF10203 		add	r3, lr, #2
 10199 0134 9B00     		lsls	r3, r3, #2
 10200 0136 03F2FF13 		addw	r3, r3, #511
 10201 013a 5B0A     		lsrs	r3, r3, #9
 10202 013c 0293     		str	r3, [sp, #8]
 10203              	.LVL1574:
5553:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {				/* FAT12/16 volume */
 10204              		.loc 1 5553 0
 10205 013e DFF860C1 		ldr	ip, .L1071+12
 10206 0142 F444     		add	ip, ip, lr
 10207 0144 DFF85CE1 		ldr	lr, .L1071+16
 10208              	.LVL1575:
 10209 0148 F445     		cmp	ip, lr
 10210 014a 00F25582 		bhi	.L1043
5552:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (n_clst <= MAX_FAT16 || n_clst > MAX_FAT32) return FR_MKFS_ABORTED;
 10211              		.loc 1 5552 0
 10212 014e 0023     		movs	r3, #0
 10213              	.LVL1576:
 10214 0150 0493     		str	r3, [sp, #16]
5551:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_dir = 0;		/* No static directory */
 10215              		.loc 1 5551 0
 10216 0152 4FF02009 		mov	r9, #32
 10217              	.LVL1577:
 10218              	.L998:
5570:Middlewares/Third_Party/FatFs/src/ff.c **** 			b_data = b_fat + sz_fat * n_fats + sz_dir;	/* Data base */
 10219              		.loc 1 5570 0
 10220 0156 09EB0803 		add	r3, r9, r8
 10221 015a 0393     		str	r3, [sp, #12]
 10222              	.LVL1578:
5571:Middlewares/Third_Party/FatFs/src/ff.c **** 
 10223              		.loc 1 5571 0
 10224 015c 0299     		ldr	r1, [sp, #8]
 10225 015e 01EB030E 		add	lr, r1, r3
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 310


 10226 0162 049B     		ldr	r3, [sp, #16]
 10227              	.LVL1579:
 10228 0164 9E44     		add	lr, lr, r3
 10229              	.LVL1580:
5574:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {		/* FAT32: Move FAT base */
 10230              		.loc 1 5574 0
 10231 0166 DDF824B0 		ldr	fp, [sp, #36]
 10232 016a 0EEB0B0C 		add	ip, lr, fp
 10233 016e 0CF1FF3C 		add	ip, ip, #-1
 10234 0172 CBF1000B 		rsb	fp, fp, #0
 10235 0176 0CEA0B0C 		and	ip, ip, fp
 10236 017a ACEB0E0C 		sub	ip, ip, lr
 10237              	.LVL1581:
5575:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_rsv += n; b_fat += n;
 10238              		.loc 1 5575 0
 10239 017e 032F     		cmp	r7, #3
 10240 0180 63D1     		bne	.L1004
5576:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {					/* FAT12/16: Expand FAT size */
 10241              		.loc 1 5576 0
 10242 0182 E144     		add	r9, r9, ip
 10243              	.LVL1582:
 10244 0184 039B     		ldr	r3, [sp, #12]
 10245 0186 6344     		add	r3, r3, ip
 10246 0188 0393     		str	r3, [sp, #12]
 10247              	.LVL1583:
 10248              	.L1005:
5582:Middlewares/Third_Party/FatFs/src/ff.c **** 			n_clst = (sz_vol - sz_rsv - sz_fat * n_fats - sz_dir) / pau;
 10249              		.loc 1 5582 0
 10250 018a 0EEB061E 		add	lr, lr, r6, lsl #4
 10251              	.LVL1584:
 10252 018e AEEB080E 		sub	lr, lr, r8
 10253 0192 7245     		cmp	r2, lr
 10254 0194 C0F03282 		bcc	.L1045
5583:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {
 10255              		.loc 1 5583 0
 10256 0198 A2EB090B 		sub	fp, r2, r9
 10257 019c 029B     		ldr	r3, [sp, #8]
 10258 019e ABEB030B 		sub	fp, fp, r3
 10259 01a2 049B     		ldr	r3, [sp, #16]
 10260 01a4 ABEB030B 		sub	fp, fp, r3
 10261 01a8 BBFBF6FB 		udiv	fp, fp, r6
 10262              	.LVL1585:
5584:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (n_clst <= MAX_FAT16) {	/* Too few clusters for FAT32 */
 10263              		.loc 1 5584 0
 10264 01ac 032F     		cmp	r7, #3
 10265 01ae 50D1     		bne	.L1006
5585:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!au && (au = pau / 2) != 0) continue;	/* Adjust cluster size and retry */
 10266              		.loc 1 5585 0
 10267 01b0 4FF6F57E 		movw	lr, #65525
 10268 01b4 F345     		cmp	fp, lr
 10269 01b6 4CD8     		bhi	.L1006
5586:Middlewares/Third_Party/FatFs/src/ff.c **** 					return FR_MKFS_ABORTED;
 10270              		.loc 1 5586 0
 10271 01b8 0028     		cmp	r0, #0
 10272 01ba 40F02182 		bne	.L1046
 10273              	.LVL1586:
5586:Middlewares/Third_Party/FatFs/src/ff.c **** 					return FR_MKFS_ABORTED;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 311


 10274              		.loc 1 5586 0 is_stmt 0 discriminator 1
 10275 01be 7308     		lsrs	r3, r6, #1
 10276              	.LVL1587:
 10277 01c0 0BD1     		bne	.L1007
5587:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10278              		.loc 1 5587 0 is_stmt 1
 10279 01c2 0E20     		movs	r0, #14
 10280 01c4 0DE2     		b	.L985
 10281              	.LVL1588:
 10282              	.L1039:
5370:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 10283              		.loc 1 5370 0
 10284 01c6 0327     		movs	r7, #3
 10285 01c8 4846     		mov	r0, r9
 10286 01ca 0191     		str	r1, [sp, #4]
 10287 01cc 9BE7     		b	.L993
 10288              	.L1040:
 10289 01ce 0327     		movs	r7, #3
 10290 01d0 4846     		mov	r0, r9
 10291 01d2 0191     		str	r1, [sp, #4]
 10292 01d4 97E7     		b	.L993
 10293              	.LVL1589:
 10294              	.L1047:
 10295 01d6 0346     		mov	r3, r0
5596:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 10296              		.loc 1 5596 0
 10297 01d8 0327     		movs	r7, #3
 10298              	.LVL1590:
 10299              	.L1007:
 10300 01da 1846     		mov	r0, r3
 10301 01dc 93E7     		b	.L993
 10302              	.LVL1591:
 10303              	.L997:
5547:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10304              		.loc 1 5547 0 discriminator 4
 10305 01de 0133     		adds	r3, r3, #1
 10306              	.LVL1592:
 10307 01e0 7600     		lsls	r6, r6, #1
 10308              	.LVL1593:
 10309 01e2 99E7     		b	.L996
 10310              	.LVL1594:
 10311              	.L1042:
5542:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Pre-determine number of clusters and FAT sub-type */
 10312              		.loc 1 5542 0
 10313 01e4 0646     		mov	r6, r0
 10314 01e6 A1E7     		b	.L995
 10315              	.LVL1595:
 10316              	.L1061:
 10317 01e8 0191     		str	r1, [sp, #4]
 10318 01ea 9FE7     		b	.L995
 10319              	.LVL1596:
 10320              	.L994:
5555:Middlewares/Third_Party/FatFs/src/ff.c **** 					n = sz_vol / 0x1000;	/* Volume size in unit of 4KS */
 10321              		.loc 1 5555 0
 10322 01ec 10BB     		cbnz	r0, .L1044
5556:Middlewares/Third_Party/FatFs/src/ff.c **** 					for (i = 0, pau = 1; cst[i] && cst[i] <= n; i++, pau <<= 1) ;	/* Get from table */
 10323              		.loc 1 5556 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 312


 10324 01ee 4FEA123C 		lsr	ip, r2, #12
 10325              	.LVL1597:
5557:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10326              		.loc 1 5557 0
 10327 01f2 0023     		movs	r3, #0
 10328 01f4 0126     		movs	r6, #1
 10329 01f6 0199     		ldr	r1, [sp, #4]
 10330              	.LVL1598:
 10331              	.L1000:
5557:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10332              		.loc 1 5557 0 is_stmt 0 discriminator 1
 10333 01f8 DFF8ACE0 		ldr	lr, .L1071+20
 10334 01fc 3EF813E0 		ldrh	lr, [lr, r3, lsl #1]
 10335 0200 BEF1000F 		cmp	lr, #0
 10336 0204 18D0     		beq	.L1062
5557:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10337              		.loc 1 5557 0 discriminator 3
 10338 0206 F445     		cmp	ip, lr
 10339 0208 11D2     		bcs	.L1001
 10340 020a 0191     		str	r1, [sp, #4]
 10341              	.LVL1599:
 10342              	.L999:
5559:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (n_clst > MAX_FAT12) {
 10343              		.loc 1 5559 0 is_stmt 1
 10344 020c B2FBF6F3 		udiv	r3, r2, r6
 10345              	.LVL1600:
5560:Middlewares/Third_Party/FatFs/src/ff.c **** 					n = n_clst * 2 + 4;		/* FAT size [byte] */
 10346              		.loc 1 5560 0
 10347 0210 40F6F57E 		movw	lr, #4085
 10348 0214 7345     		cmp	r3, lr
 10349 0216 11D9     		bls	.L1002
5561:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
 10350              		.loc 1 5561 0
 10351 0218 0233     		adds	r3, r3, #2
 10352              	.LVL1601:
 10353 021a 5B00     		lsls	r3, r3, #1
 10354              	.LVL1602:
 10355              	.L1003:
5566:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_rsv = 1;						/* Number of reserved sectors */
 10356              		.loc 1 5566 0
 10357 021c 03F2FF13 		addw	r3, r3, #511
 10358              	.LVL1603:
 10359 0220 5B0A     		lsrs	r3, r3, #9
 10360              	.LVL1604:
 10361 0222 0293     		str	r3, [sp, #8]
 10362              	.LVL1605:
5568:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 10363              		.loc 1 5568 0
 10364 0224 2023     		movs	r3, #32
 10365              	.LVL1606:
 10366 0226 0493     		str	r3, [sp, #16]
5567:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_dir = (DWORD)n_rootdir * SZDIRE / ss;	/* Rootdir size [sector] */
 10367              		.loc 1 5567 0
 10368 0228 4FF00109 		mov	r9, #1
 10369 022c 93E7     		b	.L998
 10370              	.LVL1607:
 10371              	.L1001:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 313


5557:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10372              		.loc 1 5557 0 discriminator 4
 10373 022e 0133     		adds	r3, r3, #1
 10374              	.LVL1608:
 10375 0230 7600     		lsls	r6, r6, #1
 10376              	.LVL1609:
 10377 0232 E1E7     		b	.L1000
 10378              	.LVL1610:
 10379              	.L1044:
5542:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Pre-determine number of clusters and FAT sub-type */
 10380              		.loc 1 5542 0
 10381 0234 0646     		mov	r6, r0
 10382 0236 E9E7     		b	.L999
 10383              	.LVL1611:
 10384              	.L1062:
 10385 0238 0191     		str	r1, [sp, #4]
 10386 023a E7E7     		b	.L999
 10387              	.LVL1612:
 10388              	.L1002:
5564:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10389              		.loc 1 5564 0
 10390 023c 03EB4303 		add	r3, r3, r3, lsl #1
 10391              	.LVL1613:
 10392 0240 0133     		adds	r3, r3, #1
 10393 0242 5B08     		lsrs	r3, r3, #1
 10394 0244 0333     		adds	r3, r3, #3
 10395              	.LVL1614:
5563:Middlewares/Third_Party/FatFs/src/ff.c **** 					n = (n_clst * 3 + 1) / 2 + 3;	/* FAT size [byte] */
 10396              		.loc 1 5563 0
 10397 0246 0127     		movs	r7, #1
 10398 0248 E8E7     		b	.L1003
 10399              	.LVL1615:
 10400              	.L1004:
5578:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 10401              		.loc 1 5578 0
 10402 024a 029B     		ldr	r3, [sp, #8]
 10403              	.LVL1616:
 10404 024c 6344     		add	r3, r3, ip
 10405 024e 0293     		str	r3, [sp, #8]
 10406              	.LVL1617:
 10407 0250 9BE7     		b	.L1005
 10408              	.LVL1618:
 10409              	.L1006:
5590:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (n_clst > MAX_FAT16) {	/* Too many clusters for FAT16 */
 10410              		.loc 1 5590 0
 10411 0252 022F     		cmp	r7, #2
 10412 0254 2AD1     		bne	.L1008
5591:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!au && (pau * 2) <= 64) {
 10413              		.loc 1 5591 0
 10414 0256 4FF6F57E 		movw	lr, #65525
 10415 025a F345     		cmp	fp, lr
 10416 025c 0ED9     		bls	.L1009
5592:Middlewares/Third_Party/FatFs/src/ff.c **** 						au = pau * 2; continue;		/* Adjust cluster size and retry */
 10417              		.loc 1 5592 0
 10418 025e 10B9     		cbnz	r0, .L1010
5592:Middlewares/Third_Party/FatFs/src/ff.c **** 						au = pau * 2; continue;		/* Adjust cluster size and retry */
 10419              		.loc 1 5592 0 is_stmt 0 discriminator 1
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 314


 10420 0260 7300     		lsls	r3, r6, #1
 10421 0262 402B     		cmp	r3, #64
 10422 0264 B9D9     		bls	.L1007
 10423              	.L1010:
5595:Middlewares/Third_Party/FatFs/src/ff.c **** 						fmt = FS_FAT32; continue;	/* Switch type to FAT32 and retry */
 10424              		.loc 1 5595 0 is_stmt 1
 10425 0266 019B     		ldr	r3, [sp, #4]
 10426 0268 002B     		cmp	r3, #0
 10427 026a B4D1     		bne	.L1047
5598:Middlewares/Third_Party/FatFs/src/ff.c **** 					return FR_MKFS_ABORTED;
 10428              		.loc 1 5598 0
 10429 026c 0028     		cmp	r0, #0
 10430 026e 40F0C981 		bne	.L1048
5598:Middlewares/Third_Party/FatFs/src/ff.c **** 					return FR_MKFS_ABORTED;
 10431              		.loc 1 5598 0 is_stmt 0 discriminator 1
 10432 0272 7300     		lsls	r3, r6, #1
 10433              	.LVL1619:
 10434 0274 802B     		cmp	r3, #128
 10435 0276 B0D9     		bls	.L1007
5599:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10436              		.loc 1 5599 0 is_stmt 1
 10437 0278 0E20     		movs	r0, #14
 10438 027a B2E1     		b	.L985
 10439              	.LVL1620:
 10440              	.L1009:
5601:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!au && (au = pau * 2) <= 128) continue;	/* Adjust cluster size and retry */
 10441              		.loc 1 5601 0
 10442 027c 40F6F57E 		movw	lr, #4085
 10443 0280 F345     		cmp	fp, lr
 10444 0282 13D8     		bhi	.L1008
5602:Middlewares/Third_Party/FatFs/src/ff.c **** 					return FR_MKFS_ABORTED;
 10445              		.loc 1 5602 0
 10446 0284 0028     		cmp	r0, #0
 10447 0286 40F0BF81 		bne	.L1049
5602:Middlewares/Third_Party/FatFs/src/ff.c **** 					return FR_MKFS_ABORTED;
 10448              		.loc 1 5602 0 is_stmt 0 discriminator 1
 10449 028a 7300     		lsls	r3, r6, #1
 10450              	.LVL1621:
 10451 028c 802B     		cmp	r3, #128
 10452 028e A4D9     		bls	.L1007
5603:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10453              		.loc 1 5603 0 is_stmt 1
 10454 0290 0E20     		movs	r0, #14
 10455 0292 A6E1     		b	.L985
 10456              	.L1072:
 10457              		.align	2
 10458              	.L1071:
 10459 0294 00000000 		.word	.LANCHOR3
 10460 0298 00FEFFFF 		.word	-512
 10461 029c 00000000 		.word	.LANCHOR6
 10462 02a0 0A00FFFF 		.word	-65526
 10463 02a4 FFFFFE0F 		.word	268369919
 10464 02a8 00000000 		.word	.LANCHOR7
 10465              	.LVL1622:
 10466              	.L1008:
5606:Middlewares/Third_Party/FatFs/src/ff.c **** 
 10467              		.loc 1 5606 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 315


 10468 02ac 40F6F572 		movw	r2, #4085
 10469 02b0 012F     		cmp	r7, #1
 10470 02b2 14BF     		ite	ne
 10471 02b4 0023     		movne	r3, #0
 10472 02b6 0123     		moveq	r3, #1
 10473 02b8 9345     		cmp	fp, r2
 10474 02ba 98BF     		it	ls
 10475 02bc 0023     		movls	r3, #0
 10476 02be 002B     		cmp	r3, #0
 10477 02c0 40F0A481 		bne	.L1050
5617:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_cpy(buf + BS_JmpBoot, "\xEB\xFE\x90" "MSDOS5.0", 11);/* Boot jump code (x86), OEM name */
 10478              		.loc 1 5617 0
 10479 02c4 4FF40072 		mov	r2, #512
 10480 02c8 0021     		movs	r1, #0
 10481 02ca 2846     		mov	r0, r5
 10482              	.LVL1623:
 10483 02cc FFF7FEFF 		bl	mem_set
 10484              	.LVL1624:
5618:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(buf + BPB_BytsPerSec, ss);				/* Sector size [byte] */
 10485              		.loc 1 5618 0
 10486 02d0 0B22     		movs	r2, #11
 10487 02d2 D449     		ldr	r1, .L1073
 10488 02d4 2846     		mov	r0, r5
 10489 02d6 FFF7FEFF 		bl	mem_cpy
 10490              	.LVL1625:
5619:Middlewares/Third_Party/FatFs/src/ff.c **** 		buf[BPB_SecPerClus] = (BYTE)pau;				/* Cluster size [sector] */
 10491              		.loc 1 5619 0
 10492 02da 4FF40071 		mov	r1, #512
 10493 02de 05F10B00 		add	r0, r5, #11
 10494 02e2 FFF7FEFF 		bl	st_word
 10495              	.LVL1626:
5620:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(buf + BPB_RsvdSecCnt, (WORD)sz_rsv);	/* Size of reserved area */
 10496              		.loc 1 5620 0
 10497 02e6 6E73     		strb	r6, [r5, #13]
5621:Middlewares/Third_Party/FatFs/src/ff.c **** 		buf[BPB_NumFATs] = (BYTE)n_fats;				/* Number of FATs */
 10498              		.loc 1 5621 0
 10499 02e8 1FFA89F1 		uxth	r1, r9
 10500 02ec 05F10E00 		add	r0, r5, #14
 10501 02f0 FFF7FEFF 		bl	st_word
 10502              	.LVL1627:
5622:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(buf + BPB_RootEntCnt, (WORD)((fmt == FS_FAT32) ? 0 : n_rootdir));	/* Number of root direc
 10503              		.loc 1 5622 0
 10504 02f4 0123     		movs	r3, #1
 10505 02f6 2B74     		strb	r3, [r5, #16]
5623:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (sz_vol < 0x10000) {
 10506              		.loc 1 5623 0
 10507 02f8 05F11100 		add	r0, r5, #17
 10508 02fc 032F     		cmp	r7, #3
 10509 02fe 00F00581 		beq	.L1051
 10510 0302 4FF40071 		mov	r1, #512
 10511              	.L1011:
5623:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (sz_vol < 0x10000) {
 10512              		.loc 1 5623 0 is_stmt 0 discriminator 4
 10513 0306 FFF7FEFF 		bl	st_word
 10514              	.LVL1628:
5624:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BPB_TotSec16, (WORD)sz_vol);	/* Volume size in 16-bit LBA */
 10515              		.loc 1 5624 0 is_stmt 1 discriminator 4
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 316


 10516 030a 0899     		ldr	r1, [sp, #32]
 10517 030c B1F5803F 		cmp	r1, #65536
 10518 0310 80F0FE80 		bcs	.L1012
5625:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 10519              		.loc 1 5625 0
 10520 0314 89B2     		uxth	r1, r1
 10521 0316 05F11300 		add	r0, r5, #19
 10522 031a FFF7FEFF 		bl	st_word
 10523              	.LVL1629:
 10524              	.L1013:
5629:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(buf + BPB_SecPerTrk, 63);				/* Number of sectors per track (for int13) */
 10525              		.loc 1 5629 0
 10526 031e F823     		movs	r3, #248
 10527 0320 6B75     		strb	r3, [r5, #21]
5630:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(buf + BPB_NumHeads, 255);				/* Number of heads (for int13) */
 10528              		.loc 1 5630 0
 10529 0322 3F21     		movs	r1, #63
 10530 0324 05F11800 		add	r0, r5, #24
 10531 0328 FFF7FEFF 		bl	st_word
 10532              	.LVL1630:
5631:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_dword(buf + BPB_HiddSec, b_vol);				/* Volume offset in the physical drive [sector] */
 10533              		.loc 1 5631 0
 10534 032c FF21     		movs	r1, #255
 10535 032e 05F11A00 		add	r0, r5, #26
 10536 0332 FFF7FEFF 		bl	st_word
 10537              	.LVL1631:
5632:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fmt == FS_FAT32) {
 10538              		.loc 1 5632 0
 10539 0336 4146     		mov	r1, r8
 10540 0338 05F11C00 		add	r0, r5, #28
 10541 033c FFF7FEFF 		bl	st_dword
 10542              	.LVL1632:
5633:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BS_VolID32, GET_FATTIME());	/* VSN */
 10543              		.loc 1 5633 0
 10544 0340 032F     		cmp	r7, #3
 10545 0342 40F0EA80 		bne	.L1014
5634:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BPB_FATSz32, sz_fat);		/* FAT size [sector] */
 10546              		.loc 1 5634 0
 10547 0346 FFF7FEFF 		bl	get_fattime
 10548              	.LVL1633:
 10549 034a 0146     		mov	r1, r0
 10550 034c 05F14300 		add	r0, r5, #67
 10551 0350 FFF7FEFF 		bl	st_dword
 10552              	.LVL1634:
5635:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BPB_RootClus32, 2);			/* Root directory cluster # (2) */
 10553              		.loc 1 5635 0
 10554 0354 0299     		ldr	r1, [sp, #8]
 10555 0356 05F12400 		add	r0, r5, #36
 10556 035a FFF7FEFF 		bl	st_dword
 10557              	.LVL1635:
5636:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BPB_FSInfo32, 1);				/* Offset of FSINFO sector (VBR + 1) */
 10558              		.loc 1 5636 0
 10559 035e 0221     		movs	r1, #2
 10560 0360 05F12C00 		add	r0, r5, #44
 10561 0364 FFF7FEFF 		bl	st_dword
 10562              	.LVL1636:
5637:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BPB_BkBootSec32, 6);			/* Offset of backup VBR (VBR + 6) */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 317


 10563              		.loc 1 5637 0
 10564 0368 0121     		movs	r1, #1
 10565 036a 05F13000 		add	r0, r5, #48
 10566 036e FFF7FEFF 		bl	st_word
 10567              	.LVL1637:
5638:Middlewares/Third_Party/FatFs/src/ff.c **** 			buf[BS_DrvNum32] = 0x80;					/* Drive number (for int13) */
 10568              		.loc 1 5638 0
 10569 0372 0621     		movs	r1, #6
 10570 0374 05F13200 		add	r0, r5, #50
 10571 0378 FFF7FEFF 		bl	st_word
 10572              	.LVL1638:
5639:Middlewares/Third_Party/FatFs/src/ff.c **** 			buf[BS_BootSig32] = 0x29;					/* Extended boot signature */
 10573              		.loc 1 5639 0
 10574 037c 8023     		movs	r3, #128
 10575 037e 85F84030 		strb	r3, [r5, #64]
5640:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_cpy(buf + BS_VolLab32, "NO NAME    " "FAT32   ", 19);	/* Volume label, FAT signature */
 10576              		.loc 1 5640 0
 10577 0382 2923     		movs	r3, #41
 10578 0384 85F84230 		strb	r3, [r5, #66]
5641:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 10579              		.loc 1 5641 0
 10580 0388 1322     		movs	r2, #19
 10581 038a A749     		ldr	r1, .L1073+4
 10582 038c 05F14700 		add	r0, r5, #71
 10583 0390 FFF7FEFF 		bl	mem_cpy
 10584              	.LVL1639:
 10585              	.L1015:
5649:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (disk_write(pdrv, buf, b_vol, 1) != RES_OK) return FR_DISK_ERR;	/* Write it to the VBR sector 
 10586              		.loc 1 5649 0
 10587 0394 05F5FF73 		add	r3, r5, #510
 10588 0398 0193     		str	r3, [sp, #4]
 10589 039a 4AF65521 		movw	r1, #43605
 10590 039e 1846     		mov	r0, r3
 10591 03a0 FFF7FEFF 		bl	st_word
 10592              	.LVL1640:
5650:Middlewares/Third_Party/FatFs/src/ff.c **** 
 10593              		.loc 1 5650 0
 10594 03a4 0123     		movs	r3, #1
 10595 03a6 4246     		mov	r2, r8
 10596 03a8 2946     		mov	r1, r5
 10597 03aa 2046     		mov	r0, r4
 10598 03ac FFF7FEFF 		bl	disk_write
 10599              	.LVL1641:
 10600 03b0 0028     		cmp	r0, #0
 10601 03b2 40F02D81 		bne	.L1052
5653:Middlewares/Third_Party/FatFs/src/ff.c **** 			disk_write(pdrv, buf, b_vol + 6, 1);		/* Write backup VBR (VBR + 6) */
 10602              		.loc 1 5653 0
 10603 03b6 032F     		cmp	r7, #3
 10604 03b8 33D1     		bne	.L1016
5654:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(buf, 0, ss);
 10605              		.loc 1 5654 0
 10606 03ba 0123     		movs	r3, #1
 10607 03bc 08F10602 		add	r2, r8, #6
 10608 03c0 2946     		mov	r1, r5
 10609 03c2 2046     		mov	r0, r4
 10610 03c4 FFF7FEFF 		bl	disk_write
 10611              	.LVL1642:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 318


5655:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + FSI_LeadSig, 0x41615252);
 10612              		.loc 1 5655 0
 10613 03c8 4FF40072 		mov	r2, #512
 10614 03cc 0021     		movs	r1, #0
 10615 03ce 2846     		mov	r0, r5
 10616 03d0 FFF7FEFF 		bl	mem_set
 10617              	.LVL1643:
5656:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + FSI_StrucSig, 0x61417272);
 10618              		.loc 1 5656 0
 10619 03d4 9549     		ldr	r1, .L1073+8
 10620 03d6 2846     		mov	r0, r5
 10621 03d8 FFF7FEFF 		bl	st_dword
 10622              	.LVL1644:
5657:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + FSI_Free_Count, n_clst - 1);	/* Number of free clusters */
 10623              		.loc 1 5657 0
 10624 03dc 9449     		ldr	r1, .L1073+12
 10625 03de 05F5F270 		add	r0, r5, #484
 10626 03e2 FFF7FEFF 		bl	st_dword
 10627              	.LVL1645:
5658:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + FSI_Nxt_Free, 2);			/* Last allocated cluster# */
 10628              		.loc 1 5658 0
 10629 03e6 0BF1FF31 		add	r1, fp, #-1
 10630 03ea 05F5F470 		add	r0, r5, #488
 10631 03ee FFF7FEFF 		bl	st_dword
 10632              	.LVL1646:
5659:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BS_55AA, 0xAA55);
 10633              		.loc 1 5659 0
 10634 03f2 0221     		movs	r1, #2
 10635 03f4 05F5F670 		add	r0, r5, #492
 10636 03f8 FFF7FEFF 		bl	st_dword
 10637              	.LVL1647:
5660:Middlewares/Third_Party/FatFs/src/ff.c **** 			disk_write(pdrv, buf, b_vol + 7, 1);		/* Write backup FSINFO (VBR + 7) */
 10638              		.loc 1 5660 0
 10639 03fc 4AF65521 		movw	r1, #43605
 10640 0400 0198     		ldr	r0, [sp, #4]
 10641 0402 FFF7FEFF 		bl	st_word
 10642              	.LVL1648:
5661:Middlewares/Third_Party/FatFs/src/ff.c **** 			disk_write(pdrv, buf, b_vol + 1, 1);		/* Write original FSINFO (VBR + 1) */
 10643              		.loc 1 5661 0
 10644 0406 0123     		movs	r3, #1
 10645 0408 08F10702 		add	r2, r8, #7
 10646 040c 2946     		mov	r1, r5
 10647 040e 2046     		mov	r0, r4
 10648 0410 FFF7FEFF 		bl	disk_write
 10649              	.LVL1649:
5662:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 10650              		.loc 1 5662 0
 10651 0414 0123     		movs	r3, #1
 10652 0416 08EB0302 		add	r2, r8, r3
 10653 041a 2946     		mov	r1, r5
 10654 041c 2046     		mov	r0, r4
 10655 041e FFF7FEFF 		bl	disk_write
 10656              	.LVL1650:
 10657              	.L1016:
5666:Middlewares/Third_Party/FatFs/src/ff.c **** 		sect = b_fat;		/* FAT start sector */
 10658              		.loc 1 5666 0
 10659 0422 5246     		mov	r2, r10
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 319


 10660 0424 0021     		movs	r1, #0
 10661 0426 2846     		mov	r0, r5
 10662 0428 FFF7FEFF 		bl	mem_set
 10663              	.LVL1651:
5668:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {
 10664              		.loc 1 5668 0
 10665 042c 4FF0000B 		mov	fp, #0
 10666              	.LVL1652:
 10667              	.L1017:
5668:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {
 10668              		.loc 1 5668 0 is_stmt 0 discriminator 1
 10669 0430 BBF1000F 		cmp	fp, #0
 10670 0434 00F08B80 		beq	.L1022
5686:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
 10671              		.loc 1 5686 0 is_stmt 1
 10672 0438 032F     		cmp	r7, #3
 10673 043a 40F0C380 		bne	.L1063
 10674 043e DDF80CA0 		ldr	r10, [sp, #12]
 10675 0442 B146     		mov	r9, r6
 10676              	.LVL1653:
 10677              	.L1024:
5688:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(pdrv, buf, sect, (UINT)n) != RES_OK) return FR_DISK_ERR;
 10678              		.loc 1 5688 0
 10679 0444 059B     		ldr	r3, [sp, #20]
 10680 0446 4B45     		cmp	r3, r9
 10681 0448 28BF     		it	cs
 10682 044a 4B46     		movcs	r3, r9
 10683 044c 1E46     		mov	r6, r3
 10684              	.LVL1654:
5689:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += n; nsect -= n;
 10685              		.loc 1 5689 0
 10686 044e 5246     		mov	r2, r10
 10687 0450 2946     		mov	r1, r5
 10688 0452 2046     		mov	r0, r4
 10689 0454 FFF7FEFF 		bl	disk_write
 10690              	.LVL1655:
 10691 0458 0028     		cmp	r0, #0
 10692 045a 40F0DD80 		bne	.L1055
5690:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (nsect);
 10693              		.loc 1 5690 0
 10694 045e B244     		add	r10, r10, r6
 10695              	.LVL1656:
5691:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 10696              		.loc 1 5691 0
 10697 0460 B9EB0609 		subs	r9, r9, r6
 10698              	.LVL1657:
 10699 0464 EED1     		bne	.L1024
5698:Middlewares/Third_Party/FatFs/src/ff.c **** 			sys = 0x0C;		/* FAT32X */
 10700              		.loc 1 5698 0
 10701 0466 032F     		cmp	r7, #3
 10702 0468 00F0B180 		beq	.L1056
5701:Middlewares/Third_Party/FatFs/src/ff.c **** 				sys = 0x06;	/* FAT12/16 (>=64KS) */
 10703              		.loc 1 5701 0
 10704 046c 089B     		ldr	r3, [sp, #32]
 10705 046e B3F5803F 		cmp	r3, #65536
 10706 0472 80F0AF80 		bcs	.L1057
5704:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 320


 10707              		.loc 1 5704 0
 10708 0476 022F     		cmp	r7, #2
 10709 0478 40F0AF80 		bne	.L1058
 10710 047c 4FF00409 		mov	r9, #4
 10711              	.LVL1658:
 10712              	.L1025:
5716:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(buf, 0, ss);
 10713              		.loc 1 5716 0
 10714 0480 069B     		ldr	r3, [sp, #24]
 10715 0482 CBBB     		cbnz	r3, .L1026
5717:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BS_55AA, 0xAA55);		/* MBR signature */
 10716              		.loc 1 5717 0
 10717 0484 4FF40072 		mov	r2, #512
 10718 0488 0021     		movs	r1, #0
 10719 048a 2846     		mov	r0, r5
 10720 048c FFF7FEFF 		bl	mem_set
 10721              	.LVL1659:
5718:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte = buf + MBR_Table;				/* Create partition table for single partition in the drive */
 10722              		.loc 1 5718 0
 10723 0490 4AF65521 		movw	r1, #43605
 10724 0494 0198     		ldr	r0, [sp, #4]
 10725 0496 FFF7FEFF 		bl	st_word
 10726              	.LVL1660:
5720:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_StHead] = 1;				/* Start head */
 10727              		.loc 1 5720 0
 10728 049a 0026     		movs	r6, #0
 10729              	.LVL1661:
 10730 049c 85F8BE61 		strb	r6, [r5, #446]
5721:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_StSec] = 1;					/* Start sector */
 10731              		.loc 1 5721 0
 10732 04a0 0127     		movs	r7, #1
 10733 04a2 85F8BF71 		strb	r7, [r5, #447]
5722:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_StCyl] = 0;					/* Start cylinder */
 10734              		.loc 1 5722 0
 10735 04a6 85F8C071 		strb	r7, [r5, #448]
5723:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_System] = sys;				/* System type */
 10736              		.loc 1 5723 0
 10737 04aa 85F8C161 		strb	r6, [r5, #449]
5724:Middlewares/Third_Party/FatFs/src/ff.c **** 			n = (b_vol + sz_vol) / (63 * 255);	/* (End CHS may be invalid) */
 10738              		.loc 1 5724 0
 10739 04ae 85F8C291 		strb	r9, [r5, #450]
5725:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_EdHead] = 254;				/* End head */
 10740              		.loc 1 5725 0
 10741 04b2 089B     		ldr	r3, [sp, #32]
 10742 04b4 4344     		add	r3, r3, r8
 10743 04b6 43F6C162 		movw	r2, #16065
 10744 04ba B3FBF2F3 		udiv	r3, r3, r2
 10745              	.LVL1662:
5726:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_EdSec] = (BYTE)(n >> 2 | 63);	/* End sector */
 10746              		.loc 1 5726 0
 10747 04be FE22     		movs	r2, #254
 10748 04c0 85F8C321 		strb	r2, [r5, #451]
5727:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_EdCyl] = (BYTE)n;			/* End cylinder */
 10749              		.loc 1 5727 0
 10750 04c4 9A08     		lsrs	r2, r3, #2
 10751 04c6 42F03F02 		orr	r2, r2, #63
 10752 04ca 85F8C421 		strb	r2, [r5, #452]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 321


5728:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(pte + PTE_StLba, b_vol);	/* Start offset in LBA */
 10753              		.loc 1 5728 0
 10754 04ce 85F8C531 		strb	r3, [r5, #453]
5729:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(pte + PTE_SizLba, sz_vol);	/* Size in sectors */
 10755              		.loc 1 5729 0
 10756 04d2 4146     		mov	r1, r8
 10757 04d4 05F5E370 		add	r0, r5, #454
 10758 04d8 FFF7FEFF 		bl	st_dword
 10759              	.LVL1663:
5730:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(pdrv, buf, 0, 1) != RES_OK) return FR_DISK_ERR;	/* Write it to the MBR */
 10760              		.loc 1 5730 0
 10761 04dc 0899     		ldr	r1, [sp, #32]
 10762 04de 05F5E570 		add	r0, r5, #458
 10763 04e2 FFF7FEFF 		bl	st_dword
 10764              	.LVL1664:
5731:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 10765              		.loc 1 5731 0
 10766 04e6 3B46     		mov	r3, r7
 10767 04e8 3246     		mov	r2, r6
 10768 04ea 2946     		mov	r1, r5
 10769 04ec 2046     		mov	r0, r4
 10770 04ee FFF7FEFF 		bl	disk_write
 10771              	.LVL1665:
 10772 04f2 0028     		cmp	r0, #0
 10773 04f4 40F09280 		bne	.L1059
 10774              	.LVL1666:
 10775              	.L1026:
5735:Middlewares/Third_Party/FatFs/src/ff.c **** 
 10776              		.loc 1 5735 0
 10777 04f8 0022     		movs	r2, #0
 10778 04fa 1146     		mov	r1, r2
 10779 04fc 2046     		mov	r0, r4
 10780 04fe FFF7FEFF 		bl	disk_ioctl
 10781              	.LVL1667:
 10782 0502 0028     		cmp	r0, #0
 10783 0504 00F08C80 		beq	.L1060
 10784 0508 0120     		movs	r0, #1
 10785 050a 6AE0     		b	.L985
 10786              	.LVL1668:
 10787              	.L1051:
5623:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (sz_vol < 0x10000) {
 10788              		.loc 1 5623 0
 10789 050c 0021     		movs	r1, #0
 10790 050e FAE6     		b	.L1011
 10791              	.L1012:
5627:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 10792              		.loc 1 5627 0
 10793 0510 05F12000 		add	r0, r5, #32
 10794 0514 FFF7FEFF 		bl	st_dword
 10795              	.LVL1669:
 10796 0518 01E7     		b	.L1013
 10797              	.L1014:
5643:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BPB_FATSz16, (WORD)sz_fat);	/* FAT size [sector] */
 10798              		.loc 1 5643 0
 10799 051a FFF7FEFF 		bl	get_fattime
 10800              	.LVL1670:
 10801 051e 0146     		mov	r1, r0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 322


 10802 0520 05F12700 		add	r0, r5, #39
 10803 0524 FFF7FEFF 		bl	st_dword
 10804              	.LVL1671:
5644:Middlewares/Third_Party/FatFs/src/ff.c **** 			buf[BS_DrvNum] = 0x80;						/* Drive number (for int13) */
 10805              		.loc 1 5644 0
 10806 0528 BDF80810 		ldrh	r1, [sp, #8]
 10807 052c 05F11600 		add	r0, r5, #22
 10808 0530 FFF7FEFF 		bl	st_word
 10809              	.LVL1672:
5645:Middlewares/Third_Party/FatFs/src/ff.c **** 			buf[BS_BootSig] = 0x29;						/* Extended boot signature */
 10810              		.loc 1 5645 0
 10811 0534 8023     		movs	r3, #128
 10812 0536 85F82430 		strb	r3, [r5, #36]
5646:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_cpy(buf + BS_VolLab, "NO NAME    " "FAT     ", 19);	/* Volume label, FAT signature */
 10813              		.loc 1 5646 0
 10814 053a 2923     		movs	r3, #41
 10815 053c 85F82630 		strb	r3, [r5, #38]
5647:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 10816              		.loc 1 5647 0
 10817 0540 1322     		movs	r2, #19
 10818 0542 3C49     		ldr	r1, .L1073+16
 10819 0544 05F12B00 		add	r0, r5, #43
 10820 0548 FFF7FEFF 		bl	mem_cpy
 10821              	.LVL1673:
 10822 054c 22E7     		b	.L1015
 10823              	.LVL1674:
 10824              	.L1022:
5669:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_dword(buf + 0, 0xFFFFFFF8);	/* Entry 0 */
 10825              		.loc 1 5669 0
 10826 054e 032F     		cmp	r7, #3
 10827 0550 2ED1     		bne	.L1018
5670:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_dword(buf + 4, 0xFFFFFFFF);	/* Entry 1 */
 10828              		.loc 1 5670 0
 10829 0552 6FF00701 		mvn	r1, #7
 10830 0556 2846     		mov	r0, r5
 10831 0558 FFF7FEFF 		bl	st_dword
 10832              	.LVL1675:
5671:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_dword(buf + 8, 0x0FFFFFFF);	/* Entry 2 (root directory) */
 10833              		.loc 1 5671 0
 10834 055c 4FF0FF31 		mov	r1, #-1
 10835 0560 281D     		adds	r0, r5, #4
 10836 0562 FFF7FEFF 		bl	st_dword
 10837              	.LVL1676:
5672:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
 10838              		.loc 1 5672 0
 10839 0566 6FF07041 		mvn	r1, #-268435456
 10840 056a 05F10800 		add	r0, r5, #8
 10841 056e FFF7FEFF 		bl	st_dword
 10842              	.LVL1677:
 10843              	.L1019:
5674:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 10844              		.loc 1 5674 0
 10845 0572 DDF80890 		ldr	r9, [sp, #8]
 10846 0576 BA46     		mov	r10, r7
 10847              	.L1021:
 10848              	.LVL1678:
5678:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(pdrv, buf, sect, (UINT)n) != RES_OK) return FR_DISK_ERR;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 323


 10849              		.loc 1 5678 0
 10850 0578 059B     		ldr	r3, [sp, #20]
 10851 057a 4B45     		cmp	r3, r9
 10852 057c 28BF     		it	cs
 10853 057e 4B46     		movcs	r3, r9
 10854 0580 1F46     		mov	r7, r3
 10855              	.LVL1679:
5679:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_set(buf, 0, ss);
 10856              		.loc 1 5679 0
 10857 0582 039A     		ldr	r2, [sp, #12]
 10858 0584 2946     		mov	r1, r5
 10859 0586 2046     		mov	r0, r4
 10860 0588 FFF7FEFF 		bl	disk_write
 10861              	.LVL1680:
 10862 058c 0028     		cmp	r0, #0
 10863 058e 41D1     		bne	.L1054
5680:Middlewares/Third_Party/FatFs/src/ff.c **** 				sect += n; nsect -= n;
 10864              		.loc 1 5680 0
 10865 0590 4FF40072 		mov	r2, #512
 10866 0594 0021     		movs	r1, #0
 10867 0596 2846     		mov	r0, r5
 10868 0598 FFF7FEFF 		bl	mem_set
 10869              	.LVL1681:
5681:Middlewares/Third_Party/FatFs/src/ff.c **** 			} while (nsect);
 10870              		.loc 1 5681 0
 10871 059c 039B     		ldr	r3, [sp, #12]
 10872 059e 3B44     		add	r3, r3, r7
 10873 05a0 0393     		str	r3, [sp, #12]
 10874              	.LVL1682:
5682:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 10875              		.loc 1 5682 0
 10876 05a2 B9EB0709 		subs	r9, r9, r7
 10877              	.LVL1683:
 10878 05a6 E7D1     		bne	.L1021
 10879 05a8 5746     		mov	r7, r10
 10880              	.LVL1684:
5668:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {
 10881              		.loc 1 5668 0 discriminator 2
 10882 05aa 0BF1010B 		add	fp, fp, #1
 10883              	.LVL1685:
 10884 05ae 3FE7     		b	.L1017
 10885              	.LVL1686:
 10886              	.L1018:
5674:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 10887              		.loc 1 5674 0
 10888 05b0 012F     		cmp	r7, #1
 10889 05b2 04D1     		bne	.L1053
 10890 05b4 2049     		ldr	r1, .L1073+20
 10891              	.L1020:
5674:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 10892              		.loc 1 5674 0 is_stmt 0 discriminator 4
 10893 05b6 2846     		mov	r0, r5
 10894 05b8 FFF7FEFF 		bl	st_dword
 10895              	.LVL1687:
 10896 05bc D9E7     		b	.L1019
 10897              	.L1053:
5674:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 324


 10898              		.loc 1 5674 0
 10899 05be 6FF00701 		mvn	r1, #7
 10900 05c2 F8E7     		b	.L1020
 10901              	.L1063:
 10902 05c4 DDF80CA0 		ldr	r10, [sp, #12]
 10903 05c8 DDF81090 		ldr	r9, [sp, #16]
 10904 05cc 3AE7     		b	.L1024
 10905              	.LVL1688:
 10906              	.L1056:
5699:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 10907              		.loc 1 5699 0 is_stmt 1
 10908 05ce 4FF00C09 		mov	r9, #12
 10909              	.LVL1689:
 10910 05d2 55E7     		b	.L1025
 10911              	.LVL1690:
 10912              	.L1057:
5702:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
 10913              		.loc 1 5702 0
 10914 05d4 4FF00609 		mov	r9, #6
 10915              	.LVL1691:
 10916 05d8 52E7     		b	.L1025
 10917              	.LVL1692:
 10918              	.L1058:
5704:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 10919              		.loc 1 5704 0
 10920 05da 4FF00109 		mov	r9, #1
 10921              	.LVL1693:
 10922 05de 4FE7     		b	.L1025
 10923              	.LVL1694:
 10924              	.L1027:
5317:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (FatFs[vol]) FatFs[vol]->fs_type = 0;	/* Clear the volume */
 10925              		.loc 1 5317 0
 10926 05e0 0B20     		movs	r0, #11
 10927              	.LVL1695:
 10928              	.L985:
5738:Middlewares/Third_Party/FatFs/src/ff.c **** 
 10929              		.loc 1 5738 0
 10930 05e2 0BB0     		add	sp, sp, #44
 10931              	.LCFI140:
 10932              		.cfi_remember_state
 10933              		.cfi_def_cfa_offset 36
 10934              		@ sp needed
 10935 05e4 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 10936              	.LVL1696:
 10937              	.L1034:
 10938              	.LCFI141:
 10939              		.cfi_restore_state
5353:Middlewares/Third_Party/FatFs/src/ff.c **** 		b_vol = (opt & FM_SFD) ? 0 : 63;		/* Volume start sector */
 10940              		.loc 1 5353 0
 10941 05e8 0120     		movs	r0, #1
 10942 05ea FAE7     		b	.L985
 10943              	.LVL1697:
 10944              	.L1036:
5355:Middlewares/Third_Party/FatFs/src/ff.c **** 		sz_vol -= b_vol;						/* Volume size */
 10945              		.loc 1 5355 0
 10946 05ec 0E20     		movs	r0, #14
 10947 05ee F8E7     		b	.L985
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 325


 10948              	.L1038:
5367:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (opt & FM_FAT32) {	/* FAT32 possible? */
 10949              		.loc 1 5367 0
 10950 05f0 1320     		movs	r0, #19
 10951 05f2 F6E7     		b	.L985
 10952              	.L1041:
5373:Middlewares/Third_Party/FatFs/src/ff.c **** 		fmt = FS_FAT16;
 10953              		.loc 1 5373 0
 10954 05f4 1320     		movs	r0, #19
 10955 05f6 F4E7     		b	.L985
 10956              	.LVL1698:
 10957              	.L1043:
5553:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {				/* FAT12/16 volume */
 10958              		.loc 1 5553 0
 10959 05f8 0E20     		movs	r0, #14
 10960              	.LVL1699:
 10961 05fa F2E7     		b	.L985
 10962              	.LVL1700:
 10963              	.L1045:
5582:Middlewares/Third_Party/FatFs/src/ff.c **** 			n_clst = (sz_vol - sz_rsv - sz_fat * n_fats - sz_dir) / pau;
 10964              		.loc 1 5582 0
 10965 05fc 0E20     		movs	r0, #14
 10966              	.LVL1701:
 10967 05fe F0E7     		b	.L985
 10968              	.LVL1702:
 10969              	.L1046:
5587:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10970              		.loc 1 5587 0
 10971 0600 0E20     		movs	r0, #14
 10972              	.LVL1703:
 10973 0602 EEE7     		b	.L985
 10974              	.LVL1704:
 10975              	.L1048:
5599:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10976              		.loc 1 5599 0
 10977 0604 0E20     		movs	r0, #14
 10978              	.LVL1705:
 10979 0606 ECE7     		b	.L985
 10980              	.LVL1706:
 10981              	.L1049:
5603:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10982              		.loc 1 5603 0
 10983 0608 0E20     		movs	r0, #14
 10984              	.LVL1707:
 10985 060a EAE7     		b	.L985
 10986              	.LVL1708:
 10987              	.L1050:
5606:Middlewares/Third_Party/FatFs/src/ff.c **** 
 10988              		.loc 1 5606 0
 10989 060c 0E20     		movs	r0, #14
 10990              	.LVL1709:
 10991 060e E8E7     		b	.L985
 10992              	.LVL1710:
 10993              	.L1052:
5650:Middlewares/Third_Party/FatFs/src/ff.c **** 
 10994              		.loc 1 5650 0
 10995 0610 0120     		movs	r0, #1
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 326


 10996 0612 E6E7     		b	.L985
 10997              	.LVL1711:
 10998              	.L1054:
5679:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_set(buf, 0, ss);
 10999              		.loc 1 5679 0
 11000 0614 0120     		movs	r0, #1
 11001 0616 E4E7     		b	.L985
 11002              	.LVL1712:
 11003              	.L1055:
5689:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += n; nsect -= n;
 11004              		.loc 1 5689 0
 11005 0618 0120     		movs	r0, #1
 11006 061a E2E7     		b	.L985
 11007              	.LVL1713:
 11008              	.L1059:
5731:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 11009              		.loc 1 5731 0
 11010 061c 0120     		movs	r0, #1
 11011 061e E0E7     		b	.L985
 11012              	.LVL1714:
 11013              	.L1060:
5737:Middlewares/Third_Party/FatFs/src/ff.c **** }
 11014              		.loc 1 5737 0
 11015 0620 0020     		movs	r0, #0
 11016 0622 DEE7     		b	.L985
 11017              	.L1074:
 11018              		.align	2
 11019              	.L1073:
 11020 0624 00000000 		.word	.LC2
 11021 0628 0C000000 		.word	.LC3
 11022 062c 52526141 		.word	1096897106
 11023 0630 72724161 		.word	1631679090
 11024 0634 20000000 		.word	.LC4
 11025 0638 F8FFFF00 		.word	16777208
 11026              		.cfi_endproc
 11027              	.LFE204:
 11029              		.section	.text.f_gets,"ax",%progbits
 11030              		.align	1
 11031              		.global	f_gets
 11032              		.syntax unified
 11033              		.thumb
 11034              		.thumb_func
 11035              		.fpu fpv5-sp-d16
 11037              	f_gets:
 11038              	.LFB205:
5824:Middlewares/Third_Party/FatFs/src/ff.c **** 	int n = 0;
 11039              		.loc 1 5824 0
 11040              		.cfi_startproc
 11041              		@ args = 0, pretend = 0, frame = 8
 11042              		@ frame_needed = 0, uses_anonymous_args = 0
 11043              	.LVL1715:
 11044 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 11045              	.LCFI142:
 11046              		.cfi_def_cfa_offset 24
 11047              		.cfi_offset 4, -24
 11048              		.cfi_offset 5, -20
 11049              		.cfi_offset 6, -16
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 327


 11050              		.cfi_offset 7, -12
 11051              		.cfi_offset 8, -8
 11052              		.cfi_offset 14, -4
 11053 0004 82B0     		sub	sp, sp, #8
 11054              	.LCFI143:
 11055              		.cfi_def_cfa_offset 32
 11056 0006 8046     		mov	r8, r0
 11057 0008 0E46     		mov	r6, r1
 11058 000a 1746     		mov	r7, r2
 11059              	.LVL1716:
5826:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE s[2];
 11060              		.loc 1 5826 0
 11061 000c 0546     		mov	r5, r0
5825:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR c, *p = buff;
 11062              		.loc 1 5825 0
 11063 000e 0024     		movs	r4, #0
 11064              	.LVL1717:
 11065              	.L1076:
5831:Middlewares/Third_Party/FatFs/src/ff.c **** #if _LFN_UNICODE
 11066              		.loc 1 5831 0
 11067 0010 731E     		subs	r3, r6, #1
 11068 0012 9C42     		cmp	r4, r3
 11069 0014 14DA     		bge	.L1077
5876:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rc != 1) break;
 11070              		.loc 1 5876 0
 11071 0016 6B46     		mov	r3, sp
 11072 0018 0122     		movs	r2, #1
 11073 001a 01A9     		add	r1, sp, #4
 11074 001c 3846     		mov	r0, r7
 11075 001e FFF7FEFF 		bl	f_read
 11076              	.LVL1718:
5877:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = s[0];
 11077              		.loc 1 5877 0
 11078 0022 009B     		ldr	r3, [sp]
 11079 0024 012B     		cmp	r3, #1
 11080 0026 0BD1     		bne	.L1077
5878:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 11081              		.loc 1 5878 0
 11082 0028 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
 11083              	.LVL1719:
5880:Middlewares/Third_Party/FatFs/src/ff.c **** 		*p++ = c;
 11084              		.loc 1 5880 0
 11085 002c 0D2B     		cmp	r3, #13
 11086 002e EFD0     		beq	.L1076
5881:Middlewares/Third_Party/FatFs/src/ff.c **** 		n++;
 11087              		.loc 1 5881 0
 11088 0030 6A1C     		adds	r2, r5, #1
 11089              	.LVL1720:
 11090 0032 2B70     		strb	r3, [r5]
5882:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == '\n') break;		/* Break on EOL */
 11091              		.loc 1 5882 0
 11092 0034 0134     		adds	r4, r4, #1
 11093              	.LVL1721:
5883:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 11094              		.loc 1 5883 0
 11095 0036 0A2B     		cmp	r3, #10
 11096 0038 01D0     		beq	.L1081
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 328


5881:Middlewares/Third_Party/FatFs/src/ff.c **** 		n++;
 11097              		.loc 1 5881 0
 11098 003a 1546     		mov	r5, r2
 11099 003c E8E7     		b	.L1076
 11100              	.L1081:
 11101 003e 1546     		mov	r5, r2
 11102              	.LVL1722:
 11103              	.L1077:
5885:Middlewares/Third_Party/FatFs/src/ff.c **** 	return n ? buff : 0;			/* When no data read (eof or error), return with error. */
 11104              		.loc 1 5885 0
 11105 0040 0023     		movs	r3, #0
 11106 0042 2B70     		strb	r3, [r5]
5886:Middlewares/Third_Party/FatFs/src/ff.c **** }
 11107              		.loc 1 5886 0
 11108 0044 1CB1     		cbz	r4, .L1082
 11109 0046 4046     		mov	r0, r8
 11110              	.L1075:
5887:Middlewares/Third_Party/FatFs/src/ff.c **** 
 11111              		.loc 1 5887 0
 11112 0048 02B0     		add	sp, sp, #8
 11113              	.LCFI144:
 11114              		.cfi_remember_state
 11115              		.cfi_def_cfa_offset 24
 11116              		@ sp needed
 11117 004a BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 11118              	.LVL1723:
 11119              	.L1082:
 11120              	.LCFI145:
 11121              		.cfi_restore_state
5886:Middlewares/Third_Party/FatFs/src/ff.c **** }
 11122              		.loc 1 5886 0
 11123 004e 0020     		movs	r0, #0
 11124 0050 FAE7     		b	.L1075
 11125              		.cfi_endproc
 11126              	.LFE205:
 11128              		.section	.text.f_putc,"ax",%progbits
 11129              		.align	1
 11130              		.global	f_putc
 11131              		.syntax unified
 11132              		.thumb
 11133              		.thumb_func
 11134              		.fpu fpv5-sp-d16
 11136              	f_putc:
 11137              	.LFB209:
5983:Middlewares/Third_Party/FatFs/src/ff.c **** }
5984:Middlewares/Third_Party/FatFs/src/ff.c **** 
5985:Middlewares/Third_Party/FatFs/src/ff.c **** 
5986:Middlewares/Third_Party/FatFs/src/ff.c **** 
5987:Middlewares/Third_Party/FatFs/src/ff.c **** int f_putc (
5988:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR c,	/* A character to be output */
5989:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp		/* Pointer to the file object */
5990:Middlewares/Third_Party/FatFs/src/ff.c **** )
5991:Middlewares/Third_Party/FatFs/src/ff.c **** {
 11138              		.loc 1 5991 0
 11139              		.cfi_startproc
 11140              		@ args = 0, pretend = 0, frame = 80
 11141              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 329


 11142              	.LVL1724:
 11143 0000 10B5     		push	{r4, lr}
 11144              	.LCFI146:
 11145              		.cfi_def_cfa_offset 8
 11146              		.cfi_offset 4, -8
 11147              		.cfi_offset 14, -4
 11148 0002 94B0     		sub	sp, sp, #80
 11149              	.LCFI147:
 11150              		.cfi_def_cfa_offset 88
 11151 0004 0446     		mov	r4, r0
5992:Middlewares/Third_Party/FatFs/src/ff.c **** 	putbuff pb;
5993:Middlewares/Third_Party/FatFs/src/ff.c **** 
5994:Middlewares/Third_Party/FatFs/src/ff.c **** 
5995:Middlewares/Third_Party/FatFs/src/ff.c **** 	putc_init(&pb, fp);
 11152              		.loc 1 5995 0
 11153 0006 01A8     		add	r0, sp, #4
 11154              	.LVL1725:
 11155 0008 FFF7FEFF 		bl	putc_init
 11156              	.LVL1726:
5996:Middlewares/Third_Party/FatFs/src/ff.c **** 	putc_bfd(&pb, c);	/* Put the character */
 11157              		.loc 1 5996 0
 11158 000c 2146     		mov	r1, r4
 11159 000e 01A8     		add	r0, sp, #4
 11160 0010 FFF7FEFF 		bl	putc_bfd
 11161              	.LVL1727:
5997:Middlewares/Third_Party/FatFs/src/ff.c **** 	return putc_flush(&pb);
 11162              		.loc 1 5997 0
 11163 0014 01A8     		add	r0, sp, #4
 11164 0016 FFF7FEFF 		bl	putc_flush
 11165              	.LVL1728:
5998:Middlewares/Third_Party/FatFs/src/ff.c **** }
 11166              		.loc 1 5998 0
 11167 001a 14B0     		add	sp, sp, #80
 11168              	.LCFI148:
 11169              		.cfi_def_cfa_offset 8
 11170              		@ sp needed
 11171 001c 10BD     		pop	{r4, pc}
 11172              		.cfi_endproc
 11173              	.LFE209:
 11175              		.section	.text.f_puts,"ax",%progbits
 11176              		.align	1
 11177              		.global	f_puts
 11178              		.syntax unified
 11179              		.thumb
 11180              		.thumb_func
 11181              		.fpu fpv5-sp-d16
 11183              	f_puts:
 11184              	.LFB210:
5999:Middlewares/Third_Party/FatFs/src/ff.c **** 
6000:Middlewares/Third_Party/FatFs/src/ff.c **** 
6001:Middlewares/Third_Party/FatFs/src/ff.c **** 
6002:Middlewares/Third_Party/FatFs/src/ff.c **** 
6003:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
6004:Middlewares/Third_Party/FatFs/src/ff.c **** /* Put a string to the file                                              */
6005:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
6006:Middlewares/Third_Party/FatFs/src/ff.c **** 
6007:Middlewares/Third_Party/FatFs/src/ff.c **** int f_puts (
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 330


6008:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* str,	/* Pointer to the string to be output */
6009:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp				/* Pointer to the file object */
6010:Middlewares/Third_Party/FatFs/src/ff.c **** )
6011:Middlewares/Third_Party/FatFs/src/ff.c **** {
 11185              		.loc 1 6011 0
 11186              		.cfi_startproc
 11187              		@ args = 0, pretend = 0, frame = 80
 11188              		@ frame_needed = 0, uses_anonymous_args = 0
 11189              	.LVL1729:
 11190 0000 10B5     		push	{r4, lr}
 11191              	.LCFI149:
 11192              		.cfi_def_cfa_offset 8
 11193              		.cfi_offset 4, -8
 11194              		.cfi_offset 14, -4
 11195 0002 94B0     		sub	sp, sp, #80
 11196              	.LCFI150:
 11197              		.cfi_def_cfa_offset 88
 11198 0004 0446     		mov	r4, r0
6012:Middlewares/Third_Party/FatFs/src/ff.c **** 	putbuff pb;
6013:Middlewares/Third_Party/FatFs/src/ff.c **** 
6014:Middlewares/Third_Party/FatFs/src/ff.c **** 
6015:Middlewares/Third_Party/FatFs/src/ff.c **** 	putc_init(&pb, fp);
 11199              		.loc 1 6015 0
 11200 0006 01A8     		add	r0, sp, #4
 11201              	.LVL1730:
 11202 0008 FFF7FEFF 		bl	putc_init
 11203              	.LVL1731:
6016:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (*str) putc_bfd(&pb, *str++);		/* Put the string */
 11204              		.loc 1 6016 0
 11205 000c 03E0     		b	.L1087
 11206              	.L1088:
 11207              		.loc 1 6016 0 is_stmt 0 discriminator 2
 11208 000e 0134     		adds	r4, r4, #1
 11209              	.LVL1732:
 11210 0010 01A8     		add	r0, sp, #4
 11211 0012 FFF7FEFF 		bl	putc_bfd
 11212              	.LVL1733:
 11213              	.L1087:
 11214              		.loc 1 6016 0 discriminator 1
 11215 0016 2178     		ldrb	r1, [r4]	@ zero_extendqisi2
 11216 0018 0029     		cmp	r1, #0
 11217 001a F8D1     		bne	.L1088
6017:Middlewares/Third_Party/FatFs/src/ff.c **** 	return putc_flush(&pb);
 11218              		.loc 1 6017 0 is_stmt 1
 11219 001c 01A8     		add	r0, sp, #4
 11220 001e FFF7FEFF 		bl	putc_flush
 11221              	.LVL1734:
6018:Middlewares/Third_Party/FatFs/src/ff.c **** }
 11222              		.loc 1 6018 0
 11223 0022 14B0     		add	sp, sp, #80
 11224              	.LCFI151:
 11225              		.cfi_def_cfa_offset 8
 11226              		@ sp needed
 11227 0024 10BD     		pop	{r4, pc}
 11228              		.cfi_endproc
 11229              	.LFE210:
 11231              		.section	.text.f_printf,"ax",%progbits
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 331


 11232              		.align	1
 11233              		.global	f_printf
 11234              		.syntax unified
 11235              		.thumb
 11236              		.thumb_func
 11237              		.fpu fpv5-sp-d16
 11239              	f_printf:
 11240              	.LFB211:
6019:Middlewares/Third_Party/FatFs/src/ff.c **** 
6020:Middlewares/Third_Party/FatFs/src/ff.c **** 
6021:Middlewares/Third_Party/FatFs/src/ff.c **** 
6022:Middlewares/Third_Party/FatFs/src/ff.c **** 
6023:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
6024:Middlewares/Third_Party/FatFs/src/ff.c **** /* Put a formatted string to the file                                    */
6025:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
6026:Middlewares/Third_Party/FatFs/src/ff.c **** 
6027:Middlewares/Third_Party/FatFs/src/ff.c **** int f_printf (
6028:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp,			/* Pointer to the file object */
6029:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* fmt,	/* Pointer to the format string */
6030:Middlewares/Third_Party/FatFs/src/ff.c **** 	...					/* Optional arguments... */
6031:Middlewares/Third_Party/FatFs/src/ff.c **** )
6032:Middlewares/Third_Party/FatFs/src/ff.c **** {
 11241              		.loc 1 6032 0
 11242              		.cfi_startproc
 11243              		@ args = 4, pretend = 12, frame = 112
 11244              		@ frame_needed = 0, uses_anonymous_args = 1
 11245              	.LVL1735:
 11246 0000 0EB4     		push	{r1, r2, r3}
 11247              	.LCFI152:
 11248              		.cfi_def_cfa_offset 12
 11249              		.cfi_offset 1, -12
 11250              		.cfi_offset 2, -8
 11251              		.cfi_offset 3, -4
 11252 0002 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 11253              	.LCFI153:
 11254              		.cfi_def_cfa_offset 44
 11255              		.cfi_offset 4, -44
 11256              		.cfi_offset 5, -40
 11257              		.cfi_offset 6, -36
 11258              		.cfi_offset 7, -32
 11259              		.cfi_offset 8, -28
 11260              		.cfi_offset 9, -24
 11261              		.cfi_offset 10, -20
 11262              		.cfi_offset 14, -16
 11263 0006 9DB0     		sub	sp, sp, #116
 11264              	.LCFI154:
 11265              		.cfi_def_cfa_offset 160
 11266 0008 25AC     		add	r4, sp, #148
 11267 000a 54F8046B 		ldr	r6, [r4], #4
6033:Middlewares/Third_Party/FatFs/src/ff.c **** 	va_list arp;
6034:Middlewares/Third_Party/FatFs/src/ff.c **** 	putbuff pb;
6035:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE f, r;
6036:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, j, w;
6037:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD v;
6038:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR c, d, str[32], *p;
6039:Middlewares/Third_Party/FatFs/src/ff.c **** 
6040:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 332


6041:Middlewares/Third_Party/FatFs/src/ff.c **** 	putc_init(&pb, fp);
 11268              		.loc 1 6041 0
 11269 000e 0146     		mov	r1, r0
 11270 0010 08A8     		add	r0, sp, #32
 11271              	.LVL1736:
 11272 0012 FFF7FEFF 		bl	putc_init
 11273              	.LVL1737:
6042:Middlewares/Third_Party/FatFs/src/ff.c **** 
6043:Middlewares/Third_Party/FatFs/src/ff.c **** 	va_start(arp, fmt);
 11274              		.loc 1 6043 0
 11275 0016 1B94     		str	r4, [sp, #108]
 11276 0018 F9E0     		b	.L1091
 11277              	.LVL1738:
 11278              	.L1093:
6044:Middlewares/Third_Party/FatFs/src/ff.c **** 
6045:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (;;) {
6046:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = *fmt++;
6047:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 0) break;			/* End of string */
6048:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c != '%') {				/* Non escape character */
6049:Middlewares/Third_Party/FatFs/src/ff.c **** 			putc_bfd(&pb, c);
6050:Middlewares/Third_Party/FatFs/src/ff.c **** 			continue;
6051:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
6052:Middlewares/Third_Party/FatFs/src/ff.c **** 		w = f = 0;
6053:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = *fmt++;
 11279              		.loc 1 6053 0
 11280 001a 0236     		adds	r6, r6, #2
 11281              	.LVL1739:
 11282 001c 2178     		ldrb	r1, [r4]	@ zero_extendqisi2
 11283              	.LVL1740:
6054:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == '0') {				/* Flag: '0' padding */
 11284              		.loc 1 6054 0
 11285 001e 3029     		cmp	r1, #48
 11286 0020 04D0     		beq	.L1140
6055:Middlewares/Third_Party/FatFs/src/ff.c **** 			f = 1; c = *fmt++;
6056:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
6057:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (c == '-') {			/* Flag: left justified */
 11287              		.loc 1 6057 0
 11288 0022 2D29     		cmp	r1, #45
 11289 0024 06D0     		beq	.L1141
6052:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = *fmt++;
 11290              		.loc 1 6052 0
 11291 0026 0027     		movs	r7, #0
 11292              	.LVL1741:
 11293              	.L1096:
6055:Middlewares/Third_Party/FatFs/src/ff.c **** 			f = 1; c = *fmt++;
 11294              		.loc 1 6055 0
 11295 0028 0025     		movs	r5, #0
 11296 002a 0EE0     		b	.L1097
 11297              	.LVL1742:
 11298              	.L1140:
 11299 002c A61C     		adds	r6, r4, #2
 11300              	.LVL1743:
 11301 002e 6178     		ldrb	r1, [r4, #1]	@ zero_extendqisi2
 11302              	.LVL1744:
 11303 0030 0127     		movs	r7, #1
 11304 0032 F9E7     		b	.L1096
 11305              	.LVL1745:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 333


 11306              	.L1141:
6058:Middlewares/Third_Party/FatFs/src/ff.c **** 				f = 2; c = *fmt++;
 11307              		.loc 1 6058 0
 11308 0034 A61C     		adds	r6, r4, #2
 11309              	.LVL1746:
 11310 0036 6178     		ldrb	r1, [r4, #1]	@ zero_extendqisi2
 11311              	.LVL1747:
 11312 0038 0227     		movs	r7, #2
 11313 003a F5E7     		b	.L1096
 11314              	.LVL1748:
 11315              	.L1098:
6059:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
6060:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
6061:Middlewares/Third_Party/FatFs/src/ff.c **** 		while (IsDigit(c)) {		/* Precision */
6062:Middlewares/Third_Party/FatFs/src/ff.c **** 			w = w * 10 + c - '0';
 11316              		.loc 1 6062 0
 11317 003c 05EB8505 		add	r5, r5, r5, lsl #2
 11318              	.LVL1749:
 11319 0040 6B00     		lsls	r3, r5, #1
 11320 0042 CD18     		adds	r5, r1, r3
 11321 0044 303D     		subs	r5, r5, #48
 11322              	.LVL1750:
6063:Middlewares/Third_Party/FatFs/src/ff.c **** 			c = *fmt++;
 11323              		.loc 1 6063 0
 11324 0046 3178     		ldrb	r1, [r6]	@ zero_extendqisi2
 11325              	.LVL1751:
 11326 0048 0136     		adds	r6, r6, #1
 11327              	.LVL1752:
 11328              	.L1097:
6061:Middlewares/Third_Party/FatFs/src/ff.c **** 			w = w * 10 + c - '0';
 11329              		.loc 1 6061 0
 11330 004a A1F13003 		sub	r3, r1, #48
 11331 004e DBB2     		uxtb	r3, r3
 11332 0050 092B     		cmp	r3, #9
 11333 0052 F3D9     		bls	.L1098
6064:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
6065:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 'l' || c == 'L') {	/* Prefix: Size is long int */
 11334              		.loc 1 6065 0
 11335 0054 4C29     		cmp	r1, #76
 11336 0056 18BF     		it	ne
 11337 0058 6C29     		cmpne	r1, #108
 11338 005a 03D1     		bne	.L1099
6066:Middlewares/Third_Party/FatFs/src/ff.c **** 			f |= 4; c = *fmt++;
 11339              		.loc 1 6066 0
 11340 005c 47F00407 		orr	r7, r7, #4
 11341              	.LVL1753:
 11342 0060 3178     		ldrb	r1, [r6]	@ zero_extendqisi2
 11343              	.LVL1754:
 11344 0062 0136     		adds	r6, r6, #1
 11345              	.LVL1755:
 11346              	.L1099:
6067:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
6068:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!c) break;
 11347              		.loc 1 6068 0
 11348 0064 0029     		cmp	r1, #0
 11349 0066 00F0DD80 		beq	.L1092
 11350              	.LVL1756:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 334


6069:Middlewares/Third_Party/FatFs/src/ff.c **** 		d = c;
6070:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (IsLower(d)) d -= 0x20;
 11351              		.loc 1 6070 0
 11352 006a A1F16103 		sub	r3, r1, #97
 11353 006e DBB2     		uxtb	r3, r3
 11354 0070 192B     		cmp	r3, #25
 11355 0072 14D8     		bhi	.L1134
 11356              		.loc 1 6070 0 is_stmt 0 discriminator 1
 11357 0074 A1F12003 		sub	r3, r1, #32
 11358 0078 DBB2     		uxtb	r3, r3
 11359              	.LVL1757:
 11360              	.L1100:
6071:Middlewares/Third_Party/FatFs/src/ff.c **** 		switch (d) {				/* Type is... */
 11361              		.loc 1 6071 0 is_stmt 1
 11362 007a A3F14202 		sub	r2, r3, #66
 11363 007e 162A     		cmp	r2, #22
 11364 0080 48D8     		bhi	.L1101
 11365 0082 DFE802F0 		tbb	[pc, r2]
 11366              	.L1103:
 11367 0086 4B       		.byte	(.L1102-.L1103)/2
 11368 0087 39       		.byte	(.L1104-.L1103)/2
 11369 0088 41       		.byte	(.L1105-.L1103)/2
 11370 0089 47       		.byte	(.L1101-.L1103)/2
 11371 008a 47       		.byte	(.L1101-.L1103)/2
 11372 008b 47       		.byte	(.L1101-.L1103)/2
 11373 008c 47       		.byte	(.L1101-.L1103)/2
 11374 008d 47       		.byte	(.L1101-.L1103)/2
 11375 008e 47       		.byte	(.L1101-.L1103)/2
 11376 008f 47       		.byte	(.L1101-.L1103)/2
 11377 0090 47       		.byte	(.L1101-.L1103)/2
 11378 0091 47       		.byte	(.L1101-.L1103)/2
 11379 0092 47       		.byte	(.L1101-.L1103)/2
 11380 0093 4E       		.byte	(.L1135-.L1103)/2
 11381 0094 47       		.byte	(.L1101-.L1103)/2
 11382 0095 47       		.byte	(.L1101-.L1103)/2
 11383 0096 47       		.byte	(.L1101-.L1103)/2
 11384 0097 0E       		.byte	(.L1107-.L1103)/2
 11385 0098 47       		.byte	(.L1101-.L1103)/2
 11386 0099 41       		.byte	(.L1105-.L1103)/2
 11387 009a 47       		.byte	(.L1101-.L1103)/2
 11388 009b 47       		.byte	(.L1101-.L1103)/2
 11389 009c 44       		.byte	(.L1108-.L1103)/2
 11390              	.LVL1758:
 11391 009d 00       		.p2align 1
 11392              	.L1134:
6069:Middlewares/Third_Party/FatFs/src/ff.c **** 		d = c;
 11393              		.loc 1 6069 0
 11394 009e 0B46     		mov	r3, r1
 11395 00a0 EBE7     		b	.L1100
 11396              	.LVL1759:
 11397              	.L1107:
6072:Middlewares/Third_Party/FatFs/src/ff.c **** 		case 'S' :					/* String */
6073:Middlewares/Third_Party/FatFs/src/ff.c **** 			p = va_arg(arp, TCHAR*);
 11398              		.loc 1 6073 0
 11399 00a2 1B9B     		ldr	r3, [sp, #108]
 11400              	.LVL1760:
 11401 00a4 1A1D     		adds	r2, r3, #4
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 335


 11402 00a6 1B92     		str	r2, [sp, #108]
 11403 00a8 1C68     		ldr	r4, [r3]
 11404              	.LVL1761:
6074:Middlewares/Third_Party/FatFs/src/ff.c **** 			for (j = 0; p[j]; j++) ;
 11405              		.loc 1 6074 0
 11406 00aa 0023     		movs	r3, #0
 11407 00ac 00E0     		b	.L1109
 11408              	.LVL1762:
 11409              	.L1110:
 11410              		.loc 1 6074 0 is_stmt 0 discriminator 3
 11411 00ae 0133     		adds	r3, r3, #1
 11412              	.LVL1763:
 11413              	.L1109:
 11414              		.loc 1 6074 0 discriminator 1
 11415 00b0 E25C     		ldrb	r2, [r4, r3]	@ zero_extendqisi2
 11416 00b2 002A     		cmp	r2, #0
 11417 00b4 FBD1     		bne	.L1110
6075:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!(f & 2)) {
 11418              		.loc 1 6075 0 is_stmt 1
 11419 00b6 17F0020F 		tst	r7, #2
 11420 00ba 07D0     		beq	.L1111
 11421 00bc 1F46     		mov	r7, r3
 11422              	.LVL1764:
 11423 00be 0DE0     		b	.L1114
 11424              	.LVL1765:
 11425              	.L1113:
6076:Middlewares/Third_Party/FatFs/src/ff.c **** 				while (j++ < w) putc_bfd(&pb, ' ');
 11426              		.loc 1 6076 0 discriminator 2
 11427 00c0 2021     		movs	r1, #32
 11428 00c2 0DEB0100 		add	r0, sp, r1
 11429 00c6 FFF7FEFF 		bl	putc_bfd
 11430              	.LVL1766:
 11431 00ca 3B46     		mov	r3, r7
 11432              	.LVL1767:
 11433              	.L1111:
 11434              		.loc 1 6076 0 is_stmt 0 discriminator 1
 11435 00cc 5F1C     		adds	r7, r3, #1
 11436              	.LVL1768:
 11437 00ce AB42     		cmp	r3, r5
 11438 00d0 F6D3     		bcc	.L1113
 11439 00d2 03E0     		b	.L1114
 11440              	.LVL1769:
 11441              	.L1115:
6077:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
6078:Middlewares/Third_Party/FatFs/src/ff.c **** 			while (*p) putc_bfd(&pb, *p++);
 11442              		.loc 1 6078 0 is_stmt 1 discriminator 2
 11443 00d4 0134     		adds	r4, r4, #1
 11444              	.LVL1770:
 11445 00d6 08A8     		add	r0, sp, #32
 11446 00d8 FFF7FEFF 		bl	putc_bfd
 11447              	.LVL1771:
 11448              	.L1114:
 11449              		.loc 1 6078 0 is_stmt 0 discriminator 1
 11450 00dc 2178     		ldrb	r1, [r4]	@ zero_extendqisi2
 11451 00de 0029     		cmp	r1, #0
 11452 00e0 F8D1     		bne	.L1115
 11453 00e2 05E0     		b	.L1116
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 336


 11454              	.LVL1772:
 11455              	.L1117:
6079:Middlewares/Third_Party/FatFs/src/ff.c **** 			while (j++ < w) putc_bfd(&pb, ' ');
 11456              		.loc 1 6079 0 is_stmt 1 discriminator 2
 11457 00e4 2021     		movs	r1, #32
 11458 00e6 0DEB0100 		add	r0, sp, r1
 11459 00ea FFF7FEFF 		bl	putc_bfd
 11460              	.LVL1773:
 11461 00ee 2746     		mov	r7, r4
 11462              	.LVL1774:
 11463              	.L1116:
 11464              		.loc 1 6079 0 is_stmt 0 discriminator 1
 11465 00f0 7C1C     		adds	r4, r7, #1
 11466              	.LVL1775:
 11467 00f2 AF42     		cmp	r7, r5
 11468 00f4 F6D3     		bcc	.L1117
 11469 00f6 8AE0     		b	.L1091
 11470              	.LVL1776:
 11471              	.L1104:
6080:Middlewares/Third_Party/FatFs/src/ff.c **** 			continue;
6081:Middlewares/Third_Party/FatFs/src/ff.c **** 
6082:Middlewares/Third_Party/FatFs/src/ff.c **** 		case 'C' :					/* Character */
6083:Middlewares/Third_Party/FatFs/src/ff.c **** 			putc_bfd(&pb, (TCHAR)va_arg(arp, int)); continue;
 11472              		.loc 1 6083 0 is_stmt 1
 11473 00f8 1B9B     		ldr	r3, [sp, #108]
 11474              	.LVL1777:
 11475 00fa 1A1D     		adds	r2, r3, #4
 11476 00fc 1B92     		str	r2, [sp, #108]
 11477 00fe 1978     		ldrb	r1, [r3]	@ zero_extendqisi2
 11478              	.LVL1778:
 11479 0100 08A8     		add	r0, sp, #32
 11480 0102 FFF7FEFF 		bl	putc_bfd
 11481              	.LVL1779:
 11482 0106 82E0     		b	.L1091
 11483              	.LVL1780:
 11484              	.L1105:
6084:Middlewares/Third_Party/FatFs/src/ff.c **** 
6085:Middlewares/Third_Party/FatFs/src/ff.c **** 		case 'B' :					/* Binary */
6086:Middlewares/Third_Party/FatFs/src/ff.c **** 			r = 2; break;
6087:Middlewares/Third_Party/FatFs/src/ff.c **** 
6088:Middlewares/Third_Party/FatFs/src/ff.c **** 		case 'O' :					/* Octal */
6089:Middlewares/Third_Party/FatFs/src/ff.c **** 			r = 8; break;
6090:Middlewares/Third_Party/FatFs/src/ff.c **** 
6091:Middlewares/Third_Party/FatFs/src/ff.c **** 		case 'D' :					/* Signed decimal */
6092:Middlewares/Third_Party/FatFs/src/ff.c **** 		case 'U' :					/* Unsigned decimal */
6093:Middlewares/Third_Party/FatFs/src/ff.c **** 			r = 10; break;
 11485              		.loc 1 6093 0
 11486 0108 4FF00A0C 		mov	ip, #10
 11487 010c 0BE0     		b	.L1106
 11488              	.LVL1781:
 11489              	.L1108:
6094:Middlewares/Third_Party/FatFs/src/ff.c **** 
6095:Middlewares/Third_Party/FatFs/src/ff.c **** 		case 'X' :					/* Hexdecimal */
6096:Middlewares/Third_Party/FatFs/src/ff.c **** 			r = 16; break;
 11490              		.loc 1 6096 0
 11491 010e 4FF0100C 		mov	ip, #16
 11492 0112 08E0     		b	.L1106
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 337


 11493              	.LVL1782:
 11494              	.L1101:
6097:Middlewares/Third_Party/FatFs/src/ff.c **** 
6098:Middlewares/Third_Party/FatFs/src/ff.c **** 		default:					/* Unknown type (pass-through) */
6099:Middlewares/Third_Party/FatFs/src/ff.c **** 			putc_bfd(&pb, c); continue;
 11495              		.loc 1 6099 0
 11496 0114 08A8     		add	r0, sp, #32
 11497 0116 FFF7FEFF 		bl	putc_bfd
 11498              	.LVL1783:
 11499 011a 78E0     		b	.L1091
 11500              	.LVL1784:
 11501              	.L1102:
6086:Middlewares/Third_Party/FatFs/src/ff.c **** 
 11502              		.loc 1 6086 0
 11503 011c 4FF0020C 		mov	ip, #2
 11504 0120 01E0     		b	.L1106
 11505              	.L1135:
6089:Middlewares/Third_Party/FatFs/src/ff.c **** 
 11506              		.loc 1 6089 0
 11507 0122 4FF0080C 		mov	ip, #8
 11508              	.L1106:
 11509              	.LVL1785:
6100:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
6101:Middlewares/Third_Party/FatFs/src/ff.c **** 
6102:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Get an argument and put it in numeral */
6103:Middlewares/Third_Party/FatFs/src/ff.c **** 		v = (f & 4) ? (DWORD)va_arg(arp, long) : ((d == 'D') ? (DWORD)(long)va_arg(arp, int) : (DWORD)va_
 11510              		.loc 1 6103 0
 11511 0126 17F0040F 		tst	r7, #4
 11512 012a 12D1     		bne	.L1142
 11513              		.loc 1 6103 0 is_stmt 0 discriminator 2
 11514 012c 442B     		cmp	r3, #68
 11515 012e 15D0     		beq	.L1143
 11516              		.loc 1 6103 0
 11517 0130 1B9A     		ldr	r2, [sp, #108]
 11518 0132 101D     		adds	r0, r2, #4
 11519 0134 1B90     		str	r0, [sp, #108]
 11520 0136 1068     		ldr	r0, [r2]
 11521              	.L1119:
 11522              	.LVL1786:
6104:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (d == 'D' && (v & 0x80000000)) {
 11523              		.loc 1 6104 0 is_stmt 1 discriminator 8
 11524 0138 C20F     		lsrs	r2, r0, #31
 11525 013a 442B     		cmp	r3, #68
 11526 013c 14BF     		ite	ne
 11527 013e 0023     		movne	r3, #0
 11528 0140 02F00103 		andeq	r3, r2, #1
 11529              	.LVL1787:
 11530 0144 13B1     		cbz	r3, .L1121
6105:Middlewares/Third_Party/FatFs/src/ff.c **** 			v = 0 - v;
 11531              		.loc 1 6105 0
 11532 0146 4042     		negs	r0, r0
 11533              	.LVL1788:
6106:Middlewares/Third_Party/FatFs/src/ff.c **** 			f |= 8;
 11534              		.loc 1 6106 0
 11535 0148 47F00807 		orr	r7, r7, #8
 11536              	.LVL1789:
 11537              	.L1121:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 338


6107:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
6108:Middlewares/Third_Party/FatFs/src/ff.c **** 		i = 0;
 11538              		.loc 1 6108 0
 11539 014c 4FF0000E 		mov	lr, #0
 11540 0150 1CE0     		b	.L1124
 11541              	.LVL1790:
 11542              	.L1142:
6103:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (d == 'D' && (v & 0x80000000)) {
 11543              		.loc 1 6103 0
 11544 0152 1B9A     		ldr	r2, [sp, #108]
 11545 0154 101D     		adds	r0, r2, #4
 11546 0156 1B90     		str	r0, [sp, #108]
 11547 0158 1068     		ldr	r0, [r2]
 11548 015a EDE7     		b	.L1119
 11549              	.L1143:
 11550 015c 1B9A     		ldr	r2, [sp, #108]
 11551 015e 101D     		adds	r0, r2, #4
 11552 0160 1B90     		str	r0, [sp, #108]
 11553 0162 1068     		ldr	r0, [r2]
 11554 0164 E8E7     		b	.L1119
 11555              	.LVL1791:
 11556              	.L1145:
6109:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
6110:Middlewares/Third_Party/FatFs/src/ff.c **** 			d = (TCHAR)(v % r); v /= r;
6111:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (d > 9) d += (c == 'x') ? 0x27 : 0x07;
 11557              		.loc 1 6111 0
 11558 0166 2724     		movs	r4, #39
 11559              	.L1123:
 11560              		.loc 1 6111 0 is_stmt 0 discriminator 5
 11561 0168 2344     		add	r3, r3, r4
 11562              	.LVL1792:
 11563 016a DBB2     		uxtb	r3, r3
 11564              	.LVL1793:
 11565              	.L1122:
6112:Middlewares/Third_Party/FatFs/src/ff.c **** 			str[i++] = d + '0';
 11566              		.loc 1 6112 0 is_stmt 1
 11567 016c 0EF10104 		add	r4, lr, #1
 11568              	.LVL1794:
 11569 0170 3033     		adds	r3, r3, #48
 11570              	.LVL1795:
 11571 0172 0DF17008 		add	r8, sp, #112
 11572 0176 F044     		add	r8, r8, lr
 11573 0178 08F8703C 		strb	r3, [r8, #-112]
6113:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (v && i < sizeof str / sizeof str[0]);
 11574              		.loc 1 6113 0
 11575 017c 0032     		adds	r2, r2, #0
 11576 017e 18BF     		it	ne
 11577 0180 0122     		movne	r2, #1
 11578 0182 1F2C     		cmp	r4, #31
 11579 0184 88BF     		it	hi
 11580 0186 0022     		movhi	r2, #0
 11581 0188 62B1     		cbz	r2, .L1144
6112:Middlewares/Third_Party/FatFs/src/ff.c **** 			str[i++] = d + '0';
 11582              		.loc 1 6112 0
 11583 018a A646     		mov	lr, r4
 11584              	.LVL1796:
 11585              	.L1124:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 339


6110:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (d > 9) d += (c == 'x') ? 0x27 : 0x07;
 11586              		.loc 1 6110 0
 11587 018c B0FBFCF2 		udiv	r2, r0, ip
 11588 0190 0CFB1203 		mls	r3, ip, r2, r0
 11589 0194 DBB2     		uxtb	r3, r3
 11590              	.LVL1797:
 11591 0196 1046     		mov	r0, r2
 11592              	.LVL1798:
6111:Middlewares/Third_Party/FatFs/src/ff.c **** 			str[i++] = d + '0';
 11593              		.loc 1 6111 0
 11594 0198 092B     		cmp	r3, #9
 11595 019a E7D9     		bls	.L1122
6111:Middlewares/Third_Party/FatFs/src/ff.c **** 			str[i++] = d + '0';
 11596              		.loc 1 6111 0 is_stmt 0 discriminator 1
 11597 019c 7829     		cmp	r1, #120
 11598 019e E2D0     		beq	.L1145
6111:Middlewares/Third_Party/FatFs/src/ff.c **** 			str[i++] = d + '0';
 11599              		.loc 1 6111 0
 11600 01a0 0724     		movs	r4, #7
 11601 01a2 E1E7     		b	.L1123
 11602              	.LVL1799:
 11603              	.L1144:
6114:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (f & 8) str[i++] = '-';
 11604              		.loc 1 6114 0 is_stmt 1
 11605 01a4 17F0080F 		tst	r7, #8
 11606 01a8 06D0     		beq	.L1125
 11607              	.LVL1800:
 11608              		.loc 1 6114 0 is_stmt 0 discriminator 1
 11609 01aa 1CAB     		add	r3, sp, #112
 11610 01ac 1C44     		add	r4, r4, r3
 11611 01ae 2D23     		movs	r3, #45
 11612 01b0 04F8703C 		strb	r3, [r4, #-112]
 11613 01b4 0EF10204 		add	r4, lr, #2
 11614              	.LVL1801:
 11615              	.L1125:
6115:Middlewares/Third_Party/FatFs/src/ff.c **** 		j = i; d = (f & 1) ? '0' : ' ';
 11616              		.loc 1 6115 0 is_stmt 1
 11617 01b8 17F0010F 		tst	r7, #1
 11618 01bc 03D0     		beq	.L1138
 11619 01be 4FF0300A 		mov	r10, #48
 11620              	.L1126:
 11621              	.LVL1802:
 11622              		.loc 1 6115 0 is_stmt 0 discriminator 4
 11623 01c2 A046     		mov	r8, r4
6116:Middlewares/Third_Party/FatFs/src/ff.c **** 		while (!(f & 2) && j++ < w) putc_bfd(&pb, d);
 11624              		.loc 1 6116 0 is_stmt 1 discriminator 4
 11625 01c4 07E0     		b	.L1127
 11626              	.LVL1803:
 11627              	.L1138:
6115:Middlewares/Third_Party/FatFs/src/ff.c **** 		j = i; d = (f & 1) ? '0' : ' ';
 11628              		.loc 1 6115 0
 11629 01c6 4FF0200A 		mov	r10, #32
 11630 01ca FAE7     		b	.L1126
 11631              	.LVL1804:
 11632              	.L1129:
 11633              		.loc 1 6116 0 discriminator 3
 11634 01cc 5146     		mov	r1, r10
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 340


 11635 01ce 08A8     		add	r0, sp, #32
 11636 01d0 FFF7FEFF 		bl	putc_bfd
 11637              	.LVL1805:
 11638 01d4 C846     		mov	r8, r9
 11639              	.LVL1806:
 11640              	.L1127:
 11641              		.loc 1 6116 0 is_stmt 0 discriminator 1
 11642 01d6 17F0020F 		tst	r7, #2
 11643 01da 04D1     		bne	.L1130
 11644              		.loc 1 6116 0 discriminator 2
 11645 01dc 08F10109 		add	r9, r8, #1
 11646              	.LVL1807:
 11647 01e0 A845     		cmp	r8, r5
 11648 01e2 F3D3     		bcc	.L1129
 11649              		.loc 1 6116 0
 11650 01e4 C846     		mov	r8, r9
 11651              	.LVL1808:
 11652              	.L1130:
6117:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
6118:Middlewares/Third_Party/FatFs/src/ff.c **** 			putc_bfd(&pb, str[--i]);
 11653              		.loc 1 6118 0 is_stmt 1 discriminator 1
 11654 01e6 013C     		subs	r4, r4, #1
 11655              	.LVL1809:
 11656 01e8 1CAB     		add	r3, sp, #112
 11657 01ea 2344     		add	r3, r3, r4
 11658 01ec 13F8701C 		ldrb	r1, [r3, #-112]	@ zero_extendqisi2
 11659 01f0 08A8     		add	r0, sp, #32
 11660 01f2 FFF7FEFF 		bl	putc_bfd
 11661              	.LVL1810:
6119:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (i);
 11662              		.loc 1 6119 0 discriminator 1
 11663 01f6 002C     		cmp	r4, #0
 11664 01f8 F5D1     		bne	.L1130
 11665 01fa 04E0     		b	.L1131
 11666              	.LVL1811:
 11667              	.L1132:
6120:Middlewares/Third_Party/FatFs/src/ff.c **** 		while (j++ < w) putc_bfd(&pb, d);
 11668              		.loc 1 6120 0 discriminator 2
 11669 01fc 5146     		mov	r1, r10
 11670 01fe 08A8     		add	r0, sp, #32
 11671 0200 FFF7FEFF 		bl	putc_bfd
 11672              	.LVL1812:
 11673 0204 A046     		mov	r8, r4
 11674              	.LVL1813:
 11675              	.L1131:
 11676              		.loc 1 6120 0 is_stmt 0 discriminator 1
 11677 0206 08F10104 		add	r4, r8, #1
 11678              	.LVL1814:
 11679 020a A845     		cmp	r8, r5
 11680 020c F6D3     		bcc	.L1132
 11681              	.LVL1815:
 11682              	.L1091:
6046:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 0) break;			/* End of string */
 11683              		.loc 1 6046 0 is_stmt 1
 11684 020e 741C     		adds	r4, r6, #1
 11685              	.LVL1816:
 11686 0210 3178     		ldrb	r1, [r6]	@ zero_extendqisi2
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 341


 11687              	.LVL1817:
6047:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c != '%') {				/* Non escape character */
 11688              		.loc 1 6047 0
 11689 0212 39B1     		cbz	r1, .L1092
6048:Middlewares/Third_Party/FatFs/src/ff.c **** 			putc_bfd(&pb, c);
 11690              		.loc 1 6048 0
 11691 0214 2529     		cmp	r1, #37
 11692 0216 3FF400AF 		beq	.L1093
6049:Middlewares/Third_Party/FatFs/src/ff.c **** 			continue;
 11693              		.loc 1 6049 0
 11694 021a 08A8     		add	r0, sp, #32
 11695 021c FFF7FEFF 		bl	putc_bfd
 11696              	.LVL1818:
6046:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 0) break;			/* End of string */
 11697              		.loc 1 6046 0
 11698 0220 2646     		mov	r6, r4
6050:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 11699              		.loc 1 6050 0
 11700 0222 F4E7     		b	.L1091
 11701              	.LVL1819:
 11702              	.L1092:
6121:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
6122:Middlewares/Third_Party/FatFs/src/ff.c **** 
6123:Middlewares/Third_Party/FatFs/src/ff.c **** 	va_end(arp);
6124:Middlewares/Third_Party/FatFs/src/ff.c **** 
6125:Middlewares/Third_Party/FatFs/src/ff.c **** 	return putc_flush(&pb);
 11703              		.loc 1 6125 0
 11704 0224 08A8     		add	r0, sp, #32
 11705 0226 FFF7FEFF 		bl	putc_flush
 11706              	.LVL1820:
6126:Middlewares/Third_Party/FatFs/src/ff.c **** }
 11707              		.loc 1 6126 0
 11708 022a 1DB0     		add	sp, sp, #116
 11709              	.LCFI155:
 11710              		.cfi_def_cfa_offset 44
 11711              		@ sp needed
 11712 022c BDE8F047 		pop	{r4, r5, r6, r7, r8, r9, r10, lr}
 11713              	.LCFI156:
 11714              		.cfi_restore 14
 11715              		.cfi_restore 10
 11716              		.cfi_restore 9
 11717              		.cfi_restore 8
 11718              		.cfi_restore 7
 11719              		.cfi_restore 6
 11720              		.cfi_restore 5
 11721              		.cfi_restore 4
 11722              		.cfi_def_cfa_offset 12
 11723 0230 03B0     		add	sp, sp, #12
 11724              	.LCFI157:
 11725              		.cfi_restore 3
 11726              		.cfi_restore 2
 11727              		.cfi_restore 1
 11728              		.cfi_def_cfa_offset 0
 11729 0232 7047     		bx	lr
 11730              		.cfi_endproc
 11731              	.LFE211:
 11733              		.section	.bss.CurrVol,"aw",%nobits
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 342


 11734              		.set	.LANCHOR2,. + 0
 11737              	CurrVol:
 11738 0000 00       		.space	1
 11739              		.section	.bss.FatFs,"aw",%nobits
 11740              		.align	2
 11741              		.set	.LANCHOR3,. + 0
 11744              	FatFs:
 11745 0000 00000000 		.space	8
 11745      00000000 
 11746              		.section	.bss.Files,"aw",%nobits
 11747              		.align	2
 11748              		.set	.LANCHOR0,. + 0
 11751              	Files:
 11752 0000 00000000 		.space	32
 11752      00000000 
 11752      00000000 
 11752      00000000 
 11752      00000000 
 11753              		.section	.bss.Fsid,"aw",%nobits
 11754              		.align	1
 11755              		.set	.LANCHOR4,. + 0
 11758              	Fsid:
 11759 0000 0000     		.space	2
 11760              		.section	.rodata.ExCvt,"a",%progbits
 11761              		.align	2
 11762              		.set	.LANCHOR5,. + 0
 11765              	ExCvt:
 11766 0000 43       		.byte	67
 11767 0001 55       		.byte	85
 11768 0002 45       		.byte	69
 11769 0003 41       		.byte	65
 11770 0004 41       		.byte	65
 11771 0005 41       		.byte	65
 11772 0006 41       		.byte	65
 11773 0007 43       		.byte	67
 11774 0008 45       		.byte	69
 11775 0009 45       		.byte	69
 11776 000a 45       		.byte	69
 11777 000b 49       		.byte	73
 11778 000c 49       		.byte	73
 11779 000d 49       		.byte	73
 11780 000e 41       		.byte	65
 11781 000f 41       		.byte	65
 11782 0010 45       		.byte	69
 11783 0011 92       		.byte	-110
 11784 0012 92       		.byte	-110
 11785 0013 4F       		.byte	79
 11786 0014 4F       		.byte	79
 11787 0015 4F       		.byte	79
 11788 0016 55       		.byte	85
 11789 0017 55       		.byte	85
 11790 0018 59       		.byte	89
 11791 0019 4F       		.byte	79
 11792 001a 55       		.byte	85
 11793 001b 4F       		.byte	79
 11794 001c 9C       		.byte	-100
 11795 001d 4F       		.byte	79
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 343


 11796 001e 9E       		.byte	-98
 11797 001f 9F       		.byte	-97
 11798 0020 41       		.byte	65
 11799 0021 49       		.byte	73
 11800 0022 4F       		.byte	79
 11801 0023 55       		.byte	85
 11802 0024 A5       		.byte	-91
 11803 0025 A5       		.byte	-91
 11804 0026 A6       		.byte	-90
 11805 0027 A7       		.byte	-89
 11806 0028 A8       		.byte	-88
 11807 0029 A9       		.byte	-87
 11808 002a AA       		.byte	-86
 11809 002b AB       		.byte	-85
 11810 002c AC       		.byte	-84
 11811 002d AD       		.byte	-83
 11812 002e AE       		.byte	-82
 11813 002f AF       		.byte	-81
 11814 0030 B0       		.byte	-80
 11815 0031 B1       		.byte	-79
 11816 0032 B2       		.byte	-78
 11817 0033 B3       		.byte	-77
 11818 0034 B4       		.byte	-76
 11819 0035 41       		.byte	65
 11820 0036 41       		.byte	65
 11821 0037 41       		.byte	65
 11822 0038 B8       		.byte	-72
 11823 0039 B9       		.byte	-71
 11824 003a BA       		.byte	-70
 11825 003b BB       		.byte	-69
 11826 003c BC       		.byte	-68
 11827 003d BD       		.byte	-67
 11828 003e BE       		.byte	-66
 11829 003f BF       		.byte	-65
 11830 0040 C0       		.byte	-64
 11831 0041 C1       		.byte	-63
 11832 0042 C2       		.byte	-62
 11833 0043 C3       		.byte	-61
 11834 0044 C4       		.byte	-60
 11835 0045 C5       		.byte	-59
 11836 0046 41       		.byte	65
 11837 0047 41       		.byte	65
 11838 0048 C8       		.byte	-56
 11839 0049 C9       		.byte	-55
 11840 004a CA       		.byte	-54
 11841 004b CB       		.byte	-53
 11842 004c CC       		.byte	-52
 11843 004d CD       		.byte	-51
 11844 004e CE       		.byte	-50
 11845 004f CF       		.byte	-49
 11846 0050 D1       		.byte	-47
 11847 0051 D1       		.byte	-47
 11848 0052 45       		.byte	69
 11849 0053 45       		.byte	69
 11850 0054 45       		.byte	69
 11851 0055 49       		.byte	73
 11852 0056 49       		.byte	73
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 344


 11853 0057 49       		.byte	73
 11854 0058 49       		.byte	73
 11855 0059 D9       		.byte	-39
 11856 005a DA       		.byte	-38
 11857 005b DB       		.byte	-37
 11858 005c DC       		.byte	-36
 11859 005d DD       		.byte	-35
 11860 005e 49       		.byte	73
 11861 005f DF       		.byte	-33
 11862 0060 4F       		.byte	79
 11863 0061 E1       		.byte	-31
 11864 0062 4F       		.byte	79
 11865 0063 4F       		.byte	79
 11866 0064 4F       		.byte	79
 11867 0065 4F       		.byte	79
 11868 0066 E6       		.byte	-26
 11869 0067 E8       		.byte	-24
 11870 0068 E8       		.byte	-24
 11871 0069 55       		.byte	85
 11872 006a 55       		.byte	85
 11873 006b 55       		.byte	85
 11874 006c 59       		.byte	89
 11875 006d 59       		.byte	89
 11876 006e EE       		.byte	-18
 11877 006f EF       		.byte	-17
 11878 0070 F0       		.byte	-16
 11879 0071 F1       		.byte	-15
 11880 0072 F2       		.byte	-14
 11881 0073 F3       		.byte	-13
 11882 0074 F4       		.byte	-12
 11883 0075 F5       		.byte	-11
 11884 0076 F6       		.byte	-10
 11885 0077 F7       		.byte	-9
 11886 0078 F8       		.byte	-8
 11887 0079 F9       		.byte	-7
 11888 007a FA       		.byte	-6
 11889 007b FB       		.byte	-5
 11890 007c FC       		.byte	-4
 11891 007d FD       		.byte	-3
 11892 007e FE       		.byte	-2
 11893 007f FF       		.byte	-1
 11894              		.section	.rodata.LfnOfs,"a",%progbits
 11895              		.align	2
 11896              		.set	.LANCHOR1,. + 0
 11899              	LfnOfs:
 11900 0000 01       		.byte	1
 11901 0001 03       		.byte	3
 11902 0002 05       		.byte	5
 11903 0003 07       		.byte	7
 11904 0004 09       		.byte	9
 11905 0005 0E       		.byte	14
 11906 0006 10       		.byte	16
 11907 0007 12       		.byte	18
 11908 0008 14       		.byte	20
 11909 0009 16       		.byte	22
 11910 000a 18       		.byte	24
 11911 000b 1C       		.byte	28
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 345


 11912 000c 1E       		.byte	30
 11913              		.section	.rodata.create_name.str1.4,"aMS",%progbits,1
 11914              		.align	2
 11915              	.LC0:
 11916 0000 222A3A3C 		.ascii	"\"*:<>?|\177\000"
 11916      3E3F7C7F 
 11916      00
 11917 0009 000000   		.space	3
 11918              	.LC1:
 11919 000c 2B2C3B3D 		.ascii	"+,;=[]\000"
 11919      5B5D00
 11920              		.section	.rodata.cst.14521,"a",%progbits
 11921              		.align	2
 11922              		.set	.LANCHOR7,. + 0
 11925              	cst.14521:
 11926 0000 0100     		.short	1
 11927 0002 0400     		.short	4
 11928 0004 1000     		.short	16
 11929 0006 4000     		.short	64
 11930 0008 0001     		.short	256
 11931 000a 0002     		.short	512
 11932 000c 0000     		.short	0
 11933              		.section	.rodata.cst32.14522,"a",%progbits
 11934              		.align	2
 11935              		.set	.LANCHOR6,. + 0
 11938              	cst32.14522:
 11939 0000 0100     		.short	1
 11940 0002 0200     		.short	2
 11941 0004 0400     		.short	4
 11942 0006 0800     		.short	8
 11943 0008 1000     		.short	16
 11944 000a 2000     		.short	32
 11945 000c 0000     		.short	0
 11946              		.section	.rodata.f_mkfs.str1.4,"aMS",%progbits,1
 11947              		.align	2
 11948              	.LC2:
 11949 0000 EBFE904D 		.ascii	"\353\376\220MSDOS5.0\000"
 11949      53444F53 
 11949      352E3000 
 11950              	.LC3:
 11951 000c 4E4F204E 		.ascii	"NO NAME    FAT32   \000"
 11951      414D4520 
 11951      20202046 
 11951      41543332 
 11951      20202000 
 11952              	.LC4:
 11953 0020 4E4F204E 		.ascii	"NO NAME    FAT     \000"
 11953      414D4520 
 11953      20202046 
 11953      41542020 
 11953      20202000 
 11954              		.text
 11955              	.Letext0:
 11956              		.file 2 "Middlewares/Third_Party/FatFs/src/integer.h"
 11957              		.file 3 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\machine\\_default_types.h"
 11958              		.file 4 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\sys\\_stdint.h"
 11959              		.file 5 "Drivers/CMSIS/Include/core_cm7.h"
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 346


 11960              		.file 6 "Drivers/CMSIS/Device/ST/STM32F7xx/Include/system_stm32f7xx.h"
 11961              		.file 7 "c:\\gcc_toolchain\\6_2017-q1-update\\lib\\gcc\\arm-none-eabi\\6.3.1\\include\\stdarg.h"
 11962              		.file 8 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\stdio.h"
 11963              		.file 9 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\sys\\lock.h"
 11964              		.file 10 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\sys\\_types.h"
 11965              		.file 11 "c:\\gcc_toolchain\\6_2017-q1-update\\lib\\gcc\\arm-none-eabi\\6.3.1\\include\\stddef.h"
 11966              		.file 12 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\sys\\reent.h"
 11967              		.file 13 "<built-in>"
 11968              		.file 14 "Middlewares/Third_Party/FreeRTOS/Source/include/task.h"
 11969              		.file 15 "Middlewares/Third_Party/FreeRTOS/Source/include/queue.h"
 11970              		.file 16 "Middlewares/Third_Party/FreeRTOS/Source/include/semphr.h"
 11971              		.file 17 "Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.h"
 11972              		.file 18 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\stdlib.h"
 11973              		.file 19 "Middlewares/ST/STM32_USB_Host_Library/Core/Inc/usbh_def.h"
 11974              		.file 20 "Middlewares/ST/STM32_USB_Host_Library/Core/Inc/usbh_ctlreq.h"
 11975              		.file 21 "Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Inc/usbh_msc.h"
 11976              		.file 22 "Middlewares/Third_Party/FatFs/src/ff.h"
 11977              		.file 23 "Middlewares/Third_Party/FatFs/src/diskio.h"
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 347


DEFINED SYMBOLS
                            *ABS*:00000000 ff.c
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:18     .text.ld_word:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:24     .text.ld_word:00000000 ld_word
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:47     .text.ld_dword:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:53     .text.ld_dword:00000000 ld_dword
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:83     .text.st_word:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:89     .text.st_word:00000000 st_word
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:109    .text.st_dword:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:115    .text.st_dword:00000000 st_dword
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:143    .text.mem_cpy:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:149    .text.mem_cpy:00000000 mem_cpy
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:180    .text.mem_set:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:186    .text.mem_set:00000000 mem_set
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:210    .text.mem_cmp:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:216    .text.mem_cmp:00000000 mem_cmp
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:266    .text.chk_chr:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:272    .text.chk_chr:00000000 chk_chr
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:302    .text.chk_lock:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:308    .text.chk_lock:00000000 chk_lock
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:421    .text.chk_lock:00000070 $d
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:426    .text.enq_lock:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:432    .text.enq_lock:00000000 enq_lock
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:469    .text.enq_lock:0000001c $d
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:474    .text.inc_lock:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:480    .text.inc_lock:00000000 inc_lock
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:632    .text.inc_lock:000000a0 $d
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:637    .text.dec_lock:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:643    .text.dec_lock:00000000 dec_lock
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:711    .text.dec_lock:0000003c $d
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:716    .text.clear_lock:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:722    .text.clear_lock:00000000 clear_lock
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:788    .text.clear_lock:00000038 $d
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:793    .text.clust2sect:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:799    .text.clust2sect:00000000 clust2sect
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:832    .text.clmt_clust:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:838    .text.clmt_clust:00000000 clmt_clust
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:889    .text.ld_clust:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:895    .text.ld_clust:00000000 ld_clust
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:940    .text.st_clust:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:946    .text.st_clust:00000000 st_clust
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:989    .text.pick_lfn:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:995    .text.pick_lfn:00000000 pick_lfn
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:1111   .text.pick_lfn:00000088 $d
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:1116   .text.put_lfn:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:1122   .text.put_lfn:00000000 put_lfn
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:1221   .text.put_lfn:00000074 $d
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:1226   .text.gen_numname:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:1232   .text.gen_numname:00000000 gen_numname
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:1402   .text.sum_sfn:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:1408   .text.sum_sfn:00000000 sum_sfn
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:1445   .text.get_ldnumber:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:1451   .text.get_ldnumber:00000000 get_ldnumber
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:1547   .text.get_ldnumber:00000054 $d
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:1552   .text.putc_init:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:1558   .text.putc_init:00000000 putc_init
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:1577   .text.lock_fs:00000000 $t
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 348


C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:1583   .text.lock_fs:00000000 lock_fs
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:1620   .text.validate:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:1626   .text.validate:00000000 validate
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:1694   .text.sync_window:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:1700   .text.sync_window:00000000 sync_window
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:1791   .text.move_window:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:1797   .text.move_window:00000000 move_window
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:1858   .text.check_fs:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:1864   .text.check_fs:00000000 check_fs
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:1949   .text.check_fs:00000070 $d
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:1956   .text.find_volume:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:1962   .text.find_volume:00000000 find_volume
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:2516   .text.find_volume:000002d0 $d
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:2524   .text.put_fat:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:2530   .text.put_fat:00000000 put_fat
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:2728   .text.get_fat:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:2734   .text.get_fat:00000000 get_fat
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:2900   .text.dir_sdi:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:2906   .text.dir_sdi:00000000 dir_sdi
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:3062   .text.create_chain:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:3068   .text.create_chain:00000000 create_chain
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:3253   .text.remove_chain:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:3259   .text.remove_chain:00000000 remove_chain
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:3381   .text.dir_next:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:3387   .text.dir_next:00000000 dir_next
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:3614   .text.dir_alloc:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:3620   .text.dir_alloc:00000000 dir_alloc
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:3709   .text.dir_read:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:3715   .text.dir_read:00000000 dir_read
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:3891   .text.dir_remove:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:3897   .text.dir_remove:00000000 dir_remove
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:3986   .text.unlock_fs:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:3992   .text.unlock_fs:00000000 unlock_fs
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:4035   .text.create_name:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:4041   .text.create_name:00000000 create_name
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:4530   .text.create_name:00000288 $d
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:4538   .text.get_fileinfo:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:4544   .text.get_fileinfo:00000000 get_fileinfo
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:4765   .text.cmp_lfn:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:4771   .text.cmp_lfn:00000000 cmp_lfn
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:4908   .text.cmp_lfn:000000ac $d
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:4913   .text.dir_find:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:4919   .text.dir_find:00000000 dir_find
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:5112   .text.follow_path:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:5118   .text.follow_path:00000000 follow_path
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:5278   .text.dir_register:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:5284   .text.dir_register:00000000 dir_register
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:5528   .text.dir_register:00000140 $d
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:5533   .text.sync_fs:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:5539   .text.sync_fs:00000000 sync_fs
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:5635   .text.sync_fs:00000084 $d
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:5641   .text.f_mount:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:5648   .text.f_mount:00000000 f_mount
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:5770   .text.f_mount:0000008c $d
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:5775   .text.f_open:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:5782   .text.f_open:00000000 f_open
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:6248   .text.f_read:00000000 $t
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 349


C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:6255   .text.f_read:00000000 f_read
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:6614   .text.f_write:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:6621   .text.f_write:00000000 f_write
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:7012   .text.putc_bfd:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:7018   .text.putc_bfd:00000000 putc_bfd
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:7108   .text.putc_flush:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:7114   .text.putc_flush:00000000 putc_flush
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:7182   .text.f_sync:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:7189   .text.f_sync:00000000 f_sync
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:7330   .text.f_close:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:7337   .text.f_close:00000000 f_close
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:7407   .text.f_chdrive:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:7414   .text.f_chdrive:00000000 f_chdrive
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:7463   .text.f_chdrive:00000024 $d
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:7468   .text.f_chdir:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:7475   .text.f_chdir:00000000 f_chdir
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:7599   .text.f_lseek:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:7606   .text.f_lseek:00000000 f_lseek
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:8203   .text.f_opendir:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:8210   .text.f_opendir:00000000 f_opendir
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:8382   .text.f_closedir:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:8389   .text.f_closedir:00000000 f_closedir
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:8453   .text.f_readdir:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:8460   .text.f_readdir:00000000 f_readdir
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:8581   .text.f_stat:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:8588   .text.f_stat:00000000 f_stat
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:8690   .text.f_getfree:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:8697   .text.f_getfree:00000000 f_getfree
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:8916   .text.f_truncate:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:8923   .text.f_truncate:00000000 f_truncate
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:9106   .text.f_unlink:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:9113   .text.f_unlink:00000000 f_unlink
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:9346   .text.f_mkdir:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:9353   .text.f_mkdir:00000000 f_mkdir
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:9699   .text.f_rename:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:9706   .text.f_rename:00000000 f_rename
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:9968   .text.f_mkfs:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:9975   .text.f_mkfs:00000000 f_mkfs
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:10459  .text.f_mkfs:00000294 $d
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:10468  .text.f_mkfs:000002ac $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:11020  .text.f_mkfs:00000624 $d
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:11030  .text.f_gets:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:11037  .text.f_gets:00000000 f_gets
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:11129  .text.f_putc:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:11136  .text.f_putc:00000000 f_putc
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:11176  .text.f_puts:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:11183  .text.f_puts:00000000 f_puts
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:11232  .text.f_printf:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:11239  .text.f_printf:00000000 f_printf
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:11367  .text.f_printf:00000086 $d
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:11737  .bss.CurrVol:00000000 CurrVol
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:11738  .bss.CurrVol:00000000 $d
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:11740  .bss.FatFs:00000000 $d
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:11744  .bss.FatFs:00000000 FatFs
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:11747  .bss.Files:00000000 $d
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:11751  .bss.Files:00000000 Files
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:11754  .bss.Fsid:00000000 $d
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc60dsuw.s 			page 350


C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:11758  .bss.Fsid:00000000 Fsid
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:11761  .rodata.ExCvt:00000000 $d
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:11765  .rodata.ExCvt:00000000 ExCvt
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:11895  .rodata.LfnOfs:00000000 $d
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:11899  .rodata.LfnOfs:00000000 LfnOfs
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:11914  .rodata.create_name.str1.4:00000000 $d
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:11921  .rodata.cst.14521:00000000 $d
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:11925  .rodata.cst.14521:00000000 cst.14521
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:11934  .rodata.cst32.14522:00000000 $d
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:11938  .rodata.cst32.14522:00000000 cst32.14522
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:11947  .rodata.f_mkfs.str1.4:00000000 $d
                     .debug_frame:00000010 $d
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:11391  .text.f_printf:0000009d $d
C:\Users\Student\AppData\Local\Temp\cc60dsuw.s:11391  .text.f_printf:0000009e $t

UNDEFINED SYMBOLS
ff_req_grant
disk_status
disk_write
disk_read
disk_initialize
ff_rel_grant
ff_convert
ff_wtoupper
disk_ioctl
ff_del_syncobj
ff_cre_syncobj
ff_memalloc
ff_memfree
get_fattime
