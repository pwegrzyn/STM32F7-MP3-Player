ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s 			page 1


   1              		.cpu cortex-m7
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"syscalls.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text._sbrk,"ax",%progbits
  18              		.align	1
  19              		.global	_sbrk
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv5-sp-d16
  25              	_sbrk:
  26              	.LFB19:
  27              		.file 1 "Src/syscalls.c"
   1:Src/syscalls.c **** /**
   2:Src/syscalls.c ****  ******************************************************************************
   3:Src/syscalls.c ****   * File Name          : syscalls.c
   4:Src/syscalls.c ****   * Description        : Support files for GNU libc. Files in the system
   5:Src/syscalls.c ****   *                      namespace go here. Files in the C namespace (ie those
   6:Src/syscalls.c ****   *                      that do not start with an underscore) go in .c.
   7:Src/syscalls.c ****   ******************************************************************************
   8:Src/syscalls.c ****   * This notice applies to any and all portions of this file
   9:Src/syscalls.c ****   * that are not between comment pairs USER CODE BEGIN and
  10:Src/syscalls.c ****   * USER CODE END. Other portions of this file, whether 
  11:Src/syscalls.c ****   * inserted by the user or by software development tools
  12:Src/syscalls.c ****   * are owned by their respective copyright owners.
  13:Src/syscalls.c ****   *
  14:Src/syscalls.c ****   * Copyright (c) 2018 STMicroelectronics International N.V. 
  15:Src/syscalls.c ****   * All rights reserved.
  16:Src/syscalls.c ****   *
  17:Src/syscalls.c ****   * Redistribution and use in source and binary forms, with or without 
  18:Src/syscalls.c ****   * modification, are permitted, provided that the following conditions are met:
  19:Src/syscalls.c ****   *
  20:Src/syscalls.c ****   * 1. Redistribution of source code must retain the above copyright notice, 
  21:Src/syscalls.c ****   *    this list of conditions and the following disclaimer.
  22:Src/syscalls.c ****   * 2. Redistributions in binary form must reproduce the above copyright notice,
  23:Src/syscalls.c ****   *    this list of conditions and the following disclaimer in the documentation
  24:Src/syscalls.c ****   *    and/or other materials provided with the distribution.
  25:Src/syscalls.c ****   * 3. Neither the name of STMicroelectronics nor the names of other 
  26:Src/syscalls.c ****   *    contributors to this software may be used to endorse or promote products 
  27:Src/syscalls.c ****   *    derived from this software without specific written permission.
  28:Src/syscalls.c ****   * 4. This software, including modifications and/or derivative works of this 
  29:Src/syscalls.c ****   *    software, must execute solely and exclusively on microcontroller or
  30:Src/syscalls.c ****   *    microprocessor devices manufactured by or for STMicroelectronics.
  31:Src/syscalls.c ****   * 5. Redistribution and use of this software other than as permitted under 
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s 			page 2


  32:Src/syscalls.c ****   *    this license is void and will automatically terminate your rights under 
  33:Src/syscalls.c ****   *    this license. 
  34:Src/syscalls.c ****   *
  35:Src/syscalls.c ****   * THIS SOFTWARE IS PROVIDED BY STMICROELECTRONICS AND CONTRIBUTORS "AS IS" 
  36:Src/syscalls.c ****   * AND ANY EXPRESS, IMPLIED OR STATUTORY WARRANTIES, INCLUDING, BUT NOT 
  37:Src/syscalls.c ****   * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A 
  38:Src/syscalls.c ****   * PARTICULAR PURPOSE AND NON-INFRINGEMENT OF THIRD PARTY INTELLECTUAL PROPERTY
  39:Src/syscalls.c ****   * RIGHTS ARE DISCLAIMED TO THE FULLEST EXTENT PERMITTED BY LAW. IN NO EVENT 
  40:Src/syscalls.c ****   * SHALL STMICROELECTRONICS OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
  41:Src/syscalls.c ****   * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
  42:Src/syscalls.c ****   * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, 
  43:Src/syscalls.c ****   * OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF 
  44:Src/syscalls.c ****   * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING 
  45:Src/syscalls.c ****   * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
  46:Src/syscalls.c ****   * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  47:Src/syscalls.c ****   *
  48:Src/syscalls.c ****   ******************************************************************************
  49:Src/syscalls.c ****   */
  50:Src/syscalls.c ****   
  51:Src/syscalls.c ****  /******************************************************************************
  52:Src/syscalls.c ****  * If LWIP_SOCKET option is enabled:
  53:Src/syscalls.c ****  *  - include this syscalls.c file
  54:Src/syscalls.c ****  ******************************************************************************/
  55:Src/syscalls.c **** 
  56:Src/syscalls.c **** #ifdef __cplusplus
  57:Src/syscalls.c ****  extern "C" {
  58:Src/syscalls.c **** #endif
  59:Src/syscalls.c **** 
  60:Src/syscalls.c **** /* USER CODE BEGIN 0 */
  61:Src/syscalls.c **** 
  62:Src/syscalls.c **** /* USER CODE END 0 */
  63:Src/syscalls.c **** 
  64:Src/syscalls.c **** /* Support files for GNU libc.  Files in the system namespace go here.
  65:Src/syscalls.c ****    Files in the C namespace (ie those that do not start with an
  66:Src/syscalls.c ****    underscore) go in .c.  */
  67:Src/syscalls.c **** 
  68:Src/syscalls.c **** #include <_ansi.h>
  69:Src/syscalls.c **** #include <sys/types.h>
  70:Src/syscalls.c **** #include <sys/stat.h>
  71:Src/syscalls.c **** #include <sys/fcntl.h>
  72:Src/syscalls.c **** #include <stdio.h>
  73:Src/syscalls.c **** #include <string.h>
  74:Src/syscalls.c **** #include <time.h>
  75:Src/syscalls.c **** #include <sys/time.h>
  76:Src/syscalls.c **** #include <sys/times.h>
  77:Src/syscalls.c **** #include <errno.h>
  78:Src/syscalls.c **** #include <reent.h>
  79:Src/syscalls.c **** #include <unistd.h>
  80:Src/syscalls.c **** #include <sys/wait.h>
  81:Src/syscalls.c **** 
  82:Src/syscalls.c **** /* USER CODE BEGIN 1 */
  83:Src/syscalls.c **** 
  84:Src/syscalls.c **** /* USER CODE END 1 */
  85:Src/syscalls.c **** 
  86:Src/syscalls.c **** #define MAX_STACK_SIZE 0x2000
  87:Src/syscalls.c **** 
  88:Src/syscalls.c **** extern int __io_putchar(int ch) __attribute__((weak));
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s 			page 3


  89:Src/syscalls.c **** extern int __io_getchar(void) __attribute__((weak));
  90:Src/syscalls.c **** 
  91:Src/syscalls.c **** /* USER CODE BEGIN 2 */
  92:Src/syscalls.c **** 
  93:Src/syscalls.c **** /* USER CODE END 2 */
  94:Src/syscalls.c **** 
  95:Src/syscalls.c **** /* USER CODE BEGIN 3 */
  96:Src/syscalls.c **** caddr_t _sbrk(int incr)
  97:Src/syscalls.c **** {
  28              		.loc 1 97 0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              	.LVL0:
  33 0000 08B5     		push	{r3, lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 8
  36              		.cfi_offset 3, -8
  37              		.cfi_offset 14, -4
  38 0002 0346     		mov	r3, r0
  98:Src/syscalls.c **** 	extern char end asm("end");
  99:Src/syscalls.c **** 	static char *heap_end;
 100:Src/syscalls.c **** 	char *prev_heap_end,*min_stack_ptr;
 101:Src/syscalls.c **** 
 102:Src/syscalls.c **** 	if (heap_end == 0)
  39              		.loc 1 102 0
  40 0004 0D4A     		ldr	r2, .L8
  41 0006 1268     		ldr	r2, [r2]
  42 0008 62B1     		cbz	r2, .L6
  43              	.L2:
 103:Src/syscalls.c **** 		heap_end = &end;
 104:Src/syscalls.c **** 
 105:Src/syscalls.c **** 	prev_heap_end = heap_end;
  44              		.loc 1 105 0
  45 000a 0C4A     		ldr	r2, .L8
  46 000c 1068     		ldr	r0, [r2]
  47              	.LVL1:
 106:Src/syscalls.c **** 
 107:Src/syscalls.c **** 	/* Use the NVIC offset register to locate the main stack pointer. */
 108:Src/syscalls.c **** 	min_stack_ptr = (char*)(*(unsigned int *)*(unsigned int *)0xE000ED08);
  48              		.loc 1 108 0
  49 000e 0C4A     		ldr	r2, .L8+4
  50 0010 1268     		ldr	r2, [r2]
  51 0012 1268     		ldr	r2, [r2]
  52              	.LVL2:
 109:Src/syscalls.c **** 	/* Locate the STACK bottom address */
 110:Src/syscalls.c **** 	min_stack_ptr -= MAX_STACK_SIZE;
  53              		.loc 1 110 0
  54 0014 A2F50052 		sub	r2, r2, #8192
  55              	.LVL3:
 111:Src/syscalls.c **** 
 112:Src/syscalls.c **** 	if (heap_end + incr > min_stack_ptr)
  56              		.loc 1 112 0
  57 0018 0344     		add	r3, r3, r0
  58              	.LVL4:
  59 001a 9342     		cmp	r3, r2
  60 001c 06D8     		bhi	.L7
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s 			page 4


 113:Src/syscalls.c **** 	{
 114:Src/syscalls.c **** 		errno = ENOMEM;
 115:Src/syscalls.c **** 		return (caddr_t) -1;
 116:Src/syscalls.c **** 	}
 117:Src/syscalls.c **** 
 118:Src/syscalls.c **** 	heap_end += incr;
  61              		.loc 1 118 0
  62 001e 074A     		ldr	r2, .L8
  63              	.LVL5:
  64 0020 1360     		str	r3, [r2]
  65              	.LVL6:
  66              	.L1:
 119:Src/syscalls.c **** 
 120:Src/syscalls.c **** 	return (caddr_t) prev_heap_end;
 121:Src/syscalls.c **** }
  67              		.loc 1 121 0
  68 0022 08BD     		pop	{r3, pc}
  69              	.LVL7:
  70              	.L6:
 103:Src/syscalls.c **** 
  71              		.loc 1 103 0
  72 0024 054A     		ldr	r2, .L8
  73 0026 0749     		ldr	r1, .L8+8
  74 0028 1160     		str	r1, [r2]
  75 002a EEE7     		b	.L2
  76              	.LVL8:
  77              	.L7:
 114:Src/syscalls.c **** 		return (caddr_t) -1;
  78              		.loc 1 114 0
  79 002c FFF7FEFF 		bl	__errno
  80              	.LVL9:
  81 0030 0C23     		movs	r3, #12
  82 0032 0360     		str	r3, [r0]
 115:Src/syscalls.c **** 	}
  83              		.loc 1 115 0
  84 0034 4FF0FF30 		mov	r0, #-1
  85 0038 F3E7     		b	.L1
  86              	.L9:
  87 003a 00BF     		.align	2
  88              	.L8:
  89 003c 00000000 		.word	.LANCHOR0
  90 0040 08ED00E0 		.word	-536810232
  91 0044 00000000 		.word	end
  92              		.cfi_endproc
  93              	.LFE19:
  95              		.section	.text._gettimeofday,"ax",%progbits
  96              		.align	1
  97              		.global	_gettimeofday
  98              		.syntax unified
  99              		.thumb
 100              		.thumb_func
 101              		.fpu fpv5-sp-d16
 103              	_gettimeofday:
 104              	.LFB20:
 122:Src/syscalls.c **** /* USER CODE END 3 */
 123:Src/syscalls.c **** 
 124:Src/syscalls.c **** /* USER CODE BEGIN 4 */
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s 			page 5


 125:Src/syscalls.c **** /*
 126:Src/syscalls.c ****  * _gettimeofday primitive (Stub function)
 127:Src/syscalls.c ****  * */
 128:Src/syscalls.c **** 
 129:Src/syscalls.c **** int _gettimeofday (struct timeval * tp, struct timezone * tzp)
 130:Src/syscalls.c **** {
 105              		.loc 1 130 0
 106              		.cfi_startproc
 107              		@ args = 0, pretend = 0, frame = 0
 108              		@ frame_needed = 0, uses_anonymous_args = 0
 109              		@ link register save eliminated.
 110              	.LVL10:
 131:Src/syscalls.c ****   /* Return fixed data for the timezone.  */
 132:Src/syscalls.c ****   if (tzp)
 111              		.loc 1 132 0
 112 0000 11B1     		cbz	r1, .L11
 133:Src/syscalls.c ****     {
 134:Src/syscalls.c ****       tzp->tz_minuteswest = 0;
 113              		.loc 1 134 0
 114 0002 0022     		movs	r2, #0
 115 0004 0A60     		str	r2, [r1]
 135:Src/syscalls.c ****       tzp->tz_dsttime = 0;
 116              		.loc 1 135 0
 117 0006 4A60     		str	r2, [r1, #4]
 118              	.L11:
 136:Src/syscalls.c ****     }
 137:Src/syscalls.c **** 
 138:Src/syscalls.c ****   return 0;
 139:Src/syscalls.c **** }
 119              		.loc 1 139 0
 120 0008 0020     		movs	r0, #0
 121              	.LVL11:
 122 000a 7047     		bx	lr
 123              		.cfi_endproc
 124              	.LFE20:
 126              		.section	.text.initialise_monitor_handles,"ax",%progbits
 127              		.align	1
 128              		.global	initialise_monitor_handles
 129              		.syntax unified
 130              		.thumb
 131              		.thumb_func
 132              		.fpu fpv5-sp-d16
 134              	initialise_monitor_handles:
 135              	.LFB21:
 140:Src/syscalls.c **** /* USER CODE END 4 */
 141:Src/syscalls.c **** 
 142:Src/syscalls.c **** /* USER CODE BEGIN 5 */
 143:Src/syscalls.c **** void initialise_monitor_handles()
 144:Src/syscalls.c **** {
 136              		.loc 1 144 0
 137              		.cfi_startproc
 138              		@ args = 0, pretend = 0, frame = 0
 139              		@ frame_needed = 0, uses_anonymous_args = 0
 140              		@ link register save eliminated.
 145:Src/syscalls.c **** }
 141              		.loc 1 145 0
 142 0000 7047     		bx	lr
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s 			page 6


 143              		.cfi_endproc
 144              	.LFE21:
 146              		.section	.text._getpid,"ax",%progbits
 147              		.align	1
 148              		.global	_getpid
 149              		.syntax unified
 150              		.thumb
 151              		.thumb_func
 152              		.fpu fpv5-sp-d16
 154              	_getpid:
 155              	.LFB22:
 146:Src/syscalls.c **** 
 147:Src/syscalls.c **** int _getpid(void)
 148:Src/syscalls.c **** {
 156              		.loc 1 148 0
 157              		.cfi_startproc
 158              		@ args = 0, pretend = 0, frame = 0
 159              		@ frame_needed = 0, uses_anonymous_args = 0
 160              		@ link register save eliminated.
 149:Src/syscalls.c **** 	return 1;
 150:Src/syscalls.c **** }
 161              		.loc 1 150 0
 162 0000 0120     		movs	r0, #1
 163 0002 7047     		bx	lr
 164              		.cfi_endproc
 165              	.LFE22:
 167              		.section	.text._kill,"ax",%progbits
 168              		.align	1
 169              		.global	_kill
 170              		.syntax unified
 171              		.thumb
 172              		.thumb_func
 173              		.fpu fpv5-sp-d16
 175              	_kill:
 176              	.LFB23:
 151:Src/syscalls.c **** 
 152:Src/syscalls.c **** int _kill(int pid, int sig)
 153:Src/syscalls.c **** {
 177              		.loc 1 153 0
 178              		.cfi_startproc
 179              		@ args = 0, pretend = 0, frame = 0
 180              		@ frame_needed = 0, uses_anonymous_args = 0
 181              	.LVL12:
 182 0000 08B5     		push	{r3, lr}
 183              	.LCFI1:
 184              		.cfi_def_cfa_offset 8
 185              		.cfi_offset 3, -8
 186              		.cfi_offset 14, -4
 154:Src/syscalls.c **** 	errno = EINVAL;
 187              		.loc 1 154 0
 188 0002 FFF7FEFF 		bl	__errno
 189              	.LVL13:
 190 0006 1623     		movs	r3, #22
 191 0008 0360     		str	r3, [r0]
 155:Src/syscalls.c **** 	return -1;
 156:Src/syscalls.c **** }
 192              		.loc 1 156 0
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s 			page 7


 193 000a 4FF0FF30 		mov	r0, #-1
 194 000e 08BD     		pop	{r3, pc}
 195              		.cfi_endproc
 196              	.LFE23:
 198              		.section	.text._exit,"ax",%progbits
 199              		.align	1
 200              		.global	_exit
 201              		.syntax unified
 202              		.thumb
 203              		.thumb_func
 204              		.fpu fpv5-sp-d16
 206              	_exit:
 207              	.LFB24:
 157:Src/syscalls.c **** 
 158:Src/syscalls.c **** void _exit (int status)
 159:Src/syscalls.c **** {
 208              		.loc 1 159 0
 209              		.cfi_startproc
 210              		@ Volatile: function does not return.
 211              		@ args = 0, pretend = 0, frame = 0
 212              		@ frame_needed = 0, uses_anonymous_args = 0
 213              	.LVL14:
 214 0000 08B5     		push	{r3, lr}
 215              	.LCFI2:
 216              		.cfi_def_cfa_offset 8
 217              		.cfi_offset 3, -8
 218              		.cfi_offset 14, -4
 160:Src/syscalls.c **** 	_kill(status, -1);
 219              		.loc 1 160 0
 220 0002 4FF0FF31 		mov	r1, #-1
 221 0006 FFF7FEFF 		bl	_kill
 222              	.LVL15:
 223              	.L17:
 224 000a FEE7     		b	.L17
 225              		.cfi_endproc
 226              	.LFE24:
 228              		.section	.text._write,"ax",%progbits
 229              		.align	1
 230              		.global	_write
 231              		.syntax unified
 232              		.thumb
 233              		.thumb_func
 234              		.fpu fpv5-sp-d16
 236              	_write:
 237              	.LFB25:
 161:Src/syscalls.c **** 	while (1) {}
 162:Src/syscalls.c **** }
 163:Src/syscalls.c **** 
 164:Src/syscalls.c **** int _write(int file, char *ptr, int len)
 165:Src/syscalls.c **** {
 238              		.loc 1 165 0
 239              		.cfi_startproc
 240              		@ args = 0, pretend = 0, frame = 0
 241              		@ frame_needed = 0, uses_anonymous_args = 0
 242              	.LVL16:
 243 0000 70B5     		push	{r4, r5, r6, lr}
 244              	.LCFI3:
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s 			page 8


 245              		.cfi_def_cfa_offset 16
 246              		.cfi_offset 4, -16
 247              		.cfi_offset 5, -12
 248              		.cfi_offset 6, -8
 249              		.cfi_offset 14, -4
 250 0002 1646     		mov	r6, r2
 251              	.LVL17:
 166:Src/syscalls.c **** 	int DataIdx;
 167:Src/syscalls.c **** 
 168:Src/syscalls.c **** 	for (DataIdx = 0; DataIdx < len; DataIdx++)
 252              		.loc 1 168 0
 253 0004 0024     		movs	r4, #0
 254 0006 05E0     		b	.L20
 255              	.LVL18:
 256              	.L21:
 169:Src/syscalls.c **** 	{
 170:Src/syscalls.c **** 	   __io_putchar( *ptr++ );
 257              		.loc 1 170 0 discriminator 3
 258 0008 4D1C     		adds	r5, r1, #1
 259              	.LVL19:
 260 000a 0878     		ldrb	r0, [r1]	@ zero_extendqisi2
 261 000c FFF7FEFF 		bl	__io_putchar
 262              	.LVL20:
 168:Src/syscalls.c **** 	{
 263              		.loc 1 168 0 discriminator 3
 264 0010 0134     		adds	r4, r4, #1
 265              	.LVL21:
 266              		.loc 1 170 0 discriminator 3
 267 0012 2946     		mov	r1, r5
 268              	.LVL22:
 269              	.L20:
 168:Src/syscalls.c **** 	{
 270              		.loc 1 168 0 discriminator 1
 271 0014 B442     		cmp	r4, r6
 272 0016 F7DB     		blt	.L21
 171:Src/syscalls.c **** 	}
 172:Src/syscalls.c **** 	return len;
 173:Src/syscalls.c **** }
 273              		.loc 1 173 0
 274 0018 3046     		mov	r0, r6
 275 001a 70BD     		pop	{r4, r5, r6, pc}
 276              		.cfi_endproc
 277              	.LFE25:
 279              		.section	.text._close,"ax",%progbits
 280              		.align	1
 281              		.global	_close
 282              		.syntax unified
 283              		.thumb
 284              		.thumb_func
 285              		.fpu fpv5-sp-d16
 287              	_close:
 288              	.LFB26:
 174:Src/syscalls.c **** 
 175:Src/syscalls.c **** int _close(int file)
 176:Src/syscalls.c **** {
 289              		.loc 1 176 0
 290              		.cfi_startproc
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s 			page 9


 291              		@ args = 0, pretend = 0, frame = 0
 292              		@ frame_needed = 0, uses_anonymous_args = 0
 293              		@ link register save eliminated.
 294              	.LVL23:
 177:Src/syscalls.c **** 	return -1;
 178:Src/syscalls.c **** }
 295              		.loc 1 178 0
 296 0000 4FF0FF30 		mov	r0, #-1
 297              	.LVL24:
 298 0004 7047     		bx	lr
 299              		.cfi_endproc
 300              	.LFE26:
 302              		.section	.text._fstat,"ax",%progbits
 303              		.align	1
 304              		.global	_fstat
 305              		.syntax unified
 306              		.thumb
 307              		.thumb_func
 308              		.fpu fpv5-sp-d16
 310              	_fstat:
 311              	.LFB27:
 179:Src/syscalls.c **** 
 180:Src/syscalls.c **** int _fstat(int file, struct stat *st)
 181:Src/syscalls.c **** {
 312              		.loc 1 181 0
 313              		.cfi_startproc
 314              		@ args = 0, pretend = 0, frame = 0
 315              		@ frame_needed = 0, uses_anonymous_args = 0
 316              		@ link register save eliminated.
 317              	.LVL25:
 182:Src/syscalls.c **** 	st->st_mode = S_IFCHR;
 318              		.loc 1 182 0
 319 0000 4FF40053 		mov	r3, #8192
 320 0004 4B60     		str	r3, [r1, #4]
 183:Src/syscalls.c **** 	return 0;
 184:Src/syscalls.c **** }
 321              		.loc 1 184 0
 322 0006 0020     		movs	r0, #0
 323              	.LVL26:
 324 0008 7047     		bx	lr
 325              		.cfi_endproc
 326              	.LFE27:
 328              		.section	.text._isatty,"ax",%progbits
 329              		.align	1
 330              		.global	_isatty
 331              		.syntax unified
 332              		.thumb
 333              		.thumb_func
 334              		.fpu fpv5-sp-d16
 336              	_isatty:
 337              	.LFB28:
 185:Src/syscalls.c **** 
 186:Src/syscalls.c **** int _isatty(int file)
 187:Src/syscalls.c **** {
 338              		.loc 1 187 0
 339              		.cfi_startproc
 340              		@ args = 0, pretend = 0, frame = 0
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s 			page 10


 341              		@ frame_needed = 0, uses_anonymous_args = 0
 342              		@ link register save eliminated.
 343              	.LVL27:
 188:Src/syscalls.c **** 	return 1;
 189:Src/syscalls.c **** }
 344              		.loc 1 189 0
 345 0000 0120     		movs	r0, #1
 346              	.LVL28:
 347 0002 7047     		bx	lr
 348              		.cfi_endproc
 349              	.LFE28:
 351              		.section	.text._lseek,"ax",%progbits
 352              		.align	1
 353              		.global	_lseek
 354              		.syntax unified
 355              		.thumb
 356              		.thumb_func
 357              		.fpu fpv5-sp-d16
 359              	_lseek:
 360              	.LFB29:
 190:Src/syscalls.c **** 
 191:Src/syscalls.c **** int _lseek(int file, int ptr, int dir)
 192:Src/syscalls.c **** {
 361              		.loc 1 192 0
 362              		.cfi_startproc
 363              		@ args = 0, pretend = 0, frame = 0
 364              		@ frame_needed = 0, uses_anonymous_args = 0
 365              		@ link register save eliminated.
 366              	.LVL29:
 193:Src/syscalls.c **** 	return 0;
 194:Src/syscalls.c **** }
 367              		.loc 1 194 0
 368 0000 0020     		movs	r0, #0
 369              	.LVL30:
 370 0002 7047     		bx	lr
 371              		.cfi_endproc
 372              	.LFE29:
 374              		.section	.text._read,"ax",%progbits
 375              		.align	1
 376              		.global	_read
 377              		.syntax unified
 378              		.thumb
 379              		.thumb_func
 380              		.fpu fpv5-sp-d16
 382              	_read:
 383              	.LFB30:
 195:Src/syscalls.c **** 
 196:Src/syscalls.c **** int _read(int file, char *ptr, int len)
 197:Src/syscalls.c **** {
 384              		.loc 1 197 0
 385              		.cfi_startproc
 386              		@ args = 0, pretend = 0, frame = 0
 387              		@ frame_needed = 0, uses_anonymous_args = 0
 388              	.LVL31:
 389 0000 70B5     		push	{r4, r5, r6, lr}
 390              	.LCFI4:
 391              		.cfi_def_cfa_offset 16
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s 			page 11


 392              		.cfi_offset 4, -16
 393              		.cfi_offset 5, -12
 394              		.cfi_offset 6, -8
 395              		.cfi_offset 14, -4
 396 0002 0D46     		mov	r5, r1
 397 0004 1646     		mov	r6, r2
 398              	.LVL32:
 198:Src/syscalls.c **** 	int DataIdx;
 199:Src/syscalls.c **** 
 200:Src/syscalls.c **** 	for (DataIdx = 0; DataIdx < len; DataIdx++)
 399              		.loc 1 200 0
 400 0006 0024     		movs	r4, #0
 401 0008 04E0     		b	.L28
 402              	.LVL33:
 403              	.L29:
 201:Src/syscalls.c **** 	{
 202:Src/syscalls.c **** 	  *ptr++ = __io_getchar();
 404              		.loc 1 202 0 discriminator 3
 405 000a FFF7FEFF 		bl	__io_getchar
 406              	.LVL34:
 407 000e 2870     		strb	r0, [r5]
 200:Src/syscalls.c **** 	{
 408              		.loc 1 200 0 discriminator 3
 409 0010 0134     		adds	r4, r4, #1
 410              	.LVL35:
 411              		.loc 1 202 0 discriminator 3
 412 0012 0135     		adds	r5, r5, #1
 413              	.LVL36:
 414              	.L28:
 200:Src/syscalls.c **** 	{
 415              		.loc 1 200 0 discriminator 1
 416 0014 B442     		cmp	r4, r6
 417 0016 F8DB     		blt	.L29
 203:Src/syscalls.c **** 	}
 204:Src/syscalls.c **** 
 205:Src/syscalls.c ****    return len;
 206:Src/syscalls.c **** }
 418              		.loc 1 206 0
 419 0018 3046     		mov	r0, r6
 420 001a 70BD     		pop	{r4, r5, r6, pc}
 421              		.cfi_endproc
 422              	.LFE30:
 424              		.section	.text._open,"ax",%progbits
 425              		.align	1
 426              		.global	_open
 427              		.syntax unified
 428              		.thumb
 429              		.thumb_func
 430              		.fpu fpv5-sp-d16
 432              	_open:
 433              	.LFB31:
 207:Src/syscalls.c **** 
 208:Src/syscalls.c **** int _open(char *path, int flags, ...)
 209:Src/syscalls.c **** {
 434              		.loc 1 209 0
 435              		.cfi_startproc
 436              		@ args = 4, pretend = 12, frame = 0
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s 			page 12


 437              		@ frame_needed = 0, uses_anonymous_args = 1
 438              		@ link register save eliminated.
 439              	.LVL37:
 440 0000 0EB4     		push	{r1, r2, r3}
 441              	.LCFI5:
 442              		.cfi_def_cfa_offset 12
 443              		.cfi_offset 1, -12
 444              		.cfi_offset 2, -8
 445              		.cfi_offset 3, -4
 210:Src/syscalls.c **** 	/* Pretend like we always fail */
 211:Src/syscalls.c **** 	return -1;
 212:Src/syscalls.c **** }
 446              		.loc 1 212 0
 447 0002 4FF0FF30 		mov	r0, #-1
 448              	.LVL38:
 449 0006 03B0     		add	sp, sp, #12
 450              	.LCFI6:
 451              		.cfi_restore 3
 452              		.cfi_restore 2
 453              		.cfi_restore 1
 454              		.cfi_def_cfa_offset 0
 455 0008 7047     		bx	lr
 456              		.cfi_endproc
 457              	.LFE31:
 459              		.section	.text._wait,"ax",%progbits
 460              		.align	1
 461              		.global	_wait
 462              		.syntax unified
 463              		.thumb
 464              		.thumb_func
 465              		.fpu fpv5-sp-d16
 467              	_wait:
 468              	.LFB32:
 213:Src/syscalls.c **** 
 214:Src/syscalls.c **** int _wait(int *status)
 215:Src/syscalls.c **** {
 469              		.loc 1 215 0
 470              		.cfi_startproc
 471              		@ args = 0, pretend = 0, frame = 0
 472              		@ frame_needed = 0, uses_anonymous_args = 0
 473              	.LVL39:
 474 0000 08B5     		push	{r3, lr}
 475              	.LCFI7:
 476              		.cfi_def_cfa_offset 8
 477              		.cfi_offset 3, -8
 478              		.cfi_offset 14, -4
 216:Src/syscalls.c **** 	errno = ECHILD;
 479              		.loc 1 216 0
 480 0002 FFF7FEFF 		bl	__errno
 481              	.LVL40:
 482 0006 0A23     		movs	r3, #10
 483 0008 0360     		str	r3, [r0]
 217:Src/syscalls.c **** 	return -1;
 218:Src/syscalls.c **** }
 484              		.loc 1 218 0
 485 000a 4FF0FF30 		mov	r0, #-1
 486 000e 08BD     		pop	{r3, pc}
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s 			page 13


 487              		.cfi_endproc
 488              	.LFE32:
 490              		.section	.text._unlink,"ax",%progbits
 491              		.align	1
 492              		.global	_unlink
 493              		.syntax unified
 494              		.thumb
 495              		.thumb_func
 496              		.fpu fpv5-sp-d16
 498              	_unlink:
 499              	.LFB33:
 219:Src/syscalls.c **** 
 220:Src/syscalls.c **** int _unlink(char *name)
 221:Src/syscalls.c **** {
 500              		.loc 1 221 0
 501              		.cfi_startproc
 502              		@ args = 0, pretend = 0, frame = 0
 503              		@ frame_needed = 0, uses_anonymous_args = 0
 504              	.LVL41:
 505 0000 08B5     		push	{r3, lr}
 506              	.LCFI8:
 507              		.cfi_def_cfa_offset 8
 508              		.cfi_offset 3, -8
 509              		.cfi_offset 14, -4
 222:Src/syscalls.c **** 	errno = ENOENT;
 510              		.loc 1 222 0
 511 0002 FFF7FEFF 		bl	__errno
 512              	.LVL42:
 513 0006 0223     		movs	r3, #2
 514 0008 0360     		str	r3, [r0]
 223:Src/syscalls.c **** 	return -1;
 224:Src/syscalls.c **** }
 515              		.loc 1 224 0
 516 000a 4FF0FF30 		mov	r0, #-1
 517 000e 08BD     		pop	{r3, pc}
 518              		.cfi_endproc
 519              	.LFE33:
 521              		.section	.text._times,"ax",%progbits
 522              		.align	1
 523              		.global	_times
 524              		.syntax unified
 525              		.thumb
 526              		.thumb_func
 527              		.fpu fpv5-sp-d16
 529              	_times:
 530              	.LFB34:
 225:Src/syscalls.c **** 
 226:Src/syscalls.c **** int _times(struct tms *buf)
 227:Src/syscalls.c **** {
 531              		.loc 1 227 0
 532              		.cfi_startproc
 533              		@ args = 0, pretend = 0, frame = 0
 534              		@ frame_needed = 0, uses_anonymous_args = 0
 535              		@ link register save eliminated.
 536              	.LVL43:
 228:Src/syscalls.c **** 	return -1;
 229:Src/syscalls.c **** }
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s 			page 14


 537              		.loc 1 229 0
 538 0000 4FF0FF30 		mov	r0, #-1
 539              	.LVL44:
 540 0004 7047     		bx	lr
 541              		.cfi_endproc
 542              	.LFE34:
 544              		.section	.text._stat,"ax",%progbits
 545              		.align	1
 546              		.global	_stat
 547              		.syntax unified
 548              		.thumb
 549              		.thumb_func
 550              		.fpu fpv5-sp-d16
 552              	_stat:
 553              	.LFB35:
 230:Src/syscalls.c **** 
 231:Src/syscalls.c **** int _stat(char *file, struct stat *st)
 232:Src/syscalls.c **** {
 554              		.loc 1 232 0
 555              		.cfi_startproc
 556              		@ args = 0, pretend = 0, frame = 0
 557              		@ frame_needed = 0, uses_anonymous_args = 0
 558              		@ link register save eliminated.
 559              	.LVL45:
 233:Src/syscalls.c **** 	st->st_mode = S_IFCHR;
 560              		.loc 1 233 0
 561 0000 4FF40053 		mov	r3, #8192
 562 0004 4B60     		str	r3, [r1, #4]
 234:Src/syscalls.c **** 	return 0;
 235:Src/syscalls.c **** }
 563              		.loc 1 235 0
 564 0006 0020     		movs	r0, #0
 565              	.LVL46:
 566 0008 7047     		bx	lr
 567              		.cfi_endproc
 568              	.LFE35:
 570              		.section	.text._link,"ax",%progbits
 571              		.align	1
 572              		.global	_link
 573              		.syntax unified
 574              		.thumb
 575              		.thumb_func
 576              		.fpu fpv5-sp-d16
 578              	_link:
 579              	.LFB36:
 236:Src/syscalls.c **** 
 237:Src/syscalls.c **** int _link(char *old, char *new)
 238:Src/syscalls.c **** {
 580              		.loc 1 238 0
 581              		.cfi_startproc
 582              		@ args = 0, pretend = 0, frame = 0
 583              		@ frame_needed = 0, uses_anonymous_args = 0
 584              	.LVL47:
 585 0000 08B5     		push	{r3, lr}
 586              	.LCFI9:
 587              		.cfi_def_cfa_offset 8
 588              		.cfi_offset 3, -8
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s 			page 15


 589              		.cfi_offset 14, -4
 239:Src/syscalls.c **** 	errno = EMLINK;
 590              		.loc 1 239 0
 591 0002 FFF7FEFF 		bl	__errno
 592              	.LVL48:
 593 0006 1F23     		movs	r3, #31
 594 0008 0360     		str	r3, [r0]
 240:Src/syscalls.c **** 	return -1;
 241:Src/syscalls.c **** }
 595              		.loc 1 241 0
 596 000a 4FF0FF30 		mov	r0, #-1
 597 000e 08BD     		pop	{r3, pc}
 598              		.cfi_endproc
 599              	.LFE36:
 601              		.section	.text._fork,"ax",%progbits
 602              		.align	1
 603              		.global	_fork
 604              		.syntax unified
 605              		.thumb
 606              		.thumb_func
 607              		.fpu fpv5-sp-d16
 609              	_fork:
 610              	.LFB37:
 242:Src/syscalls.c **** 
 243:Src/syscalls.c **** int _fork(void)
 244:Src/syscalls.c **** {
 611              		.loc 1 244 0
 612              		.cfi_startproc
 613              		@ args = 0, pretend = 0, frame = 0
 614              		@ frame_needed = 0, uses_anonymous_args = 0
 615 0000 08B5     		push	{r3, lr}
 616              	.LCFI10:
 617              		.cfi_def_cfa_offset 8
 618              		.cfi_offset 3, -8
 619              		.cfi_offset 14, -4
 245:Src/syscalls.c **** 	errno = EAGAIN;
 620              		.loc 1 245 0
 621 0002 FFF7FEFF 		bl	__errno
 622              	.LVL49:
 623 0006 0B23     		movs	r3, #11
 624 0008 0360     		str	r3, [r0]
 246:Src/syscalls.c **** 	return -1;
 247:Src/syscalls.c **** }
 625              		.loc 1 247 0
 626 000a 4FF0FF30 		mov	r0, #-1
 627 000e 08BD     		pop	{r3, pc}
 628              		.cfi_endproc
 629              	.LFE37:
 631              		.section	.text._execve,"ax",%progbits
 632              		.align	1
 633              		.global	_execve
 634              		.syntax unified
 635              		.thumb
 636              		.thumb_func
 637              		.fpu fpv5-sp-d16
 639              	_execve:
 640              	.LFB38:
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s 			page 16


 248:Src/syscalls.c **** 
 249:Src/syscalls.c **** int _execve(char *name, char **argv, char **env)
 250:Src/syscalls.c **** {
 641              		.loc 1 250 0
 642              		.cfi_startproc
 643              		@ args = 0, pretend = 0, frame = 0
 644              		@ frame_needed = 0, uses_anonymous_args = 0
 645              	.LVL50:
 646 0000 08B5     		push	{r3, lr}
 647              	.LCFI11:
 648              		.cfi_def_cfa_offset 8
 649              		.cfi_offset 3, -8
 650              		.cfi_offset 14, -4
 251:Src/syscalls.c **** 	errno = ENOMEM;
 651              		.loc 1 251 0
 652 0002 FFF7FEFF 		bl	__errno
 653              	.LVL51:
 654 0006 0C23     		movs	r3, #12
 655 0008 0360     		str	r3, [r0]
 252:Src/syscalls.c **** 	return -1;
 253:Src/syscalls.c **** }
 656              		.loc 1 253 0
 657 000a 4FF0FF30 		mov	r0, #-1
 658 000e 08BD     		pop	{r3, pc}
 659              		.cfi_endproc
 660              	.LFE38:
 662              		.section	.bss.heap_end.7322,"aw",%nobits
 663              		.align	2
 664              		.set	.LANCHOR0,. + 0
 667              	heap_end.7322:
 668 0000 00000000 		.space	4
 669              		.weak	__io_getchar
 670              		.weak	__io_putchar
 671              		.text
 672              	.Letext0:
 673              		.file 2 "c:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\machine\\_default
 674              		.file 3 "c:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\sys\\lock.h"
 675              		.file 4 "c:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\sys\\_types.h"
 676              		.file 5 "c:\\program files (x86)\\gnu\\7_2018-q2-update\\lib\\gcc\\arm-none-eabi\\7.3.1\\include\\
 677              		.file 6 "c:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\sys\\_timeval.h"
 678              		.file 7 "c:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\sys\\types.h"
 679              		.file 8 "c:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\sys\\reent.h"
 680              		.file 9 "c:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\time.h"
 681              		.file 10 "c:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\sys\\stat.h"
 682              		.file 11 "c:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\sys\\time.h"
 683              		.file 12 "c:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\sys\\times.h"
 684              		.file 13 "c:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\sys\\errno.h"
 685              		.file 14 "c:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\sys\\unistd.h"
 686              		.file 15 "c:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\sys\\wait.h"
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s 			page 17


DEFINED SYMBOLS
                            *ABS*:00000000 syscalls.c
C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s:18     .text._sbrk:00000000 $t
C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s:25     .text._sbrk:00000000 _sbrk
C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s:89     .text._sbrk:0000003c $d
C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s:96     .text._gettimeofday:00000000 $t
C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s:103    .text._gettimeofday:00000000 _gettimeofday
C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s:127    .text.initialise_monitor_handles:00000000 $t
C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s:134    .text.initialise_monitor_handles:00000000 initialise_monitor_handles
C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s:147    .text._getpid:00000000 $t
C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s:154    .text._getpid:00000000 _getpid
C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s:168    .text._kill:00000000 $t
C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s:175    .text._kill:00000000 _kill
C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s:199    .text._exit:00000000 $t
C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s:206    .text._exit:00000000 _exit
C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s:229    .text._write:00000000 $t
C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s:236    .text._write:00000000 _write
C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s:280    .text._close:00000000 $t
C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s:287    .text._close:00000000 _close
C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s:303    .text._fstat:00000000 $t
C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s:310    .text._fstat:00000000 _fstat
C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s:329    .text._isatty:00000000 $t
C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s:336    .text._isatty:00000000 _isatty
C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s:352    .text._lseek:00000000 $t
C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s:359    .text._lseek:00000000 _lseek
C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s:375    .text._read:00000000 $t
C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s:382    .text._read:00000000 _read
C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s:425    .text._open:00000000 $t
C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s:432    .text._open:00000000 _open
C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s:460    .text._wait:00000000 $t
C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s:467    .text._wait:00000000 _wait
C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s:491    .text._unlink:00000000 $t
C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s:498    .text._unlink:00000000 _unlink
C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s:522    .text._times:00000000 $t
C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s:529    .text._times:00000000 _times
C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s:545    .text._stat:00000000 $t
C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s:552    .text._stat:00000000 _stat
C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s:571    .text._link:00000000 $t
C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s:578    .text._link:00000000 _link
C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s:602    .text._fork:00000000 $t
C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s:609    .text._fork:00000000 _fork
C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s:632    .text._execve:00000000 $t
C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s:639    .text._execve:00000000 _execve
C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s:663    .bss.heap_end.7322:00000000 $d
C:\Users\Patryk\AppData\Local\Temp\ccWemlUH.s:667    .bss.heap_end.7322:00000000 heap_end.7322

UNDEFINED SYMBOLS
__errno
end
__io_putchar
__io_getchar
