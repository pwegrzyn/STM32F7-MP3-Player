ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 1


   1              		.cpu cortex-m7
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"api_msg.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.recv_udp,"ax",%progbits
  18              		.align	1
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu fpv5-sp-d16
  24              	recv_udp:
  25              	.LFB159:
  26              		.file 1 "Middlewares/Third_Party/LwIP/src/api/api_msg.c"
   1:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
   2:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @file
   3:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Sequential API Internal module
   4:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
   5:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
   6:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
   7:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /*
   8:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Copyright (c) 2001-2004 Swedish Institute of Computer Science.
   9:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * All rights reserved.
  10:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
  11:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Redistribution and use in source and binary forms, with or without modification,
  12:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * are permitted provided that the following conditions are met:
  13:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
  14:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * 1. Redistributions of source code must retain the above copyright notice,
  15:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *    this list of conditions and the following disclaimer.
  16:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  17:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *    this list of conditions and the following disclaimer in the documentation
  18:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *    and/or other materials provided with the distribution.
  19:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * 3. The name of the author may not be used to endorse or promote products
  20:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *    derived from this software without specific prior written permission.
  21:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
  22:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR IMPLIED
  23:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  24:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT
  25:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  26:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT
  27:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
  28:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
  29:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING
  30:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY
  31:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * OF SUCH DAMAGE.
  32:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 2


  33:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * This file is part of the lwIP TCP/IP stack.
  34:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
  35:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Author: Adam Dunkels <adam@sics.se>
  36:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
  37:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
  38:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
  39:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include "lwip/opt.h"
  40:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
  41:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_NETCONN /* don't build if not configured for use in lwipopts.h */
  42:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
  43:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include "lwip/priv/api_msg.h"
  44:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
  45:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include "lwip/ip.h"
  46:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include "lwip/ip_addr.h"
  47:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include "lwip/udp.h"
  48:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include "lwip/tcp.h"
  49:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include "lwip/raw.h"
  50:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
  51:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include "lwip/memp.h"
  52:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include "lwip/igmp.h"
  53:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include "lwip/dns.h"
  54:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include "lwip/mld6.h"
  55:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include "lwip/priv/tcpip_priv.h"
  56:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
  57:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include <string.h>
  58:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
  59:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /* netconns are polled once per second (e.g. continue write on memory error) */
  60:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #define NETCONN_TCP_POLL_INTERVAL 2
  61:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
  62:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #define SET_NONBLOCKING_CONNECT(conn, val)  do { if (val) { \
  63:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   (conn)->flags |= NETCONN_FLAG_IN_NONBLOCKING_CONNECT; \
  64:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** } else { \
  65:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   (conn)->flags &= ~ NETCONN_FLAG_IN_NONBLOCKING_CONNECT; }} while(0)
  66:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #define IN_NONBLOCKING_CONNECT(conn) (((conn)->flags & NETCONN_FLAG_IN_NONBLOCKING_CONNECT) != 0)
  67:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
  68:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /* forward declarations */
  69:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
  70:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
  71:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #define WRITE_DELAYED         , 1
  72:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #define WRITE_DELAYED_PARAM   , u8_t delayed
  73:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else /* LWIP_TCPIP_CORE_LOCKING */
  74:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #define WRITE_DELAYED
  75:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #define WRITE_DELAYED_PARAM
  76:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCPIP_CORE_LOCKING */
  77:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static err_t lwip_netconn_do_writemore(struct netconn *conn  WRITE_DELAYED_PARAM);
  78:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static err_t lwip_netconn_do_close_internal(struct netconn *conn  WRITE_DELAYED_PARAM);
  79:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
  80:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
  81:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
  82:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #define TCPIP_APIMSG_ACK(m)   NETCONN_SET_SAFE_ERR((m)->conn, (m)->err)
  83:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else /* LWIP_TCPIP_CORE_LOCKING */
  84:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #define TCPIP_APIMSG_ACK(m)   do { NETCONN_SET_SAFE_ERR((m)->conn, (m)->err); sys_sem_signal(LWIP_A
  85:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCPIP_CORE_LOCKING */
  86:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
  87:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
  88:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** u8_t netconn_aborted;
  89:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 3


  90:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
  91:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
  92:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
  93:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Receive callback function for RAW netconns.
  94:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Doesn't 'eat' the packet, only copies it and sends it to
  95:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * conn->recvmbox
  96:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
  97:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @see raw.h (struct raw_pcb.recv) for parameters and return value
  98:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
  99:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static u8_t
 100:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** recv_raw(void *arg, struct raw_pcb *pcb, struct pbuf *p,
 101:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     const ip_addr_t *addr)
 102:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 103:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct pbuf *q;
 104:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netbuf *buf;
 105:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn;
 106:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 107:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_UNUSED_ARG(addr);
 108:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn = (struct netconn *)arg;
 109:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 110:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if ((conn != NULL) && sys_mbox_valid(&conn->recvmbox)) {
 111:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_RCVBUF
 112:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     int recv_avail;
 113:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     SYS_ARCH_GET(conn->recv_avail, recv_avail);
 114:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if ((recv_avail + (int)(p->tot_len)) > conn->recv_bufsize) {
 115:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       return 0;
 116:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 117:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_RCVBUF */
 118:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* copy the whole packet into new pbufs */
 119:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     q = pbuf_alloc(PBUF_RAW, p->tot_len, PBUF_RAM);
 120:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (q != NULL) {
 121:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (pbuf_copy(q, p) != ERR_OK) {
 122:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         pbuf_free(q);
 123:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         q = NULL;
 124:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 125:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 126:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 127:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (q != NULL) {
 128:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       u16_t len;
 129:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       buf = (struct netbuf *)memp_malloc(MEMP_NETBUF);
 130:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (buf == NULL) {
 131:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         pbuf_free(q);
 132:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         return 0;
 133:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 134:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 135:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       buf->p = q;
 136:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       buf->ptr = q;
 137:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       ip_addr_copy(buf->addr, *ip_current_src_addr());
 138:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       buf->port = pcb->protocol;
 139:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 140:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       len = q->tot_len;
 141:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (sys_mbox_trypost(&conn->recvmbox, buf) != ERR_OK) {
 142:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         netbuf_delete(buf);
 143:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         return 0;
 144:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
 145:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_RCVBUF
 146:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         SYS_ARCH_INC(conn->recv_avail, len);
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 4


 147:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_RCVBUF */
 148:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* Register event with callback */
 149:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         API_EVENT(conn, NETCONN_EVT_RCVPLUS, len);
 150:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 151:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 152:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 153:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 154:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return 0; /* do not eat the packet */
 155:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 156:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_RAW*/
 157:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 158:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_UDP
 159:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 160:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Receive callback function for UDP netconns.
 161:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Posts the packet to conn->recvmbox or deletes it on memory error.
 162:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 163:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @see udp.h (struct udp_pcb.recv) for parameters
 164:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 165:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static void
 166:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** recv_udp(void *arg, struct udp_pcb *pcb, struct pbuf *p,
 167:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****    const ip_addr_t *addr, u16_t port)
 168:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
  27              		.loc 1 168 0
  28              		.cfi_startproc
  29              		@ args = 4, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              	.LVL0:
  32 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
  33              	.LCFI0:
  34              		.cfi_def_cfa_offset 24
  35              		.cfi_offset 4, -24
  36              		.cfi_offset 5, -20
  37              		.cfi_offset 6, -16
  38              		.cfi_offset 7, -12
  39              		.cfi_offset 8, -8
  40              		.cfi_offset 14, -4
  41 0004 0446     		mov	r4, r0
  42 0006 1546     		mov	r5, r2
  43 0008 9846     		mov	r8, r3
 169:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netbuf *buf;
 170:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn;
 171:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   u16_t len;
 172:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_RCVBUF
 173:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   int recv_avail;
 174:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_RCVBUF */
 175:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 176:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_UNUSED_ARG(pcb); /* only used for asserts... */
 177:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("recv_udp must have a pcb argument", pcb != NULL);
  44              		.loc 1 177 0
  45 000a 0E46     		mov	r6, r1
  46 000c 79B3     		cbz	r1, .L13
  47              	.LVL1:
  48              	.L2:
 178:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("recv_udp must have an argument", arg != NULL);
  49              		.loc 1 178 0
  50 000e 002C     		cmp	r4, #0
  51 0010 34D0     		beq	.L14
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 5


  52              	.L3:
  53              	.LVL2:
 179:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn = (struct netconn *)arg;
 180:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 181:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (conn == NULL) {
  54              		.loc 1 181 0
  55 0012 002C     		cmp	r4, #0
  56 0014 39D0     		beq	.L15
 182:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     pbuf_free(p);
 183:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return;
 184:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 185:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 186:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("recv_udp: recv for wrong pcb!", conn->pcb.udp == pcb);
  57              		.loc 1 186 0
  58 0016 6368     		ldr	r3, [r4, #4]
  59 0018 B342     		cmp	r3, r6
  60 001a 05D0     		beq	.L6
  61              		.loc 1 186 0 is_stmt 0 discriminator 1
  62 001c 244B     		ldr	r3, .L19
  63 001e BA22     		movs	r2, #186
  64 0020 2449     		ldr	r1, .L19+4
  65 0022 2548     		ldr	r0, .L19+8
  66 0024 FFF7FEFF 		bl	printf
  67              	.LVL3:
  68              	.L6:
 187:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 188:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_RCVBUF
 189:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   SYS_ARCH_GET(conn->recv_avail, recv_avail);
 190:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (!sys_mbox_valid(&conn->recvmbox) ||
 191:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       ((recv_avail + (int)(p->tot_len)) > conn->recv_bufsize)) {
 192:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else  /* LWIP_SO_RCVBUF */
 193:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (!sys_mbox_valid(&conn->recvmbox)) {
  69              		.loc 1 193 0 is_stmt 1
  70 0028 04F11007 		add	r7, r4, #16
  71 002c 3846     		mov	r0, r7
  72 002e FFF7FEFF 		bl	sys_mbox_valid
  73              	.LVL4:
  74 0032 70B3     		cbz	r0, .L16
 194:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_RCVBUF */
 195:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     pbuf_free(p);
 196:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return;
 197:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 198:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 199:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   buf = (struct netbuf *)memp_malloc(MEMP_NETBUF);
  75              		.loc 1 199 0
  76 0034 0620     		movs	r0, #6
  77 0036 FFF7FEFF 		bl	memp_malloc
  78              	.LVL5:
 200:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (buf == NULL) {
  79              		.loc 1 200 0
  80 003a 0646     		mov	r6, r0
  81              	.LVL6:
  82 003c 70B3     		cbz	r0, .L17
 201:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     pbuf_free(p);
 202:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return;
 203:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 204:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     buf->p = p;
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 6


  83              		.loc 1 204 0
  84 003e 0560     		str	r5, [r0]
 205:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     buf->ptr = p;
  85              		.loc 1 205 0
  86 0040 4560     		str	r5, [r0, #4]
 206:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     ip_addr_set(&buf->addr, addr);
  87              		.loc 1 206 0
  88 0042 B8F1000F 		cmp	r8, #0
  89 0046 2DD0     		beq	.L11
  90              		.loc 1 206 0 is_stmt 0 discriminator 1
  91 0048 D8F80030 		ldr	r3, [r8]
  92              	.L9:
  93              		.loc 1 206 0 discriminator 4
  94 004c B360     		str	r3, [r6, #8]
 207:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     buf->port = port;
  95              		.loc 1 207 0 is_stmt 1 discriminator 4
  96 004e BDF81830 		ldrh	r3, [sp, #24]
  97 0052 B381     		strh	r3, [r6, #12]	@ movhi
 208:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_NETBUF_RECVINFO
 209:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     {
 210:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* get the UDP header - always in the first pbuf, ensured by udp_input */
 211:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       const struct udp_hdr* udphdr = (const struct udp_hdr*)ip_next_header_ptr();
 212:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_CHECKSUM_ON_COPY
 213:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       buf->flags = NETBUF_FLAG_DESTADDR;
 214:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_CHECKSUM_ON_COPY */
 215:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       ip_addr_set(&buf->toaddr, ip_current_dest_addr());
 216:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       buf->toport_chksum = udphdr->dest;
 217:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 218:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_NETBUF_RECVINFO */
 219:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 220:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 221:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   len = p->tot_len;
  98              		.loc 1 221 0 discriminator 4
  99 0054 2D89     		ldrh	r5, [r5, #8]
 100              	.LVL7:
 222:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (sys_mbox_trypost(&conn->recvmbox, buf) != ERR_OK) {
 101              		.loc 1 222 0 discriminator 4
 102 0056 3146     		mov	r1, r6
 103 0058 3846     		mov	r0, r7
 104              	.LVL8:
 105 005a FFF7FEFF 		bl	sys_mbox_trypost
 106              	.LVL9:
 107 005e 18BB     		cbnz	r0, .L18
 223:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     netbuf_delete(buf);
 224:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return;
 225:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 226:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_RCVBUF
 227:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     SYS_ARCH_INC(conn->recv_avail, len);
 228:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_RCVBUF */
 229:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* Register event with callback */
 230:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     API_EVENT(conn, NETCONN_EVT_RCVPLUS, len);
 108              		.loc 1 230 0
 109 0060 A36A     		ldr	r3, [r4, #40]
 110 0062 CBB1     		cbz	r3, .L1
 111              		.loc 1 230 0 is_stmt 0 discriminator 1
 112 0064 2A46     		mov	r2, r5
 113 0066 0021     		movs	r1, #0
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 7


 114 0068 2046     		mov	r0, r4
 115 006a 9847     		blx	r3
 116              	.LVL10:
 117 006c 14E0     		b	.L1
 118              	.LVL11:
 119              	.L13:
 177:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("recv_udp must have an argument", arg != NULL);
 120              		.loc 1 177 0 is_stmt 1 discriminator 1
 121 006e 104B     		ldr	r3, .L19
 122              	.LVL12:
 123 0070 B122     		movs	r2, #177
 124              	.LVL13:
 125 0072 1249     		ldr	r1, .L19+12
 126              	.LVL14:
 127 0074 1048     		ldr	r0, .L19+8
 128              	.LVL15:
 129 0076 FFF7FEFF 		bl	printf
 130              	.LVL16:
 131 007a C8E7     		b	.L2
 132              	.L14:
 178:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn = (struct netconn *)arg;
 133              		.loc 1 178 0 discriminator 1
 134 007c 0C4B     		ldr	r3, .L19
 135 007e B222     		movs	r2, #178
 136 0080 0F49     		ldr	r1, .L19+16
 137 0082 0D48     		ldr	r0, .L19+8
 138 0084 FFF7FEFF 		bl	printf
 139              	.LVL17:
 140 0088 C3E7     		b	.L3
 141              	.LVL18:
 142              	.L15:
 182:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return;
 143              		.loc 1 182 0
 144 008a 2846     		mov	r0, r5
 145 008c FFF7FEFF 		bl	pbuf_free
 146              	.LVL19:
 183:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 147              		.loc 1 183 0
 148 0090 02E0     		b	.L1
 149              	.L16:
 195:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return;
 150              		.loc 1 195 0
 151 0092 2846     		mov	r0, r5
 152 0094 FFF7FEFF 		bl	pbuf_free
 153              	.LVL20:
 154              	.L1:
 231:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 232:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 155              		.loc 1 232 0
 156 0098 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 157              	.LVL21:
 158              	.L17:
 201:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return;
 159              		.loc 1 201 0
 160 009c 2846     		mov	r0, r5
 161              	.LVL22:
 162 009e FFF7FEFF 		bl	pbuf_free
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 8


 163              	.LVL23:
 202:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 164              		.loc 1 202 0
 165 00a2 F9E7     		b	.L1
 166              	.LVL24:
 167              	.L11:
 206:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     buf->port = port;
 168              		.loc 1 206 0
 169 00a4 0023     		movs	r3, #0
 170 00a6 D1E7     		b	.L9
 171              	.LVL25:
 172              	.L18:
 223:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return;
 173              		.loc 1 223 0
 174 00a8 3046     		mov	r0, r6
 175 00aa FFF7FEFF 		bl	netbuf_delete
 176              	.LVL26:
 224:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 177              		.loc 1 224 0
 178 00ae F3E7     		b	.L1
 179              	.L20:
 180              		.align	2
 181              	.L19:
 182 00b0 00000000 		.word	.LC0
 183 00b4 9C000000 		.word	.LC4
 184 00b8 54000000 		.word	.LC2
 185 00bc 30000000 		.word	.LC1
 186 00c0 7C000000 		.word	.LC3
 187              		.cfi_endproc
 188              	.LFE159:
 190              		.section	.text.setup_tcp,"ax",%progbits
 191              		.align	1
 192              		.syntax unified
 193              		.thumb
 194              		.thumb_func
 195              		.fpu fpv5-sp-d16
 197              	setup_tcp:
 198              	.LFB164:
 233:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDP */
 234:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 235:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 236:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 237:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Receive callback function for TCP netconns.
 238:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Posts the packet to conn->recvmbox, but doesn't delete it on errors.
 239:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 240:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @see tcp.h (struct tcp_pcb.recv) for parameters and return value
 241:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 242:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static err_t
 243:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** recv_tcp(void *arg, struct tcp_pcb *pcb, struct pbuf *p, err_t err)
 244:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 245:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn;
 246:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   u16_t len;
 247:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 248:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_UNUSED_ARG(pcb);
 249:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("recv_tcp must have a pcb argument", pcb != NULL);
 250:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("recv_tcp must have an argument", arg != NULL);
 251:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn = (struct netconn *)arg;
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 9


 252:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 253:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (conn == NULL) {
 254:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_VAL;
 255:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 256:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("recv_tcp: recv for wrong pcb!", conn->pcb.tcp == pcb);
 257:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 258:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (!sys_mbox_valid(&conn->recvmbox)) {
 259:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* recvmbox already deleted */
 260:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (p != NULL) {
 261:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_recved(pcb, p->tot_len);
 262:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       pbuf_free(p);
 263:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 264:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_OK;
 265:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 266:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Unlike for UDP or RAW pcbs, don't check for available space
 267:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****      using recv_avail since that could break the connection
 268:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****      (data is already ACKed) */
 269:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 270:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* don't overwrite fatal errors! */
 271:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (err != ERR_OK) {
 272:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     NETCONN_SET_SAFE_ERR(conn, err);
 273:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 274:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 275:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (p != NULL) {
 276:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     len = p->tot_len;
 277:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 278:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     len = 0;
 279:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 280:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 281:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (sys_mbox_trypost(&conn->recvmbox, p) != ERR_OK) {
 282:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* don't deallocate p: it is presented to us later again from tcp_fasttmr! */
 283:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_MEM;
 284:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 285:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_RCVBUF
 286:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     SYS_ARCH_INC(conn->recv_avail, len);
 287:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_RCVBUF */
 288:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* Register event with callback */
 289:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     API_EVENT(conn, NETCONN_EVT_RCVPLUS, len);
 290:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 291:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 292:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return ERR_OK;
 293:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 294:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 295:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 296:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Poll callback function for TCP netconns.
 297:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Wakes up an application thread that waits for a connection to close
 298:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * or data to be sent. The application thread then takes the
 299:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * appropriate action to go on.
 300:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 301:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Signals the conn->sem.
 302:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * netconn_close waits for conn->sem if closing failed.
 303:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 304:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @see tcp.h (struct tcp_pcb.poll) for parameters and return value
 305:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 306:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static err_t
 307:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** poll_tcp(void *arg, struct tcp_pcb *pcb)
 308:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 10


 309:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn = (struct netconn *)arg;
 310:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 311:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_UNUSED_ARG(pcb);
 312:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn != NULL", (conn != NULL));
 313:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 314:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (conn->state == NETCONN_WRITE) {
 315:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     lwip_netconn_do_writemore(conn  WRITE_DELAYED);
 316:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else if (conn->state == NETCONN_CLOSE) {
 317:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if !LWIP_SO_SNDTIMEO && !LWIP_SO_LINGER
 318:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (conn->current_msg && conn->current_msg->msg.sd.polls_left) {
 319:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg->msg.sd.polls_left--;
 320:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 321:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* !LWIP_SO_SNDTIMEO && !LWIP_SO_LINGER */
 322:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     lwip_netconn_do_close_internal(conn  WRITE_DELAYED);
 323:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 324:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* @todo: implement connect timeout here? */
 325:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 326:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Did a nonblocking write fail before? Then check available write-space. */
 327:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (conn->flags & NETCONN_FLAG_CHECK_WRITESPACE) {
 328:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* If the queued byte- or pbuf-count drops below the configured low-water limit,
 329:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        let select mark this pcb as writable again. */
 330:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if ((conn->pcb.tcp != NULL) && (tcp_sndbuf(conn->pcb.tcp) > TCP_SNDLOWAT) &&
 331:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (tcp_sndqueuelen(conn->pcb.tcp) < TCP_SNDQUEUELOWAT)) {
 332:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->flags &= ~NETCONN_FLAG_CHECK_WRITESPACE;
 333:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       API_EVENT(conn, NETCONN_EVT_SENDPLUS, 0);
 334:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 335:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 336:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 337:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return ERR_OK;
 338:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 339:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 340:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 341:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Sent callback function for TCP netconns.
 342:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Signals the conn->sem and calls API_EVENT.
 343:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * netconn_write waits for conn->sem if send buffer is low.
 344:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 345:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @see tcp.h (struct tcp_pcb.sent) for parameters and return value
 346:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 347:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static err_t
 348:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** sent_tcp(void *arg, struct tcp_pcb *pcb, u16_t len)
 349:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 350:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn = (struct netconn *)arg;
 351:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 352:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_UNUSED_ARG(pcb);
 353:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn != NULL", (conn != NULL));
 354:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 355:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (conn) {
 356:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (conn->state == NETCONN_WRITE) {
 357:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       lwip_netconn_do_writemore(conn  WRITE_DELAYED);
 358:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else if (conn->state == NETCONN_CLOSE) {
 359:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       lwip_netconn_do_close_internal(conn  WRITE_DELAYED);
 360:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 361:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 362:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* If the queued byte- or pbuf-count drops below the configured low-water limit,
 363:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        let select mark this pcb as writable again. */
 364:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if ((conn->pcb.tcp != NULL) && (tcp_sndbuf(conn->pcb.tcp) > TCP_SNDLOWAT) &&
 365:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (tcp_sndqueuelen(conn->pcb.tcp) < TCP_SNDQUEUELOWAT)) {
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 11


 366:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->flags &= ~NETCONN_FLAG_CHECK_WRITESPACE;
 367:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       API_EVENT(conn, NETCONN_EVT_SENDPLUS, len);
 368:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 369:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 370:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 371:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return ERR_OK;
 372:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 373:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 374:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 375:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Error callback function for TCP netconns.
 376:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Signals conn->sem, posts to all conn mboxes and calls API_EVENT.
 377:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * The application thread has then to decide what to do.
 378:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 379:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @see tcp.h (struct tcp_pcb.err) for parameters
 380:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 381:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static void
 382:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** err_tcp(void *arg, err_t err)
 383:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 384:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn;
 385:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   enum netconn_state old_state;
 386:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 387:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn = (struct netconn *)arg;
 388:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn != NULL", (conn != NULL));
 389:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 390:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->pcb.tcp = NULL;
 391:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 392:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* reset conn->state now before waking up other threads */
 393:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   old_state = conn->state;
 394:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->state = NETCONN_NONE;
 395:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 396:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (old_state == NETCONN_CLOSE) {
 397:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* RST during close: let close return success & dealloc the netconn */
 398:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     err = ERR_OK;
 399:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     NETCONN_SET_SAFE_ERR(conn, ERR_OK);
 400:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 401:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* no check since this is always fatal! */
 402:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     SYS_ARCH_SET(conn->last_err, err);
 403:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 404:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 405:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* @todo: the type of NETCONN_EVT created should depend on 'old_state' */
 406:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 407:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Notify the user layer about a connection error. Used to signal select. */
 408:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   API_EVENT(conn, NETCONN_EVT_ERROR, 0);
 409:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Try to release selects pending on 'read' or 'write', too.
 410:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****      They will get an error if they actually try to read or write. */
 411:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   API_EVENT(conn, NETCONN_EVT_RCVPLUS, 0);
 412:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   API_EVENT(conn, NETCONN_EVT_SENDPLUS, 0);
 413:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 414:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* pass NULL-message to recvmbox to wake up pending recv */
 415:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (sys_mbox_valid(&conn->recvmbox)) {
 416:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* use trypost to prevent deadlock */
 417:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_trypost(&conn->recvmbox, NULL);
 418:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 419:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* pass NULL-message to acceptmbox to wake up pending accept */
 420:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (sys_mbox_valid(&conn->acceptmbox)) {
 421:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* use trypost to preven deadlock */
 422:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_trypost(&conn->acceptmbox, NULL);
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 12


 423:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 424:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 425:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if ((old_state == NETCONN_WRITE) || (old_state == NETCONN_CLOSE) ||
 426:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (old_state == NETCONN_CONNECT)) {
 427:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* calling lwip_netconn_do_writemore/lwip_netconn_do_close_internal is not necessary
 428:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        since the pcb has already been deleted! */
 429:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     int was_nonblocking_connect = IN_NONBLOCKING_CONNECT(conn);
 430:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     SET_NONBLOCKING_CONNECT(conn, 0);
 431:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 432:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (!was_nonblocking_connect) {
 433:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       sys_sem_t* op_completed_sem;
 434:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* set error return code */
 435:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       LWIP_ASSERT("conn->current_msg != NULL", conn->current_msg != NULL);
 436:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg->err = err;
 437:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       op_completed_sem = LWIP_API_MSG_SEM(conn->current_msg);
 438:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       LWIP_ASSERT("inavlid op_completed_sem", sys_sem_valid(op_completed_sem));
 439:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg = NULL;
 440:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* wake up the waiting task */
 441:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       NETCONN_SET_SAFE_ERR(conn, err);
 442:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       sys_sem_signal(op_completed_sem);
 443:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 444:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 445:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     LWIP_ASSERT("conn->current_msg == NULL", conn->current_msg == NULL);
 446:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 447:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 448:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 449:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 450:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Setup a tcp_pcb with the correct callback function pointers
 451:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * and their arguments.
 452:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 453:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param conn the TCP netconn to setup
 454:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 455:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static void
 456:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** setup_tcp(struct netconn *conn)
 457:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 199              		.loc 1 457 0
 200              		.cfi_startproc
 201              		@ args = 0, pretend = 0, frame = 0
 202              		@ frame_needed = 0, uses_anonymous_args = 0
 203              	.LVL27:
 204 0000 10B5     		push	{r4, lr}
 205              	.LCFI1:
 206              		.cfi_def_cfa_offset 8
 207              		.cfi_offset 4, -8
 208              		.cfi_offset 14, -4
 209 0002 0146     		mov	r1, r0
 458:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct tcp_pcb *pcb;
 459:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 460:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   pcb = conn->pcb.tcp;
 210              		.loc 1 460 0
 211 0004 4468     		ldr	r4, [r0, #4]
 212              	.LVL28:
 461:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   tcp_arg(pcb, conn);
 213              		.loc 1 461 0
 214 0006 2046     		mov	r0, r4
 215              	.LVL29:
 216 0008 FFF7FEFF 		bl	tcp_arg
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 13


 217              	.LVL30:
 462:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   tcp_recv(pcb, recv_tcp);
 218              		.loc 1 462 0
 219 000c 0849     		ldr	r1, .L23
 220 000e 2046     		mov	r0, r4
 221 0010 FFF7FEFF 		bl	tcp_recv
 222              	.LVL31:
 463:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   tcp_sent(pcb, sent_tcp);
 223              		.loc 1 463 0
 224 0014 0749     		ldr	r1, .L23+4
 225 0016 2046     		mov	r0, r4
 226 0018 FFF7FEFF 		bl	tcp_sent
 227              	.LVL32:
 464:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   tcp_poll(pcb, poll_tcp, NETCONN_TCP_POLL_INTERVAL);
 228              		.loc 1 464 0
 229 001c 0222     		movs	r2, #2
 230 001e 0649     		ldr	r1, .L23+8
 231 0020 2046     		mov	r0, r4
 232 0022 FFF7FEFF 		bl	tcp_poll
 233              	.LVL33:
 465:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   tcp_err(pcb, err_tcp);
 234              		.loc 1 465 0
 235 0026 0549     		ldr	r1, .L23+12
 236 0028 2046     		mov	r0, r4
 237 002a FFF7FEFF 		bl	tcp_err
 238              	.LVL34:
 466:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 239              		.loc 1 466 0
 240 002e 10BD     		pop	{r4, pc}
 241              	.LVL35:
 242              	.L24:
 243              		.align	2
 244              	.L23:
 245 0030 00000000 		.word	recv_tcp
 246 0034 00000000 		.word	sent_tcp
 247 0038 00000000 		.word	poll_tcp
 248 003c 00000000 		.word	err_tcp
 249              		.cfi_endproc
 250              	.LFE164:
 252              		.section	.text.pcb_new,"ax",%progbits
 253              		.align	1
 254              		.syntax unified
 255              		.thumb
 256              		.thumb_func
 257              		.fpu fpv5-sp-d16
 259              	pcb_new:
 260              	.LFB166:
 467:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 468:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 469:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Accept callback function for TCP netconns.
 470:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Allocates a new netconn and posts that to conn->acceptmbox.
 471:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 472:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @see tcp.h (struct tcp_pcb_listen.accept) for parameters and return value
 473:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 474:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static err_t
 475:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** accept_function(void *arg, struct tcp_pcb *newpcb, err_t err)
 476:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 14


 477:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *newconn;
 478:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn = (struct netconn *)arg;
 479:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 480:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (conn == NULL) {
 481:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_VAL;
 482:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 483:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (!sys_mbox_valid(&conn->acceptmbox)) {
 484:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     LWIP_DEBUGF(API_MSG_DEBUG, ("accept_function: acceptmbox already deleted\n"));
 485:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_VAL;
 486:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 487:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 488:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (newpcb == NULL) {
 489:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* out-of-pcbs during connect: pass on this error to the application */
 490:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (sys_mbox_trypost(&conn->acceptmbox, &netconn_aborted) == ERR_OK) {
 491:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* Register event with callback */
 492:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       API_EVENT(conn, NETCONN_EVT_RCVPLUS, 0);
 493:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 494:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_VAL;
 495:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 496:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 497:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_DEBUGF(API_MSG_DEBUG, ("accept_function: newpcb->tate: %s\n", tcp_debug_state_str(newpcb->st
 498:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 499:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* We have to set the callback here even though
 500:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****    * the new socket is unknown. newconn->socket is marked as -1. */
 501:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   newconn = netconn_alloc(conn->type, conn->callback);
 502:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (newconn == NULL) {
 503:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* outof netconns: pass on this error to the application */
 504:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (sys_mbox_trypost(&conn->acceptmbox, &netconn_aborted) == ERR_OK) {
 505:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* Register event with callback */
 506:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       API_EVENT(conn, NETCONN_EVT_RCVPLUS, 0);
 507:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 508:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_MEM;
 509:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 510:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   newconn->pcb.tcp = newpcb;
 511:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   setup_tcp(newconn);
 512:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* no protection: when creating the pcb, the netconn is not yet known
 513:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****      to the application thread */
 514:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   newconn->last_err = err;
 515:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 516:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* handle backlog counter */
 517:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   tcp_backlog_delayed(newpcb);
 518:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 519:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (sys_mbox_trypost(&conn->acceptmbox, newconn) != ERR_OK) {
 520:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* When returning != ERR_OK, the pcb is aborted in tcp_process(),
 521:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        so do nothing here! */
 522:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* remove all references to this netconn from the pcb */
 523:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     struct tcp_pcb* pcb = newconn->pcb.tcp;
 524:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_arg(pcb, NULL);
 525:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_recv(pcb, NULL);
 526:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_sent(pcb, NULL);
 527:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_poll(pcb, NULL, 0);
 528:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_err(pcb, NULL);
 529:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* remove reference from to the pcb from this netconn */
 530:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     newconn->pcb.tcp = NULL;
 531:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* no need to drain since we know the recvmbox is empty. */
 532:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_free(&newconn->recvmbox);
 533:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_set_invalid(&newconn->recvmbox);
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 15


 534:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     netconn_free(newconn);
 535:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_MEM;
 536:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 537:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* Register event with callback */
 538:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     API_EVENT(conn, NETCONN_EVT_RCVPLUS, 0);
 539:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 540:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 541:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return ERR_OK;
 542:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 543:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 544:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 545:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 546:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Create a new pcb of a specific type.
 547:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from lwip_netconn_do_newconn().
 548:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 549:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param msg the api_msg_msg describing the connection type
 550:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 551:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static void
 552:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** pcb_new(struct api_msg *msg)
 553:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 261              		.loc 1 553 0
 262              		.cfi_startproc
 263              		@ args = 0, pretend = 0, frame = 0
 264              		@ frame_needed = 0, uses_anonymous_args = 0
 265              	.LVL36:
 266 0000 38B5     		push	{r3, r4, r5, lr}
 267              	.LCFI2:
 268              		.cfi_def_cfa_offset 16
 269              		.cfi_offset 3, -16
 270              		.cfi_offset 4, -12
 271              		.cfi_offset 5, -8
 272              		.cfi_offset 14, -4
 273 0002 0446     		mov	r4, r0
 274              	.LVL37:
 554:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   enum lwip_ip_addr_type iptype = IPADDR_TYPE_V4;
 555:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 556:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("pcb_new: pcb already allocated", msg->conn->pcb.tcp == NULL);
 275              		.loc 1 556 0
 276 0004 0368     		ldr	r3, [r0]
 277 0006 5B68     		ldr	r3, [r3, #4]
 278 0008 33B1     		cbz	r3, .L26
 279              		.loc 1 556 0 is_stmt 0 discriminator 1
 280 000a 1B4B     		ldr	r3, .L37
 281 000c 4FF40B72 		mov	r2, #556
 282 0010 1A49     		ldr	r1, .L37+4
 283 0012 1B48     		ldr	r0, .L37+8
 284              	.LVL38:
 285 0014 FFF7FEFF 		bl	printf
 286              	.LVL39:
 287              	.L26:
 557:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  
 558:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_IPV6 && LWIP_IPV4
 559:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* IPv6: Dual-stack by default, unless netconn_set_ipv6only() is called */
 560:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if(NETCONNTYPE_ISIPV6(netconn_type(msg->conn))) {
 561:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     iptype = IPADDR_TYPE_ANY;
 562:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 563:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 16


 564:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   
 565:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Allocate a PCB for this connection */
 566:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   switch(NETCONNTYPE_GROUP(msg->conn->type)) {
 288              		.loc 1 566 0 is_stmt 1
 289 0018 2568     		ldr	r5, [r4]
 290 001a 2B78     		ldrb	r3, [r5]	@ zero_extendqisi2
 291 001c 03F0F003 		and	r3, r3, #240
 292 0020 102B     		cmp	r3, #16
 293 0022 18D0     		beq	.L28
 294 0024 202B     		cmp	r3, #32
 295 0026 21D1     		bne	.L33
 567:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
 568:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   case NETCONN_RAW:
 569:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->conn->pcb.raw = raw_new_ip_type(iptype, msg->msg.n.proto);
 570:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->conn->pcb.raw != NULL) {
 571:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_IPV6
 572:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* ICMPv6 packets should always have checksum calculated by the stack as per RFC 3542 chapter
 573:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (NETCONNTYPE_ISIPV6(msg->conn->type) && msg->conn->pcb.raw->protocol == IP6_NEXTH_ICMP6) {
 574:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->pcb.raw->chksum_reqd = 1;
 575:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->pcb.raw->chksum_offset = 2;
 576:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 577:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_IPV6 */
 578:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       raw_recv(msg->conn->pcb.raw, recv_raw, msg->conn);
 579:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 580:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     break;
 581:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_RAW */
 582:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_UDP
 583:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   case NETCONN_UDP:
 584:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->conn->pcb.udp = udp_new_ip_type(iptype);
 296              		.loc 1 584 0
 297 0028 0020     		movs	r0, #0
 298 002a FFF7FEFF 		bl	udp_new_ip_type
 299              	.LVL40:
 300 002e 6860     		str	r0, [r5, #4]
 585:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->conn->pcb.udp != NULL) {
 301              		.loc 1 585 0
 302 0030 2368     		ldr	r3, [r4]
 303 0032 5A68     		ldr	r2, [r3, #4]
 304 0034 42B1     		cbz	r2, .L30
 586:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_UDPLITE
 587:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (NETCONNTYPE_ISUDPLITE(msg->conn->type)) {
 588:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         udp_setflags(msg->conn->pcb.udp, UDP_FLAGS_UDPLITE);
 589:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 590:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDPLITE */
 591:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (NETCONNTYPE_ISUDPNOCHKSUM(msg->conn->type)) {
 305              		.loc 1 591 0
 306 0036 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 307 0038 222B     		cmp	r3, #34
 308 003a 09D0     		beq	.L35
 309              	.L31:
 592:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         udp_setflags(msg->conn->pcb.udp, UDP_FLAGS_NOCHKSUM);
 593:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 594:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       udp_recv(msg->conn->pcb.udp, recv_udp, msg->conn);
 310              		.loc 1 594 0
 311 003c 2368     		ldr	r3, [r4]
 312 003e 1A46     		mov	r2, r3
 313 0040 1049     		ldr	r1, .L37+12
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 17


 314 0042 5868     		ldr	r0, [r3, #4]
 315 0044 FFF7FEFF 		bl	udp_recv
 316              	.LVL41:
 317              	.L30:
 595:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 596:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     break;
 597:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDP */
 598:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 599:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   case NETCONN_TCP:
 600:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->conn->pcb.tcp = tcp_new_ip_type(iptype);
 601:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->conn->pcb.tcp != NULL) {
 602:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       setup_tcp(msg->conn);
 603:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 604:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     break;
 605:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 606:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   default:
 607:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* Unsupported netconn type, e.g. protocol disabled */
 608:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_VAL;
 609:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return;
 610:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 611:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (msg->conn->pcb.ip == NULL) {
 318              		.loc 1 611 0
 319 0048 2368     		ldr	r3, [r4]
 320 004a 5B68     		ldr	r3, [r3, #4]
 321 004c 8BB1     		cbz	r3, .L36
 322              	.L25:
 612:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_MEM;
 613:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 614:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 323              		.loc 1 614 0
 324 004e 38BD     		pop	{r3, r4, r5, pc}
 325              	.LVL42:
 326              	.L35:
 592:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 327              		.loc 1 592 0
 328 0050 0123     		movs	r3, #1
 329 0052 1374     		strb	r3, [r2, #16]
 330 0054 F2E7     		b	.L31
 331              	.L28:
 600:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->conn->pcb.tcp != NULL) {
 332              		.loc 1 600 0
 333 0056 0020     		movs	r0, #0
 334 0058 FFF7FEFF 		bl	tcp_new_ip_type
 335              	.LVL43:
 336 005c 6860     		str	r0, [r5, #4]
 601:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       setup_tcp(msg->conn);
 337              		.loc 1 601 0
 338 005e 2068     		ldr	r0, [r4]
 339 0060 4368     		ldr	r3, [r0, #4]
 340 0062 002B     		cmp	r3, #0
 341 0064 F0D0     		beq	.L30
 602:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 342              		.loc 1 602 0
 343 0066 FFF7FEFF 		bl	setup_tcp
 344              	.LVL44:
 345 006a EDE7     		b	.L30
 346              	.L33:
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 18


 608:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return;
 347              		.loc 1 608 0
 348 006c FA23     		movs	r3, #250
 349 006e 2371     		strb	r3, [r4, #4]
 609:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 350              		.loc 1 609 0
 351 0070 EDE7     		b	.L25
 352              	.L36:
 612:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 353              		.loc 1 612 0
 354 0072 FF23     		movs	r3, #255
 355 0074 2371     		strb	r3, [r4, #4]
 356 0076 EAE7     		b	.L25
 357              	.L38:
 358              		.align	2
 359              	.L37:
 360 0078 00000000 		.word	.LC0
 361 007c 00000000 		.word	.LC5
 362 0080 54000000 		.word	.LC2
 363 0084 00000000 		.word	recv_udp
 364              		.cfi_endproc
 365              	.LFE166:
 367              		.section	.text.err_tcp,"ax",%progbits
 368              		.align	1
 369              		.syntax unified
 370              		.thumb
 371              		.thumb_func
 372              		.fpu fpv5-sp-d16
 374              	err_tcp:
 375              	.LFB163:
 383:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn;
 376              		.loc 1 383 0
 377              		.cfi_startproc
 378              		@ args = 0, pretend = 0, frame = 0
 379              		@ frame_needed = 0, uses_anonymous_args = 0
 380              	.LVL45:
 381 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 382              	.LCFI3:
 383              		.cfi_def_cfa_offset 24
 384              		.cfi_offset 3, -24
 385              		.cfi_offset 4, -20
 386              		.cfi_offset 5, -16
 387              		.cfi_offset 6, -12
 388              		.cfi_offset 7, -8
 389              		.cfi_offset 14, -4
 390 0002 0E46     		mov	r6, r1
 391              	.LVL46:
 388:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 392              		.loc 1 388 0
 393 0004 0446     		mov	r4, r0
 394 0006 A0B1     		cbz	r0, .L58
 395              	.LVL47:
 396              	.L40:
 390:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 397              		.loc 1 390 0
 398 0008 0023     		movs	r3, #0
 399 000a 6360     		str	r3, [r4, #4]
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 19


 393:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->state = NETCONN_NONE;
 400              		.loc 1 393 0
 401 000c 6578     		ldrb	r5, [r4, #1]	@ zero_extendqisi2
 402              	.LVL48:
 394:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 403              		.loc 1 394 0
 404 000e 6370     		strb	r3, [r4, #1]
 396:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* RST during close: let close return success & dealloc the netconn */
 405              		.loc 1 396 0
 406 0010 042D     		cmp	r5, #4
 407 0012 16D1     		bne	.L41
 408              	.LVL49:
 399:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 409              		.loc 1 399 0
 410 0014 002C     		cmp	r4, #0
 411 0016 47D0     		beq	.L56
 412              	.LBB2:
 399:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 413              		.loc 1 399 0 is_stmt 0 discriminator 1
 414 0018 FFF7FEFF 		bl	sys_arch_protect
 415              	.LVL50:
 416 001c 94F90830 		ldrsb	r3, [r4, #8]
 417 0020 13F10C0F 		cmn	r3, #12
 418 0024 01DB     		blt	.L43
 399:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 419              		.loc 1 399 0 discriminator 2
 420 0026 0023     		movs	r3, #0
 421 0028 2372     		strb	r3, [r4, #8]
 422              	.L43:
 399:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 423              		.loc 1 399 0 discriminator 4
 424 002a FFF7FEFF 		bl	sys_arch_unprotect
 425              	.LVL51:
 426              	.LBE2:
 398:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     NETCONN_SET_SAFE_ERR(conn, ERR_OK);
 427              		.loc 1 398 0 is_stmt 1 discriminator 4
 428 002e 0026     		movs	r6, #0
 429 0030 0CE0     		b	.L42
 430              	.LVL52:
 431              	.L58:
 388:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 432              		.loc 1 388 0 discriminator 1
 433 0032 3D4B     		ldr	r3, .L63
 434 0034 4FF4C272 		mov	r2, #388
 435 0038 3C49     		ldr	r1, .L63+4
 436              	.LVL53:
 437 003a 3D48     		ldr	r0, .L63+8
 438              	.LVL54:
 439 003c FFF7FEFF 		bl	printf
 440              	.LVL55:
 441 0040 E2E7     		b	.L40
 442              	.LVL56:
 443              	.L41:
 444              	.LBB3:
 402:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 445              		.loc 1 402 0
 446 0042 FFF7FEFF 		bl	sys_arch_protect
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 20


 447              	.LVL57:
 448 0046 2672     		strb	r6, [r4, #8]
 449 0048 FFF7FEFF 		bl	sys_arch_unprotect
 450              	.LVL58:
 451              	.L42:
 452              	.LBE3:
 408:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Try to release selects pending on 'read' or 'write', too.
 453              		.loc 1 408 0
 454 004c A36A     		ldr	r3, [r4, #40]
 455 004e 1BB1     		cbz	r3, .L44
 408:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Try to release selects pending on 'read' or 'write', too.
 456              		.loc 1 408 0 is_stmt 0 discriminator 1
 457 0050 0022     		movs	r2, #0
 458 0052 0421     		movs	r1, #4
 459 0054 2046     		mov	r0, r4
 460 0056 9847     		blx	r3
 461              	.LVL59:
 462              	.L44:
 411:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   API_EVENT(conn, NETCONN_EVT_SENDPLUS, 0);
 463              		.loc 1 411 0 is_stmt 1
 464 0058 A36A     		ldr	r3, [r4, #40]
 465 005a 1BB1     		cbz	r3, .L45
 411:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   API_EVENT(conn, NETCONN_EVT_SENDPLUS, 0);
 466              		.loc 1 411 0 is_stmt 0 discriminator 1
 467 005c 0022     		movs	r2, #0
 468 005e 1146     		mov	r1, r2
 469 0060 2046     		mov	r0, r4
 470 0062 9847     		blx	r3
 471              	.LVL60:
 472              	.L45:
 412:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 473              		.loc 1 412 0 is_stmt 1
 474 0064 A36A     		ldr	r3, [r4, #40]
 475 0066 1BB1     		cbz	r3, .L46
 412:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 476              		.loc 1 412 0 is_stmt 0 discriminator 1
 477 0068 0022     		movs	r2, #0
 478 006a 0221     		movs	r1, #2
 479 006c 2046     		mov	r0, r4
 480 006e 9847     		blx	r3
 481              	.LVL61:
 482              	.L46:
 415:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* use trypost to prevent deadlock */
 483              		.loc 1 415 0 is_stmt 1
 484 0070 04F11007 		add	r7, r4, #16
 485 0074 3846     		mov	r0, r7
 486 0076 FFF7FEFF 		bl	sys_mbox_valid
 487              	.LVL62:
 488 007a B8B9     		cbnz	r0, .L59
 489              	.L47:
 420:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* use trypost to preven deadlock */
 490              		.loc 1 420 0
 491 007c 04F11407 		add	r7, r4, #20
 492 0080 3846     		mov	r0, r7
 493 0082 FFF7FEFF 		bl	sys_mbox_valid
 494              	.LVL63:
 495 0086 B0B9     		cbnz	r0, .L60
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 21


 496              	.L48:
 425:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (old_state == NETCONN_CONNECT)) {
 497              		.loc 1 425 0
 498 0088 042D     		cmp	r5, #4
 499 008a 18BF     		it	ne
 500 008c 012D     		cmpne	r5, #1
 501 008e 17D0     		beq	.L49
 425:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (old_state == NETCONN_CONNECT)) {
 502              		.loc 1 425 0 is_stmt 0 discriminator 1
 503 0090 032D     		cmp	r5, #3
 504 0092 15D0     		beq	.L49
 445:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 505              		.loc 1 445 0 is_stmt 1
 506 0094 636A     		ldr	r3, [r4, #36]
 507 0096 ABB3     		cbz	r3, .L39
 445:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 508              		.loc 1 445 0 is_stmt 0 discriminator 1
 509 0098 234B     		ldr	r3, .L63
 510 009a 40F2BD12 		movw	r2, #445
 511 009e 2549     		ldr	r1, .L63+12
 512 00a0 2348     		ldr	r0, .L63+8
 513 00a2 FFF7FEFF 		bl	printf
 514              	.LVL64:
 447:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 515              		.loc 1 447 0 is_stmt 1 discriminator 1
 516 00a6 2DE0     		b	.L39
 517              	.LVL65:
 518              	.L56:
 398:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     NETCONN_SET_SAFE_ERR(conn, ERR_OK);
 519              		.loc 1 398 0
 520 00a8 0026     		movs	r6, #0
 521 00aa CFE7     		b	.L42
 522              	.LVL66:
 523              	.L59:
 417:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 524              		.loc 1 417 0
 525 00ac 0021     		movs	r1, #0
 526 00ae 3846     		mov	r0, r7
 527 00b0 FFF7FEFF 		bl	sys_mbox_trypost
 528              	.LVL67:
 529 00b4 E2E7     		b	.L47
 530              	.L60:
 422:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 531              		.loc 1 422 0
 532 00b6 0021     		movs	r1, #0
 533 00b8 3846     		mov	r0, r7
 534 00ba FFF7FEFF 		bl	sys_mbox_trypost
 535              	.LVL68:
 536 00be E3E7     		b	.L48
 537              	.L49:
 538              	.LBB4:
 429:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     SET_NONBLOCKING_CONNECT(conn, 0);
 539              		.loc 1 429 0
 540 00c0 237F     		ldrb	r3, [r4, #28]	@ zero_extendqisi2
 541              	.LVL69:
 430:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 542              		.loc 1 430 0
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 22


 543 00c2 23F00402 		bic	r2, r3, #4
 544 00c6 2277     		strb	r2, [r4, #28]
 432:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       sys_sem_t* op_completed_sem;
 545              		.loc 1 432 0
 546 00c8 13F0040F 		tst	r3, #4
 547 00cc 1AD1     		bne	.L39
 548              	.LBB5:
 435:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg->err = err;
 549              		.loc 1 435 0
 550 00ce 636A     		ldr	r3, [r4, #36]
 551              	.LVL70:
 552 00d0 CBB1     		cbz	r3, .L61
 553              	.L52:
 436:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       op_completed_sem = LWIP_API_MSG_SEM(conn->current_msg);
 554              		.loc 1 436 0
 555 00d2 636A     		ldr	r3, [r4, #36]
 556 00d4 1E71     		strb	r6, [r3, #4]
 437:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       LWIP_ASSERT("inavlid op_completed_sem", sys_sem_valid(op_completed_sem));
 557              		.loc 1 437 0
 558 00d6 636A     		ldr	r3, [r4, #36]
 559 00d8 1D68     		ldr	r5, [r3]
 560              	.LVL71:
 561 00da 0C35     		adds	r5, r5, #12
 562              	.LVL72:
 438:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg = NULL;
 563              		.loc 1 438 0
 564 00dc 2846     		mov	r0, r5
 565 00de FFF7FEFF 		bl	sys_sem_valid
 566              	.LVL73:
 567 00e2 C0B1     		cbz	r0, .L62
 568              	.L53:
 439:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* wake up the waiting task */
 569              		.loc 1 439 0
 570 00e4 0023     		movs	r3, #0
 571 00e6 6362     		str	r3, [r4, #36]
 441:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       sys_sem_signal(op_completed_sem);
 572              		.loc 1 441 0
 573 00e8 4CB1     		cbz	r4, .L54
 574              	.LBB6:
 441:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       sys_sem_signal(op_completed_sem);
 575              		.loc 1 441 0 is_stmt 0 discriminator 1
 576 00ea FFF7FEFF 		bl	sys_arch_protect
 577              	.LVL74:
 578 00ee 94F90830 		ldrsb	r3, [r4, #8]
 579 00f2 13F10C0F 		cmn	r3, #12
 580 00f6 00DB     		blt	.L55
 441:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       sys_sem_signal(op_completed_sem);
 581              		.loc 1 441 0 discriminator 2
 582 00f8 2672     		strb	r6, [r4, #8]
 583              	.L55:
 441:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       sys_sem_signal(op_completed_sem);
 584              		.loc 1 441 0 discriminator 4
 585 00fa FFF7FEFF 		bl	sys_arch_unprotect
 586              	.LVL75:
 587              	.L54:
 588              	.LBE6:
 442:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 23


 589              		.loc 1 442 0 is_stmt 1
 590 00fe 2846     		mov	r0, r5
 591 0100 FFF7FEFF 		bl	sys_sem_signal
 592              	.LVL76:
 593              	.L39:
 594              	.LBE5:
 595              	.LBE4:
 447:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 596              		.loc 1 447 0
 597 0104 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 598              	.LVL77:
 599              	.L61:
 600              	.LBB8:
 601              	.LBB7:
 435:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg->err = err;
 602              		.loc 1 435 0 discriminator 1
 603 0106 084B     		ldr	r3, .L63
 604 0108 40F2B312 		movw	r2, #435
 605 010c 0A49     		ldr	r1, .L63+16
 606 010e 0848     		ldr	r0, .L63+8
 607 0110 FFF7FEFF 		bl	printf
 608              	.LVL78:
 609 0114 DDE7     		b	.L52
 610              	.LVL79:
 611              	.L62:
 438:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg = NULL;
 612              		.loc 1 438 0 discriminator 1
 613 0116 044B     		ldr	r3, .L63
 614 0118 4FF4DB72 		mov	r2, #438
 615 011c 0749     		ldr	r1, .L63+20
 616 011e 0448     		ldr	r0, .L63+8
 617 0120 FFF7FEFF 		bl	printf
 618              	.LVL80:
 619 0124 DEE7     		b	.L53
 620              	.L64:
 621 0126 00BF     		.align	2
 622              	.L63:
 623 0128 00000000 		.word	.LC0
 624 012c 00000000 		.word	.LC6
 625 0130 54000000 		.word	.LC2
 626 0134 48000000 		.word	.LC9
 627 0138 10000000 		.word	.LC7
 628 013c 2C000000 		.word	.LC8
 629              	.LBE7:
 630              	.LBE8:
 631              		.cfi_endproc
 632              	.LFE163:
 634              		.section	.text.lwip_netconn_do_connected,"ax",%progbits
 635              		.align	1
 636              		.syntax unified
 637              		.thumb
 638              		.thumb_func
 639              		.fpu fpv5-sp-d16
 641              	lwip_netconn_do_connected:
 642              	.LFB174:
 615:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 616:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 24


 617:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Create a new pcb of a specific type inside a netconn.
 618:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_new_with_proto_and_callback.
 619:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 620:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg describing the connection type
 621:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 622:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
 623:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_newconn(void *m)
 624:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 625:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
 626:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 627:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   msg->err = ERR_OK;
 628:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (msg->conn->pcb.tcp == NULL) {
 629:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     pcb_new(msg);
 630:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 631:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Else? This "new" connection already has a PCB allocated. */
 632:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Is this an error condition? Should it be deleted? */
 633:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* We currently just are happy and return. */
 634:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 635:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   TCPIP_APIMSG_ACK(msg);
 636:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 637:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 638:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 639:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Create a new netconn (of a specific type) that has a callback function.
 640:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * The corresponding pcb is NOT created!
 641:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 642:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param t the type of 'connection' to create (@see enum netconn_type)
 643:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param callback a function to call on status changes (RX available, TX'ed)
 644:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @return a newly allocated struct netconn or
 645:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *         NULL on memory error
 646:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 647:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** struct netconn*
 648:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** netconn_alloc(enum netconn_type t, netconn_callback callback)
 649:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 650:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn;
 651:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   int size;
 652:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 653:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn = (struct netconn *)memp_malloc(MEMP_NETCONN);
 654:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (conn == NULL) {
 655:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return NULL;
 656:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 657:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 658:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->last_err = ERR_OK;
 659:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->type = t;
 660:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->pcb.tcp = NULL;
 661:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 662:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* If all sizes are the same, every compiler should optimize this switch to nothing */
 663:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   switch(NETCONNTYPE_GROUP(t)) {
 664:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
 665:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   case NETCONN_RAW:
 666:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     size = DEFAULT_RAW_RECVMBOX_SIZE;
 667:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     break;
 668:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_RAW */
 669:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_UDP
 670:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   case NETCONN_UDP:
 671:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     size = DEFAULT_UDP_RECVMBOX_SIZE;
 672:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     break;
 673:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDP */
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 25


 674:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 675:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   case NETCONN_TCP:
 676:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     size = DEFAULT_TCP_RECVMBOX_SIZE;
 677:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     break;
 678:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 679:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   default:
 680:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     LWIP_ASSERT("netconn_alloc: undefined netconn_type", 0);
 681:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     goto free_and_return;
 682:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 683:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 684:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (sys_mbox_new(&conn->recvmbox, size) != ERR_OK) {
 685:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     goto free_and_return;
 686:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 687:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if !LWIP_NETCONN_SEM_PER_THREAD
 688:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (sys_sem_new(&conn->op_completed, 0) != ERR_OK) {
 689:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_free(&conn->recvmbox);
 690:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     goto free_and_return;
 691:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 692:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
 693:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 694:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 695:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   sys_mbox_set_invalid(&conn->acceptmbox);
 696:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
 697:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->state        = NETCONN_NONE;
 698:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SOCKET
 699:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* initialize socket to -1 since 0 is a valid socket */
 700:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->socket       = -1;
 701:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SOCKET */
 702:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->callback     = callback;
 703:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 704:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->current_msg  = NULL;
 705:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->write_offset = 0;
 706:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 707:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_SNDTIMEO
 708:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->send_timeout = 0;
 709:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_SNDTIMEO */
 710:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_RCVTIMEO
 711:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->recv_timeout = 0;
 712:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_RCVTIMEO */
 713:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_RCVBUF
 714:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->recv_bufsize = RECV_BUFSIZE_DEFAULT;
 715:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->recv_avail   = 0;
 716:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_RCVBUF */
 717:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_LINGER
 718:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->linger = -1;
 719:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_LINGER */
 720:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->flags = 0;
 721:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return conn;
 722:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** free_and_return:
 723:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   memp_free(MEMP_NETCONN, conn);
 724:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return NULL;
 725:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 726:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 727:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 728:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Delete a netconn and all its resources.
 729:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * The pcb is NOT freed (since we might not be in the right thread context do this).
 730:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 26


 731:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param conn the netconn to free
 732:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 733:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
 734:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** netconn_free(struct netconn *conn)
 735:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 736:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("PCB must be deallocated outside this function", conn->pcb.tcp == NULL);
 737:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("recvmbox must be deallocated before calling this function",
 738:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     !sys_mbox_valid(&conn->recvmbox));
 739:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 740:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("acceptmbox must be deallocated before calling this function",
 741:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     !sys_mbox_valid(&conn->acceptmbox));
 742:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 743:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 744:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if !LWIP_NETCONN_SEM_PER_THREAD
 745:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   sys_sem_free(&conn->op_completed);
 746:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   sys_sem_set_invalid(&conn->op_completed);
 747:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
 748:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 749:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   memp_free(MEMP_NETCONN, conn);
 750:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 751:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 752:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 753:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Delete rcvmbox and acceptmbox of a netconn and free the left-over data in
 754:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * these mboxes
 755:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 756:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param conn the netconn to free
 757:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @bytes_drained bytes drained from recvmbox
 758:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @accepts_drained pending connections drained from acceptmbox
 759:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 760:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static void
 761:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** netconn_drain(struct netconn *conn)
 762:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 763:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   void *mem;
 764:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 765:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct pbuf *p;
 766:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 767:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 768:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* This runs in tcpip_thread, so we don't need to lock against rx packets */
 769:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 770:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Delete and drain the recvmbox. */
 771:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (sys_mbox_valid(&conn->recvmbox)) {
 772:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     while (sys_mbox_tryfetch(&conn->recvmbox, &mem) != SYS_MBOX_EMPTY) {
 773:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 774:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (NETCONNTYPE_GROUP(conn->type) == NETCONN_TCP) {
 775:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (mem != NULL) {
 776:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           p = (struct pbuf*)mem;
 777:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           /* pcb might be set to NULL already by err_tcp() */
 778:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           if (conn->pcb.tcp != NULL) {
 779:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             tcp_recved(conn->pcb.tcp, p->tot_len);
 780:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           }
 781:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           pbuf_free(p);
 782:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
 783:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else
 784:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 785:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       {
 786:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         netbuf_delete((struct netbuf *)mem);
 787:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 27


 788:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 789:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_free(&conn->recvmbox);
 790:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_set_invalid(&conn->recvmbox);
 791:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 792:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 793:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Delete and drain the acceptmbox. */
 794:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 795:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (sys_mbox_valid(&conn->acceptmbox)) {
 796:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     while (sys_mbox_tryfetch(&conn->acceptmbox, &mem) != SYS_MBOX_EMPTY) {
 797:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (mem != &netconn_aborted) {
 798:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         struct netconn *newconn = (struct netconn *)mem;
 799:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* Only tcp pcbs have an acceptmbox, so no need to check conn->type */
 800:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* pcb might be set to NULL already by err_tcp() */
 801:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* drain recvmbox */
 802:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         netconn_drain(newconn);
 803:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (newconn->pcb.tcp != NULL) {
 804:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           tcp_abort(newconn->pcb.tcp);
 805:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           newconn->pcb.tcp = NULL;
 806:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
 807:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         netconn_free(newconn);
 808:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 809:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 810:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_free(&conn->acceptmbox);
 811:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_set_invalid(&conn->acceptmbox);
 812:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 813:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 814:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 815:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 816:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 817:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 818:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Internal helper function to close a TCP netconn: since this sometimes
 819:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * doesn't work at the first attempt, this function is called from multiple
 820:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * places.
 821:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 822:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param conn the TCP netconn to close
 823:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 824:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static err_t
 825:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_close_internal(struct netconn *conn  WRITE_DELAYED_PARAM)
 826:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 827:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   err_t err;
 828:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   u8_t shut, shut_rx, shut_tx, close;
 829:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   u8_t close_finished = 0;
 830:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct tcp_pcb* tpcb;
 831:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_LINGER
 832:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   u8_t linger_wait_required = 0;
 833:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_LINGER */
 834:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 835:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("invalid conn", (conn != NULL));
 836:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("this is for tcp netconns only", (NETCONNTYPE_GROUP(conn->type) == NETCONN_TCP));
 837:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn must be in state NETCONN_CLOSE", (conn->state == NETCONN_CLOSE));
 838:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("pcb already closed", (conn->pcb.tcp != NULL));
 839:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->current_msg != NULL", conn->current_msg != NULL);
 840:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 841:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   tpcb = conn->pcb.tcp;
 842:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   shut = conn->current_msg->msg.sd.shut;
 843:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   shut_rx = shut & NETCONN_SHUT_RD;
 844:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   shut_tx = shut & NETCONN_SHUT_WR;
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 28


 845:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* shutting down both ends is the same as closing
 846:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****      (also if RD or WR side was shut down before already) */
 847:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (shut == NETCONN_SHUT_RDWR) {
 848:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     close = 1;
 849:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else if (shut_rx &&
 850:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****              ((tpcb->state == FIN_WAIT_1) ||
 851:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               (tpcb->state == FIN_WAIT_2) ||
 852:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               (tpcb->state == CLOSING))) {
 853:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     close = 1;
 854:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else if (shut_tx && ((tpcb->flags & TF_RXCLOSED) != 0)) {
 855:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     close = 1;
 856:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 857:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     close = 0;
 858:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 859:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 860:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Set back some callback pointers */
 861:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (close) {
 862:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_arg(tpcb, NULL);
 863:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 864:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (tpcb->state == LISTEN) {
 865:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_accept(tpcb, NULL);
 866:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 867:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* some callbacks have to be reset if tcp_close is not successful */
 868:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (shut_rx) {
 869:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_recv(tpcb, NULL);
 870:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_accept(tpcb, NULL);
 871:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 872:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (shut_tx) {
 873:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_sent(tpcb, NULL);
 874:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 875:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (close) {
 876:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_poll(tpcb, NULL, 0);
 877:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_err(tpcb, NULL);
 878:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 879:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 880:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Try to close the connection */
 881:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (close) {
 882:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_LINGER
 883:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* check linger possibilites before calling tcp_close */
 884:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     err = ERR_OK;
 885:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* linger enabled/required at all? (i.e. is there untransmitted data left?) */
 886:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if ((conn->linger >= 0) && (conn->pcb.tcp->unsent || conn->pcb.tcp->unacked)) {
 887:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if ((conn->linger == 0)) {
 888:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* data left but linger prevents waiting */
 889:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         tcp_abort(tpcb);
 890:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         tpcb = NULL;
 891:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else if (conn->linger > 0) {
 892:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* data left and linger says we should wait */
 893:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (netconn_is_nonblocking(conn)) {
 894:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           /* data left on a nonblocking netconn -> cannot linger */
 895:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           err = ERR_WOULDBLOCK;
 896:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         } else if ((s32_t)(sys_now() - conn->current_msg->msg.sd.time_started) >=
 897:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           (conn->linger * 1000)) {
 898:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           /* data left but linger timeout has expired (this happens on further
 899:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****              calls to this function through poll_tcp */
 900:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           tcp_abort(tpcb);
 901:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           tpcb = NULL;
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 29


 902:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         } else {
 903:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           /* data left -> need to wait for ACK after successful close */
 904:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           linger_wait_required = 1;
 905:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
 906:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 907:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 908:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if ((err == ERR_OK) && (tpcb != NULL))
 909:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_LINGER */
 910:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     {
 911:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       err = tcp_close(tpcb);
 912:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 913:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 914:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     err = tcp_shutdown(tpcb, shut_rx, shut_tx);
 915:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 916:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (err == ERR_OK) {
 917:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     close_finished = 1;
 918:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_LINGER
 919:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (linger_wait_required) {
 920:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* wait for ACK of all unsent/unacked data by just getting called again */
 921:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       close_finished = 0;
 922:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       err = ERR_INPROGRESS;
 923:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 924:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_LINGER */
 925:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 926:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (err == ERR_MEM) {
 927:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* Closing failed because of memory shortage, try again later. Even for
 928:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****          nonblocking netconns, we have to wait since no standard socket application
 929:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****          is prepared for close failing because of resource shortage.
 930:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****          Check the timeout: this is kind of an lwip addition to the standard sockets:
 931:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****          we wait for some time when failing to allocate a segment for the FIN */
 932:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_SNDTIMEO || LWIP_SO_LINGER
 933:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       s32_t close_timeout = LWIP_TCP_CLOSE_TIMEOUT_MS_DEFAULT;
 934:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_SNDTIMEO
 935:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (conn->send_timeout > 0) {
 936:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         close_timeout = conn->send_timeout;
 937:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 938:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_SNDTIMEO */
 939:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_LINGER
 940:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (conn->linger >= 0) {
 941:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* use linger timeout (seconds) */
 942:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         close_timeout = conn->linger * 1000U;
 943:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 944:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
 945:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if ((s32_t)(sys_now() - conn->current_msg->msg.sd.time_started) >= close_timeout) {
 946:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else /* LWIP_SO_SNDTIMEO || LWIP_SO_LINGER */
 947:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (conn->current_msg->msg.sd.polls_left == 0) {
 948:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_SNDTIMEO || LWIP_SO_LINGER */
 949:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         close_finished = 1;
 950:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (close) {
 951:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           /* in this case, we want to RST the connection */
 952:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           tcp_abort(tpcb);
 953:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           err = ERR_OK;
 954:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
 955:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 956:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else {
 957:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* Closing failed for a non-memory error: give up */
 958:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       close_finished = 1;
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 30


 959:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 960:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 961:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (close_finished) {
 962:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* Closing done (succeeded, non-memory error, nonblocking error or timeout) */
 963:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_sem_t* op_completed_sem = LWIP_API_MSG_SEM(conn->current_msg);
 964:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->current_msg->err = err;
 965:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->current_msg = NULL;
 966:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->state = NETCONN_NONE;
 967:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (err == ERR_OK) {
 968:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (close) {
 969:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* Set back some callback pointers as conn is going away */
 970:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         conn->pcb.tcp = NULL;
 971:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* Trigger select() in socket layer. Make sure everybody notices activity
 972:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****          on the connection, error first! */
 973:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         API_EVENT(conn, NETCONN_EVT_ERROR, 0);
 974:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 975:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (shut_rx) {
 976:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         API_EVENT(conn, NETCONN_EVT_RCVPLUS, 0);
 977:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 978:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (shut_tx) {
 979:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         API_EVENT(conn, NETCONN_EVT_SENDPLUS, 0);
 980:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 981:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 982:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     NETCONN_SET_SAFE_ERR(conn, err);
 983:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
 984:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (delayed)
 985:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
 986:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     {
 987:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* wake up the application task */
 988:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       sys_sem_signal(op_completed_sem);
 989:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 990:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_OK;
 991:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 992:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (!close_finished) {
 993:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* Closing failed and we want to wait: restore some of the callbacks */
 994:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* Closing of listen pcb will never fail! */
 995:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     LWIP_ASSERT("Closing a listen pcb may not fail!", (tpcb->state != LISTEN));
 996:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (shut_tx) {
 997:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_sent(tpcb, sent_tcp);
 998:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 999:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* when waiting for close, set up poll interval to 500ms */
1000:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_poll(tpcb, poll_tcp, 1);
1001:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_err(tpcb, err_tcp);
1002:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_arg(tpcb, conn);
1003:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* don't restore recv callback: we don't want to receive any more data */
1004:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1005:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* If closing didn't succeed, we get called again either
1006:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****      from poll_tcp or from sent_tcp */
1007:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("err != ERR_OK", err != ERR_OK);
1008:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return err;
1009:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1010:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
1011:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1012:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1013:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Delete the pcb inside a netconn.
1014:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_delete.
1015:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 31


1016:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg pointing to the connection
1017:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1018:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
1019:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_delconn(void *m)
1020:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
1021:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
1022:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1023:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   enum netconn_state state = msg->conn->state;
1024:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("netconn state error", /* this only happens for TCP netconns */
1025:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     (state == NETCONN_NONE) || (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_TCP));
1026:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_NETCONN_FULLDUPLEX
1027:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* In full duplex mode, blocking write/connect is aborted with ERR_CLSD */
1028:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (state != NETCONN_NONE) {
1029:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if ((state == NETCONN_WRITE) ||
1030:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         ((state == NETCONN_CONNECT) && !IN_NONBLOCKING_CONNECT(msg->conn))) {
1031:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* close requested, abort running write/connect */
1032:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       sys_sem_t* op_completed_sem;
1033:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       LWIP_ASSERT("msg->conn->current_msg != NULL", msg->conn->current_msg != NULL);
1034:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       op_completed_sem = LWIP_API_MSG_SEM(msg->conn->current_msg);
1035:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->conn->current_msg->err = ERR_CLSD;
1036:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->conn->current_msg = NULL;
1037:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->conn->write_offset = 0;
1038:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->conn->state = NETCONN_NONE;
1039:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       NETCONN_SET_SAFE_ERR(msg->conn, ERR_CLSD);
1040:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       sys_sem_signal(op_completed_sem);
1041:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1042:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1043:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else /* LWIP_NETCONN_FULLDUPLEX */
1044:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (((state != NETCONN_NONE) &&
1045:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        (state != NETCONN_LISTEN) &&
1046:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        (state != NETCONN_CONNECT)) ||
1047:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       ((state == NETCONN_CONNECT) && !IN_NONBLOCKING_CONNECT(msg->conn))) {
1048:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* This means either a blocking write or blocking connect is running
1049:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        (nonblocking write returns and sets state to NONE) */
1050:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_INPROGRESS;
1051:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else
1052:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_NETCONN_FULLDUPLEX */
1053:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   {
1054:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     LWIP_ASSERT("blocking connect in progress",
1055:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (state != NETCONN_CONNECT) || IN_NONBLOCKING_CONNECT(msg->conn));
1056:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_OK;
1057:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* Drain and delete mboxes */
1058:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     netconn_drain(msg->conn);
1059:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1060:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->conn->pcb.tcp != NULL) {
1061:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1062:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       switch (NETCONNTYPE_GROUP(msg->conn->type)) {
1063:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
1064:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       case NETCONN_RAW:
1065:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         raw_remove(msg->conn->pcb.raw);
1066:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
1067:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_RAW */
1068:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_UDP
1069:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       case NETCONN_UDP:
1070:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->pcb.udp->recv_arg = NULL;
1071:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         udp_remove(msg->conn->pcb.udp);
1072:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 32


1073:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDP */
1074:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
1075:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       case NETCONN_TCP:
1076:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         LWIP_ASSERT("already writing or closing", msg->conn->current_msg == NULL &&
1077:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->conn->write_offset == 0);
1078:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->state = NETCONN_CLOSE;
1079:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->msg.sd.shut = NETCONN_SHUT_RDWR;
1080:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->current_msg = msg;
1081:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
1082:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (lwip_netconn_do_close_internal(msg->conn, 0) != ERR_OK) {
1083:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LWIP_ASSERT("state!", msg->conn->state == NETCONN_CLOSE);
1084:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           UNLOCK_TCPIP_CORE();
1085:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           sys_arch_sem_wait(LWIP_API_MSG_SEM(msg), 0);
1086:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LOCK_TCPIP_CORE();
1087:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LWIP_ASSERT("state!", msg->conn->state == NETCONN_NONE);
1088:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
1089:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else /* LWIP_TCPIP_CORE_LOCKING */
1090:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         lwip_netconn_do_close_internal(msg->conn);
1091:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCPIP_CORE_LOCKING */
1092:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* API_EVENT is called inside lwip_netconn_do_close_internal, before releasing
1093:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****            the application thread, so we can return at this point! */
1094:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         return;
1095:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
1096:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       default:
1097:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
1098:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1099:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->conn->pcb.tcp = NULL;
1100:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1101:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* tcp netconns don't come here! */
1102:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1103:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* @todo: this lets select make the socket readable and writable,
1104:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        which is wrong! errfd instead? */
1105:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     API_EVENT(msg->conn, NETCONN_EVT_RCVPLUS, 0);
1106:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     API_EVENT(msg->conn, NETCONN_EVT_SENDPLUS, 0);
1107:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1108:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (sys_sem_valid(LWIP_API_MSG_SEM(msg))) {
1109:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     TCPIP_APIMSG_ACK(msg);
1110:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1111:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1112:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1113:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1114:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Bind a pcb contained in a netconn
1115:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_bind.
1116:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1117:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg pointing to the connection and containing
1118:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *          the IP address and port to bind to
1119:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1120:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
1121:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_bind(void *m)
1122:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
1123:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
1124:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1125:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (ERR_IS_FATAL(msg->conn->last_err)) {
1126:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = msg->conn->last_err;
1127:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
1128:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_VAL;
1129:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->conn->pcb.tcp != NULL) {
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 33


1130:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       switch (NETCONNTYPE_GROUP(msg->conn->type)) {
1131:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
1132:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       case NETCONN_RAW:
1133:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = raw_bind(msg->conn->pcb.raw, API_EXPR_REF(msg->msg.bc.ipaddr));
1134:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
1135:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_RAW */
1136:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_UDP
1137:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       case NETCONN_UDP:
1138:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = udp_bind(msg->conn->pcb.udp, API_EXPR_REF(msg->msg.bc.ipaddr), msg->msg.bc.port)
1139:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
1140:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDP */
1141:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
1142:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       case NETCONN_TCP:
1143:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = tcp_bind(msg->conn->pcb.tcp, API_EXPR_REF(msg->msg.bc.ipaddr), msg->msg.bc.port)
1144:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
1145:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
1146:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       default:
1147:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
1148:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1149:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1150:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1151:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   TCPIP_APIMSG_ACK(msg);
1152:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1153:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1154:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
1155:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1156:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * TCP callback function if a connection (opened by tcp_connect/lwip_netconn_do_connect) has
1157:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * been established (or reset by the remote host).
1158:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1159:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @see tcp.h (struct tcp_pcb.connected) for parameters and return values
1160:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1161:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static err_t
1162:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_connected(void *arg, struct tcp_pcb *pcb, err_t err)
1163:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 643              		.loc 1 1163 0
 644              		.cfi_startproc
 645              		@ args = 0, pretend = 0, frame = 0
 646              		@ frame_needed = 0, uses_anonymous_args = 0
 647              	.LVL81:
1164:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn;
1165:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   int was_blocking;
1166:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   sys_sem_t* op_completed_sem = NULL;
1167:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1168:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_UNUSED_ARG(pcb);
1169:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1170:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn = (struct netconn *)arg;
1171:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1172:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (conn == NULL) {
 648              		.loc 1 1172 0
 649 0000 0028     		cmp	r0, #0
 650 0002 69D0     		beq	.L74
1163:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn;
 651              		.loc 1 1163 0
 652 0004 70B5     		push	{r4, r5, r6, lr}
 653              	.LCFI4:
 654              		.cfi_def_cfa_offset 16
 655              		.cfi_offset 4, -16
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 34


 656              		.cfi_offset 5, -12
 657              		.cfi_offset 6, -8
 658              		.cfi_offset 14, -4
 659 0006 0446     		mov	r4, r0
 660 0008 1646     		mov	r6, r2
1173:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_VAL;
1174:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1175:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1176:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->state == NETCONN_CONNECT", conn->state == NETCONN_CONNECT);
 661              		.loc 1 1176 0
 662 000a 4378     		ldrb	r3, [r0, #1]	@ zero_extendqisi2
 663 000c 032B     		cmp	r3, #3
 664 000e 3AD1     		bne	.L81
 665              	.LVL82:
 666              	.L67:
1177:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("(conn->current_msg != NULL) || conn->in_non_blocking_connect",
 667              		.loc 1 1177 0
 668 0010 636A     		ldr	r3, [r4, #36]
 669 0012 002B     		cmp	r3, #0
 670 0014 3FD0     		beq	.L82
 671              	.L68:
1178:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     (conn->current_msg != NULL) || IN_NONBLOCKING_CONNECT(conn));
1179:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1180:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (conn->current_msg != NULL) {
 672              		.loc 1 1180 0
 673 0016 636A     		ldr	r3, [r4, #36]
 674 0018 002B     		cmp	r3, #0
 675 001a 48D0     		beq	.L75
1181:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->current_msg->err = err;
 676              		.loc 1 1181 0
 677 001c 1E71     		strb	r6, [r3, #4]
1182:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     op_completed_sem = LWIP_API_MSG_SEM(conn->current_msg);
 678              		.loc 1 1182 0
 679 001e 636A     		ldr	r3, [r4, #36]
 680 0020 1D68     		ldr	r5, [r3]
 681 0022 0C35     		adds	r5, r5, #12
 682              	.LVL83:
 683              	.L69:
1183:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1184:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if ((NETCONNTYPE_GROUP(conn->type) == NETCONN_TCP) && (err == ERR_OK)) {
 684              		.loc 1 1184 0
 685 0024 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 686 0026 03F0F003 		and	r3, r3, #240
 687 002a 102B     		cmp	r3, #16
 688 002c 41D0     		beq	.L83
 689              	.L70:
1185:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     setup_tcp(conn);
1186:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1187:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   was_blocking = !IN_NONBLOCKING_CONNECT(conn);
 690              		.loc 1 1187 0
 691 002e 237F     		ldrb	r3, [r4, #28]	@ zero_extendqisi2
 692 0030 03F00406 		and	r6, r3, #4
 693 0034 002E     		cmp	r6, #0
 694 0036 0CBF     		ite	eq
 695 0038 0122     		moveq	r2, #1
 696 003a 0022     		movne	r2, #0
 697              	.LVL84:
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 35


1188:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   SET_NONBLOCKING_CONNECT(conn, 0);
 698              		.loc 1 1188 0
 699 003c 23F00403 		bic	r3, r3, #4
 700 0040 2377     		strb	r3, [r4, #28]
1189:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("blocking connect state error",
 701              		.loc 1 1189 0
 702 0042 14BF     		ite	ne
 703 0044 0123     		movne	r3, #1
 704 0046 0023     		moveq	r3, #0
 705 0048 002D     		cmp	r5, #0
 706 004a 08BF     		it	eq
 707 004c 0123     		moveq	r3, #1
 708 004e 1BB1     		cbz	r3, .L71
 709              		.loc 1 1189 0 is_stmt 0 discriminator 1
 710 0050 002D     		cmp	r5, #0
 711 0052 18BF     		it	ne
 712 0054 0122     		movne	r2, #1
 713              	.LVL85:
 714 0056 92BB     		cbnz	r2, .L84
 715              	.L71:
1190:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     (was_blocking && op_completed_sem != NULL) ||
1191:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     (!was_blocking && op_completed_sem == NULL));
1192:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->current_msg = NULL;
 716              		.loc 1 1192 0 is_stmt 1
 717 0058 0023     		movs	r3, #0
 718 005a 6362     		str	r3, [r4, #36]
1193:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->state = NETCONN_NONE;
 719              		.loc 1 1193 0
 720 005c 6370     		strb	r3, [r4, #1]
 721              	.LBB9:
1194:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   NETCONN_SET_SAFE_ERR(conn, ERR_OK);
 722              		.loc 1 1194 0
 723 005e FFF7FEFF 		bl	sys_arch_protect
 724              	.LVL86:
 725 0062 94F90830 		ldrsb	r3, [r4, #8]
 726 0066 13F10C0F 		cmn	r3, #12
 727 006a 01DB     		blt	.L72
 728              		.loc 1 1194 0 is_stmt 0 discriminator 2
 729 006c 0023     		movs	r3, #0
 730 006e 2372     		strb	r3, [r4, #8]
 731              	.L72:
 732              		.loc 1 1194 0 discriminator 4
 733 0070 FFF7FEFF 		bl	sys_arch_unprotect
 734              	.LVL87:
 735              	.LBE9:
1195:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   API_EVENT(conn, NETCONN_EVT_SENDPLUS, 0);
 736              		.loc 1 1195 0 is_stmt 1 discriminator 4
 737 0074 A36A     		ldr	r3, [r4, #40]
 738 0076 1BB1     		cbz	r3, .L73
 739              		.loc 1 1195 0 is_stmt 0 discriminator 1
 740 0078 0022     		movs	r2, #0
 741 007a 0221     		movs	r1, #2
 742 007c 2046     		mov	r0, r4
 743 007e 9847     		blx	r3
 744              	.LVL88:
 745              	.L73:
1196:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 36


1197:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (was_blocking) {
 746              		.loc 1 1197 0 is_stmt 1
 747 0080 2EB3     		cbz	r6, .L85
1198:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_sem_signal(op_completed_sem);
1199:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1200:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return ERR_OK;
 748              		.loc 1 1200 0
 749 0082 0020     		movs	r0, #0
 750              	.L66:
1201:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 751              		.loc 1 1201 0
 752 0084 70BD     		pop	{r4, r5, r6, pc}
 753              	.LVL89:
 754              	.L81:
1176:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("(conn->current_msg != NULL) || conn->in_non_blocking_connect",
 755              		.loc 1 1176 0 discriminator 1
 756 0086 164B     		ldr	r3, .L86
 757 0088 4FF49362 		mov	r2, #1176
 758              	.LVL90:
 759 008c 1549     		ldr	r1, .L86+4
 760              	.LVL91:
 761 008e 1648     		ldr	r0, .L86+8
 762              	.LVL92:
 763 0090 FFF7FEFF 		bl	printf
 764              	.LVL93:
 765 0094 BCE7     		b	.L67
 766              	.L82:
1177:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     (conn->current_msg != NULL) || IN_NONBLOCKING_CONNECT(conn));
 767              		.loc 1 1177 0 discriminator 1
 768 0096 237F     		ldrb	r3, [r4, #28]	@ zero_extendqisi2
 769 0098 13F0040F 		tst	r3, #4
 770 009c BBD1     		bne	.L68
1177:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     (conn->current_msg != NULL) || IN_NONBLOCKING_CONNECT(conn));
 771              		.loc 1 1177 0 is_stmt 0 discriminator 2
 772 009e 104B     		ldr	r3, .L86
 773 00a0 40F29A42 		movw	r2, #1178
 774 00a4 1149     		ldr	r1, .L86+12
 775 00a6 1048     		ldr	r0, .L86+8
 776 00a8 FFF7FEFF 		bl	printf
 777              	.LVL94:
 778 00ac B3E7     		b	.L68
 779              	.L75:
1166:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 780              		.loc 1 1166 0 is_stmt 1
 781 00ae 0025     		movs	r5, #0
 782 00b0 B8E7     		b	.L69
 783              	.LVL95:
 784              	.L83:
1184:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     setup_tcp(conn);
 785              		.loc 1 1184 0 discriminator 1
 786 00b2 002E     		cmp	r6, #0
 787 00b4 BBD1     		bne	.L70
1185:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 788              		.loc 1 1185 0
 789 00b6 2046     		mov	r0, r4
 790 00b8 FFF7FEFF 		bl	setup_tcp
 791              	.LVL96:
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 37


 792 00bc B7E7     		b	.L70
 793              	.L84:
1189:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     (was_blocking && op_completed_sem != NULL) ||
 794              		.loc 1 1189 0 discriminator 2
 795 00be 084B     		ldr	r3, .L86
 796 00c0 40F2A742 		movw	r2, #1191
 797 00c4 0A49     		ldr	r1, .L86+16
 798 00c6 0848     		ldr	r0, .L86+8
 799 00c8 FFF7FEFF 		bl	printf
 800              	.LVL97:
 801 00cc C4E7     		b	.L71
 802              	.L85:
1198:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 803              		.loc 1 1198 0
 804 00ce 2846     		mov	r0, r5
 805 00d0 FFF7FEFF 		bl	sys_sem_signal
 806              	.LVL98:
1200:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 807              		.loc 1 1200 0
 808 00d4 0020     		movs	r0, #0
 809 00d6 D5E7     		b	.L66
 810              	.LVL99:
 811              	.L74:
 812              	.LCFI5:
 813              		.cfi_def_cfa_offset 0
 814              		.cfi_restore 4
 815              		.cfi_restore 5
 816              		.cfi_restore 6
 817              		.cfi_restore 14
1173:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 818              		.loc 1 1173 0
 819 00d8 6FF00500 		mvn	r0, #5
 820              	.LVL100:
 821              		.loc 1 1201 0
 822 00dc 7047     		bx	lr
 823              	.L87:
 824 00de 00BF     		.align	2
 825              	.L86:
 826 00e0 00000000 		.word	.LC0
 827 00e4 00000000 		.word	.LC10
 828 00e8 54000000 		.word	.LC2
 829 00ec 20000000 		.word	.LC11
 830 00f0 60000000 		.word	.LC12
 831              		.cfi_endproc
 832              	.LFE174:
 834              		.section	.text.lwip_netconn_do_dns_found,"ax",%progbits
 835              		.align	1
 836              		.syntax unified
 837              		.thumb
 838              		.thumb_func
 839              		.fpu fpv5-sp-d16
 841              	lwip_netconn_do_dns_found:
 842              	.LFB184:
1202:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
1203:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1204:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1205:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Connect a pcb contained inside a netconn
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 38


1206:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_connect.
1207:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1208:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg pointing to the connection and containing
1209:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *          the IP address and port to connect to
1210:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1211:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
1212:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_connect(void *m)
1213:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
1214:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
1215:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1216:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (msg->conn->pcb.tcp == NULL) {
1217:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* This may happen when calling netconn_connect() a second time */
1218:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_CLSD;
1219:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
1220:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     switch (NETCONNTYPE_GROUP(msg->conn->type)) {
1221:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
1222:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     case NETCONN_RAW:
1223:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->err = raw_connect(msg->conn->pcb.raw, API_EXPR_REF(msg->msg.bc.ipaddr));
1224:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       break;
1225:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_RAW */
1226:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_UDP
1227:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     case NETCONN_UDP:
1228:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->err = udp_connect(msg->conn->pcb.udp, API_EXPR_REF(msg->msg.bc.ipaddr), msg->msg.bc.port
1229:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       break;
1230:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDP */
1231:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
1232:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     case NETCONN_TCP:
1233:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* Prevent connect while doing any other action. */
1234:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (msg->conn->state == NETCONN_CONNECT) {
1235:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = ERR_ALREADY;
1236:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else if (msg->conn->state != NETCONN_NONE) {
1237:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = ERR_ISCONN;
1238:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
1239:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         setup_tcp(msg->conn);
1240:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = tcp_connect(msg->conn->pcb.tcp, API_EXPR_REF(msg->msg.bc.ipaddr),
1241:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->msg.bc.port, lwip_netconn_do_connected);
1242:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (msg->err == ERR_OK) {
1243:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           u8_t non_blocking = netconn_is_nonblocking(msg->conn);
1244:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->conn->state = NETCONN_CONNECT;
1245:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           SET_NONBLOCKING_CONNECT(msg->conn, non_blocking);
1246:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           if (non_blocking) {
1247:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             msg->err = ERR_INPROGRESS;
1248:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           } else {
1249:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             msg->conn->current_msg = msg;
1250:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             /* sys_sem_signal() is called from lwip_netconn_do_connected (or err_tcp()),
1251:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                when the connection is established! */
1252:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
1253:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             LWIP_ASSERT("state!", msg->conn->state == NETCONN_CONNECT);
1254:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             UNLOCK_TCPIP_CORE();
1255:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             sys_arch_sem_wait(LWIP_API_MSG_SEM(msg), 0);
1256:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             LOCK_TCPIP_CORE();
1257:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             LWIP_ASSERT("state!", msg->conn->state != NETCONN_CONNECT);
1258:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCPIP_CORE_LOCKING */
1259:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             return;
1260:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           }
1261:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
1262:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 39


1263:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       break;
1264:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
1265:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     default:
1266:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       LWIP_ERROR("Invalid netconn type", 0, do{ msg->err = ERR_VAL; }while(0));
1267:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       break;
1268:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1269:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1270:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* For all other protocols, netconn_connect() calls TCPIP_APIMSG(),
1271:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****      so use TCPIP_APIMSG_ACK() here. */
1272:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   TCPIP_APIMSG_ACK(msg);
1273:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1274:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1275:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1276:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Disconnect a pcb contained inside a netconn
1277:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Only used for UDP netconns.
1278:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_disconnect.
1279:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1280:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg pointing to the connection to disconnect
1281:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1282:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
1283:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_disconnect(void *m)
1284:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
1285:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
1286:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1287:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_UDP
1288:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_UDP) {
1289:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     udp_disconnect(msg->conn->pcb.udp);
1290:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_OK;
1291:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else
1292:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDP */
1293:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   {
1294:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_VAL;
1295:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1296:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   TCPIP_APIMSG_ACK(msg);
1297:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1298:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1299:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
1300:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1301:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Set a TCP pcb contained in a netconn into listen mode
1302:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_listen.
1303:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1304:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg pointing to the connection
1305:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1306:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
1307:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_listen(void *m)
1308:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
1309:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
1310:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1311:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (ERR_IS_FATAL(msg->conn->last_err)) {
1312:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = msg->conn->last_err;
1313:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
1314:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_CONN;
1315:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->conn->pcb.tcp != NULL) {
1316:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_TCP) {
1317:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (msg->conn->state == NETCONN_NONE) {
1318:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           struct tcp_pcb* lpcb;
1319:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           if (msg->conn->pcb.tcp->state != CLOSED) {
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 40


1320:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             /* connection is not closed, cannot listen */
1321:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             msg->err = ERR_VAL;
1322:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           } else {
1323:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             err_t err;
1324:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             u8_t backlog;
1325:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if TCP_LISTEN_BACKLOG
1326:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             backlog = msg->msg.lb.backlog;
1327:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else  /* TCP_LISTEN_BACKLOG */
1328:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             backlog = TCP_DEFAULT_LISTEN_BACKLOG;
1329:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* TCP_LISTEN_BACKLOG */
1330:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_IPV4 && LWIP_IPV6
1331:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             /* "Socket API like" dual-stack support: If IP to listen to is IP6_ADDR_ANY,
1332:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****              * and NETCONN_FLAG_IPV6_V6ONLY is NOT set, use IP_ANY_TYPE to listen
1333:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****              */
1334:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             if (ip_addr_cmp(&msg->conn->pcb.ip->local_ip, IP6_ADDR_ANY) &&
1335:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 (netconn_get_ipv6only(msg->conn) == 0)) {
1336:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               /* change PCB type to IPADDR_TYPE_ANY */
1337:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               IP_SET_TYPE_VAL(msg->conn->pcb.tcp->local_ip,  IPADDR_TYPE_ANY);
1338:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               IP_SET_TYPE_VAL(msg->conn->pcb.tcp->remote_ip, IPADDR_TYPE_ANY);
1339:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             }
1340:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_IPV4 && LWIP_IPV6 */
1341:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1342:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             lpcb = tcp_listen_with_backlog_and_err(msg->conn->pcb.tcp, backlog, &err);
1343:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1344:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             if (lpcb == NULL) {
1345:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               /* in this case, the old pcb is still allocated */
1346:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               msg->err = err;
1347:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             } else {
1348:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               /* delete the recvmbox and allocate the acceptmbox */
1349:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               if (sys_mbox_valid(&msg->conn->recvmbox)) {
1350:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 /** @todo: should we drain the recvmbox here? */
1351:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 sys_mbox_free(&msg->conn->recvmbox);
1352:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 sys_mbox_set_invalid(&msg->conn->recvmbox);
1353:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               }
1354:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               msg->err = ERR_OK;
1355:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               if (!sys_mbox_valid(&msg->conn->acceptmbox)) {
1356:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 msg->err = sys_mbox_new(&msg->conn->acceptmbox, DEFAULT_ACCEPTMBOX_SIZE);
1357:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               }
1358:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               if (msg->err == ERR_OK) {
1359:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 msg->conn->state = NETCONN_LISTEN;
1360:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 msg->conn->pcb.tcp = lpcb;
1361:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 tcp_arg(msg->conn->pcb.tcp, msg->conn);
1362:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 tcp_accept(msg->conn->pcb.tcp, accept_function);
1363:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               } else {
1364:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 /* since the old pcb is already deallocated, free lpcb now */
1365:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 tcp_close(lpcb);
1366:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 msg->conn->pcb.tcp = NULL;
1367:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               }
1368:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             }
1369:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           }
1370:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         } else if (msg->conn->state == NETCONN_LISTEN) {
1371:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           /* already listening, allow updating of the backlog */
1372:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->err = ERR_OK;
1373:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           tcp_backlog_set(msg->conn->pcb.tcp, msg->msg.lb.backlog);
1374:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
1375:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
1376:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = ERR_ARG;
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 41


1377:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1378:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1379:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1380:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   TCPIP_APIMSG_ACK(msg);
1381:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1382:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
1383:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1384:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1385:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Send some data on a RAW or UDP pcb contained in a netconn
1386:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_send
1387:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1388:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg pointing to the connection
1389:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1390:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
1391:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_send(void *m)
1392:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
1393:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
1394:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1395:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (ERR_IS_FATAL(msg->conn->last_err)) {
1396:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = msg->conn->last_err;
1397:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
1398:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_CONN;
1399:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->conn->pcb.tcp != NULL) {
1400:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       switch (NETCONNTYPE_GROUP(msg->conn->type)) {
1401:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
1402:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       case NETCONN_RAW:
1403:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (ip_addr_isany(&msg->msg.b->addr) || IP_IS_ANY_TYPE_VAL(msg->msg.b->addr)) {
1404:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->err = raw_send(msg->conn->pcb.raw, msg->msg.b->p);
1405:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         } else {
1406:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->err = raw_sendto(msg->conn->pcb.raw, msg->msg.b->p, &msg->msg.b->addr);
1407:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
1408:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
1409:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
1410:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_UDP
1411:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       case NETCONN_UDP:
1412:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_CHECKSUM_ON_COPY
1413:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (ip_addr_isany(&msg->msg.b->addr) || IP_IS_ANY_TYPE_VAL(msg->msg.b->addr)) {
1414:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->err = udp_send_chksum(msg->conn->pcb.udp, msg->msg.b->p,
1415:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             msg->msg.b->flags & NETBUF_FLAG_CHKSUM, msg->msg.b->toport_chksum);
1416:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         } else {
1417:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->err = udp_sendto_chksum(msg->conn->pcb.udp, msg->msg.b->p,
1418:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             &msg->msg.b->addr, msg->msg.b->port,
1419:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             msg->msg.b->flags & NETBUF_FLAG_CHKSUM, msg->msg.b->toport_chksum);
1420:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
1421:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else /* LWIP_CHECKSUM_ON_COPY */
1422:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (ip_addr_isany_val(msg->msg.b->addr) || IP_IS_ANY_TYPE_VAL(msg->msg.b->addr)) {
1423:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->err = udp_send(msg->conn->pcb.udp, msg->msg.b->p);
1424:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         } else {
1425:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->err = udp_sendto(msg->conn->pcb.udp, msg->msg.b->p, &msg->msg.b->addr, msg->msg.b->p
1426:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
1427:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_CHECKSUM_ON_COPY */
1428:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
1429:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDP */
1430:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       default:
1431:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
1432:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1433:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 42


1434:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1435:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   TCPIP_APIMSG_ACK(msg);
1436:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1437:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1438:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
1439:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1440:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Indicate data has been received from a TCP pcb contained in a netconn
1441:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_recv
1442:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1443:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg pointing to the connection
1444:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1445:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
1446:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_recv(void *m)
1447:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
1448:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
1449:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1450:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   msg->err = ERR_OK;
1451:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (msg->conn->pcb.tcp != NULL) {
1452:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_TCP) {
1453:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       u32_t remaining = msg->msg.r.len;
1454:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       do {
1455:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         u16_t recved = (remaining > 0xffff) ? 0xffff : (u16_t)remaining;
1456:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         tcp_recved(msg->conn->pcb.tcp, recved);
1457:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         remaining -= recved;
1458:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } while (remaining != 0);
1459:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1460:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1461:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   TCPIP_APIMSG_ACK(msg);
1462:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1463:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1464:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if TCP_LISTEN_BACKLOG
1465:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /** Indicate that a TCP pcb has been accepted
1466:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_accept
1467:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1468:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg pointing to the connection
1469:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1470:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
1471:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_accepted(void *m)
1472:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
1473:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
1474:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1475:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   msg->err = ERR_OK;
1476:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (msg->conn->pcb.tcp != NULL) {
1477:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_TCP) {
1478:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_backlog_accepted(msg->conn->pcb.tcp);
1479:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1480:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1481:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   TCPIP_APIMSG_ACK(msg);
1482:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1483:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* TCP_LISTEN_BACKLOG */
1484:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1485:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1486:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * See if more data needs to be written from a previous call to netconn_write.
1487:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called initially from lwip_netconn_do_write. If the first call can't send all data
1488:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * (because of low memory or empty send-buffer), this function is called again
1489:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * from sent_tcp() or poll_tcp() to send more data. If all data is sent, the
1490:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * blocking application thread (waiting in netconn_write) is released.
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 43


1491:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1492:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param conn netconn (that is currently in state NETCONN_WRITE) to process
1493:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @return ERR_OK
1494:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *         ERR_MEM if LWIP_TCPIP_CORE_LOCKING=1 and sending hasn't yet finished
1495:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1496:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static err_t
1497:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_writemore(struct netconn *conn  WRITE_DELAYED_PARAM)
1498:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
1499:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   err_t err;
1500:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   const void *dataptr;
1501:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   u16_t len, available;
1502:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   u8_t write_finished = 0;
1503:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   size_t diff;
1504:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   u8_t dontblock;
1505:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   u8_t apiflags;
1506:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1507:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn != NULL", conn != NULL);
1508:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->state == NETCONN_WRITE", (conn->state == NETCONN_WRITE));
1509:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->current_msg != NULL", conn->current_msg != NULL);
1510:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->pcb.tcp != NULL", conn->pcb.tcp != NULL);
1511:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->write_offset < conn->current_msg->msg.w.len",
1512:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->write_offset < conn->current_msg->msg.w.len);
1513:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1514:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   apiflags = conn->current_msg->msg.w.apiflags;
1515:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   dontblock = netconn_is_nonblocking(conn) || (apiflags & NETCONN_DONTBLOCK);
1516:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1517:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_SNDTIMEO
1518:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if ((conn->send_timeout != 0) &&
1519:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       ((s32_t)(sys_now() - conn->current_msg->msg.w.time_started) >= conn->send_timeout)) {
1520:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     write_finished = 1;
1521:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (conn->write_offset == 0) {
1522:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* nothing has been written */
1523:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       err = ERR_WOULDBLOCK;
1524:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg->msg.w.len = 0;
1525:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else {
1526:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* partial write */
1527:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       err = ERR_OK;
1528:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg->msg.w.len = conn->write_offset;
1529:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->write_offset = 0;
1530:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1531:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else
1532:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_SNDTIMEO */
1533:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   {
1534:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     dataptr = (const u8_t*)conn->current_msg->msg.w.dataptr + conn->write_offset;
1535:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     diff = conn->current_msg->msg.w.len - conn->write_offset;
1536:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (diff > 0xffffUL) { /* max_u16_t */
1537:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       len = 0xffff;
1538:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       apiflags |= TCP_WRITE_FLAG_MORE;
1539:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else {
1540:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       len = (u16_t)diff;
1541:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1542:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     available = tcp_sndbuf(conn->pcb.tcp);
1543:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (available < len) {
1544:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* don't try to write more than sendbuf */
1545:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       len = available;
1546:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (dontblock) {
1547:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (!len) {
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 44


1548:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           err = ERR_WOULDBLOCK;
1549:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           goto err_mem;
1550:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
1551:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
1552:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         apiflags |= TCP_WRITE_FLAG_MORE;
1553:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1554:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1555:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     LWIP_ASSERT("lwip_netconn_do_writemore: invalid length!", ((conn->write_offset + len) <= conn->
1556:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     err = tcp_write(conn->pcb.tcp, dataptr, len, apiflags);
1557:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* if OK or memory error, check available space */
1558:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if ((err == ERR_OK) || (err == ERR_MEM)) {
1559:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** err_mem:
1560:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (dontblock && (len < conn->current_msg->msg.w.len)) {
1561:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* non-blocking write did not write everything: mark the pcb non-writable
1562:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****            and let poll_tcp check writable space to mark the pcb writable again */
1563:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         API_EVENT(conn, NETCONN_EVT_SENDMINUS, len);
1564:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         conn->flags |= NETCONN_FLAG_CHECK_WRITESPACE;
1565:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else if ((tcp_sndbuf(conn->pcb.tcp) <= TCP_SNDLOWAT) ||
1566:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                  (tcp_sndqueuelen(conn->pcb.tcp) >= TCP_SNDQUEUELOWAT)) {
1567:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* The queued byte- or pbuf-count exceeds the configured low-water limit,
1568:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****            let select mark this pcb as non-writable. */
1569:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         API_EVENT(conn, NETCONN_EVT_SENDMINUS, len);
1570:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1571:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1572:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1573:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (err == ERR_OK) {
1574:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       err_t out_err;
1575:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->write_offset += len;
1576:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if ((conn->write_offset == conn->current_msg->msg.w.len) || dontblock) {
1577:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* return sent length */
1578:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         conn->current_msg->msg.w.len = conn->write_offset;
1579:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* everything was written */
1580:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         write_finished = 1;
1581:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1582:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       out_err = tcp_output(conn->pcb.tcp);
1583:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (ERR_IS_FATAL(out_err) || (out_err == ERR_RTE)) {
1584:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* If tcp_output fails with fatal error or no route is found,
1585:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****            don't try writing any more but return the error
1586:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****            to the application thread. */
1587:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         err = out_err;
1588:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         write_finished = 1;
1589:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         conn->current_msg->msg.w.len = 0;
1590:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1591:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else if (err == ERR_MEM) {
1592:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* If ERR_MEM, we wait for sent_tcp or poll_tcp to be called.
1593:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****          For blocking sockets, we do NOT return to the application
1594:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****          thread, since ERR_MEM is only a temporary error! Non-blocking
1595:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****          will remain non-writable until sent_tcp/poll_tcp is called */
1596:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1597:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* tcp_write returned ERR_MEM, try tcp_output anyway */
1598:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       err_t out_err = tcp_output(conn->pcb.tcp);
1599:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (ERR_IS_FATAL(out_err) || (out_err == ERR_RTE)) {
1600:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* If tcp_output fails with fatal error or no route is found,
1601:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****            don't try writing any more but return the error
1602:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****            to the application thread. */
1603:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         err = out_err;
1604:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         write_finished = 1;
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 45


1605:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         conn->current_msg->msg.w.len = 0;
1606:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else if (dontblock) {
1607:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* non-blocking write is done on ERR_MEM */
1608:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         err = ERR_WOULDBLOCK;
1609:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         write_finished = 1;
1610:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         conn->current_msg->msg.w.len = 0;
1611:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1612:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else {
1613:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* On errors != ERR_MEM, we don't try writing any more but return
1614:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****          the error to the application thread. */
1615:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       write_finished = 1;
1616:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg->msg.w.len = 0;
1617:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1618:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1619:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (write_finished) {
1620:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* everything was written: set back connection state
1621:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        and back to application task */
1622:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_sem_t* op_completed_sem = LWIP_API_MSG_SEM(conn->current_msg);
1623:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->current_msg->err = err;
1624:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->current_msg = NULL;
1625:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->write_offset = 0;
1626:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->state = NETCONN_NONE;
1627:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     NETCONN_SET_SAFE_ERR(conn, err);
1628:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
1629:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (delayed)
1630:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
1631:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     {
1632:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       sys_sem_signal(op_completed_sem);
1633:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1634:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1635:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
1636:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   else {
1637:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_MEM;
1638:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1639:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
1640:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return ERR_OK;
1641:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1642:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
1643:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1644:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1645:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Send some data on a TCP pcb contained in a netconn
1646:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_write
1647:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1648:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg pointing to the connection
1649:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1650:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
1651:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_write(void *m)
1652:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
1653:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
1654:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1655:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (ERR_IS_FATAL(msg->conn->last_err)) {
1656:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = msg->conn->last_err;
1657:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
1658:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_TCP) {
1659:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
1660:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (msg->conn->state != NETCONN_NONE) {
1661:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* netconn is connecting, closing or in blocking write */
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 46


1662:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = ERR_INPROGRESS;
1663:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else if (msg->conn->pcb.tcp != NULL) {
1664:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->state = NETCONN_WRITE;
1665:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* set all the variables used by lwip_netconn_do_writemore */
1666:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         LWIP_ASSERT("already writing or closing", msg->conn->current_msg == NULL &&
1667:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->conn->write_offset == 0);
1668:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         LWIP_ASSERT("msg->msg.w.len != 0", msg->msg.w.len != 0);
1669:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->current_msg = msg;
1670:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->write_offset = 0;
1671:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
1672:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (lwip_netconn_do_writemore(msg->conn, 0) != ERR_OK) {
1673:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LWIP_ASSERT("state!", msg->conn->state == NETCONN_WRITE);
1674:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           UNLOCK_TCPIP_CORE();
1675:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           sys_arch_sem_wait(LWIP_API_MSG_SEM(msg), 0);
1676:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LOCK_TCPIP_CORE();
1677:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LWIP_ASSERT("state!", msg->conn->state != NETCONN_WRITE);
1678:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
1679:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else /* LWIP_TCPIP_CORE_LOCKING */
1680:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         lwip_netconn_do_writemore(msg->conn);
1681:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCPIP_CORE_LOCKING */
1682:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* for both cases: if lwip_netconn_do_writemore was called, don't ACK the APIMSG
1683:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****            since lwip_netconn_do_writemore ACKs it! */
1684:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         return;
1685:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
1686:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = ERR_CONN;
1687:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1688:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else /* LWIP_TCP */
1689:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->err = ERR_VAL;
1690:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
1691:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if (LWIP_UDP || LWIP_RAW)
1692:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else {
1693:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->err = ERR_VAL;
1694:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* (LWIP_UDP || LWIP_RAW) */
1695:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1696:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1697:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   TCPIP_APIMSG_ACK(msg);
1698:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1699:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1700:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1701:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Return a connection's local or remote address
1702:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_getaddr
1703:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1704:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg pointing to the connection
1705:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1706:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
1707:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_getaddr(void *m)
1708:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
1709:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
1710:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1711:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (msg->conn->pcb.ip != NULL) {
1712:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->msg.ad.local) {
1713:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       ip_addr_copy(API_EXPR_DEREF(msg->msg.ad.ipaddr),
1714:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->pcb.ip->local_ip);
1715:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else {
1716:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       ip_addr_copy(API_EXPR_DEREF(msg->msg.ad.ipaddr),
1717:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->pcb.ip->remote_ip);
1718:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 47


1719:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1720:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_OK;
1721:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     switch (NETCONNTYPE_GROUP(msg->conn->type)) {
1722:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
1723:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     case NETCONN_RAW:
1724:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (msg->msg.ad.local) {
1725:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         API_EXPR_DEREF(msg->msg.ad.port) = msg->conn->pcb.raw->protocol;
1726:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
1727:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* return an error as connecting is only a helper for upper layers */
1728:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = ERR_CONN;
1729:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1730:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       break;
1731:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_RAW */
1732:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_UDP
1733:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     case NETCONN_UDP:
1734:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (msg->msg.ad.local) {
1735:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         API_EXPR_DEREF(msg->msg.ad.port) = msg->conn->pcb.udp->local_port;
1736:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
1737:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if ((msg->conn->pcb.udp->flags & UDP_FLAGS_CONNECTED) == 0) {
1738:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->err = ERR_CONN;
1739:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         } else {
1740:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           API_EXPR_DEREF(msg->msg.ad.port) = msg->conn->pcb.udp->remote_port;
1741:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
1742:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1743:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       break;
1744:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDP */
1745:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
1746:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     case NETCONN_TCP:
1747:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if ((msg->msg.ad.local == 0) &&
1748:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           ((msg->conn->pcb.tcp->state == CLOSED) || (msg->conn->pcb.tcp->state == LISTEN))) {
1749:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* pcb is not connected and remote name is requested */
1750:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = ERR_CONN;
1751:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
1752:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         API_EXPR_DEREF(msg->msg.ad.port) = (msg->msg.ad.local ? msg->conn->pcb.tcp->local_port : ms
1753:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1754:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       break;
1755:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
1756:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     default:
1757:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       LWIP_ASSERT("invalid netconn_type", 0);
1758:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       break;
1759:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1760:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
1761:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_CONN;
1762:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1763:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   TCPIP_APIMSG_ACK(msg);
1764:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1765:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1766:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1767:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Close or half-shutdown a TCP pcb contained in a netconn
1768:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_close
1769:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * In contrast to closing sockets, the netconn is not deallocated.
1770:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1771:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg pointing to the connection
1772:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1773:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
1774:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_close(void *m)
1775:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 48


1776:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
1777:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1778:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
1779:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   enum netconn_state state = msg->conn->state;
1780:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* First check if this is a TCP netconn and if it is in a correct state
1781:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (LISTEN doesn't support half shutdown) */
1782:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if ((msg->conn->pcb.tcp != NULL) &&
1783:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_TCP) &&
1784:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       ((msg->msg.sd.shut == NETCONN_SHUT_RDWR) || (state != NETCONN_LISTEN))) {
1785:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* Check if we are in a connected state */
1786:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (state == NETCONN_CONNECT) {
1787:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* TCP connect in progress: cannot shutdown */
1788:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->err = ERR_CONN;
1789:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else if (state == NETCONN_WRITE) {
1790:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_NETCONN_FULLDUPLEX
1791:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (msg->msg.sd.shut & NETCONN_SHUT_WR) {
1792:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* close requested, abort running write */
1793:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         sys_sem_t* write_completed_sem;
1794:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         LWIP_ASSERT("msg->conn->current_msg != NULL", msg->conn->current_msg != NULL);
1795:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         write_completed_sem = LWIP_API_MSG_SEM(msg->conn->current_msg);
1796:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->current_msg->err = ERR_CLSD;
1797:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->current_msg = NULL;
1798:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->write_offset = 0;
1799:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->state = NETCONN_NONE;
1800:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         state = NETCONN_NONE;
1801:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         NETCONN_SET_SAFE_ERR(msg->conn, ERR_CLSD);
1802:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         sys_sem_signal(write_completed_sem);
1803:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
1804:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         LWIP_ASSERT("msg->msg.sd.shut == NETCONN_SHUT_RD", msg->msg.sd.shut == NETCONN_SHUT_RD);
1805:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* In this case, let the write continue and do not interfere with
1806:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****            conn->current_msg or conn->state! */
1807:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = tcp_shutdown(msg->conn->pcb.tcp, 1, 0);
1808:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1809:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1810:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (state == NETCONN_NONE) {
1811:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else /* LWIP_NETCONN_FULLDUPLEX */
1812:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->err = ERR_INPROGRESS;
1813:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else {
1814:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_NETCONN_FULLDUPLEX */
1815:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (msg->msg.sd.shut & NETCONN_SHUT_RD) {
1816:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* Drain and delete mboxes */
1817:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         netconn_drain(msg->conn);
1818:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1819:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       LWIP_ASSERT("already writing or closing", msg->conn->current_msg == NULL &&
1820:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->write_offset == 0);
1821:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->conn->state = NETCONN_CLOSE;
1822:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->conn->current_msg = msg;
1823:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
1824:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (lwip_netconn_do_close_internal(msg->conn, 0) != ERR_OK) {
1825:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         LWIP_ASSERT("state!", msg->conn->state == NETCONN_CLOSE);
1826:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         UNLOCK_TCPIP_CORE();
1827:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         sys_arch_sem_wait(LWIP_API_MSG_SEM(msg), 0);
1828:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         LOCK_TCPIP_CORE();
1829:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         LWIP_ASSERT("state!", msg->conn->state == NETCONN_NONE);
1830:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1831:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else /* LWIP_TCPIP_CORE_LOCKING */
1832:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       lwip_netconn_do_close_internal(msg->conn);
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 49


1833:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCPIP_CORE_LOCKING */
1834:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* for tcp netconns, lwip_netconn_do_close_internal ACKs the message */
1835:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       return;
1836:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1837:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else
1838:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
1839:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   {
1840:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_CONN;
1841:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1842:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   TCPIP_APIMSG_ACK(msg);
1843:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1844:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1845:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_IGMP || (LWIP_IPV6 && LWIP_IPV6_MLD)
1846:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1847:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Join multicast groups for UDP netconns.
1848:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_join_leave_group
1849:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1850:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg pointing to the connection
1851:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1852:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
1853:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_join_leave_group(void *m)
1854:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
1855:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
1856:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1857:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (ERR_IS_FATAL(msg->conn->last_err)) {
1858:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = msg->conn->last_err;
1859:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
1860:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->conn->pcb.tcp != NULL) {
1861:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_UDP) {
1862:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_UDP
1863:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_IPV6 && LWIP_IPV6_MLD
1864:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (NETCONNTYPE_ISIPV6(msg->conn->type)) {
1865:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           if (msg->msg.jl.join_or_leave == NETCONN_JOIN) {
1866:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             msg->err = mld6_joingroup(ip_2_ip6(API_EXPR_REF(msg->msg.jl.netif_addr)),
1867:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               ip_2_ip6(API_EXPR_REF(msg->msg.jl.multiaddr)));
1868:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           } else {
1869:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             msg->err = mld6_leavegroup(ip_2_ip6(API_EXPR_REF(msg->msg.jl.netif_addr)),
1870:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               ip_2_ip6(API_EXPR_REF(msg->msg.jl.multiaddr)));
1871:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           }
1872:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
1873:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         else
1874:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_IPV6 && LWIP_IPV6_MLD */
1875:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         {
1876:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_IGMP
1877:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           if (msg->msg.jl.join_or_leave == NETCONN_JOIN) {
1878:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             msg->err = igmp_joingroup(ip_2_ip4(API_EXPR_REF(msg->msg.jl.netif_addr)),
1879:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               ip_2_ip4(API_EXPR_REF(msg->msg.jl.multiaddr)));
1880:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           } else {
1881:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             msg->err = igmp_leavegroup(ip_2_ip4(API_EXPR_REF(msg->msg.jl.netif_addr)),
1882:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               ip_2_ip4(API_EXPR_REF(msg->msg.jl.multiaddr)));
1883:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           }
1884:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_IGMP */
1885:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
1886:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDP */
1887:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if (LWIP_TCP || LWIP_RAW)
1888:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
1889:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = ERR_VAL;
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 50


1890:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* (LWIP_TCP || LWIP_RAW) */
1891:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1892:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else {
1893:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->err = ERR_CONN;
1894:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1895:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1896:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   TCPIP_APIMSG_ACK(msg);
1897:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1898:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_IGMP || (LWIP_IPV6 && LWIP_IPV6_MLD) */
1899:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1900:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_DNS
1901:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1902:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Callback function that is called when DNS name is resolved
1903:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * (or on timeout). A waiting application thread is waked up by
1904:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * signaling the semaphore.
1905:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1906:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static void
1907:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_dns_found(const char *name, const ip_addr_t *ipaddr, void *arg)
1908:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 843              		.loc 1 1908 0
 844              		.cfi_startproc
 845              		@ args = 0, pretend = 0, frame = 0
 846              		@ frame_needed = 0, uses_anonymous_args = 0
 847              	.LVL101:
 848 0000 08B5     		push	{r3, lr}
 849              	.LCFI6:
 850              		.cfi_def_cfa_offset 8
 851              		.cfi_offset 3, -8
 852              		.cfi_offset 14, -4
 853              	.LVL102:
1909:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct dns_api_msg *msg = (struct dns_api_msg*)arg;
1910:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1911:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* we trust the internal implementation to be correct :-) */
1912:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_UNUSED_ARG(name);
1913:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1914:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (ipaddr == NULL) {
 854              		.loc 1 1914 0
 855 0002 51B1     		cbz	r1, .L92
 856 0004 0B46     		mov	r3, r1
1915:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* timeout or memory error */
1916:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     API_EXPR_DEREF(msg->err) = ERR_VAL;
1917:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
1918:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* address was resolved */
1919:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     API_EXPR_DEREF(msg->err) = ERR_OK;
 857              		.loc 1 1919 0
 858 0006 D168     		ldr	r1, [r2, #12]
 859              	.LVL103:
 860 0008 0020     		movs	r0, #0
 861              	.LVL104:
 862 000a 0870     		strb	r0, [r1]
1920:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     API_EXPR_DEREF(msg->addr) = *ipaddr;
 863              		.loc 1 1920 0
 864 000c 5168     		ldr	r1, [r2, #4]
 865 000e 1B68     		ldr	r3, [r3]
 866              	.LVL105:
 867 0010 0B60     		str	r3, [r1]
 868              	.L90:
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 51


1921:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1922:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* wake up the application task waiting in netconn_gethostbyname */
1923:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   sys_sem_signal(API_EXPR_REF_SEM(msg->sem));
 869              		.loc 1 1923 0
 870 0012 9068     		ldr	r0, [r2, #8]
 871 0014 FFF7FEFF 		bl	sys_sem_signal
 872              	.LVL106:
1924:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 873              		.loc 1 1924 0
 874 0018 08BD     		pop	{r3, pc}
 875              	.LVL107:
 876              	.L92:
1916:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 877              		.loc 1 1916 0
 878 001a D368     		ldr	r3, [r2, #12]
 879 001c FA21     		movs	r1, #250
 880              	.LVL108:
 881 001e 1970     		strb	r1, [r3]
 882 0020 F7E7     		b	.L90
 883              		.cfi_endproc
 884              	.LFE184:
 886              		.section	.text.lwip_netconn_do_writemore,"ax",%progbits
 887              		.align	1
 888              		.syntax unified
 889              		.thumb
 890              		.thumb_func
 891              		.fpu fpv5-sp-d16
 893              	lwip_netconn_do_writemore:
 894              	.LFB180:
1498:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   err_t err;
 895              		.loc 1 1498 0
 896              		.cfi_startproc
 897              		@ args = 0, pretend = 0, frame = 0
 898              		@ frame_needed = 0, uses_anonymous_args = 0
 899              	.LVL109:
 900 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 901              	.LCFI7:
 902              		.cfi_def_cfa_offset 32
 903              		.cfi_offset 3, -32
 904              		.cfi_offset 4, -28
 905              		.cfi_offset 5, -24
 906              		.cfi_offset 6, -20
 907              		.cfi_offset 7, -16
 908              		.cfi_offset 8, -12
 909              		.cfi_offset 9, -8
 910              		.cfi_offset 14, -4
 911 0004 8846     		mov	r8, r1
 912              	.LVL110:
1507:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->state == NETCONN_WRITE", (conn->state == NETCONN_WRITE));
 913              		.loc 1 1507 0
 914 0006 0446     		mov	r4, r0
 915 0008 B8B1     		cbz	r0, .L126
 916              	.LVL111:
 917              	.L94:
1508:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->current_msg != NULL", conn->current_msg != NULL);
 918              		.loc 1 1508 0
 919 000a 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 52


 920 000c 012B     		cmp	r3, #1
 921 000e 1CD1     		bne	.L127
 922              	.L95:
1509:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->pcb.tcp != NULL", conn->pcb.tcp != NULL);
 923              		.loc 1 1509 0
 924 0010 636A     		ldr	r3, [r4, #36]
 925 0012 13B3     		cbz	r3, .L128
 926              	.L96:
1510:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->write_offset < conn->current_msg->msg.w.len",
 927              		.loc 1 1510 0
 928 0014 6368     		ldr	r3, [r4, #4]
 929 0016 43B3     		cbz	r3, .L129
 930              	.L97:
1511:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->write_offset < conn->current_msg->msg.w.len);
 931              		.loc 1 1511 0
 932 0018 226A     		ldr	r2, [r4, #32]
 933 001a 636A     		ldr	r3, [r4, #36]
 934 001c DB68     		ldr	r3, [r3, #12]
 935 001e 9A42     		cmp	r2, r3
 936 0020 2BD2     		bcs	.L130
 937              	.L98:
1514:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   dontblock = netconn_is_nonblocking(conn) || (apiflags & NETCONN_DONTBLOCK);
 938              		.loc 1 1514 0
 939 0022 626A     		ldr	r2, [r4, #36]
 940 0024 92F81090 		ldrb	r9, [r2, #16]	@ zero_extendqisi2
 941              	.LVL112:
1515:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 942              		.loc 1 1515 0
 943 0028 237F     		ldrb	r3, [r4, #28]	@ zero_extendqisi2
 944 002a 13F0020F 		tst	r3, #2
 945 002e 2CD1     		bne	.L120
1515:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 946              		.loc 1 1515 0 is_stmt 0 discriminator 2
 947 0030 19F0040F 		tst	r9, #4
 948 0034 41D0     		beq	.L121
1515:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 949              		.loc 1 1515 0
 950 0036 0127     		movs	r7, #1
 951 0038 28E0     		b	.L99
 952              	.LVL113:
 953              	.L126:
1507:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->state == NETCONN_WRITE", (conn->state == NETCONN_WRITE));
 954              		.loc 1 1507 0 is_stmt 1 discriminator 1
 955 003a 744B     		ldr	r3, .L134
 956 003c 40F2E352 		movw	r2, #1507
 957 0040 7349     		ldr	r1, .L134+4
 958              	.LVL114:
 959 0042 7448     		ldr	r0, .L134+8
 960              	.LVL115:
 961 0044 FFF7FEFF 		bl	printf
 962              	.LVL116:
 963 0048 DFE7     		b	.L94
 964              	.L127:
1508:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->current_msg != NULL", conn->current_msg != NULL);
 965              		.loc 1 1508 0 discriminator 1
 966 004a 704B     		ldr	r3, .L134
 967 004c 40F2E452 		movw	r2, #1508
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 53


 968 0050 7149     		ldr	r1, .L134+12
 969 0052 7048     		ldr	r0, .L134+8
 970 0054 FFF7FEFF 		bl	printf
 971              	.LVL117:
 972 0058 DAE7     		b	.L95
 973              	.L128:
1509:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->pcb.tcp != NULL", conn->pcb.tcp != NULL);
 974              		.loc 1 1509 0 discriminator 1
 975 005a 6C4B     		ldr	r3, .L134
 976 005c 40F2E552 		movw	r2, #1509
 977 0060 6E49     		ldr	r1, .L134+16
 978 0062 6C48     		ldr	r0, .L134+8
 979 0064 FFF7FEFF 		bl	printf
 980              	.LVL118:
 981 0068 D4E7     		b	.L96
 982              	.L129:
1510:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->write_offset < conn->current_msg->msg.w.len",
 983              		.loc 1 1510 0 discriminator 1
 984 006a 684B     		ldr	r3, .L134
 985 006c 40F2E652 		movw	r2, #1510
 986 0070 6B49     		ldr	r1, .L134+20
 987 0072 6848     		ldr	r0, .L134+8
 988 0074 FFF7FEFF 		bl	printf
 989              	.LVL119:
 990 0078 CEE7     		b	.L97
 991              	.L130:
1511:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->write_offset < conn->current_msg->msg.w.len);
 992              		.loc 1 1511 0 discriminator 1
 993 007a 644B     		ldr	r3, .L134
 994 007c 4FF4BD62 		mov	r2, #1512
 995 0080 6849     		ldr	r1, .L134+24
 996 0082 6448     		ldr	r0, .L134+8
 997 0084 FFF7FEFF 		bl	printf
 998              	.LVL120:
 999 0088 CBE7     		b	.L98
 1000              	.LVL121:
 1001              	.L120:
1515:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 1002              		.loc 1 1515 0
 1003 008a 0127     		movs	r7, #1
 1004              	.L99:
1515:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 1005              		.loc 1 1515 0 is_stmt 0 discriminator 6
 1006 008c FFB2     		uxtb	r7, r7
 1007              	.LVL122:
1534:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     diff = conn->current_msg->msg.w.len - conn->write_offset;
 1008              		.loc 1 1534 0 is_stmt 1 discriminator 6
 1009 008e 9668     		ldr	r6, [r2, #8]
 1010 0090 236A     		ldr	r3, [r4, #32]
 1011 0092 1E44     		add	r6, r6, r3
 1012              	.LVL123:
1535:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (diff > 0xffffUL) { /* max_u16_t */
 1013              		.loc 1 1535 0 discriminator 6
 1014 0094 D268     		ldr	r2, [r2, #12]
 1015 0096 D51A     		subs	r5, r2, r3
 1016              	.LVL124:
1536:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       len = 0xffff;
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 54


 1017              		.loc 1 1536 0 discriminator 6
 1018 0098 B5F5803F 		cmp	r5, #65536
 1019 009c 0FD3     		bcc	.L100
 1020              	.LVL125:
1538:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else {
 1021              		.loc 1 1538 0
 1022 009e 49F00209 		orr	r9, r9, #2
 1023              	.LVL126:
1537:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       apiflags |= TCP_WRITE_FLAG_MORE;
 1024              		.loc 1 1537 0
 1025 00a2 4FF6FF75 		movw	r5, #65535
 1026              	.LVL127:
 1027              	.L101:
1542:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (available < len) {
 1028              		.loc 1 1542 0
 1029 00a6 6168     		ldr	r1, [r4, #4]
 1030 00a8 B1F86010 		ldrh	r1, [r1, #96]
 1031              	.LVL128:
1543:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* don't try to write more than sendbuf */
 1032              		.loc 1 1543 0
 1033 00ac 8D42     		cmp	r5, r1
 1034 00ae 0BD9     		bls	.L102
 1035              	.LVL129:
1546:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (!len) {
 1036              		.loc 1 1546 0
 1037 00b0 3FB1     		cbz	r7, .L103
1547:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           err = ERR_WOULDBLOCK;
 1038              		.loc 1 1547 0
 1039 00b2 0029     		cmp	r1, #0
 1040 00b4 3ED0     		beq	.L122
1545:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (dontblock) {
 1041              		.loc 1 1545 0
 1042 00b6 0D46     		mov	r5, r1
 1043 00b8 06E0     		b	.L102
 1044              	.LVL130:
 1045              	.L121:
1515:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 1046              		.loc 1 1515 0
 1047 00ba 0027     		movs	r7, #0
 1048 00bc E6E7     		b	.L99
 1049              	.LVL131:
 1050              	.L100:
1540:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1051              		.loc 1 1540 0
 1052 00be ADB2     		uxth	r5, r5
 1053              	.LVL132:
 1054 00c0 F1E7     		b	.L101
 1055              	.LVL133:
 1056              	.L103:
1552:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 1057              		.loc 1 1552 0
 1058 00c2 49F00209 		orr	r9, r9, #2
 1059              	.LVL134:
1545:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (dontblock) {
 1060              		.loc 1 1545 0
 1061 00c6 0D46     		mov	r5, r1
 1062              	.LVL135:
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 55


 1063              	.L102:
1555:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     err = tcp_write(conn->pcb.tcp, dataptr, len, apiflags);
 1064              		.loc 1 1555 0
 1065 00c8 2B44     		add	r3, r3, r5
 1066              	.LVL136:
 1067 00ca 9A42     		cmp	r2, r3
 1068 00cc 2AD3     		bcc	.L131
 1069              	.LVL137:
 1070              	.L105:
1556:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* if OK or memory error, check available space */
 1071              		.loc 1 1556 0
 1072 00ce 4B46     		mov	r3, r9
 1073 00d0 2A46     		mov	r2, r5
 1074 00d2 3146     		mov	r1, r6
 1075 00d4 6068     		ldr	r0, [r4, #4]
 1076 00d6 FFF7FEFF 		bl	tcp_write
 1077              	.LVL138:
 1078 00da 0646     		mov	r6, r0
 1079              	.LVL139:
1558:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** err_mem:
 1080              		.loc 1 1558 0
 1081 00dc 431C     		adds	r3, r0, #1
 1082 00de DBB2     		uxtb	r3, r3
 1083 00e0 012B     		cmp	r3, #1
 1084 00e2 2AD9     		bls	.L104
 1085              	.LVL140:
 1086              	.L106:
1573:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       err_t out_err;
 1087              		.loc 1 1573 0
 1088 00e4 002E     		cmp	r6, #0
 1089 00e6 4AD1     		bne	.L110
 1090              	.LBB10:
1575:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if ((conn->write_offset == conn->current_msg->msg.w.len) || dontblock) {
 1091              		.loc 1 1575 0
 1092 00e8 236A     		ldr	r3, [r4, #32]
 1093 00ea 1D44     		add	r5, r5, r3
 1094              	.LVL141:
 1095 00ec 2562     		str	r5, [r4, #32]
1576:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* return sent length */
 1096              		.loc 1 1576 0
 1097 00ee 636A     		ldr	r3, [r4, #36]
 1098 00f0 DA68     		ldr	r2, [r3, #12]
 1099 00f2 9542     		cmp	r5, r2
 1100 00f4 00D0     		beq	.L111
1576:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* return sent length */
 1101              		.loc 1 1576 0 is_stmt 0 discriminator 1
 1102 00f6 0FB1     		cbz	r7, .L112
 1103              	.L111:
1578:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* everything was written */
 1104              		.loc 1 1578 0 is_stmt 1
 1105 00f8 DD60     		str	r5, [r3, #12]
 1106              	.LVL142:
1580:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 1107              		.loc 1 1580 0
 1108 00fa 0127     		movs	r7, #1
 1109              	.LVL143:
 1110              	.L112:
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 56


1582:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (ERR_IS_FATAL(out_err) || (out_err == ERR_RTE)) {
 1111              		.loc 1 1582 0
 1112 00fc 6068     		ldr	r0, [r4, #4]
 1113 00fe FFF7FEFF 		bl	tcp_output
 1114              	.LVL144:
1583:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* If tcp_output fails with fatal error or no route is found,
 1115              		.loc 1 1583 0
 1116 0102 10F10C0F 		cmn	r0, #12
 1117 0106 ACBF     		ite	ge
 1118 0108 0022     		movge	r2, #0
 1119 010a 0122     		movlt	r2, #1
 1120 010c 10F1040F 		cmn	r0, #4
 1121 0110 14BF     		ite	ne
 1122 0112 0023     		movne	r3, #0
 1123 0114 0123     		moveq	r3, #1
 1124 0116 1343     		orrs	r3, r2, r3
 1125 0118 6ED0     		beq	.L113
 1126              	.LVL145:
1589:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 1127              		.loc 1 1589 0
 1128 011a 636A     		ldr	r3, [r4, #36]
 1129 011c 0022     		movs	r2, #0
 1130 011e DA60     		str	r2, [r3, #12]
1587:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         write_finished = 1;
 1131              		.loc 1 1587 0
 1132 0120 0646     		mov	r6, r0
 1133 0122 32E0     		b	.L114
 1134              	.LVL146:
 1135              	.L131:
 1136              	.LBE10:
1555:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     err = tcp_write(conn->pcb.tcp, dataptr, len, apiflags);
 1137              		.loc 1 1555 0 discriminator 1
 1138 0124 394B     		ldr	r3, .L134
 1139 0126 40F21362 		movw	r2, #1555
 1140              	.LVL147:
 1141 012a 3F49     		ldr	r1, .L134+28
 1142              	.LVL148:
 1143 012c 3948     		ldr	r0, .L134+8
 1144 012e FFF7FEFF 		bl	printf
 1145              	.LVL149:
 1146 0132 CCE7     		b	.L105
 1147              	.LVL150:
 1148              	.L122:
1545:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (dontblock) {
 1149              		.loc 1 1545 0
 1150 0134 0D46     		mov	r5, r1
1548:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           goto err_mem;
 1151              		.loc 1 1548 0
 1152 0136 6FF00606 		mvn	r6, #6
 1153              	.LVL151:
 1154              	.L104:
1560:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* non-blocking write did not write everything: mark the pcb non-writable
 1155              		.loc 1 1560 0
 1156 013a 77B1     		cbz	r7, .L107
1560:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* non-blocking write did not write everything: mark the pcb non-writable
 1157              		.loc 1 1560 0 is_stmt 0 discriminator 1
 1158 013c 636A     		ldr	r3, [r4, #36]
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 57


 1159 013e DB68     		ldr	r3, [r3, #12]
 1160 0140 9D42     		cmp	r5, r3
 1161 0142 0AD2     		bcs	.L107
1563:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         conn->flags |= NETCONN_FLAG_CHECK_WRITESPACE;
 1162              		.loc 1 1563 0 is_stmt 1
 1163 0144 A36A     		ldr	r3, [r4, #40]
 1164 0146 1BB1     		cbz	r3, .L108
1563:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         conn->flags |= NETCONN_FLAG_CHECK_WRITESPACE;
 1165              		.loc 1 1563 0 is_stmt 0 discriminator 1
 1166 0148 2A46     		mov	r2, r5
 1167 014a 0321     		movs	r1, #3
 1168 014c 2046     		mov	r0, r4
 1169 014e 9847     		blx	r3
 1170              	.LVL152:
 1171              	.L108:
1564:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else if ((tcp_sndbuf(conn->pcb.tcp) <= TCP_SNDLOWAT) ||
 1172              		.loc 1 1564 0 is_stmt 1
 1173 0150 237F     		ldrb	r3, [r4, #28]	@ zero_extendqisi2
 1174 0152 43F01003 		orr	r3, r3, #16
 1175 0156 2377     		strb	r3, [r4, #28]
 1176 0158 C4E7     		b	.L106
 1177              	.L107:
1565:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                  (tcp_sndqueuelen(conn->pcb.tcp) >= TCP_SNDQUEUELOWAT)) {
 1178              		.loc 1 1565 0
 1179 015a 6368     		ldr	r3, [r4, #4]
 1180 015c B3F86020 		ldrh	r2, [r3, #96]
 1181 0160 B2F5866F 		cmp	r2, #1072
 1182 0164 03D3     		bcc	.L109
1566:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* The queued byte- or pbuf-count exceeds the configured low-water limit,
 1183              		.loc 1 1566 0 discriminator 1
 1184 0166 B3F86230 		ldrh	r3, [r3, #98]
1565:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                  (tcp_sndqueuelen(conn->pcb.tcp) >= TCP_SNDQUEUELOWAT)) {
 1185              		.loc 1 1565 0 discriminator 1
 1186 016a 042B     		cmp	r3, #4
 1187 016c BAD9     		bls	.L106
 1188              	.L109:
1569:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 1189              		.loc 1 1569 0
 1190 016e A36A     		ldr	r3, [r4, #40]
 1191 0170 002B     		cmp	r3, #0
 1192 0172 B7D0     		beq	.L106
1569:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 1193              		.loc 1 1569 0 is_stmt 0 discriminator 1
 1194 0174 2A46     		mov	r2, r5
 1195 0176 0321     		movs	r1, #3
 1196 0178 2046     		mov	r0, r4
 1197 017a 9847     		blx	r3
 1198              	.LVL153:
 1199 017c B2E7     		b	.L106
 1200              	.L110:
1591:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* If ERR_MEM, we wait for sent_tcp or poll_tcp to be called.
 1201              		.loc 1 1591 0 is_stmt 1
 1202 017e B6F1FF3F 		cmp	r6, #-1
 1203 0182 1DD0     		beq	.L132
 1204              	.LVL154:
1616:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1205              		.loc 1 1616 0
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 58


 1206 0184 636A     		ldr	r3, [r4, #36]
 1207 0186 0022     		movs	r2, #0
 1208 0188 DA60     		str	r2, [r3, #12]
 1209              	.LVL155:
 1210              	.L114:
 1211              	.LBB11:
1622:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->current_msg->err = err;
 1212              		.loc 1 1622 0
 1213 018a 636A     		ldr	r3, [r4, #36]
 1214 018c 1868     		ldr	r0, [r3]
 1215 018e 00F10C05 		add	r5, r0, #12
 1216              	.LVL156:
1623:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->current_msg = NULL;
 1217              		.loc 1 1623 0
 1218 0192 1E71     		strb	r6, [r3, #4]
1624:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->write_offset = 0;
 1219              		.loc 1 1624 0
 1220 0194 0023     		movs	r3, #0
 1221 0196 6362     		str	r3, [r4, #36]
1625:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->state = NETCONN_NONE;
 1222              		.loc 1 1625 0
 1223 0198 2362     		str	r3, [r4, #32]
1626:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     NETCONN_SET_SAFE_ERR(conn, err);
 1224              		.loc 1 1626 0
 1225 019a 6370     		strb	r3, [r4, #1]
1627:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
 1226              		.loc 1 1627 0
 1227 019c 4CB1     		cbz	r4, .L118
 1228              	.LBB12:
1627:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
 1229              		.loc 1 1627 0 is_stmt 0 discriminator 1
 1230 019e FFF7FEFF 		bl	sys_arch_protect
 1231              	.LVL157:
 1232 01a2 94F90830 		ldrsb	r3, [r4, #8]
 1233 01a6 13F10C0F 		cmn	r3, #12
 1234 01aa 00DB     		blt	.L119
1627:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
 1235              		.loc 1 1627 0 discriminator 2
 1236 01ac 2672     		strb	r6, [r4, #8]
 1237              	.L119:
1627:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
 1238              		.loc 1 1627 0 discriminator 4
 1239 01ae FFF7FEFF 		bl	sys_arch_unprotect
 1240              	.LVL158:
 1241              	.L118:
 1242              	.LBE12:
1629:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
 1243              		.loc 1 1629 0 is_stmt 1
 1244 01b2 B8F1000F 		cmp	r8, #0
 1245 01b6 24D1     		bne	.L133
 1246              	.LBE11:
1640:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 1247              		.loc 1 1640 0
 1248 01b8 0026     		movs	r6, #0
 1249              	.LVL159:
 1250              	.L117:
1641:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 59


 1251              		.loc 1 1641 0
 1252 01ba 3046     		mov	r0, r6
 1253 01bc BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 1254              	.LVL160:
 1255              	.L132:
 1256              	.LBB13:
1598:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (ERR_IS_FATAL(out_err) || (out_err == ERR_RTE)) {
 1257              		.loc 1 1598 0
 1258 01c0 6068     		ldr	r0, [r4, #4]
 1259 01c2 FFF7FEFF 		bl	tcp_output
 1260              	.LVL161:
1599:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* If tcp_output fails with fatal error or no route is found,
 1261              		.loc 1 1599 0
 1262 01c6 10F10C0F 		cmn	r0, #12
 1263 01ca ACBF     		ite	ge
 1264 01cc 0022     		movge	r2, #0
 1265 01ce 0122     		movlt	r2, #1
 1266 01d0 10F1040F 		cmn	r0, #4
 1267 01d4 14BF     		ite	ne
 1268 01d6 0023     		movne	r3, #0
 1269 01d8 0123     		moveq	r3, #1
 1270 01da 1343     		orrs	r3, r2, r3
 1271 01dc 04D0     		beq	.L116
 1272              	.LVL162:
1605:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else if (dontblock) {
 1273              		.loc 1 1605 0
 1274 01de 636A     		ldr	r3, [r4, #36]
 1275 01e0 0022     		movs	r2, #0
 1276 01e2 DA60     		str	r2, [r3, #12]
1603:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         write_finished = 1;
 1277              		.loc 1 1603 0
 1278 01e4 0646     		mov	r6, r0
 1279 01e6 D0E7     		b	.L114
 1280              	.LVL163:
 1281              	.L116:
1606:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* non-blocking write is done on ERR_MEM */
 1282              		.loc 1 1606 0
 1283 01e8 002F     		cmp	r7, #0
 1284 01ea E6D0     		beq	.L117
 1285              	.LVL164:
1610:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 1286              		.loc 1 1610 0
 1287 01ec 636A     		ldr	r3, [r4, #36]
 1288 01ee 0022     		movs	r2, #0
 1289 01f0 DA60     		str	r2, [r3, #12]
1608:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         write_finished = 1;
 1290              		.loc 1 1608 0
 1291 01f2 6FF00606 		mvn	r6, #6
 1292 01f6 C8E7     		b	.L114
 1293              	.LVL165:
 1294              	.L113:
 1295              	.LBE13:
1619:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* everything was written: set back connection state
 1296              		.loc 1 1619 0
 1297 01f8 002F     		cmp	r7, #0
 1298 01fa C6D1     		bne	.L114
1637:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 60


 1299              		.loc 1 1637 0
 1300 01fc 4FF0FF36 		mov	r6, #-1
 1301              	.LVL166:
 1302 0200 DBE7     		b	.L117
 1303              	.LVL167:
 1304              	.L133:
 1305              	.LBB14:
1632:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1306              		.loc 1 1632 0
 1307 0202 2846     		mov	r0, r5
 1308 0204 FFF7FEFF 		bl	sys_sem_signal
 1309              	.LVL168:
 1310              	.LBE14:
1640:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 1311              		.loc 1 1640 0
 1312 0208 0026     		movs	r6, #0
 1313 020a D6E7     		b	.L117
 1314              	.L135:
 1315              		.align	2
 1316              	.L134:
 1317 020c 00000000 		.word	.LC0
 1318 0210 00000000 		.word	.LC6
 1319 0214 54000000 		.word	.LC2
 1320 0218 00000000 		.word	.LC13
 1321 021c 10000000 		.word	.LC7
 1322 0220 20000000 		.word	.LC14
 1323 0224 38000000 		.word	.LC15
 1324 0228 6C000000 		.word	.LC16
 1325              		.cfi_endproc
 1326              	.LFE180:
 1328              		.section	.text.lwip_netconn_do_close_internal,"ax",%progbits
 1329              		.align	1
 1330              		.syntax unified
 1331              		.thumb
 1332              		.thumb_func
 1333              		.fpu fpv5-sp-d16
 1335              	lwip_netconn_do_close_internal:
 1336              	.LFB171:
 826:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   err_t err;
 1337              		.loc 1 826 0
 1338              		.cfi_startproc
 1339              		@ args = 0, pretend = 0, frame = 0
 1340              		@ frame_needed = 0, uses_anonymous_args = 0
 1341              	.LVL169:
 1342 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 1343              	.LCFI8:
 1344              		.cfi_def_cfa_offset 32
 1345              		.cfi_offset 4, -32
 1346              		.cfi_offset 5, -28
 1347              		.cfi_offset 6, -24
 1348              		.cfi_offset 7, -20
 1349              		.cfi_offset 8, -16
 1350              		.cfi_offset 9, -12
 1351              		.cfi_offset 10, -8
 1352              		.cfi_offset 14, -4
 1353 0004 8846     		mov	r8, r1
 1354              	.LVL170:
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 61


 835:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("this is for tcp netconns only", (NETCONNTYPE_GROUP(conn->type) == NETCONN_TCP));
 1355              		.loc 1 835 0
 1356 0006 0446     		mov	r4, r0
 1357 0008 0028     		cmp	r0, #0
 1358 000a 7CD0     		beq	.L166
 1359              	.LVL171:
 1360              	.L137:
 836:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn must be in state NETCONN_CLOSE", (conn->state == NETCONN_CLOSE));
 1361              		.loc 1 836 0
 1362 000c 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 1363 000e 03F0F003 		and	r3, r3, #240
 1364 0012 102B     		cmp	r3, #16
 1365 0014 7FD1     		bne	.L167
 1366              	.L138:
 837:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("pcb already closed", (conn->pcb.tcp != NULL));
 1367              		.loc 1 837 0
 1368 0016 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 1369 0018 042B     		cmp	r3, #4
 1370 001a 40F08480 		bne	.L168
 1371              	.L139:
 838:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->current_msg != NULL", conn->current_msg != NULL);
 1372              		.loc 1 838 0
 1373 001e 6368     		ldr	r3, [r4, #4]
 1374 0020 002B     		cmp	r3, #0
 1375 0022 00F08880 		beq	.L169
 1376              	.L140:
 839:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 1377              		.loc 1 839 0
 1378 0026 636A     		ldr	r3, [r4, #36]
 1379 0028 002B     		cmp	r3, #0
 1380 002a 00F08C80 		beq	.L170
 1381              	.L141:
 841:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   shut = conn->current_msg->msg.sd.shut;
 1382              		.loc 1 841 0
 1383 002e 6668     		ldr	r6, [r4, #4]
 1384              	.LVL172:
 842:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   shut_rx = shut & NETCONN_SHUT_RD;
 1385              		.loc 1 842 0
 1386 0030 636A     		ldr	r3, [r4, #36]
 1387 0032 1B7A     		ldrb	r3, [r3, #8]	@ zero_extendqisi2
 1388              	.LVL173:
 843:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   shut_tx = shut & NETCONN_SHUT_WR;
 1389              		.loc 1 843 0
 1390 0034 03F00109 		and	r9, r3, #1
 1391              	.LVL174:
 844:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* shutting down both ends is the same as closing
 1392              		.loc 1 844 0
 1393 0038 03F00207 		and	r7, r3, #2
 1394              	.LVL175:
 847:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     close = 1;
 1395              		.loc 1 847 0
 1396 003c 032B     		cmp	r3, #3
 1397 003e 0FD0     		beq	.L142
 849:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****              ((tpcb->state == FIN_WAIT_1) ||
 1398              		.loc 1 849 0
 1399 0040 B9F1000F 		cmp	r9, #0
 1400 0044 06D0     		beq	.L143
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 62


 850:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               (tpcb->state == FIN_WAIT_2) ||
 1401              		.loc 1 850 0 discriminator 1
 1402 0046 327D     		ldrb	r2, [r6, #20]	@ zero_extendqisi2
 851:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               (tpcb->state == CLOSING))) {
 1403              		.loc 1 851 0 discriminator 1
 1404 0048 531F     		subs	r3, r2, #5
 1405              	.LVL176:
 1406 004a DBB2     		uxtb	r3, r3
 849:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****              ((tpcb->state == FIN_WAIT_1) ||
 1407              		.loc 1 849 0 discriminator 1
 1408 004c 082A     		cmp	r2, #8
 1409 004e 18BF     		it	ne
 1410 0050 012B     		cmpne	r3, #1
 1411 0052 05D9     		bls	.L142
 1412              	.L143:
 854:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     close = 1;
 1413              		.loc 1 854 0
 1414 0054 002F     		cmp	r7, #0
 1415 0056 7ED0     		beq	.L162
 854:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     close = 1;
 1416              		.loc 1 854 0 is_stmt 0 discriminator 1
 1417 0058 B37E     		ldrb	r3, [r6, #26]	@ zero_extendqisi2
 1418 005a 13F0100F 		tst	r3, #16
 1419 005e 7CD0     		beq	.L163
 1420              	.L142:
 862:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 1421              		.loc 1 862 0 is_stmt 1
 1422 0060 0021     		movs	r1, #0
 1423 0062 3046     		mov	r0, r6
 1424 0064 FFF7FEFF 		bl	tcp_arg
 1425              	.LVL177:
 1426 0068 4FF0010A 		mov	r10, #1
 1427              	.L144:
 864:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_accept(tpcb, NULL);
 1428              		.loc 1 864 0
 1429 006c 337D     		ldrb	r3, [r6, #20]	@ zero_extendqisi2
 1430 006e 012B     		cmp	r3, #1
 1431 0070 76D0     		beq	.L171
 868:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_recv(tpcb, NULL);
 1432              		.loc 1 868 0
 1433 0072 B9F1000F 		cmp	r9, #0
 1434 0076 78D1     		bne	.L172
 1435              	.L147:
 872:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_sent(tpcb, NULL);
 1436              		.loc 1 872 0
 1437 0078 002F     		cmp	r7, #0
 1438 007a 7FD1     		bne	.L173
 1439              	.L148:
 875:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_poll(tpcb, NULL, 0);
 1440              		.loc 1 875 0
 1441 007c BAF1000F 		cmp	r10, #0
 1442 0080 40F08180 		bne	.L174
 1443              	.L146:
 881:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_LINGER
 1444              		.loc 1 881 0
 1445 0084 BAF1000F 		cmp	r10, #0
 1446 0088 00F08780 		beq	.L149
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 63


 911:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1447              		.loc 1 911 0
 1448 008c 3046     		mov	r0, r6
 1449 008e FFF7FEFF 		bl	tcp_close
 1450              	.LVL178:
 1451 0092 0546     		mov	r5, r0
 1452              	.LVL179:
 1453              	.L150:
 916:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     close_finished = 1;
 1454              		.loc 1 916 0
 1455 0094 1DB1     		cbz	r5, .L151
 926:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* Closing failed because of memory shortage, try again later. Even for
 1456              		.loc 1 926 0
 1457 0096 B5F1FF3F 		cmp	r5, #-1
 1458 009a 00F08580 		beq	.L175
 1459              	.LVL180:
 1460              	.L151:
 1461              	.LBB15:
 963:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->current_msg->err = err;
 1462              		.loc 1 963 0
 1463 009e 636A     		ldr	r3, [r4, #36]
 1464 00a0 1E68     		ldr	r6, [r3]
 1465              	.LVL181:
 1466 00a2 0C36     		adds	r6, r6, #12
 1467              	.LVL182:
 964:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->current_msg = NULL;
 1468              		.loc 1 964 0
 1469 00a4 1D71     		strb	r5, [r3, #4]
 965:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->state = NETCONN_NONE;
 1470              		.loc 1 965 0
 1471 00a6 0023     		movs	r3, #0
 1472 00a8 6362     		str	r3, [r4, #36]
 966:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (err == ERR_OK) {
 1473              		.loc 1 966 0
 1474 00aa 6370     		strb	r3, [r4, #1]
 967:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (close) {
 1475              		.loc 1 967 0
 1476 00ac CDB9     		cbnz	r5, .L155
 968:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* Set back some callback pointers as conn is going away */
 1477              		.loc 1 968 0
 1478 00ae BAF1000F 		cmp	r10, #0
 1479 00b2 06D0     		beq	.L156
 970:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* Trigger select() in socket layer. Make sure everybody notices activity
 1480              		.loc 1 970 0
 1481 00b4 6360     		str	r3, [r4, #4]
 973:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 1482              		.loc 1 973 0
 1483 00b6 A36A     		ldr	r3, [r4, #40]
 1484 00b8 1BB1     		cbz	r3, .L156
 973:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 1485              		.loc 1 973 0 is_stmt 0 discriminator 1
 1486 00ba 0022     		movs	r2, #0
 1487 00bc 0421     		movs	r1, #4
 1488 00be 2046     		mov	r0, r4
 1489 00c0 9847     		blx	r3
 1490              	.LVL183:
 1491              	.L156:
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 64


 975:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         API_EVENT(conn, NETCONN_EVT_RCVPLUS, 0);
 1492              		.loc 1 975 0 is_stmt 1
 1493 00c2 B9F1000F 		cmp	r9, #0
 1494 00c6 05D0     		beq	.L157
 976:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 1495              		.loc 1 976 0
 1496 00c8 A36A     		ldr	r3, [r4, #40]
 1497 00ca 1BB1     		cbz	r3, .L157
 976:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 1498              		.loc 1 976 0 is_stmt 0 discriminator 1
 1499 00cc 0022     		movs	r2, #0
 1500 00ce 1146     		mov	r1, r2
 1501 00d0 2046     		mov	r0, r4
 1502 00d2 9847     		blx	r3
 1503              	.LVL184:
 1504              	.L157:
 978:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         API_EVENT(conn, NETCONN_EVT_SENDPLUS, 0);
 1505              		.loc 1 978 0 is_stmt 1
 1506 00d4 2FB1     		cbz	r7, .L155
 979:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 1507              		.loc 1 979 0
 1508 00d6 A36A     		ldr	r3, [r4, #40]
 1509 00d8 1BB1     		cbz	r3, .L155
 979:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 1510              		.loc 1 979 0 is_stmt 0 discriminator 1
 1511 00da 0022     		movs	r2, #0
 1512 00dc 0221     		movs	r1, #2
 1513 00de 2046     		mov	r0, r4
 1514 00e0 9847     		blx	r3
 1515              	.LVL185:
 1516              	.L155:
 982:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
 1517              		.loc 1 982 0 is_stmt 1
 1518 00e2 4CB1     		cbz	r4, .L158
 1519              	.LBB16:
 982:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
 1520              		.loc 1 982 0 is_stmt 0 discriminator 1
 1521 00e4 FFF7FEFF 		bl	sys_arch_protect
 1522              	.LVL186:
 1523 00e8 94F90830 		ldrsb	r3, [r4, #8]
 1524 00ec 13F10C0F 		cmn	r3, #12
 1525 00f0 00DB     		blt	.L159
 982:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
 1526              		.loc 1 982 0 discriminator 2
 1527 00f2 2572     		strb	r5, [r4, #8]
 1528              	.L159:
 982:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
 1529              		.loc 1 982 0 discriminator 4
 1530 00f4 FFF7FEFF 		bl	sys_arch_unprotect
 1531              	.LVL187:
 1532              	.L158:
 1533              	.LBE16:
 984:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
 1534              		.loc 1 984 0 is_stmt 1
 1535 00f8 B8F1000F 		cmp	r8, #0
 1536 00fc 72D1     		bne	.L176
 990:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 65


 1537              		.loc 1 990 0
 1538 00fe 0025     		movs	r5, #0
 1539              	.LVL188:
 1540              	.L160:
 1541              	.LBE15:
1009:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 1542              		.loc 1 1009 0
 1543 0100 2846     		mov	r0, r5
 1544 0102 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 1545              	.LVL189:
 1546              	.L166:
 835:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("this is for tcp netconns only", (NETCONNTYPE_GROUP(conn->type) == NETCONN_TCP));
 1547              		.loc 1 835 0 discriminator 1
 1548 0106 404B     		ldr	r3, .L179
 1549 0108 40F24332 		movw	r2, #835
 1550 010c 3F49     		ldr	r1, .L179+4
 1551              	.LVL190:
 1552 010e 4048     		ldr	r0, .L179+8
 1553              	.LVL191:
 1554 0110 FFF7FEFF 		bl	printf
 1555              	.LVL192:
 1556 0114 7AE7     		b	.L137
 1557              	.L167:
 836:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn must be in state NETCONN_CLOSE", (conn->state == NETCONN_CLOSE));
 1558              		.loc 1 836 0 discriminator 1
 1559 0116 3C4B     		ldr	r3, .L179
 1560 0118 4FF45172 		mov	r2, #836
 1561 011c 3D49     		ldr	r1, .L179+12
 1562 011e 3C48     		ldr	r0, .L179+8
 1563 0120 FFF7FEFF 		bl	printf
 1564              	.LVL193:
 1565 0124 77E7     		b	.L138
 1566              	.L168:
 837:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("pcb already closed", (conn->pcb.tcp != NULL));
 1567              		.loc 1 837 0 discriminator 1
 1568 0126 384B     		ldr	r3, .L179
 1569 0128 40F24532 		movw	r2, #837
 1570 012c 3A49     		ldr	r1, .L179+16
 1571 012e 3848     		ldr	r0, .L179+8
 1572 0130 FFF7FEFF 		bl	printf
 1573              	.LVL194:
 1574 0134 73E7     		b	.L139
 1575              	.L169:
 838:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->current_msg != NULL", conn->current_msg != NULL);
 1576              		.loc 1 838 0 discriminator 1
 1577 0136 344B     		ldr	r3, .L179
 1578 0138 40F24632 		movw	r2, #838
 1579 013c 3749     		ldr	r1, .L179+20
 1580 013e 3448     		ldr	r0, .L179+8
 1581 0140 FFF7FEFF 		bl	printf
 1582              	.LVL195:
 1583 0144 6FE7     		b	.L140
 1584              	.L170:
 839:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 1585              		.loc 1 839 0 discriminator 1
 1586 0146 304B     		ldr	r3, .L179
 1587 0148 40F24732 		movw	r2, #839
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 66


 1588 014c 3449     		ldr	r1, .L179+24
 1589 014e 3048     		ldr	r0, .L179+8
 1590 0150 FFF7FEFF 		bl	printf
 1591              	.LVL196:
 1592 0154 6BE7     		b	.L141
 1593              	.LVL197:
 1594              	.L162:
 1595 0156 BA46     		mov	r10, r7
 1596 0158 88E7     		b	.L144
 1597              	.L163:
 1598 015a 4FF0000A 		mov	r10, #0
 1599 015e 85E7     		b	.L144
 1600              	.LVL198:
 1601              	.L171:
 865:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 1602              		.loc 1 865 0
 1603 0160 0021     		movs	r1, #0
 1604 0162 3046     		mov	r0, r6
 1605 0164 FFF7FEFF 		bl	tcp_accept
 1606              	.LVL199:
 1607 0168 8CE7     		b	.L146
 1608              	.L172:
 869:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_accept(tpcb, NULL);
 1609              		.loc 1 869 0
 1610 016a 0021     		movs	r1, #0
 1611 016c 3046     		mov	r0, r6
 1612 016e FFF7FEFF 		bl	tcp_recv
 1613              	.LVL200:
 870:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1614              		.loc 1 870 0
 1615 0172 0021     		movs	r1, #0
 1616 0174 3046     		mov	r0, r6
 1617 0176 FFF7FEFF 		bl	tcp_accept
 1618              	.LVL201:
 1619 017a 7DE7     		b	.L147
 1620              	.L173:
 873:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1621              		.loc 1 873 0
 1622 017c 0021     		movs	r1, #0
 1623 017e 3046     		mov	r0, r6
 1624 0180 FFF7FEFF 		bl	tcp_sent
 1625              	.LVL202:
 1626 0184 7AE7     		b	.L148
 1627              	.L174:
 876:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_err(tpcb, NULL);
 1628              		.loc 1 876 0
 1629 0186 0022     		movs	r2, #0
 1630 0188 1146     		mov	r1, r2
 1631 018a 3046     		mov	r0, r6
 1632 018c FFF7FEFF 		bl	tcp_poll
 1633              	.LVL203:
 877:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1634              		.loc 1 877 0
 1635 0190 0021     		movs	r1, #0
 1636 0192 3046     		mov	r0, r6
 1637 0194 FFF7FEFF 		bl	tcp_err
 1638              	.LVL204:
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 67


 1639 0198 74E7     		b	.L146
 1640              	.L149:
 914:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 1641              		.loc 1 914 0
 1642 019a 3A46     		mov	r2, r7
 1643 019c 4946     		mov	r1, r9
 1644 019e 3046     		mov	r0, r6
 1645 01a0 FFF7FEFF 		bl	tcp_shutdown
 1646              	.LVL205:
 1647 01a4 0546     		mov	r5, r0
 1648              	.LVL206:
 1649 01a6 75E7     		b	.L150
 1650              	.L175:
 947:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_SNDTIMEO || LWIP_SO_LINGER */
 1651              		.loc 1 947 0
 1652 01a8 636A     		ldr	r3, [r4, #36]
 1653 01aa 5B7A     		ldrb	r3, [r3, #9]	@ zero_extendqisi2
 1654 01ac 43B9     		cbnz	r3, .L152
 1655              	.LVL207:
 950:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           /* in this case, we want to RST the connection */
 1656              		.loc 1 950 0
 1657 01ae BAF1000F 		cmp	r10, #0
 1658 01b2 3FF474AF 		beq	.L151
 952:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           err = ERR_OK;
 1659              		.loc 1 952 0
 1660 01b6 3046     		mov	r0, r6
 1661 01b8 FFF7FEFF 		bl	tcp_abort
 1662              	.LVL208:
 953:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
 1663              		.loc 1 953 0
 1664 01bc 0025     		movs	r5, #0
 1665 01be 6EE7     		b	.L151
 1666              	.LVL209:
 1667              	.L152:
 995:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (shut_tx) {
 1668              		.loc 1 995 0
 1669 01c0 337D     		ldrb	r3, [r6, #20]	@ zero_extendqisi2
 1670 01c2 012B     		cmp	r3, #1
 1671 01c4 13D0     		beq	.L177
 1672              	.L154:
 996:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_sent(tpcb, sent_tcp);
 1673              		.loc 1 996 0
 1674 01c6 D7B9     		cbnz	r7, .L178
 1675              	.L161:
1000:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_err(tpcb, err_tcp);
 1676              		.loc 1 1000 0
 1677 01c8 0122     		movs	r2, #1
 1678 01ca 1649     		ldr	r1, .L179+28
 1679 01cc 3046     		mov	r0, r6
 1680 01ce FFF7FEFF 		bl	tcp_poll
 1681              	.LVL210:
1001:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_arg(tpcb, conn);
 1682              		.loc 1 1001 0
 1683 01d2 1549     		ldr	r1, .L179+32
 1684 01d4 3046     		mov	r0, r6
 1685 01d6 FFF7FEFF 		bl	tcp_err
 1686              	.LVL211:
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 68


1002:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* don't restore recv callback: we don't want to receive any more data */
 1687              		.loc 1 1002 0
 1688 01da 2146     		mov	r1, r4
 1689 01dc 3046     		mov	r0, r6
 1690 01de FFF7FEFF 		bl	tcp_arg
 1691              	.LVL212:
1008:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 1692              		.loc 1 1008 0
 1693 01e2 8DE7     		b	.L160
 1694              	.LVL213:
 1695              	.L176:
 1696              	.LBB17:
 988:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1697              		.loc 1 988 0
 1698 01e4 3046     		mov	r0, r6
 1699 01e6 FFF7FEFF 		bl	sys_sem_signal
 1700              	.LVL214:
 990:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 1701              		.loc 1 990 0
 1702 01ea 0025     		movs	r5, #0
 1703 01ec 88E7     		b	.L160
 1704              	.LVL215:
 1705              	.L177:
 1706              	.LBE17:
 995:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (shut_tx) {
 1707              		.loc 1 995 0 discriminator 1
 1708 01ee 064B     		ldr	r3, .L179
 1709 01f0 40F2E332 		movw	r2, #995
 1710 01f4 0D49     		ldr	r1, .L179+36
 1711 01f6 0648     		ldr	r0, .L179+8
 1712 01f8 FFF7FEFF 		bl	printf
 1713              	.LVL216:
 1714 01fc E3E7     		b	.L154
 1715              	.L178:
 997:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1716              		.loc 1 997 0
 1717 01fe 0C49     		ldr	r1, .L179+40
 1718 0200 3046     		mov	r0, r6
 1719 0202 FFF7FEFF 		bl	tcp_sent
 1720              	.LVL217:
 1721 0206 DFE7     		b	.L161
 1722              	.L180:
 1723              		.align	2
 1724              	.L179:
 1725 0208 00000000 		.word	.LC0
 1726 020c 00000000 		.word	.LC17
 1727 0210 54000000 		.word	.LC2
 1728 0214 10000000 		.word	.LC18
 1729 0218 30000000 		.word	.LC19
 1730 021c 54000000 		.word	.LC20
 1731 0220 10000000 		.word	.LC7
 1732 0224 00000000 		.word	poll_tcp
 1733 0228 00000000 		.word	err_tcp
 1734 022c 68000000 		.word	.LC21
 1735 0230 00000000 		.word	sent_tcp
 1736              		.cfi_endproc
 1737              	.LFE171:
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 69


 1739              		.section	.text.poll_tcp,"ax",%progbits
 1740              		.align	1
 1741              		.syntax unified
 1742              		.thumb
 1743              		.thumb_func
 1744              		.fpu fpv5-sp-d16
 1746              	poll_tcp:
 1747              	.LFB161:
 308:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn = (struct netconn *)arg;
 1748              		.loc 1 308 0
 1749              		.cfi_startproc
 1750              		@ args = 0, pretend = 0, frame = 0
 1751              		@ frame_needed = 0, uses_anonymous_args = 0
 1752              	.LVL218:
 1753 0000 10B5     		push	{r4, lr}
 1754              	.LCFI9:
 1755              		.cfi_def_cfa_offset 8
 1756              		.cfi_offset 4, -8
 1757              		.cfi_offset 14, -4
 1758              	.LVL219:
 312:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 1759              		.loc 1 312 0
 1760 0002 0446     		mov	r4, r0
 1761 0004 F0B1     		cbz	r0, .L188
 1762              	.LVL220:
 1763              	.L182:
 314:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     lwip_netconn_do_writemore(conn  WRITE_DELAYED);
 1764              		.loc 1 314 0
 1765 0006 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 1766 0008 012B     		cmp	r3, #1
 1767 000a 23D0     		beq	.L189
 316:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if !LWIP_SO_SNDTIMEO && !LWIP_SO_LINGER
 1768              		.loc 1 316 0
 1769 000c 042B     		cmp	r3, #4
 1770 000e 26D0     		beq	.L190
 1771              	.L184:
 327:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* If the queued byte- or pbuf-count drops below the configured low-water limit,
 1772              		.loc 1 327 0
 1773 0010 237F     		ldrb	r3, [r4, #28]	@ zero_extendqisi2
 1774 0012 13F0100F 		tst	r3, #16
 1775 0016 13D0     		beq	.L186
 330:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (tcp_sndqueuelen(conn->pcb.tcp) < TCP_SNDQUEUELOWAT)) {
 1776              		.loc 1 330 0
 1777 0018 6268     		ldr	r2, [r4, #4]
 1778 001a 8AB1     		cbz	r2, .L186
 330:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (tcp_sndqueuelen(conn->pcb.tcp) < TCP_SNDQUEUELOWAT)) {
 1779              		.loc 1 330 0 is_stmt 0 discriminator 1
 1780 001c B2F86010 		ldrh	r1, [r2, #96]
 1781 0020 B1F5866F 		cmp	r1, #1072
 1782 0024 0CD3     		bcc	.L186
 331:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->flags &= ~NETCONN_FLAG_CHECK_WRITESPACE;
 1783              		.loc 1 331 0 is_stmt 1 discriminator 2
 1784 0026 B2F86220 		ldrh	r2, [r2, #98]
 330:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (tcp_sndqueuelen(conn->pcb.tcp) < TCP_SNDQUEUELOWAT)) {
 1785              		.loc 1 330 0 discriminator 2
 1786 002a 042A     		cmp	r2, #4
 1787 002c 08D8     		bhi	.L186
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 70


 332:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       API_EVENT(conn, NETCONN_EVT_SENDPLUS, 0);
 1788              		.loc 1 332 0
 1789 002e 23F01003 		bic	r3, r3, #16
 1790 0032 2377     		strb	r3, [r4, #28]
 333:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1791              		.loc 1 333 0
 1792 0034 A36A     		ldr	r3, [r4, #40]
 1793 0036 1BB1     		cbz	r3, .L186
 333:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1794              		.loc 1 333 0 is_stmt 0 discriminator 1
 1795 0038 0022     		movs	r2, #0
 1796 003a 0221     		movs	r1, #2
 1797 003c 2046     		mov	r0, r4
 1798 003e 9847     		blx	r3
 1799              	.LVL221:
 1800              	.L186:
 338:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 1801              		.loc 1 338 0 is_stmt 1
 1802 0040 0020     		movs	r0, #0
 1803 0042 10BD     		pop	{r4, pc}
 1804              	.LVL222:
 1805              	.L188:
 312:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 1806              		.loc 1 312 0 discriminator 1
 1807 0044 0B4B     		ldr	r3, .L191
 1808 0046 4FF49C72 		mov	r2, #312
 1809 004a 0B49     		ldr	r1, .L191+4
 1810              	.LVL223:
 1811 004c 0B48     		ldr	r0, .L191+8
 1812              	.LVL224:
 1813 004e FFF7FEFF 		bl	printf
 1814              	.LVL225:
 1815 0052 D8E7     		b	.L182
 1816              	.L189:
 315:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else if (conn->state == NETCONN_CLOSE) {
 1817              		.loc 1 315 0
 1818 0054 0121     		movs	r1, #1
 1819 0056 2046     		mov	r0, r4
 1820 0058 FFF7FEFF 		bl	lwip_netconn_do_writemore
 1821              	.LVL226:
 1822 005c D8E7     		b	.L184
 1823              	.L190:
 318:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg->msg.sd.polls_left--;
 1824              		.loc 1 318 0
 1825 005e 636A     		ldr	r3, [r4, #36]
 1826 0060 1BB1     		cbz	r3, .L185
 318:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg->msg.sd.polls_left--;
 1827              		.loc 1 318 0 is_stmt 0 discriminator 1
 1828 0062 5A7A     		ldrb	r2, [r3, #9]	@ zero_extendqisi2
 1829 0064 0AB1     		cbz	r2, .L185
 319:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1830              		.loc 1 319 0 is_stmt 1
 1831 0066 013A     		subs	r2, r2, #1
 1832 0068 5A72     		strb	r2, [r3, #9]
 1833              	.L185:
 322:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 1834              		.loc 1 322 0
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 71


 1835 006a 0121     		movs	r1, #1
 1836 006c 2046     		mov	r0, r4
 1837 006e FFF7FEFF 		bl	lwip_netconn_do_close_internal
 1838              	.LVL227:
 1839 0072 CDE7     		b	.L184
 1840              	.L192:
 1841              		.align	2
 1842              	.L191:
 1843 0074 00000000 		.word	.LC0
 1844 0078 00000000 		.word	.LC6
 1845 007c 54000000 		.word	.LC2
 1846              		.cfi_endproc
 1847              	.LFE161:
 1849              		.section	.text.sent_tcp,"ax",%progbits
 1850              		.align	1
 1851              		.syntax unified
 1852              		.thumb
 1853              		.thumb_func
 1854              		.fpu fpv5-sp-d16
 1856              	sent_tcp:
 1857              	.LFB162:
 349:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn = (struct netconn *)arg;
 1858              		.loc 1 349 0
 1859              		.cfi_startproc
 1860              		@ args = 0, pretend = 0, frame = 0
 1861              		@ frame_needed = 0, uses_anonymous_args = 0
 1862              	.LVL228:
 1863 0000 38B5     		push	{r3, r4, r5, lr}
 1864              	.LCFI10:
 1865              		.cfi_def_cfa_offset 16
 1866              		.cfi_offset 3, -16
 1867              		.cfi_offset 4, -12
 1868              		.cfi_offset 5, -8
 1869              		.cfi_offset 14, -4
 1870 0002 1546     		mov	r5, r2
 1871              	.LVL229:
 353:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 1872              		.loc 1 353 0
 1873 0004 0446     		mov	r4, r0
 1874 0006 E0B1     		cbz	r0, .L199
 1875              	.LVL230:
 1876              	.L194:
 355:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (conn->state == NETCONN_WRITE) {
 1877              		.loc 1 355 0
 1878 0008 CCB1     		cbz	r4, .L195
 356:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       lwip_netconn_do_writemore(conn  WRITE_DELAYED);
 1879              		.loc 1 356 0
 1880 000a 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 1881 000c 012B     		cmp	r3, #1
 1882 000e 20D0     		beq	.L200
 358:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       lwip_netconn_do_close_internal(conn  WRITE_DELAYED);
 1883              		.loc 1 358 0
 1884 0010 042B     		cmp	r3, #4
 1885 0012 23D0     		beq	.L201
 1886              	.L197:
 364:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (tcp_sndqueuelen(conn->pcb.tcp) < TCP_SNDQUEUELOWAT)) {
 1887              		.loc 1 364 0
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 72


 1888 0014 6368     		ldr	r3, [r4, #4]
 1889 0016 93B1     		cbz	r3, .L195
 364:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (tcp_sndqueuelen(conn->pcb.tcp) < TCP_SNDQUEUELOWAT)) {
 1890              		.loc 1 364 0 is_stmt 0 discriminator 1
 1891 0018 B3F86020 		ldrh	r2, [r3, #96]
 1892 001c B2F5866F 		cmp	r2, #1072
 1893 0020 0DD3     		bcc	.L195
 365:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->flags &= ~NETCONN_FLAG_CHECK_WRITESPACE;
 1894              		.loc 1 365 0 is_stmt 1 discriminator 2
 1895 0022 B3F86230 		ldrh	r3, [r3, #98]
 364:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (tcp_sndqueuelen(conn->pcb.tcp) < TCP_SNDQUEUELOWAT)) {
 1896              		.loc 1 364 0 discriminator 2
 1897 0026 042B     		cmp	r3, #4
 1898 0028 09D8     		bhi	.L195
 366:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       API_EVENT(conn, NETCONN_EVT_SENDPLUS, len);
 1899              		.loc 1 366 0
 1900 002a 237F     		ldrb	r3, [r4, #28]	@ zero_extendqisi2
 1901 002c 23F01003 		bic	r3, r3, #16
 1902 0030 2377     		strb	r3, [r4, #28]
 367:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1903              		.loc 1 367 0
 1904 0032 A36A     		ldr	r3, [r4, #40]
 1905 0034 1BB1     		cbz	r3, .L195
 367:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1906              		.loc 1 367 0 is_stmt 0 discriminator 1
 1907 0036 2A46     		mov	r2, r5
 1908 0038 0221     		movs	r1, #2
 1909 003a 2046     		mov	r0, r4
 1910 003c 9847     		blx	r3
 1911              	.LVL231:
 1912              	.L195:
 372:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 1913              		.loc 1 372 0 is_stmt 1
 1914 003e 0020     		movs	r0, #0
 1915 0040 38BD     		pop	{r3, r4, r5, pc}
 1916              	.LVL232:
 1917              	.L199:
 353:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 1918              		.loc 1 353 0 discriminator 1
 1919 0042 094B     		ldr	r3, .L202
 1920 0044 40F26112 		movw	r2, #353
 1921              	.LVL233:
 1922 0048 0849     		ldr	r1, .L202+4
 1923              	.LVL234:
 1924 004a 0948     		ldr	r0, .L202+8
 1925              	.LVL235:
 1926 004c FFF7FEFF 		bl	printf
 1927              	.LVL236:
 1928 0050 DAE7     		b	.L194
 1929              	.L200:
 357:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else if (conn->state == NETCONN_CLOSE) {
 1930              		.loc 1 357 0
 1931 0052 0121     		movs	r1, #1
 1932 0054 2046     		mov	r0, r4
 1933 0056 FFF7FEFF 		bl	lwip_netconn_do_writemore
 1934              	.LVL237:
 1935 005a DBE7     		b	.L197
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 73


 1936              	.L201:
 359:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1937              		.loc 1 359 0
 1938 005c 0121     		movs	r1, #1
 1939 005e 2046     		mov	r0, r4
 1940 0060 FFF7FEFF 		bl	lwip_netconn_do_close_internal
 1941              	.LVL238:
 1942 0064 D6E7     		b	.L197
 1943              	.L203:
 1944 0066 00BF     		.align	2
 1945              	.L202:
 1946 0068 00000000 		.word	.LC0
 1947 006c 00000000 		.word	.LC6
 1948 0070 54000000 		.word	.LC2
 1949              		.cfi_endproc
 1950              	.LFE162:
 1952              		.section	.text.recv_tcp,"ax",%progbits
 1953              		.align	1
 1954              		.syntax unified
 1955              		.thumb
 1956              		.thumb_func
 1957              		.fpu fpv5-sp-d16
 1959              	recv_tcp:
 1960              	.LFB160:
 244:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn;
 1961              		.loc 1 244 0
 1962              		.cfi_startproc
 1963              		@ args = 0, pretend = 0, frame = 0
 1964              		@ frame_needed = 0, uses_anonymous_args = 0
 1965              	.LVL239:
 1966 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1967              	.LCFI11:
 1968              		.cfi_def_cfa_offset 24
 1969              		.cfi_offset 4, -24
 1970              		.cfi_offset 5, -20
 1971              		.cfi_offset 6, -16
 1972              		.cfi_offset 7, -12
 1973              		.cfi_offset 8, -8
 1974              		.cfi_offset 14, -4
 1975 0004 0446     		mov	r4, r0
 1976 0006 1546     		mov	r5, r2
 1977 0008 9846     		mov	r8, r3
 249:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("recv_tcp must have an argument", arg != NULL);
 1978              		.loc 1 249 0
 1979 000a 0F46     		mov	r7, r1
 1980 000c E9B1     		cbz	r1, .L218
 1981              	.LVL240:
 1982              	.L205:
 250:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn = (struct netconn *)arg;
 1983              		.loc 1 250 0
 1984 000e 1CB3     		cbz	r4, .L219
 1985              	.L206:
 1986              	.LVL241:
 253:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_VAL;
 1987              		.loc 1 253 0
 1988 0010 002C     		cmp	r4, #0
 1989 0012 4AD0     		beq	.L213
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 74


 256:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 1990              		.loc 1 256 0
 1991 0014 6368     		ldr	r3, [r4, #4]
 1992 0016 BB42     		cmp	r3, r7
 1993 0018 06D0     		beq	.L208
 256:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 1994              		.loc 1 256 0 is_stmt 0 discriminator 1
 1995 001a 284B     		ldr	r3, .L221
 1996 001c 4FF48072 		mov	r2, #256
 1997 0020 2749     		ldr	r1, .L221+4
 1998 0022 2848     		ldr	r0, .L221+8
 1999 0024 FFF7FEFF 		bl	printf
 2000              	.LVL242:
 2001              	.L208:
 258:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* recvmbox already deleted */
 2002              		.loc 1 258 0 is_stmt 1
 2003 0028 04F11006 		add	r6, r4, #16
 2004 002c 3046     		mov	r0, r6
 2005 002e FFF7FEFF 		bl	sys_mbox_valid
 2006              	.LVL243:
 2007 0032 C0B9     		cbnz	r0, .L209
 260:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_recved(pcb, p->tot_len);
 2008              		.loc 1 260 0
 2009 0034 002D     		cmp	r5, #0
 2010 0036 3BD0     		beq	.L214
 261:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       pbuf_free(p);
 2011              		.loc 1 261 0
 2012 0038 2989     		ldrh	r1, [r5, #8]
 2013 003a 3846     		mov	r0, r7
 2014 003c FFF7FEFF 		bl	tcp_recved
 2015              	.LVL244:
 262:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 2016              		.loc 1 262 0
 2017 0040 2846     		mov	r0, r5
 2018 0042 FFF7FEFF 		bl	pbuf_free
 2019              	.LVL245:
 264:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2020              		.loc 1 264 0
 2021 0046 0025     		movs	r5, #0
 2022              	.LVL246:
 2023 0048 1EE0     		b	.L207
 2024              	.LVL247:
 2025              	.L218:
 249:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("recv_tcp must have an argument", arg != NULL);
 2026              		.loc 1 249 0 discriminator 1
 2027 004a 1C4B     		ldr	r3, .L221
 2028              	.LVL248:
 2029 004c F922     		movs	r2, #249
 2030              	.LVL249:
 2031 004e 1E49     		ldr	r1, .L221+12
 2032              	.LVL250:
 2033 0050 1C48     		ldr	r0, .L221+8
 2034              	.LVL251:
 2035 0052 FFF7FEFF 		bl	printf
 2036              	.LVL252:
 2037 0056 DAE7     		b	.L205
 2038              	.L219:
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 75


 250:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn = (struct netconn *)arg;
 2039              		.loc 1 250 0 discriminator 1
 2040 0058 184B     		ldr	r3, .L221
 2041 005a FA22     		movs	r2, #250
 2042 005c 1B49     		ldr	r1, .L221+16
 2043 005e 1948     		ldr	r0, .L221+8
 2044 0060 FFF7FEFF 		bl	printf
 2045              	.LVL253:
 2046 0064 D4E7     		b	.L206
 2047              	.LVL254:
 2048              	.L209:
 271:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     NETCONN_SET_SAFE_ERR(conn, err);
 2049              		.loc 1 271 0
 2050 0066 B8F1000F 		cmp	r8, #0
 2051 006a 10D1     		bne	.L220
 2052              	.L210:
 275:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     len = p->tot_len;
 2053              		.loc 1 275 0
 2054 006c DDB1     		cbz	r5, .L215
 276:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 2055              		.loc 1 276 0
 2056 006e 2F89     		ldrh	r7, [r5, #8]
 2057              	.LVL255:
 2058              	.L212:
 281:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* don't deallocate p: it is presented to us later again from tcp_fasttmr! */
 2059              		.loc 1 281 0
 2060 0070 2946     		mov	r1, r5
 2061 0072 3046     		mov	r0, r6
 2062 0074 FFF7FEFF 		bl	sys_mbox_trypost
 2063              	.LVL256:
 2064 0078 0546     		mov	r5, r0
 2065              	.LVL257:
 2066 007a D8B9     		cbnz	r0, .L216
 289:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2067              		.loc 1 289 0
 2068 007c A36A     		ldr	r3, [r4, #40]
 2069 007e 1BB1     		cbz	r3, .L207
 289:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2070              		.loc 1 289 0 is_stmt 0 discriminator 1
 2071 0080 3A46     		mov	r2, r7
 2072 0082 0021     		movs	r1, #0
 2073 0084 2046     		mov	r0, r4
 2074 0086 9847     		blx	r3
 2075              	.LVL258:
 2076              	.L207:
 293:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 2077              		.loc 1 293 0 is_stmt 1
 2078 0088 2846     		mov	r0, r5
 2079 008a BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 2080              	.LVL259:
 2081              	.L220:
 2082              	.LBB18:
 272:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2083              		.loc 1 272 0 discriminator 1
 2084 008e FFF7FEFF 		bl	sys_arch_protect
 2085              	.LVL260:
 2086 0092 94F90830 		ldrsb	r3, [r4, #8]
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 76


 2087 0096 13F10C0F 		cmn	r3, #12
 2088 009a 01DB     		blt	.L211
 272:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2089              		.loc 1 272 0 is_stmt 0 discriminator 2
 2090 009c 84F80880 		strb	r8, [r4, #8]
 2091              	.L211:
 272:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2092              		.loc 1 272 0 discriminator 4
 2093 00a0 FFF7FEFF 		bl	sys_arch_unprotect
 2094              	.LVL261:
 2095 00a4 E2E7     		b	.L210
 2096              	.L215:
 2097              	.LBE18:
 278:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2098              		.loc 1 278 0 is_stmt 1
 2099 00a6 0027     		movs	r7, #0
 2100              	.LVL262:
 2101 00a8 E2E7     		b	.L212
 2102              	.LVL263:
 2103              	.L213:
 254:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2104              		.loc 1 254 0
 2105 00aa 6FF00505 		mvn	r5, #5
 2106              	.LVL264:
 2107 00ae EBE7     		b	.L207
 2108              	.LVL265:
 2109              	.L214:
 264:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2110              		.loc 1 264 0
 2111 00b0 0025     		movs	r5, #0
 2112              	.LVL266:
 2113 00b2 E9E7     		b	.L207
 2114              	.LVL267:
 2115              	.L216:
 283:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 2116              		.loc 1 283 0
 2117 00b4 4FF0FF35 		mov	r5, #-1
 2118 00b8 E6E7     		b	.L207
 2119              	.L222:
 2120 00ba 00BF     		.align	2
 2121              	.L221:
 2122 00bc 00000000 		.word	.LC0
 2123 00c0 44000000 		.word	.LC24
 2124 00c4 54000000 		.word	.LC2
 2125 00c8 00000000 		.word	.LC22
 2126 00cc 24000000 		.word	.LC23
 2127              		.cfi_endproc
 2128              	.LFE160:
 2130              		.section	.text.lwip_netconn_do_newconn,"ax",%progbits
 2131              		.align	1
 2132              		.global	lwip_netconn_do_newconn
 2133              		.syntax unified
 2134              		.thumb
 2135              		.thumb_func
 2136              		.fpu fpv5-sp-d16
 2138              	lwip_netconn_do_newconn:
 2139              	.LFB167:
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 77


 624:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
 2140              		.loc 1 624 0
 2141              		.cfi_startproc
 2142              		@ args = 0, pretend = 0, frame = 0
 2143              		@ frame_needed = 0, uses_anonymous_args = 0
 2144              	.LVL268:
 2145 0000 10B5     		push	{r4, lr}
 2146              	.LCFI12:
 2147              		.cfi_def_cfa_offset 8
 2148              		.cfi_offset 4, -8
 2149              		.cfi_offset 14, -4
 2150 0002 0446     		mov	r4, r0
 2151              	.LVL269:
 627:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (msg->conn->pcb.tcp == NULL) {
 2152              		.loc 1 627 0
 2153 0004 0023     		movs	r3, #0
 2154 0006 0371     		strb	r3, [r0, #4]
 628:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     pcb_new(msg);
 2155              		.loc 1 628 0
 2156 0008 0368     		ldr	r3, [r0]
 2157 000a 5B68     		ldr	r3, [r3, #4]
 2158 000c 7BB1     		cbz	r3, .L228
 2159              	.LVL270:
 2160              	.L224:
 635:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 2161              		.loc 1 635 0
 2162 000e 2368     		ldr	r3, [r4]
 2163 0010 63B1     		cbz	r3, .L223
 2164              	.LBB19:
 635:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 2165              		.loc 1 635 0 is_stmt 0 discriminator 1
 2166 0012 FFF7FEFF 		bl	sys_arch_protect
 2167              	.LVL271:
 2168 0016 2368     		ldr	r3, [r4]
 2169 0018 93F90820 		ldrsb	r2, [r3, #8]
 2170 001c 12F10C0F 		cmn	r2, #12
 2171 0020 02DB     		blt	.L226
 635:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 2172              		.loc 1 635 0 discriminator 2
 2173 0022 94F90420 		ldrsb	r2, [r4, #4]
 2174 0026 1A72     		strb	r2, [r3, #8]
 2175              	.L226:
 635:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 2176              		.loc 1 635 0 discriminator 4
 2177 0028 FFF7FEFF 		bl	sys_arch_unprotect
 2178              	.LVL272:
 2179              	.L223:
 2180              	.LBE19:
 636:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 2181              		.loc 1 636 0 is_stmt 1
 2182 002c 10BD     		pop	{r4, pc}
 2183              	.LVL273:
 2184              	.L228:
 629:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2185              		.loc 1 629 0
 2186 002e FFF7FEFF 		bl	pcb_new
 2187              	.LVL274:
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 78


 2188 0032 ECE7     		b	.L224
 2189              		.cfi_endproc
 2190              	.LFE167:
 2192              		.section	.text.netconn_alloc,"ax",%progbits
 2193              		.align	1
 2194              		.global	netconn_alloc
 2195              		.syntax unified
 2196              		.thumb
 2197              		.thumb_func
 2198              		.fpu fpv5-sp-d16
 2200              	netconn_alloc:
 2201              	.LFB168:
 649:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn;
 2202              		.loc 1 649 0
 2203              		.cfi_startproc
 2204              		@ args = 0, pretend = 0, frame = 0
 2205              		@ frame_needed = 0, uses_anonymous_args = 0
 2206              	.LVL275:
 2207 0000 70B5     		push	{r4, r5, r6, lr}
 2208              	.LCFI13:
 2209              		.cfi_def_cfa_offset 16
 2210              		.cfi_offset 4, -16
 2211              		.cfi_offset 5, -12
 2212              		.cfi_offset 6, -8
 2213              		.cfi_offset 14, -4
 2214 0002 0546     		mov	r5, r0
 2215 0004 0E46     		mov	r6, r1
 653:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (conn == NULL) {
 2216              		.loc 1 653 0
 2217 0006 0720     		movs	r0, #7
 2218              	.LVL276:
 2219 0008 FFF7FEFF 		bl	memp_malloc
 2220              	.LVL277:
 654:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return NULL;
 2221              		.loc 1 654 0
 2222 000c 0446     		mov	r4, r0
 2223 000e 18B3     		cbz	r0, .L229
 658:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->type = t;
 2224              		.loc 1 658 0
 2225 0010 0023     		movs	r3, #0
 2226 0012 0372     		strb	r3, [r0, #8]
 659:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->pcb.tcp = NULL;
 2227              		.loc 1 659 0
 2228 0014 0570     		strb	r5, [r0]
 660:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 2229              		.loc 1 660 0
 2230 0016 4360     		str	r3, [r0, #4]
 663:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
 2231              		.loc 1 663 0
 2232 0018 05F0F005 		and	r5, r5, #240
 2233 001c 102D     		cmp	r5, #16
 2234 001e 01D0     		beq	.L232
 2235 0020 202D     		cmp	r5, #32
 2236 0022 1BD1     		bne	.L236
 2237              	.L232:
 2238              	.LVL278:
 684:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     goto free_and_return;
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 79


 2239              		.loc 1 684 0
 2240 0024 04F11005 		add	r5, r4, #16
 2241 0028 0621     		movs	r1, #6
 2242 002a 2846     		mov	r0, r5
 2243              	.LVL279:
 2244 002c FFF7FEFF 		bl	sys_mbox_new
 2245              	.LVL280:
 2246 0030 D8B9     		cbnz	r0, .L233
 688:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_free(&conn->recvmbox);
 2247              		.loc 1 688 0
 2248 0032 0021     		movs	r1, #0
 2249 0034 04F10C00 		add	r0, r4, #12
 2250 0038 FFF7FEFF 		bl	sys_sem_new
 2251              	.LVL281:
 2252 003c D8B9     		cbnz	r0, .L237
 695:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
 2253              		.loc 1 695 0
 2254 003e 04F11400 		add	r0, r4, #20
 2255 0042 FFF7FEFF 		bl	sys_mbox_set_invalid
 2256              	.LVL282:
 697:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SOCKET
 2257              		.loc 1 697 0
 2258 0046 0023     		movs	r3, #0
 2259 0048 6370     		strb	r3, [r4, #1]
 700:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SOCKET */
 2260              		.loc 1 700 0
 2261 004a 4FF0FF32 		mov	r2, #-1
 2262 004e A261     		str	r2, [r4, #24]
 702:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 2263              		.loc 1 702 0
 2264 0050 A662     		str	r6, [r4, #40]
 704:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->write_offset = 0;
 2265              		.loc 1 704 0
 2266 0052 6362     		str	r3, [r4, #36]
 705:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 2267              		.loc 1 705 0
 2268 0054 2362     		str	r3, [r4, #32]
 720:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return conn;
 2269              		.loc 1 720 0
 2270 0056 2377     		strb	r3, [r4, #28]
 2271              	.LVL283:
 2272              	.L229:
 725:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 2273              		.loc 1 725 0
 2274 0058 2046     		mov	r0, r4
 2275 005a 70BD     		pop	{r4, r5, r6, pc}
 2276              	.LVL284:
 2277              	.L236:
 680:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     goto free_and_return;
 2278              		.loc 1 680 0
 2279 005c 084B     		ldr	r3, .L238
 2280 005e 4FF42A72 		mov	r2, #680
 2281 0062 0849     		ldr	r1, .L238+4
 2282 0064 0848     		ldr	r0, .L238+8
 2283              	.LVL285:
 2284 0066 FFF7FEFF 		bl	printf
 2285              	.LVL286:
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 80


 2286              	.L233:
 723:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return NULL;
 2287              		.loc 1 723 0
 2288 006a 2146     		mov	r1, r4
 2289 006c 0720     		movs	r0, #7
 2290 006e FFF7FEFF 		bl	memp_free
 2291              	.LVL287:
 724:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 2292              		.loc 1 724 0
 2293 0072 0024     		movs	r4, #0
 2294              	.LVL288:
 2295 0074 F0E7     		b	.L229
 2296              	.LVL289:
 2297              	.L237:
 689:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     goto free_and_return;
 2298              		.loc 1 689 0
 2299 0076 2846     		mov	r0, r5
 2300 0078 FFF7FEFF 		bl	sys_mbox_free
 2301              	.LVL290:
 690:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2302              		.loc 1 690 0
 2303 007c F5E7     		b	.L233
 2304              	.L239:
 2305 007e 00BF     		.align	2
 2306              	.L238:
 2307 0080 00000000 		.word	.LC0
 2308 0084 00000000 		.word	.LC25
 2309 0088 54000000 		.word	.LC2
 2310              		.cfi_endproc
 2311              	.LFE168:
 2313              		.section	.text.netconn_free,"ax",%progbits
 2314              		.align	1
 2315              		.global	netconn_free
 2316              		.syntax unified
 2317              		.thumb
 2318              		.thumb_func
 2319              		.fpu fpv5-sp-d16
 2321              	netconn_free:
 2322              	.LFB169:
 735:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("PCB must be deallocated outside this function", conn->pcb.tcp == NULL);
 2323              		.loc 1 735 0
 2324              		.cfi_startproc
 2325              		@ args = 0, pretend = 0, frame = 0
 2326              		@ frame_needed = 0, uses_anonymous_args = 0
 2327              	.LVL291:
 2328 0000 38B5     		push	{r3, r4, r5, lr}
 2329              	.LCFI14:
 2330              		.cfi_def_cfa_offset 16
 2331              		.cfi_offset 3, -16
 2332              		.cfi_offset 4, -12
 2333              		.cfi_offset 5, -8
 2334              		.cfi_offset 14, -4
 2335 0002 0446     		mov	r4, r0
 736:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("recvmbox must be deallocated before calling this function",
 2336              		.loc 1 736 0
 2337 0004 4368     		ldr	r3, [r0, #4]
 2338 0006 33B1     		cbz	r3, .L241
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 81


 736:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("recvmbox must be deallocated before calling this function",
 2339              		.loc 1 736 0 is_stmt 0 discriminator 1
 2340 0008 164B     		ldr	r3, .L247
 2341 000a 4FF43872 		mov	r2, #736
 2342 000e 1649     		ldr	r1, .L247+4
 2343 0010 1648     		ldr	r0, .L247+8
 2344              	.LVL292:
 2345 0012 FFF7FEFF 		bl	printf
 2346              	.LVL293:
 2347              	.L241:
 737:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     !sys_mbox_valid(&conn->recvmbox));
 2348              		.loc 1 737 0 is_stmt 1
 2349 0016 04F11000 		add	r0, r4, #16
 2350 001a FFF7FEFF 		bl	sys_mbox_valid
 2351              	.LVL294:
 2352 001e 88B9     		cbnz	r0, .L245
 2353              	.L242:
 740:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     !sys_mbox_valid(&conn->acceptmbox));
 2354              		.loc 1 740 0
 2355 0020 04F11400 		add	r0, r4, #20
 2356 0024 FFF7FEFF 		bl	sys_mbox_valid
 2357              	.LVL295:
 2358 0028 A0B9     		cbnz	r0, .L246
 2359              	.L243:
 745:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   sys_sem_set_invalid(&conn->op_completed);
 2360              		.loc 1 745 0
 2361 002a 04F10C05 		add	r5, r4, #12
 2362 002e 2846     		mov	r0, r5
 2363 0030 FFF7FEFF 		bl	sys_sem_free
 2364              	.LVL296:
 746:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
 2365              		.loc 1 746 0
 2366 0034 2846     		mov	r0, r5
 2367 0036 FFF7FEFF 		bl	sys_sem_set_invalid
 2368              	.LVL297:
 749:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 2369              		.loc 1 749 0
 2370 003a 2146     		mov	r1, r4
 2371 003c 0720     		movs	r0, #7
 2372 003e FFF7FEFF 		bl	memp_free
 2373              	.LVL298:
 750:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 2374              		.loc 1 750 0
 2375 0042 38BD     		pop	{r3, r4, r5, pc}
 2376              	.LVL299:
 2377              	.L245:
 737:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     !sys_mbox_valid(&conn->recvmbox));
 2378              		.loc 1 737 0 discriminator 1
 2379 0044 074B     		ldr	r3, .L247
 2380 0046 40F2E222 		movw	r2, #738
 2381 004a 0949     		ldr	r1, .L247+12
 2382 004c 0748     		ldr	r0, .L247+8
 2383 004e FFF7FEFF 		bl	printf
 2384              	.LVL300:
 2385 0052 E5E7     		b	.L242
 2386              	.L246:
 740:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     !sys_mbox_valid(&conn->acceptmbox));
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 82


 2387              		.loc 1 740 0 discriminator 1
 2388 0054 034B     		ldr	r3, .L247
 2389 0056 40F2E522 		movw	r2, #741
 2390 005a 0649     		ldr	r1, .L247+16
 2391 005c 0348     		ldr	r0, .L247+8
 2392 005e FFF7FEFF 		bl	printf
 2393              	.LVL301:
 2394 0062 E2E7     		b	.L243
 2395              	.L248:
 2396              		.align	2
 2397              	.L247:
 2398 0064 00000000 		.word	.LC0
 2399 0068 00000000 		.word	.LC26
 2400 006c 54000000 		.word	.LC2
 2401 0070 30000000 		.word	.LC27
 2402 0074 6C000000 		.word	.LC28
 2403              		.cfi_endproc
 2404              	.LFE169:
 2406              		.section	.text.netconn_drain,"ax",%progbits
 2407              		.align	1
 2408              		.syntax unified
 2409              		.thumb
 2410              		.thumb_func
 2411              		.fpu fpv5-sp-d16
 2413              	netconn_drain:
 2414              	.LFB170:
 762:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   void *mem;
 2415              		.loc 1 762 0
 2416              		.cfi_startproc
 2417              		@ args = 0, pretend = 0, frame = 8
 2418              		@ frame_needed = 0, uses_anonymous_args = 0
 2419              	.LVL302:
 2420 0000 70B5     		push	{r4, r5, r6, lr}
 2421              	.LCFI15:
 2422              		.cfi_def_cfa_offset 16
 2423              		.cfi_offset 4, -16
 2424              		.cfi_offset 5, -12
 2425              		.cfi_offset 6, -8
 2426              		.cfi_offset 14, -4
 2427 0002 82B0     		sub	sp, sp, #8
 2428              	.LCFI16:
 2429              		.cfi_def_cfa_offset 24
 2430 0004 0446     		mov	r4, r0
 771:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     while (sys_mbox_tryfetch(&conn->recvmbox, &mem) != SYS_MBOX_EMPTY) {
 2431              		.loc 1 771 0
 2432 0006 00F11005 		add	r5, r0, #16
 2433 000a 2846     		mov	r0, r5
 2434              	.LVL303:
 2435 000c FFF7FEFF 		bl	sys_mbox_valid
 2436              	.LVL304:
 2437 0010 00BB     		cbnz	r0, .L250
 2438              	.L251:
 795:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     while (sys_mbox_tryfetch(&conn->acceptmbox, &mem) != SYS_MBOX_EMPTY) {
 2439              		.loc 1 795 0
 2440 0012 1434     		adds	r4, r4, #20
 2441              	.LVL305:
 2442 0014 2046     		mov	r0, r4
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 83


 2443 0016 FFF7FEFF 		bl	sys_mbox_valid
 2444              	.LVL306:
 2445 001a 0028     		cmp	r0, #0
 2446 001c 3FD0     		beq	.L249
 2447              	.L258:
 796:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (mem != &netconn_aborted) {
 2448              		.loc 1 796 0
 2449 001e 01A9     		add	r1, sp, #4
 2450 0020 2046     		mov	r0, r4
 2451 0022 FFF7FEFF 		bl	sys_arch_mbox_tryfetch
 2452              	.LVL307:
 2453 0026 B0F1FF3F 		cmp	r0, #-1
 2454 002a 32D0     		beq	.L262
 797:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         struct netconn *newconn = (struct netconn *)mem;
 2455              		.loc 1 797 0
 2456 002c 019D     		ldr	r5, [sp, #4]
 2457 002e 1D4B     		ldr	r3, .L264
 2458 0030 9D42     		cmp	r5, r3
 2459 0032 F4D0     		beq	.L258
 2460              	.LVL308:
 2461              	.LBB20:
 802:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (newconn->pcb.tcp != NULL) {
 2462              		.loc 1 802 0
 2463 0034 2846     		mov	r0, r5
 2464 0036 FFF7E3FF 		bl	netconn_drain
 2465              	.LVL309:
 803:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           tcp_abort(newconn->pcb.tcp);
 2466              		.loc 1 803 0
 2467 003a 6868     		ldr	r0, [r5, #4]
 2468 003c 18B1     		cbz	r0, .L259
 804:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           newconn->pcb.tcp = NULL;
 2469              		.loc 1 804 0
 2470 003e FFF7FEFF 		bl	tcp_abort
 2471              	.LVL310:
 805:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
 2472              		.loc 1 805 0
 2473 0042 0023     		movs	r3, #0
 2474 0044 6B60     		str	r3, [r5, #4]
 2475              	.L259:
 807:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 2476              		.loc 1 807 0
 2477 0046 2846     		mov	r0, r5
 2478 0048 FFF7FEFF 		bl	netconn_free
 2479              	.LVL311:
 2480 004c E7E7     		b	.L258
 2481              	.LVL312:
 2482              	.L252:
 2483              	.LBE20:
 786:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 2484              		.loc 1 786 0
 2485 004e 0198     		ldr	r0, [sp, #4]
 2486 0050 FFF7FEFF 		bl	netbuf_delete
 2487              	.LVL313:
 2488              	.L250:
 772:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 2489              		.loc 1 772 0
 2490 0054 01A9     		add	r1, sp, #4
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 84


 2491 0056 2846     		mov	r0, r5
 2492 0058 FFF7FEFF 		bl	sys_arch_mbox_tryfetch
 2493              	.LVL314:
 2494 005c B0F1FF3F 		cmp	r0, #-1
 2495 0060 10D0     		beq	.L263
 774:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (mem != NULL) {
 2496              		.loc 1 774 0
 2497 0062 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 2498 0064 03F0F003 		and	r3, r3, #240
 2499 0068 102B     		cmp	r3, #16
 2500 006a F0D1     		bne	.L252
 775:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           p = (struct pbuf*)mem;
 2501              		.loc 1 775 0
 2502 006c 019E     		ldr	r6, [sp, #4]
 2503 006e 002E     		cmp	r6, #0
 2504 0070 F0D0     		beq	.L250
 2505              	.LVL315:
 778:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             tcp_recved(conn->pcb.tcp, p->tot_len);
 2506              		.loc 1 778 0
 2507 0072 6068     		ldr	r0, [r4, #4]
 2508 0074 10B1     		cbz	r0, .L254
 779:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           }
 2509              		.loc 1 779 0
 2510 0076 3189     		ldrh	r1, [r6, #8]
 2511 0078 FFF7FEFF 		bl	tcp_recved
 2512              	.LVL316:
 2513              	.L254:
 781:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
 2514              		.loc 1 781 0
 2515 007c 3046     		mov	r0, r6
 2516 007e FFF7FEFF 		bl	pbuf_free
 2517              	.LVL317:
 2518 0082 E7E7     		b	.L250
 2519              	.LVL318:
 2520              	.L263:
 789:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_set_invalid(&conn->recvmbox);
 2521              		.loc 1 789 0
 2522 0084 2846     		mov	r0, r5
 2523 0086 FFF7FEFF 		bl	sys_mbox_free
 2524              	.LVL319:
 790:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2525              		.loc 1 790 0
 2526 008a 2846     		mov	r0, r5
 2527 008c FFF7FEFF 		bl	sys_mbox_set_invalid
 2528              	.LVL320:
 2529 0090 BFE7     		b	.L251
 2530              	.LVL321:
 2531              	.L262:
 810:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_set_invalid(&conn->acceptmbox);
 2532              		.loc 1 810 0
 2533 0092 2046     		mov	r0, r4
 2534 0094 FFF7FEFF 		bl	sys_mbox_free
 2535              	.LVL322:
 811:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2536              		.loc 1 811 0
 2537 0098 2046     		mov	r0, r4
 2538 009a FFF7FEFF 		bl	sys_mbox_set_invalid
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 85


 2539              	.LVL323:
 2540              	.L249:
 814:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 2541              		.loc 1 814 0
 2542 009e 02B0     		add	sp, sp, #8
 2543              	.LCFI17:
 2544              		.cfi_def_cfa_offset 16
 2545              		@ sp needed
 2546 00a0 70BD     		pop	{r4, r5, r6, pc}
 2547              	.LVL324:
 2548              	.L265:
 2549 00a2 00BF     		.align	2
 2550              	.L264:
 2551 00a4 00000000 		.word	netconn_aborted
 2552              		.cfi_endproc
 2553              	.LFE170:
 2555              		.section	.text.accept_function,"ax",%progbits
 2556              		.align	1
 2557              		.syntax unified
 2558              		.thumb
 2559              		.thumb_func
 2560              		.fpu fpv5-sp-d16
 2562              	accept_function:
 2563              	.LFB165:
 476:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *newconn;
 2564              		.loc 1 476 0
 2565              		.cfi_startproc
 2566              		@ args = 0, pretend = 0, frame = 0
 2567              		@ frame_needed = 0, uses_anonymous_args = 0
 2568              	.LVL325:
 2569 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 2570              	.LCFI18:
 2571              		.cfi_def_cfa_offset 24
 2572              		.cfi_offset 4, -24
 2573              		.cfi_offset 5, -20
 2574              		.cfi_offset 6, -16
 2575              		.cfi_offset 7, -12
 2576              		.cfi_offset 8, -8
 2577              		.cfi_offset 14, -4
 2578              	.LVL326:
 480:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_VAL;
 2579              		.loc 1 480 0
 2580 0004 0028     		cmp	r0, #0
 2581 0006 6AD0     		beq	.L271
 2582 0008 0446     		mov	r4, r0
 2583 000a 1646     		mov	r6, r2
 2584 000c 0D46     		mov	r5, r1
 483:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     LWIP_DEBUGF(API_MSG_DEBUG, ("accept_function: acceptmbox already deleted\n"));
 2585              		.loc 1 483 0
 2586 000e 00F11407 		add	r7, r0, #20
 2587 0012 3846     		mov	r0, r7
 2588              	.LVL327:
 2589 0014 FFF7FEFF 		bl	sys_mbox_valid
 2590              	.LVL328:
 2591 0018 0028     		cmp	r0, #0
 2592 001a 63D0     		beq	.L272
 488:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* out-of-pcbs during connect: pass on this error to the application */
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 86


 2593              		.loc 1 488 0
 2594 001c CDB1     		cbz	r5, .L278
 501:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (newconn == NULL) {
 2595              		.loc 1 501 0
 2596 001e A16A     		ldr	r1, [r4, #40]
 2597 0020 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
 2598 0022 FFF7FEFF 		bl	netconn_alloc
 2599              	.LVL329:
 502:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* outof netconns: pass on this error to the application */
 2600              		.loc 1 502 0
 2601 0026 8046     		mov	r8, r0
 2602 0028 18B3     		cbz	r0, .L279
 510:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   setup_tcp(newconn);
 2603              		.loc 1 510 0
 2604 002a 4560     		str	r5, [r0, #4]
 511:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* no protection: when creating the pcb, the netconn is not yet known
 2605              		.loc 1 511 0
 2606 002c FFF7FEFF 		bl	setup_tcp
 2607              	.LVL330:
 514:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 2608              		.loc 1 514 0
 2609 0030 88F80860 		strb	r6, [r8, #8]
 519:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* When returning != ERR_OK, the pcb is aborted in tcp_process(),
 2610              		.loc 1 519 0
 2611 0034 4146     		mov	r1, r8
 2612 0036 3846     		mov	r0, r7
 2613 0038 FFF7FEFF 		bl	sys_mbox_trypost
 2614              	.LVL331:
 2615 003c 0546     		mov	r5, r0
 2616              	.LVL332:
 2617 003e 30BB     		cbnz	r0, .L280
 538:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2618              		.loc 1 538 0
 2619 0040 A36A     		ldr	r3, [r4, #40]
 2620 0042 1BB1     		cbz	r3, .L267
 538:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2621              		.loc 1 538 0 is_stmt 0 discriminator 1
 2622 0044 0022     		movs	r2, #0
 2623 0046 1146     		mov	r1, r2
 2624 0048 2046     		mov	r0, r4
 2625 004a 9847     		blx	r3
 2626              	.LVL333:
 2627              	.L267:
 542:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 2628              		.loc 1 542 0 is_stmt 1
 2629 004c 2846     		mov	r0, r5
 2630 004e BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 2631              	.LVL334:
 2632              	.L278:
 490:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* Register event with callback */
 2633              		.loc 1 490 0
 2634 0052 2C49     		ldr	r1, .L281
 2635 0054 3846     		mov	r0, r7
 2636 0056 FFF7FEFF 		bl	sys_mbox_trypost
 2637              	.LVL335:
 2638 005a 0028     		cmp	r0, #0
 2639 005c 45D1     		bne	.L273
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 87


 492:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 2640              		.loc 1 492 0
 2641 005e A36A     		ldr	r3, [r4, #40]
 2642 0060 002B     		cmp	r3, #0
 2643 0062 45D0     		beq	.L274
 492:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 2644              		.loc 1 492 0 is_stmt 0 discriminator 1
 2645 0064 0022     		movs	r2, #0
 2646 0066 1146     		mov	r1, r2
 2647 0068 2046     		mov	r0, r4
 2648 006a 9847     		blx	r3
 2649              	.LVL336:
 494:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2650              		.loc 1 494 0 is_stmt 1 discriminator 1
 2651 006c 6FF00505 		mvn	r5, #5
 2652              	.LVL337:
 2653 0070 ECE7     		b	.L267
 2654              	.LVL338:
 2655              	.L279:
 504:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* Register event with callback */
 2656              		.loc 1 504 0
 2657 0072 2449     		ldr	r1, .L281
 2658 0074 3846     		mov	r0, r7
 2659              	.LVL339:
 2660 0076 FFF7FEFF 		bl	sys_mbox_trypost
 2661              	.LVL340:
 2662 007a E0BB     		cbnz	r0, .L275
 506:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 2663              		.loc 1 506 0
 2664 007c A36A     		ldr	r3, [r4, #40]
 2665 007e EBB3     		cbz	r3, .L276
 506:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 2666              		.loc 1 506 0 is_stmt 0 discriminator 1
 2667 0080 0022     		movs	r2, #0
 2668 0082 1146     		mov	r1, r2
 2669 0084 2046     		mov	r0, r4
 2670 0086 9847     		blx	r3
 2671              	.LVL341:
 508:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2672              		.loc 1 508 0 is_stmt 1 discriminator 1
 2673 0088 4FF0FF35 		mov	r5, #-1
 2674              	.LVL342:
 2675 008c DEE7     		b	.L267
 2676              	.L280:
 2677              	.LBB21:
 523:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_arg(pcb, NULL);
 2678              		.loc 1 523 0
 2679 008e D8F80440 		ldr	r4, [r8, #4]
 2680              	.LVL343:
 524:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_recv(pcb, NULL);
 2681              		.loc 1 524 0
 2682 0092 0021     		movs	r1, #0
 2683 0094 2046     		mov	r0, r4
 2684 0096 FFF7FEFF 		bl	tcp_arg
 2685              	.LVL344:
 525:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_sent(pcb, NULL);
 2686              		.loc 1 525 0
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 88


 2687 009a 0021     		movs	r1, #0
 2688 009c 2046     		mov	r0, r4
 2689 009e FFF7FEFF 		bl	tcp_recv
 2690              	.LVL345:
 526:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_poll(pcb, NULL, 0);
 2691              		.loc 1 526 0
 2692 00a2 0021     		movs	r1, #0
 2693 00a4 2046     		mov	r0, r4
 2694 00a6 FFF7FEFF 		bl	tcp_sent
 2695              	.LVL346:
 527:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_err(pcb, NULL);
 2696              		.loc 1 527 0
 2697 00aa 0022     		movs	r2, #0
 2698 00ac 1146     		mov	r1, r2
 2699 00ae 2046     		mov	r0, r4
 2700 00b0 FFF7FEFF 		bl	tcp_poll
 2701              	.LVL347:
 528:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* remove reference from to the pcb from this netconn */
 2702              		.loc 1 528 0
 2703 00b4 0021     		movs	r1, #0
 2704 00b6 2046     		mov	r0, r4
 2705 00b8 FFF7FEFF 		bl	tcp_err
 2706              	.LVL348:
 530:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* no need to drain since we know the recvmbox is empty. */
 2707              		.loc 1 530 0
 2708 00bc 0023     		movs	r3, #0
 2709 00be C8F80430 		str	r3, [r8, #4]
 532:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_set_invalid(&newconn->recvmbox);
 2710              		.loc 1 532 0
 2711 00c2 08F11004 		add	r4, r8, #16
 2712              	.LVL349:
 2713 00c6 2046     		mov	r0, r4
 2714 00c8 FFF7FEFF 		bl	sys_mbox_free
 2715              	.LVL350:
 533:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     netconn_free(newconn);
 2716              		.loc 1 533 0
 2717 00cc 2046     		mov	r0, r4
 2718 00ce FFF7FEFF 		bl	sys_mbox_set_invalid
 2719              	.LVL351:
 534:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_MEM;
 2720              		.loc 1 534 0
 2721 00d2 4046     		mov	r0, r8
 2722 00d4 FFF7FEFF 		bl	netconn_free
 2723              	.LVL352:
 535:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 2724              		.loc 1 535 0
 2725 00d8 4FF0FF35 		mov	r5, #-1
 2726 00dc B6E7     		b	.L267
 2727              	.LVL353:
 2728              	.L271:
 2729              	.LBE21:
 481:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2730              		.loc 1 481 0
 2731 00de 6FF00505 		mvn	r5, #5
 2732 00e2 B3E7     		b	.L267
 2733              	.LVL354:
 2734              	.L272:
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 89


 485:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2735              		.loc 1 485 0
 2736 00e4 6FF00505 		mvn	r5, #5
 2737              	.LVL355:
 2738 00e8 B0E7     		b	.L267
 2739              	.LVL356:
 2740              	.L273:
 494:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2741              		.loc 1 494 0
 2742 00ea 6FF00505 		mvn	r5, #5
 2743              	.LVL357:
 2744 00ee ADE7     		b	.L267
 2745              	.LVL358:
 2746              	.L274:
 2747 00f0 6FF00505 		mvn	r5, #5
 2748              	.LVL359:
 2749 00f4 AAE7     		b	.L267
 2750              	.LVL360:
 2751              	.L275:
 508:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2752              		.loc 1 508 0
 2753 00f6 4FF0FF35 		mov	r5, #-1
 2754              	.LVL361:
 2755 00fa A7E7     		b	.L267
 2756              	.LVL362:
 2757              	.L276:
 2758 00fc 4FF0FF35 		mov	r5, #-1
 2759              	.LVL363:
 2760 0100 A4E7     		b	.L267
 2761              	.L282:
 2762 0102 00BF     		.align	2
 2763              	.L281:
 2764 0104 00000000 		.word	netconn_aborted
 2765              		.cfi_endproc
 2766              	.LFE165:
 2768              		.section	.text.lwip_netconn_do_delconn,"ax",%progbits
 2769              		.align	1
 2770              		.global	lwip_netconn_do_delconn
 2771              		.syntax unified
 2772              		.thumb
 2773              		.thumb_func
 2774              		.fpu fpv5-sp-d16
 2776              	lwip_netconn_do_delconn:
 2777              	.LFB172:
1020:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
 2778              		.loc 1 1020 0
 2779              		.cfi_startproc
 2780              		@ args = 0, pretend = 0, frame = 0
 2781              		@ frame_needed = 0, uses_anonymous_args = 0
 2782              	.LVL364:
 2783 0000 38B5     		push	{r3, r4, r5, lr}
 2784              	.LCFI19:
 2785              		.cfi_def_cfa_offset 16
 2786              		.cfi_offset 3, -16
 2787              		.cfi_offset 4, -12
 2788              		.cfi_offset 5, -8
 2789              		.cfi_offset 14, -4
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 90


 2790 0002 0446     		mov	r4, r0
 2791              	.LVL365:
1023:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("netconn state error", /* this only happens for TCP netconns */
 2792              		.loc 1 1023 0
 2793 0004 0368     		ldr	r3, [r0]
 2794 0006 5D78     		ldrb	r5, [r3, #1]	@ zero_extendqisi2
 2795              	.LVL366:
1024:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     (state == NETCONN_NONE) || (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_TCP));
 2796              		.loc 1 1024 0
 2797 0008 25B1     		cbz	r5, .L284
1024:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     (state == NETCONN_NONE) || (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_TCP));
 2798              		.loc 1 1024 0 is_stmt 0 discriminator 1
 2799 000a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2800 000c 03F0F003 		and	r3, r3, #240
 2801 0010 102B     		cmp	r3, #16
 2802 0012 1FD1     		bne	.L301
 2803              	.LVL367:
 2804              	.L284:
1045:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        (state != NETCONN_CONNECT)) ||
 2805              		.loc 1 1045 0 is_stmt 1
 2806 0014 AB1E     		subs	r3, r5, #2
 2807 0016 18BF     		it	ne
 2808 0018 0123     		movne	r3, #1
1044:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        (state != NETCONN_LISTEN) &&
 2809              		.loc 1 1044 0
 2810 001a 002D     		cmp	r5, #0
 2811 001c 08BF     		it	eq
 2812 001e 0023     		moveq	r3, #0
 2813 0020 03B3     		cbz	r3, .L285
1045:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        (state != NETCONN_CONNECT)) ||
 2814              		.loc 1 1045 0
 2815 0022 032D     		cmp	r5, #3
 2816 0024 1ED0     		beq	.L285
 2817              	.L286:
1050:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else
 2818              		.loc 1 1050 0
 2819 0026 FB23     		movs	r3, #251
 2820 0028 2371     		strb	r3, [r4, #4]
 2821              	.L288:
1108:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     TCPIP_APIMSG_ACK(msg);
 2822              		.loc 1 1108 0
 2823 002a 2068     		ldr	r0, [r4]
 2824 002c 0C30     		adds	r0, r0, #12
 2825 002e FFF7FEFF 		bl	sys_sem_valid
 2826              	.LVL368:
 2827 0032 70B1     		cbz	r0, .L283
1109:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2828              		.loc 1 1109 0
 2829 0034 2368     		ldr	r3, [r4]
 2830 0036 63B1     		cbz	r3, .L283
 2831              	.LBB22:
1109:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2832              		.loc 1 1109 0 is_stmt 0 discriminator 1
 2833 0038 FFF7FEFF 		bl	sys_arch_protect
 2834              	.LVL369:
 2835 003c 2368     		ldr	r3, [r4]
 2836 003e 93F90820 		ldrsb	r2, [r3, #8]
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 91


 2837 0042 12F10C0F 		cmn	r2, #12
 2838 0046 02DB     		blt	.L299
1109:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2839              		.loc 1 1109 0 discriminator 2
 2840 0048 94F90420 		ldrsb	r2, [r4, #4]
 2841 004c 1A72     		strb	r2, [r3, #8]
 2842              	.L299:
1109:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2843              		.loc 1 1109 0 discriminator 4
 2844 004e FFF7FEFF 		bl	sys_arch_unprotect
 2845              	.LVL370:
 2846              	.L283:
 2847              	.LBE22:
1111:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 2848              		.loc 1 1111 0 is_stmt 1
 2849 0052 38BD     		pop	{r3, r4, r5, pc}
 2850              	.LVL371:
 2851              	.L301:
1024:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     (state == NETCONN_NONE) || (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_TCP));
 2852              		.loc 1 1024 0 discriminator 2
 2853 0054 414B     		ldr	r3, .L306
 2854 0056 40F20142 		movw	r2, #1025
 2855 005a 4149     		ldr	r1, .L306+4
 2856 005c 4148     		ldr	r0, .L306+8
 2857              	.LVL372:
 2858 005e FFF7FEFF 		bl	printf
 2859              	.LVL373:
 2860 0062 D7E7     		b	.L284
 2861              	.L285:
1046:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       ((state == NETCONN_CONNECT) && !IN_NONBLOCKING_CONNECT(msg->conn))) {
 2862              		.loc 1 1046 0
 2863 0064 032D     		cmp	r5, #3
 2864 0066 27D0     		beq	.L302
 2865              	.L287:
1054:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (state != NETCONN_CONNECT) || IN_NONBLOCKING_CONNECT(msg->conn));
 2866              		.loc 1 1054 0
 2867 0068 032D     		cmp	r5, #3
 2868 006a 2BD0     		beq	.L303
 2869              	.L289:
1056:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* Drain and delete mboxes */
 2870              		.loc 1 1056 0
 2871 006c 0023     		movs	r3, #0
 2872 006e 2371     		strb	r3, [r4, #4]
1058:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 2873              		.loc 1 1058 0
 2874 0070 2068     		ldr	r0, [r4]
 2875 0072 FFF7FEFF 		bl	netconn_drain
 2876              	.LVL374:
1060:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 2877              		.loc 1 1060 0
 2878 0076 2268     		ldr	r2, [r4]
 2879 0078 5168     		ldr	r1, [r2, #4]
 2880 007a 79B1     		cbz	r1, .L290
1062:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
 2881              		.loc 1 1062 0
 2882 007c 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 2883 007e 03F0F003 		and	r3, r3, #240
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 92


 2884 0082 102B     		cmp	r3, #16
 2885 0084 2BD0     		beq	.L292
 2886 0086 202B     		cmp	r3, #32
 2887 0088 05D1     		bne	.L291
1070:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         udp_remove(msg->conn->pcb.udp);
 2888              		.loc 1 1070 0
 2889 008a 0023     		movs	r3, #0
 2890 008c CB61     		str	r3, [r1, #28]
1071:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
 2891              		.loc 1 1071 0
 2892 008e 2368     		ldr	r3, [r4]
 2893 0090 5868     		ldr	r0, [r3, #4]
 2894 0092 FFF7FEFF 		bl	udp_remove
 2895              	.LVL375:
 2896              	.L291:
1099:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 2897              		.loc 1 1099 0
 2898 0096 2368     		ldr	r3, [r4]
 2899 0098 0022     		movs	r2, #0
 2900 009a 5A60     		str	r2, [r3, #4]
 2901              	.L290:
1105:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     API_EVENT(msg->conn, NETCONN_EVT_SENDPLUS, 0);
 2902              		.loc 1 1105 0
 2903 009c 2068     		ldr	r0, [r4]
 2904 009e 836A     		ldr	r3, [r0, #40]
 2905 00a0 13B1     		cbz	r3, .L298
1105:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     API_EVENT(msg->conn, NETCONN_EVT_SENDPLUS, 0);
 2906              		.loc 1 1105 0 is_stmt 0 discriminator 1
 2907 00a2 0022     		movs	r2, #0
 2908 00a4 1146     		mov	r1, r2
 2909 00a6 9847     		blx	r3
 2910              	.LVL376:
 2911              	.L298:
1106:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2912              		.loc 1 1106 0 is_stmt 1
 2913 00a8 2068     		ldr	r0, [r4]
 2914 00aa 836A     		ldr	r3, [r0, #40]
 2915 00ac 002B     		cmp	r3, #0
 2916 00ae BCD0     		beq	.L288
1106:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2917              		.loc 1 1106 0 is_stmt 0 discriminator 1
 2918 00b0 0022     		movs	r2, #0
 2919 00b2 0221     		movs	r1, #2
 2920 00b4 9847     		blx	r3
 2921              	.LVL377:
 2922 00b6 B8E7     		b	.L288
 2923              	.L302:
1047:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* This means either a blocking write or blocking connect is running
 2924              		.loc 1 1047 0 is_stmt 1
 2925 00b8 2368     		ldr	r3, [r4]
 2926 00ba 1B7F     		ldrb	r3, [r3, #28]	@ zero_extendqisi2
 2927 00bc 13F0040F 		tst	r3, #4
 2928 00c0 D2D1     		bne	.L287
 2929 00c2 B0E7     		b	.L286
 2930              	.L303:
1054:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (state != NETCONN_CONNECT) || IN_NONBLOCKING_CONNECT(msg->conn));
 2931              		.loc 1 1054 0 discriminator 1
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 93


 2932 00c4 2368     		ldr	r3, [r4]
 2933 00c6 1B7F     		ldrb	r3, [r3, #28]	@ zero_extendqisi2
 2934 00c8 13F0040F 		tst	r3, #4
 2935 00cc CED1     		bne	.L289
1054:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (state != NETCONN_CONNECT) || IN_NONBLOCKING_CONNECT(msg->conn));
 2936              		.loc 1 1054 0 is_stmt 0 discriminator 2
 2937 00ce 234B     		ldr	r3, .L306
 2938 00d0 40F21F42 		movw	r2, #1055
 2939 00d4 2449     		ldr	r1, .L306+12
 2940 00d6 2348     		ldr	r0, .L306+8
 2941 00d8 FFF7FEFF 		bl	printf
 2942              	.LVL378:
 2943 00dc C6E7     		b	.L289
 2944              	.L292:
1076:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->conn->write_offset == 0);
 2945              		.loc 1 1076 0 is_stmt 1
 2946 00de 536A     		ldr	r3, [r2, #36]
 2947 00e0 002B     		cmp	r3, #0
 2948 00e2 2FD0     		beq	.L304
 2949              	.L294:
1076:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->conn->write_offset == 0);
 2950              		.loc 1 1076 0 is_stmt 0 discriminator 3
 2951 00e4 1D4B     		ldr	r3, .L306
 2952 00e6 40F23542 		movw	r2, #1077
 2953 00ea 2049     		ldr	r1, .L306+16
 2954 00ec 1D48     		ldr	r0, .L306+8
 2955 00ee FFF7FEFF 		bl	printf
 2956              	.LVL379:
 2957              	.L295:
1078:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->msg.sd.shut = NETCONN_SHUT_RDWR;
 2958              		.loc 1 1078 0 is_stmt 1
 2959 00f2 2368     		ldr	r3, [r4]
 2960 00f4 0422     		movs	r2, #4
 2961 00f6 5A70     		strb	r2, [r3, #1]
1079:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->current_msg = msg;
 2962              		.loc 1 1079 0
 2963 00f8 0323     		movs	r3, #3
 2964 00fa 2372     		strb	r3, [r4, #8]
1080:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
 2965              		.loc 1 1080 0
 2966 00fc 2368     		ldr	r3, [r4]
 2967 00fe 5C62     		str	r4, [r3, #36]
1082:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LWIP_ASSERT("state!", msg->conn->state == NETCONN_CLOSE);
 2968              		.loc 1 1082 0
 2969 0100 0021     		movs	r1, #0
 2970 0102 2068     		ldr	r0, [r4]
 2971 0104 FFF7FEFF 		bl	lwip_netconn_do_close_internal
 2972              	.LVL380:
 2973 0108 0028     		cmp	r0, #0
 2974 010a A2D0     		beq	.L283
1083:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           UNLOCK_TCPIP_CORE();
 2975              		.loc 1 1083 0
 2976 010c 2368     		ldr	r3, [r4]
 2977 010e 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 2978 0110 042B     		cmp	r3, #4
 2979 0112 1BD1     		bne	.L305
 2980              	.L297:
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 94


1084:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           sys_arch_sem_wait(LWIP_API_MSG_SEM(msg), 0);
 2981              		.loc 1 1084 0
 2982 0114 164D     		ldr	r5, .L306+20
 2983              	.LVL381:
 2984 0116 2846     		mov	r0, r5
 2985 0118 FFF7FEFF 		bl	sys_mutex_unlock
 2986              	.LVL382:
1085:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LOCK_TCPIP_CORE();
 2987              		.loc 1 1085 0
 2988 011c 2068     		ldr	r0, [r4]
 2989 011e 0021     		movs	r1, #0
 2990 0120 0C30     		adds	r0, r0, #12
 2991 0122 FFF7FEFF 		bl	sys_arch_sem_wait
 2992              	.LVL383:
1086:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LWIP_ASSERT("state!", msg->conn->state == NETCONN_NONE);
 2993              		.loc 1 1086 0
 2994 0126 2846     		mov	r0, r5
 2995 0128 FFF7FEFF 		bl	sys_mutex_lock
 2996              	.LVL384:
1087:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
 2997              		.loc 1 1087 0
 2998 012c 2368     		ldr	r3, [r4]
 2999 012e 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 3000 0130 002B     		cmp	r3, #0
 3001 0132 8ED0     		beq	.L283
1087:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
 3002              		.loc 1 1087 0 is_stmt 0 discriminator 1
 3003 0134 094B     		ldr	r3, .L306
 3004 0136 40F23F42 		movw	r2, #1087
 3005 013a 0E49     		ldr	r1, .L306+24
 3006 013c 0948     		ldr	r0, .L306+8
 3007 013e FFF7FEFF 		bl	printf
 3008              	.LVL385:
 3009 0142 86E7     		b	.L283
 3010              	.LVL386:
 3011              	.L304:
1076:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->conn->write_offset == 0);
 3012              		.loc 1 1076 0 is_stmt 1 discriminator 2
 3013 0144 136A     		ldr	r3, [r2, #32]
 3014 0146 002B     		cmp	r3, #0
 3015 0148 D3D0     		beq	.L295
 3016 014a CBE7     		b	.L294
 3017              	.L305:
1083:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           UNLOCK_TCPIP_CORE();
 3018              		.loc 1 1083 0 discriminator 1
 3019 014c 034B     		ldr	r3, .L306
 3020 014e 40F23B42 		movw	r2, #1083
 3021 0152 0849     		ldr	r1, .L306+24
 3022 0154 0348     		ldr	r0, .L306+8
 3023 0156 FFF7FEFF 		bl	printf
 3024              	.LVL387:
 3025 015a DBE7     		b	.L297
 3026              	.L307:
 3027              		.align	2
 3028              	.L306:
 3029 015c 00000000 		.word	.LC0
 3030 0160 00000000 		.word	.LC29
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 95


 3031 0164 54000000 		.word	.LC2
 3032 0168 14000000 		.word	.LC30
 3033 016c 34000000 		.word	.LC31
 3034 0170 00000000 		.word	lock_tcpip_core
 3035 0174 50000000 		.word	.LC32
 3036              		.cfi_endproc
 3037              	.LFE172:
 3039              		.section	.text.lwip_netconn_do_bind,"ax",%progbits
 3040              		.align	1
 3041              		.global	lwip_netconn_do_bind
 3042              		.syntax unified
 3043              		.thumb
 3044              		.thumb_func
 3045              		.fpu fpv5-sp-d16
 3047              	lwip_netconn_do_bind:
 3048              	.LFB173:
1122:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
 3049              		.loc 1 1122 0
 3050              		.cfi_startproc
 3051              		@ args = 0, pretend = 0, frame = 0
 3052              		@ frame_needed = 0, uses_anonymous_args = 0
 3053              	.LVL388:
 3054 0000 10B5     		push	{r4, lr}
 3055              	.LCFI20:
 3056              		.cfi_def_cfa_offset 8
 3057              		.cfi_offset 4, -8
 3058              		.cfi_offset 14, -4
 3059 0002 0446     		mov	r4, r0
 3060              	.LVL389:
1125:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = msg->conn->last_err;
 3061              		.loc 1 1125 0
 3062 0004 0368     		ldr	r3, [r0]
 3063 0006 93F90820 		ldrsb	r2, [r3, #8]
 3064 000a 12F10C0F 		cmn	r2, #12
 3065 000e 10DA     		bge	.L309
1126:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 3066              		.loc 1 1126 0
 3067 0010 0271     		strb	r2, [r0, #4]
 3068              	.LVL390:
 3069              	.L310:
1151:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3070              		.loc 1 1151 0
 3071 0012 2368     		ldr	r3, [r4]
 3072 0014 63B1     		cbz	r3, .L308
 3073              	.LBB23:
1151:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3074              		.loc 1 1151 0 is_stmt 0 discriminator 1
 3075 0016 FFF7FEFF 		bl	sys_arch_protect
 3076              	.LVL391:
 3077 001a 2368     		ldr	r3, [r4]
 3078 001c 93F90820 		ldrsb	r2, [r3, #8]
 3079 0020 12F10C0F 		cmn	r2, #12
 3080 0024 02DB     		blt	.L314
1151:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3081              		.loc 1 1151 0 discriminator 2
 3082 0026 94F90420 		ldrsb	r2, [r4, #4]
 3083 002a 1A72     		strb	r2, [r3, #8]
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 96


 3084              	.L314:
1151:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3085              		.loc 1 1151 0 discriminator 4
 3086 002c FFF7FEFF 		bl	sys_arch_unprotect
 3087              	.LVL392:
 3088              	.L308:
 3089              	.LBE23:
1152:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 3090              		.loc 1 1152 0 is_stmt 1
 3091 0030 10BD     		pop	{r4, pc}
 3092              	.LVL393:
 3093              	.L309:
1128:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->conn->pcb.tcp != NULL) {
 3094              		.loc 1 1128 0
 3095 0032 FA22     		movs	r2, #250
 3096 0034 0271     		strb	r2, [r0, #4]
1129:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       switch (NETCONNTYPE_GROUP(msg->conn->type)) {
 3097              		.loc 1 1129 0
 3098 0036 5868     		ldr	r0, [r3, #4]
 3099              	.LVL394:
 3100 0038 0028     		cmp	r0, #0
 3101 003a EAD0     		beq	.L310
1130:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
 3102              		.loc 1 1130 0
 3103 003c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3104 003e 03F0F003 		and	r3, r3, #240
 3105 0042 102B     		cmp	r3, #16
 3106 0044 07D0     		beq	.L311
 3107 0046 202B     		cmp	r3, #32
 3108 0048 E3D1     		bne	.L310
1138:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
 3109              		.loc 1 1138 0
 3110 004a A289     		ldrh	r2, [r4, #12]
 3111 004c A168     		ldr	r1, [r4, #8]
 3112 004e FFF7FEFF 		bl	udp_bind
 3113              	.LVL395:
 3114 0052 2071     		strb	r0, [r4, #4]
1139:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDP */
 3115              		.loc 1 1139 0
 3116 0054 DDE7     		b	.L310
 3117              	.L311:
1143:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
 3118              		.loc 1 1143 0
 3119 0056 A289     		ldrh	r2, [r4, #12]
 3120 0058 A168     		ldr	r1, [r4, #8]
 3121 005a FFF7FEFF 		bl	tcp_bind
 3122              	.LVL396:
 3123 005e 2071     		strb	r0, [r4, #4]
1144:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 3124              		.loc 1 1144 0
 3125 0060 D7E7     		b	.L310
 3126              		.cfi_endproc
 3127              	.LFE173:
 3129              		.section	.text.lwip_netconn_do_connect,"ax",%progbits
 3130              		.align	1
 3131              		.global	lwip_netconn_do_connect
 3132              		.syntax unified
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 97


 3133              		.thumb
 3134              		.thumb_func
 3135              		.fpu fpv5-sp-d16
 3137              	lwip_netconn_do_connect:
 3138              	.LFB175:
1213:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
 3139              		.loc 1 1213 0
 3140              		.cfi_startproc
 3141              		@ args = 0, pretend = 0, frame = 0
 3142              		@ frame_needed = 0, uses_anonymous_args = 0
 3143              	.LVL397:
 3144 0000 38B5     		push	{r3, r4, r5, lr}
 3145              	.LCFI21:
 3146              		.cfi_def_cfa_offset 16
 3147              		.cfi_offset 3, -16
 3148              		.cfi_offset 4, -12
 3149              		.cfi_offset 5, -8
 3150              		.cfi_offset 14, -4
 3151 0002 0446     		mov	r4, r0
 3152              	.LVL398:
1216:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* This may happen when calling netconn_connect() a second time */
 3153              		.loc 1 1216 0
 3154 0004 0268     		ldr	r2, [r0]
 3155 0006 5068     		ldr	r0, [r2, #4]
 3156              	.LVL399:
 3157 0008 60B1     		cbz	r0, .L332
1220:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
 3158              		.loc 1 1220 0
 3159 000a 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 3160 000c 03F0F003 		and	r3, r3, #240
 3161 0010 102B     		cmp	r3, #16
 3162 0012 19D0     		beq	.L320
 3163 0014 202B     		cmp	r3, #32
 3164 0016 6AD1     		bne	.L330
1228:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       break;
 3165              		.loc 1 1228 0
 3166 0018 A289     		ldrh	r2, [r4, #12]
 3167 001a A168     		ldr	r1, [r4, #8]
 3168 001c FFF7FEFF 		bl	udp_connect
 3169              	.LVL400:
 3170 0020 2071     		strb	r0, [r4, #4]
1229:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDP */
 3171              		.loc 1 1229 0
 3172 0022 01E0     		b	.L318
 3173              	.L332:
1218:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 3174              		.loc 1 1218 0
 3175 0024 F123     		movs	r3, #241
 3176 0026 2371     		strb	r3, [r4, #4]
 3177              	.L318:
1272:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3178              		.loc 1 1272 0
 3179 0028 2368     		ldr	r3, [r4]
 3180 002a 63B1     		cbz	r3, .L316
 3181              	.LBB24:
1272:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3182              		.loc 1 1272 0 is_stmt 0 discriminator 1
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 98


 3183 002c FFF7FEFF 		bl	sys_arch_protect
 3184              	.LVL401:
 3185 0030 2368     		ldr	r3, [r4]
 3186 0032 93F90820 		ldrsb	r2, [r3, #8]
 3187 0036 12F10C0F 		cmn	r2, #12
 3188 003a 02DB     		blt	.L329
1272:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3189              		.loc 1 1272 0 discriminator 2
 3190 003c 94F90420 		ldrsb	r2, [r4, #4]
 3191 0040 1A72     		strb	r2, [r3, #8]
 3192              	.L329:
1272:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3193              		.loc 1 1272 0 discriminator 4
 3194 0042 FFF7FEFF 		bl	sys_arch_unprotect
 3195              	.LVL402:
 3196              	.L316:
 3197              	.LBE24:
1273:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 3198              		.loc 1 1273 0 is_stmt 1
 3199 0046 38BD     		pop	{r3, r4, r5, pc}
 3200              	.LVL403:
 3201              	.L320:
1234:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = ERR_ALREADY;
 3202              		.loc 1 1234 0
 3203 0048 5378     		ldrb	r3, [r2, #1]	@ zero_extendqisi2
 3204 004a 032B     		cmp	r3, #3
 3205 004c 03D0     		beq	.L333
1236:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = ERR_ISCONN;
 3206              		.loc 1 1236 0
 3207 004e 2BB1     		cbz	r3, .L323
1237:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
 3208              		.loc 1 1237 0
 3209 0050 F623     		movs	r3, #246
 3210 0052 2371     		strb	r3, [r4, #4]
 3211 0054 E8E7     		b	.L318
 3212              	.L333:
1235:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else if (msg->conn->state != NETCONN_NONE) {
 3213              		.loc 1 1235 0
 3214 0056 F723     		movs	r3, #247
 3215 0058 2371     		strb	r3, [r4, #4]
 3216 005a E5E7     		b	.L318
 3217              	.L323:
1239:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = tcp_connect(msg->conn->pcb.tcp, API_EXPR_REF(msg->msg.bc.ipaddr),
 3218              		.loc 1 1239 0
 3219 005c 1046     		mov	r0, r2
 3220 005e FFF7FEFF 		bl	setup_tcp
 3221              	.LVL404:
1240:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->msg.bc.port, lwip_netconn_do_connected);
 3222              		.loc 1 1240 0
 3223 0062 2068     		ldr	r0, [r4]
 3224 0064 274B     		ldr	r3, .L335
 3225 0066 A289     		ldrh	r2, [r4, #12]
 3226 0068 A168     		ldr	r1, [r4, #8]
 3227 006a 4068     		ldr	r0, [r0, #4]
 3228 006c FFF7FEFF 		bl	tcp_connect
 3229              	.LVL405:
 3230 0070 2071     		strb	r0, [r4, #4]
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 99


1242:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           u8_t non_blocking = netconn_is_nonblocking(msg->conn);
 3231              		.loc 1 1242 0
 3232 0072 0028     		cmp	r0, #0
 3233 0074 D8D1     		bne	.L318
 3234              	.LBB25:
1243:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->conn->state = NETCONN_CONNECT;
 3235              		.loc 1 1243 0
 3236 0076 2268     		ldr	r2, [r4]
 3237 0078 137F     		ldrb	r3, [r2, #28]	@ zero_extendqisi2
 3238              	.LVL406:
1244:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           SET_NONBLOCKING_CONNECT(msg->conn, non_blocking);
 3239              		.loc 1 1244 0
 3240 007a 0321     		movs	r1, #3
 3241 007c 5170     		strb	r1, [r2, #1]
1245:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           if (non_blocking) {
 3242              		.loc 1 1245 0
 3243 007e 13F00203 		ands	r3, r3, #2
 3244              	.LVL407:
 3245 0082 08D0     		beq	.L324
1245:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           if (non_blocking) {
 3246              		.loc 1 1245 0 is_stmt 0 discriminator 1
 3247 0084 2168     		ldr	r1, [r4]
 3248 0086 0A7F     		ldrb	r2, [r1, #28]	@ zero_extendqisi2
 3249              	.LVL408:
 3250 0088 42F00402 		orr	r2, r2, #4
 3251 008c 0A77     		strb	r2, [r1, #28]
 3252              	.L325:
1246:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             msg->err = ERR_INPROGRESS;
 3253              		.loc 1 1246 0 is_stmt 1
 3254 008e 43B1     		cbz	r3, .L326
1247:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           } else {
 3255              		.loc 1 1247 0
 3256 0090 FB23     		movs	r3, #251
 3257 0092 2371     		strb	r3, [r4, #4]
 3258 0094 C8E7     		b	.L318
 3259              	.LVL409:
 3260              	.L324:
1245:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           if (non_blocking) {
 3261              		.loc 1 1245 0 discriminator 2
 3262 0096 2168     		ldr	r1, [r4]
 3263 0098 0A7F     		ldrb	r2, [r1, #28]	@ zero_extendqisi2
 3264              	.LVL410:
 3265 009a 22F00402 		bic	r2, r2, #4
 3266 009e 0A77     		strb	r2, [r1, #28]
 3267 00a0 F5E7     		b	.L325
 3268              	.L326:
1249:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             /* sys_sem_signal() is called from lwip_netconn_do_connected (or err_tcp()),
 3269              		.loc 1 1249 0
 3270 00a2 2368     		ldr	r3, [r4]
 3271 00a4 5C62     		str	r4, [r3, #36]
1253:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             UNLOCK_TCPIP_CORE();
 3272              		.loc 1 1253 0
 3273 00a6 2368     		ldr	r3, [r4]
 3274 00a8 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 3275 00aa 032B     		cmp	r3, #3
 3276 00ac 17D1     		bne	.L334
 3277              	.L327:
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 100


1254:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             sys_arch_sem_wait(LWIP_API_MSG_SEM(msg), 0);
 3278              		.loc 1 1254 0
 3279 00ae 164D     		ldr	r5, .L335+4
 3280 00b0 2846     		mov	r0, r5
 3281 00b2 FFF7FEFF 		bl	sys_mutex_unlock
 3282              	.LVL411:
1255:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             LOCK_TCPIP_CORE();
 3283              		.loc 1 1255 0
 3284 00b6 2068     		ldr	r0, [r4]
 3285 00b8 0021     		movs	r1, #0
 3286 00ba 0C30     		adds	r0, r0, #12
 3287 00bc FFF7FEFF 		bl	sys_arch_sem_wait
 3288              	.LVL412:
1256:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             LWIP_ASSERT("state!", msg->conn->state != NETCONN_CONNECT);
 3289              		.loc 1 1256 0
 3290 00c0 2846     		mov	r0, r5
 3291 00c2 FFF7FEFF 		bl	sys_mutex_lock
 3292              	.LVL413:
1257:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCPIP_CORE_LOCKING */
 3293              		.loc 1 1257 0
 3294 00c6 2368     		ldr	r3, [r4]
 3295 00c8 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 3296 00ca 032B     		cmp	r3, #3
 3297 00cc BBD1     		bne	.L316
1257:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCPIP_CORE_LOCKING */
 3298              		.loc 1 1257 0 is_stmt 0 discriminator 1
 3299 00ce 0F4B     		ldr	r3, .L335+8
 3300 00d0 40F2E942 		movw	r2, #1257
 3301 00d4 0E49     		ldr	r1, .L335+12
 3302 00d6 0F48     		ldr	r0, .L335+16
 3303 00d8 FFF7FEFF 		bl	printf
 3304              	.LVL414:
 3305 00dc B3E7     		b	.L316
 3306              	.L334:
1253:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             UNLOCK_TCPIP_CORE();
 3307              		.loc 1 1253 0 is_stmt 1 discriminator 1
 3308 00de 0B4B     		ldr	r3, .L335+8
 3309 00e0 40F2E542 		movw	r2, #1253
 3310 00e4 0A49     		ldr	r1, .L335+12
 3311 00e6 0B48     		ldr	r0, .L335+16
 3312 00e8 FFF7FEFF 		bl	printf
 3313              	.LVL415:
 3314 00ec DFE7     		b	.L327
 3315              	.L330:
 3316              	.LBE25:
1266:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       break;
 3317              		.loc 1 1266 0 discriminator 1
 3318 00ee 074B     		ldr	r3, .L335+8
 3319 00f0 40F2F242 		movw	r2, #1266
 3320 00f4 0849     		ldr	r1, .L335+20
 3321 00f6 0748     		ldr	r0, .L335+16
 3322 00f8 FFF7FEFF 		bl	printf
 3323              	.LVL416:
 3324 00fc FA23     		movs	r3, #250
 3325 00fe 2371     		strb	r3, [r4, #4]
1267:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 3326              		.loc 1 1267 0 discriminator 1
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 101


 3327 0100 92E7     		b	.L318
 3328              	.L336:
 3329 0102 00BF     		.align	2
 3330              	.L335:
 3331 0104 00000000 		.word	lwip_netconn_do_connected
 3332 0108 00000000 		.word	lock_tcpip_core
 3333 010c 00000000 		.word	.LC0
 3334 0110 50000000 		.word	.LC32
 3335 0114 54000000 		.word	.LC2
 3336 0118 00000000 		.word	.LC33
 3337              		.cfi_endproc
 3338              	.LFE175:
 3340              		.section	.text.lwip_netconn_do_disconnect,"ax",%progbits
 3341              		.align	1
 3342              		.global	lwip_netconn_do_disconnect
 3343              		.syntax unified
 3344              		.thumb
 3345              		.thumb_func
 3346              		.fpu fpv5-sp-d16
 3348              	lwip_netconn_do_disconnect:
 3349              	.LFB176:
1284:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
 3350              		.loc 1 1284 0
 3351              		.cfi_startproc
 3352              		@ args = 0, pretend = 0, frame = 0
 3353              		@ frame_needed = 0, uses_anonymous_args = 0
 3354              	.LVL417:
 3355 0000 10B5     		push	{r4, lr}
 3356              	.LCFI22:
 3357              		.cfi_def_cfa_offset 8
 3358              		.cfi_offset 4, -8
 3359              		.cfi_offset 14, -4
 3360 0002 0446     		mov	r4, r0
 3361              	.LVL418:
1288:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     udp_disconnect(msg->conn->pcb.udp);
 3362              		.loc 1 1288 0
 3363 0004 0268     		ldr	r2, [r0]
 3364 0006 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 3365 0008 03F0F003 		and	r3, r3, #240
 3366 000c 202B     		cmp	r3, #32
 3367 000e 11D0     		beq	.L343
1294:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 3368              		.loc 1 1294 0
 3369 0010 FA23     		movs	r3, #250
 3370 0012 0371     		strb	r3, [r0, #4]
 3371              	.LVL419:
 3372              	.L339:
1296:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3373              		.loc 1 1296 0
 3374 0014 2368     		ldr	r3, [r4]
 3375 0016 63B1     		cbz	r3, .L337
 3376              	.LBB26:
1296:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3377              		.loc 1 1296 0 is_stmt 0 discriminator 1
 3378 0018 FFF7FEFF 		bl	sys_arch_protect
 3379              	.LVL420:
 3380 001c 2368     		ldr	r3, [r4]
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 102


 3381 001e 93F90820 		ldrsb	r2, [r3, #8]
 3382 0022 12F10C0F 		cmn	r2, #12
 3383 0026 02DB     		blt	.L341
1296:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3384              		.loc 1 1296 0 discriminator 2
 3385 0028 94F90420 		ldrsb	r2, [r4, #4]
 3386 002c 1A72     		strb	r2, [r3, #8]
 3387              	.L341:
1296:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3388              		.loc 1 1296 0 discriminator 4
 3389 002e FFF7FEFF 		bl	sys_arch_unprotect
 3390              	.LVL421:
 3391              	.L337:
 3392              	.LBE26:
1297:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 3393              		.loc 1 1297 0 is_stmt 1
 3394 0032 10BD     		pop	{r4, pc}
 3395              	.LVL422:
 3396              	.L343:
1289:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_OK;
 3397              		.loc 1 1289 0
 3398 0034 5068     		ldr	r0, [r2, #4]
 3399              	.LVL423:
 3400 0036 FFF7FEFF 		bl	udp_disconnect
 3401              	.LVL424:
1290:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else
 3402              		.loc 1 1290 0
 3403 003a 0023     		movs	r3, #0
 3404 003c 2371     		strb	r3, [r4, #4]
 3405 003e E9E7     		b	.L339
 3406              		.cfi_endproc
 3407              	.LFE176:
 3409              		.section	.text.lwip_netconn_do_listen,"ax",%progbits
 3410              		.align	1
 3411              		.global	lwip_netconn_do_listen
 3412              		.syntax unified
 3413              		.thumb
 3414              		.thumb_func
 3415              		.fpu fpv5-sp-d16
 3417              	lwip_netconn_do_listen:
 3418              	.LFB177:
1308:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
 3419              		.loc 1 1308 0
 3420              		.cfi_startproc
 3421              		@ args = 0, pretend = 0, frame = 8
 3422              		@ frame_needed = 0, uses_anonymous_args = 0
 3423              	.LVL425:
 3424 0000 30B5     		push	{r4, r5, lr}
 3425              	.LCFI23:
 3426              		.cfi_def_cfa_offset 12
 3427              		.cfi_offset 4, -12
 3428              		.cfi_offset 5, -8
 3429              		.cfi_offset 14, -4
 3430 0002 83B0     		sub	sp, sp, #12
 3431              	.LCFI24:
 3432              		.cfi_def_cfa_offset 24
 3433 0004 0446     		mov	r4, r0
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 103


 3434              	.LVL426:
1311:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = msg->conn->last_err;
 3435              		.loc 1 1311 0
 3436 0006 0368     		ldr	r3, [r0]
 3437 0008 93F90820 		ldrsb	r2, [r3, #8]
 3438 000c 12F10C0F 		cmn	r2, #12
 3439 0010 11DA     		bge	.L345
1312:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 3440              		.loc 1 1312 0
 3441 0012 0271     		strb	r2, [r0, #4]
 3442              	.LVL427:
 3443              	.L346:
1380:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3444              		.loc 1 1380 0
 3445 0014 2368     		ldr	r3, [r4]
 3446 0016 63B1     		cbz	r3, .L344
 3447              	.LBB27:
1380:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3448              		.loc 1 1380 0 is_stmt 0 discriminator 1
 3449 0018 FFF7FEFF 		bl	sys_arch_protect
 3450              	.LVL428:
 3451 001c 2368     		ldr	r3, [r4]
 3452 001e 93F90820 		ldrsb	r2, [r3, #8]
 3453 0022 12F10C0F 		cmn	r2, #12
 3454 0026 02DB     		blt	.L356
1380:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3455              		.loc 1 1380 0 discriminator 2
 3456 0028 94F90420 		ldrsb	r2, [r4, #4]
 3457 002c 1A72     		strb	r2, [r3, #8]
 3458              	.L356:
1380:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3459              		.loc 1 1380 0 discriminator 4
 3460 002e FFF7FEFF 		bl	sys_arch_unprotect
 3461              	.LVL429:
 3462              	.L344:
 3463              	.LBE27:
1381:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 3464              		.loc 1 1381 0 is_stmt 1
 3465 0032 03B0     		add	sp, sp, #12
 3466              	.LCFI25:
 3467              		.cfi_remember_state
 3468              		.cfi_def_cfa_offset 12
 3469              		@ sp needed
 3470 0034 30BD     		pop	{r4, r5, pc}
 3471              	.LVL430:
 3472              	.L345:
 3473              	.LCFI26:
 3474              		.cfi_restore_state
1314:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->conn->pcb.tcp != NULL) {
 3475              		.loc 1 1314 0
 3476 0036 F522     		movs	r2, #245
 3477 0038 0271     		strb	r2, [r0, #4]
1315:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_TCP) {
 3478              		.loc 1 1315 0
 3479 003a 5868     		ldr	r0, [r3, #4]
 3480              	.LVL431:
 3481 003c 0028     		cmp	r0, #0
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 104


 3482 003e E9D0     		beq	.L346
1316:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (msg->conn->state == NETCONN_NONE) {
 3483              		.loc 1 1316 0
 3484 0040 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 3485 0042 02F0F002 		and	r2, r2, #240
 3486 0046 102A     		cmp	r2, #16
 3487 0048 02D0     		beq	.L358
1376:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 3488              		.loc 1 1376 0
 3489 004a F023     		movs	r3, #240
 3490 004c 2371     		strb	r3, [r4, #4]
 3491 004e E1E7     		b	.L346
 3492              	.L358:
1317:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           struct tcp_pcb* lpcb;
 3493              		.loc 1 1317 0
 3494 0050 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 3495 0052 002B     		cmp	r3, #0
 3496 0054 45D1     		bne	.L348
 3497              	.LBB28:
1319:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             /* connection is not closed, cannot listen */
 3498              		.loc 1 1319 0
 3499 0056 037D     		ldrb	r3, [r0, #20]	@ zero_extendqisi2
 3500 0058 13B1     		cbz	r3, .L349
1321:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           } else {
 3501              		.loc 1 1321 0
 3502 005a FA23     		movs	r3, #250
 3503 005c 2371     		strb	r3, [r4, #4]
 3504 005e D9E7     		b	.L346
 3505              	.L349:
 3506              	.LVL432:
 3507              	.LBB29:
1342:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 3508              		.loc 1 1342 0
 3509 0060 0DF10702 		add	r2, sp, #7
 3510 0064 FF21     		movs	r1, #255
 3511 0066 FFF7FEFF 		bl	tcp_listen_with_backlog_and_err
 3512              	.LVL433:
1344:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               /* in this case, the old pcb is still allocated */
 3513              		.loc 1 1344 0
 3514 006a 0546     		mov	r5, r0
 3515 006c F0B1     		cbz	r0, .L359
1349:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 /** @todo: should we drain the recvmbox here? */
 3516              		.loc 1 1349 0
 3517 006e 2068     		ldr	r0, [r4]
 3518              	.LVL434:
 3519 0070 1030     		adds	r0, r0, #16
 3520 0072 FFF7FEFF 		bl	sys_mbox_valid
 3521              	.LVL435:
 3522 0076 E8B9     		cbnz	r0, .L360
 3523              	.L352:
1354:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               if (!sys_mbox_valid(&msg->conn->acceptmbox)) {
 3524              		.loc 1 1354 0
 3525 0078 0023     		movs	r3, #0
 3526 007a 2371     		strb	r3, [r4, #4]
1355:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 msg->err = sys_mbox_new(&msg->conn->acceptmbox, DEFAULT_ACCEPTMBOX_SIZE);
 3527              		.loc 1 1355 0
 3528 007c 2068     		ldr	r0, [r4]
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 105


 3529 007e 1430     		adds	r0, r0, #20
 3530 0080 FFF7FEFF 		bl	sys_mbox_valid
 3531              	.LVL436:
 3532 0084 F8B1     		cbz	r0, .L361
 3533              	.L353:
1358:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 msg->conn->state = NETCONN_LISTEN;
 3534              		.loc 1 1358 0
 3535 0086 94F90430 		ldrsb	r3, [r4, #4]
 3536 008a 1BBB     		cbnz	r3, .L354
1359:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 msg->conn->pcb.tcp = lpcb;
 3537              		.loc 1 1359 0
 3538 008c 2368     		ldr	r3, [r4]
 3539 008e 0222     		movs	r2, #2
 3540 0090 5A70     		strb	r2, [r3, #1]
1360:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 tcp_arg(msg->conn->pcb.tcp, msg->conn);
 3541              		.loc 1 1360 0
 3542 0092 2368     		ldr	r3, [r4]
 3543 0094 5D60     		str	r5, [r3, #4]
1361:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 tcp_accept(msg->conn->pcb.tcp, accept_function);
 3544              		.loc 1 1361 0
 3545 0096 2368     		ldr	r3, [r4]
 3546 0098 1946     		mov	r1, r3
 3547 009a 5868     		ldr	r0, [r3, #4]
 3548 009c FFF7FEFF 		bl	tcp_arg
 3549              	.LVL437:
1362:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               } else {
 3550              		.loc 1 1362 0
 3551 00a0 2368     		ldr	r3, [r4]
 3552 00a2 1249     		ldr	r1, .L362
 3553 00a4 5868     		ldr	r0, [r3, #4]
 3554 00a6 FFF7FEFF 		bl	tcp_accept
 3555              	.LVL438:
 3556 00aa B3E7     		b	.L346
 3557              	.LVL439:
 3558              	.L359:
1346:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             } else {
 3559              		.loc 1 1346 0
 3560 00ac 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 3561 00b0 2371     		strb	r3, [r4, #4]
 3562 00b2 AFE7     		b	.L346
 3563              	.LVL440:
 3564              	.L360:
1351:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 sys_mbox_set_invalid(&msg->conn->recvmbox);
 3565              		.loc 1 1351 0
 3566 00b4 2068     		ldr	r0, [r4]
 3567 00b6 1030     		adds	r0, r0, #16
 3568 00b8 FFF7FEFF 		bl	sys_mbox_free
 3569              	.LVL441:
1352:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               }
 3570              		.loc 1 1352 0
 3571 00bc 2068     		ldr	r0, [r4]
 3572 00be 1030     		adds	r0, r0, #16
 3573 00c0 FFF7FEFF 		bl	sys_mbox_set_invalid
 3574              	.LVL442:
 3575 00c4 D8E7     		b	.L352
 3576              	.L361:
1356:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               }
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 106


 3577              		.loc 1 1356 0
 3578 00c6 2068     		ldr	r0, [r4]
 3579 00c8 0621     		movs	r1, #6
 3580 00ca 1430     		adds	r0, r0, #20
 3581 00cc FFF7FEFF 		bl	sys_mbox_new
 3582              	.LVL443:
 3583 00d0 2071     		strb	r0, [r4, #4]
 3584 00d2 D8E7     		b	.L353
 3585              	.L354:
1365:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 msg->conn->pcb.tcp = NULL;
 3586              		.loc 1 1365 0
 3587 00d4 2846     		mov	r0, r5
 3588 00d6 FFF7FEFF 		bl	tcp_close
 3589              	.LVL444:
1366:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               }
 3590              		.loc 1 1366 0
 3591 00da 2368     		ldr	r3, [r4]
 3592 00dc 0022     		movs	r2, #0
 3593 00de 5A60     		str	r2, [r3, #4]
 3594 00e0 98E7     		b	.L346
 3595              	.LVL445:
 3596              	.L348:
 3597              	.LBE29:
 3598              	.LBE28:
1370:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           /* already listening, allow updating of the backlog */
 3599              		.loc 1 1370 0
 3600 00e2 022B     		cmp	r3, #2
 3601 00e4 96D1     		bne	.L346
1372:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           tcp_backlog_set(msg->conn->pcb.tcp, msg->msg.lb.backlog);
 3602              		.loc 1 1372 0
 3603 00e6 0023     		movs	r3, #0
 3604 00e8 2371     		strb	r3, [r4, #4]
 3605 00ea 93E7     		b	.L346
 3606              	.L363:
 3607              		.align	2
 3608              	.L362:
 3609 00ec 00000000 		.word	accept_function
 3610              		.cfi_endproc
 3611              	.LFE177:
 3613              		.section	.text.lwip_netconn_do_send,"ax",%progbits
 3614              		.align	1
 3615              		.global	lwip_netconn_do_send
 3616              		.syntax unified
 3617              		.thumb
 3618              		.thumb_func
 3619              		.fpu fpv5-sp-d16
 3621              	lwip_netconn_do_send:
 3622              	.LFB178:
1392:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
 3623              		.loc 1 1392 0
 3624              		.cfi_startproc
 3625              		@ args = 0, pretend = 0, frame = 0
 3626              		@ frame_needed = 0, uses_anonymous_args = 0
 3627              	.LVL446:
 3628 0000 10B5     		push	{r4, lr}
 3629              	.LCFI27:
 3630              		.cfi_def_cfa_offset 8
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 107


 3631              		.cfi_offset 4, -8
 3632              		.cfi_offset 14, -4
 3633 0002 0446     		mov	r4, r0
 3634              	.LVL447:
1395:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = msg->conn->last_err;
 3635              		.loc 1 1395 0
 3636 0004 0368     		ldr	r3, [r0]
 3637 0006 93F90820 		ldrsb	r2, [r3, #8]
 3638 000a 12F10C0F 		cmn	r2, #12
 3639 000e 10DA     		bge	.L365
1396:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 3640              		.loc 1 1396 0
 3641 0010 0271     		strb	r2, [r0, #4]
 3642              	.LVL448:
 3643              	.L366:
1435:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3644              		.loc 1 1435 0
 3645 0012 2368     		ldr	r3, [r4]
 3646 0014 63B1     		cbz	r3, .L364
 3647              	.LBB30:
1435:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3648              		.loc 1 1435 0 is_stmt 0 discriminator 1
 3649 0016 FFF7FEFF 		bl	sys_arch_protect
 3650              	.LVL449:
 3651 001a 2368     		ldr	r3, [r4]
 3652 001c 93F90820 		ldrsb	r2, [r3, #8]
 3653 0020 12F10C0F 		cmn	r2, #12
 3654 0024 02DB     		blt	.L370
1435:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3655              		.loc 1 1435 0 discriminator 2
 3656 0026 94F90420 		ldrsb	r2, [r4, #4]
 3657 002a 1A72     		strb	r2, [r3, #8]
 3658              	.L370:
1435:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3659              		.loc 1 1435 0 discriminator 4
 3660 002c FFF7FEFF 		bl	sys_arch_unprotect
 3661              	.LVL450:
 3662              	.L364:
 3663              	.LBE30:
1436:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 3664              		.loc 1 1436 0 is_stmt 1
 3665 0030 10BD     		pop	{r4, pc}
 3666              	.LVL451:
 3667              	.L365:
1398:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->conn->pcb.tcp != NULL) {
 3668              		.loc 1 1398 0
 3669 0032 F522     		movs	r2, #245
 3670 0034 0271     		strb	r2, [r0, #4]
1399:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       switch (NETCONNTYPE_GROUP(msg->conn->type)) {
 3671              		.loc 1 1399 0
 3672 0036 5868     		ldr	r0, [r3, #4]
 3673              	.LVL452:
 3674 0038 0028     		cmp	r0, #0
 3675 003a EAD0     		beq	.L366
1400:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
 3676              		.loc 1 1400 0
 3677 003c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 108


 3678 003e 03F0F003 		and	r3, r3, #240
 3679 0042 202B     		cmp	r3, #32
 3680 0044 E5D1     		bne	.L366
1422:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->err = udp_send(msg->conn->pcb.udp, msg->msg.b->p);
 3681              		.loc 1 1422 0
 3682 0046 A168     		ldr	r1, [r4, #8]
 3683 0048 8B68     		ldr	r3, [r1, #8]
 3684 004a 23B9     		cbnz	r3, .L368
1423:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         } else {
 3685              		.loc 1 1423 0
 3686 004c 0968     		ldr	r1, [r1]
 3687 004e FFF7FEFF 		bl	udp_send
 3688              	.LVL453:
 3689 0052 2071     		strb	r0, [r4, #4]
 3690 0054 DDE7     		b	.L366
 3691              	.L368:
1425:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
 3692              		.loc 1 1425 0
 3693 0056 8B89     		ldrh	r3, [r1, #12]
 3694 0058 01F10802 		add	r2, r1, #8
 3695 005c 0968     		ldr	r1, [r1]
 3696 005e FFF7FEFF 		bl	udp_sendto
 3697              	.LVL454:
 3698 0062 2071     		strb	r0, [r4, #4]
 3699 0064 D5E7     		b	.L366
 3700              		.cfi_endproc
 3701              	.LFE178:
 3703              		.section	.text.lwip_netconn_do_recv,"ax",%progbits
 3704              		.align	1
 3705              		.global	lwip_netconn_do_recv
 3706              		.syntax unified
 3707              		.thumb
 3708              		.thumb_func
 3709              		.fpu fpv5-sp-d16
 3711              	lwip_netconn_do_recv:
 3712              	.LFB179:
1447:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
 3713              		.loc 1 1447 0
 3714              		.cfi_startproc
 3715              		@ args = 0, pretend = 0, frame = 0
 3716              		@ frame_needed = 0, uses_anonymous_args = 0
 3717              	.LVL455:
 3718 0000 70B5     		push	{r4, r5, r6, lr}
 3719              	.LCFI28:
 3720              		.cfi_def_cfa_offset 16
 3721              		.cfi_offset 4, -16
 3722              		.cfi_offset 5, -12
 3723              		.cfi_offset 6, -8
 3724              		.cfi_offset 14, -4
 3725 0002 0546     		mov	r5, r0
 3726              	.LVL456:
1450:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (msg->conn->pcb.tcp != NULL) {
 3727              		.loc 1 1450 0
 3728 0004 0023     		movs	r3, #0
 3729 0006 0371     		strb	r3, [r0, #4]
1451:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_TCP) {
 3730              		.loc 1 1451 0
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 109


 3731 0008 0368     		ldr	r3, [r0]
 3732 000a 5A68     		ldr	r2, [r3, #4]
 3733 000c 22B1     		cbz	r2, .L373
1452:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       u32_t remaining = msg->msg.r.len;
 3734              		.loc 1 1452 0
 3735 000e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3736 0010 03F0F003 		and	r3, r3, #240
 3737 0014 102B     		cmp	r3, #16
 3738 0016 0FD0     		beq	.L380
 3739              	.LVL457:
 3740              	.L373:
1461:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3741              		.loc 1 1461 0
 3742 0018 2B68     		ldr	r3, [r5]
 3743 001a 63B1     		cbz	r3, .L372
 3744              	.LBB31:
1461:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3745              		.loc 1 1461 0 is_stmt 0 discriminator 1
 3746 001c FFF7FEFF 		bl	sys_arch_protect
 3747              	.LVL458:
 3748 0020 2B68     		ldr	r3, [r5]
 3749 0022 93F90820 		ldrsb	r2, [r3, #8]
 3750 0026 12F10C0F 		cmn	r2, #12
 3751 002a 02DB     		blt	.L377
1461:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3752              		.loc 1 1461 0 discriminator 2
 3753 002c 95F90420 		ldrsb	r2, [r5, #4]
 3754 0030 1A72     		strb	r2, [r3, #8]
 3755              	.L377:
1461:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3756              		.loc 1 1461 0 discriminator 4
 3757 0032 FFF7FEFF 		bl	sys_arch_unprotect
 3758              	.LVL459:
 3759              	.L372:
 3760              	.LBE31:
1462:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 3761              		.loc 1 1462 0 is_stmt 1
 3762 0036 70BD     		pop	{r4, r5, r6, pc}
 3763              	.LVL460:
 3764              	.L380:
 3765              	.LBB32:
1453:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       do {
 3766              		.loc 1 1453 0
 3767 0038 8468     		ldr	r4, [r0, #8]
 3768              	.LVL461:
 3769 003a 08E0     		b	.L375
 3770              	.LVL462:
 3771              	.L378:
 3772              	.LBB33:
1455:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         tcp_recved(msg->conn->pcb.tcp, recved);
 3773              		.loc 1 1455 0
 3774 003c 4FF6FF76 		movw	r6, #65535
 3775              	.L374:
 3776              	.LVL463:
1456:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         remaining -= recved;
 3777              		.loc 1 1456 0 discriminator 4
 3778 0040 2B68     		ldr	r3, [r5]
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 110


 3779 0042 3146     		mov	r1, r6
 3780 0044 5868     		ldr	r0, [r3, #4]
 3781 0046 FFF7FEFF 		bl	tcp_recved
 3782              	.LVL464:
 3783              	.LBE33:
1458:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 3784              		.loc 1 1458 0 discriminator 4
 3785 004a A41B     		subs	r4, r4, r6
 3786              	.LVL465:
 3787 004c E4D0     		beq	.L373
 3788              	.LVL466:
 3789              	.L375:
 3790              	.LBB34:
1455:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         tcp_recved(msg->conn->pcb.tcp, recved);
 3791              		.loc 1 1455 0
 3792 004e B4F5803F 		cmp	r4, #65536
 3793 0052 F3D2     		bcs	.L378
1455:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         tcp_recved(msg->conn->pcb.tcp, recved);
 3794              		.loc 1 1455 0 is_stmt 0 discriminator 1
 3795 0054 A6B2     		uxth	r6, r4
 3796 0056 F3E7     		b	.L374
 3797              	.LBE34:
 3798              	.LBE32:
 3799              		.cfi_endproc
 3800              	.LFE179:
 3802              		.section	.text.lwip_netconn_do_write,"ax",%progbits
 3803              		.align	1
 3804              		.global	lwip_netconn_do_write
 3805              		.syntax unified
 3806              		.thumb
 3807              		.thumb_func
 3808              		.fpu fpv5-sp-d16
 3810              	lwip_netconn_do_write:
 3811              	.LFB181:
1652:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
 3812              		.loc 1 1652 0 is_stmt 1
 3813              		.cfi_startproc
 3814              		@ args = 0, pretend = 0, frame = 0
 3815              		@ frame_needed = 0, uses_anonymous_args = 0
 3816              	.LVL467:
 3817 0000 38B5     		push	{r3, r4, r5, lr}
 3818              	.LCFI29:
 3819              		.cfi_def_cfa_offset 16
 3820              		.cfi_offset 3, -16
 3821              		.cfi_offset 4, -12
 3822              		.cfi_offset 5, -8
 3823              		.cfi_offset 14, -4
 3824 0002 0446     		mov	r4, r0
 3825              	.LVL468:
1655:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = msg->conn->last_err;
 3826              		.loc 1 1655 0
 3827 0004 0368     		ldr	r3, [r0]
 3828 0006 93F90820 		ldrsb	r2, [r3, #8]
 3829 000a 12F10C0F 		cmn	r2, #12
 3830 000e 0FDA     		bge	.L382
1656:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 3831              		.loc 1 1656 0
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 111


 3832 0010 0271     		strb	r2, [r0, #4]
 3833              	.L383:
1697:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3834              		.loc 1 1697 0
 3835 0012 63B1     		cbz	r3, .L381
 3836              	.LBB35:
1697:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3837              		.loc 1 1697 0 is_stmt 0 discriminator 1
 3838 0014 FFF7FEFF 		bl	sys_arch_protect
 3839              	.LVL469:
 3840 0018 2368     		ldr	r3, [r4]
 3841 001a 93F90820 		ldrsb	r2, [r3, #8]
 3842 001e 12F10C0F 		cmn	r2, #12
 3843 0022 02DB     		blt	.L392
1697:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3844              		.loc 1 1697 0 discriminator 2
 3845 0024 94F90420 		ldrsb	r2, [r4, #4]
 3846 0028 1A72     		strb	r2, [r3, #8]
 3847              	.L392:
1697:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3848              		.loc 1 1697 0 discriminator 4
 3849 002a FFF7FEFF 		bl	sys_arch_unprotect
 3850              	.LVL470:
 3851              	.L381:
 3852              	.LBE35:
1698:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 3853              		.loc 1 1698 0 is_stmt 1
 3854 002e 38BD     		pop	{r3, r4, r5, pc}
 3855              	.LVL471:
 3856              	.L382:
1658:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 3857              		.loc 1 1658 0
 3858 0030 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 3859 0032 02F0F002 		and	r2, r2, #240
 3860 0036 102A     		cmp	r2, #16
 3861 0038 02D0     		beq	.L394
1693:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* (LWIP_UDP || LWIP_RAW) */
 3862              		.loc 1 1693 0
 3863 003a FA22     		movs	r2, #250
 3864 003c 0271     		strb	r2, [r0, #4]
 3865 003e E8E7     		b	.L383
 3866              	.L394:
1660:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* netconn is connecting, closing or in blocking write */
 3867              		.loc 1 1660 0
 3868 0040 5A78     		ldrb	r2, [r3, #1]	@ zero_extendqisi2
 3869 0042 12B1     		cbz	r2, .L385
1662:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else if (msg->conn->pcb.tcp != NULL) {
 3870              		.loc 1 1662 0
 3871 0044 FB22     		movs	r2, #251
 3872 0046 0271     		strb	r2, [r0, #4]
 3873 0048 E3E7     		b	.L383
 3874              	.L385:
1663:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->state = NETCONN_WRITE;
 3875              		.loc 1 1663 0
 3876 004a 5A68     		ldr	r2, [r3, #4]
 3877 004c 002A     		cmp	r2, #0
 3878 004e 48D0     		beq	.L386
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 112


1664:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* set all the variables used by lwip_netconn_do_writemore */
 3879              		.loc 1 1664 0
 3880 0050 0122     		movs	r2, #1
 3881 0052 5A70     		strb	r2, [r3, #1]
1666:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->conn->write_offset == 0);
 3882              		.loc 1 1666 0
 3883 0054 0368     		ldr	r3, [r0]
 3884 0056 5A6A     		ldr	r2, [r3, #36]
 3885 0058 002A     		cmp	r2, #0
 3886 005a 2ED0     		beq	.L395
 3887              	.L387:
1666:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->conn->write_offset == 0);
 3888              		.loc 1 1666 0 is_stmt 0 discriminator 3
 3889 005c 224B     		ldr	r3, .L398
 3890 005e 40F28362 		movw	r2, #1667
 3891 0062 2249     		ldr	r1, .L398+4
 3892 0064 2248     		ldr	r0, .L398+8
 3893              	.LVL472:
 3894 0066 FFF7FEFF 		bl	printf
 3895              	.LVL473:
 3896              	.L388:
1668:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->current_msg = msg;
 3897              		.loc 1 1668 0 is_stmt 1
 3898 006a E368     		ldr	r3, [r4, #12]
 3899 006c 4BB3     		cbz	r3, .L396
 3900              	.L389:
1669:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->write_offset = 0;
 3901              		.loc 1 1669 0
 3902 006e 2368     		ldr	r3, [r4]
 3903 0070 5C62     		str	r4, [r3, #36]
1670:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
 3904              		.loc 1 1670 0
 3905 0072 2368     		ldr	r3, [r4]
 3906 0074 0021     		movs	r1, #0
 3907 0076 1962     		str	r1, [r3, #32]
1672:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LWIP_ASSERT("state!", msg->conn->state == NETCONN_WRITE);
 3908              		.loc 1 1672 0
 3909 0078 2068     		ldr	r0, [r4]
 3910 007a FFF7FEFF 		bl	lwip_netconn_do_writemore
 3911              	.LVL474:
 3912 007e 0028     		cmp	r0, #0
 3913 0080 D5D0     		beq	.L381
1673:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           UNLOCK_TCPIP_CORE();
 3914              		.loc 1 1673 0
 3915 0082 2368     		ldr	r3, [r4]
 3916 0084 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 3917 0086 012B     		cmp	r3, #1
 3918 0088 23D1     		bne	.L397
 3919              	.L391:
1674:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           sys_arch_sem_wait(LWIP_API_MSG_SEM(msg), 0);
 3920              		.loc 1 1674 0
 3921 008a 1A4D     		ldr	r5, .L398+12
 3922 008c 2846     		mov	r0, r5
 3923 008e FFF7FEFF 		bl	sys_mutex_unlock
 3924              	.LVL475:
1675:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LOCK_TCPIP_CORE();
 3925              		.loc 1 1675 0
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 113


 3926 0092 2068     		ldr	r0, [r4]
 3927 0094 0021     		movs	r1, #0
 3928 0096 0C30     		adds	r0, r0, #12
 3929 0098 FFF7FEFF 		bl	sys_arch_sem_wait
 3930              	.LVL476:
1676:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LWIP_ASSERT("state!", msg->conn->state != NETCONN_WRITE);
 3931              		.loc 1 1676 0
 3932 009c 2846     		mov	r0, r5
 3933 009e FFF7FEFF 		bl	sys_mutex_lock
 3934              	.LVL477:
1677:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
 3935              		.loc 1 1677 0
 3936 00a2 2368     		ldr	r3, [r4]
 3937 00a4 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 3938 00a6 012B     		cmp	r3, #1
 3939 00a8 C1D1     		bne	.L381
1677:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
 3940              		.loc 1 1677 0 is_stmt 0 discriminator 1
 3941 00aa 0F4B     		ldr	r3, .L398
 3942 00ac 40F28D62 		movw	r2, #1677
 3943 00b0 1149     		ldr	r1, .L398+16
 3944 00b2 0F48     		ldr	r0, .L398+8
 3945 00b4 FFF7FEFF 		bl	printf
 3946              	.LVL478:
 3947 00b8 B9E7     		b	.L381
 3948              	.LVL479:
 3949              	.L395:
1666:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->conn->write_offset == 0);
 3950              		.loc 1 1666 0 is_stmt 1 discriminator 2
 3951 00ba 1B6A     		ldr	r3, [r3, #32]
 3952 00bc 002B     		cmp	r3, #0
 3953 00be D4D0     		beq	.L388
 3954 00c0 CCE7     		b	.L387
 3955              	.LVL480:
 3956              	.L396:
1668:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->current_msg = msg;
 3957              		.loc 1 1668 0 discriminator 1
 3958 00c2 094B     		ldr	r3, .L398
 3959 00c4 40F28462 		movw	r2, #1668
 3960 00c8 0C49     		ldr	r1, .L398+20
 3961 00ca 0948     		ldr	r0, .L398+8
 3962 00cc FFF7FEFF 		bl	printf
 3963              	.LVL481:
 3964 00d0 CDE7     		b	.L389
 3965              	.L397:
1673:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           UNLOCK_TCPIP_CORE();
 3966              		.loc 1 1673 0 discriminator 1
 3967 00d2 054B     		ldr	r3, .L398
 3968 00d4 40F28962 		movw	r2, #1673
 3969 00d8 0749     		ldr	r1, .L398+16
 3970 00da 0548     		ldr	r0, .L398+8
 3971 00dc FFF7FEFF 		bl	printf
 3972              	.LVL482:
 3973 00e0 D3E7     		b	.L391
 3974              	.LVL483:
 3975              	.L386:
1686:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 114


 3976              		.loc 1 1686 0
 3977 00e2 F522     		movs	r2, #245
 3978 00e4 0271     		strb	r2, [r0, #4]
 3979 00e6 94E7     		b	.L383
 3980              	.L399:
 3981              		.align	2
 3982              	.L398:
 3983 00e8 00000000 		.word	.LC0
 3984 00ec 34000000 		.word	.LC31
 3985 00f0 54000000 		.word	.LC2
 3986 00f4 00000000 		.word	lock_tcpip_core
 3987 00f8 50000000 		.word	.LC32
 3988 00fc 00000000 		.word	.LC34
 3989              		.cfi_endproc
 3990              	.LFE181:
 3992              		.section	.text.lwip_netconn_do_getaddr,"ax",%progbits
 3993              		.align	1
 3994              		.global	lwip_netconn_do_getaddr
 3995              		.syntax unified
 3996              		.thumb
 3997              		.thumb_func
 3998              		.fpu fpv5-sp-d16
 4000              	lwip_netconn_do_getaddr:
 4001              	.LFB182:
1708:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
 4002              		.loc 1 1708 0
 4003              		.cfi_startproc
 4004              		@ args = 0, pretend = 0, frame = 0
 4005              		@ frame_needed = 0, uses_anonymous_args = 0
 4006              	.LVL484:
 4007 0000 10B5     		push	{r4, lr}
 4008              	.LCFI30:
 4009              		.cfi_def_cfa_offset 8
 4010              		.cfi_offset 4, -8
 4011              		.cfi_offset 14, -4
 4012 0002 0446     		mov	r4, r0
 4013              	.LVL485:
1711:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->msg.ad.local) {
 4014              		.loc 1 1711 0
 4015 0004 0368     		ldr	r3, [r0]
 4016 0006 5B68     		ldr	r3, [r3, #4]
 4017 0008 002B     		cmp	r3, #0
 4018 000a 3FD0     		beq	.L401
1712:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       ip_addr_copy(API_EXPR_DEREF(msg->msg.ad.ipaddr),
 4019              		.loc 1 1712 0
 4020 000c 027C     		ldrb	r2, [r0, #16]	@ zero_extendqisi2
 4021 000e 9AB1     		cbz	r2, .L402
1713:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->pcb.ip->local_ip);
 4022              		.loc 1 1713 0
 4023 0010 8268     		ldr	r2, [r0, #8]
 4024 0012 1B68     		ldr	r3, [r3]
 4025 0014 1360     		str	r3, [r2]
 4026              	.L403:
1720:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     switch (NETCONNTYPE_GROUP(msg->conn->type)) {
 4027              		.loc 1 1720 0
 4028 0016 0023     		movs	r3, #0
 4029 0018 2371     		strb	r3, [r4, #4]
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 115


1721:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
 4030              		.loc 1 1721 0
 4031 001a 2268     		ldr	r2, [r4]
 4032 001c 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 4033 001e 03F0F003 		and	r3, r3, #240
 4034 0022 102B     		cmp	r3, #16
 4035 0024 18D0     		beq	.L405
 4036 0026 202B     		cmp	r3, #32
 4037 0028 28D1     		bne	.L415
1734:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         API_EXPR_DEREF(msg->msg.ad.port) = msg->conn->pcb.udp->local_port;
 4038              		.loc 1 1734 0
 4039 002a 237C     		ldrb	r3, [r4, #16]	@ zero_extendqisi2
 4040 002c 43B1     		cbz	r3, .L407
1735:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
 4041              		.loc 1 1735 0
 4042 002e 5268     		ldr	r2, [r2, #4]
 4043 0030 E368     		ldr	r3, [r4, #12]
 4044 0032 528A     		ldrh	r2, [r2, #18]
 4045 0034 1A80     		strh	r2, [r3]	@ movhi
 4046 0036 2BE0     		b	.L408
 4047              	.L402:
1716:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->pcb.ip->remote_ip);
 4048              		.loc 1 1716 0
 4049 0038 8268     		ldr	r2, [r0, #8]
 4050 003a 5B68     		ldr	r3, [r3, #4]
 4051 003c 1360     		str	r3, [r2]
 4052 003e EAE7     		b	.L403
 4053              	.L407:
1737:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->err = ERR_CONN;
 4054              		.loc 1 1737 0
 4055 0040 5368     		ldr	r3, [r2, #4]
 4056 0042 1A7C     		ldrb	r2, [r3, #16]	@ zero_extendqisi2
 4057 0044 12F0040F 		tst	r2, #4
 4058 0048 02D1     		bne	.L409
1738:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         } else {
 4059              		.loc 1 1738 0
 4060 004a F523     		movs	r3, #245
 4061 004c 2371     		strb	r3, [r4, #4]
 4062 004e 1FE0     		b	.L408
 4063              	.L409:
1740:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
 4064              		.loc 1 1740 0
 4065 0050 E268     		ldr	r2, [r4, #12]
 4066 0052 9B8A     		ldrh	r3, [r3, #20]
 4067 0054 1380     		strh	r3, [r2]	@ movhi
 4068 0056 1BE0     		b	.L408
 4069              	.L405:
1747:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           ((msg->conn->pcb.tcp->state == CLOSED) || (msg->conn->pcb.tcp->state == LISTEN))) {
 4070              		.loc 1 1747 0
 4071 0058 237C     		ldrb	r3, [r4, #16]	@ zero_extendqisi2
 4072 005a 1BB9     		cbnz	r3, .L410
1748:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* pcb is not connected and remote name is requested */
 4073              		.loc 1 1748 0 discriminator 1
 4074 005c 5168     		ldr	r1, [r2, #4]
 4075 005e 097D     		ldrb	r1, [r1, #20]	@ zero_extendqisi2
1747:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           ((msg->conn->pcb.tcp->state == CLOSED) || (msg->conn->pcb.tcp->state == LISTEN))) {
 4076              		.loc 1 1747 0 discriminator 1
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 116


 4077 0060 0129     		cmp	r1, #1
 4078 0062 05D9     		bls	.L417
 4079              	.L410:
1752:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 4080              		.loc 1 1752 0
 4081 0064 3BB1     		cbz	r3, .L411
1752:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 4082              		.loc 1 1752 0 is_stmt 0 discriminator 1
 4083 0066 5368     		ldr	r3, [r2, #4]
 4084 0068 DA8A     		ldrh	r2, [r3, #22]
 4085              	.L412:
1752:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 4086              		.loc 1 1752 0 discriminator 4
 4087 006a E368     		ldr	r3, [r4, #12]
 4088 006c 1A80     		strh	r2, [r3]	@ movhi
 4089 006e 0FE0     		b	.L408
 4090              	.L417:
1750:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
 4091              		.loc 1 1750 0 is_stmt 1
 4092 0070 F523     		movs	r3, #245
 4093 0072 2371     		strb	r3, [r4, #4]
 4094 0074 0CE0     		b	.L408
 4095              	.L411:
1752:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 4096              		.loc 1 1752 0 discriminator 2
 4097 0076 5368     		ldr	r3, [r2, #4]
 4098 0078 1A8B     		ldrh	r2, [r3, #24]
 4099 007a F6E7     		b	.L412
 4100              	.L415:
1757:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       break;
 4101              		.loc 1 1757 0 discriminator 1
 4102 007c 0C4B     		ldr	r3, .L418
 4103 007e 40F2DD62 		movw	r2, #1757
 4104 0082 0C49     		ldr	r1, .L418+4
 4105 0084 0C48     		ldr	r0, .L418+8
 4106              	.LVL486:
 4107 0086 FFF7FEFF 		bl	printf
 4108              	.LVL487:
1758:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 4109              		.loc 1 1758 0 discriminator 1
 4110 008a 01E0     		b	.L408
 4111              	.LVL488:
 4112              	.L401:
1761:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 4113              		.loc 1 1761 0
 4114 008c F523     		movs	r3, #245
 4115 008e 0371     		strb	r3, [r0, #4]
 4116              	.LVL489:
 4117              	.L408:
1763:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 4118              		.loc 1 1763 0
 4119 0090 2368     		ldr	r3, [r4]
 4120 0092 63B1     		cbz	r3, .L400
 4121              	.LBB36:
1763:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 4122              		.loc 1 1763 0 is_stmt 0 discriminator 1
 4123 0094 FFF7FEFF 		bl	sys_arch_protect
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 117


 4124              	.LVL490:
 4125 0098 2368     		ldr	r3, [r4]
 4126 009a 93F90820 		ldrsb	r2, [r3, #8]
 4127 009e 12F10C0F 		cmn	r2, #12
 4128 00a2 02DB     		blt	.L414
1763:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 4129              		.loc 1 1763 0 discriminator 2
 4130 00a4 94F90420 		ldrsb	r2, [r4, #4]
 4131 00a8 1A72     		strb	r2, [r3, #8]
 4132              	.L414:
1763:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 4133              		.loc 1 1763 0 discriminator 4
 4134 00aa FFF7FEFF 		bl	sys_arch_unprotect
 4135              	.LVL491:
 4136              	.L400:
 4137              	.LBE36:
1764:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 4138              		.loc 1 1764 0 is_stmt 1
 4139 00ae 10BD     		pop	{r4, pc}
 4140              	.LVL492:
 4141              	.L419:
 4142              		.align	2
 4143              	.L418:
 4144 00b0 00000000 		.word	.LC0
 4145 00b4 00000000 		.word	.LC35
 4146 00b8 54000000 		.word	.LC2
 4147              		.cfi_endproc
 4148              	.LFE182:
 4150              		.section	.text.lwip_netconn_do_close,"ax",%progbits
 4151              		.align	1
 4152              		.global	lwip_netconn_do_close
 4153              		.syntax unified
 4154              		.thumb
 4155              		.thumb_func
 4156              		.fpu fpv5-sp-d16
 4158              	lwip_netconn_do_close:
 4159              	.LFB183:
1775:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
 4160              		.loc 1 1775 0
 4161              		.cfi_startproc
 4162              		@ args = 0, pretend = 0, frame = 0
 4163              		@ frame_needed = 0, uses_anonymous_args = 0
 4164              	.LVL493:
 4165 0000 38B5     		push	{r3, r4, r5, lr}
 4166              	.LCFI31:
 4167              		.cfi_def_cfa_offset 16
 4168              		.cfi_offset 3, -16
 4169              		.cfi_offset 4, -12
 4170              		.cfi_offset 5, -8
 4171              		.cfi_offset 14, -4
 4172 0002 0446     		mov	r4, r0
 4173              	.LVL494:
1779:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* First check if this is a TCP netconn and if it is in a correct state
 4174              		.loc 1 1779 0
 4175 0004 0068     		ldr	r0, [r0]
 4176              	.LVL495:
 4177 0006 4278     		ldrb	r2, [r0, #1]	@ zero_extendqisi2
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 118


 4178              	.LVL496:
1782:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_TCP) &&
 4179              		.loc 1 1782 0
 4180 0008 4368     		ldr	r3, [r0, #4]
 4181 000a 23B1     		cbz	r3, .L421
1783:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       ((msg->msg.sd.shut == NETCONN_SHUT_RDWR) || (state != NETCONN_LISTEN))) {
 4182              		.loc 1 1783 0 discriminator 1
 4183 000c 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
1782:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_TCP) &&
 4184              		.loc 1 1782 0 discriminator 1
 4185 000e 03F0F003 		and	r3, r3, #240
 4186 0012 102B     		cmp	r3, #16
 4187 0014 10D0     		beq	.L433
 4188              	.L421:
1840:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 4189              		.loc 1 1840 0
 4190 0016 F523     		movs	r3, #245
 4191 0018 2371     		strb	r3, [r4, #4]
 4192              	.L424:
1842:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 4193              		.loc 1 1842 0
 4194 001a 60B1     		cbz	r0, .L420
 4195              	.LBB37:
1842:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 4196              		.loc 1 1842 0 is_stmt 0 discriminator 1
 4197 001c FFF7FEFF 		bl	sys_arch_protect
 4198              	.LVL497:
 4199 0020 2368     		ldr	r3, [r4]
 4200 0022 93F90820 		ldrsb	r2, [r3, #8]
 4201 0026 12F10C0F 		cmn	r2, #12
 4202 002a 02DB     		blt	.L431
1842:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 4203              		.loc 1 1842 0 discriminator 2
 4204 002c 94F90420 		ldrsb	r2, [r4, #4]
 4205 0030 1A72     		strb	r2, [r3, #8]
 4206              	.L431:
1842:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 4207              		.loc 1 1842 0 discriminator 4
 4208 0032 FFF7FEFF 		bl	sys_arch_unprotect
 4209              	.LVL498:
 4210              	.L420:
 4211              	.LBE37:
1843:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 4212              		.loc 1 1843 0 is_stmt 1
 4213 0036 38BD     		pop	{r3, r4, r5, pc}
 4214              	.LVL499:
 4215              	.L433:
1784:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* Check if we are in a connected state */
 4216              		.loc 1 1784 0
 4217 0038 237A     		ldrb	r3, [r4, #8]	@ zero_extendqisi2
1783:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       ((msg->msg.sd.shut == NETCONN_SHUT_RDWR) || (state != NETCONN_LISTEN))) {
 4218              		.loc 1 1783 0
 4219 003a 032B     		cmp	r3, #3
 4220 003c 01D0     		beq	.L422
1784:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* Check if we are in a connected state */
 4221              		.loc 1 1784 0
 4222 003e 022A     		cmp	r2, #2
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 119


 4223 0040 E9D0     		beq	.L421
 4224              	.L422:
1786:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* TCP connect in progress: cannot shutdown */
 4225              		.loc 1 1786 0
 4226 0042 032A     		cmp	r2, #3
 4227 0044 36D0     		beq	.L434
1789:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_NETCONN_FULLDUPLEX
 4228              		.loc 1 1789 0
 4229 0046 012A     		cmp	r2, #1
 4230 0048 37D0     		beq	.L435
1815:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* Drain and delete mboxes */
 4231              		.loc 1 1815 0
 4232 004a 13F0010F 		tst	r3, #1
 4233 004e 37D1     		bne	.L436
 4234              	.LVL500:
 4235              	.L426:
1819:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->write_offset == 0);
 4236              		.loc 1 1819 0
 4237 0050 2368     		ldr	r3, [r4]
 4238 0052 5A6A     		ldr	r2, [r3, #36]
 4239 0054 002A     		cmp	r2, #0
 4240 0056 36D0     		beq	.L437
 4241              	.L427:
1819:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->write_offset == 0);
 4242              		.loc 1 1819 0 is_stmt 0 discriminator 3
 4243 0058 214B     		ldr	r3, .L439
 4244 005a 40F21C72 		movw	r2, #1820
 4245 005e 2149     		ldr	r1, .L439+4
 4246 0060 2148     		ldr	r0, .L439+8
 4247 0062 FFF7FEFF 		bl	printf
 4248              	.LVL501:
 4249              	.L428:
1821:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->conn->current_msg = msg;
 4250              		.loc 1 1821 0 is_stmt 1
 4251 0066 2368     		ldr	r3, [r4]
 4252 0068 0422     		movs	r2, #4
 4253 006a 5A70     		strb	r2, [r3, #1]
1822:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
 4254              		.loc 1 1822 0
 4255 006c 2368     		ldr	r3, [r4]
 4256 006e 5C62     		str	r4, [r3, #36]
1824:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         LWIP_ASSERT("state!", msg->conn->state == NETCONN_CLOSE);
 4257              		.loc 1 1824 0
 4258 0070 0021     		movs	r1, #0
 4259 0072 2068     		ldr	r0, [r4]
 4260 0074 FFF7FEFF 		bl	lwip_netconn_do_close_internal
 4261              	.LVL502:
 4262 0078 0028     		cmp	r0, #0
 4263 007a DCD0     		beq	.L420
1825:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         UNLOCK_TCPIP_CORE();
 4264              		.loc 1 1825 0
 4265 007c 2368     		ldr	r3, [r4]
 4266 007e 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 4267 0080 042B     		cmp	r3, #4
 4268 0082 24D1     		bne	.L438
 4269              	.L430:
1826:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         sys_arch_sem_wait(LWIP_API_MSG_SEM(msg), 0);
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 120


 4270              		.loc 1 1826 0
 4271 0084 194D     		ldr	r5, .L439+12
 4272 0086 2846     		mov	r0, r5
 4273 0088 FFF7FEFF 		bl	sys_mutex_unlock
 4274              	.LVL503:
1827:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         LOCK_TCPIP_CORE();
 4275              		.loc 1 1827 0
 4276 008c 2068     		ldr	r0, [r4]
 4277 008e 0021     		movs	r1, #0
 4278 0090 0C30     		adds	r0, r0, #12
 4279 0092 FFF7FEFF 		bl	sys_arch_sem_wait
 4280              	.LVL504:
1828:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         LWIP_ASSERT("state!", msg->conn->state == NETCONN_NONE);
 4281              		.loc 1 1828 0
 4282 0096 2846     		mov	r0, r5
 4283 0098 FFF7FEFF 		bl	sys_mutex_lock
 4284              	.LVL505:
1829:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 4285              		.loc 1 1829 0
 4286 009c 2368     		ldr	r3, [r4]
 4287 009e 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 4288 00a0 002B     		cmp	r3, #0
 4289 00a2 C8D0     		beq	.L420
1829:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 4290              		.loc 1 1829 0 is_stmt 0 discriminator 1
 4291 00a4 0E4B     		ldr	r3, .L439
 4292 00a6 40F22572 		movw	r2, #1829
 4293 00aa 1149     		ldr	r1, .L439+16
 4294 00ac 0E48     		ldr	r0, .L439+8
 4295 00ae FFF7FEFF 		bl	printf
 4296              	.LVL506:
 4297 00b2 C0E7     		b	.L420
 4298              	.LVL507:
 4299              	.L434:
1788:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else if (state == NETCONN_WRITE) {
 4300              		.loc 1 1788 0 is_stmt 1
 4301 00b4 F523     		movs	r3, #245
 4302 00b6 2371     		strb	r3, [r4, #4]
 4303 00b8 AFE7     		b	.L424
 4304              	.L435:
1812:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else {
 4305              		.loc 1 1812 0
 4306 00ba FB23     		movs	r3, #251
 4307 00bc 2371     		strb	r3, [r4, #4]
 4308 00be ACE7     		b	.L424
 4309              	.L436:
1817:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 4310              		.loc 1 1817 0
 4311 00c0 FFF7FEFF 		bl	netconn_drain
 4312              	.LVL508:
 4313 00c4 C4E7     		b	.L426
 4314              	.L437:
1819:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->write_offset == 0);
 4315              		.loc 1 1819 0 discriminator 2
 4316 00c6 1B6A     		ldr	r3, [r3, #32]
 4317 00c8 002B     		cmp	r3, #0
 4318 00ca CCD0     		beq	.L428
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 121


 4319 00cc C4E7     		b	.L427
 4320              	.L438:
1825:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         UNLOCK_TCPIP_CORE();
 4321              		.loc 1 1825 0 discriminator 1
 4322 00ce 044B     		ldr	r3, .L439
 4323 00d0 40F22172 		movw	r2, #1825
 4324 00d4 0649     		ldr	r1, .L439+16
 4325 00d6 0448     		ldr	r0, .L439+8
 4326 00d8 FFF7FEFF 		bl	printf
 4327              	.LVL509:
 4328 00dc D2E7     		b	.L430
 4329              	.L440:
 4330 00de 00BF     		.align	2
 4331              	.L439:
 4332 00e0 00000000 		.word	.LC0
 4333 00e4 34000000 		.word	.LC31
 4334 00e8 54000000 		.word	.LC2
 4335 00ec 00000000 		.word	lock_tcpip_core
 4336 00f0 50000000 		.word	.LC32
 4337              		.cfi_endproc
 4338              	.LFE183:
 4340              		.section	.text.lwip_netconn_do_gethostbyname,"ax",%progbits
 4341              		.align	1
 4342              		.global	lwip_netconn_do_gethostbyname
 4343              		.syntax unified
 4344              		.thumb
 4345              		.thumb_func
 4346              		.fpu fpv5-sp-d16
 4348              	lwip_netconn_do_gethostbyname:
 4349              	.LFB185:
1925:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1926:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1927:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Execute a DNS query
1928:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_gethostbyname
1929:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1930:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param arg the dns_api_msg pointing to the query
1931:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1932:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
1933:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_gethostbyname(void *arg)
1934:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 4350              		.loc 1 1934 0
 4351              		.cfi_startproc
 4352              		@ args = 0, pretend = 0, frame = 0
 4353              		@ frame_needed = 0, uses_anonymous_args = 0
 4354              	.LVL510:
 4355 0000 30B5     		push	{r4, r5, lr}
 4356              	.LCFI32:
 4357              		.cfi_def_cfa_offset 12
 4358              		.cfi_offset 4, -12
 4359              		.cfi_offset 5, -8
 4360              		.cfi_offset 14, -4
 4361 0002 83B0     		sub	sp, sp, #12
 4362              	.LCFI33:
 4363              		.cfi_def_cfa_offset 24
 4364 0004 0446     		mov	r4, r0
 4365              	.LVL511:
1935:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct dns_api_msg *msg = (struct dns_api_msg*)arg;
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 122


1936:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   u8_t addrtype =
1937:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_IPV4 && LWIP_IPV6
1938:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->dns_addrtype;
1939:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else
1940:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     LWIP_DNS_ADDRTYPE_DEFAULT;
1941:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
1942:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1943:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   API_EXPR_DEREF(msg->err) = dns_gethostbyname_addrtype(msg->name,
 4366              		.loc 1 1943 0
 4367 0006 C568     		ldr	r5, [r0, #12]
 4368 0008 0023     		movs	r3, #0
 4369 000a 0093     		str	r3, [sp]
 4370 000c 0346     		mov	r3, r0
 4371 000e 084A     		ldr	r2, .L444
 4372 0010 4168     		ldr	r1, [r0, #4]
 4373 0012 0068     		ldr	r0, [r0]
 4374              	.LVL512:
 4375 0014 FFF7FEFF 		bl	dns_gethostbyname_addrtype
 4376              	.LVL513:
 4377 0018 2870     		strb	r0, [r5]
1944:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     API_EXPR_REF(msg->addr), lwip_netconn_do_dns_found, msg, addrtype);
1945:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (API_EXPR_DEREF(msg->err) != ERR_INPROGRESS) {
 4378              		.loc 1 1945 0
 4379 001a E368     		ldr	r3, [r4, #12]
 4380 001c 93F90030 		ldrsb	r3, [r3]
 4381 0020 13F1050F 		cmn	r3, #5
 4382 0024 02D0     		beq	.L441
1946:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* on error or immediate success, wake up the application
1947:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****      * task waiting in netconn_gethostbyname */
1948:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_sem_signal(API_EXPR_REF_SEM(msg->sem));
 4383              		.loc 1 1948 0
 4384 0026 A068     		ldr	r0, [r4, #8]
 4385 0028 FFF7FEFF 		bl	sys_sem_signal
 4386              	.LVL514:
 4387              	.L441:
1949:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1950:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 4388              		.loc 1 1950 0
 4389 002c 03B0     		add	sp, sp, #12
 4390              	.LCFI34:
 4391              		.cfi_def_cfa_offset 12
 4392              		@ sp needed
 4393 002e 30BD     		pop	{r4, r5, pc}
 4394              	.LVL515:
 4395              	.L445:
 4396              		.align	2
 4397              	.L444:
 4398 0030 00000000 		.word	lwip_netconn_do_dns_found
 4399              		.cfi_endproc
 4400              	.LFE185:
 4402              		.comm	netconn_aborted,1,1
 4403              		.section	.rodata.err_tcp.str1.4,"aMS",%progbits,1
 4404              		.align	2
 4405              	.LC6:
 4406 0000 636F6E6E 		.ascii	"conn != NULL\000"
 4406      20213D20 
 4406      4E554C4C 
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 123


 4406      00
 4407 000d 000000   		.space	3
 4408              	.LC7:
 4409 0010 636F6E6E 		.ascii	"conn->current_msg != NULL\000"
 4409      2D3E6375 
 4409      7272656E 
 4409      745F6D73 
 4409      6720213D 
 4410 002a 0000     		.space	2
 4411              	.LC8:
 4412 002c 696E6176 		.ascii	"inavlid op_completed_sem\000"
 4412      6C696420 
 4412      6F705F63 
 4412      6F6D706C 
 4412      65746564 
 4413 0045 000000   		.space	3
 4414              	.LC9:
 4415 0048 636F6E6E 		.ascii	"conn->current_msg == NULL\000"
 4415      2D3E6375 
 4415      7272656E 
 4415      745F6D73 
 4415      67203D3D 
 4416              		.section	.rodata.lwip_netconn_do_close_internal.str1.4,"aMS",%progbits,1
 4417              		.align	2
 4418              	.LC17:
 4419 0000 696E7661 		.ascii	"invalid conn\000"
 4419      6C696420 
 4419      636F6E6E 
 4419      00
 4420 000d 000000   		.space	3
 4421              	.LC18:
 4422 0010 74686973 		.ascii	"this is for tcp netconns only\000"
 4422      20697320 
 4422      666F7220 
 4422      74637020 
 4422      6E657463 
 4423 002e 0000     		.space	2
 4424              	.LC19:
 4425 0030 636F6E6E 		.ascii	"conn must be in state NETCONN_CLOSE\000"
 4425      206D7573 
 4425      74206265 
 4425      20696E20 
 4425      73746174 
 4426              	.LC20:
 4427 0054 70636220 		.ascii	"pcb already closed\000"
 4427      616C7265 
 4427      61647920 
 4427      636C6F73 
 4427      656400
 4428 0067 00       		.space	1
 4429              	.LC21:
 4430 0068 436C6F73 		.ascii	"Closing a listen pcb may not fail!\000"
 4430      696E6720 
 4430      61206C69 
 4430      7374656E 
 4430      20706362 
 4431              		.section	.rodata.lwip_netconn_do_connect.str1.4,"aMS",%progbits,1
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 124


 4432              		.align	2
 4433              	.LC33:
 4434 0000 496E7661 		.ascii	"Invalid netconn type\000"
 4434      6C696420 
 4434      6E657463 
 4434      6F6E6E20 
 4434      74797065 
 4435              		.section	.rodata.lwip_netconn_do_connected.str1.4,"aMS",%progbits,1
 4436              		.align	2
 4437              	.LC10:
 4438 0000 636F6E6E 		.ascii	"conn->state == NETCONN_CONNECT\000"
 4438      2D3E7374 
 4438      61746520 
 4438      3D3D204E 
 4438      4554434F 
 4439 001f 00       		.space	1
 4440              	.LC11:
 4441 0020 28636F6E 		.ascii	"(conn->current_msg != NULL) || conn->in_non_blockin"
 4441      6E2D3E63 
 4441      75727265 
 4441      6E745F6D 
 4441      73672021 
 4442 0053 675F636F 		.ascii	"g_connect\000"
 4442      6E6E6563 
 4442      7400
 4443 005d 000000   		.space	3
 4444              	.LC12:
 4445 0060 626C6F63 		.ascii	"blocking connect state error\000"
 4445      6B696E67 
 4445      20636F6E 
 4445      6E656374 
 4445      20737461 
 4446              		.section	.rodata.lwip_netconn_do_delconn.str1.4,"aMS",%progbits,1
 4447              		.align	2
 4448              	.LC29:
 4449 0000 6E657463 		.ascii	"netconn state error\000"
 4449      6F6E6E20 
 4449      73746174 
 4449      65206572 
 4449      726F7200 
 4450              	.LC30:
 4451 0014 626C6F63 		.ascii	"blocking connect in progress\000"
 4451      6B696E67 
 4451      20636F6E 
 4451      6E656374 
 4451      20696E20 
 4452 0031 000000   		.space	3
 4453              	.LC31:
 4454 0034 616C7265 		.ascii	"already writing or closing\000"
 4454      61647920 
 4454      77726974 
 4454      696E6720 
 4454      6F722063 
 4455 004f 00       		.space	1
 4456              	.LC32:
 4457 0050 73746174 		.ascii	"state!\000"
 4457      652100
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 125


 4458              		.section	.rodata.lwip_netconn_do_getaddr.str1.4,"aMS",%progbits,1
 4459              		.align	2
 4460              	.LC35:
 4461 0000 696E7661 		.ascii	"invalid netconn_type\000"
 4461      6C696420 
 4461      6E657463 
 4461      6F6E6E5F 
 4461      74797065 
 4462              		.section	.rodata.lwip_netconn_do_write.str1.4,"aMS",%progbits,1
 4463              		.align	2
 4464              	.LC34:
 4465 0000 6D73672D 		.ascii	"msg->msg.w.len != 0\000"
 4465      3E6D7367 
 4465      2E772E6C 
 4465      656E2021 
 4465      3D203000 
 4466              		.section	.rodata.lwip_netconn_do_writemore.str1.4,"aMS",%progbits,1
 4467              		.align	2
 4468              	.LC13:
 4469 0000 636F6E6E 		.ascii	"conn->state == NETCONN_WRITE\000"
 4469      2D3E7374 
 4469      61746520 
 4469      3D3D204E 
 4469      4554434F 
 4470 001d 000000   		.space	3
 4471              	.LC14:
 4472 0020 636F6E6E 		.ascii	"conn->pcb.tcp != NULL\000"
 4472      2D3E7063 
 4472      622E7463 
 4472      7020213D 
 4472      204E554C 
 4473 0036 0000     		.space	2
 4474              	.LC15:
 4475 0038 636F6E6E 		.ascii	"conn->write_offset < conn->current_msg->msg.w.len\000"
 4475      2D3E7772 
 4475      6974655F 
 4475      6F666673 
 4475      6574203C 
 4476 006a 0000     		.space	2
 4477              	.LC16:
 4478 006c 6C776970 		.ascii	"lwip_netconn_do_writemore: invalid length!\000"
 4478      5F6E6574 
 4478      636F6E6E 
 4478      5F646F5F 
 4478      77726974 
 4479              		.section	.rodata.netconn_alloc.str1.4,"aMS",%progbits,1
 4480              		.align	2
 4481              	.LC25:
 4482 0000 6E657463 		.ascii	"netconn_alloc: undefined netconn_type\000"
 4482      6F6E6E5F 
 4482      616C6C6F 
 4482      633A2075 
 4482      6E646566 
 4483              		.section	.rodata.netconn_free.str1.4,"aMS",%progbits,1
 4484              		.align	2
 4485              	.LC26:
 4486 0000 50434220 		.ascii	"PCB must be deallocated outside this function\000"
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 126


 4486      6D757374 
 4486      20626520 
 4486      6465616C 
 4486      6C6F6361 
 4487 002e 0000     		.space	2
 4488              	.LC27:
 4489 0030 72656376 		.ascii	"recvmbox must be deallocated before calling this fu"
 4489      6D626F78 
 4489      206D7573 
 4489      74206265 
 4489      20646561 
 4490 0063 6E637469 		.ascii	"nction\000"
 4490      6F6E00
 4491 006a 0000     		.space	2
 4492              	.LC28:
 4493 006c 61636365 		.ascii	"acceptmbox must be deallocated before calling this "
 4493      70746D62 
 4493      6F78206D 
 4493      75737420 
 4493      62652064 
 4494 009f 66756E63 		.ascii	"function\000"
 4494      74696F6E 
 4494      00
 4495              		.section	.rodata.pcb_new.str1.4,"aMS",%progbits,1
 4496              		.align	2
 4497              	.LC5:
 4498 0000 7063625F 		.ascii	"pcb_new: pcb already allocated\000"
 4498      6E65773A 
 4498      20706362 
 4498      20616C72 
 4498      65616479 
 4499              		.section	.rodata.recv_tcp.str1.4,"aMS",%progbits,1
 4500              		.align	2
 4501              	.LC22:
 4502 0000 72656376 		.ascii	"recv_tcp must have a pcb argument\000"
 4502      5F746370 
 4502      206D7573 
 4502      74206861 
 4502      76652061 
 4503 0022 0000     		.space	2
 4504              	.LC23:
 4505 0024 72656376 		.ascii	"recv_tcp must have an argument\000"
 4505      5F746370 
 4505      206D7573 
 4505      74206861 
 4505      76652061 
 4506 0043 00       		.space	1
 4507              	.LC24:
 4508 0044 72656376 		.ascii	"recv_tcp: recv for wrong pcb!\000"
 4508      5F746370 
 4508      3A207265 
 4508      63762066 
 4508      6F722077 
 4509              		.section	.rodata.recv_udp.str1.4,"aMS",%progbits,1
 4510              		.align	2
 4511              	.LC0:
 4512 0000 4D696464 		.ascii	"Middlewares/Third_Party/LwIP/src/api/api_msg.c\000"
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 127


 4512      6C657761 
 4512      7265732F 
 4512      54686972 
 4512      645F5061 
 4513 002f 00       		.space	1
 4514              	.LC1:
 4515 0030 72656376 		.ascii	"recv_udp must have a pcb argument\000"
 4515      5F756470 
 4515      206D7573 
 4515      74206861 
 4515      76652061 
 4516 0052 0000     		.space	2
 4517              	.LC2:
 4518 0054 41737365 		.ascii	"Assertion \"%s\" failed at line %d in %s\012\000"
 4518      7274696F 
 4518      6E202225 
 4518      73222066 
 4518      61696C65 
 4519              	.LC3:
 4520 007c 72656376 		.ascii	"recv_udp must have an argument\000"
 4520      5F756470 
 4520      206D7573 
 4520      74206861 
 4520      76652061 
 4521 009b 00       		.space	1
 4522              	.LC4:
 4523 009c 72656376 		.ascii	"recv_udp: recv for wrong pcb!\000"
 4523      5F756470 
 4523      3A207265 
 4523      63762066 
 4523      6F722077 
 4524              		.text
 4525              	.Letext0:
 4526              		.file 2 "c:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\machine\\_default
 4527              		.file 3 "c:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\sys\\_stdint.h"
 4528              		.file 4 "Drivers/CMSIS/Include/core_cm7.h"
 4529              		.file 5 "Drivers/CMSIS/Device/ST/STM32F7xx/Include/system_stm32f7xx.h"
 4530              		.file 6 "c:\\program files (x86)\\gnu\\7_2018-q2-update\\lib\\gcc\\arm-none-eabi\\7.3.1\\include\\
 4531              		.file 7 "c:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\sys\\lock.h"
 4532              		.file 8 "c:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\sys\\_types.h"
 4533              		.file 9 "c:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\sys\\reent.h"
 4534              		.file 10 "c:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\stdlib.h"
 4535              		.file 11 "Middlewares/Third_Party/LwIP/system/arch/cc.h"
 4536              		.file 12 "c:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\time.h"
 4537              		.file 13 "Middlewares/Third_Party/LwIP/src/include/lwip/arch.h"
 4538              		.file 14 "Middlewares/Third_Party/LwIP/src/include/lwip/ip4_addr.h"
 4539              		.file 15 "Middlewares/Third_Party/LwIP/src/include/lwip/ip_addr.h"
 4540              		.file 16 "Middlewares/Third_Party/LwIP/src/include/lwip/err.h"
 4541              		.file 17 "Middlewares/Third_Party/FreeRTOS/Source/include/queue.h"
 4542              		.file 18 "Middlewares/Third_Party/FreeRTOS/Source/include/semphr.h"
 4543              		.file 19 "Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.h"
 4544              		.file 20 "Middlewares/Third_Party/LwIP/system/arch/sys_arch.h"
 4545              		.file 21 "Middlewares/Third_Party/LwIP/src/include/lwip/pbuf.h"
 4546              		.file 22 "Middlewares/Third_Party/LwIP/src/include/lwip/memp.h"
 4547              		.file 23 "Middlewares/Third_Party/LwIP/src/include/lwip/priv/memp_priv.h"
 4548              		.file 24 "Middlewares/Third_Party/LwIP/src/include/lwip/netif.h"
 4549              		.file 25 "Middlewares/Third_Party/LwIP/src/include/lwip/netbuf.h"
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 128


 4550              		.file 26 "Middlewares/Third_Party/LwIP/src/include/lwip/api.h"
 4551              		.file 27 "Middlewares/Third_Party/LwIP/src/include/lwip/ip.h"
 4552              		.file 28 "Middlewares/Third_Party/LwIP/src/include/lwip/tcp.h"
 4553              		.file 29 "Middlewares/Third_Party/LwIP/src/include/lwip/udp.h"
 4554              		.file 30 "Middlewares/Third_Party/LwIP/src/include/lwip/priv/api_msg.h"
 4555              		.file 31 "Middlewares/Third_Party/LwIP/src/include/lwip/timeouts.h"
 4556              		.file 32 "Middlewares/Third_Party/LwIP/src/include/lwip/tcpip.h"
 4557              		.file 33 "Middlewares/Third_Party/LwIP/src/include/lwip/prot/ip4.h"
 4558              		.file 34 "Middlewares/Third_Party/LwIP/src/include/lwip/dns.h"
 4559              		.file 35 "Middlewares/Third_Party/LwIP/src/include/lwip/sys.h"
 4560              		.file 36 "c:\\program files (x86)\\gnu\\7_2018-q2-update\\arm-none-eabi\\include\\stdio.h"
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 129


DEFINED SYMBOLS
                            *ABS*:00000000 api_msg.c
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:18     .text.recv_udp:00000000 $t
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:24     .text.recv_udp:00000000 recv_udp
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:182    .text.recv_udp:000000b0 $d
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:191    .text.setup_tcp:00000000 $t
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:197    .text.setup_tcp:00000000 setup_tcp
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:245    .text.setup_tcp:00000030 $d
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:1959   .text.recv_tcp:00000000 recv_tcp
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:1856   .text.sent_tcp:00000000 sent_tcp
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:1746   .text.poll_tcp:00000000 poll_tcp
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:374    .text.err_tcp:00000000 err_tcp
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:253    .text.pcb_new:00000000 $t
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:259    .text.pcb_new:00000000 pcb_new
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:360    .text.pcb_new:00000078 $d
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:368    .text.err_tcp:00000000 $t
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:623    .text.err_tcp:00000128 $d
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:635    .text.lwip_netconn_do_connected:00000000 $t
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:641    .text.lwip_netconn_do_connected:00000000 lwip_netconn_do_connected
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:826    .text.lwip_netconn_do_connected:000000e0 $d
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:835    .text.lwip_netconn_do_dns_found:00000000 $t
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:841    .text.lwip_netconn_do_dns_found:00000000 lwip_netconn_do_dns_found
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:887    .text.lwip_netconn_do_writemore:00000000 $t
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:893    .text.lwip_netconn_do_writemore:00000000 lwip_netconn_do_writemore
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:1317   .text.lwip_netconn_do_writemore:0000020c $d
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:1329   .text.lwip_netconn_do_close_internal:00000000 $t
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:1335   .text.lwip_netconn_do_close_internal:00000000 lwip_netconn_do_close_internal
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:1725   .text.lwip_netconn_do_close_internal:00000208 $d
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:1740   .text.poll_tcp:00000000 $t
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:1843   .text.poll_tcp:00000074 $d
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:1850   .text.sent_tcp:00000000 $t
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:1946   .text.sent_tcp:00000068 $d
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:1953   .text.recv_tcp:00000000 $t
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:2122   .text.recv_tcp:000000bc $d
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:2131   .text.lwip_netconn_do_newconn:00000000 $t
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:2138   .text.lwip_netconn_do_newconn:00000000 lwip_netconn_do_newconn
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:2193   .text.netconn_alloc:00000000 $t
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:2200   .text.netconn_alloc:00000000 netconn_alloc
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:2307   .text.netconn_alloc:00000080 $d
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:2314   .text.netconn_free:00000000 $t
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:2321   .text.netconn_free:00000000 netconn_free
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:2398   .text.netconn_free:00000064 $d
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:2407   .text.netconn_drain:00000000 $t
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:2413   .text.netconn_drain:00000000 netconn_drain
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:2551   .text.netconn_drain:000000a4 $d
                            *COM*:00000001 netconn_aborted
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:2556   .text.accept_function:00000000 $t
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:2562   .text.accept_function:00000000 accept_function
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:2764   .text.accept_function:00000104 $d
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:2769   .text.lwip_netconn_do_delconn:00000000 $t
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:2776   .text.lwip_netconn_do_delconn:00000000 lwip_netconn_do_delconn
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:3029   .text.lwip_netconn_do_delconn:0000015c $d
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:3040   .text.lwip_netconn_do_bind:00000000 $t
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:3047   .text.lwip_netconn_do_bind:00000000 lwip_netconn_do_bind
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:3130   .text.lwip_netconn_do_connect:00000000 $t
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:3137   .text.lwip_netconn_do_connect:00000000 lwip_netconn_do_connect
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:3331   .text.lwip_netconn_do_connect:00000104 $d
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 130


C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:3341   .text.lwip_netconn_do_disconnect:00000000 $t
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:3348   .text.lwip_netconn_do_disconnect:00000000 lwip_netconn_do_disconnect
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:3410   .text.lwip_netconn_do_listen:00000000 $t
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:3417   .text.lwip_netconn_do_listen:00000000 lwip_netconn_do_listen
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:3609   .text.lwip_netconn_do_listen:000000ec $d
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:3614   .text.lwip_netconn_do_send:00000000 $t
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:3621   .text.lwip_netconn_do_send:00000000 lwip_netconn_do_send
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:3704   .text.lwip_netconn_do_recv:00000000 $t
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:3711   .text.lwip_netconn_do_recv:00000000 lwip_netconn_do_recv
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:3803   .text.lwip_netconn_do_write:00000000 $t
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:3810   .text.lwip_netconn_do_write:00000000 lwip_netconn_do_write
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:3983   .text.lwip_netconn_do_write:000000e8 $d
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:3993   .text.lwip_netconn_do_getaddr:00000000 $t
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:4000   .text.lwip_netconn_do_getaddr:00000000 lwip_netconn_do_getaddr
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:4144   .text.lwip_netconn_do_getaddr:000000b0 $d
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:4151   .text.lwip_netconn_do_close:00000000 $t
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:4158   .text.lwip_netconn_do_close:00000000 lwip_netconn_do_close
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:4332   .text.lwip_netconn_do_close:000000e0 $d
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:4341   .text.lwip_netconn_do_gethostbyname:00000000 $t
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:4348   .text.lwip_netconn_do_gethostbyname:00000000 lwip_netconn_do_gethostbyname
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:4398   .text.lwip_netconn_do_gethostbyname:00000030 $d
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:4404   .rodata.err_tcp.str1.4:00000000 $d
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:4417   .rodata.lwip_netconn_do_close_internal.str1.4:00000000 $d
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:4432   .rodata.lwip_netconn_do_connect.str1.4:00000000 $d
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:4436   .rodata.lwip_netconn_do_connected.str1.4:00000000 $d
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:4447   .rodata.lwip_netconn_do_delconn.str1.4:00000000 $d
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:4459   .rodata.lwip_netconn_do_getaddr.str1.4:00000000 $d
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:4463   .rodata.lwip_netconn_do_write.str1.4:00000000 $d
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:4467   .rodata.lwip_netconn_do_writemore.str1.4:00000000 $d
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:4480   .rodata.netconn_alloc.str1.4:00000000 $d
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:4484   .rodata.netconn_free.str1.4:00000000 $d
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:4496   .rodata.pcb_new.str1.4:00000000 $d
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:4500   .rodata.recv_tcp.str1.4:00000000 $d
C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s:4510   .rodata.recv_udp.str1.4:00000000 $d

UNDEFINED SYMBOLS
printf
sys_mbox_valid
memp_malloc
sys_mbox_trypost
pbuf_free
netbuf_delete
tcp_arg
tcp_recv
tcp_sent
tcp_poll
tcp_err
udp_new_ip_type
udp_recv
tcp_new_ip_type
sys_arch_protect
sys_arch_unprotect
sys_sem_valid
sys_sem_signal
tcp_write
tcp_output
tcp_close
ARM GAS  C:\Users\Patryk\AppData\Local\Temp\ccBgAT90.s 			page 131


tcp_accept
tcp_shutdown
tcp_abort
tcp_recved
sys_mbox_new
sys_sem_new
sys_mbox_set_invalid
memp_free
sys_mbox_free
sys_sem_free
sys_sem_set_invalid
sys_arch_mbox_tryfetch
udp_remove
sys_mutex_unlock
sys_arch_sem_wait
sys_mutex_lock
lock_tcpip_core
udp_bind
tcp_bind
udp_connect
tcp_connect
udp_disconnect
tcp_listen_with_backlog_and_err
udp_send
udp_sendto
dns_gethostbyname_addrtype
