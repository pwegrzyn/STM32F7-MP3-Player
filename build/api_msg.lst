ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 1


   1              		.cpu cortex-m7
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"api_msg.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.recv_udp,"ax",%progbits
  18              		.align	1
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu fpv5-sp-d16
  24              	recv_udp:
  25              	.LFB157:
  26              		.file 1 "Middlewares/Third_Party/LwIP/src/api/api_msg.c"
   1:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
   2:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @file
   3:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Sequential API Internal module
   4:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
   5:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
   6:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
   7:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /*
   8:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Copyright (c) 2001-2004 Swedish Institute of Computer Science.
   9:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * All rights reserved.
  10:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
  11:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Redistribution and use in source and binary forms, with or without modification,
  12:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * are permitted provided that the following conditions are met:
  13:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
  14:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * 1. Redistributions of source code must retain the above copyright notice,
  15:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *    this list of conditions and the following disclaimer.
  16:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  17:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *    this list of conditions and the following disclaimer in the documentation
  18:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *    and/or other materials provided with the distribution.
  19:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * 3. The name of the author may not be used to endorse or promote products
  20:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *    derived from this software without specific prior written permission.
  21:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
  22:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR IMPLIED
  23:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  24:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT
  25:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  26:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT
  27:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
  28:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
  29:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING
  30:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY
  31:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * OF SUCH DAMAGE.
  32:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 2


  33:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * This file is part of the lwIP TCP/IP stack.
  34:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
  35:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Author: Adam Dunkels <adam@sics.se>
  36:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
  37:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
  38:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
  39:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include "lwip/opt.h"
  40:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
  41:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_NETCONN /* don't build if not configured for use in lwipopts.h */
  42:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
  43:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include "lwip/priv/api_msg.h"
  44:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
  45:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include "lwip/ip.h"
  46:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include "lwip/ip_addr.h"
  47:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include "lwip/udp.h"
  48:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include "lwip/tcp.h"
  49:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include "lwip/raw.h"
  50:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
  51:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include "lwip/memp.h"
  52:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include "lwip/igmp.h"
  53:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include "lwip/dns.h"
  54:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include "lwip/mld6.h"
  55:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include "lwip/priv/tcpip_priv.h"
  56:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
  57:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include <string.h>
  58:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
  59:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /* netconns are polled once per second (e.g. continue write on memory error) */
  60:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #define NETCONN_TCP_POLL_INTERVAL 2
  61:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
  62:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #define SET_NONBLOCKING_CONNECT(conn, val)  do { if (val) { \
  63:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   (conn)->flags |= NETCONN_FLAG_IN_NONBLOCKING_CONNECT; \
  64:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** } else { \
  65:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   (conn)->flags &= ~ NETCONN_FLAG_IN_NONBLOCKING_CONNECT; }} while(0)
  66:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #define IN_NONBLOCKING_CONNECT(conn) (((conn)->flags & NETCONN_FLAG_IN_NONBLOCKING_CONNECT) != 0)
  67:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
  68:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /* forward declarations */
  69:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
  70:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
  71:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #define WRITE_DELAYED         , 1
  72:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #define WRITE_DELAYED_PARAM   , u8_t delayed
  73:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else /* LWIP_TCPIP_CORE_LOCKING */
  74:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #define WRITE_DELAYED
  75:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #define WRITE_DELAYED_PARAM
  76:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCPIP_CORE_LOCKING */
  77:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static err_t lwip_netconn_do_writemore(struct netconn *conn  WRITE_DELAYED_PARAM);
  78:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static err_t lwip_netconn_do_close_internal(struct netconn *conn  WRITE_DELAYED_PARAM);
  79:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
  80:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
  81:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
  82:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #define TCPIP_APIMSG_ACK(m)   NETCONN_SET_SAFE_ERR((m)->conn, (m)->err)
  83:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else /* LWIP_TCPIP_CORE_LOCKING */
  84:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #define TCPIP_APIMSG_ACK(m)   do { NETCONN_SET_SAFE_ERR((m)->conn, (m)->err); sys_sem_signal(LWIP_A
  85:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCPIP_CORE_LOCKING */
  86:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
  87:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
  88:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** u8_t netconn_aborted;
  89:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 3


  90:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
  91:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
  92:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
  93:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Receive callback function for RAW netconns.
  94:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Doesn't 'eat' the packet, only copies it and sends it to
  95:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * conn->recvmbox
  96:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
  97:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @see raw.h (struct raw_pcb.recv) for parameters and return value
  98:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
  99:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static u8_t
 100:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** recv_raw(void *arg, struct raw_pcb *pcb, struct pbuf *p,
 101:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     const ip_addr_t *addr)
 102:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 103:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct pbuf *q;
 104:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netbuf *buf;
 105:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn;
 106:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 107:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_UNUSED_ARG(addr);
 108:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn = (struct netconn *)arg;
 109:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 110:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if ((conn != NULL) && sys_mbox_valid(&conn->recvmbox)) {
 111:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_RCVBUF
 112:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     int recv_avail;
 113:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     SYS_ARCH_GET(conn->recv_avail, recv_avail);
 114:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if ((recv_avail + (int)(p->tot_len)) > conn->recv_bufsize) {
 115:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       return 0;
 116:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 117:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_RCVBUF */
 118:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* copy the whole packet into new pbufs */
 119:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     q = pbuf_alloc(PBUF_RAW, p->tot_len, PBUF_RAM);
 120:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (q != NULL) {
 121:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (pbuf_copy(q, p) != ERR_OK) {
 122:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         pbuf_free(q);
 123:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         q = NULL;
 124:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 125:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 126:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 127:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (q != NULL) {
 128:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       u16_t len;
 129:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       buf = (struct netbuf *)memp_malloc(MEMP_NETBUF);
 130:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (buf == NULL) {
 131:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         pbuf_free(q);
 132:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         return 0;
 133:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 134:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 135:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       buf->p = q;
 136:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       buf->ptr = q;
 137:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       ip_addr_copy(buf->addr, *ip_current_src_addr());
 138:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       buf->port = pcb->protocol;
 139:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 140:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       len = q->tot_len;
 141:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (sys_mbox_trypost(&conn->recvmbox, buf) != ERR_OK) {
 142:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         netbuf_delete(buf);
 143:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         return 0;
 144:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
 145:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_RCVBUF
 146:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         SYS_ARCH_INC(conn->recv_avail, len);
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 4


 147:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_RCVBUF */
 148:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* Register event with callback */
 149:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         API_EVENT(conn, NETCONN_EVT_RCVPLUS, len);
 150:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 151:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 152:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 153:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 154:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return 0; /* do not eat the packet */
 155:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 156:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_RAW*/
 157:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 158:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_UDP
 159:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 160:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Receive callback function for UDP netconns.
 161:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Posts the packet to conn->recvmbox or deletes it on memory error.
 162:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 163:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @see udp.h (struct udp_pcb.recv) for parameters
 164:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 165:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static void
 166:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** recv_udp(void *arg, struct udp_pcb *pcb, struct pbuf *p,
 167:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****    const ip_addr_t *addr, u16_t port)
 168:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
  27              		.loc 1 168 0
  28              		.cfi_startproc
  29              		@ args = 4, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              	.LVL0:
  32 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
  33              	.LCFI0:
  34              		.cfi_def_cfa_offset 24
  35              		.cfi_offset 4, -24
  36              		.cfi_offset 5, -20
  37              		.cfi_offset 6, -16
  38              		.cfi_offset 7, -12
  39              		.cfi_offset 8, -8
  40              		.cfi_offset 14, -4
  41 0004 0446     		mov	r4, r0
  42 0006 1646     		mov	r6, r2
  43 0008 9846     		mov	r8, r3
 169:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netbuf *buf;
 170:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn;
 171:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   u16_t len;
 172:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_RCVBUF
 173:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   int recv_avail;
 174:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_RCVBUF */
 175:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 176:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_UNUSED_ARG(pcb); /* only used for asserts... */
 177:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("recv_udp must have a pcb argument", pcb != NULL);
  44              		.loc 1 177 0
  45 000a 0D46     		mov	r5, r1
  46 000c 0029     		cmp	r1, #0
  47 000e 30D0     		beq	.L13
  48              	.LVL1:
  49              	.L2:
 178:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("recv_udp must have an argument", arg != NULL);
  50              		.loc 1 178 0
  51 0010 002C     		cmp	r4, #0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 5


  52 0012 35D0     		beq	.L14
  53              	.L3:
  54              	.LVL2:
 179:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn = (struct netconn *)arg;
 180:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 181:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (conn == NULL) {
  55              		.loc 1 181 0
  56 0014 002C     		cmp	r4, #0
  57 0016 3AD0     		beq	.L15
 182:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     pbuf_free(p);
 183:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return;
 184:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 185:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 186:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("recv_udp: recv for wrong pcb!", conn->pcb.udp == pcb);
  58              		.loc 1 186 0
  59 0018 6368     		ldr	r3, [r4, #4]
  60 001a 9D42     		cmp	r5, r3
  61 001c 05D0     		beq	.L6
  62              		.loc 1 186 0 is_stmt 0 discriminator 1
  63 001e 274B     		ldr	r3, .L19
  64 0020 BA22     		movs	r2, #186
  65 0022 2749     		ldr	r1, .L19+4
  66 0024 2748     		ldr	r0, .L19+8
  67 0026 FFF7FEFF 		bl	printf
  68              	.LVL3:
  69              	.L6:
 187:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 188:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_RCVBUF
 189:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   SYS_ARCH_GET(conn->recv_avail, recv_avail);
 190:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (!sys_mbox_valid(&conn->recvmbox) ||
 191:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       ((recv_avail + (int)(p->tot_len)) > conn->recv_bufsize)) {
 192:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else  /* LWIP_SO_RCVBUF */
 193:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (!sys_mbox_valid(&conn->recvmbox)) {
  70              		.loc 1 193 0 is_stmt 1
  71 002a 04F11007 		add	r7, r4, #16
  72 002e 3846     		mov	r0, r7
  73 0030 FFF7FEFF 		bl	sys_mbox_valid
  74              	.LVL4:
  75 0034 80B3     		cbz	r0, .L16
 194:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_RCVBUF */
 195:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     pbuf_free(p);
 196:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return;
 197:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 198:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 199:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   buf = (struct netbuf *)memp_malloc(MEMP_NETBUF);
  76              		.loc 1 199 0
  77 0036 0620     		movs	r0, #6
  78 0038 FFF7FEFF 		bl	memp_malloc
  79              	.LVL5:
 200:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (buf == NULL) {
  80              		.loc 1 200 0
  81 003c 0546     		mov	r5, r0
  82              	.LVL6:
  83 003e 80B3     		cbz	r0, .L17
 201:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     pbuf_free(p);
 202:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return;
 203:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 6


 204:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     buf->p = p;
  84              		.loc 1 204 0
  85 0040 0660     		str	r6, [r0]
 205:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     buf->ptr = p;
  86              		.loc 1 205 0
  87 0042 4660     		str	r6, [r0, #4]
 206:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     ip_addr_set(&buf->addr, addr);
  88              		.loc 1 206 0
  89 0044 B8F1000F 		cmp	r8, #0
  90 0048 30D0     		beq	.L11
  91              		.loc 1 206 0 is_stmt 0 discriminator 1
  92 004a D8F80030 		ldr	r3, [r8]
  93              	.L9:
  94              		.loc 1 206 0 discriminator 4
  95 004e AB60     		str	r3, [r5, #8]
 207:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     buf->port = port;
  96              		.loc 1 207 0 is_stmt 1 discriminator 4
  97 0050 BDF81830 		ldrh	r3, [sp, #24]
  98 0054 AB81     		strh	r3, [r5, #12]	@ movhi
 208:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_NETBUF_RECVINFO
 209:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     {
 210:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* get the UDP header - always in the first pbuf, ensured by udp_input */
 211:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       const struct udp_hdr* udphdr = (const struct udp_hdr*)ip_next_header_ptr();
 212:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_CHECKSUM_ON_COPY
 213:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       buf->flags = NETBUF_FLAG_DESTADDR;
 214:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_CHECKSUM_ON_COPY */
 215:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       ip_addr_set(&buf->toaddr, ip_current_dest_addr());
 216:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       buf->toport_chksum = udphdr->dest;
 217:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 218:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_NETBUF_RECVINFO */
 219:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 220:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 221:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   len = p->tot_len;
  99              		.loc 1 221 0 discriminator 4
 100 0056 3689     		ldrh	r6, [r6, #8]
 101              	.LVL7:
 222:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (sys_mbox_trypost(&conn->recvmbox, buf) != ERR_OK) {
 102              		.loc 1 222 0 discriminator 4
 103 0058 2946     		mov	r1, r5
 104 005a 3846     		mov	r0, r7
 105              	.LVL8:
 106 005c FFF7FEFF 		bl	sys_mbox_trypost
 107              	.LVL9:
 108 0060 30BB     		cbnz	r0, .L18
 223:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     netbuf_delete(buf);
 224:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return;
 225:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 226:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_RCVBUF
 227:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     SYS_ARCH_INC(conn->recv_avail, len);
 228:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_RCVBUF */
 229:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* Register event with callback */
 230:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     API_EVENT(conn, NETCONN_EVT_RCVPLUS, len);
 109              		.loc 1 230 0
 110 0062 A36A     		ldr	r3, [r4, #40]
 111 0064 1BB1     		cbz	r3, .L1
 112              		.loc 1 230 0 is_stmt 0 discriminator 1
 113 0066 3246     		mov	r2, r6
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 7


 114 0068 0021     		movs	r1, #0
 115 006a 2046     		mov	r0, r4
 116 006c 9847     		blx	r3
 117              	.LVL10:
 118              	.L1:
 119 006e BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 120              	.LVL11:
 121              	.L13:
 177:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("recv_udp must have an argument", arg != NULL);
 122              		.loc 1 177 0 is_stmt 1 discriminator 1
 123 0072 124B     		ldr	r3, .L19
 124              	.LVL12:
 125 0074 B122     		movs	r2, #177
 126              	.LVL13:
 127 0076 1449     		ldr	r1, .L19+12
 128              	.LVL14:
 129 0078 1248     		ldr	r0, .L19+8
 130              	.LVL15:
 131 007a FFF7FEFF 		bl	printf
 132              	.LVL16:
 133 007e C7E7     		b	.L2
 134              	.L14:
 178:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn = (struct netconn *)arg;
 135              		.loc 1 178 0 discriminator 1
 136 0080 0E4B     		ldr	r3, .L19
 137 0082 B222     		movs	r2, #178
 138 0084 1149     		ldr	r1, .L19+16
 139 0086 0F48     		ldr	r0, .L19+8
 140 0088 FFF7FEFF 		bl	printf
 141              	.LVL17:
 142 008c C2E7     		b	.L3
 143              	.LVL18:
 144              	.L15:
 182:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return;
 145              		.loc 1 182 0
 146 008e 3046     		mov	r0, r6
 147 0090 FFF7FEFF 		bl	pbuf_free
 148              	.LVL19:
 183:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 149              		.loc 1 183 0
 150 0094 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 151              	.LVL20:
 152              	.L16:
 195:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return;
 153              		.loc 1 195 0
 154 0098 3046     		mov	r0, r6
 155 009a FFF7FEFF 		bl	pbuf_free
 156              	.LVL21:
 196:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 157              		.loc 1 196 0
 158 009e BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 159              	.LVL22:
 160              	.L17:
 201:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return;
 161              		.loc 1 201 0
 162 00a2 3046     		mov	r0, r6
 163              	.LVL23:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 8


 164 00a4 FFF7FEFF 		bl	pbuf_free
 165              	.LVL24:
 202:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 166              		.loc 1 202 0
 167 00a8 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 168              	.LVL25:
 169              	.L11:
 206:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     buf->port = port;
 170              		.loc 1 206 0
 171 00ac 0023     		movs	r3, #0
 172 00ae CEE7     		b	.L9
 173              	.LVL26:
 174              	.L18:
 223:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return;
 175              		.loc 1 223 0
 176 00b0 2846     		mov	r0, r5
 177 00b2 FFF7FEFF 		bl	netbuf_delete
 178              	.LVL27:
 224:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 179              		.loc 1 224 0
 180 00b6 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 181              	.LVL28:
 182              	.L20:
 183 00ba 00BF     		.align	2
 184              	.L19:
 185 00bc 00000000 		.word	.LC0
 186 00c0 9C000000 		.word	.LC4
 187 00c4 54000000 		.word	.LC2
 188 00c8 30000000 		.word	.LC1
 189 00cc 7C000000 		.word	.LC3
 190              		.cfi_endproc
 191              	.LFE157:
 193              		.section	.text.setup_tcp,"ax",%progbits
 194              		.align	1
 195              		.syntax unified
 196              		.thumb
 197              		.thumb_func
 198              		.fpu fpv5-sp-d16
 200              	setup_tcp:
 201              	.LFB162:
 231:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 232:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 233:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDP */
 234:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 235:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 236:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 237:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Receive callback function for TCP netconns.
 238:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Posts the packet to conn->recvmbox, but doesn't delete it on errors.
 239:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 240:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @see tcp.h (struct tcp_pcb.recv) for parameters and return value
 241:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 242:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static err_t
 243:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** recv_tcp(void *arg, struct tcp_pcb *pcb, struct pbuf *p, err_t err)
 244:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 245:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn;
 246:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   u16_t len;
 247:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 9


 248:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_UNUSED_ARG(pcb);
 249:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("recv_tcp must have a pcb argument", pcb != NULL);
 250:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("recv_tcp must have an argument", arg != NULL);
 251:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn = (struct netconn *)arg;
 252:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 253:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (conn == NULL) {
 254:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_VAL;
 255:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 256:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("recv_tcp: recv for wrong pcb!", conn->pcb.tcp == pcb);
 257:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 258:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (!sys_mbox_valid(&conn->recvmbox)) {
 259:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* recvmbox already deleted */
 260:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (p != NULL) {
 261:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_recved(pcb, p->tot_len);
 262:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       pbuf_free(p);
 263:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 264:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_OK;
 265:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 266:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Unlike for UDP or RAW pcbs, don't check for available space
 267:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****      using recv_avail since that could break the connection
 268:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****      (data is already ACKed) */
 269:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 270:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* don't overwrite fatal errors! */
 271:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (err != ERR_OK) {
 272:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     NETCONN_SET_SAFE_ERR(conn, err);
 273:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 274:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 275:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (p != NULL) {
 276:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     len = p->tot_len;
 277:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 278:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     len = 0;
 279:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 280:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 281:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (sys_mbox_trypost(&conn->recvmbox, p) != ERR_OK) {
 282:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* don't deallocate p: it is presented to us later again from tcp_fasttmr! */
 283:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_MEM;
 284:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 285:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_RCVBUF
 286:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     SYS_ARCH_INC(conn->recv_avail, len);
 287:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_RCVBUF */
 288:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* Register event with callback */
 289:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     API_EVENT(conn, NETCONN_EVT_RCVPLUS, len);
 290:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 291:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 292:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return ERR_OK;
 293:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 294:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 295:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 296:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Poll callback function for TCP netconns.
 297:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Wakes up an application thread that waits for a connection to close
 298:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * or data to be sent. The application thread then takes the
 299:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * appropriate action to go on.
 300:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 301:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Signals the conn->sem.
 302:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * netconn_close waits for conn->sem if closing failed.
 303:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 304:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @see tcp.h (struct tcp_pcb.poll) for parameters and return value
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 10


 305:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 306:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static err_t
 307:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** poll_tcp(void *arg, struct tcp_pcb *pcb)
 308:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 309:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn = (struct netconn *)arg;
 310:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 311:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_UNUSED_ARG(pcb);
 312:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn != NULL", (conn != NULL));
 313:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 314:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (conn->state == NETCONN_WRITE) {
 315:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     lwip_netconn_do_writemore(conn  WRITE_DELAYED);
 316:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else if (conn->state == NETCONN_CLOSE) {
 317:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if !LWIP_SO_SNDTIMEO && !LWIP_SO_LINGER
 318:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (conn->current_msg && conn->current_msg->msg.sd.polls_left) {
 319:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg->msg.sd.polls_left--;
 320:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 321:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* !LWIP_SO_SNDTIMEO && !LWIP_SO_LINGER */
 322:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     lwip_netconn_do_close_internal(conn  WRITE_DELAYED);
 323:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 324:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* @todo: implement connect timeout here? */
 325:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 326:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Did a nonblocking write fail before? Then check available write-space. */
 327:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (conn->flags & NETCONN_FLAG_CHECK_WRITESPACE) {
 328:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* If the queued byte- or pbuf-count drops below the configured low-water limit,
 329:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        let select mark this pcb as writable again. */
 330:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if ((conn->pcb.tcp != NULL) && (tcp_sndbuf(conn->pcb.tcp) > TCP_SNDLOWAT) &&
 331:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (tcp_sndqueuelen(conn->pcb.tcp) < TCP_SNDQUEUELOWAT)) {
 332:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->flags &= ~NETCONN_FLAG_CHECK_WRITESPACE;
 333:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       API_EVENT(conn, NETCONN_EVT_SENDPLUS, 0);
 334:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 335:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 336:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 337:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return ERR_OK;
 338:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 339:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 340:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 341:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Sent callback function for TCP netconns.
 342:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Signals the conn->sem and calls API_EVENT.
 343:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * netconn_write waits for conn->sem if send buffer is low.
 344:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 345:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @see tcp.h (struct tcp_pcb.sent) for parameters and return value
 346:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 347:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static err_t
 348:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** sent_tcp(void *arg, struct tcp_pcb *pcb, u16_t len)
 349:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 350:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn = (struct netconn *)arg;
 351:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 352:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_UNUSED_ARG(pcb);
 353:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn != NULL", (conn != NULL));
 354:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 355:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (conn) {
 356:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (conn->state == NETCONN_WRITE) {
 357:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       lwip_netconn_do_writemore(conn  WRITE_DELAYED);
 358:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else if (conn->state == NETCONN_CLOSE) {
 359:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       lwip_netconn_do_close_internal(conn  WRITE_DELAYED);
 360:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 361:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 11


 362:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* If the queued byte- or pbuf-count drops below the configured low-water limit,
 363:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        let select mark this pcb as writable again. */
 364:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if ((conn->pcb.tcp != NULL) && (tcp_sndbuf(conn->pcb.tcp) > TCP_SNDLOWAT) &&
 365:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (tcp_sndqueuelen(conn->pcb.tcp) < TCP_SNDQUEUELOWAT)) {
 366:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->flags &= ~NETCONN_FLAG_CHECK_WRITESPACE;
 367:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       API_EVENT(conn, NETCONN_EVT_SENDPLUS, len);
 368:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 369:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 370:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 371:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return ERR_OK;
 372:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 373:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 374:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 375:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Error callback function for TCP netconns.
 376:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Signals conn->sem, posts to all conn mboxes and calls API_EVENT.
 377:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * The application thread has then to decide what to do.
 378:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 379:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @see tcp.h (struct tcp_pcb.err) for parameters
 380:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 381:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static void
 382:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** err_tcp(void *arg, err_t err)
 383:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 384:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn;
 385:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   enum netconn_state old_state;
 386:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 387:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn = (struct netconn *)arg;
 388:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn != NULL", (conn != NULL));
 389:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 390:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->pcb.tcp = NULL;
 391:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 392:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* reset conn->state now before waking up other threads */
 393:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   old_state = conn->state;
 394:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->state = NETCONN_NONE;
 395:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 396:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (old_state == NETCONN_CLOSE) {
 397:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* RST during close: let close return success & dealloc the netconn */
 398:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     err = ERR_OK;
 399:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     NETCONN_SET_SAFE_ERR(conn, ERR_OK);
 400:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 401:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* no check since this is always fatal! */
 402:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     SYS_ARCH_SET(conn->last_err, err);
 403:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 404:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 405:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* @todo: the type of NETCONN_EVT created should depend on 'old_state' */
 406:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 407:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Notify the user layer about a connection error. Used to signal select. */
 408:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   API_EVENT(conn, NETCONN_EVT_ERROR, 0);
 409:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Try to release selects pending on 'read' or 'write', too.
 410:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****      They will get an error if they actually try to read or write. */
 411:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   API_EVENT(conn, NETCONN_EVT_RCVPLUS, 0);
 412:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   API_EVENT(conn, NETCONN_EVT_SENDPLUS, 0);
 413:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 414:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* pass NULL-message to recvmbox to wake up pending recv */
 415:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (sys_mbox_valid(&conn->recvmbox)) {
 416:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* use trypost to prevent deadlock */
 417:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_trypost(&conn->recvmbox, NULL);
 418:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 12


 419:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* pass NULL-message to acceptmbox to wake up pending accept */
 420:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (sys_mbox_valid(&conn->acceptmbox)) {
 421:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* use trypost to preven deadlock */
 422:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_trypost(&conn->acceptmbox, NULL);
 423:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 424:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 425:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if ((old_state == NETCONN_WRITE) || (old_state == NETCONN_CLOSE) ||
 426:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (old_state == NETCONN_CONNECT)) {
 427:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* calling lwip_netconn_do_writemore/lwip_netconn_do_close_internal is not necessary
 428:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        since the pcb has already been deleted! */
 429:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     int was_nonblocking_connect = IN_NONBLOCKING_CONNECT(conn);
 430:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     SET_NONBLOCKING_CONNECT(conn, 0);
 431:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 432:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (!was_nonblocking_connect) {
 433:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       sys_sem_t* op_completed_sem;
 434:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* set error return code */
 435:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       LWIP_ASSERT("conn->current_msg != NULL", conn->current_msg != NULL);
 436:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg->err = err;
 437:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       op_completed_sem = LWIP_API_MSG_SEM(conn->current_msg);
 438:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       LWIP_ASSERT("inavlid op_completed_sem", sys_sem_valid(op_completed_sem));
 439:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg = NULL;
 440:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* wake up the waiting task */
 441:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       NETCONN_SET_SAFE_ERR(conn, err);
 442:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       sys_sem_signal(op_completed_sem);
 443:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 444:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 445:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     LWIP_ASSERT("conn->current_msg == NULL", conn->current_msg == NULL);
 446:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 447:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 448:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 449:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 450:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Setup a tcp_pcb with the correct callback function pointers
 451:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * and their arguments.
 452:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 453:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param conn the TCP netconn to setup
 454:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 455:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static void
 456:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** setup_tcp(struct netconn *conn)
 457:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 202              		.loc 1 457 0
 203              		.cfi_startproc
 204              		@ args = 0, pretend = 0, frame = 0
 205              		@ frame_needed = 0, uses_anonymous_args = 0
 206              	.LVL29:
 207 0000 10B5     		push	{r4, lr}
 208              	.LCFI1:
 209              		.cfi_def_cfa_offset 8
 210              		.cfi_offset 4, -8
 211              		.cfi_offset 14, -4
 212 0002 0146     		mov	r1, r0
 458:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct tcp_pcb *pcb;
 459:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 460:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   pcb = conn->pcb.tcp;
 213              		.loc 1 460 0
 214 0004 4468     		ldr	r4, [r0, #4]
 215              	.LVL30:
 461:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   tcp_arg(pcb, conn);
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 13


 216              		.loc 1 461 0
 217 0006 2046     		mov	r0, r4
 218              	.LVL31:
 219 0008 FFF7FEFF 		bl	tcp_arg
 220              	.LVL32:
 462:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   tcp_recv(pcb, recv_tcp);
 221              		.loc 1 462 0
 222 000c 0849     		ldr	r1, .L23
 223 000e 2046     		mov	r0, r4
 224 0010 FFF7FEFF 		bl	tcp_recv
 225              	.LVL33:
 463:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   tcp_sent(pcb, sent_tcp);
 226              		.loc 1 463 0
 227 0014 0749     		ldr	r1, .L23+4
 228 0016 2046     		mov	r0, r4
 229 0018 FFF7FEFF 		bl	tcp_sent
 230              	.LVL34:
 464:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   tcp_poll(pcb, poll_tcp, NETCONN_TCP_POLL_INTERVAL);
 231              		.loc 1 464 0
 232 001c 0222     		movs	r2, #2
 233 001e 0649     		ldr	r1, .L23+8
 234 0020 2046     		mov	r0, r4
 235 0022 FFF7FEFF 		bl	tcp_poll
 236              	.LVL35:
 465:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   tcp_err(pcb, err_tcp);
 237              		.loc 1 465 0
 238 0026 0549     		ldr	r1, .L23+12
 239 0028 2046     		mov	r0, r4
 240 002a FFF7FEFF 		bl	tcp_err
 241              	.LVL36:
 242 002e 10BD     		pop	{r4, pc}
 243              	.LVL37:
 244              	.L24:
 245              		.align	2
 246              	.L23:
 247 0030 00000000 		.word	recv_tcp
 248 0034 00000000 		.word	sent_tcp
 249 0038 00000000 		.word	poll_tcp
 250 003c 00000000 		.word	err_tcp
 251              		.cfi_endproc
 252              	.LFE162:
 254              		.section	.text.pcb_new,"ax",%progbits
 255              		.align	1
 256              		.syntax unified
 257              		.thumb
 258              		.thumb_func
 259              		.fpu fpv5-sp-d16
 261              	pcb_new:
 262              	.LFB164:
 466:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 467:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 468:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 469:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Accept callback function for TCP netconns.
 470:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Allocates a new netconn and posts that to conn->acceptmbox.
 471:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 472:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @see tcp.h (struct tcp_pcb_listen.accept) for parameters and return value
 473:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 14


 474:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static err_t
 475:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** accept_function(void *arg, struct tcp_pcb *newpcb, err_t err)
 476:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 477:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *newconn;
 478:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn = (struct netconn *)arg;
 479:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 480:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (conn == NULL) {
 481:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_VAL;
 482:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 483:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (!sys_mbox_valid(&conn->acceptmbox)) {
 484:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     LWIP_DEBUGF(API_MSG_DEBUG, ("accept_function: acceptmbox already deleted\n"));
 485:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_VAL;
 486:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 487:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 488:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (newpcb == NULL) {
 489:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* out-of-pcbs during connect: pass on this error to the application */
 490:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (sys_mbox_trypost(&conn->acceptmbox, &netconn_aborted) == ERR_OK) {
 491:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* Register event with callback */
 492:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       API_EVENT(conn, NETCONN_EVT_RCVPLUS, 0);
 493:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 494:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_VAL;
 495:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 496:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 497:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_DEBUGF(API_MSG_DEBUG, ("accept_function: newpcb->tate: %s\n", tcp_debug_state_str(newpcb->st
 498:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 499:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* We have to set the callback here even though
 500:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****    * the new socket is unknown. newconn->socket is marked as -1. */
 501:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   newconn = netconn_alloc(conn->type, conn->callback);
 502:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (newconn == NULL) {
 503:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* outof netconns: pass on this error to the application */
 504:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (sys_mbox_trypost(&conn->acceptmbox, &netconn_aborted) == ERR_OK) {
 505:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* Register event with callback */
 506:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       API_EVENT(conn, NETCONN_EVT_RCVPLUS, 0);
 507:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 508:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_MEM;
 509:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 510:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   newconn->pcb.tcp = newpcb;
 511:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   setup_tcp(newconn);
 512:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* no protection: when creating the pcb, the netconn is not yet known
 513:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****      to the application thread */
 514:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   newconn->last_err = err;
 515:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 516:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* handle backlog counter */
 517:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   tcp_backlog_delayed(newpcb);
 518:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 519:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (sys_mbox_trypost(&conn->acceptmbox, newconn) != ERR_OK) {
 520:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* When returning != ERR_OK, the pcb is aborted in tcp_process(),
 521:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        so do nothing here! */
 522:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* remove all references to this netconn from the pcb */
 523:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     struct tcp_pcb* pcb = newconn->pcb.tcp;
 524:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_arg(pcb, NULL);
 525:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_recv(pcb, NULL);
 526:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_sent(pcb, NULL);
 527:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_poll(pcb, NULL, 0);
 528:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_err(pcb, NULL);
 529:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* remove reference from to the pcb from this netconn */
 530:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     newconn->pcb.tcp = NULL;
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 15


 531:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* no need to drain since we know the recvmbox is empty. */
 532:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_free(&newconn->recvmbox);
 533:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_set_invalid(&newconn->recvmbox);
 534:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     netconn_free(newconn);
 535:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_MEM;
 536:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 537:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* Register event with callback */
 538:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     API_EVENT(conn, NETCONN_EVT_RCVPLUS, 0);
 539:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 540:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 541:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return ERR_OK;
 542:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 543:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 544:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 545:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 546:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Create a new pcb of a specific type.
 547:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from lwip_netconn_do_newconn().
 548:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 549:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param msg the api_msg_msg describing the connection type
 550:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 551:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static void
 552:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** pcb_new(struct api_msg *msg)
 553:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 263              		.loc 1 553 0
 264              		.cfi_startproc
 265              		@ args = 0, pretend = 0, frame = 0
 266              		@ frame_needed = 0, uses_anonymous_args = 0
 267              	.LVL38:
 268 0000 38B5     		push	{r3, r4, r5, lr}
 269              	.LCFI2:
 270              		.cfi_def_cfa_offset 16
 271              		.cfi_offset 3, -16
 272              		.cfi_offset 4, -12
 273              		.cfi_offset 5, -8
 274              		.cfi_offset 14, -4
 275 0002 0446     		mov	r4, r0
 276              	.LVL39:
 554:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   enum lwip_ip_addr_type iptype = IPADDR_TYPE_V4;
 555:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 556:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("pcb_new: pcb already allocated", msg->conn->pcb.tcp == NULL);
 277              		.loc 1 556 0
 278 0004 0368     		ldr	r3, [r0]
 279 0006 5B68     		ldr	r3, [r3, #4]
 280 0008 33B1     		cbz	r3, .L26
 281              		.loc 1 556 0 is_stmt 0 discriminator 1
 282 000a 1B4B     		ldr	r3, .L37
 283 000c 4FF40B72 		mov	r2, #556
 284 0010 1A49     		ldr	r1, .L37+4
 285 0012 1B48     		ldr	r0, .L37+8
 286              	.LVL40:
 287 0014 FFF7FEFF 		bl	printf
 288              	.LVL41:
 289              	.L26:
 557:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  
 558:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_IPV6 && LWIP_IPV4
 559:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* IPv6: Dual-stack by default, unless netconn_set_ipv6only() is called */
 560:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if(NETCONNTYPE_ISIPV6(netconn_type(msg->conn))) {
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 16


 561:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     iptype = IPADDR_TYPE_ANY;
 562:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 563:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
 564:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   
 565:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Allocate a PCB for this connection */
 566:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   switch(NETCONNTYPE_GROUP(msg->conn->type)) {
 290              		.loc 1 566 0 is_stmt 1
 291 0018 2568     		ldr	r5, [r4]
 292 001a 2B78     		ldrb	r3, [r5]	@ zero_extendqisi2
 293 001c 03F0F003 		and	r3, r3, #240
 294 0020 102B     		cmp	r3, #16
 295 0022 18D0     		beq	.L28
 296 0024 202B     		cmp	r3, #32
 297 0026 21D1     		bne	.L33
 567:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
 568:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   case NETCONN_RAW:
 569:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->conn->pcb.raw = raw_new_ip_type(iptype, msg->msg.n.proto);
 570:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->conn->pcb.raw != NULL) {
 571:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_IPV6
 572:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* ICMPv6 packets should always have checksum calculated by the stack as per RFC 3542 chapter
 573:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (NETCONNTYPE_ISIPV6(msg->conn->type) && msg->conn->pcb.raw->protocol == IP6_NEXTH_ICMP6) {
 574:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->pcb.raw->chksum_reqd = 1;
 575:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->pcb.raw->chksum_offset = 2;
 576:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 577:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_IPV6 */
 578:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       raw_recv(msg->conn->pcb.raw, recv_raw, msg->conn);
 579:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 580:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     break;
 581:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_RAW */
 582:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_UDP
 583:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   case NETCONN_UDP:
 584:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->conn->pcb.udp = udp_new_ip_type(iptype);
 298              		.loc 1 584 0
 299 0028 0020     		movs	r0, #0
 300 002a FFF7FEFF 		bl	udp_new_ip_type
 301              	.LVL42:
 302 002e 6860     		str	r0, [r5, #4]
 585:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->conn->pcb.udp != NULL) {
 303              		.loc 1 585 0
 304 0030 2368     		ldr	r3, [r4]
 305 0032 5A68     		ldr	r2, [r3, #4]
 306 0034 42B1     		cbz	r2, .L30
 586:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_UDPLITE
 587:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (NETCONNTYPE_ISUDPLITE(msg->conn->type)) {
 588:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         udp_setflags(msg->conn->pcb.udp, UDP_FLAGS_UDPLITE);
 589:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 590:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDPLITE */
 591:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (NETCONNTYPE_ISUDPNOCHKSUM(msg->conn->type)) {
 307              		.loc 1 591 0
 308 0036 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 309 0038 222B     		cmp	r3, #34
 310 003a 09D0     		beq	.L35
 311              	.L31:
 592:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         udp_setflags(msg->conn->pcb.udp, UDP_FLAGS_NOCHKSUM);
 593:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 594:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       udp_recv(msg->conn->pcb.udp, recv_udp, msg->conn);
 312              		.loc 1 594 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 17


 313 003c 2368     		ldr	r3, [r4]
 314 003e 1A46     		mov	r2, r3
 315 0040 1049     		ldr	r1, .L37+12
 316 0042 5868     		ldr	r0, [r3, #4]
 317 0044 FFF7FEFF 		bl	udp_recv
 318              	.LVL43:
 319              	.L30:
 595:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 596:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     break;
 597:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDP */
 598:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 599:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   case NETCONN_TCP:
 600:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->conn->pcb.tcp = tcp_new_ip_type(iptype);
 601:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->conn->pcb.tcp != NULL) {
 602:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       setup_tcp(msg->conn);
 603:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 604:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     break;
 605:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 606:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   default:
 607:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* Unsupported netconn type, e.g. protocol disabled */
 608:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_VAL;
 609:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return;
 610:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 611:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (msg->conn->pcb.ip == NULL) {
 320              		.loc 1 611 0
 321 0048 2368     		ldr	r3, [r4]
 322 004a 5B68     		ldr	r3, [r3, #4]
 323 004c 8BB1     		cbz	r3, .L36
 324              	.L25:
 325 004e 38BD     		pop	{r3, r4, r5, pc}
 326              	.LVL44:
 327              	.L35:
 592:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         udp_setflags(msg->conn->pcb.udp, UDP_FLAGS_NOCHKSUM);
 328              		.loc 1 592 0
 329 0050 0123     		movs	r3, #1
 330 0052 1374     		strb	r3, [r2, #16]
 331 0054 F2E7     		b	.L31
 332              	.L28:
 600:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->conn->pcb.tcp != NULL) {
 333              		.loc 1 600 0
 334 0056 0020     		movs	r0, #0
 335 0058 FFF7FEFF 		bl	tcp_new_ip_type
 336              	.LVL45:
 337 005c 6860     		str	r0, [r5, #4]
 601:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       setup_tcp(msg->conn);
 338              		.loc 1 601 0
 339 005e 2068     		ldr	r0, [r4]
 340 0060 4368     		ldr	r3, [r0, #4]
 341 0062 002B     		cmp	r3, #0
 342 0064 F0D0     		beq	.L30
 602:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 343              		.loc 1 602 0
 344 0066 FFF7FEFF 		bl	setup_tcp
 345              	.LVL46:
 346 006a EDE7     		b	.L30
 347              	.L33:
 608:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return;
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 18


 348              		.loc 1 608 0
 349 006c FA23     		movs	r3, #250
 350 006e 2371     		strb	r3, [r4, #4]
 609:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 351              		.loc 1 609 0
 352 0070 38BD     		pop	{r3, r4, r5, pc}
 353              	.LVL47:
 354              	.L36:
 612:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_MEM;
 355              		.loc 1 612 0
 356 0072 FF23     		movs	r3, #255
 357 0074 2371     		strb	r3, [r4, #4]
 358 0076 EAE7     		b	.L25
 359              	.L38:
 360              		.align	2
 361              	.L37:
 362 0078 00000000 		.word	.LC0
 363 007c 00000000 		.word	.LC5
 364 0080 54000000 		.word	.LC2
 365 0084 00000000 		.word	recv_udp
 366              		.cfi_endproc
 367              	.LFE164:
 369              		.section	.text.err_tcp,"ax",%progbits
 370              		.align	1
 371              		.syntax unified
 372              		.thumb
 373              		.thumb_func
 374              		.fpu fpv5-sp-d16
 376              	err_tcp:
 377              	.LFB161:
 383:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn;
 378              		.loc 1 383 0
 379              		.cfi_startproc
 380              		@ args = 0, pretend = 0, frame = 0
 381              		@ frame_needed = 0, uses_anonymous_args = 0
 382              	.LVL48:
 383 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 384              	.LCFI3:
 385              		.cfi_def_cfa_offset 24
 386              		.cfi_offset 3, -24
 387              		.cfi_offset 4, -20
 388              		.cfi_offset 5, -16
 389              		.cfi_offset 6, -12
 390              		.cfi_offset 7, -8
 391              		.cfi_offset 14, -4
 392 0002 0E46     		mov	r6, r1
 393              	.LVL49:
 388:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 394              		.loc 1 388 0
 395 0004 0446     		mov	r4, r0
 396 0006 0028     		cmp	r0, #0
 397 0008 38D0     		beq	.L58
 398              	.LVL50:
 399              	.L40:
 390:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 400              		.loc 1 390 0
 401 000a 0023     		movs	r3, #0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 19


 402 000c 6360     		str	r3, [r4, #4]
 393:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->state = NETCONN_NONE;
 403              		.loc 1 393 0
 404 000e 6578     		ldrb	r5, [r4, #1]	@ zero_extendqisi2
 405              	.LVL51:
 394:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 406              		.loc 1 394 0
 407 0010 6370     		strb	r3, [r4, #1]
 396:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* RST during close: let close return success & dealloc the netconn */
 408              		.loc 1 396 0
 409 0012 042D     		cmp	r5, #4
 410 0014 3AD0     		beq	.L59
 411              	.LBB2:
 402:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 412              		.loc 1 402 0
 413 0016 FFF7FEFF 		bl	sys_arch_protect
 414              	.LVL52:
 415 001a 2672     		strb	r6, [r4, #8]
 416 001c FFF7FEFF 		bl	sys_arch_unprotect
 417              	.LVL53:
 418              	.L42:
 419              	.LBE2:
 408:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Try to release selects pending on 'read' or 'write', too.
 420              		.loc 1 408 0
 421 0020 A36A     		ldr	r3, [r4, #40]
 422 0022 1BB1     		cbz	r3, .L44
 408:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Try to release selects pending on 'read' or 'write', too.
 423              		.loc 1 408 0 is_stmt 0 discriminator 1
 424 0024 0022     		movs	r2, #0
 425 0026 0421     		movs	r1, #4
 426 0028 2046     		mov	r0, r4
 427 002a 9847     		blx	r3
 428              	.LVL54:
 429              	.L44:
 411:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   API_EVENT(conn, NETCONN_EVT_SENDPLUS, 0);
 430              		.loc 1 411 0 is_stmt 1
 431 002c A36A     		ldr	r3, [r4, #40]
 432 002e 1BB1     		cbz	r3, .L45
 411:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   API_EVENT(conn, NETCONN_EVT_SENDPLUS, 0);
 433              		.loc 1 411 0 is_stmt 0 discriminator 1
 434 0030 0022     		movs	r2, #0
 435 0032 1146     		mov	r1, r2
 436 0034 2046     		mov	r0, r4
 437 0036 9847     		blx	r3
 438              	.LVL55:
 439              	.L45:
 412:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 440              		.loc 1 412 0 is_stmt 1
 441 0038 A36A     		ldr	r3, [r4, #40]
 442 003a 1BB1     		cbz	r3, .L46
 412:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 443              		.loc 1 412 0 is_stmt 0 discriminator 1
 444 003c 0022     		movs	r2, #0
 445 003e 0221     		movs	r1, #2
 446 0040 2046     		mov	r0, r4
 447 0042 9847     		blx	r3
 448              	.LVL56:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 20


 449              	.L46:
 415:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* use trypost to prevent deadlock */
 450              		.loc 1 415 0 is_stmt 1
 451 0044 04F11007 		add	r7, r4, #16
 452 0048 3846     		mov	r0, r7
 453 004a FFF7FEFF 		bl	sys_mbox_valid
 454              	.LVL57:
 455 004e 68BB     		cbnz	r0, .L60
 456              	.L47:
 420:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* use trypost to preven deadlock */
 457              		.loc 1 420 0
 458 0050 04F11407 		add	r7, r4, #20
 459 0054 3846     		mov	r0, r7
 460 0056 FFF7FEFF 		bl	sys_mbox_valid
 461              	.LVL58:
 462 005a 60BB     		cbnz	r0, .L61
 463              	.L48:
 425:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (old_state == NETCONN_CONNECT)) {
 464              		.loc 1 425 0
 465 005c 042D     		cmp	r5, #4
 466 005e 18BF     		it	ne
 467 0060 012D     		cmpne	r5, #1
 468 0062 2DD0     		beq	.L49
 425:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (old_state == NETCONN_CONNECT)) {
 469              		.loc 1 425 0 is_stmt 0 discriminator 1
 470 0064 032D     		cmp	r5, #3
 471 0066 2BD0     		beq	.L49
 445:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 472              		.loc 1 445 0 is_stmt 1
 473 0068 636A     		ldr	r3, [r4, #36]
 474 006a 33B1     		cbz	r3, .L39
 445:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 475              		.loc 1 445 0 is_stmt 0 discriminator 1
 476 006c 2E4B     		ldr	r3, .L64
 477 006e 40F2BD12 		movw	r2, #445
 478 0072 2E49     		ldr	r1, .L64+4
 479 0074 2E48     		ldr	r0, .L64+8
 480 0076 FFF7FEFF 		bl	printf
 481              	.LVL59:
 482              	.L39:
 483 007a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 484              	.LVL60:
 485              	.L58:
 388:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 486              		.loc 1 388 0 is_stmt 1 discriminator 1
 487 007c 2A4B     		ldr	r3, .L64
 488 007e 4FF4C272 		mov	r2, #388
 489 0082 2C49     		ldr	r1, .L64+12
 490              	.LVL61:
 491 0084 2A48     		ldr	r0, .L64+8
 492              	.LVL62:
 493 0086 FFF7FEFF 		bl	printf
 494              	.LVL63:
 495 008a BEE7     		b	.L40
 496              	.LVL64:
 497              	.L59:
 399:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 21


 498              		.loc 1 399 0
 499 008c 64B1     		cbz	r4, .L56
 500              	.LBB3:
 399:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 501              		.loc 1 399 0 is_stmt 0 discriminator 1
 502 008e FFF7FEFF 		bl	sys_arch_protect
 503              	.LVL65:
 504 0092 94F90830 		ldrsb	r3, [r4, #8]
 505 0096 13F10C0F 		cmn	r3, #12
 506 009a 01DB     		blt	.L43
 399:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 507              		.loc 1 399 0 discriminator 2
 508 009c 0023     		movs	r3, #0
 509 009e 2372     		strb	r3, [r4, #8]
 510              	.L43:
 399:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 511              		.loc 1 399 0 discriminator 4
 512 00a0 FFF7FEFF 		bl	sys_arch_unprotect
 513              	.LVL66:
 514              	.LBE3:
 398:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     NETCONN_SET_SAFE_ERR(conn, ERR_OK);
 515              		.loc 1 398 0 is_stmt 1 discriminator 4
 516 00a4 0026     		movs	r6, #0
 517 00a6 BBE7     		b	.L42
 518              	.L56:
 398:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     NETCONN_SET_SAFE_ERR(conn, ERR_OK);
 519              		.loc 1 398 0 is_stmt 0
 520 00a8 0026     		movs	r6, #0
 521 00aa B9E7     		b	.L42
 522              	.LVL67:
 523              	.L60:
 417:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 524              		.loc 1 417 0 is_stmt 1
 525 00ac 0021     		movs	r1, #0
 526 00ae 3846     		mov	r0, r7
 527 00b0 FFF7FEFF 		bl	sys_mbox_trypost
 528              	.LVL68:
 529 00b4 CCE7     		b	.L47
 530              	.L61:
 422:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 531              		.loc 1 422 0
 532 00b6 0021     		movs	r1, #0
 533 00b8 3846     		mov	r0, r7
 534 00ba FFF7FEFF 		bl	sys_mbox_trypost
 535              	.LVL69:
 536 00be CDE7     		b	.L48
 537              	.L49:
 538              	.LBB4:
 429:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     SET_NONBLOCKING_CONNECT(conn, 0);
 539              		.loc 1 429 0
 540 00c0 237F     		ldrb	r3, [r4, #28]	@ zero_extendqisi2
 541              	.LVL70:
 430:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 542              		.loc 1 430 0
 543 00c2 23F00402 		bic	r2, r3, #4
 544 00c6 2277     		strb	r2, [r4, #28]
 432:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       sys_sem_t* op_completed_sem;
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 22


 545              		.loc 1 432 0
 546 00c8 13F0040F 		tst	r3, #4
 547 00cc D5D1     		bne	.L39
 548              	.LBB5:
 435:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg->err = err;
 549              		.loc 1 435 0
 550 00ce 636A     		ldr	r3, [r4, #36]
 551              	.LVL71:
 552 00d0 CBB1     		cbz	r3, .L62
 553              	.L52:
 436:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       op_completed_sem = LWIP_API_MSG_SEM(conn->current_msg);
 554              		.loc 1 436 0
 555 00d2 636A     		ldr	r3, [r4, #36]
 556 00d4 1E71     		strb	r6, [r3, #4]
 437:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       LWIP_ASSERT("inavlid op_completed_sem", sys_sem_valid(op_completed_sem));
 557              		.loc 1 437 0
 558 00d6 636A     		ldr	r3, [r4, #36]
 559 00d8 1D68     		ldr	r5, [r3]
 560              	.LVL72:
 561 00da 0C35     		adds	r5, r5, #12
 562              	.LVL73:
 438:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg = NULL;
 563              		.loc 1 438 0
 564 00dc 2846     		mov	r0, r5
 565 00de FFF7FEFF 		bl	sys_sem_valid
 566              	.LVL74:
 567 00e2 C0B1     		cbz	r0, .L63
 568              	.L53:
 439:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* wake up the waiting task */
 569              		.loc 1 439 0
 570 00e4 0023     		movs	r3, #0
 571 00e6 6362     		str	r3, [r4, #36]
 441:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       sys_sem_signal(op_completed_sem);
 572              		.loc 1 441 0
 573 00e8 4CB1     		cbz	r4, .L54
 574              	.LBB6:
 441:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       sys_sem_signal(op_completed_sem);
 575              		.loc 1 441 0 is_stmt 0 discriminator 1
 576 00ea FFF7FEFF 		bl	sys_arch_protect
 577              	.LVL75:
 578 00ee 94F90830 		ldrsb	r3, [r4, #8]
 579 00f2 13F10C0F 		cmn	r3, #12
 580 00f6 00DB     		blt	.L55
 441:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       sys_sem_signal(op_completed_sem);
 581              		.loc 1 441 0 discriminator 2
 582 00f8 2672     		strb	r6, [r4, #8]
 583              	.L55:
 441:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       sys_sem_signal(op_completed_sem);
 584              		.loc 1 441 0 discriminator 4
 585 00fa FFF7FEFF 		bl	sys_arch_unprotect
 586              	.LVL76:
 587              	.L54:
 588              	.LBE6:
 442:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 589              		.loc 1 442 0 is_stmt 1
 590 00fe 2846     		mov	r0, r5
 591 0100 FFF7FEFF 		bl	sys_sem_signal
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 23


 592              	.LVL77:
 593 0104 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 594              	.LVL78:
 595              	.L62:
 435:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg->err = err;
 596              		.loc 1 435 0 discriminator 1
 597 0106 084B     		ldr	r3, .L64
 598 0108 40F2B312 		movw	r2, #435
 599 010c 0A49     		ldr	r1, .L64+16
 600 010e 0848     		ldr	r0, .L64+8
 601 0110 FFF7FEFF 		bl	printf
 602              	.LVL79:
 603 0114 DDE7     		b	.L52
 604              	.LVL80:
 605              	.L63:
 438:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg = NULL;
 606              		.loc 1 438 0 discriminator 1
 607 0116 044B     		ldr	r3, .L64
 608 0118 4FF4DB72 		mov	r2, #438
 609 011c 0749     		ldr	r1, .L64+20
 610 011e 0448     		ldr	r0, .L64+8
 611 0120 FFF7FEFF 		bl	printf
 612              	.LVL81:
 613 0124 DEE7     		b	.L53
 614              	.L65:
 615 0126 00BF     		.align	2
 616              	.L64:
 617 0128 00000000 		.word	.LC0
 618 012c 48000000 		.word	.LC9
 619 0130 54000000 		.word	.LC2
 620 0134 00000000 		.word	.LC6
 621 0138 10000000 		.word	.LC7
 622 013c 2C000000 		.word	.LC8
 623              	.LBE5:
 624              	.LBE4:
 625              		.cfi_endproc
 626              	.LFE161:
 628              		.section	.text.lwip_netconn_do_connected,"ax",%progbits
 629              		.align	1
 630              		.syntax unified
 631              		.thumb
 632              		.thumb_func
 633              		.fpu fpv5-sp-d16
 635              	lwip_netconn_do_connected:
 636              	.LFB172:
 613:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 614:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 615:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 616:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 617:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Create a new pcb of a specific type inside a netconn.
 618:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_new_with_proto_and_callback.
 619:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 620:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg describing the connection type
 621:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 622:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
 623:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_newconn(void *m)
 624:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 24


 625:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
 626:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 627:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   msg->err = ERR_OK;
 628:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (msg->conn->pcb.tcp == NULL) {
 629:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     pcb_new(msg);
 630:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 631:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Else? This "new" connection already has a PCB allocated. */
 632:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Is this an error condition? Should it be deleted? */
 633:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* We currently just are happy and return. */
 634:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 635:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   TCPIP_APIMSG_ACK(msg);
 636:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 637:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 638:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 639:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Create a new netconn (of a specific type) that has a callback function.
 640:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * The corresponding pcb is NOT created!
 641:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 642:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param t the type of 'connection' to create (@see enum netconn_type)
 643:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param callback a function to call on status changes (RX available, TX'ed)
 644:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @return a newly allocated struct netconn or
 645:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *         NULL on memory error
 646:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 647:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** struct netconn*
 648:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** netconn_alloc(enum netconn_type t, netconn_callback callback)
 649:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 650:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn;
 651:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   int size;
 652:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 653:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn = (struct netconn *)memp_malloc(MEMP_NETCONN);
 654:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (conn == NULL) {
 655:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return NULL;
 656:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 657:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 658:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->last_err = ERR_OK;
 659:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->type = t;
 660:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->pcb.tcp = NULL;
 661:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 662:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* If all sizes are the same, every compiler should optimize this switch to nothing */
 663:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   switch(NETCONNTYPE_GROUP(t)) {
 664:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
 665:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   case NETCONN_RAW:
 666:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     size = DEFAULT_RAW_RECVMBOX_SIZE;
 667:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     break;
 668:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_RAW */
 669:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_UDP
 670:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   case NETCONN_UDP:
 671:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     size = DEFAULT_UDP_RECVMBOX_SIZE;
 672:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     break;
 673:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDP */
 674:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 675:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   case NETCONN_TCP:
 676:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     size = DEFAULT_TCP_RECVMBOX_SIZE;
 677:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     break;
 678:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 679:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   default:
 680:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     LWIP_ASSERT("netconn_alloc: undefined netconn_type", 0);
 681:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     goto free_and_return;
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 25


 682:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 683:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 684:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (sys_mbox_new(&conn->recvmbox, size) != ERR_OK) {
 685:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     goto free_and_return;
 686:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 687:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if !LWIP_NETCONN_SEM_PER_THREAD
 688:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (sys_sem_new(&conn->op_completed, 0) != ERR_OK) {
 689:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_free(&conn->recvmbox);
 690:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     goto free_and_return;
 691:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 692:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
 693:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 694:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 695:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   sys_mbox_set_invalid(&conn->acceptmbox);
 696:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
 697:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->state        = NETCONN_NONE;
 698:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SOCKET
 699:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* initialize socket to -1 since 0 is a valid socket */
 700:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->socket       = -1;
 701:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SOCKET */
 702:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->callback     = callback;
 703:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 704:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->current_msg  = NULL;
 705:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->write_offset = 0;
 706:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 707:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_SNDTIMEO
 708:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->send_timeout = 0;
 709:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_SNDTIMEO */
 710:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_RCVTIMEO
 711:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->recv_timeout = 0;
 712:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_RCVTIMEO */
 713:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_RCVBUF
 714:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->recv_bufsize = RECV_BUFSIZE_DEFAULT;
 715:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->recv_avail   = 0;
 716:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_RCVBUF */
 717:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_LINGER
 718:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->linger = -1;
 719:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_LINGER */
 720:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->flags = 0;
 721:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return conn;
 722:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** free_and_return:
 723:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   memp_free(MEMP_NETCONN, conn);
 724:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return NULL;
 725:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 726:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 727:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 728:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Delete a netconn and all its resources.
 729:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * The pcb is NOT freed (since we might not be in the right thread context do this).
 730:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 731:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param conn the netconn to free
 732:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 733:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
 734:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** netconn_free(struct netconn *conn)
 735:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 736:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("PCB must be deallocated outside this function", conn->pcb.tcp == NULL);
 737:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("recvmbox must be deallocated before calling this function",
 738:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     !sys_mbox_valid(&conn->recvmbox));
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 26


 739:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 740:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("acceptmbox must be deallocated before calling this function",
 741:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     !sys_mbox_valid(&conn->acceptmbox));
 742:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 743:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 744:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if !LWIP_NETCONN_SEM_PER_THREAD
 745:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   sys_sem_free(&conn->op_completed);
 746:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   sys_sem_set_invalid(&conn->op_completed);
 747:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
 748:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 749:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   memp_free(MEMP_NETCONN, conn);
 750:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 751:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 752:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 753:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Delete rcvmbox and acceptmbox of a netconn and free the left-over data in
 754:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * these mboxes
 755:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 756:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param conn the netconn to free
 757:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @bytes_drained bytes drained from recvmbox
 758:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @accepts_drained pending connections drained from acceptmbox
 759:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 760:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static void
 761:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** netconn_drain(struct netconn *conn)
 762:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 763:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   void *mem;
 764:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 765:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct pbuf *p;
 766:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 767:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 768:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* This runs in tcpip_thread, so we don't need to lock against rx packets */
 769:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 770:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Delete and drain the recvmbox. */
 771:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (sys_mbox_valid(&conn->recvmbox)) {
 772:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     while (sys_mbox_tryfetch(&conn->recvmbox, &mem) != SYS_MBOX_EMPTY) {
 773:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 774:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (NETCONNTYPE_GROUP(conn->type) == NETCONN_TCP) {
 775:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (mem != NULL) {
 776:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           p = (struct pbuf*)mem;
 777:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           /* pcb might be set to NULL already by err_tcp() */
 778:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           if (conn->pcb.tcp != NULL) {
 779:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             tcp_recved(conn->pcb.tcp, p->tot_len);
 780:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           }
 781:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           pbuf_free(p);
 782:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
 783:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else
 784:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 785:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       {
 786:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         netbuf_delete((struct netbuf *)mem);
 787:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 788:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 789:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_free(&conn->recvmbox);
 790:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_set_invalid(&conn->recvmbox);
 791:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 792:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 793:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Delete and drain the acceptmbox. */
 794:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 795:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (sys_mbox_valid(&conn->acceptmbox)) {
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 27


 796:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     while (sys_mbox_tryfetch(&conn->acceptmbox, &mem) != SYS_MBOX_EMPTY) {
 797:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (mem != &netconn_aborted) {
 798:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         struct netconn *newconn = (struct netconn *)mem;
 799:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* Only tcp pcbs have an acceptmbox, so no need to check conn->type */
 800:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* pcb might be set to NULL already by err_tcp() */
 801:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* drain recvmbox */
 802:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         netconn_drain(newconn);
 803:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (newconn->pcb.tcp != NULL) {
 804:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           tcp_abort(newconn->pcb.tcp);
 805:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           newconn->pcb.tcp = NULL;
 806:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
 807:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         netconn_free(newconn);
 808:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 809:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 810:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_free(&conn->acceptmbox);
 811:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_set_invalid(&conn->acceptmbox);
 812:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 813:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 814:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 815:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 816:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 817:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 818:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Internal helper function to close a TCP netconn: since this sometimes
 819:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * doesn't work at the first attempt, this function is called from multiple
 820:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * places.
 821:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 822:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param conn the TCP netconn to close
 823:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 824:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static err_t
 825:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_close_internal(struct netconn *conn  WRITE_DELAYED_PARAM)
 826:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 827:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   err_t err;
 828:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   u8_t shut, shut_rx, shut_tx, close;
 829:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   u8_t close_finished = 0;
 830:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct tcp_pcb* tpcb;
 831:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_LINGER
 832:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   u8_t linger_wait_required = 0;
 833:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_LINGER */
 834:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 835:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("invalid conn", (conn != NULL));
 836:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("this is for tcp netconns only", (NETCONNTYPE_GROUP(conn->type) == NETCONN_TCP));
 837:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn must be in state NETCONN_CLOSE", (conn->state == NETCONN_CLOSE));
 838:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("pcb already closed", (conn->pcb.tcp != NULL));
 839:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->current_msg != NULL", conn->current_msg != NULL);
 840:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 841:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   tpcb = conn->pcb.tcp;
 842:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   shut = conn->current_msg->msg.sd.shut;
 843:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   shut_rx = shut & NETCONN_SHUT_RD;
 844:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   shut_tx = shut & NETCONN_SHUT_WR;
 845:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* shutting down both ends is the same as closing
 846:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****      (also if RD or WR side was shut down before already) */
 847:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (shut == NETCONN_SHUT_RDWR) {
 848:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     close = 1;
 849:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else if (shut_rx &&
 850:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****              ((tpcb->state == FIN_WAIT_1) ||
 851:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               (tpcb->state == FIN_WAIT_2) ||
 852:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               (tpcb->state == CLOSING))) {
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 28


 853:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     close = 1;
 854:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else if (shut_tx && ((tpcb->flags & TF_RXCLOSED) != 0)) {
 855:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     close = 1;
 856:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 857:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     close = 0;
 858:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 859:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 860:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Set back some callback pointers */
 861:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (close) {
 862:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_arg(tpcb, NULL);
 863:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 864:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (tpcb->state == LISTEN) {
 865:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_accept(tpcb, NULL);
 866:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 867:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* some callbacks have to be reset if tcp_close is not successful */
 868:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (shut_rx) {
 869:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_recv(tpcb, NULL);
 870:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_accept(tpcb, NULL);
 871:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 872:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (shut_tx) {
 873:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_sent(tpcb, NULL);
 874:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 875:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (close) {
 876:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_poll(tpcb, NULL, 0);
 877:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_err(tpcb, NULL);
 878:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 879:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 880:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Try to close the connection */
 881:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (close) {
 882:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_LINGER
 883:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* check linger possibilites before calling tcp_close */
 884:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     err = ERR_OK;
 885:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* linger enabled/required at all? (i.e. is there untransmitted data left?) */
 886:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if ((conn->linger >= 0) && (conn->pcb.tcp->unsent || conn->pcb.tcp->unacked)) {
 887:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if ((conn->linger == 0)) {
 888:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* data left but linger prevents waiting */
 889:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         tcp_abort(tpcb);
 890:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         tpcb = NULL;
 891:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else if (conn->linger > 0) {
 892:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* data left and linger says we should wait */
 893:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (netconn_is_nonblocking(conn)) {
 894:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           /* data left on a nonblocking netconn -> cannot linger */
 895:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           err = ERR_WOULDBLOCK;
 896:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         } else if ((s32_t)(sys_now() - conn->current_msg->msg.sd.time_started) >=
 897:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           (conn->linger * 1000)) {
 898:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           /* data left but linger timeout has expired (this happens on further
 899:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****              calls to this function through poll_tcp */
 900:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           tcp_abort(tpcb);
 901:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           tpcb = NULL;
 902:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         } else {
 903:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           /* data left -> need to wait for ACK after successful close */
 904:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           linger_wait_required = 1;
 905:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
 906:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 907:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 908:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if ((err == ERR_OK) && (tpcb != NULL))
 909:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_LINGER */
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 29


 910:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     {
 911:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       err = tcp_close(tpcb);
 912:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 913:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 914:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     err = tcp_shutdown(tpcb, shut_rx, shut_tx);
 915:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 916:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (err == ERR_OK) {
 917:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     close_finished = 1;
 918:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_LINGER
 919:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (linger_wait_required) {
 920:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* wait for ACK of all unsent/unacked data by just getting called again */
 921:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       close_finished = 0;
 922:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       err = ERR_INPROGRESS;
 923:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 924:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_LINGER */
 925:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 926:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (err == ERR_MEM) {
 927:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* Closing failed because of memory shortage, try again later. Even for
 928:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****          nonblocking netconns, we have to wait since no standard socket application
 929:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****          is prepared for close failing because of resource shortage.
 930:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****          Check the timeout: this is kind of an lwip addition to the standard sockets:
 931:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****          we wait for some time when failing to allocate a segment for the FIN */
 932:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_SNDTIMEO || LWIP_SO_LINGER
 933:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       s32_t close_timeout = LWIP_TCP_CLOSE_TIMEOUT_MS_DEFAULT;
 934:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_SNDTIMEO
 935:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (conn->send_timeout > 0) {
 936:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         close_timeout = conn->send_timeout;
 937:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 938:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_SNDTIMEO */
 939:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_LINGER
 940:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (conn->linger >= 0) {
 941:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* use linger timeout (seconds) */
 942:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         close_timeout = conn->linger * 1000U;
 943:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 944:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
 945:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if ((s32_t)(sys_now() - conn->current_msg->msg.sd.time_started) >= close_timeout) {
 946:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else /* LWIP_SO_SNDTIMEO || LWIP_SO_LINGER */
 947:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (conn->current_msg->msg.sd.polls_left == 0) {
 948:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_SNDTIMEO || LWIP_SO_LINGER */
 949:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         close_finished = 1;
 950:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (close) {
 951:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           /* in this case, we want to RST the connection */
 952:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           tcp_abort(tpcb);
 953:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           err = ERR_OK;
 954:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
 955:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 956:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else {
 957:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* Closing failed for a non-memory error: give up */
 958:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       close_finished = 1;
 959:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 960:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 961:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (close_finished) {
 962:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* Closing done (succeeded, non-memory error, nonblocking error or timeout) */
 963:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_sem_t* op_completed_sem = LWIP_API_MSG_SEM(conn->current_msg);
 964:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->current_msg->err = err;
 965:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->current_msg = NULL;
 966:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->state = NETCONN_NONE;
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 30


 967:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (err == ERR_OK) {
 968:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (close) {
 969:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* Set back some callback pointers as conn is going away */
 970:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         conn->pcb.tcp = NULL;
 971:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* Trigger select() in socket layer. Make sure everybody notices activity
 972:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****          on the connection, error first! */
 973:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         API_EVENT(conn, NETCONN_EVT_ERROR, 0);
 974:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 975:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (shut_rx) {
 976:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         API_EVENT(conn, NETCONN_EVT_RCVPLUS, 0);
 977:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 978:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (shut_tx) {
 979:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         API_EVENT(conn, NETCONN_EVT_SENDPLUS, 0);
 980:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 981:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 982:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     NETCONN_SET_SAFE_ERR(conn, err);
 983:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
 984:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (delayed)
 985:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
 986:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     {
 987:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* wake up the application task */
 988:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       sys_sem_signal(op_completed_sem);
 989:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 990:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_OK;
 991:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 992:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (!close_finished) {
 993:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* Closing failed and we want to wait: restore some of the callbacks */
 994:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* Closing of listen pcb will never fail! */
 995:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     LWIP_ASSERT("Closing a listen pcb may not fail!", (tpcb->state != LISTEN));
 996:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (shut_tx) {
 997:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_sent(tpcb, sent_tcp);
 998:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 999:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* when waiting for close, set up poll interval to 500ms */
1000:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_poll(tpcb, poll_tcp, 1);
1001:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_err(tpcb, err_tcp);
1002:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_arg(tpcb, conn);
1003:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* don't restore recv callback: we don't want to receive any more data */
1004:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1005:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* If closing didn't succeed, we get called again either
1006:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****      from poll_tcp or from sent_tcp */
1007:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("err != ERR_OK", err != ERR_OK);
1008:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return err;
1009:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1010:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
1011:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1012:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1013:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Delete the pcb inside a netconn.
1014:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_delete.
1015:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1016:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg pointing to the connection
1017:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1018:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
1019:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_delconn(void *m)
1020:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
1021:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
1022:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1023:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   enum netconn_state state = msg->conn->state;
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 31


1024:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("netconn state error", /* this only happens for TCP netconns */
1025:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     (state == NETCONN_NONE) || (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_TCP));
1026:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_NETCONN_FULLDUPLEX
1027:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* In full duplex mode, blocking write/connect is aborted with ERR_CLSD */
1028:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (state != NETCONN_NONE) {
1029:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if ((state == NETCONN_WRITE) ||
1030:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         ((state == NETCONN_CONNECT) && !IN_NONBLOCKING_CONNECT(msg->conn))) {
1031:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* close requested, abort running write/connect */
1032:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       sys_sem_t* op_completed_sem;
1033:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       LWIP_ASSERT("msg->conn->current_msg != NULL", msg->conn->current_msg != NULL);
1034:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       op_completed_sem = LWIP_API_MSG_SEM(msg->conn->current_msg);
1035:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->conn->current_msg->err = ERR_CLSD;
1036:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->conn->current_msg = NULL;
1037:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->conn->write_offset = 0;
1038:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->conn->state = NETCONN_NONE;
1039:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       NETCONN_SET_SAFE_ERR(msg->conn, ERR_CLSD);
1040:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       sys_sem_signal(op_completed_sem);
1041:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1042:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1043:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else /* LWIP_NETCONN_FULLDUPLEX */
1044:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (((state != NETCONN_NONE) &&
1045:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        (state != NETCONN_LISTEN) &&
1046:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        (state != NETCONN_CONNECT)) ||
1047:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       ((state == NETCONN_CONNECT) && !IN_NONBLOCKING_CONNECT(msg->conn))) {
1048:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* This means either a blocking write or blocking connect is running
1049:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        (nonblocking write returns and sets state to NONE) */
1050:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_INPROGRESS;
1051:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else
1052:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_NETCONN_FULLDUPLEX */
1053:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   {
1054:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     LWIP_ASSERT("blocking connect in progress",
1055:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (state != NETCONN_CONNECT) || IN_NONBLOCKING_CONNECT(msg->conn));
1056:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_OK;
1057:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* Drain and delete mboxes */
1058:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     netconn_drain(msg->conn);
1059:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1060:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->conn->pcb.tcp != NULL) {
1061:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1062:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       switch (NETCONNTYPE_GROUP(msg->conn->type)) {
1063:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
1064:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       case NETCONN_RAW:
1065:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         raw_remove(msg->conn->pcb.raw);
1066:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
1067:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_RAW */
1068:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_UDP
1069:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       case NETCONN_UDP:
1070:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->pcb.udp->recv_arg = NULL;
1071:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         udp_remove(msg->conn->pcb.udp);
1072:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
1073:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDP */
1074:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
1075:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       case NETCONN_TCP:
1076:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         LWIP_ASSERT("already writing or closing", msg->conn->current_msg == NULL &&
1077:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->conn->write_offset == 0);
1078:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->state = NETCONN_CLOSE;
1079:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->msg.sd.shut = NETCONN_SHUT_RDWR;
1080:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->current_msg = msg;
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 32


1081:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
1082:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (lwip_netconn_do_close_internal(msg->conn, 0) != ERR_OK) {
1083:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LWIP_ASSERT("state!", msg->conn->state == NETCONN_CLOSE);
1084:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           UNLOCK_TCPIP_CORE();
1085:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           sys_arch_sem_wait(LWIP_API_MSG_SEM(msg), 0);
1086:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LOCK_TCPIP_CORE();
1087:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LWIP_ASSERT("state!", msg->conn->state == NETCONN_NONE);
1088:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
1089:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else /* LWIP_TCPIP_CORE_LOCKING */
1090:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         lwip_netconn_do_close_internal(msg->conn);
1091:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCPIP_CORE_LOCKING */
1092:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* API_EVENT is called inside lwip_netconn_do_close_internal, before releasing
1093:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****            the application thread, so we can return at this point! */
1094:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         return;
1095:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
1096:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       default:
1097:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
1098:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1099:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->conn->pcb.tcp = NULL;
1100:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1101:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* tcp netconns don't come here! */
1102:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1103:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* @todo: this lets select make the socket readable and writable,
1104:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        which is wrong! errfd instead? */
1105:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     API_EVENT(msg->conn, NETCONN_EVT_RCVPLUS, 0);
1106:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     API_EVENT(msg->conn, NETCONN_EVT_SENDPLUS, 0);
1107:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1108:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (sys_sem_valid(LWIP_API_MSG_SEM(msg))) {
1109:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     TCPIP_APIMSG_ACK(msg);
1110:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1111:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1112:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1113:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1114:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Bind a pcb contained in a netconn
1115:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_bind.
1116:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1117:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg pointing to the connection and containing
1118:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *          the IP address and port to bind to
1119:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1120:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
1121:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_bind(void *m)
1122:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
1123:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
1124:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1125:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (ERR_IS_FATAL(msg->conn->last_err)) {
1126:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = msg->conn->last_err;
1127:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
1128:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_VAL;
1129:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->conn->pcb.tcp != NULL) {
1130:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       switch (NETCONNTYPE_GROUP(msg->conn->type)) {
1131:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
1132:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       case NETCONN_RAW:
1133:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = raw_bind(msg->conn->pcb.raw, API_EXPR_REF(msg->msg.bc.ipaddr));
1134:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
1135:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_RAW */
1136:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_UDP
1137:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       case NETCONN_UDP:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 33


1138:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = udp_bind(msg->conn->pcb.udp, API_EXPR_REF(msg->msg.bc.ipaddr), msg->msg.bc.port)
1139:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
1140:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDP */
1141:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
1142:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       case NETCONN_TCP:
1143:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = tcp_bind(msg->conn->pcb.tcp, API_EXPR_REF(msg->msg.bc.ipaddr), msg->msg.bc.port)
1144:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
1145:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
1146:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       default:
1147:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
1148:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1149:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1150:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1151:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   TCPIP_APIMSG_ACK(msg);
1152:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1153:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1154:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
1155:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1156:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * TCP callback function if a connection (opened by tcp_connect/lwip_netconn_do_connect) has
1157:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * been established (or reset by the remote host).
1158:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1159:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @see tcp.h (struct tcp_pcb.connected) for parameters and return values
1160:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1161:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static err_t
1162:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_connected(void *arg, struct tcp_pcb *pcb, err_t err)
1163:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 637              		.loc 1 1163 0
 638              		.cfi_startproc
 639              		@ args = 0, pretend = 0, frame = 0
 640              		@ frame_needed = 0, uses_anonymous_args = 0
 641              	.LVL82:
1164:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn;
1165:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   int was_blocking;
1166:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   sys_sem_t* op_completed_sem = NULL;
1167:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1168:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_UNUSED_ARG(pcb);
1169:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1170:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn = (struct netconn *)arg;
1171:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1172:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (conn == NULL) {
 642              		.loc 1 1172 0
 643 0000 0028     		cmp	r0, #0
 644 0002 6AD0     		beq	.L75
1163:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn;
 645              		.loc 1 1163 0
 646 0004 70B5     		push	{r4, r5, r6, lr}
 647              	.LCFI4:
 648              		.cfi_def_cfa_offset 16
 649              		.cfi_offset 4, -16
 650              		.cfi_offset 5, -12
 651              		.cfi_offset 6, -8
 652              		.cfi_offset 14, -4
 653 0006 0446     		mov	r4, r0
 654 0008 1646     		mov	r6, r2
1173:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_VAL;
1174:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1175:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 34


1176:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->state == NETCONN_CONNECT", conn->state == NETCONN_CONNECT);
 655              		.loc 1 1176 0
 656 000a 4378     		ldrb	r3, [r0, #1]	@ zero_extendqisi2
 657 000c 032B     		cmp	r3, #3
 658 000e 06D0     		beq	.L68
 659              		.loc 1 1176 0 is_stmt 0 discriminator 1
 660 0010 334B     		ldr	r3, .L86
 661 0012 4FF49362 		mov	r2, #1176
 662              	.LVL83:
 663 0016 3349     		ldr	r1, .L86+4
 664              	.LVL84:
 665 0018 3348     		ldr	r0, .L86+8
 666              	.LVL85:
 667 001a FFF7FEFF 		bl	printf
 668              	.LVL86:
 669              	.L68:
1177:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("(conn->current_msg != NULL) || conn->in_non_blocking_connect",
 670              		.loc 1 1177 0 is_stmt 1
 671 001e 636A     		ldr	r3, [r4, #36]
 672 0020 002B     		cmp	r3, #0
 673 0022 39D0     		beq	.L82
 674              	.L69:
1178:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     (conn->current_msg != NULL) || IN_NONBLOCKING_CONNECT(conn));
1179:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1180:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (conn->current_msg != NULL) {
 675              		.loc 1 1180 0
 676 0024 636A     		ldr	r3, [r4, #36]
 677 0026 002B     		cmp	r3, #0
 678 0028 42D0     		beq	.L76
1181:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->current_msg->err = err;
 679              		.loc 1 1181 0
 680 002a 1E71     		strb	r6, [r3, #4]
1182:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     op_completed_sem = LWIP_API_MSG_SEM(conn->current_msg);
 681              		.loc 1 1182 0
 682 002c 636A     		ldr	r3, [r4, #36]
 683 002e 1D68     		ldr	r5, [r3]
 684 0030 0C35     		adds	r5, r5, #12
 685              	.LVL87:
 686              	.L70:
1183:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1184:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if ((NETCONNTYPE_GROUP(conn->type) == NETCONN_TCP) && (err == ERR_OK)) {
 687              		.loc 1 1184 0
 688 0032 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 689 0034 03F0F003 		and	r3, r3, #240
 690 0038 102B     		cmp	r3, #16
 691 003a 3BD0     		beq	.L83
 692              	.L71:
1185:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     setup_tcp(conn);
1186:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1187:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   was_blocking = !IN_NONBLOCKING_CONNECT(conn);
 693              		.loc 1 1187 0
 694 003c 237F     		ldrb	r3, [r4, #28]	@ zero_extendqisi2
 695 003e 03F00406 		and	r6, r3, #4
 696 0042 002E     		cmp	r6, #0
 697 0044 0CBF     		ite	eq
 698 0046 0122     		moveq	r2, #1
 699 0048 0022     		movne	r2, #0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 35


 700              	.LVL88:
1188:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   SET_NONBLOCKING_CONNECT(conn, 0);
 701              		.loc 1 1188 0
 702 004a 23F00403 		bic	r3, r3, #4
 703 004e 2377     		strb	r3, [r4, #28]
1189:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("blocking connect state error",
 704              		.loc 1 1189 0
 705 0050 14BF     		ite	ne
 706 0052 0123     		movne	r3, #1
 707 0054 0023     		moveq	r3, #0
 708 0056 002D     		cmp	r5, #0
 709 0058 08BF     		it	eq
 710 005a 43F00103 		orreq	r3, r3, #1
 711 005e 23B1     		cbz	r3, .L72
 712              		.loc 1 1189 0 is_stmt 0 discriminator 1
 713 0060 002D     		cmp	r5, #0
 714 0062 18BF     		it	ne
 715 0064 42F00102 		orrne	r2, r2, #1
 716              	.LVL89:
 717 0068 52BB     		cbnz	r2, .L84
 718              	.L72:
1190:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     (was_blocking && op_completed_sem != NULL) ||
1191:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     (!was_blocking && op_completed_sem == NULL));
1192:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->current_msg = NULL;
 719              		.loc 1 1192 0 is_stmt 1
 720 006a 0023     		movs	r3, #0
 721 006c 6362     		str	r3, [r4, #36]
1193:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->state = NETCONN_NONE;
 722              		.loc 1 1193 0
 723 006e 6370     		strb	r3, [r4, #1]
 724              	.LBB7:
1194:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   NETCONN_SET_SAFE_ERR(conn, ERR_OK);
 725              		.loc 1 1194 0
 726 0070 FFF7FEFF 		bl	sys_arch_protect
 727              	.LVL90:
 728 0074 94F90830 		ldrsb	r3, [r4, #8]
 729 0078 13F10C0F 		cmn	r3, #12
 730 007c 01DB     		blt	.L73
 731              		.loc 1 1194 0 is_stmt 0 discriminator 2
 732 007e 0023     		movs	r3, #0
 733 0080 2372     		strb	r3, [r4, #8]
 734              	.L73:
 735              		.loc 1 1194 0 discriminator 4
 736 0082 FFF7FEFF 		bl	sys_arch_unprotect
 737              	.LVL91:
 738              	.LBE7:
1195:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   API_EVENT(conn, NETCONN_EVT_SENDPLUS, 0);
 739              		.loc 1 1195 0 is_stmt 1 discriminator 4
 740 0086 A36A     		ldr	r3, [r4, #40]
 741 0088 1BB1     		cbz	r3, .L74
 742              		.loc 1 1195 0 is_stmt 0 discriminator 1
 743 008a 0022     		movs	r2, #0
 744 008c 0221     		movs	r1, #2
 745 008e 2046     		mov	r0, r4
 746 0090 9847     		blx	r3
 747              	.LVL92:
 748              	.L74:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 36


1196:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1197:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (was_blocking) {
 749              		.loc 1 1197 0 is_stmt 1
 750 0092 EEB1     		cbz	r6, .L85
1198:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_sem_signal(op_completed_sem);
1199:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1200:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return ERR_OK;
 751              		.loc 1 1200 0
 752 0094 0020     		movs	r0, #0
1201:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 753              		.loc 1 1201 0
 754 0096 70BD     		pop	{r4, r5, r6, pc}
 755              	.LVL93:
 756              	.L82:
1177:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     (conn->current_msg != NULL) || IN_NONBLOCKING_CONNECT(conn));
 757              		.loc 1 1177 0 discriminator 1
 758 0098 237F     		ldrb	r3, [r4, #28]	@ zero_extendqisi2
 759 009a 13F0040F 		tst	r3, #4
 760 009e C1D1     		bne	.L69
1177:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     (conn->current_msg != NULL) || IN_NONBLOCKING_CONNECT(conn));
 761              		.loc 1 1177 0 is_stmt 0 discriminator 2
 762 00a0 0F4B     		ldr	r3, .L86
 763 00a2 40F29A42 		movw	r2, #1178
 764 00a6 1149     		ldr	r1, .L86+12
 765 00a8 0F48     		ldr	r0, .L86+8
 766 00aa FFF7FEFF 		bl	printf
 767              	.LVL94:
 768 00ae B9E7     		b	.L69
 769              	.L76:
1166:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 770              		.loc 1 1166 0 is_stmt 1
 771 00b0 0025     		movs	r5, #0
 772 00b2 BEE7     		b	.L70
 773              	.LVL95:
 774              	.L83:
1184:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     setup_tcp(conn);
 775              		.loc 1 1184 0 discriminator 1
 776 00b4 002E     		cmp	r6, #0
 777 00b6 C1D1     		bne	.L71
1185:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 778              		.loc 1 1185 0
 779 00b8 2046     		mov	r0, r4
 780 00ba FFF7FEFF 		bl	setup_tcp
 781              	.LVL96:
 782 00be BDE7     		b	.L71
 783              	.L84:
1189:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     (was_blocking && op_completed_sem != NULL) ||
 784              		.loc 1 1189 0 discriminator 2
 785 00c0 074B     		ldr	r3, .L86
 786 00c2 40F2A742 		movw	r2, #1191
 787 00c6 0A49     		ldr	r1, .L86+16
 788 00c8 0748     		ldr	r0, .L86+8
 789 00ca FFF7FEFF 		bl	printf
 790              	.LVL97:
 791 00ce CCE7     		b	.L72
 792              	.L85:
1198:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 37


 793              		.loc 1 1198 0
 794 00d0 2846     		mov	r0, r5
 795 00d2 FFF7FEFF 		bl	sys_sem_signal
 796              	.LVL98:
1200:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 797              		.loc 1 1200 0
 798 00d6 0020     		movs	r0, #0
 799 00d8 70BD     		pop	{r4, r5, r6, pc}
 800              	.LVL99:
 801              	.L75:
 802              	.LCFI5:
 803              		.cfi_def_cfa_offset 0
 804              		.cfi_restore 4
 805              		.cfi_restore 5
 806              		.cfi_restore 6
 807              		.cfi_restore 14
1173:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 808              		.loc 1 1173 0
 809 00da 6FF00500 		mvn	r0, #5
 810              	.LVL100:
 811 00de 7047     		bx	lr
 812              	.L87:
 813              		.align	2
 814              	.L86:
 815 00e0 00000000 		.word	.LC0
 816 00e4 00000000 		.word	.LC10
 817 00e8 54000000 		.word	.LC2
 818 00ec 20000000 		.word	.LC11
 819 00f0 60000000 		.word	.LC12
 820              		.cfi_endproc
 821              	.LFE172:
 823              		.section	.text.lwip_netconn_do_dns_found,"ax",%progbits
 824              		.align	1
 825              		.syntax unified
 826              		.thumb
 827              		.thumb_func
 828              		.fpu fpv5-sp-d16
 830              	lwip_netconn_do_dns_found:
 831              	.LFB182:
1202:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
1203:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1204:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1205:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Connect a pcb contained inside a netconn
1206:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_connect.
1207:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1208:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg pointing to the connection and containing
1209:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *          the IP address and port to connect to
1210:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1211:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
1212:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_connect(void *m)
1213:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
1214:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
1215:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1216:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (msg->conn->pcb.tcp == NULL) {
1217:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* This may happen when calling netconn_connect() a second time */
1218:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_CLSD;
1219:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 38


1220:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     switch (NETCONNTYPE_GROUP(msg->conn->type)) {
1221:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
1222:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     case NETCONN_RAW:
1223:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->err = raw_connect(msg->conn->pcb.raw, API_EXPR_REF(msg->msg.bc.ipaddr));
1224:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       break;
1225:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_RAW */
1226:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_UDP
1227:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     case NETCONN_UDP:
1228:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->err = udp_connect(msg->conn->pcb.udp, API_EXPR_REF(msg->msg.bc.ipaddr), msg->msg.bc.port
1229:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       break;
1230:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDP */
1231:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
1232:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     case NETCONN_TCP:
1233:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* Prevent connect while doing any other action. */
1234:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (msg->conn->state == NETCONN_CONNECT) {
1235:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = ERR_ALREADY;
1236:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else if (msg->conn->state != NETCONN_NONE) {
1237:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = ERR_ISCONN;
1238:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
1239:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         setup_tcp(msg->conn);
1240:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = tcp_connect(msg->conn->pcb.tcp, API_EXPR_REF(msg->msg.bc.ipaddr),
1241:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->msg.bc.port, lwip_netconn_do_connected);
1242:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (msg->err == ERR_OK) {
1243:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           u8_t non_blocking = netconn_is_nonblocking(msg->conn);
1244:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->conn->state = NETCONN_CONNECT;
1245:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           SET_NONBLOCKING_CONNECT(msg->conn, non_blocking);
1246:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           if (non_blocking) {
1247:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             msg->err = ERR_INPROGRESS;
1248:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           } else {
1249:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             msg->conn->current_msg = msg;
1250:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             /* sys_sem_signal() is called from lwip_netconn_do_connected (or err_tcp()),
1251:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                when the connection is established! */
1252:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
1253:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             LWIP_ASSERT("state!", msg->conn->state == NETCONN_CONNECT);
1254:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             UNLOCK_TCPIP_CORE();
1255:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             sys_arch_sem_wait(LWIP_API_MSG_SEM(msg), 0);
1256:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             LOCK_TCPIP_CORE();
1257:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             LWIP_ASSERT("state!", msg->conn->state != NETCONN_CONNECT);
1258:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCPIP_CORE_LOCKING */
1259:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             return;
1260:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           }
1261:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
1262:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1263:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       break;
1264:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
1265:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     default:
1266:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       LWIP_ERROR("Invalid netconn type", 0, do{ msg->err = ERR_VAL; }while(0));
1267:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       break;
1268:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1269:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1270:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* For all other protocols, netconn_connect() calls TCPIP_APIMSG(),
1271:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****      so use TCPIP_APIMSG_ACK() here. */
1272:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   TCPIP_APIMSG_ACK(msg);
1273:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1274:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1275:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1276:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Disconnect a pcb contained inside a netconn
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 39


1277:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Only used for UDP netconns.
1278:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_disconnect.
1279:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1280:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg pointing to the connection to disconnect
1281:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1282:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
1283:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_disconnect(void *m)
1284:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
1285:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
1286:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1287:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_UDP
1288:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_UDP) {
1289:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     udp_disconnect(msg->conn->pcb.udp);
1290:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_OK;
1291:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else
1292:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDP */
1293:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   {
1294:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_VAL;
1295:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1296:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   TCPIP_APIMSG_ACK(msg);
1297:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1298:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1299:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
1300:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1301:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Set a TCP pcb contained in a netconn into listen mode
1302:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_listen.
1303:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1304:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg pointing to the connection
1305:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1306:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
1307:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_listen(void *m)
1308:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
1309:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
1310:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1311:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (ERR_IS_FATAL(msg->conn->last_err)) {
1312:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = msg->conn->last_err;
1313:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
1314:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_CONN;
1315:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->conn->pcb.tcp != NULL) {
1316:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_TCP) {
1317:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (msg->conn->state == NETCONN_NONE) {
1318:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           struct tcp_pcb* lpcb;
1319:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           if (msg->conn->pcb.tcp->state != CLOSED) {
1320:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             /* connection is not closed, cannot listen */
1321:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             msg->err = ERR_VAL;
1322:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           } else {
1323:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             err_t err;
1324:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             u8_t backlog;
1325:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if TCP_LISTEN_BACKLOG
1326:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             backlog = msg->msg.lb.backlog;
1327:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else  /* TCP_LISTEN_BACKLOG */
1328:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             backlog = TCP_DEFAULT_LISTEN_BACKLOG;
1329:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* TCP_LISTEN_BACKLOG */
1330:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_IPV4 && LWIP_IPV6
1331:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             /* "Socket API like" dual-stack support: If IP to listen to is IP6_ADDR_ANY,
1332:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****              * and NETCONN_FLAG_IPV6_V6ONLY is NOT set, use IP_ANY_TYPE to listen
1333:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****              */
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 40


1334:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             if (ip_addr_cmp(&msg->conn->pcb.ip->local_ip, IP6_ADDR_ANY) &&
1335:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 (netconn_get_ipv6only(msg->conn) == 0)) {
1336:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               /* change PCB type to IPADDR_TYPE_ANY */
1337:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               IP_SET_TYPE_VAL(msg->conn->pcb.tcp->local_ip,  IPADDR_TYPE_ANY);
1338:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               IP_SET_TYPE_VAL(msg->conn->pcb.tcp->remote_ip, IPADDR_TYPE_ANY);
1339:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             }
1340:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_IPV4 && LWIP_IPV6 */
1341:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1342:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             lpcb = tcp_listen_with_backlog_and_err(msg->conn->pcb.tcp, backlog, &err);
1343:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1344:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             if (lpcb == NULL) {
1345:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               /* in this case, the old pcb is still allocated */
1346:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               msg->err = err;
1347:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             } else {
1348:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               /* delete the recvmbox and allocate the acceptmbox */
1349:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               if (sys_mbox_valid(&msg->conn->recvmbox)) {
1350:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 /** @todo: should we drain the recvmbox here? */
1351:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 sys_mbox_free(&msg->conn->recvmbox);
1352:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 sys_mbox_set_invalid(&msg->conn->recvmbox);
1353:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               }
1354:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               msg->err = ERR_OK;
1355:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               if (!sys_mbox_valid(&msg->conn->acceptmbox)) {
1356:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 msg->err = sys_mbox_new(&msg->conn->acceptmbox, DEFAULT_ACCEPTMBOX_SIZE);
1357:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               }
1358:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               if (msg->err == ERR_OK) {
1359:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 msg->conn->state = NETCONN_LISTEN;
1360:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 msg->conn->pcb.tcp = lpcb;
1361:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 tcp_arg(msg->conn->pcb.tcp, msg->conn);
1362:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 tcp_accept(msg->conn->pcb.tcp, accept_function);
1363:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               } else {
1364:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 /* since the old pcb is already deallocated, free lpcb now */
1365:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 tcp_close(lpcb);
1366:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 msg->conn->pcb.tcp = NULL;
1367:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               }
1368:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             }
1369:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           }
1370:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         } else if (msg->conn->state == NETCONN_LISTEN) {
1371:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           /* already listening, allow updating of the backlog */
1372:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->err = ERR_OK;
1373:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           tcp_backlog_set(msg->conn->pcb.tcp, msg->msg.lb.backlog);
1374:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
1375:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
1376:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = ERR_ARG;
1377:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1378:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1379:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1380:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   TCPIP_APIMSG_ACK(msg);
1381:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1382:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
1383:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1384:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1385:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Send some data on a RAW or UDP pcb contained in a netconn
1386:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_send
1387:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1388:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg pointing to the connection
1389:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1390:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 41


1391:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_send(void *m)
1392:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
1393:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
1394:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1395:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (ERR_IS_FATAL(msg->conn->last_err)) {
1396:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = msg->conn->last_err;
1397:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
1398:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_CONN;
1399:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->conn->pcb.tcp != NULL) {
1400:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       switch (NETCONNTYPE_GROUP(msg->conn->type)) {
1401:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
1402:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       case NETCONN_RAW:
1403:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (ip_addr_isany(&msg->msg.b->addr) || IP_IS_ANY_TYPE_VAL(msg->msg.b->addr)) {
1404:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->err = raw_send(msg->conn->pcb.raw, msg->msg.b->p);
1405:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         } else {
1406:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->err = raw_sendto(msg->conn->pcb.raw, msg->msg.b->p, &msg->msg.b->addr);
1407:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
1408:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
1409:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
1410:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_UDP
1411:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       case NETCONN_UDP:
1412:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_CHECKSUM_ON_COPY
1413:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (ip_addr_isany(&msg->msg.b->addr) || IP_IS_ANY_TYPE_VAL(msg->msg.b->addr)) {
1414:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->err = udp_send_chksum(msg->conn->pcb.udp, msg->msg.b->p,
1415:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             msg->msg.b->flags & NETBUF_FLAG_CHKSUM, msg->msg.b->toport_chksum);
1416:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         } else {
1417:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->err = udp_sendto_chksum(msg->conn->pcb.udp, msg->msg.b->p,
1418:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             &msg->msg.b->addr, msg->msg.b->port,
1419:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             msg->msg.b->flags & NETBUF_FLAG_CHKSUM, msg->msg.b->toport_chksum);
1420:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
1421:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else /* LWIP_CHECKSUM_ON_COPY */
1422:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (ip_addr_isany_val(msg->msg.b->addr) || IP_IS_ANY_TYPE_VAL(msg->msg.b->addr)) {
1423:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->err = udp_send(msg->conn->pcb.udp, msg->msg.b->p);
1424:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         } else {
1425:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->err = udp_sendto(msg->conn->pcb.udp, msg->msg.b->p, &msg->msg.b->addr, msg->msg.b->p
1426:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
1427:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_CHECKSUM_ON_COPY */
1428:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
1429:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDP */
1430:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       default:
1431:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
1432:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1433:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1434:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1435:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   TCPIP_APIMSG_ACK(msg);
1436:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1437:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1438:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
1439:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1440:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Indicate data has been received from a TCP pcb contained in a netconn
1441:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_recv
1442:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1443:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg pointing to the connection
1444:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1445:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
1446:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_recv(void *m)
1447:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 42


1448:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
1449:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1450:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   msg->err = ERR_OK;
1451:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (msg->conn->pcb.tcp != NULL) {
1452:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_TCP) {
1453:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       u32_t remaining = msg->msg.r.len;
1454:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       do {
1455:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         u16_t recved = (remaining > 0xffff) ? 0xffff : (u16_t)remaining;
1456:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         tcp_recved(msg->conn->pcb.tcp, recved);
1457:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         remaining -= recved;
1458:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } while (remaining != 0);
1459:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1460:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1461:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   TCPIP_APIMSG_ACK(msg);
1462:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1463:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1464:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if TCP_LISTEN_BACKLOG
1465:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /** Indicate that a TCP pcb has been accepted
1466:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_accept
1467:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1468:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg pointing to the connection
1469:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1470:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
1471:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_accepted(void *m)
1472:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
1473:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
1474:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1475:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   msg->err = ERR_OK;
1476:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (msg->conn->pcb.tcp != NULL) {
1477:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_TCP) {
1478:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_backlog_accepted(msg->conn->pcb.tcp);
1479:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1480:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1481:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   TCPIP_APIMSG_ACK(msg);
1482:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1483:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* TCP_LISTEN_BACKLOG */
1484:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1485:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1486:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * See if more data needs to be written from a previous call to netconn_write.
1487:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called initially from lwip_netconn_do_write. If the first call can't send all data
1488:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * (because of low memory or empty send-buffer), this function is called again
1489:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * from sent_tcp() or poll_tcp() to send more data. If all data is sent, the
1490:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * blocking application thread (waiting in netconn_write) is released.
1491:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1492:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param conn netconn (that is currently in state NETCONN_WRITE) to process
1493:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @return ERR_OK
1494:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *         ERR_MEM if LWIP_TCPIP_CORE_LOCKING=1 and sending hasn't yet finished
1495:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1496:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static err_t
1497:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_writemore(struct netconn *conn  WRITE_DELAYED_PARAM)
1498:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
1499:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   err_t err;
1500:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   const void *dataptr;
1501:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   u16_t len, available;
1502:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   u8_t write_finished = 0;
1503:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   size_t diff;
1504:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   u8_t dontblock;
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 43


1505:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   u8_t apiflags;
1506:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1507:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn != NULL", conn != NULL);
1508:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->state == NETCONN_WRITE", (conn->state == NETCONN_WRITE));
1509:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->current_msg != NULL", conn->current_msg != NULL);
1510:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->pcb.tcp != NULL", conn->pcb.tcp != NULL);
1511:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->write_offset < conn->current_msg->msg.w.len",
1512:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->write_offset < conn->current_msg->msg.w.len);
1513:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1514:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   apiflags = conn->current_msg->msg.w.apiflags;
1515:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   dontblock = netconn_is_nonblocking(conn) || (apiflags & NETCONN_DONTBLOCK);
1516:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1517:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_SNDTIMEO
1518:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if ((conn->send_timeout != 0) &&
1519:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       ((s32_t)(sys_now() - conn->current_msg->msg.w.time_started) >= conn->send_timeout)) {
1520:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     write_finished = 1;
1521:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (conn->write_offset == 0) {
1522:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* nothing has been written */
1523:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       err = ERR_WOULDBLOCK;
1524:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg->msg.w.len = 0;
1525:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else {
1526:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* partial write */
1527:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       err = ERR_OK;
1528:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg->msg.w.len = conn->write_offset;
1529:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->write_offset = 0;
1530:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1531:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else
1532:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_SNDTIMEO */
1533:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   {
1534:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     dataptr = (const u8_t*)conn->current_msg->msg.w.dataptr + conn->write_offset;
1535:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     diff = conn->current_msg->msg.w.len - conn->write_offset;
1536:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (diff > 0xffffUL) { /* max_u16_t */
1537:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       len = 0xffff;
1538:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       apiflags |= TCP_WRITE_FLAG_MORE;
1539:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else {
1540:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       len = (u16_t)diff;
1541:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1542:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     available = tcp_sndbuf(conn->pcb.tcp);
1543:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (available < len) {
1544:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* don't try to write more than sendbuf */
1545:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       len = available;
1546:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (dontblock) {
1547:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (!len) {
1548:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           err = ERR_WOULDBLOCK;
1549:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           goto err_mem;
1550:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
1551:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
1552:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         apiflags |= TCP_WRITE_FLAG_MORE;
1553:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1554:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1555:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     LWIP_ASSERT("lwip_netconn_do_writemore: invalid length!", ((conn->write_offset + len) <= conn->
1556:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     err = tcp_write(conn->pcb.tcp, dataptr, len, apiflags);
1557:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* if OK or memory error, check available space */
1558:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if ((err == ERR_OK) || (err == ERR_MEM)) {
1559:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** err_mem:
1560:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (dontblock && (len < conn->current_msg->msg.w.len)) {
1561:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* non-blocking write did not write everything: mark the pcb non-writable
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 44


1562:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****            and let poll_tcp check writable space to mark the pcb writable again */
1563:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         API_EVENT(conn, NETCONN_EVT_SENDMINUS, len);
1564:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         conn->flags |= NETCONN_FLAG_CHECK_WRITESPACE;
1565:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else if ((tcp_sndbuf(conn->pcb.tcp) <= TCP_SNDLOWAT) ||
1566:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                  (tcp_sndqueuelen(conn->pcb.tcp) >= TCP_SNDQUEUELOWAT)) {
1567:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* The queued byte- or pbuf-count exceeds the configured low-water limit,
1568:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****            let select mark this pcb as non-writable. */
1569:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         API_EVENT(conn, NETCONN_EVT_SENDMINUS, len);
1570:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1571:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1572:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1573:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (err == ERR_OK) {
1574:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       err_t out_err;
1575:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->write_offset += len;
1576:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if ((conn->write_offset == conn->current_msg->msg.w.len) || dontblock) {
1577:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* return sent length */
1578:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         conn->current_msg->msg.w.len = conn->write_offset;
1579:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* everything was written */
1580:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         write_finished = 1;
1581:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1582:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       out_err = tcp_output(conn->pcb.tcp);
1583:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (ERR_IS_FATAL(out_err) || (out_err == ERR_RTE)) {
1584:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* If tcp_output fails with fatal error or no route is found,
1585:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****            don't try writing any more but return the error
1586:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****            to the application thread. */
1587:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         err = out_err;
1588:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         write_finished = 1;
1589:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         conn->current_msg->msg.w.len = 0;
1590:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1591:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else if (err == ERR_MEM) {
1592:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* If ERR_MEM, we wait for sent_tcp or poll_tcp to be called.
1593:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****          For blocking sockets, we do NOT return to the application
1594:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****          thread, since ERR_MEM is only a temporary error! Non-blocking
1595:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****          will remain non-writable until sent_tcp/poll_tcp is called */
1596:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1597:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* tcp_write returned ERR_MEM, try tcp_output anyway */
1598:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       err_t out_err = tcp_output(conn->pcb.tcp);
1599:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (ERR_IS_FATAL(out_err) || (out_err == ERR_RTE)) {
1600:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* If tcp_output fails with fatal error or no route is found,
1601:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****            don't try writing any more but return the error
1602:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****            to the application thread. */
1603:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         err = out_err;
1604:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         write_finished = 1;
1605:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         conn->current_msg->msg.w.len = 0;
1606:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else if (dontblock) {
1607:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* non-blocking write is done on ERR_MEM */
1608:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         err = ERR_WOULDBLOCK;
1609:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         write_finished = 1;
1610:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         conn->current_msg->msg.w.len = 0;
1611:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1612:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else {
1613:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* On errors != ERR_MEM, we don't try writing any more but return
1614:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****          the error to the application thread. */
1615:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       write_finished = 1;
1616:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg->msg.w.len = 0;
1617:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1618:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 45


1619:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (write_finished) {
1620:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* everything was written: set back connection state
1621:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        and back to application task */
1622:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_sem_t* op_completed_sem = LWIP_API_MSG_SEM(conn->current_msg);
1623:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->current_msg->err = err;
1624:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->current_msg = NULL;
1625:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->write_offset = 0;
1626:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->state = NETCONN_NONE;
1627:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     NETCONN_SET_SAFE_ERR(conn, err);
1628:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
1629:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (delayed)
1630:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
1631:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     {
1632:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       sys_sem_signal(op_completed_sem);
1633:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1634:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1635:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
1636:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   else {
1637:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_MEM;
1638:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1639:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
1640:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return ERR_OK;
1641:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1642:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
1643:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1644:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1645:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Send some data on a TCP pcb contained in a netconn
1646:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_write
1647:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1648:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg pointing to the connection
1649:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1650:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
1651:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_write(void *m)
1652:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
1653:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
1654:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1655:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (ERR_IS_FATAL(msg->conn->last_err)) {
1656:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = msg->conn->last_err;
1657:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
1658:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_TCP) {
1659:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
1660:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (msg->conn->state != NETCONN_NONE) {
1661:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* netconn is connecting, closing or in blocking write */
1662:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = ERR_INPROGRESS;
1663:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else if (msg->conn->pcb.tcp != NULL) {
1664:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->state = NETCONN_WRITE;
1665:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* set all the variables used by lwip_netconn_do_writemore */
1666:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         LWIP_ASSERT("already writing or closing", msg->conn->current_msg == NULL &&
1667:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->conn->write_offset == 0);
1668:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         LWIP_ASSERT("msg->msg.w.len != 0", msg->msg.w.len != 0);
1669:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->current_msg = msg;
1670:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->write_offset = 0;
1671:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
1672:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (lwip_netconn_do_writemore(msg->conn, 0) != ERR_OK) {
1673:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LWIP_ASSERT("state!", msg->conn->state == NETCONN_WRITE);
1674:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           UNLOCK_TCPIP_CORE();
1675:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           sys_arch_sem_wait(LWIP_API_MSG_SEM(msg), 0);
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 46


1676:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LOCK_TCPIP_CORE();
1677:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LWIP_ASSERT("state!", msg->conn->state != NETCONN_WRITE);
1678:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
1679:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else /* LWIP_TCPIP_CORE_LOCKING */
1680:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         lwip_netconn_do_writemore(msg->conn);
1681:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCPIP_CORE_LOCKING */
1682:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* for both cases: if lwip_netconn_do_writemore was called, don't ACK the APIMSG
1683:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****            since lwip_netconn_do_writemore ACKs it! */
1684:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         return;
1685:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
1686:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = ERR_CONN;
1687:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1688:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else /* LWIP_TCP */
1689:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->err = ERR_VAL;
1690:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
1691:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if (LWIP_UDP || LWIP_RAW)
1692:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else {
1693:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->err = ERR_VAL;
1694:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* (LWIP_UDP || LWIP_RAW) */
1695:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1696:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1697:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   TCPIP_APIMSG_ACK(msg);
1698:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1699:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1700:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1701:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Return a connection's local or remote address
1702:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_getaddr
1703:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1704:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg pointing to the connection
1705:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1706:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
1707:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_getaddr(void *m)
1708:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
1709:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
1710:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1711:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (msg->conn->pcb.ip != NULL) {
1712:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->msg.ad.local) {
1713:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       ip_addr_copy(API_EXPR_DEREF(msg->msg.ad.ipaddr),
1714:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->pcb.ip->local_ip);
1715:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else {
1716:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       ip_addr_copy(API_EXPR_DEREF(msg->msg.ad.ipaddr),
1717:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->pcb.ip->remote_ip);
1718:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1719:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1720:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_OK;
1721:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     switch (NETCONNTYPE_GROUP(msg->conn->type)) {
1722:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
1723:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     case NETCONN_RAW:
1724:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (msg->msg.ad.local) {
1725:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         API_EXPR_DEREF(msg->msg.ad.port) = msg->conn->pcb.raw->protocol;
1726:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
1727:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* return an error as connecting is only a helper for upper layers */
1728:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = ERR_CONN;
1729:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1730:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       break;
1731:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_RAW */
1732:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_UDP
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 47


1733:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     case NETCONN_UDP:
1734:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (msg->msg.ad.local) {
1735:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         API_EXPR_DEREF(msg->msg.ad.port) = msg->conn->pcb.udp->local_port;
1736:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
1737:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if ((msg->conn->pcb.udp->flags & UDP_FLAGS_CONNECTED) == 0) {
1738:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->err = ERR_CONN;
1739:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         } else {
1740:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           API_EXPR_DEREF(msg->msg.ad.port) = msg->conn->pcb.udp->remote_port;
1741:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
1742:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1743:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       break;
1744:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDP */
1745:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
1746:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     case NETCONN_TCP:
1747:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if ((msg->msg.ad.local == 0) &&
1748:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           ((msg->conn->pcb.tcp->state == CLOSED) || (msg->conn->pcb.tcp->state == LISTEN))) {
1749:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* pcb is not connected and remote name is requested */
1750:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = ERR_CONN;
1751:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
1752:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         API_EXPR_DEREF(msg->msg.ad.port) = (msg->msg.ad.local ? msg->conn->pcb.tcp->local_port : ms
1753:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1754:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       break;
1755:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
1756:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     default:
1757:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       LWIP_ASSERT("invalid netconn_type", 0);
1758:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       break;
1759:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1760:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
1761:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_CONN;
1762:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1763:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   TCPIP_APIMSG_ACK(msg);
1764:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1765:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1766:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1767:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Close or half-shutdown a TCP pcb contained in a netconn
1768:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_close
1769:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * In contrast to closing sockets, the netconn is not deallocated.
1770:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1771:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg pointing to the connection
1772:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1773:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
1774:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_close(void *m)
1775:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
1776:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
1777:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1778:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
1779:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   enum netconn_state state = msg->conn->state;
1780:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* First check if this is a TCP netconn and if it is in a correct state
1781:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (LISTEN doesn't support half shutdown) */
1782:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if ((msg->conn->pcb.tcp != NULL) &&
1783:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_TCP) &&
1784:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       ((msg->msg.sd.shut == NETCONN_SHUT_RDWR) || (state != NETCONN_LISTEN))) {
1785:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* Check if we are in a connected state */
1786:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (state == NETCONN_CONNECT) {
1787:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* TCP connect in progress: cannot shutdown */
1788:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->err = ERR_CONN;
1789:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else if (state == NETCONN_WRITE) {
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 48


1790:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_NETCONN_FULLDUPLEX
1791:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (msg->msg.sd.shut & NETCONN_SHUT_WR) {
1792:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* close requested, abort running write */
1793:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         sys_sem_t* write_completed_sem;
1794:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         LWIP_ASSERT("msg->conn->current_msg != NULL", msg->conn->current_msg != NULL);
1795:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         write_completed_sem = LWIP_API_MSG_SEM(msg->conn->current_msg);
1796:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->current_msg->err = ERR_CLSD;
1797:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->current_msg = NULL;
1798:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->write_offset = 0;
1799:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->state = NETCONN_NONE;
1800:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         state = NETCONN_NONE;
1801:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         NETCONN_SET_SAFE_ERR(msg->conn, ERR_CLSD);
1802:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         sys_sem_signal(write_completed_sem);
1803:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
1804:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         LWIP_ASSERT("msg->msg.sd.shut == NETCONN_SHUT_RD", msg->msg.sd.shut == NETCONN_SHUT_RD);
1805:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* In this case, let the write continue and do not interfere with
1806:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****            conn->current_msg or conn->state! */
1807:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = tcp_shutdown(msg->conn->pcb.tcp, 1, 0);
1808:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1809:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1810:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (state == NETCONN_NONE) {
1811:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else /* LWIP_NETCONN_FULLDUPLEX */
1812:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->err = ERR_INPROGRESS;
1813:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else {
1814:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_NETCONN_FULLDUPLEX */
1815:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (msg->msg.sd.shut & NETCONN_SHUT_RD) {
1816:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* Drain and delete mboxes */
1817:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         netconn_drain(msg->conn);
1818:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1819:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       LWIP_ASSERT("already writing or closing", msg->conn->current_msg == NULL &&
1820:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->write_offset == 0);
1821:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->conn->state = NETCONN_CLOSE;
1822:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->conn->current_msg = msg;
1823:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
1824:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (lwip_netconn_do_close_internal(msg->conn, 0) != ERR_OK) {
1825:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         LWIP_ASSERT("state!", msg->conn->state == NETCONN_CLOSE);
1826:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         UNLOCK_TCPIP_CORE();
1827:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         sys_arch_sem_wait(LWIP_API_MSG_SEM(msg), 0);
1828:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         LOCK_TCPIP_CORE();
1829:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         LWIP_ASSERT("state!", msg->conn->state == NETCONN_NONE);
1830:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1831:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else /* LWIP_TCPIP_CORE_LOCKING */
1832:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       lwip_netconn_do_close_internal(msg->conn);
1833:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCPIP_CORE_LOCKING */
1834:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* for tcp netconns, lwip_netconn_do_close_internal ACKs the message */
1835:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       return;
1836:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1837:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else
1838:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
1839:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   {
1840:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_CONN;
1841:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1842:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   TCPIP_APIMSG_ACK(msg);
1843:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1844:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1845:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_IGMP || (LWIP_IPV6 && LWIP_IPV6_MLD)
1846:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 49


1847:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Join multicast groups for UDP netconns.
1848:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_join_leave_group
1849:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1850:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg pointing to the connection
1851:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1852:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
1853:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_join_leave_group(void *m)
1854:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
1855:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
1856:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1857:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (ERR_IS_FATAL(msg->conn->last_err)) {
1858:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = msg->conn->last_err;
1859:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
1860:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->conn->pcb.tcp != NULL) {
1861:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_UDP) {
1862:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_UDP
1863:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_IPV6 && LWIP_IPV6_MLD
1864:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (NETCONNTYPE_ISIPV6(msg->conn->type)) {
1865:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           if (msg->msg.jl.join_or_leave == NETCONN_JOIN) {
1866:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             msg->err = mld6_joingroup(ip_2_ip6(API_EXPR_REF(msg->msg.jl.netif_addr)),
1867:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               ip_2_ip6(API_EXPR_REF(msg->msg.jl.multiaddr)));
1868:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           } else {
1869:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             msg->err = mld6_leavegroup(ip_2_ip6(API_EXPR_REF(msg->msg.jl.netif_addr)),
1870:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               ip_2_ip6(API_EXPR_REF(msg->msg.jl.multiaddr)));
1871:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           }
1872:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
1873:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         else
1874:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_IPV6 && LWIP_IPV6_MLD */
1875:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         {
1876:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_IGMP
1877:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           if (msg->msg.jl.join_or_leave == NETCONN_JOIN) {
1878:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             msg->err = igmp_joingroup(ip_2_ip4(API_EXPR_REF(msg->msg.jl.netif_addr)),
1879:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               ip_2_ip4(API_EXPR_REF(msg->msg.jl.multiaddr)));
1880:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           } else {
1881:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             msg->err = igmp_leavegroup(ip_2_ip4(API_EXPR_REF(msg->msg.jl.netif_addr)),
1882:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               ip_2_ip4(API_EXPR_REF(msg->msg.jl.multiaddr)));
1883:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           }
1884:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_IGMP */
1885:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
1886:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDP */
1887:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if (LWIP_TCP || LWIP_RAW)
1888:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
1889:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = ERR_VAL;
1890:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* (LWIP_TCP || LWIP_RAW) */
1891:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1892:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else {
1893:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->err = ERR_CONN;
1894:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1895:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1896:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   TCPIP_APIMSG_ACK(msg);
1897:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1898:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_IGMP || (LWIP_IPV6 && LWIP_IPV6_MLD) */
1899:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1900:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_DNS
1901:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1902:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Callback function that is called when DNS name is resolved
1903:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * (or on timeout). A waiting application thread is waked up by
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 50


1904:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * signaling the semaphore.
1905:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1906:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static void
1907:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_dns_found(const char *name, const ip_addr_t *ipaddr, void *arg)
1908:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 832              		.loc 1 1908 0
 833              		.cfi_startproc
 834              		@ args = 0, pretend = 0, frame = 0
 835              		@ frame_needed = 0, uses_anonymous_args = 0
 836              	.LVL101:
 837 0000 08B5     		push	{r3, lr}
 838              	.LCFI6:
 839              		.cfi_def_cfa_offset 8
 840              		.cfi_offset 3, -8
 841              		.cfi_offset 14, -4
 842              	.LVL102:
1909:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct dns_api_msg *msg = (struct dns_api_msg*)arg;
1910:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1911:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* we trust the internal implementation to be correct :-) */
1912:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_UNUSED_ARG(name);
1913:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1914:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (ipaddr == NULL) {
 843              		.loc 1 1914 0
 844 0002 51B1     		cbz	r1, .L92
 845 0004 0B46     		mov	r3, r1
1915:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* timeout or memory error */
1916:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     API_EXPR_DEREF(msg->err) = ERR_VAL;
1917:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
1918:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* address was resolved */
1919:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     API_EXPR_DEREF(msg->err) = ERR_OK;
 846              		.loc 1 1919 0
 847 0006 D168     		ldr	r1, [r2, #12]
 848              	.LVL103:
 849 0008 0020     		movs	r0, #0
 850              	.LVL104:
 851 000a 0870     		strb	r0, [r1]
1920:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     API_EXPR_DEREF(msg->addr) = *ipaddr;
 852              		.loc 1 1920 0
 853 000c 5168     		ldr	r1, [r2, #4]
 854 000e 1B68     		ldr	r3, [r3]
 855              	.LVL105:
 856 0010 0B60     		str	r3, [r1]
 857              	.L90:
1921:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1922:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* wake up the application task waiting in netconn_gethostbyname */
1923:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   sys_sem_signal(API_EXPR_REF_SEM(msg->sem));
 858              		.loc 1 1923 0
 859 0012 9068     		ldr	r0, [r2, #8]
 860 0014 FFF7FEFF 		bl	sys_sem_signal
 861              	.LVL106:
 862 0018 08BD     		pop	{r3, pc}
 863              	.LVL107:
 864              	.L92:
1916:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 865              		.loc 1 1916 0
 866 001a D368     		ldr	r3, [r2, #12]
 867 001c FA21     		movs	r1, #250
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 51


 868              	.LVL108:
 869 001e 1970     		strb	r1, [r3]
 870 0020 F7E7     		b	.L90
 871              		.cfi_endproc
 872              	.LFE182:
 874              		.section	.text.lwip_netconn_do_writemore,"ax",%progbits
 875              		.align	1
 876              		.syntax unified
 877              		.thumb
 878              		.thumb_func
 879              		.fpu fpv5-sp-d16
 881              	lwip_netconn_do_writemore:
 882              	.LFB178:
1498:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   err_t err;
 883              		.loc 1 1498 0
 884              		.cfi_startproc
 885              		@ args = 0, pretend = 0, frame = 0
 886              		@ frame_needed = 0, uses_anonymous_args = 0
 887              	.LVL109:
 888 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 889              	.LCFI7:
 890              		.cfi_def_cfa_offset 32
 891              		.cfi_offset 3, -32
 892              		.cfi_offset 4, -28
 893              		.cfi_offset 5, -24
 894              		.cfi_offset 6, -20
 895              		.cfi_offset 7, -16
 896              		.cfi_offset 8, -12
 897              		.cfi_offset 9, -8
 898              		.cfi_offset 14, -4
 899 0004 8846     		mov	r8, r1
 900              	.LVL110:
1507:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->state == NETCONN_WRITE", (conn->state == NETCONN_WRITE));
 901              		.loc 1 1507 0
 902 0006 0446     		mov	r4, r0
 903 0008 F0B1     		cbz	r0, .L125
 904              	.LVL111:
 905              	.L94:
1508:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->current_msg != NULL", conn->current_msg != NULL);
 906              		.loc 1 1508 0
 907 000a 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 908 000c 012B     		cmp	r3, #1
 909 000e 06D0     		beq	.L95
1508:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->current_msg != NULL", conn->current_msg != NULL);
 910              		.loc 1 1508 0 is_stmt 0 discriminator 1
 911 0010 804B     		ldr	r3, .L132
 912 0012 40F2E452 		movw	r2, #1508
 913 0016 8049     		ldr	r1, .L132+4
 914 0018 8048     		ldr	r0, .L132+8
 915 001a FFF7FEFF 		bl	printf
 916              	.LVL112:
 917              	.L95:
1509:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->pcb.tcp != NULL", conn->pcb.tcp != NULL);
 918              		.loc 1 1509 0 is_stmt 1
 919 001e 636A     		ldr	r3, [r4, #36]
 920 0020 D3B1     		cbz	r3, .L126
 921              	.L96:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 52


1510:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->write_offset < conn->current_msg->msg.w.len",
 922              		.loc 1 1510 0
 923 0022 6368     		ldr	r3, [r4, #4]
 924 0024 03B3     		cbz	r3, .L127
 925              	.L97:
1511:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->write_offset < conn->current_msg->msg.w.len);
 926              		.loc 1 1511 0
 927 0026 226A     		ldr	r2, [r4, #32]
 928 0028 636A     		ldr	r3, [r4, #36]
 929 002a DB68     		ldr	r3, [r3, #12]
 930 002c 9A42     		cmp	r2, r3
 931 002e 23D2     		bcs	.L128
 932              	.L98:
1514:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   dontblock = netconn_is_nonblocking(conn) || (apiflags & NETCONN_DONTBLOCK);
 933              		.loc 1 1514 0
 934 0030 626A     		ldr	r2, [r4, #36]
 935 0032 92F81090 		ldrb	r9, [r2, #16]	@ zero_extendqisi2
 936              	.LVL113:
1515:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 937              		.loc 1 1515 0
 938 0036 237F     		ldrb	r3, [r4, #28]	@ zero_extendqisi2
 939 0038 13F0020F 		tst	r3, #2
 940 003c 24D1     		bne	.L119
1515:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 941              		.loc 1 1515 0 is_stmt 0 discriminator 2
 942 003e 19F0040F 		tst	r9, #4
 943 0042 39D0     		beq	.L120
1515:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 944              		.loc 1 1515 0
 945 0044 0126     		movs	r6, #1
 946 0046 20E0     		b	.L99
 947              	.LVL114:
 948              	.L125:
1507:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->state == NETCONN_WRITE", (conn->state == NETCONN_WRITE));
 949              		.loc 1 1507 0 is_stmt 1 discriminator 1
 950 0048 724B     		ldr	r3, .L132
 951 004a 40F2E352 		movw	r2, #1507
 952 004e 7449     		ldr	r1, .L132+12
 953              	.LVL115:
 954 0050 7248     		ldr	r0, .L132+8
 955              	.LVL116:
 956 0052 FFF7FEFF 		bl	printf
 957              	.LVL117:
 958 0056 D8E7     		b	.L94
 959              	.L126:
1509:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->pcb.tcp != NULL", conn->pcb.tcp != NULL);
 960              		.loc 1 1509 0 discriminator 1
 961 0058 6E4B     		ldr	r3, .L132
 962 005a 40F2E552 		movw	r2, #1509
 963 005e 7149     		ldr	r1, .L132+16
 964 0060 6E48     		ldr	r0, .L132+8
 965 0062 FFF7FEFF 		bl	printf
 966              	.LVL118:
 967 0066 DCE7     		b	.L96
 968              	.L127:
1510:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->write_offset < conn->current_msg->msg.w.len",
 969              		.loc 1 1510 0 discriminator 1
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 53


 970 0068 6A4B     		ldr	r3, .L132
 971 006a 40F2E652 		movw	r2, #1510
 972 006e 6E49     		ldr	r1, .L132+20
 973 0070 6A48     		ldr	r0, .L132+8
 974 0072 FFF7FEFF 		bl	printf
 975              	.LVL119:
 976 0076 D6E7     		b	.L97
 977              	.L128:
1511:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->write_offset < conn->current_msg->msg.w.len);
 978              		.loc 1 1511 0 discriminator 1
 979 0078 664B     		ldr	r3, .L132
 980 007a 4FF4BD62 		mov	r2, #1512
 981 007e 6B49     		ldr	r1, .L132+24
 982 0080 6648     		ldr	r0, .L132+8
 983 0082 FFF7FEFF 		bl	printf
 984              	.LVL120:
 985 0086 D3E7     		b	.L98
 986              	.LVL121:
 987              	.L119:
1515:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 988              		.loc 1 1515 0
 989 0088 0126     		movs	r6, #1
 990              	.L99:
1515:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 991              		.loc 1 1515 0 is_stmt 0 discriminator 6
 992 008a F6B2     		uxtb	r6, r6
 993              	.LVL122:
1534:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     diff = conn->current_msg->msg.w.len - conn->write_offset;
 994              		.loc 1 1534 0 is_stmt 1 discriminator 6
 995 008c 9768     		ldr	r7, [r2, #8]
 996 008e 236A     		ldr	r3, [r4, #32]
 997 0090 1F44     		add	r7, r7, r3
 998              	.LVL123:
1535:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (diff > 0xffffUL) { /* max_u16_t */
 999              		.loc 1 1535 0 discriminator 6
 1000 0092 D268     		ldr	r2, [r2, #12]
 1001 0094 D51A     		subs	r5, r2, r3
 1002              	.LVL124:
1536:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       len = 0xffff;
 1003              		.loc 1 1536 0 discriminator 6
 1004 0096 B5F5803F 		cmp	r5, #65536
 1005 009a 0FD3     		bcc	.L100
 1006              	.LVL125:
1538:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else {
 1007              		.loc 1 1538 0
 1008 009c 49F00209 		orr	r9, r9, #2
 1009              	.LVL126:
1537:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       apiflags |= TCP_WRITE_FLAG_MORE;
 1010              		.loc 1 1537 0
 1011 00a0 4FF6FF75 		movw	r5, #65535
 1012              	.LVL127:
 1013              	.L101:
1542:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (available < len) {
 1014              		.loc 1 1542 0
 1015 00a4 6168     		ldr	r1, [r4, #4]
 1016 00a6 B1F86010 		ldrh	r1, [r1, #96]
 1017              	.LVL128:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 54


1543:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* don't try to write more than sendbuf */
 1018              		.loc 1 1543 0
 1019 00aa 8D42     		cmp	r5, r1
 1020 00ac 0BD9     		bls	.L102
 1021              	.LVL129:
1546:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (!len) {
 1022              		.loc 1 1546 0
 1023 00ae 3EB1     		cbz	r6, .L103
1547:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           err = ERR_WOULDBLOCK;
 1024              		.loc 1 1547 0
 1025 00b0 0029     		cmp	r1, #0
 1026 00b2 3FD0     		beq	.L121
1545:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (dontblock) {
 1027              		.loc 1 1545 0
 1028 00b4 0D46     		mov	r5, r1
 1029 00b6 06E0     		b	.L102
 1030              	.LVL130:
 1031              	.L120:
1515:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 1032              		.loc 1 1515 0
 1033 00b8 0026     		movs	r6, #0
 1034 00ba E6E7     		b	.L99
 1035              	.LVL131:
 1036              	.L100:
1540:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1037              		.loc 1 1540 0
 1038 00bc ADB2     		uxth	r5, r5
 1039              	.LVL132:
 1040 00be F1E7     		b	.L101
 1041              	.LVL133:
 1042              	.L103:
1552:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 1043              		.loc 1 1552 0
 1044 00c0 49F00209 		orr	r9, r9, #2
 1045              	.LVL134:
1545:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (dontblock) {
 1046              		.loc 1 1545 0
 1047 00c4 0D46     		mov	r5, r1
 1048              	.LVL135:
 1049              	.L102:
1555:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     err = tcp_write(conn->pcb.tcp, dataptr, len, apiflags);
 1050              		.loc 1 1555 0
 1051 00c6 2B44     		add	r3, r3, r5
 1052              	.LVL136:
 1053 00c8 9A42     		cmp	r2, r3
 1054 00ca 2BD3     		bcc	.L129
 1055              	.LVL137:
 1056              	.L105:
1556:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* if OK or memory error, check available space */
 1057              		.loc 1 1556 0
 1058 00cc 4B46     		mov	r3, r9
 1059 00ce 2A46     		mov	r2, r5
 1060 00d0 3946     		mov	r1, r7
 1061 00d2 6068     		ldr	r0, [r4, #4]
 1062 00d4 FFF7FEFF 		bl	tcp_write
 1063              	.LVL138:
 1064 00d8 0746     		mov	r7, r0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 55


 1065              	.LVL139:
1558:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** err_mem:
 1066              		.loc 1 1558 0
 1067 00da 431C     		adds	r3, r0, #1
 1068 00dc DBB2     		uxtb	r3, r3
 1069 00de 012B     		cmp	r3, #1
 1070 00e0 2BD9     		bls	.L104
 1071              	.LVL140:
 1072              	.L106:
1573:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       err_t out_err;
 1073              		.loc 1 1573 0
 1074 00e2 002F     		cmp	r7, #0
 1075 00e4 4BD1     		bne	.L110
 1076              	.LBB8:
1575:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if ((conn->write_offset == conn->current_msg->msg.w.len) || dontblock) {
 1077              		.loc 1 1575 0
 1078 00e6 236A     		ldr	r3, [r4, #32]
 1079 00e8 1D44     		add	r5, r5, r3
 1080              	.LVL141:
 1081 00ea 2562     		str	r5, [r4, #32]
1576:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* return sent length */
 1082              		.loc 1 1576 0
 1083 00ec 636A     		ldr	r3, [r4, #36]
 1084 00ee DA68     		ldr	r2, [r3, #12]
 1085 00f0 9542     		cmp	r5, r2
 1086 00f2 00D0     		beq	.L111
1576:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* return sent length */
 1087              		.loc 1 1576 0 is_stmt 0 discriminator 1
 1088 00f4 0EB1     		cbz	r6, .L112
 1089              	.L111:
1578:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* everything was written */
 1090              		.loc 1 1578 0 is_stmt 1
 1091 00f6 DD60     		str	r5, [r3, #12]
 1092              	.LVL142:
1580:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 1093              		.loc 1 1580 0
 1094 00f8 0126     		movs	r6, #1
 1095              	.LVL143:
 1096              	.L112:
1582:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (ERR_IS_FATAL(out_err) || (out_err == ERR_RTE)) {
 1097              		.loc 1 1582 0
 1098 00fa 6068     		ldr	r0, [r4, #4]
 1099 00fc FFF7FEFF 		bl	tcp_output
 1100              	.LVL144:
1583:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* If tcp_output fails with fatal error or no route is found,
 1101              		.loc 1 1583 0
 1102 0100 10F10C0F 		cmn	r0, #12
 1103 0104 ACBF     		ite	ge
 1104 0106 0022     		movge	r2, #0
 1105 0108 0122     		movlt	r2, #1
 1106 010a 10F1040F 		cmn	r0, #4
 1107 010e 14BF     		ite	ne
 1108 0110 0023     		movne	r3, #0
 1109 0112 0123     		moveq	r3, #1
 1110 0114 1343     		orrs	r3, r2, r3
 1111 0116 39D0     		beq	.L113
 1112              	.LVL145:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 56


1589:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 1113              		.loc 1 1589 0
 1114 0118 636A     		ldr	r3, [r4, #36]
 1115 011a 0022     		movs	r2, #0
 1116 011c DA60     		str	r2, [r3, #12]
1587:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         write_finished = 1;
 1117              		.loc 1 1587 0
 1118 011e 0746     		mov	r7, r0
1588:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         conn->current_msg->msg.w.len = 0;
 1119              		.loc 1 1588 0
 1120 0120 0126     		movs	r6, #1
 1121 0122 33E0     		b	.L113
 1122              	.LVL146:
 1123              	.L129:
 1124              	.LBE8:
1555:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     err = tcp_write(conn->pcb.tcp, dataptr, len, apiflags);
 1125              		.loc 1 1555 0 discriminator 1
 1126 0124 3B4B     		ldr	r3, .L132
 1127 0126 40F21362 		movw	r2, #1555
 1128              	.LVL147:
 1129 012a 4149     		ldr	r1, .L132+28
 1130              	.LVL148:
 1131 012c 3B48     		ldr	r0, .L132+8
 1132 012e FFF7FEFF 		bl	printf
 1133              	.LVL149:
 1134 0132 CBE7     		b	.L105
 1135              	.LVL150:
 1136              	.L121:
1545:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (dontblock) {
 1137              		.loc 1 1545 0
 1138 0134 0D46     		mov	r5, r1
1548:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           goto err_mem;
 1139              		.loc 1 1548 0
 1140 0136 6FF00607 		mvn	r7, #6
 1141              	.LVL151:
 1142              	.L104:
1560:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* non-blocking write did not write everything: mark the pcb non-writable
 1143              		.loc 1 1560 0
 1144 013a 76B1     		cbz	r6, .L107
1560:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* non-blocking write did not write everything: mark the pcb non-writable
 1145              		.loc 1 1560 0 is_stmt 0 discriminator 1
 1146 013c 636A     		ldr	r3, [r4, #36]
 1147 013e DB68     		ldr	r3, [r3, #12]
 1148 0140 9D42     		cmp	r5, r3
 1149 0142 0AD2     		bcs	.L107
1563:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         conn->flags |= NETCONN_FLAG_CHECK_WRITESPACE;
 1150              		.loc 1 1563 0 is_stmt 1
 1151 0144 A36A     		ldr	r3, [r4, #40]
 1152 0146 1BB1     		cbz	r3, .L108
1563:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         conn->flags |= NETCONN_FLAG_CHECK_WRITESPACE;
 1153              		.loc 1 1563 0 is_stmt 0 discriminator 1
 1154 0148 2A46     		mov	r2, r5
 1155 014a 0321     		movs	r1, #3
 1156 014c 2046     		mov	r0, r4
 1157 014e 9847     		blx	r3
 1158              	.LVL152:
 1159              	.L108:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 57


1564:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else if ((tcp_sndbuf(conn->pcb.tcp) <= TCP_SNDLOWAT) ||
 1160              		.loc 1 1564 0 is_stmt 1
 1161 0150 237F     		ldrb	r3, [r4, #28]	@ zero_extendqisi2
 1162 0152 43F01003 		orr	r3, r3, #16
 1163 0156 2377     		strb	r3, [r4, #28]
 1164 0158 C3E7     		b	.L106
 1165              	.L107:
1565:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                  (tcp_sndqueuelen(conn->pcb.tcp) >= TCP_SNDQUEUELOWAT)) {
 1166              		.loc 1 1565 0
 1167 015a 6368     		ldr	r3, [r4, #4]
 1168 015c B3F86020 		ldrh	r2, [r3, #96]
 1169 0160 B2F5866F 		cmp	r2, #1072
 1170 0164 03D3     		bcc	.L109
1566:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* The queued byte- or pbuf-count exceeds the configured low-water limit,
 1171              		.loc 1 1566 0 discriminator 1
 1172 0166 B3F86230 		ldrh	r3, [r3, #98]
1565:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                  (tcp_sndqueuelen(conn->pcb.tcp) >= TCP_SNDQUEUELOWAT)) {
 1173              		.loc 1 1565 0 discriminator 1
 1174 016a 042B     		cmp	r3, #4
 1175 016c B9D9     		bls	.L106
 1176              	.L109:
1569:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 1177              		.loc 1 1569 0
 1178 016e A36A     		ldr	r3, [r4, #40]
 1179 0170 002B     		cmp	r3, #0
 1180 0172 B6D0     		beq	.L106
1569:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 1181              		.loc 1 1569 0 is_stmt 0 discriminator 1
 1182 0174 2A46     		mov	r2, r5
 1183 0176 0321     		movs	r1, #3
 1184 0178 2046     		mov	r0, r4
 1185 017a 9847     		blx	r3
 1186              	.LVL153:
 1187 017c B1E7     		b	.L106
 1188              	.L110:
1591:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* If ERR_MEM, we wait for sent_tcp or poll_tcp to be called.
 1189              		.loc 1 1591 0 is_stmt 1
 1190 017e B7F1FF3F 		cmp	r7, #-1
 1191 0182 1FD0     		beq	.L130
 1192              	.LVL154:
1616:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1193              		.loc 1 1616 0
 1194 0184 636A     		ldr	r3, [r4, #36]
 1195 0186 0022     		movs	r2, #0
 1196 0188 DA60     		str	r2, [r3, #12]
1615:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg->msg.w.len = 0;
 1197              		.loc 1 1615 0
 1198 018a 0126     		movs	r6, #1
 1199              	.LVL155:
 1200              	.L113:
1619:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* everything was written: set back connection state
 1201              		.loc 1 1619 0
 1202 018c 002E     		cmp	r6, #0
 1203 018e 3DD0     		beq	.L122
 1204              	.LBB9:
1622:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->current_msg->err = err;
 1205              		.loc 1 1622 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 58


 1206 0190 636A     		ldr	r3, [r4, #36]
 1207 0192 1868     		ldr	r0, [r3]
 1208 0194 00F10C05 		add	r5, r0, #12
 1209              	.LVL156:
1623:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->current_msg = NULL;
 1210              		.loc 1 1623 0
 1211 0198 1F71     		strb	r7, [r3, #4]
1624:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->write_offset = 0;
 1212              		.loc 1 1624 0
 1213 019a 0023     		movs	r3, #0
 1214 019c 6362     		str	r3, [r4, #36]
1625:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->state = NETCONN_NONE;
 1215              		.loc 1 1625 0
 1216 019e 2362     		str	r3, [r4, #32]
1626:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     NETCONN_SET_SAFE_ERR(conn, err);
 1217              		.loc 1 1626 0
 1218 01a0 6370     		strb	r3, [r4, #1]
1627:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
 1219              		.loc 1 1627 0
 1220 01a2 4CB1     		cbz	r4, .L117
 1221              	.LBB10:
1627:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
 1222              		.loc 1 1627 0 is_stmt 0 discriminator 1
 1223 01a4 FFF7FEFF 		bl	sys_arch_protect
 1224              	.LVL157:
 1225 01a8 94F90830 		ldrsb	r3, [r4, #8]
 1226 01ac 13F10C0F 		cmn	r3, #12
 1227 01b0 00DB     		blt	.L118
1627:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
 1228              		.loc 1 1627 0 discriminator 2
 1229 01b2 2772     		strb	r7, [r4, #8]
 1230              	.L118:
1627:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
 1231              		.loc 1 1627 0 discriminator 4
 1232 01b4 FFF7FEFF 		bl	sys_arch_unprotect
 1233              	.LVL158:
 1234              	.L117:
 1235              	.LBE10:
1629:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
 1236              		.loc 1 1629 0 is_stmt 1
 1237 01b8 B8F1000F 		cmp	r8, #0
 1238 01bc 20D1     		bne	.L131
 1239              	.LBE9:
1640:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 1240              		.loc 1 1640 0
 1241 01be 0020     		movs	r0, #0
1641:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 1242              		.loc 1 1641 0
 1243 01c0 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 1244              	.LVL159:
 1245              	.L130:
 1246              	.LBB11:
1598:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (ERR_IS_FATAL(out_err) || (out_err == ERR_RTE)) {
 1247              		.loc 1 1598 0
 1248 01c4 6068     		ldr	r0, [r4, #4]
 1249 01c6 FFF7FEFF 		bl	tcp_output
 1250              	.LVL160:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 59


1599:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* If tcp_output fails with fatal error or no route is found,
 1251              		.loc 1 1599 0
 1252 01ca 10F10C0F 		cmn	r0, #12
 1253 01ce ACBF     		ite	ge
 1254 01d0 0022     		movge	r2, #0
 1255 01d2 0122     		movlt	r2, #1
 1256 01d4 10F1040F 		cmn	r0, #4
 1257 01d8 14BF     		ite	ne
 1258 01da 0023     		movne	r3, #0
 1259 01dc 0123     		moveq	r3, #1
 1260 01de 1343     		orrs	r3, r2, r3
 1261 01e0 05D0     		beq	.L115
 1262              	.LVL161:
1605:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else if (dontblock) {
 1263              		.loc 1 1605 0
 1264 01e2 636A     		ldr	r3, [r4, #36]
 1265 01e4 0022     		movs	r2, #0
 1266 01e6 DA60     		str	r2, [r3, #12]
1603:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         write_finished = 1;
 1267              		.loc 1 1603 0
 1268 01e8 0746     		mov	r7, r0
1604:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         conn->current_msg->msg.w.len = 0;
 1269              		.loc 1 1604 0
 1270 01ea 0126     		movs	r6, #1
 1271              	.LVL162:
 1272 01ec CEE7     		b	.L113
 1273              	.LVL163:
 1274              	.L115:
1606:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* non-blocking write is done on ERR_MEM */
 1275              		.loc 1 1606 0
 1276 01ee 002E     		cmp	r6, #0
 1277 01f0 CCD0     		beq	.L113
 1278              	.LVL164:
1610:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 1279              		.loc 1 1610 0
 1280 01f2 636A     		ldr	r3, [r4, #36]
 1281 01f4 0022     		movs	r2, #0
 1282 01f6 DA60     		str	r2, [r3, #12]
1609:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         conn->current_msg->msg.w.len = 0;
 1283              		.loc 1 1609 0
 1284 01f8 0126     		movs	r6, #1
 1285              	.LVL165:
1608:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         write_finished = 1;
 1286              		.loc 1 1608 0
 1287 01fa 6FF00607 		mvn	r7, #6
 1288 01fe C5E7     		b	.L113
 1289              	.LVL166:
 1290              	.L131:
 1291              	.LBE11:
 1292              	.LBB12:
1632:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1293              		.loc 1 1632 0
 1294 0200 2846     		mov	r0, r5
 1295 0202 FFF7FEFF 		bl	sys_sem_signal
 1296              	.LVL167:
 1297              	.LBE12:
1640:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 60


 1298              		.loc 1 1640 0
 1299 0206 0020     		movs	r0, #0
 1300 0208 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 1301              	.LVL168:
 1302              	.L122:
1637:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 1303              		.loc 1 1637 0
 1304 020c 4FF0FF30 		mov	r0, #-1
 1305 0210 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 1306              	.LVL169:
 1307              	.L133:
 1308              		.align	2
 1309              	.L132:
 1310 0214 00000000 		.word	.LC0
 1311 0218 00000000 		.word	.LC13
 1312 021c 54000000 		.word	.LC2
 1313 0220 00000000 		.word	.LC6
 1314 0224 10000000 		.word	.LC7
 1315 0228 20000000 		.word	.LC14
 1316 022c 38000000 		.word	.LC15
 1317 0230 6C000000 		.word	.LC16
 1318              		.cfi_endproc
 1319              	.LFE178:
 1321              		.section	.text.lwip_netconn_do_close_internal,"ax",%progbits
 1322              		.align	1
 1323              		.syntax unified
 1324              		.thumb
 1325              		.thumb_func
 1326              		.fpu fpv5-sp-d16
 1328              	lwip_netconn_do_close_internal:
 1329              	.LFB169:
 826:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   err_t err;
 1330              		.loc 1 826 0
 1331              		.cfi_startproc
 1332              		@ args = 0, pretend = 0, frame = 0
 1333              		@ frame_needed = 0, uses_anonymous_args = 0
 1334              	.LVL170:
 1335 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 1336              	.LCFI8:
 1337              		.cfi_def_cfa_offset 32
 1338              		.cfi_offset 4, -32
 1339              		.cfi_offset 5, -28
 1340              		.cfi_offset 6, -24
 1341              		.cfi_offset 7, -20
 1342              		.cfi_offset 8, -16
 1343              		.cfi_offset 9, -12
 1344              		.cfi_offset 10, -8
 1345              		.cfi_offset 14, -4
 1346 0004 8846     		mov	r8, r1
 1347              	.LVL171:
 835:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("this is for tcp netconns only", (NETCONNTYPE_GROUP(conn->type) == NETCONN_TCP));
 1348              		.loc 1 835 0
 1349 0006 0446     		mov	r4, r0
 1350 0008 0028     		cmp	r0, #0
 1351 000a 35D0     		beq	.L169
 1352              	.LVL172:
 1353              	.L135:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 61


 836:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn must be in state NETCONN_CLOSE", (conn->state == NETCONN_CLOSE));
 1354              		.loc 1 836 0
 1355 000c 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 1356 000e 03F0F003 		and	r3, r3, #240
 1357 0012 102B     		cmp	r3, #16
 1358 0014 06D0     		beq	.L136
 836:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn must be in state NETCONN_CLOSE", (conn->state == NETCONN_CLOSE));
 1359              		.loc 1 836 0 is_stmt 0 discriminator 1
 1360 0016 824B     		ldr	r3, .L182
 1361 0018 4FF45172 		mov	r2, #836
 1362 001c 8149     		ldr	r1, .L182+4
 1363 001e 8248     		ldr	r0, .L182+8
 1364 0020 FFF7FEFF 		bl	printf
 1365              	.LVL173:
 1366              	.L136:
 837:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("pcb already closed", (conn->pcb.tcp != NULL));
 1367              		.loc 1 837 0 is_stmt 1
 1368 0024 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 1369 0026 042B     		cmp	r3, #4
 1370 0028 06D0     		beq	.L137
 837:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("pcb already closed", (conn->pcb.tcp != NULL));
 1371              		.loc 1 837 0 is_stmt 0 discriminator 1
 1372 002a 7D4B     		ldr	r3, .L182
 1373 002c 40F24532 		movw	r2, #837
 1374 0030 7E49     		ldr	r1, .L182+12
 1375 0032 7D48     		ldr	r0, .L182+8
 1376 0034 FFF7FEFF 		bl	printf
 1377              	.LVL174:
 1378              	.L137:
 838:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->current_msg != NULL", conn->current_msg != NULL);
 1379              		.loc 1 838 0 is_stmt 1
 1380 0038 6368     		ldr	r3, [r4, #4]
 1381 003a 2BB3     		cbz	r3, .L170
 1382              	.L138:
 839:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 1383              		.loc 1 839 0
 1384 003c 636A     		ldr	r3, [r4, #36]
 1385 003e 5BB3     		cbz	r3, .L171
 1386              	.L139:
 841:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   shut = conn->current_msg->msg.sd.shut;
 1387              		.loc 1 841 0
 1388 0040 6568     		ldr	r5, [r4, #4]
 1389              	.LVL175:
 842:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   shut_rx = shut & NETCONN_SHUT_RD;
 1390              		.loc 1 842 0
 1391 0042 636A     		ldr	r3, [r4, #36]
 1392 0044 1B7A     		ldrb	r3, [r3, #8]	@ zero_extendqisi2
 1393              	.LVL176:
 843:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   shut_tx = shut & NETCONN_SHUT_WR;
 1394              		.loc 1 843 0
 1395 0046 03F0010A 		and	r10, r3, #1
 1396              	.LVL177:
 844:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* shutting down both ends is the same as closing
 1397              		.loc 1 844 0
 1398 004a 03F00209 		and	r9, r3, #2
 1399              	.LVL178:
 847:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     close = 1;
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 62


 1400              		.loc 1 847 0
 1401 004e 032B     		cmp	r3, #3
 1402 0050 2AD0     		beq	.L159
 849:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****              ((tpcb->state == FIN_WAIT_1) ||
 1403              		.loc 1 849 0
 1404 0052 BAF1000F 		cmp	r10, #0
 1405 0056 06D0     		beq	.L141
 850:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               (tpcb->state == FIN_WAIT_2) ||
 1406              		.loc 1 850 0 discriminator 1
 1407 0058 2A7D     		ldrb	r2, [r5, #20]	@ zero_extendqisi2
 851:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               (tpcb->state == CLOSING))) {
 1408              		.loc 1 851 0 discriminator 1
 1409 005a 531F     		subs	r3, r2, #5
 1410              	.LVL179:
 1411 005c DBB2     		uxtb	r3, r3
 849:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****              ((tpcb->state == FIN_WAIT_1) ||
 1412              		.loc 1 849 0 discriminator 1
 1413 005e 082A     		cmp	r2, #8
 1414 0060 18BF     		it	ne
 1415 0062 012B     		cmpne	r3, #1
 1416 0064 38D9     		bls	.L160
 1417              	.L141:
 854:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     close = 1;
 1418              		.loc 1 854 0
 1419 0066 B9F1000F 		cmp	r9, #0
 1420 006a 37D0     		beq	.L161
 854:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     close = 1;
 1421              		.loc 1 854 0 is_stmt 0 discriminator 1
 1422 006c AB7E     		ldrb	r3, [r5, #26]	@ zero_extendqisi2
 1423 006e 13F0100F 		tst	r3, #16
 1424 0072 35D1     		bne	.L162
 857:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 1425              		.loc 1 857 0 is_stmt 1
 1426 0074 0027     		movs	r7, #0
 1427 0076 18E0     		b	.L140
 1428              	.LVL180:
 1429              	.L169:
 835:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("this is for tcp netconns only", (NETCONNTYPE_GROUP(conn->type) == NETCONN_TCP));
 1430              		.loc 1 835 0 discriminator 1
 1431 0078 694B     		ldr	r3, .L182
 1432 007a 40F24332 		movw	r2, #835
 1433 007e 6C49     		ldr	r1, .L182+16
 1434              	.LVL181:
 1435 0080 6948     		ldr	r0, .L182+8
 1436              	.LVL182:
 1437 0082 FFF7FEFF 		bl	printf
 1438              	.LVL183:
 1439 0086 C1E7     		b	.L135
 1440              	.L170:
 838:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->current_msg != NULL", conn->current_msg != NULL);
 1441              		.loc 1 838 0 discriminator 1
 1442 0088 654B     		ldr	r3, .L182
 1443 008a 40F24632 		movw	r2, #838
 1444 008e 6949     		ldr	r1, .L182+20
 1445 0090 6548     		ldr	r0, .L182+8
 1446 0092 FFF7FEFF 		bl	printf
 1447              	.LVL184:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 63


 1448 0096 D1E7     		b	.L138
 1449              	.L171:
 839:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 1450              		.loc 1 839 0 discriminator 1
 1451 0098 614B     		ldr	r3, .L182
 1452 009a 40F24732 		movw	r2, #839
 1453 009e 6649     		ldr	r1, .L182+24
 1454 00a0 6148     		ldr	r0, .L182+8
 1455 00a2 FFF7FEFF 		bl	printf
 1456              	.LVL185:
 1457 00a6 CBE7     		b	.L139
 1458              	.LVL186:
 1459              	.L159:
 848:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else if (shut_rx &&
 1460              		.loc 1 848 0
 1461 00a8 0127     		movs	r7, #1
 1462              	.LVL187:
 1463              	.L140:
 861:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_arg(tpcb, NULL);
 1464              		.loc 1 861 0
 1465 00aa DFB9     		cbnz	r7, .L172
 1466              	.LVL188:
 1467              	.L142:
 864:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_accept(tpcb, NULL);
 1468              		.loc 1 864 0
 1469 00ac 2B7D     		ldrb	r3, [r5, #20]	@ zero_extendqisi2
 1470 00ae 012B     		cmp	r3, #1
 1471 00b0 1DD0     		beq	.L173
 868:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_recv(tpcb, NULL);
 1472              		.loc 1 868 0
 1473 00b2 BAF1000F 		cmp	r10, #0
 1474 00b6 1FD1     		bne	.L174
 1475              	.L145:
 872:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_sent(tpcb, NULL);
 1476              		.loc 1 872 0
 1477 00b8 B9F1000F 		cmp	r9, #0
 1478 00bc 25D1     		bne	.L175
 1479              	.L146:
 875:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_poll(tpcb, NULL, 0);
 1480              		.loc 1 875 0
 1481 00be 4FBB     		cbnz	r7, .L176
 1482              	.L144:
 881:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_LINGER
 1483              		.loc 1 881 0
 1484 00c0 97B3     		cbz	r7, .L147
 911:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1485              		.loc 1 911 0
 1486 00c2 2846     		mov	r0, r5
 1487 00c4 FFF7FEFF 		bl	tcp_close
 1488              	.LVL189:
 1489 00c8 0646     		mov	r6, r0
 1490              	.LVL190:
 1491              	.L148:
 916:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     close_finished = 1;
 1492              		.loc 1 916 0
 1493 00ca 002E     		cmp	r6, #0
 1494 00cc 40D0     		beq	.L163
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 64


 926:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* Closing failed because of memory shortage, try again later. Even for
 1495              		.loc 1 926 0
 1496 00ce B6F1FF3F 		cmp	r6, #-1
 1497 00d2 30D0     		beq	.L177
 958:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1498              		.loc 1 958 0
 1499 00d4 0123     		movs	r3, #1
 1500 00d6 3CE0     		b	.L149
 1501              	.LVL191:
 1502              	.L160:
 853:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else if (shut_tx && ((tpcb->flags & TF_RXCLOSED) != 0)) {
 1503              		.loc 1 853 0
 1504 00d8 0127     		movs	r7, #1
 1505 00da E6E7     		b	.L140
 1506              	.L161:
 857:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 1507              		.loc 1 857 0
 1508 00dc 0027     		movs	r7, #0
 1509 00de E4E7     		b	.L140
 1510              	.L162:
 855:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 1511              		.loc 1 855 0
 1512 00e0 0127     		movs	r7, #1
 1513 00e2 E2E7     		b	.L140
 1514              	.LVL192:
 1515              	.L172:
 862:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 1516              		.loc 1 862 0
 1517 00e4 0021     		movs	r1, #0
 1518 00e6 2846     		mov	r0, r5
 1519 00e8 FFF7FEFF 		bl	tcp_arg
 1520              	.LVL193:
 1521 00ec DEE7     		b	.L142
 1522              	.L173:
 865:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 1523              		.loc 1 865 0
 1524 00ee 0021     		movs	r1, #0
 1525 00f0 2846     		mov	r0, r5
 1526 00f2 FFF7FEFF 		bl	tcp_accept
 1527              	.LVL194:
 1528 00f6 E3E7     		b	.L144
 1529              	.L174:
 869:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_accept(tpcb, NULL);
 1530              		.loc 1 869 0
 1531 00f8 0021     		movs	r1, #0
 1532 00fa 2846     		mov	r0, r5
 1533 00fc FFF7FEFF 		bl	tcp_recv
 1534              	.LVL195:
 870:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1535              		.loc 1 870 0
 1536 0100 0021     		movs	r1, #0
 1537 0102 2846     		mov	r0, r5
 1538 0104 FFF7FEFF 		bl	tcp_accept
 1539              	.LVL196:
 1540 0108 D6E7     		b	.L145
 1541              	.L175:
 873:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 65


 1542              		.loc 1 873 0
 1543 010a 0021     		movs	r1, #0
 1544 010c 2846     		mov	r0, r5
 1545 010e FFF7FEFF 		bl	tcp_sent
 1546              	.LVL197:
 1547 0112 D4E7     		b	.L146
 1548              	.L176:
 876:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_err(tpcb, NULL);
 1549              		.loc 1 876 0
 1550 0114 0022     		movs	r2, #0
 1551 0116 1146     		mov	r1, r2
 1552 0118 2846     		mov	r0, r5
 1553 011a FFF7FEFF 		bl	tcp_poll
 1554              	.LVL198:
 877:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1555              		.loc 1 877 0
 1556 011e 0021     		movs	r1, #0
 1557 0120 2846     		mov	r0, r5
 1558 0122 FFF7FEFF 		bl	tcp_err
 1559              	.LVL199:
 1560 0126 CBE7     		b	.L144
 1561              	.L147:
 914:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 1562              		.loc 1 914 0
 1563 0128 4A46     		mov	r2, r9
 1564 012a 5146     		mov	r1, r10
 1565 012c 2846     		mov	r0, r5
 1566 012e FFF7FEFF 		bl	tcp_shutdown
 1567              	.LVL200:
 1568 0132 0646     		mov	r6, r0
 1569              	.LVL201:
 1570 0134 C9E7     		b	.L148
 1571              	.L177:
 947:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_SNDTIMEO || LWIP_SO_LINGER */
 1572              		.loc 1 947 0
 1573 0136 636A     		ldr	r3, [r4, #36]
 1574 0138 5B7A     		ldrb	r3, [r3, #9]	@ zero_extendqisi2
 1575 013a 002B     		cmp	r3, #0
 1576 013c 3FD1     		bne	.L165
 1577              	.LVL202:
 950:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           /* in this case, we want to RST the connection */
 1578              		.loc 1 950 0
 1579 013e 0FB9     		cbnz	r7, .L178
 949:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (close) {
 1580              		.loc 1 949 0
 1581 0140 0123     		movs	r3, #1
 1582 0142 06E0     		b	.L149
 1583              	.L178:
 952:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           err = ERR_OK;
 1584              		.loc 1 952 0
 1585 0144 2846     		mov	r0, r5
 1586 0146 FFF7FEFF 		bl	tcp_abort
 1587              	.LVL203:
 949:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (close) {
 1588              		.loc 1 949 0
 1589 014a 3B46     		mov	r3, r7
 953:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 66


 1590              		.loc 1 953 0
 1591 014c 0026     		movs	r6, #0
 1592 014e 00E0     		b	.L149
 1593              	.LVL204:
 1594              	.L163:
 917:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_LINGER
 1595              		.loc 1 917 0
 1596 0150 0123     		movs	r3, #1
 1597              	.LVL205:
 1598              	.L149:
 961:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* Closing done (succeeded, non-memory error, nonblocking error or timeout) */
 1599              		.loc 1 961 0
 1600 0152 002B     		cmp	r3, #0
 1601 0154 3AD0     		beq	.L150
 1602              	.LBB13:
 963:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->current_msg->err = err;
 1603              		.loc 1 963 0
 1604 0156 636A     		ldr	r3, [r4, #36]
 1605              	.LVL206:
 1606 0158 1D68     		ldr	r5, [r3]
 1607              	.LVL207:
 1608 015a 0C35     		adds	r5, r5, #12
 1609              	.LVL208:
 964:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->current_msg = NULL;
 1610              		.loc 1 964 0
 1611 015c 1E71     		strb	r6, [r3, #4]
 965:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->state = NETCONN_NONE;
 1612              		.loc 1 965 0
 1613 015e 0023     		movs	r3, #0
 1614 0160 6362     		str	r3, [r4, #36]
 966:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (err == ERR_OK) {
 1615              		.loc 1 966 0
 1616 0162 6370     		strb	r3, [r4, #1]
 967:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (close) {
 1617              		.loc 1 967 0
 1618 0164 CEB9     		cbnz	r6, .L151
 968:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* Set back some callback pointers as conn is going away */
 1619              		.loc 1 968 0
 1620 0166 37B1     		cbz	r7, .L152
 970:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* Trigger select() in socket layer. Make sure everybody notices activity
 1621              		.loc 1 970 0
 1622 0168 6360     		str	r3, [r4, #4]
 973:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 1623              		.loc 1 973 0
 1624 016a A36A     		ldr	r3, [r4, #40]
 1625 016c 1BB1     		cbz	r3, .L152
 973:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 1626              		.loc 1 973 0 is_stmt 0 discriminator 1
 1627 016e 0022     		movs	r2, #0
 1628 0170 0421     		movs	r1, #4
 1629 0172 2046     		mov	r0, r4
 1630 0174 9847     		blx	r3
 1631              	.LVL209:
 1632              	.L152:
 975:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         API_EVENT(conn, NETCONN_EVT_RCVPLUS, 0);
 1633              		.loc 1 975 0 is_stmt 1
 1634 0176 BAF1000F 		cmp	r10, #0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 67


 1635 017a 05D0     		beq	.L153
 976:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 1636              		.loc 1 976 0
 1637 017c A36A     		ldr	r3, [r4, #40]
 1638 017e 1BB1     		cbz	r3, .L153
 976:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 1639              		.loc 1 976 0 is_stmt 0 discriminator 1
 1640 0180 0022     		movs	r2, #0
 1641 0182 1146     		mov	r1, r2
 1642 0184 2046     		mov	r0, r4
 1643 0186 9847     		blx	r3
 1644              	.LVL210:
 1645              	.L153:
 978:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         API_EVENT(conn, NETCONN_EVT_SENDPLUS, 0);
 1646              		.loc 1 978 0 is_stmt 1
 1647 0188 B9F1000F 		cmp	r9, #0
 1648 018c 05D0     		beq	.L151
 979:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 1649              		.loc 1 979 0
 1650 018e A36A     		ldr	r3, [r4, #40]
 1651 0190 1BB1     		cbz	r3, .L151
 979:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 1652              		.loc 1 979 0 is_stmt 0 discriminator 1
 1653 0192 0022     		movs	r2, #0
 1654 0194 0221     		movs	r1, #2
 1655 0196 2046     		mov	r0, r4
 1656 0198 9847     		blx	r3
 1657              	.LVL211:
 1658              	.L151:
 982:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
 1659              		.loc 1 982 0 is_stmt 1
 1660 019a 4CB1     		cbz	r4, .L154
 1661              	.LBB14:
 982:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
 1662              		.loc 1 982 0 is_stmt 0 discriminator 1
 1663 019c FFF7FEFF 		bl	sys_arch_protect
 1664              	.LVL212:
 1665 01a0 94F90830 		ldrsb	r3, [r4, #8]
 1666 01a4 13F10C0F 		cmn	r3, #12
 1667 01a8 00DB     		blt	.L155
 982:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
 1668              		.loc 1 982 0 discriminator 2
 1669 01aa 2672     		strb	r6, [r4, #8]
 1670              	.L155:
 982:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
 1671              		.loc 1 982 0 discriminator 4
 1672 01ac FFF7FEFF 		bl	sys_arch_unprotect
 1673              	.LVL213:
 1674              	.L154:
 1675              	.LBE14:
 984:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
 1676              		.loc 1 984 0 is_stmt 1
 1677 01b0 B8F1000F 		cmp	r8, #0
 1678 01b4 05D1     		bne	.L179
 990:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 1679              		.loc 1 990 0
 1680 01b6 0026     		movs	r6, #0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 68


 1681              	.LVL214:
 1682              	.L156:
 1683              	.LBE13:
1009:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 1684              		.loc 1 1009 0
 1685 01b8 3046     		mov	r0, r6
 1686 01ba BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 1687              	.LVL215:
 1688              	.L165:
 829:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct tcp_pcb* tpcb;
 1689              		.loc 1 829 0
 1690 01be 0023     		movs	r3, #0
 1691 01c0 C7E7     		b	.L149
 1692              	.LVL216:
 1693              	.L179:
 1694              	.LBB15:
 988:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1695              		.loc 1 988 0
 1696 01c2 2846     		mov	r0, r5
 1697 01c4 FFF7FEFF 		bl	sys_sem_signal
 1698              	.LVL217:
 990:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 1699              		.loc 1 990 0
 1700 01c8 0026     		movs	r6, #0
 1701              	.LVL218:
 1702 01ca F5E7     		b	.L156
 1703              	.LVL219:
 1704              	.L150:
 1705              	.LBE15:
 995:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (shut_tx) {
 1706              		.loc 1 995 0
 1707 01cc 2B7D     		ldrb	r3, [r5, #20]	@ zero_extendqisi2
 1708              	.LVL220:
 1709 01ce 012B     		cmp	r3, #1
 1710 01d0 19D0     		beq	.L180
 1711              	.L157:
 996:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_sent(tpcb, sent_tcp);
 1712              		.loc 1 996 0
 1713 01d2 B9F1000F 		cmp	r9, #0
 1714 01d6 1ED1     		bne	.L181
 1715              	.L158:
1000:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_err(tpcb, err_tcp);
 1716              		.loc 1 1000 0
 1717 01d8 0122     		movs	r2, #1
 1718 01da 1849     		ldr	r1, .L182+28
 1719 01dc 2846     		mov	r0, r5
 1720 01de FFF7FEFF 		bl	tcp_poll
 1721              	.LVL221:
1001:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_arg(tpcb, conn);
 1722              		.loc 1 1001 0
 1723 01e2 1749     		ldr	r1, .L182+32
 1724 01e4 2846     		mov	r0, r5
 1725 01e6 FFF7FEFF 		bl	tcp_err
 1726              	.LVL222:
1002:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* don't restore recv callback: we don't want to receive any more data */
 1727              		.loc 1 1002 0
 1728 01ea 2146     		mov	r1, r4
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 69


 1729 01ec 2846     		mov	r0, r5
 1730 01ee FFF7FEFF 		bl	tcp_arg
 1731              	.LVL223:
1007:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return err;
 1732              		.loc 1 1007 0
 1733 01f2 002E     		cmp	r6, #0
 1734 01f4 E0D1     		bne	.L156
1007:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return err;
 1735              		.loc 1 1007 0 is_stmt 0 discriminator 1
 1736 01f6 0A4B     		ldr	r3, .L182
 1737 01f8 40F2EF32 		movw	r2, #1007
 1738 01fc 1149     		ldr	r1, .L182+36
 1739 01fe 0A48     		ldr	r0, .L182+8
 1740 0200 FFF7FEFF 		bl	printf
 1741              	.LVL224:
 1742 0204 D8E7     		b	.L156
 1743              	.L180:
 995:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (shut_tx) {
 1744              		.loc 1 995 0 is_stmt 1 discriminator 1
 1745 0206 064B     		ldr	r3, .L182
 1746 0208 40F2E332 		movw	r2, #995
 1747 020c 0E49     		ldr	r1, .L182+40
 1748 020e 0648     		ldr	r0, .L182+8
 1749 0210 FFF7FEFF 		bl	printf
 1750              	.LVL225:
 1751 0214 DDE7     		b	.L157
 1752              	.L181:
 997:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1753              		.loc 1 997 0
 1754 0216 0D49     		ldr	r1, .L182+44
 1755 0218 2846     		mov	r0, r5
 1756 021a FFF7FEFF 		bl	tcp_sent
 1757              	.LVL226:
 1758 021e DBE7     		b	.L158
 1759              	.L183:
 1760              		.align	2
 1761              	.L182:
 1762 0220 00000000 		.word	.LC0
 1763 0224 10000000 		.word	.LC18
 1764 0228 54000000 		.word	.LC2
 1765 022c 30000000 		.word	.LC19
 1766 0230 00000000 		.word	.LC17
 1767 0234 54000000 		.word	.LC20
 1768 0238 10000000 		.word	.LC7
 1769 023c 00000000 		.word	poll_tcp
 1770 0240 00000000 		.word	err_tcp
 1771 0244 8C000000 		.word	.LC22
 1772 0248 68000000 		.word	.LC21
 1773 024c 00000000 		.word	sent_tcp
 1774              		.cfi_endproc
 1775              	.LFE169:
 1777              		.section	.text.poll_tcp,"ax",%progbits
 1778              		.align	1
 1779              		.syntax unified
 1780              		.thumb
 1781              		.thumb_func
 1782              		.fpu fpv5-sp-d16
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 70


 1784              	poll_tcp:
 1785              	.LFB159:
 308:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn = (struct netconn *)arg;
 1786              		.loc 1 308 0
 1787              		.cfi_startproc
 1788              		@ args = 0, pretend = 0, frame = 0
 1789              		@ frame_needed = 0, uses_anonymous_args = 0
 1790              	.LVL227:
 1791 0000 10B5     		push	{r4, lr}
 1792              	.LCFI9:
 1793              		.cfi_def_cfa_offset 8
 1794              		.cfi_offset 4, -8
 1795              		.cfi_offset 14, -4
 1796              	.LVL228:
 312:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 1797              		.loc 1 312 0
 1798 0002 0446     		mov	r4, r0
 1799 0004 F0B1     		cbz	r0, .L191
 1800              	.LVL229:
 1801              	.L185:
 314:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     lwip_netconn_do_writemore(conn  WRITE_DELAYED);
 1802              		.loc 1 314 0
 1803 0006 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 1804 0008 012B     		cmp	r3, #1
 1805 000a 23D0     		beq	.L192
 316:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if !LWIP_SO_SNDTIMEO && !LWIP_SO_LINGER
 1806              		.loc 1 316 0
 1807 000c 042B     		cmp	r3, #4
 1808 000e 26D0     		beq	.L193
 1809              	.L187:
 327:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* If the queued byte- or pbuf-count drops below the configured low-water limit,
 1810              		.loc 1 327 0
 1811 0010 237F     		ldrb	r3, [r4, #28]	@ zero_extendqisi2
 1812 0012 13F0100F 		tst	r3, #16
 1813 0016 13D0     		beq	.L189
 330:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (tcp_sndqueuelen(conn->pcb.tcp) < TCP_SNDQUEUELOWAT)) {
 1814              		.loc 1 330 0
 1815 0018 6268     		ldr	r2, [r4, #4]
 1816 001a 8AB1     		cbz	r2, .L189
 330:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (tcp_sndqueuelen(conn->pcb.tcp) < TCP_SNDQUEUELOWAT)) {
 1817              		.loc 1 330 0 is_stmt 0 discriminator 1
 1818 001c B2F86010 		ldrh	r1, [r2, #96]
 1819 0020 B1F5866F 		cmp	r1, #1072
 1820 0024 0CD3     		bcc	.L189
 331:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->flags &= ~NETCONN_FLAG_CHECK_WRITESPACE;
 1821              		.loc 1 331 0 is_stmt 1 discriminator 2
 1822 0026 B2F86220 		ldrh	r2, [r2, #98]
 330:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (tcp_sndqueuelen(conn->pcb.tcp) < TCP_SNDQUEUELOWAT)) {
 1823              		.loc 1 330 0 discriminator 2
 1824 002a 042A     		cmp	r2, #4
 1825 002c 08D8     		bhi	.L189
 332:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       API_EVENT(conn, NETCONN_EVT_SENDPLUS, 0);
 1826              		.loc 1 332 0
 1827 002e 23F01003 		bic	r3, r3, #16
 1828 0032 2377     		strb	r3, [r4, #28]
 333:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1829              		.loc 1 333 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 71


 1830 0034 A36A     		ldr	r3, [r4, #40]
 1831 0036 1BB1     		cbz	r3, .L189
 333:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1832              		.loc 1 333 0 is_stmt 0 discriminator 1
 1833 0038 0022     		movs	r2, #0
 1834 003a 0221     		movs	r1, #2
 1835 003c 2046     		mov	r0, r4
 1836 003e 9847     		blx	r3
 1837              	.LVL230:
 1838              	.L189:
 338:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 1839              		.loc 1 338 0 is_stmt 1
 1840 0040 0020     		movs	r0, #0
 1841 0042 10BD     		pop	{r4, pc}
 1842              	.LVL231:
 1843              	.L191:
 312:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 1844              		.loc 1 312 0 discriminator 1
 1845 0044 0B4B     		ldr	r3, .L194
 1846 0046 4FF49C72 		mov	r2, #312
 1847 004a 0B49     		ldr	r1, .L194+4
 1848              	.LVL232:
 1849 004c 0B48     		ldr	r0, .L194+8
 1850              	.LVL233:
 1851 004e FFF7FEFF 		bl	printf
 1852              	.LVL234:
 1853 0052 D8E7     		b	.L185
 1854              	.L192:
 315:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else if (conn->state == NETCONN_CLOSE) {
 1855              		.loc 1 315 0
 1856 0054 0121     		movs	r1, #1
 1857 0056 2046     		mov	r0, r4
 1858 0058 FFF7FEFF 		bl	lwip_netconn_do_writemore
 1859              	.LVL235:
 1860 005c D8E7     		b	.L187
 1861              	.L193:
 318:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg->msg.sd.polls_left--;
 1862              		.loc 1 318 0
 1863 005e 636A     		ldr	r3, [r4, #36]
 1864 0060 1BB1     		cbz	r3, .L188
 318:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg->msg.sd.polls_left--;
 1865              		.loc 1 318 0 is_stmt 0 discriminator 1
 1866 0062 5A7A     		ldrb	r2, [r3, #9]	@ zero_extendqisi2
 1867 0064 0AB1     		cbz	r2, .L188
 319:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1868              		.loc 1 319 0 is_stmt 1
 1869 0066 013A     		subs	r2, r2, #1
 1870 0068 5A72     		strb	r2, [r3, #9]
 1871              	.L188:
 322:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 1872              		.loc 1 322 0
 1873 006a 0121     		movs	r1, #1
 1874 006c 2046     		mov	r0, r4
 1875 006e FFF7FEFF 		bl	lwip_netconn_do_close_internal
 1876              	.LVL236:
 1877 0072 CDE7     		b	.L187
 1878              	.L195:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 72


 1879              		.align	2
 1880              	.L194:
 1881 0074 00000000 		.word	.LC0
 1882 0078 00000000 		.word	.LC6
 1883 007c 54000000 		.word	.LC2
 1884              		.cfi_endproc
 1885              	.LFE159:
 1887              		.section	.text.sent_tcp,"ax",%progbits
 1888              		.align	1
 1889              		.syntax unified
 1890              		.thumb
 1891              		.thumb_func
 1892              		.fpu fpv5-sp-d16
 1894              	sent_tcp:
 1895              	.LFB160:
 349:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn = (struct netconn *)arg;
 1896              		.loc 1 349 0
 1897              		.cfi_startproc
 1898              		@ args = 0, pretend = 0, frame = 0
 1899              		@ frame_needed = 0, uses_anonymous_args = 0
 1900              	.LVL237:
 1901 0000 38B5     		push	{r3, r4, r5, lr}
 1902              	.LCFI10:
 1903              		.cfi_def_cfa_offset 16
 1904              		.cfi_offset 3, -16
 1905              		.cfi_offset 4, -12
 1906              		.cfi_offset 5, -8
 1907              		.cfi_offset 14, -4
 1908 0002 1546     		mov	r5, r2
 1909              	.LVL238:
 353:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 1910              		.loc 1 353 0
 1911 0004 0446     		mov	r4, r0
 1912 0006 E0B1     		cbz	r0, .L202
 1913              	.LVL239:
 1914              	.L197:
 355:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (conn->state == NETCONN_WRITE) {
 1915              		.loc 1 355 0
 1916 0008 CCB1     		cbz	r4, .L198
 356:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       lwip_netconn_do_writemore(conn  WRITE_DELAYED);
 1917              		.loc 1 356 0
 1918 000a 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 1919 000c 012B     		cmp	r3, #1
 1920 000e 20D0     		beq	.L203
 358:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       lwip_netconn_do_close_internal(conn  WRITE_DELAYED);
 1921              		.loc 1 358 0
 1922 0010 042B     		cmp	r3, #4
 1923 0012 23D0     		beq	.L204
 1924              	.L200:
 364:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (tcp_sndqueuelen(conn->pcb.tcp) < TCP_SNDQUEUELOWAT)) {
 1925              		.loc 1 364 0
 1926 0014 6368     		ldr	r3, [r4, #4]
 1927 0016 93B1     		cbz	r3, .L198
 364:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (tcp_sndqueuelen(conn->pcb.tcp) < TCP_SNDQUEUELOWAT)) {
 1928              		.loc 1 364 0 is_stmt 0 discriminator 1
 1929 0018 B3F86020 		ldrh	r2, [r3, #96]
 1930 001c B2F5866F 		cmp	r2, #1072
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 73


 1931 0020 0DD3     		bcc	.L198
 365:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->flags &= ~NETCONN_FLAG_CHECK_WRITESPACE;
 1932              		.loc 1 365 0 is_stmt 1 discriminator 2
 1933 0022 B3F86230 		ldrh	r3, [r3, #98]
 364:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (tcp_sndqueuelen(conn->pcb.tcp) < TCP_SNDQUEUELOWAT)) {
 1934              		.loc 1 364 0 discriminator 2
 1935 0026 042B     		cmp	r3, #4
 1936 0028 09D8     		bhi	.L198
 366:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       API_EVENT(conn, NETCONN_EVT_SENDPLUS, len);
 1937              		.loc 1 366 0
 1938 002a 237F     		ldrb	r3, [r4, #28]	@ zero_extendqisi2
 1939 002c 23F01003 		bic	r3, r3, #16
 1940 0030 2377     		strb	r3, [r4, #28]
 367:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1941              		.loc 1 367 0
 1942 0032 A36A     		ldr	r3, [r4, #40]
 1943 0034 1BB1     		cbz	r3, .L198
 367:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1944              		.loc 1 367 0 is_stmt 0 discriminator 1
 1945 0036 2A46     		mov	r2, r5
 1946 0038 0221     		movs	r1, #2
 1947 003a 2046     		mov	r0, r4
 1948 003c 9847     		blx	r3
 1949              	.LVL240:
 1950              	.L198:
 372:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 1951              		.loc 1 372 0 is_stmt 1
 1952 003e 0020     		movs	r0, #0
 1953 0040 38BD     		pop	{r3, r4, r5, pc}
 1954              	.LVL241:
 1955              	.L202:
 353:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 1956              		.loc 1 353 0 discriminator 1
 1957 0042 094B     		ldr	r3, .L205
 1958 0044 40F26112 		movw	r2, #353
 1959              	.LVL242:
 1960 0048 0849     		ldr	r1, .L205+4
 1961              	.LVL243:
 1962 004a 0948     		ldr	r0, .L205+8
 1963              	.LVL244:
 1964 004c FFF7FEFF 		bl	printf
 1965              	.LVL245:
 1966 0050 DAE7     		b	.L197
 1967              	.L203:
 357:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else if (conn->state == NETCONN_CLOSE) {
 1968              		.loc 1 357 0
 1969 0052 0121     		movs	r1, #1
 1970 0054 2046     		mov	r0, r4
 1971 0056 FFF7FEFF 		bl	lwip_netconn_do_writemore
 1972              	.LVL246:
 1973 005a DBE7     		b	.L200
 1974              	.L204:
 359:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1975              		.loc 1 359 0
 1976 005c 0121     		movs	r1, #1
 1977 005e 2046     		mov	r0, r4
 1978 0060 FFF7FEFF 		bl	lwip_netconn_do_close_internal
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 74


 1979              	.LVL247:
 1980 0064 D6E7     		b	.L200
 1981              	.L206:
 1982 0066 00BF     		.align	2
 1983              	.L205:
 1984 0068 00000000 		.word	.LC0
 1985 006c 00000000 		.word	.LC6
 1986 0070 54000000 		.word	.LC2
 1987              		.cfi_endproc
 1988              	.LFE160:
 1990              		.section	.text.recv_tcp,"ax",%progbits
 1991              		.align	1
 1992              		.syntax unified
 1993              		.thumb
 1994              		.thumb_func
 1995              		.fpu fpv5-sp-d16
 1997              	recv_tcp:
 1998              	.LFB158:
 244:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn;
 1999              		.loc 1 244 0
 2000              		.cfi_startproc
 2001              		@ args = 0, pretend = 0, frame = 0
 2002              		@ frame_needed = 0, uses_anonymous_args = 0
 2003              	.LVL248:
 2004 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 2005              	.LCFI11:
 2006              		.cfi_def_cfa_offset 24
 2007              		.cfi_offset 4, -24
 2008              		.cfi_offset 5, -20
 2009              		.cfi_offset 6, -16
 2010              		.cfi_offset 7, -12
 2011              		.cfi_offset 8, -8
 2012              		.cfi_offset 14, -4
 2013 0004 0446     		mov	r4, r0
 2014 0006 1546     		mov	r5, r2
 2015 0008 9846     		mov	r8, r3
 249:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("recv_tcp must have an argument", arg != NULL);
 2016              		.loc 1 249 0
 2017 000a 0F46     		mov	r7, r1
 2018 000c E9B1     		cbz	r1, .L221
 2019              	.LVL249:
 2020              	.L208:
 250:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn = (struct netconn *)arg;
 2021              		.loc 1 250 0
 2022 000e 1CB3     		cbz	r4, .L222
 2023              	.L209:
 2024              	.LVL250:
 253:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_VAL;
 2025              		.loc 1 253 0
 2026 0010 002C     		cmp	r4, #0
 2027 0012 4AD0     		beq	.L216
 256:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 2028              		.loc 1 256 0
 2029 0014 6368     		ldr	r3, [r4, #4]
 2030 0016 9F42     		cmp	r7, r3
 2031 0018 06D0     		beq	.L211
 256:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 75


 2032              		.loc 1 256 0 is_stmt 0 discriminator 1
 2033 001a 284B     		ldr	r3, .L224
 2034 001c 4FF48072 		mov	r2, #256
 2035 0020 2749     		ldr	r1, .L224+4
 2036 0022 2848     		ldr	r0, .L224+8
 2037 0024 FFF7FEFF 		bl	printf
 2038              	.LVL251:
 2039              	.L211:
 258:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* recvmbox already deleted */
 2040              		.loc 1 258 0 is_stmt 1
 2041 0028 04F11006 		add	r6, r4, #16
 2042 002c 3046     		mov	r0, r6
 2043 002e FFF7FEFF 		bl	sys_mbox_valid
 2044              	.LVL252:
 2045 0032 C0B9     		cbnz	r0, .L212
 260:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_recved(pcb, p->tot_len);
 2046              		.loc 1 260 0
 2047 0034 002D     		cmp	r5, #0
 2048 0036 3BD0     		beq	.L217
 261:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       pbuf_free(p);
 2049              		.loc 1 261 0
 2050 0038 2989     		ldrh	r1, [r5, #8]
 2051 003a 3846     		mov	r0, r7
 2052 003c FFF7FEFF 		bl	tcp_recved
 2053              	.LVL253:
 262:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 2054              		.loc 1 262 0
 2055 0040 2846     		mov	r0, r5
 2056 0042 FFF7FEFF 		bl	pbuf_free
 2057              	.LVL254:
 264:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2058              		.loc 1 264 0
 2059 0046 0025     		movs	r5, #0
 2060              	.LVL255:
 2061 0048 1EE0     		b	.L210
 2062              	.LVL256:
 2063              	.L221:
 249:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("recv_tcp must have an argument", arg != NULL);
 2064              		.loc 1 249 0 discriminator 1
 2065 004a 1C4B     		ldr	r3, .L224
 2066              	.LVL257:
 2067 004c F922     		movs	r2, #249
 2068              	.LVL258:
 2069 004e 1E49     		ldr	r1, .L224+12
 2070              	.LVL259:
 2071 0050 1C48     		ldr	r0, .L224+8
 2072              	.LVL260:
 2073 0052 FFF7FEFF 		bl	printf
 2074              	.LVL261:
 2075 0056 DAE7     		b	.L208
 2076              	.L222:
 250:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn = (struct netconn *)arg;
 2077              		.loc 1 250 0 discriminator 1
 2078 0058 184B     		ldr	r3, .L224
 2079 005a FA22     		movs	r2, #250
 2080 005c 1B49     		ldr	r1, .L224+16
 2081 005e 1948     		ldr	r0, .L224+8
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 76


 2082 0060 FFF7FEFF 		bl	printf
 2083              	.LVL262:
 2084 0064 D4E7     		b	.L209
 2085              	.LVL263:
 2086              	.L212:
 271:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     NETCONN_SET_SAFE_ERR(conn, err);
 2087              		.loc 1 271 0
 2088 0066 B8F1000F 		cmp	r8, #0
 2089 006a 10D1     		bne	.L223
 2090              	.L213:
 275:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     len = p->tot_len;
 2091              		.loc 1 275 0
 2092 006c DDB1     		cbz	r5, .L218
 276:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 2093              		.loc 1 276 0
 2094 006e 2F89     		ldrh	r7, [r5, #8]
 2095              	.LVL264:
 2096              	.L215:
 281:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* don't deallocate p: it is presented to us later again from tcp_fasttmr! */
 2097              		.loc 1 281 0
 2098 0070 2946     		mov	r1, r5
 2099 0072 3046     		mov	r0, r6
 2100 0074 FFF7FEFF 		bl	sys_mbox_trypost
 2101              	.LVL265:
 2102 0078 0546     		mov	r5, r0
 2103              	.LVL266:
 2104 007a D8B9     		cbnz	r0, .L219
 289:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2105              		.loc 1 289 0
 2106 007c A36A     		ldr	r3, [r4, #40]
 2107 007e 1BB1     		cbz	r3, .L210
 289:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2108              		.loc 1 289 0 is_stmt 0 discriminator 1
 2109 0080 3A46     		mov	r2, r7
 2110 0082 0021     		movs	r1, #0
 2111 0084 2046     		mov	r0, r4
 2112 0086 9847     		blx	r3
 2113              	.LVL267:
 2114              	.L210:
 293:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 2115              		.loc 1 293 0 is_stmt 1
 2116 0088 2846     		mov	r0, r5
 2117 008a BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 2118              	.LVL268:
 2119              	.L223:
 2120              	.LBB16:
 272:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2121              		.loc 1 272 0 discriminator 1
 2122 008e FFF7FEFF 		bl	sys_arch_protect
 2123              	.LVL269:
 2124 0092 94F90830 		ldrsb	r3, [r4, #8]
 2125 0096 13F10C0F 		cmn	r3, #12
 2126 009a 01DB     		blt	.L214
 272:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2127              		.loc 1 272 0 is_stmt 0 discriminator 2
 2128 009c 84F80880 		strb	r8, [r4, #8]
 2129              	.L214:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 77


 272:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2130              		.loc 1 272 0 discriminator 4
 2131 00a0 FFF7FEFF 		bl	sys_arch_unprotect
 2132              	.LVL270:
 2133 00a4 E2E7     		b	.L213
 2134              	.L218:
 2135              	.LBE16:
 278:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2136              		.loc 1 278 0 is_stmt 1
 2137 00a6 0027     		movs	r7, #0
 2138              	.LVL271:
 2139 00a8 E2E7     		b	.L215
 2140              	.LVL272:
 2141              	.L216:
 254:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2142              		.loc 1 254 0
 2143 00aa 6FF00505 		mvn	r5, #5
 2144              	.LVL273:
 2145 00ae EBE7     		b	.L210
 2146              	.LVL274:
 2147              	.L217:
 264:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2148              		.loc 1 264 0
 2149 00b0 0025     		movs	r5, #0
 2150              	.LVL275:
 2151 00b2 E9E7     		b	.L210
 2152              	.LVL276:
 2153              	.L219:
 283:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 2154              		.loc 1 283 0
 2155 00b4 4FF0FF35 		mov	r5, #-1
 2156 00b8 E6E7     		b	.L210
 2157              	.L225:
 2158 00ba 00BF     		.align	2
 2159              	.L224:
 2160 00bc 00000000 		.word	.LC0
 2161 00c0 44000000 		.word	.LC25
 2162 00c4 54000000 		.word	.LC2
 2163 00c8 00000000 		.word	.LC23
 2164 00cc 24000000 		.word	.LC24
 2165              		.cfi_endproc
 2166              	.LFE158:
 2168              		.section	.text.lwip_netconn_do_newconn,"ax",%progbits
 2169              		.align	1
 2170              		.global	lwip_netconn_do_newconn
 2171              		.syntax unified
 2172              		.thumb
 2173              		.thumb_func
 2174              		.fpu fpv5-sp-d16
 2176              	lwip_netconn_do_newconn:
 2177              	.LFB165:
 624:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
 2178              		.loc 1 624 0
 2179              		.cfi_startproc
 2180              		@ args = 0, pretend = 0, frame = 0
 2181              		@ frame_needed = 0, uses_anonymous_args = 0
 2182              	.LVL277:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 78


 2183 0000 10B5     		push	{r4, lr}
 2184              	.LCFI12:
 2185              		.cfi_def_cfa_offset 8
 2186              		.cfi_offset 4, -8
 2187              		.cfi_offset 14, -4
 2188 0002 0446     		mov	r4, r0
 2189              	.LVL278:
 627:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (msg->conn->pcb.tcp == NULL) {
 2190              		.loc 1 627 0
 2191 0004 0023     		movs	r3, #0
 2192 0006 0371     		strb	r3, [r0, #4]
 628:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     pcb_new(msg);
 2193              		.loc 1 628 0
 2194 0008 0368     		ldr	r3, [r0]
 2195 000a 5B68     		ldr	r3, [r3, #4]
 2196 000c 7BB1     		cbz	r3, .L231
 2197              	.LVL279:
 2198              	.L227:
 635:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 2199              		.loc 1 635 0
 2200 000e 2368     		ldr	r3, [r4]
 2201 0010 63B1     		cbz	r3, .L226
 2202              	.LBB17:
 635:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 2203              		.loc 1 635 0 is_stmt 0 discriminator 1
 2204 0012 FFF7FEFF 		bl	sys_arch_protect
 2205              	.LVL280:
 2206 0016 2368     		ldr	r3, [r4]
 2207 0018 93F90820 		ldrsb	r2, [r3, #8]
 2208 001c 12F10C0F 		cmn	r2, #12
 2209 0020 02DB     		blt	.L229
 635:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 2210              		.loc 1 635 0 discriminator 2
 2211 0022 94F90420 		ldrsb	r2, [r4, #4]
 2212 0026 1A72     		strb	r2, [r3, #8]
 2213              	.L229:
 635:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 2214              		.loc 1 635 0 discriminator 4
 2215 0028 FFF7FEFF 		bl	sys_arch_unprotect
 2216              	.LVL281:
 2217              	.L226:
 2218 002c 10BD     		pop	{r4, pc}
 2219              	.LVL282:
 2220              	.L231:
 2221              	.LBE17:
 629:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2222              		.loc 1 629 0 is_stmt 1
 2223 002e FFF7FEFF 		bl	pcb_new
 2224              	.LVL283:
 2225 0032 ECE7     		b	.L227
 2226              		.cfi_endproc
 2227              	.LFE165:
 2229              		.section	.text.netconn_alloc,"ax",%progbits
 2230              		.align	1
 2231              		.global	netconn_alloc
 2232              		.syntax unified
 2233              		.thumb
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 79


 2234              		.thumb_func
 2235              		.fpu fpv5-sp-d16
 2237              	netconn_alloc:
 2238              	.LFB166:
 649:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn;
 2239              		.loc 1 649 0
 2240              		.cfi_startproc
 2241              		@ args = 0, pretend = 0, frame = 0
 2242              		@ frame_needed = 0, uses_anonymous_args = 0
 2243              	.LVL284:
 2244 0000 70B5     		push	{r4, r5, r6, lr}
 2245              	.LCFI13:
 2246              		.cfi_def_cfa_offset 16
 2247              		.cfi_offset 4, -16
 2248              		.cfi_offset 5, -12
 2249              		.cfi_offset 6, -8
 2250              		.cfi_offset 14, -4
 2251 0002 0546     		mov	r5, r0
 2252 0004 0E46     		mov	r6, r1
 653:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (conn == NULL) {
 2253              		.loc 1 653 0
 2254 0006 0720     		movs	r0, #7
 2255              	.LVL285:
 2256 0008 FFF7FEFF 		bl	memp_malloc
 2257              	.LVL286:
 654:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return NULL;
 2258              		.loc 1 654 0
 2259 000c 0446     		mov	r4, r0
 2260 000e 18B3     		cbz	r0, .L232
 658:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->type = t;
 2261              		.loc 1 658 0
 2262 0010 0023     		movs	r3, #0
 2263 0012 0372     		strb	r3, [r0, #8]
 659:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->pcb.tcp = NULL;
 2264              		.loc 1 659 0
 2265 0014 0570     		strb	r5, [r0]
 660:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 2266              		.loc 1 660 0
 2267 0016 4360     		str	r3, [r0, #4]
 663:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
 2268              		.loc 1 663 0
 2269 0018 05F0F005 		and	r5, r5, #240
 2270 001c 102D     		cmp	r5, #16
 2271 001e 01D0     		beq	.L235
 2272 0020 202D     		cmp	r5, #32
 2273 0022 1BD1     		bne	.L239
 2274              	.L235:
 2275              	.LVL287:
 684:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     goto free_and_return;
 2276              		.loc 1 684 0
 2277 0024 04F11005 		add	r5, r4, #16
 2278 0028 0621     		movs	r1, #6
 2279 002a 2846     		mov	r0, r5
 2280              	.LVL288:
 2281 002c FFF7FEFF 		bl	sys_mbox_new
 2282              	.LVL289:
 2283 0030 D8B9     		cbnz	r0, .L236
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 80


 688:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_free(&conn->recvmbox);
 2284              		.loc 1 688 0
 2285 0032 0021     		movs	r1, #0
 2286 0034 04F10C00 		add	r0, r4, #12
 2287 0038 FFF7FEFF 		bl	sys_sem_new
 2288              	.LVL290:
 2289 003c D8B9     		cbnz	r0, .L240
 695:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
 2290              		.loc 1 695 0
 2291 003e 04F11400 		add	r0, r4, #20
 2292 0042 FFF7FEFF 		bl	sys_mbox_set_invalid
 2293              	.LVL291:
 697:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SOCKET
 2294              		.loc 1 697 0
 2295 0046 0023     		movs	r3, #0
 2296 0048 6370     		strb	r3, [r4, #1]
 700:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SOCKET */
 2297              		.loc 1 700 0
 2298 004a 4FF0FF32 		mov	r2, #-1
 2299 004e A261     		str	r2, [r4, #24]
 702:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 2300              		.loc 1 702 0
 2301 0050 A662     		str	r6, [r4, #40]
 704:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->write_offset = 0;
 2302              		.loc 1 704 0
 2303 0052 6362     		str	r3, [r4, #36]
 705:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 2304              		.loc 1 705 0
 2305 0054 2362     		str	r3, [r4, #32]
 720:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return conn;
 2306              		.loc 1 720 0
 2307 0056 2377     		strb	r3, [r4, #28]
 2308              	.LVL292:
 2309              	.L232:
 725:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 2310              		.loc 1 725 0
 2311 0058 2046     		mov	r0, r4
 2312 005a 70BD     		pop	{r4, r5, r6, pc}
 2313              	.LVL293:
 2314              	.L239:
 680:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     goto free_and_return;
 2315              		.loc 1 680 0
 2316 005c 084B     		ldr	r3, .L241
 2317 005e 4FF42A72 		mov	r2, #680
 2318 0062 0849     		ldr	r1, .L241+4
 2319 0064 0848     		ldr	r0, .L241+8
 2320              	.LVL294:
 2321 0066 FFF7FEFF 		bl	printf
 2322              	.LVL295:
 2323              	.L236:
 723:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return NULL;
 2324              		.loc 1 723 0
 2325 006a 2146     		mov	r1, r4
 2326 006c 0720     		movs	r0, #7
 2327 006e FFF7FEFF 		bl	memp_free
 2328              	.LVL296:
 724:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 81


 2329              		.loc 1 724 0
 2330 0072 0024     		movs	r4, #0
 2331              	.LVL297:
 2332 0074 F0E7     		b	.L232
 2333              	.LVL298:
 2334              	.L240:
 689:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     goto free_and_return;
 2335              		.loc 1 689 0
 2336 0076 2846     		mov	r0, r5
 2337 0078 FFF7FEFF 		bl	sys_mbox_free
 2338              	.LVL299:
 690:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2339              		.loc 1 690 0
 2340 007c F5E7     		b	.L236
 2341              	.L242:
 2342 007e 00BF     		.align	2
 2343              	.L241:
 2344 0080 00000000 		.word	.LC0
 2345 0084 00000000 		.word	.LC26
 2346 0088 54000000 		.word	.LC2
 2347              		.cfi_endproc
 2348              	.LFE166:
 2350              		.section	.text.netconn_free,"ax",%progbits
 2351              		.align	1
 2352              		.global	netconn_free
 2353              		.syntax unified
 2354              		.thumb
 2355              		.thumb_func
 2356              		.fpu fpv5-sp-d16
 2358              	netconn_free:
 2359              	.LFB167:
 735:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("PCB must be deallocated outside this function", conn->pcb.tcp == NULL);
 2360              		.loc 1 735 0
 2361              		.cfi_startproc
 2362              		@ args = 0, pretend = 0, frame = 0
 2363              		@ frame_needed = 0, uses_anonymous_args = 0
 2364              	.LVL300:
 2365 0000 38B5     		push	{r3, r4, r5, lr}
 2366              	.LCFI14:
 2367              		.cfi_def_cfa_offset 16
 2368              		.cfi_offset 3, -16
 2369              		.cfi_offset 4, -12
 2370              		.cfi_offset 5, -8
 2371              		.cfi_offset 14, -4
 2372 0002 0446     		mov	r4, r0
 736:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("recvmbox must be deallocated before calling this function",
 2373              		.loc 1 736 0
 2374 0004 4368     		ldr	r3, [r0, #4]
 2375 0006 33B1     		cbz	r3, .L244
 736:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("recvmbox must be deallocated before calling this function",
 2376              		.loc 1 736 0 is_stmt 0 discriminator 1
 2377 0008 164B     		ldr	r3, .L250
 2378 000a 4FF43872 		mov	r2, #736
 2379 000e 1649     		ldr	r1, .L250+4
 2380 0010 1648     		ldr	r0, .L250+8
 2381              	.LVL301:
 2382 0012 FFF7FEFF 		bl	printf
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 82


 2383              	.LVL302:
 2384              	.L244:
 737:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     !sys_mbox_valid(&conn->recvmbox));
 2385              		.loc 1 737 0 is_stmt 1
 2386 0016 04F11000 		add	r0, r4, #16
 2387 001a FFF7FEFF 		bl	sys_mbox_valid
 2388              	.LVL303:
 2389 001e 88B9     		cbnz	r0, .L248
 2390              	.L245:
 740:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     !sys_mbox_valid(&conn->acceptmbox));
 2391              		.loc 1 740 0
 2392 0020 04F11400 		add	r0, r4, #20
 2393 0024 FFF7FEFF 		bl	sys_mbox_valid
 2394              	.LVL304:
 2395 0028 A0B9     		cbnz	r0, .L249
 2396              	.L246:
 745:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   sys_sem_set_invalid(&conn->op_completed);
 2397              		.loc 1 745 0
 2398 002a 04F10C05 		add	r5, r4, #12
 2399 002e 2846     		mov	r0, r5
 2400 0030 FFF7FEFF 		bl	sys_sem_free
 2401              	.LVL305:
 746:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
 2402              		.loc 1 746 0
 2403 0034 2846     		mov	r0, r5
 2404 0036 FFF7FEFF 		bl	sys_sem_set_invalid
 2405              	.LVL306:
 749:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 2406              		.loc 1 749 0
 2407 003a 2146     		mov	r1, r4
 2408 003c 0720     		movs	r0, #7
 2409 003e FFF7FEFF 		bl	memp_free
 2410              	.LVL307:
 2411 0042 38BD     		pop	{r3, r4, r5, pc}
 2412              	.LVL308:
 2413              	.L248:
 737:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     !sys_mbox_valid(&conn->recvmbox));
 2414              		.loc 1 737 0 discriminator 1
 2415 0044 074B     		ldr	r3, .L250
 2416 0046 40F2E222 		movw	r2, #738
 2417 004a 0949     		ldr	r1, .L250+12
 2418 004c 0748     		ldr	r0, .L250+8
 2419 004e FFF7FEFF 		bl	printf
 2420              	.LVL309:
 2421 0052 E5E7     		b	.L245
 2422              	.L249:
 740:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     !sys_mbox_valid(&conn->acceptmbox));
 2423              		.loc 1 740 0 discriminator 1
 2424 0054 034B     		ldr	r3, .L250
 2425 0056 40F2E522 		movw	r2, #741
 2426 005a 0649     		ldr	r1, .L250+16
 2427 005c 0348     		ldr	r0, .L250+8
 2428 005e FFF7FEFF 		bl	printf
 2429              	.LVL310:
 2430 0062 E2E7     		b	.L246
 2431              	.L251:
 2432              		.align	2
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 83


 2433              	.L250:
 2434 0064 00000000 		.word	.LC0
 2435 0068 00000000 		.word	.LC27
 2436 006c 54000000 		.word	.LC2
 2437 0070 30000000 		.word	.LC28
 2438 0074 6C000000 		.word	.LC29
 2439              		.cfi_endproc
 2440              	.LFE167:
 2442              		.section	.text.netconn_drain,"ax",%progbits
 2443              		.align	1
 2444              		.syntax unified
 2445              		.thumb
 2446              		.thumb_func
 2447              		.fpu fpv5-sp-d16
 2449              	netconn_drain:
 2450              	.LFB168:
 762:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   void *mem;
 2451              		.loc 1 762 0
 2452              		.cfi_startproc
 2453              		@ args = 0, pretend = 0, frame = 8
 2454              		@ frame_needed = 0, uses_anonymous_args = 0
 2455              	.LVL311:
 2456 0000 70B5     		push	{r4, r5, r6, lr}
 2457              	.LCFI15:
 2458              		.cfi_def_cfa_offset 16
 2459              		.cfi_offset 4, -16
 2460              		.cfi_offset 5, -12
 2461              		.cfi_offset 6, -8
 2462              		.cfi_offset 14, -4
 2463 0002 82B0     		sub	sp, sp, #8
 2464              	.LCFI16:
 2465              		.cfi_def_cfa_offset 24
 2466 0004 0546     		mov	r5, r0
 771:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     while (sys_mbox_tryfetch(&conn->recvmbox, &mem) != SYS_MBOX_EMPTY) {
 2467              		.loc 1 771 0
 2468 0006 00F11004 		add	r4, r0, #16
 2469 000a 2046     		mov	r0, r4
 2470              	.LVL312:
 2471 000c FFF7FEFF 		bl	sys_mbox_valid
 2472              	.LVL313:
 2473 0010 38BB     		cbnz	r0, .L253
 2474              	.L254:
 795:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     while (sys_mbox_tryfetch(&conn->acceptmbox, &mem) != SYS_MBOX_EMPTY) {
 2475              		.loc 1 795 0
 2476 0012 1435     		adds	r5, r5, #20
 2477              	.LVL314:
 2478 0014 2846     		mov	r0, r5
 2479 0016 FFF7FEFF 		bl	sys_mbox_valid
 2480              	.LVL315:
 2481 001a 0028     		cmp	r0, #0
 2482 001c 3ED0     		beq	.L252
 2483              	.L261:
 796:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (mem != &netconn_aborted) {
 2484              		.loc 1 796 0
 2485 001e 01A9     		add	r1, sp, #4
 2486 0020 2846     		mov	r0, r5
 2487 0022 FFF7FEFF 		bl	sys_arch_mbox_tryfetch
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 84


 2488              	.LVL316:
 2489 0026 B0F1FF3F 		cmp	r0, #-1
 2490 002a 31D0     		beq	.L265
 797:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         struct netconn *newconn = (struct netconn *)mem;
 2491              		.loc 1 797 0
 2492 002c 019C     		ldr	r4, [sp, #4]
 2493 002e 1C4B     		ldr	r3, .L268
 2494 0030 9C42     		cmp	r4, r3
 2495 0032 F4D0     		beq	.L261
 2496              	.LVL317:
 2497              	.LBB18:
 802:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (newconn->pcb.tcp != NULL) {
 2498              		.loc 1 802 0
 2499 0034 2046     		mov	r0, r4
 2500 0036 FFF7E3FF 		bl	netconn_drain
 2501              	.LVL318:
 803:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           tcp_abort(newconn->pcb.tcp);
 2502              		.loc 1 803 0
 2503 003a 6068     		ldr	r0, [r4, #4]
 2504 003c 18B1     		cbz	r0, .L262
 804:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           newconn->pcb.tcp = NULL;
 2505              		.loc 1 804 0
 2506 003e FFF7FEFF 		bl	tcp_abort
 2507              	.LVL319:
 805:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
 2508              		.loc 1 805 0
 2509 0042 0023     		movs	r3, #0
 2510 0044 6360     		str	r3, [r4, #4]
 2511              	.L262:
 807:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 2512              		.loc 1 807 0
 2513 0046 2046     		mov	r0, r4
 2514 0048 FFF7FEFF 		bl	netconn_free
 2515              	.LVL320:
 2516 004c E7E7     		b	.L261
 2517              	.LVL321:
 2518              	.L267:
 2519              	.LBE18:
 775:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           p = (struct pbuf*)mem;
 2520              		.loc 1 775 0
 2521 004e 019E     		ldr	r6, [sp, #4]
 2522 0050 3EB1     		cbz	r6, .L253
 2523              	.LVL322:
 778:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             tcp_recved(conn->pcb.tcp, p->tot_len);
 2524              		.loc 1 778 0
 2525 0052 6868     		ldr	r0, [r5, #4]
 2526 0054 10B1     		cbz	r0, .L257
 779:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           }
 2527              		.loc 1 779 0
 2528 0056 3189     		ldrh	r1, [r6, #8]
 2529 0058 FFF7FEFF 		bl	tcp_recved
 2530              	.LVL323:
 2531              	.L257:
 781:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
 2532              		.loc 1 781 0
 2533 005c 3046     		mov	r0, r6
 2534 005e FFF7FEFF 		bl	pbuf_free
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 85


 2535              	.LVL324:
 2536              	.L253:
 772:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 2537              		.loc 1 772 0
 2538 0062 01A9     		add	r1, sp, #4
 2539 0064 2046     		mov	r0, r4
 2540 0066 FFF7FEFF 		bl	sys_arch_mbox_tryfetch
 2541              	.LVL325:
 2542 006a B0F1FF3F 		cmp	r0, #-1
 2543 006e 08D0     		beq	.L266
 774:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (mem != NULL) {
 2544              		.loc 1 774 0
 2545 0070 2B78     		ldrb	r3, [r5]	@ zero_extendqisi2
 2546 0072 03F0F003 		and	r3, r3, #240
 2547 0076 102B     		cmp	r3, #16
 2548 0078 E9D0     		beq	.L267
 786:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 2549              		.loc 1 786 0
 2550 007a 0198     		ldr	r0, [sp, #4]
 2551 007c FFF7FEFF 		bl	netbuf_delete
 2552              	.LVL326:
 2553 0080 EFE7     		b	.L253
 2554              	.L266:
 789:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_set_invalid(&conn->recvmbox);
 2555              		.loc 1 789 0
 2556 0082 2046     		mov	r0, r4
 2557 0084 FFF7FEFF 		bl	sys_mbox_free
 2558              	.LVL327:
 790:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2559              		.loc 1 790 0
 2560 0088 2046     		mov	r0, r4
 2561 008a FFF7FEFF 		bl	sys_mbox_set_invalid
 2562              	.LVL328:
 2563 008e C0E7     		b	.L254
 2564              	.LVL329:
 2565              	.L265:
 810:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_set_invalid(&conn->acceptmbox);
 2566              		.loc 1 810 0
 2567 0090 2846     		mov	r0, r5
 2568 0092 FFF7FEFF 		bl	sys_mbox_free
 2569              	.LVL330:
 811:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2570              		.loc 1 811 0
 2571 0096 2846     		mov	r0, r5
 2572 0098 FFF7FEFF 		bl	sys_mbox_set_invalid
 2573              	.LVL331:
 2574              	.L252:
 814:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 2575              		.loc 1 814 0
 2576 009c 02B0     		add	sp, sp, #8
 2577              	.LCFI17:
 2578              		.cfi_def_cfa_offset 16
 2579              		@ sp needed
 2580 009e 70BD     		pop	{r4, r5, r6, pc}
 2581              	.LVL332:
 2582              	.L269:
 2583              		.align	2
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 86


 2584              	.L268:
 2585 00a0 00000000 		.word	netconn_aborted
 2586              		.cfi_endproc
 2587              	.LFE168:
 2589              		.section	.text.accept_function,"ax",%progbits
 2590              		.align	1
 2591              		.syntax unified
 2592              		.thumb
 2593              		.thumb_func
 2594              		.fpu fpv5-sp-d16
 2596              	accept_function:
 2597              	.LFB163:
 476:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *newconn;
 2598              		.loc 1 476 0
 2599              		.cfi_startproc
 2600              		@ args = 0, pretend = 0, frame = 0
 2601              		@ frame_needed = 0, uses_anonymous_args = 0
 2602              	.LVL333:
 2603 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 2604              	.LCFI18:
 2605              		.cfi_def_cfa_offset 24
 2606              		.cfi_offset 4, -24
 2607              		.cfi_offset 5, -20
 2608              		.cfi_offset 6, -16
 2609              		.cfi_offset 7, -12
 2610              		.cfi_offset 8, -8
 2611              		.cfi_offset 14, -4
 2612              	.LVL334:
 480:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_VAL;
 2613              		.loc 1 480 0
 2614 0004 0028     		cmp	r0, #0
 2615 0006 67D0     		beq	.L275
 2616 0008 0446     		mov	r4, r0
 2617 000a 1646     		mov	r6, r2
 2618 000c 0D46     		mov	r5, r1
 483:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     LWIP_DEBUGF(API_MSG_DEBUG, ("accept_function: acceptmbox already deleted\n"));
 2619              		.loc 1 483 0
 2620 000e 00F11408 		add	r8, r0, #20
 2621 0012 4046     		mov	r0, r8
 2622              	.LVL335:
 2623 0014 FFF7FEFF 		bl	sys_mbox_valid
 2624              	.LVL336:
 2625 0018 0028     		cmp	r0, #0
 2626 001a 60D0     		beq	.L276
 488:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* out-of-pcbs during connect: pass on this error to the application */
 2627              		.loc 1 488 0
 2628 001c C5B1     		cbz	r5, .L282
 501:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (newconn == NULL) {
 2629              		.loc 1 501 0
 2630 001e A16A     		ldr	r1, [r4, #40]
 2631 0020 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
 2632 0022 FFF7FEFF 		bl	netconn_alloc
 2633              	.LVL337:
 502:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* outof netconns: pass on this error to the application */
 2634              		.loc 1 502 0
 2635 0026 0746     		mov	r7, r0
 2636 0028 10B3     		cbz	r0, .L283
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 87


 510:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   setup_tcp(newconn);
 2637              		.loc 1 510 0
 2638 002a 4560     		str	r5, [r0, #4]
 511:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* no protection: when creating the pcb, the netconn is not yet known
 2639              		.loc 1 511 0
 2640 002c FFF7FEFF 		bl	setup_tcp
 2641              	.LVL338:
 514:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 2642              		.loc 1 514 0
 2643 0030 3E72     		strb	r6, [r7, #8]
 519:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* When returning != ERR_OK, the pcb is aborted in tcp_process(),
 2644              		.loc 1 519 0
 2645 0032 3946     		mov	r1, r7
 2646 0034 4046     		mov	r0, r8
 2647 0036 FFF7FEFF 		bl	sys_mbox_trypost
 2648              	.LVL339:
 2649 003a 0546     		mov	r5, r0
 2650              	.LVL340:
 2651 003c 30BB     		cbnz	r0, .L284
 538:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2652              		.loc 1 538 0
 2653 003e A36A     		ldr	r3, [r4, #40]
 2654 0040 1BB1     		cbz	r3, .L271
 538:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2655              		.loc 1 538 0 is_stmt 0 discriminator 1
 2656 0042 0022     		movs	r2, #0
 2657 0044 1146     		mov	r1, r2
 2658 0046 2046     		mov	r0, r4
 2659 0048 9847     		blx	r3
 2660              	.LVL341:
 2661              	.L271:
 542:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 2662              		.loc 1 542 0 is_stmt 1
 2663 004a 2846     		mov	r0, r5
 2664 004c BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 2665              	.LVL342:
 2666              	.L282:
 490:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* Register event with callback */
 2667              		.loc 1 490 0
 2668 0050 2A49     		ldr	r1, .L285
 2669 0052 4046     		mov	r0, r8
 2670 0054 FFF7FEFF 		bl	sys_mbox_trypost
 2671              	.LVL343:
 2672 0058 0028     		cmp	r0, #0
 2673 005a 43D1     		bne	.L277
 492:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 2674              		.loc 1 492 0
 2675 005c A36A     		ldr	r3, [r4, #40]
 2676 005e 002B     		cmp	r3, #0
 2677 0060 43D0     		beq	.L278
 492:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 2678              		.loc 1 492 0 is_stmt 0 discriminator 1
 2679 0062 0022     		movs	r2, #0
 2680 0064 1146     		mov	r1, r2
 2681 0066 2046     		mov	r0, r4
 2682 0068 9847     		blx	r3
 2683              	.LVL344:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 88


 494:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2684              		.loc 1 494 0 is_stmt 1 discriminator 1
 2685 006a 6FF00505 		mvn	r5, #5
 2686              	.LVL345:
 2687 006e ECE7     		b	.L271
 2688              	.LVL346:
 2689              	.L283:
 504:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* Register event with callback */
 2690              		.loc 1 504 0
 2691 0070 2249     		ldr	r1, .L285
 2692 0072 4046     		mov	r0, r8
 2693              	.LVL347:
 2694 0074 FFF7FEFF 		bl	sys_mbox_trypost
 2695              	.LVL348:
 2696 0078 D0BB     		cbnz	r0, .L279
 506:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 2697              		.loc 1 506 0
 2698 007a A36A     		ldr	r3, [r4, #40]
 2699 007c DBB3     		cbz	r3, .L280
 506:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 2700              		.loc 1 506 0 is_stmt 0 discriminator 1
 2701 007e 0022     		movs	r2, #0
 2702 0080 1146     		mov	r1, r2
 2703 0082 2046     		mov	r0, r4
 2704 0084 9847     		blx	r3
 2705              	.LVL349:
 508:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2706              		.loc 1 508 0 is_stmt 1 discriminator 1
 2707 0086 4FF0FF35 		mov	r5, #-1
 2708              	.LVL350:
 2709 008a DEE7     		b	.L271
 2710              	.L284:
 2711              	.LBB19:
 523:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_arg(pcb, NULL);
 2712              		.loc 1 523 0
 2713 008c 7C68     		ldr	r4, [r7, #4]
 2714              	.LVL351:
 524:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_recv(pcb, NULL);
 2715              		.loc 1 524 0
 2716 008e 0021     		movs	r1, #0
 2717 0090 2046     		mov	r0, r4
 2718 0092 FFF7FEFF 		bl	tcp_arg
 2719              	.LVL352:
 525:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_sent(pcb, NULL);
 2720              		.loc 1 525 0
 2721 0096 0021     		movs	r1, #0
 2722 0098 2046     		mov	r0, r4
 2723 009a FFF7FEFF 		bl	tcp_recv
 2724              	.LVL353:
 526:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_poll(pcb, NULL, 0);
 2725              		.loc 1 526 0
 2726 009e 0021     		movs	r1, #0
 2727 00a0 2046     		mov	r0, r4
 2728 00a2 FFF7FEFF 		bl	tcp_sent
 2729              	.LVL354:
 527:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_err(pcb, NULL);
 2730              		.loc 1 527 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 89


 2731 00a6 0022     		movs	r2, #0
 2732 00a8 1146     		mov	r1, r2
 2733 00aa 2046     		mov	r0, r4
 2734 00ac FFF7FEFF 		bl	tcp_poll
 2735              	.LVL355:
 528:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* remove reference from to the pcb from this netconn */
 2736              		.loc 1 528 0
 2737 00b0 0021     		movs	r1, #0
 2738 00b2 2046     		mov	r0, r4
 2739 00b4 FFF7FEFF 		bl	tcp_err
 2740              	.LVL356:
 530:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* no need to drain since we know the recvmbox is empty. */
 2741              		.loc 1 530 0
 2742 00b8 0023     		movs	r3, #0
 2743 00ba 7B60     		str	r3, [r7, #4]
 532:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_set_invalid(&newconn->recvmbox);
 2744              		.loc 1 532 0
 2745 00bc 07F11004 		add	r4, r7, #16
 2746              	.LVL357:
 2747 00c0 2046     		mov	r0, r4
 2748 00c2 FFF7FEFF 		bl	sys_mbox_free
 2749              	.LVL358:
 533:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     netconn_free(newconn);
 2750              		.loc 1 533 0
 2751 00c6 2046     		mov	r0, r4
 2752 00c8 FFF7FEFF 		bl	sys_mbox_set_invalid
 2753              	.LVL359:
 534:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_MEM;
 2754              		.loc 1 534 0
 2755 00cc 3846     		mov	r0, r7
 2756 00ce FFF7FEFF 		bl	netconn_free
 2757              	.LVL360:
 535:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 2758              		.loc 1 535 0
 2759 00d2 4FF0FF35 		mov	r5, #-1
 2760 00d6 B8E7     		b	.L271
 2761              	.LVL361:
 2762              	.L275:
 2763              	.LBE19:
 481:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2764              		.loc 1 481 0
 2765 00d8 6FF00505 		mvn	r5, #5
 2766 00dc B5E7     		b	.L271
 2767              	.LVL362:
 2768              	.L276:
 485:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2769              		.loc 1 485 0
 2770 00de 6FF00505 		mvn	r5, #5
 2771              	.LVL363:
 2772 00e2 B2E7     		b	.L271
 2773              	.LVL364:
 2774              	.L277:
 494:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2775              		.loc 1 494 0
 2776 00e4 6FF00505 		mvn	r5, #5
 2777              	.LVL365:
 2778 00e8 AFE7     		b	.L271
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 90


 2779              	.LVL366:
 2780              	.L278:
 2781 00ea 6FF00505 		mvn	r5, #5
 2782              	.LVL367:
 2783 00ee ACE7     		b	.L271
 2784              	.LVL368:
 2785              	.L279:
 508:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2786              		.loc 1 508 0
 2787 00f0 4FF0FF35 		mov	r5, #-1
 2788              	.LVL369:
 2789 00f4 A9E7     		b	.L271
 2790              	.LVL370:
 2791              	.L280:
 2792 00f6 4FF0FF35 		mov	r5, #-1
 2793              	.LVL371:
 2794 00fa A6E7     		b	.L271
 2795              	.L286:
 2796              		.align	2
 2797              	.L285:
 2798 00fc 00000000 		.word	netconn_aborted
 2799              		.cfi_endproc
 2800              	.LFE163:
 2802              		.section	.text.lwip_netconn_do_delconn,"ax",%progbits
 2803              		.align	1
 2804              		.global	lwip_netconn_do_delconn
 2805              		.syntax unified
 2806              		.thumb
 2807              		.thumb_func
 2808              		.fpu fpv5-sp-d16
 2810              	lwip_netconn_do_delconn:
 2811              	.LFB170:
1020:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
 2812              		.loc 1 1020 0
 2813              		.cfi_startproc
 2814              		@ args = 0, pretend = 0, frame = 0
 2815              		@ frame_needed = 0, uses_anonymous_args = 0
 2816              	.LVL372:
 2817 0000 38B5     		push	{r3, r4, r5, lr}
 2818              	.LCFI19:
 2819              		.cfi_def_cfa_offset 16
 2820              		.cfi_offset 3, -16
 2821              		.cfi_offset 4, -12
 2822              		.cfi_offset 5, -8
 2823              		.cfi_offset 14, -4
 2824 0002 0446     		mov	r4, r0
 2825              	.LVL373:
1023:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("netconn state error", /* this only happens for TCP netconns */
 2826              		.loc 1 1023 0
 2827 0004 0368     		ldr	r3, [r0]
 2828 0006 5D78     		ldrb	r5, [r3, #1]	@ zero_extendqisi2
 2829              	.LVL374:
1024:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     (state == NETCONN_NONE) || (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_TCP));
 2830              		.loc 1 1024 0
 2831 0008 5DB1     		cbz	r5, .L288
1024:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     (state == NETCONN_NONE) || (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_TCP));
 2832              		.loc 1 1024 0 is_stmt 0 discriminator 1
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 91


 2833 000a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2834 000c 03F0F003 		and	r3, r3, #240
 2835 0010 102B     		cmp	r3, #16
 2836 0012 06D0     		beq	.L288
1024:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     (state == NETCONN_NONE) || (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_TCP));
 2837              		.loc 1 1024 0 discriminator 2
 2838 0014 4F4B     		ldr	r3, .L308
 2839 0016 40F20142 		movw	r2, #1025
 2840 001a 4F49     		ldr	r1, .L308+4
 2841 001c 4F48     		ldr	r0, .L308+8
 2842              	.LVL375:
 2843 001e FFF7FEFF 		bl	printf
 2844              	.LVL376:
 2845              	.L288:
1044:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        (state != NETCONN_LISTEN) &&
 2846              		.loc 1 1044 0 is_stmt 1
 2847 0022 002D     		cmp	r5, #0
 2848 0024 18BF     		it	ne
 2849 0026 022D     		cmpne	r5, #2
 2850 0028 18D0     		beq	.L289
1045:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        (state != NETCONN_CONNECT)) ||
 2851              		.loc 1 1045 0
 2852 002a 032D     		cmp	r5, #3
 2853 002c 16D0     		beq	.L289
 2854              	.L290:
1050:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else
 2855              		.loc 1 1050 0
 2856 002e FB23     		movs	r3, #251
 2857 0030 2371     		strb	r3, [r4, #4]
 2858              	.L292:
1108:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     TCPIP_APIMSG_ACK(msg);
 2859              		.loc 1 1108 0
 2860 0032 2068     		ldr	r0, [r4]
 2861 0034 0C30     		adds	r0, r0, #12
 2862 0036 FFF7FEFF 		bl	sys_sem_valid
 2863              	.LVL377:
 2864 003a 70B1     		cbz	r0, .L287
1109:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2865              		.loc 1 1109 0
 2866 003c 2368     		ldr	r3, [r4]
 2867 003e 63B1     		cbz	r3, .L287
 2868              	.LBB20:
1109:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2869              		.loc 1 1109 0 is_stmt 0 discriminator 1
 2870 0040 FFF7FEFF 		bl	sys_arch_protect
 2871              	.LVL378:
 2872 0044 2368     		ldr	r3, [r4]
 2873 0046 93F90820 		ldrsb	r2, [r3, #8]
 2874 004a 12F10C0F 		cmn	r2, #12
 2875 004e 02DB     		blt	.L303
1109:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2876              		.loc 1 1109 0 discriminator 2
 2877 0050 94F90420 		ldrsb	r2, [r4, #4]
 2878 0054 1A72     		strb	r2, [r3, #8]
 2879              	.L303:
1109:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2880              		.loc 1 1109 0 discriminator 4
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 92


 2881 0056 FFF7FEFF 		bl	sys_arch_unprotect
 2882              	.LVL379:
 2883              	.L287:
 2884 005a 38BD     		pop	{r3, r4, r5, pc}
 2885              	.LVL380:
 2886              	.L289:
 2887              	.LBE20:
1046:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       ((state == NETCONN_CONNECT) && !IN_NONBLOCKING_CONNECT(msg->conn))) {
 2888              		.loc 1 1046 0 is_stmt 1
 2889 005c 032D     		cmp	r5, #3
 2890 005e 27D0     		beq	.L305
 2891              	.L291:
1054:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (state != NETCONN_CONNECT) || IN_NONBLOCKING_CONNECT(msg->conn));
 2892              		.loc 1 1054 0
 2893 0060 032D     		cmp	r5, #3
 2894 0062 2BD0     		beq	.L306
 2895              	.L293:
1056:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* Drain and delete mboxes */
 2896              		.loc 1 1056 0
 2897 0064 0023     		movs	r3, #0
 2898 0066 2371     		strb	r3, [r4, #4]
1058:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 2899              		.loc 1 1058 0
 2900 0068 2068     		ldr	r0, [r4]
 2901 006a FFF7FEFF 		bl	netconn_drain
 2902              	.LVL381:
1060:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 2903              		.loc 1 1060 0
 2904 006e 2268     		ldr	r2, [r4]
 2905 0070 5168     		ldr	r1, [r2, #4]
 2906 0072 79B1     		cbz	r1, .L294
1062:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
 2907              		.loc 1 1062 0
 2908 0074 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 2909 0076 03F0F003 		and	r3, r3, #240
 2910 007a 102B     		cmp	r3, #16
 2911 007c 2BD0     		beq	.L296
 2912 007e 202B     		cmp	r3, #32
 2913 0080 05D1     		bne	.L295
1070:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         udp_remove(msg->conn->pcb.udp);
 2914              		.loc 1 1070 0
 2915 0082 0023     		movs	r3, #0
 2916 0084 CB61     		str	r3, [r1, #28]
1071:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
 2917              		.loc 1 1071 0
 2918 0086 2368     		ldr	r3, [r4]
 2919 0088 5868     		ldr	r0, [r3, #4]
 2920 008a FFF7FEFF 		bl	udp_remove
 2921              	.LVL382:
 2922              	.L295:
1099:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 2923              		.loc 1 1099 0
 2924 008e 2368     		ldr	r3, [r4]
 2925 0090 0022     		movs	r2, #0
 2926 0092 5A60     		str	r2, [r3, #4]
 2927              	.L294:
1105:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     API_EVENT(msg->conn, NETCONN_EVT_SENDPLUS, 0);
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 93


 2928              		.loc 1 1105 0
 2929 0094 2068     		ldr	r0, [r4]
 2930 0096 836A     		ldr	r3, [r0, #40]
 2931 0098 13B1     		cbz	r3, .L302
1105:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     API_EVENT(msg->conn, NETCONN_EVT_SENDPLUS, 0);
 2932              		.loc 1 1105 0 is_stmt 0 discriminator 1
 2933 009a 0022     		movs	r2, #0
 2934 009c 1146     		mov	r1, r2
 2935 009e 9847     		blx	r3
 2936              	.LVL383:
 2937              	.L302:
1106:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2938              		.loc 1 1106 0 is_stmt 1
 2939 00a0 2068     		ldr	r0, [r4]
 2940 00a2 836A     		ldr	r3, [r0, #40]
 2941 00a4 002B     		cmp	r3, #0
 2942 00a6 C4D0     		beq	.L292
1106:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2943              		.loc 1 1106 0 is_stmt 0 discriminator 1
 2944 00a8 0022     		movs	r2, #0
 2945 00aa 0221     		movs	r1, #2
 2946 00ac 9847     		blx	r3
 2947              	.LVL384:
 2948 00ae C0E7     		b	.L292
 2949              	.L305:
1047:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* This means either a blocking write or blocking connect is running
 2950              		.loc 1 1047 0 is_stmt 1
 2951 00b0 2368     		ldr	r3, [r4]
 2952 00b2 1B7F     		ldrb	r3, [r3, #28]	@ zero_extendqisi2
 2953 00b4 13F0040F 		tst	r3, #4
 2954 00b8 D2D1     		bne	.L291
 2955 00ba B8E7     		b	.L290
 2956              	.L306:
1054:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (state != NETCONN_CONNECT) || IN_NONBLOCKING_CONNECT(msg->conn));
 2957              		.loc 1 1054 0 discriminator 1
 2958 00bc 2368     		ldr	r3, [r4]
 2959 00be 1B7F     		ldrb	r3, [r3, #28]	@ zero_extendqisi2
 2960 00c0 13F0040F 		tst	r3, #4
 2961 00c4 CED1     		bne	.L293
1054:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (state != NETCONN_CONNECT) || IN_NONBLOCKING_CONNECT(msg->conn));
 2962              		.loc 1 1054 0 is_stmt 0 discriminator 2
 2963 00c6 234B     		ldr	r3, .L308
 2964 00c8 40F21F42 		movw	r2, #1055
 2965 00cc 2449     		ldr	r1, .L308+12
 2966 00ce 2348     		ldr	r0, .L308+8
 2967 00d0 FFF7FEFF 		bl	printf
 2968              	.LVL385:
 2969 00d4 C6E7     		b	.L293
 2970              	.L296:
1076:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->conn->write_offset == 0);
 2971              		.loc 1 1076 0 is_stmt 1
 2972 00d6 536A     		ldr	r3, [r2, #36]
 2973 00d8 002B     		cmp	r3, #0
 2974 00da 36D0     		beq	.L307
 2975              	.L298:
1076:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->conn->write_offset == 0);
 2976              		.loc 1 1076 0 is_stmt 0 discriminator 3
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 94


 2977 00dc 1D4B     		ldr	r3, .L308
 2978 00de 40F23542 		movw	r2, #1077
 2979 00e2 2049     		ldr	r1, .L308+16
 2980 00e4 1D48     		ldr	r0, .L308+8
 2981 00e6 FFF7FEFF 		bl	printf
 2982              	.LVL386:
 2983              	.L299:
1078:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->msg.sd.shut = NETCONN_SHUT_RDWR;
 2984              		.loc 1 1078 0 is_stmt 1
 2985 00ea 2368     		ldr	r3, [r4]
 2986 00ec 0422     		movs	r2, #4
 2987 00ee 5A70     		strb	r2, [r3, #1]
1079:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->current_msg = msg;
 2988              		.loc 1 1079 0
 2989 00f0 0323     		movs	r3, #3
 2990 00f2 2372     		strb	r3, [r4, #8]
1080:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
 2991              		.loc 1 1080 0
 2992 00f4 2368     		ldr	r3, [r4]
 2993 00f6 5C62     		str	r4, [r3, #36]
1082:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LWIP_ASSERT("state!", msg->conn->state == NETCONN_CLOSE);
 2994              		.loc 1 1082 0
 2995 00f8 0021     		movs	r1, #0
 2996 00fa 2068     		ldr	r0, [r4]
 2997 00fc FFF7FEFF 		bl	lwip_netconn_do_close_internal
 2998              	.LVL387:
 2999 0100 0028     		cmp	r0, #0
 3000 0102 AAD0     		beq	.L287
1083:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           UNLOCK_TCPIP_CORE();
 3001              		.loc 1 1083 0
 3002 0104 2368     		ldr	r3, [r4]
 3003 0106 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 3004 0108 042B     		cmp	r3, #4
 3005 010a 06D0     		beq	.L301
1083:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           UNLOCK_TCPIP_CORE();
 3006              		.loc 1 1083 0 is_stmt 0 discriminator 1
 3007 010c 114B     		ldr	r3, .L308
 3008 010e 40F23B42 		movw	r2, #1083
 3009 0112 1549     		ldr	r1, .L308+20
 3010 0114 1148     		ldr	r0, .L308+8
 3011 0116 FFF7FEFF 		bl	printf
 3012              	.LVL388:
 3013              	.L301:
1084:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           sys_arch_sem_wait(LWIP_API_MSG_SEM(msg), 0);
 3014              		.loc 1 1084 0 is_stmt 1
 3015 011a 144D     		ldr	r5, .L308+24
 3016              	.LVL389:
 3017 011c 2846     		mov	r0, r5
 3018 011e FFF7FEFF 		bl	sys_mutex_unlock
 3019              	.LVL390:
1085:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LOCK_TCPIP_CORE();
 3020              		.loc 1 1085 0
 3021 0122 2068     		ldr	r0, [r4]
 3022 0124 0021     		movs	r1, #0
 3023 0126 0C30     		adds	r0, r0, #12
 3024 0128 FFF7FEFF 		bl	sys_arch_sem_wait
 3025              	.LVL391:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 95


1086:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LWIP_ASSERT("state!", msg->conn->state == NETCONN_NONE);
 3026              		.loc 1 1086 0
 3027 012c 2846     		mov	r0, r5
 3028 012e FFF7FEFF 		bl	sys_mutex_lock
 3029              	.LVL392:
1087:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
 3030              		.loc 1 1087 0
 3031 0132 2368     		ldr	r3, [r4]
 3032 0134 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 3033 0136 002B     		cmp	r3, #0
 3034 0138 8FD0     		beq	.L287
1087:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
 3035              		.loc 1 1087 0 is_stmt 0 discriminator 1
 3036 013a 064B     		ldr	r3, .L308
 3037 013c 40F23F42 		movw	r2, #1087
 3038 0140 0949     		ldr	r1, .L308+20
 3039 0142 0648     		ldr	r0, .L308+8
 3040 0144 FFF7FEFF 		bl	printf
 3041              	.LVL393:
 3042 0148 38BD     		pop	{r3, r4, r5, pc}
 3043              	.LVL394:
 3044              	.L307:
1076:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->conn->write_offset == 0);
 3045              		.loc 1 1076 0 is_stmt 1 discriminator 2
 3046 014a 136A     		ldr	r3, [r2, #32]
 3047 014c 002B     		cmp	r3, #0
 3048 014e CCD0     		beq	.L299
 3049 0150 C4E7     		b	.L298
 3050              	.L309:
 3051 0152 00BF     		.align	2
 3052              	.L308:
 3053 0154 00000000 		.word	.LC0
 3054 0158 00000000 		.word	.LC30
 3055 015c 54000000 		.word	.LC2
 3056 0160 14000000 		.word	.LC31
 3057 0164 34000000 		.word	.LC32
 3058 0168 50000000 		.word	.LC33
 3059 016c 00000000 		.word	lock_tcpip_core
 3060              		.cfi_endproc
 3061              	.LFE170:
 3063              		.section	.text.lwip_netconn_do_bind,"ax",%progbits
 3064              		.align	1
 3065              		.global	lwip_netconn_do_bind
 3066              		.syntax unified
 3067              		.thumb
 3068              		.thumb_func
 3069              		.fpu fpv5-sp-d16
 3071              	lwip_netconn_do_bind:
 3072              	.LFB171:
1122:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
 3073              		.loc 1 1122 0
 3074              		.cfi_startproc
 3075              		@ args = 0, pretend = 0, frame = 0
 3076              		@ frame_needed = 0, uses_anonymous_args = 0
 3077              	.LVL395:
 3078 0000 10B5     		push	{r4, lr}
 3079              	.LCFI20:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 96


 3080              		.cfi_def_cfa_offset 8
 3081              		.cfi_offset 4, -8
 3082              		.cfi_offset 14, -4
 3083 0002 0446     		mov	r4, r0
 3084              	.LVL396:
1125:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = msg->conn->last_err;
 3085              		.loc 1 1125 0
 3086 0004 0368     		ldr	r3, [r0]
 3087 0006 93F90820 		ldrsb	r2, [r3, #8]
 3088 000a 12F10C0F 		cmn	r2, #12
 3089 000e 10DA     		bge	.L311
1126:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 3090              		.loc 1 1126 0
 3091 0010 0271     		strb	r2, [r0, #4]
 3092              	.LVL397:
 3093              	.L312:
1151:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3094              		.loc 1 1151 0
 3095 0012 2368     		ldr	r3, [r4]
 3096 0014 63B1     		cbz	r3, .L310
 3097              	.LBB21:
1151:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3098              		.loc 1 1151 0 is_stmt 0 discriminator 1
 3099 0016 FFF7FEFF 		bl	sys_arch_protect
 3100              	.LVL398:
 3101 001a 2368     		ldr	r3, [r4]
 3102 001c 93F90820 		ldrsb	r2, [r3, #8]
 3103 0020 12F10C0F 		cmn	r2, #12
 3104 0024 02DB     		blt	.L316
1151:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3105              		.loc 1 1151 0 discriminator 2
 3106 0026 94F90420 		ldrsb	r2, [r4, #4]
 3107 002a 1A72     		strb	r2, [r3, #8]
 3108              	.L316:
1151:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3109              		.loc 1 1151 0 discriminator 4
 3110 002c FFF7FEFF 		bl	sys_arch_unprotect
 3111              	.LVL399:
 3112              	.L310:
 3113 0030 10BD     		pop	{r4, pc}
 3114              	.LVL400:
 3115              	.L311:
 3116              	.LBE21:
1128:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->conn->pcb.tcp != NULL) {
 3117              		.loc 1 1128 0 is_stmt 1
 3118 0032 FA22     		movs	r2, #250
 3119 0034 0271     		strb	r2, [r0, #4]
1129:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       switch (NETCONNTYPE_GROUP(msg->conn->type)) {
 3120              		.loc 1 1129 0
 3121 0036 5868     		ldr	r0, [r3, #4]
 3122              	.LVL401:
 3123 0038 0028     		cmp	r0, #0
 3124 003a EAD0     		beq	.L312
1130:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
 3125              		.loc 1 1130 0
 3126 003c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3127 003e 03F0F003 		and	r3, r3, #240
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 97


 3128 0042 102B     		cmp	r3, #16
 3129 0044 07D0     		beq	.L313
 3130 0046 202B     		cmp	r3, #32
 3131 0048 E3D1     		bne	.L312
1138:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
 3132              		.loc 1 1138 0
 3133 004a A289     		ldrh	r2, [r4, #12]
 3134 004c A168     		ldr	r1, [r4, #8]
 3135 004e FFF7FEFF 		bl	udp_bind
 3136              	.LVL402:
 3137 0052 2071     		strb	r0, [r4, #4]
1139:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDP */
 3138              		.loc 1 1139 0
 3139 0054 DDE7     		b	.L312
 3140              	.L313:
1143:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
 3141              		.loc 1 1143 0
 3142 0056 A289     		ldrh	r2, [r4, #12]
 3143 0058 A168     		ldr	r1, [r4, #8]
 3144 005a FFF7FEFF 		bl	tcp_bind
 3145              	.LVL403:
 3146 005e 2071     		strb	r0, [r4, #4]
1144:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 3147              		.loc 1 1144 0
 3148 0060 D7E7     		b	.L312
 3149              		.cfi_endproc
 3150              	.LFE171:
 3152              		.section	.text.lwip_netconn_do_connect,"ax",%progbits
 3153              		.align	1
 3154              		.global	lwip_netconn_do_connect
 3155              		.syntax unified
 3156              		.thumb
 3157              		.thumb_func
 3158              		.fpu fpv5-sp-d16
 3160              	lwip_netconn_do_connect:
 3161              	.LFB173:
1213:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
 3162              		.loc 1 1213 0
 3163              		.cfi_startproc
 3164              		@ args = 0, pretend = 0, frame = 0
 3165              		@ frame_needed = 0, uses_anonymous_args = 0
 3166              	.LVL404:
 3167 0000 38B5     		push	{r3, r4, r5, lr}
 3168              	.LCFI21:
 3169              		.cfi_def_cfa_offset 16
 3170              		.cfi_offset 3, -16
 3171              		.cfi_offset 4, -12
 3172              		.cfi_offset 5, -8
 3173              		.cfi_offset 14, -4
 3174 0002 0446     		mov	r4, r0
 3175              	.LVL405:
1216:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* This may happen when calling netconn_connect() a second time */
 3176              		.loc 1 1216 0
 3177 0004 0268     		ldr	r2, [r0]
 3178 0006 5068     		ldr	r0, [r2, #4]
 3179              	.LVL406:
 3180 0008 D8B1     		cbz	r0, .L334
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 98


1220:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
 3181              		.loc 1 1220 0
 3182 000a 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 3183 000c 03F0F003 		and	r3, r3, #240
 3184 0010 102B     		cmp	r3, #16
 3185 0012 19D0     		beq	.L322
 3186 0014 202B     		cmp	r3, #32
 3187 0016 69D1     		bne	.L332
1228:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       break;
 3188              		.loc 1 1228 0
 3189 0018 A289     		ldrh	r2, [r4, #12]
 3190 001a A168     		ldr	r1, [r4, #8]
 3191 001c FFF7FEFF 		bl	udp_connect
 3192              	.LVL407:
 3193 0020 2071     		strb	r0, [r4, #4]
 3194              	.L320:
1272:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3195              		.loc 1 1272 0
 3196 0022 2368     		ldr	r3, [r4]
 3197 0024 63B1     		cbz	r3, .L318
 3198              	.LBB22:
1272:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3199              		.loc 1 1272 0 is_stmt 0 discriminator 1
 3200 0026 FFF7FEFF 		bl	sys_arch_protect
 3201              	.LVL408:
 3202 002a 2368     		ldr	r3, [r4]
 3203 002c 93F90820 		ldrsb	r2, [r3, #8]
 3204 0030 12F10C0F 		cmn	r2, #12
 3205 0034 02DB     		blt	.L331
1272:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3206              		.loc 1 1272 0 discriminator 2
 3207 0036 94F90420 		ldrsb	r2, [r4, #4]
 3208 003a 1A72     		strb	r2, [r3, #8]
 3209              	.L331:
1272:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3210              		.loc 1 1272 0 discriminator 4
 3211 003c FFF7FEFF 		bl	sys_arch_unprotect
 3212              	.LVL409:
 3213              	.L318:
 3214 0040 38BD     		pop	{r3, r4, r5, pc}
 3215              	.LVL410:
 3216              	.L334:
 3217              	.LBE22:
1218:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 3218              		.loc 1 1218 0 is_stmt 1
 3219 0042 F123     		movs	r3, #241
 3220 0044 2371     		strb	r3, [r4, #4]
 3221 0046 ECE7     		b	.L320
 3222              	.L322:
1234:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = ERR_ALREADY;
 3223              		.loc 1 1234 0
 3224 0048 5378     		ldrb	r3, [r2, #1]	@ zero_extendqisi2
 3225 004a 032B     		cmp	r3, #3
 3226 004c 03D0     		beq	.L335
1236:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = ERR_ISCONN;
 3227              		.loc 1 1236 0
 3228 004e 2BB1     		cbz	r3, .L325
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 99


1237:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
 3229              		.loc 1 1237 0
 3230 0050 F623     		movs	r3, #246
 3231 0052 2371     		strb	r3, [r4, #4]
 3232 0054 E5E7     		b	.L320
 3233              	.L335:
1235:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else if (msg->conn->state != NETCONN_NONE) {
 3234              		.loc 1 1235 0
 3235 0056 F723     		movs	r3, #247
 3236 0058 2371     		strb	r3, [r4, #4]
 3237 005a E2E7     		b	.L320
 3238              	.L325:
1239:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = tcp_connect(msg->conn->pcb.tcp, API_EXPR_REF(msg->msg.bc.ipaddr),
 3239              		.loc 1 1239 0
 3240 005c 1046     		mov	r0, r2
 3241 005e FFF7FEFF 		bl	setup_tcp
 3242              	.LVL411:
1240:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->msg.bc.port, lwip_netconn_do_connected);
 3243              		.loc 1 1240 0
 3244 0062 2068     		ldr	r0, [r4]
 3245 0064 264B     		ldr	r3, .L336
 3246 0066 A289     		ldrh	r2, [r4, #12]
 3247 0068 A168     		ldr	r1, [r4, #8]
 3248 006a 4068     		ldr	r0, [r0, #4]
 3249 006c FFF7FEFF 		bl	tcp_connect
 3250              	.LVL412:
 3251 0070 2071     		strb	r0, [r4, #4]
1242:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           u8_t non_blocking = netconn_is_nonblocking(msg->conn);
 3252              		.loc 1 1242 0
 3253 0072 0028     		cmp	r0, #0
 3254 0074 D5D1     		bne	.L320
 3255              	.LBB23:
1243:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->conn->state = NETCONN_CONNECT;
 3256              		.loc 1 1243 0
 3257 0076 2268     		ldr	r2, [r4]
 3258 0078 137F     		ldrb	r3, [r2, #28]	@ zero_extendqisi2
 3259              	.LVL413:
1244:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           SET_NONBLOCKING_CONNECT(msg->conn, non_blocking);
 3260              		.loc 1 1244 0
 3261 007a 0321     		movs	r1, #3
 3262 007c 5170     		strb	r1, [r2, #1]
1245:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           if (non_blocking) {
 3263              		.loc 1 1245 0
 3264 007e 13F00203 		ands	r3, r3, #2
 3265              	.LVL414:
 3266 0082 08D0     		beq	.L326
1245:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           if (non_blocking) {
 3267              		.loc 1 1245 0 is_stmt 0 discriminator 1
 3268 0084 2168     		ldr	r1, [r4]
 3269 0086 0A7F     		ldrb	r2, [r1, #28]	@ zero_extendqisi2
 3270              	.LVL415:
 3271 0088 42F00402 		orr	r2, r2, #4
 3272 008c 0A77     		strb	r2, [r1, #28]
 3273              	.L327:
1246:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             msg->err = ERR_INPROGRESS;
 3274              		.loc 1 1246 0 is_stmt 1
 3275 008e 43B1     		cbz	r3, .L328
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 100


1247:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           } else {
 3276              		.loc 1 1247 0
 3277 0090 FB23     		movs	r3, #251
 3278 0092 2371     		strb	r3, [r4, #4]
 3279 0094 C5E7     		b	.L320
 3280              	.LVL416:
 3281              	.L326:
1245:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           if (non_blocking) {
 3282              		.loc 1 1245 0 discriminator 2
 3283 0096 2168     		ldr	r1, [r4]
 3284 0098 0A7F     		ldrb	r2, [r1, #28]	@ zero_extendqisi2
 3285              	.LVL417:
 3286 009a 22F00402 		bic	r2, r2, #4
 3287 009e 0A77     		strb	r2, [r1, #28]
 3288 00a0 F5E7     		b	.L327
 3289              	.L328:
1249:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             /* sys_sem_signal() is called from lwip_netconn_do_connected (or err_tcp()),
 3290              		.loc 1 1249 0
 3291 00a2 2368     		ldr	r3, [r4]
 3292 00a4 5C62     		str	r4, [r3, #36]
1253:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             UNLOCK_TCPIP_CORE();
 3293              		.loc 1 1253 0
 3294 00a6 2368     		ldr	r3, [r4]
 3295 00a8 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 3296 00aa 032B     		cmp	r3, #3
 3297 00ac 06D0     		beq	.L329
1253:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             UNLOCK_TCPIP_CORE();
 3298              		.loc 1 1253 0 is_stmt 0 discriminator 1
 3299 00ae 154B     		ldr	r3, .L336+4
 3300 00b0 40F2E542 		movw	r2, #1253
 3301 00b4 1449     		ldr	r1, .L336+8
 3302 00b6 1548     		ldr	r0, .L336+12
 3303 00b8 FFF7FEFF 		bl	printf
 3304              	.LVL418:
 3305              	.L329:
1254:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             sys_arch_sem_wait(LWIP_API_MSG_SEM(msg), 0);
 3306              		.loc 1 1254 0 is_stmt 1
 3307 00bc 144D     		ldr	r5, .L336+16
 3308 00be 2846     		mov	r0, r5
 3309 00c0 FFF7FEFF 		bl	sys_mutex_unlock
 3310              	.LVL419:
1255:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             LOCK_TCPIP_CORE();
 3311              		.loc 1 1255 0
 3312 00c4 2068     		ldr	r0, [r4]
 3313 00c6 0021     		movs	r1, #0
 3314 00c8 0C30     		adds	r0, r0, #12
 3315 00ca FFF7FEFF 		bl	sys_arch_sem_wait
 3316              	.LVL420:
1256:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             LWIP_ASSERT("state!", msg->conn->state != NETCONN_CONNECT);
 3317              		.loc 1 1256 0
 3318 00ce 2846     		mov	r0, r5
 3319 00d0 FFF7FEFF 		bl	sys_mutex_lock
 3320              	.LVL421:
1257:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCPIP_CORE_LOCKING */
 3321              		.loc 1 1257 0
 3322 00d4 2368     		ldr	r3, [r4]
 3323 00d6 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 101


 3324 00d8 032B     		cmp	r3, #3
 3325 00da B1D1     		bne	.L318
1257:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCPIP_CORE_LOCKING */
 3326              		.loc 1 1257 0 is_stmt 0 discriminator 1
 3327 00dc 094B     		ldr	r3, .L336+4
 3328 00de 40F2E942 		movw	r2, #1257
 3329 00e2 0949     		ldr	r1, .L336+8
 3330 00e4 0948     		ldr	r0, .L336+12
 3331 00e6 FFF7FEFF 		bl	printf
 3332              	.LVL422:
 3333 00ea 38BD     		pop	{r3, r4, r5, pc}
 3334              	.LVL423:
 3335              	.L332:
 3336              	.LBE23:
1266:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       break;
 3337              		.loc 1 1266 0 is_stmt 1 discriminator 1
 3338 00ec 054B     		ldr	r3, .L336+4
 3339 00ee 40F2F242 		movw	r2, #1266
 3340 00f2 0849     		ldr	r1, .L336+20
 3341 00f4 0548     		ldr	r0, .L336+12
 3342 00f6 FFF7FEFF 		bl	printf
 3343              	.LVL424:
 3344 00fa FA23     		movs	r3, #250
 3345 00fc 2371     		strb	r3, [r4, #4]
1267:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 3346              		.loc 1 1267 0 discriminator 1
 3347 00fe 90E7     		b	.L320
 3348              	.L337:
 3349              		.align	2
 3350              	.L336:
 3351 0100 00000000 		.word	lwip_netconn_do_connected
 3352 0104 00000000 		.word	.LC0
 3353 0108 50000000 		.word	.LC33
 3354 010c 54000000 		.word	.LC2
 3355 0110 00000000 		.word	lock_tcpip_core
 3356 0114 00000000 		.word	.LC34
 3357              		.cfi_endproc
 3358              	.LFE173:
 3360              		.section	.text.lwip_netconn_do_disconnect,"ax",%progbits
 3361              		.align	1
 3362              		.global	lwip_netconn_do_disconnect
 3363              		.syntax unified
 3364              		.thumb
 3365              		.thumb_func
 3366              		.fpu fpv5-sp-d16
 3368              	lwip_netconn_do_disconnect:
 3369              	.LFB174:
1284:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
 3370              		.loc 1 1284 0
 3371              		.cfi_startproc
 3372              		@ args = 0, pretend = 0, frame = 0
 3373              		@ frame_needed = 0, uses_anonymous_args = 0
 3374              	.LVL425:
 3375 0000 10B5     		push	{r4, lr}
 3376              	.LCFI22:
 3377              		.cfi_def_cfa_offset 8
 3378              		.cfi_offset 4, -8
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 102


 3379              		.cfi_offset 14, -4
 3380 0002 0446     		mov	r4, r0
 3381              	.LVL426:
1288:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     udp_disconnect(msg->conn->pcb.udp);
 3382              		.loc 1 1288 0
 3383 0004 0268     		ldr	r2, [r0]
 3384 0006 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 3385 0008 03F0F003 		and	r3, r3, #240
 3386 000c 202B     		cmp	r3, #32
 3387 000e 11D0     		beq	.L344
1294:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 3388              		.loc 1 1294 0
 3389 0010 FA23     		movs	r3, #250
 3390 0012 0371     		strb	r3, [r0, #4]
 3391              	.LVL427:
 3392              	.L340:
1296:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3393              		.loc 1 1296 0
 3394 0014 2368     		ldr	r3, [r4]
 3395 0016 63B1     		cbz	r3, .L338
 3396              	.LBB24:
1296:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3397              		.loc 1 1296 0 is_stmt 0 discriminator 1
 3398 0018 FFF7FEFF 		bl	sys_arch_protect
 3399              	.LVL428:
 3400 001c 2368     		ldr	r3, [r4]
 3401 001e 93F90820 		ldrsb	r2, [r3, #8]
 3402 0022 12F10C0F 		cmn	r2, #12
 3403 0026 02DB     		blt	.L342
1296:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3404              		.loc 1 1296 0 discriminator 2
 3405 0028 94F90420 		ldrsb	r2, [r4, #4]
 3406 002c 1A72     		strb	r2, [r3, #8]
 3407              	.L342:
1296:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3408              		.loc 1 1296 0 discriminator 4
 3409 002e FFF7FEFF 		bl	sys_arch_unprotect
 3410              	.LVL429:
 3411              	.L338:
 3412 0032 10BD     		pop	{r4, pc}
 3413              	.LVL430:
 3414              	.L344:
 3415              	.LBE24:
1289:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_OK;
 3416              		.loc 1 1289 0 is_stmt 1
 3417 0034 5068     		ldr	r0, [r2, #4]
 3418              	.LVL431:
 3419 0036 FFF7FEFF 		bl	udp_disconnect
 3420              	.LVL432:
1290:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else
 3421              		.loc 1 1290 0
 3422 003a 0023     		movs	r3, #0
 3423 003c 2371     		strb	r3, [r4, #4]
 3424 003e E9E7     		b	.L340
 3425              		.cfi_endproc
 3426              	.LFE174:
 3428              		.section	.text.lwip_netconn_do_listen,"ax",%progbits
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 103


 3429              		.align	1
 3430              		.global	lwip_netconn_do_listen
 3431              		.syntax unified
 3432              		.thumb
 3433              		.thumb_func
 3434              		.fpu fpv5-sp-d16
 3436              	lwip_netconn_do_listen:
 3437              	.LFB175:
1308:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
 3438              		.loc 1 1308 0
 3439              		.cfi_startproc
 3440              		@ args = 0, pretend = 0, frame = 8
 3441              		@ frame_needed = 0, uses_anonymous_args = 0
 3442              	.LVL433:
 3443 0000 30B5     		push	{r4, r5, lr}
 3444              	.LCFI23:
 3445              		.cfi_def_cfa_offset 12
 3446              		.cfi_offset 4, -12
 3447              		.cfi_offset 5, -8
 3448              		.cfi_offset 14, -4
 3449 0002 83B0     		sub	sp, sp, #12
 3450              	.LCFI24:
 3451              		.cfi_def_cfa_offset 24
 3452 0004 0446     		mov	r4, r0
 3453              	.LVL434:
1311:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = msg->conn->last_err;
 3454              		.loc 1 1311 0
 3455 0006 0368     		ldr	r3, [r0]
 3456 0008 93F90820 		ldrsb	r2, [r3, #8]
 3457 000c 12F10C0F 		cmn	r2, #12
 3458 0010 11DA     		bge	.L346
1312:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 3459              		.loc 1 1312 0
 3460 0012 0271     		strb	r2, [r0, #4]
 3461              	.LVL435:
 3462              	.L347:
1380:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3463              		.loc 1 1380 0
 3464 0014 2368     		ldr	r3, [r4]
 3465 0016 63B1     		cbz	r3, .L345
 3466              	.LBB25:
1380:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3467              		.loc 1 1380 0 is_stmt 0 discriminator 1
 3468 0018 FFF7FEFF 		bl	sys_arch_protect
 3469              	.LVL436:
 3470 001c 2368     		ldr	r3, [r4]
 3471 001e 93F90820 		ldrsb	r2, [r3, #8]
 3472 0022 12F10C0F 		cmn	r2, #12
 3473 0026 02DB     		blt	.L357
1380:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3474              		.loc 1 1380 0 discriminator 2
 3475 0028 94F90420 		ldrsb	r2, [r4, #4]
 3476 002c 1A72     		strb	r2, [r3, #8]
 3477              	.L357:
1380:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3478              		.loc 1 1380 0 discriminator 4
 3479 002e FFF7FEFF 		bl	sys_arch_unprotect
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 104


 3480              	.LVL437:
 3481              	.L345:
 3482              	.LBE25:
1381:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 3483              		.loc 1 1381 0 is_stmt 1
 3484 0032 03B0     		add	sp, sp, #12
 3485              	.LCFI25:
 3486              		.cfi_remember_state
 3487              		.cfi_def_cfa_offset 12
 3488              		@ sp needed
 3489 0034 30BD     		pop	{r4, r5, pc}
 3490              	.LVL438:
 3491              	.L346:
 3492              	.LCFI26:
 3493              		.cfi_restore_state
1314:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->conn->pcb.tcp != NULL) {
 3494              		.loc 1 1314 0
 3495 0036 F522     		movs	r2, #245
 3496 0038 0271     		strb	r2, [r0, #4]
1315:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_TCP) {
 3497              		.loc 1 1315 0
 3498 003a 5868     		ldr	r0, [r3, #4]
 3499              	.LVL439:
 3500 003c 0028     		cmp	r0, #0
 3501 003e E9D0     		beq	.L347
1316:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (msg->conn->state == NETCONN_NONE) {
 3502              		.loc 1 1316 0
 3503 0040 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 3504 0042 02F0F002 		and	r2, r2, #240
 3505 0046 102A     		cmp	r2, #16
 3506 0048 02D0     		beq	.L359
1376:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 3507              		.loc 1 1376 0
 3508 004a F023     		movs	r3, #240
 3509 004c 2371     		strb	r3, [r4, #4]
 3510 004e E1E7     		b	.L347
 3511              	.L359:
1317:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           struct tcp_pcb* lpcb;
 3512              		.loc 1 1317 0
 3513 0050 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 3514 0052 002B     		cmp	r3, #0
 3515 0054 45D1     		bne	.L349
 3516              	.LBB26:
1319:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             /* connection is not closed, cannot listen */
 3517              		.loc 1 1319 0
 3518 0056 037D     		ldrb	r3, [r0, #20]	@ zero_extendqisi2
 3519 0058 13B1     		cbz	r3, .L350
1321:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           } else {
 3520              		.loc 1 1321 0
 3521 005a FA23     		movs	r3, #250
 3522 005c 2371     		strb	r3, [r4, #4]
 3523 005e D9E7     		b	.L347
 3524              	.L350:
 3525              	.LVL440:
 3526              	.LBB27:
1342:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 3527              		.loc 1 1342 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 105


 3528 0060 0DF10702 		add	r2, sp, #7
 3529 0064 FF21     		movs	r1, #255
 3530 0066 FFF7FEFF 		bl	tcp_listen_with_backlog_and_err
 3531              	.LVL441:
1344:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               /* in this case, the old pcb is still allocated */
 3532              		.loc 1 1344 0
 3533 006a 0546     		mov	r5, r0
 3534 006c F0B1     		cbz	r0, .L360
1349:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 /** @todo: should we drain the recvmbox here? */
 3535              		.loc 1 1349 0
 3536 006e 2068     		ldr	r0, [r4]
 3537              	.LVL442:
 3538 0070 1030     		adds	r0, r0, #16
 3539 0072 FFF7FEFF 		bl	sys_mbox_valid
 3540              	.LVL443:
 3541 0076 E8B9     		cbnz	r0, .L361
 3542              	.L353:
1354:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               if (!sys_mbox_valid(&msg->conn->acceptmbox)) {
 3543              		.loc 1 1354 0
 3544 0078 0023     		movs	r3, #0
 3545 007a 2371     		strb	r3, [r4, #4]
1355:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 msg->err = sys_mbox_new(&msg->conn->acceptmbox, DEFAULT_ACCEPTMBOX_SIZE);
 3546              		.loc 1 1355 0
 3547 007c 2068     		ldr	r0, [r4]
 3548 007e 1430     		adds	r0, r0, #20
 3549 0080 FFF7FEFF 		bl	sys_mbox_valid
 3550              	.LVL444:
 3551 0084 F8B1     		cbz	r0, .L362
 3552              	.L354:
1358:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 msg->conn->state = NETCONN_LISTEN;
 3553              		.loc 1 1358 0
 3554 0086 94F90430 		ldrsb	r3, [r4, #4]
 3555 008a 1BBB     		cbnz	r3, .L355
1359:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 msg->conn->pcb.tcp = lpcb;
 3556              		.loc 1 1359 0
 3557 008c 2368     		ldr	r3, [r4]
 3558 008e 0222     		movs	r2, #2
 3559 0090 5A70     		strb	r2, [r3, #1]
1360:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 tcp_arg(msg->conn->pcb.tcp, msg->conn);
 3560              		.loc 1 1360 0
 3561 0092 2368     		ldr	r3, [r4]
 3562 0094 5D60     		str	r5, [r3, #4]
1361:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 tcp_accept(msg->conn->pcb.tcp, accept_function);
 3563              		.loc 1 1361 0
 3564 0096 2368     		ldr	r3, [r4]
 3565 0098 1946     		mov	r1, r3
 3566 009a 5868     		ldr	r0, [r3, #4]
 3567 009c FFF7FEFF 		bl	tcp_arg
 3568              	.LVL445:
1362:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               } else {
 3569              		.loc 1 1362 0
 3570 00a0 2368     		ldr	r3, [r4]
 3571 00a2 1249     		ldr	r1, .L363
 3572 00a4 5868     		ldr	r0, [r3, #4]
 3573 00a6 FFF7FEFF 		bl	tcp_accept
 3574              	.LVL446:
 3575 00aa B3E7     		b	.L347
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 106


 3576              	.LVL447:
 3577              	.L360:
1346:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             } else {
 3578              		.loc 1 1346 0
 3579 00ac 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 3580 00b0 2371     		strb	r3, [r4, #4]
 3581 00b2 AFE7     		b	.L347
 3582              	.LVL448:
 3583              	.L361:
1351:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 sys_mbox_set_invalid(&msg->conn->recvmbox);
 3584              		.loc 1 1351 0
 3585 00b4 2068     		ldr	r0, [r4]
 3586 00b6 1030     		adds	r0, r0, #16
 3587 00b8 FFF7FEFF 		bl	sys_mbox_free
 3588              	.LVL449:
1352:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               }
 3589              		.loc 1 1352 0
 3590 00bc 2068     		ldr	r0, [r4]
 3591 00be 1030     		adds	r0, r0, #16
 3592 00c0 FFF7FEFF 		bl	sys_mbox_set_invalid
 3593              	.LVL450:
 3594 00c4 D8E7     		b	.L353
 3595              	.L362:
1356:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               }
 3596              		.loc 1 1356 0
 3597 00c6 2068     		ldr	r0, [r4]
 3598 00c8 0621     		movs	r1, #6
 3599 00ca 1430     		adds	r0, r0, #20
 3600 00cc FFF7FEFF 		bl	sys_mbox_new
 3601              	.LVL451:
 3602 00d0 2071     		strb	r0, [r4, #4]
 3603 00d2 D8E7     		b	.L354
 3604              	.L355:
1365:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 msg->conn->pcb.tcp = NULL;
 3605              		.loc 1 1365 0
 3606 00d4 2846     		mov	r0, r5
 3607 00d6 FFF7FEFF 		bl	tcp_close
 3608              	.LVL452:
1366:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               }
 3609              		.loc 1 1366 0
 3610 00da 2368     		ldr	r3, [r4]
 3611 00dc 0022     		movs	r2, #0
 3612 00de 5A60     		str	r2, [r3, #4]
 3613 00e0 98E7     		b	.L347
 3614              	.LVL453:
 3615              	.L349:
 3616              	.LBE27:
 3617              	.LBE26:
1370:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           /* already listening, allow updating of the backlog */
 3618              		.loc 1 1370 0
 3619 00e2 022B     		cmp	r3, #2
 3620 00e4 96D1     		bne	.L347
1372:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           tcp_backlog_set(msg->conn->pcb.tcp, msg->msg.lb.backlog);
 3621              		.loc 1 1372 0
 3622 00e6 0023     		movs	r3, #0
 3623 00e8 2371     		strb	r3, [r4, #4]
 3624 00ea 93E7     		b	.L347
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 107


 3625              	.L364:
 3626              		.align	2
 3627              	.L363:
 3628 00ec 00000000 		.word	accept_function
 3629              		.cfi_endproc
 3630              	.LFE175:
 3632              		.section	.text.lwip_netconn_do_send,"ax",%progbits
 3633              		.align	1
 3634              		.global	lwip_netconn_do_send
 3635              		.syntax unified
 3636              		.thumb
 3637              		.thumb_func
 3638              		.fpu fpv5-sp-d16
 3640              	lwip_netconn_do_send:
 3641              	.LFB176:
1392:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
 3642              		.loc 1 1392 0
 3643              		.cfi_startproc
 3644              		@ args = 0, pretend = 0, frame = 0
 3645              		@ frame_needed = 0, uses_anonymous_args = 0
 3646              	.LVL454:
 3647 0000 10B5     		push	{r4, lr}
 3648              	.LCFI27:
 3649              		.cfi_def_cfa_offset 8
 3650              		.cfi_offset 4, -8
 3651              		.cfi_offset 14, -4
 3652 0002 0446     		mov	r4, r0
 3653              	.LVL455:
1395:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = msg->conn->last_err;
 3654              		.loc 1 1395 0
 3655 0004 0368     		ldr	r3, [r0]
 3656 0006 93F90820 		ldrsb	r2, [r3, #8]
 3657 000a 12F10C0F 		cmn	r2, #12
 3658 000e 10DA     		bge	.L366
1396:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 3659              		.loc 1 1396 0
 3660 0010 0271     		strb	r2, [r0, #4]
 3661              	.LVL456:
 3662              	.L367:
1435:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3663              		.loc 1 1435 0
 3664 0012 2368     		ldr	r3, [r4]
 3665 0014 63B1     		cbz	r3, .L365
 3666              	.LBB28:
1435:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3667              		.loc 1 1435 0 is_stmt 0 discriminator 1
 3668 0016 FFF7FEFF 		bl	sys_arch_protect
 3669              	.LVL457:
 3670 001a 2368     		ldr	r3, [r4]
 3671 001c 93F90820 		ldrsb	r2, [r3, #8]
 3672 0020 12F10C0F 		cmn	r2, #12
 3673 0024 02DB     		blt	.L371
1435:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3674              		.loc 1 1435 0 discriminator 2
 3675 0026 94F90420 		ldrsb	r2, [r4, #4]
 3676 002a 1A72     		strb	r2, [r3, #8]
 3677              	.L371:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 108


1435:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3678              		.loc 1 1435 0 discriminator 4
 3679 002c FFF7FEFF 		bl	sys_arch_unprotect
 3680              	.LVL458:
 3681              	.L365:
 3682 0030 10BD     		pop	{r4, pc}
 3683              	.LVL459:
 3684              	.L366:
 3685              	.LBE28:
1398:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->conn->pcb.tcp != NULL) {
 3686              		.loc 1 1398 0 is_stmt 1
 3687 0032 F522     		movs	r2, #245
 3688 0034 0271     		strb	r2, [r0, #4]
1399:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       switch (NETCONNTYPE_GROUP(msg->conn->type)) {
 3689              		.loc 1 1399 0
 3690 0036 5868     		ldr	r0, [r3, #4]
 3691              	.LVL460:
 3692 0038 0028     		cmp	r0, #0
 3693 003a EAD0     		beq	.L367
1400:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
 3694              		.loc 1 1400 0
 3695 003c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3696 003e 03F0F003 		and	r3, r3, #240
 3697 0042 202B     		cmp	r3, #32
 3698 0044 E5D1     		bne	.L367
1422:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->err = udp_send(msg->conn->pcb.udp, msg->msg.b->p);
 3699              		.loc 1 1422 0
 3700 0046 A168     		ldr	r1, [r4, #8]
 3701 0048 8B68     		ldr	r3, [r1, #8]
 3702 004a 23B9     		cbnz	r3, .L369
1423:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         } else {
 3703              		.loc 1 1423 0
 3704 004c 0968     		ldr	r1, [r1]
 3705 004e FFF7FEFF 		bl	udp_send
 3706              	.LVL461:
 3707 0052 2071     		strb	r0, [r4, #4]
 3708 0054 DDE7     		b	.L367
 3709              	.L369:
1425:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
 3710              		.loc 1 1425 0
 3711 0056 8B89     		ldrh	r3, [r1, #12]
 3712 0058 01F10802 		add	r2, r1, #8
 3713 005c 0968     		ldr	r1, [r1]
 3714 005e FFF7FEFF 		bl	udp_sendto
 3715              	.LVL462:
 3716 0062 2071     		strb	r0, [r4, #4]
 3717 0064 D5E7     		b	.L367
 3718              		.cfi_endproc
 3719              	.LFE176:
 3721              		.section	.text.lwip_netconn_do_recv,"ax",%progbits
 3722              		.align	1
 3723              		.global	lwip_netconn_do_recv
 3724              		.syntax unified
 3725              		.thumb
 3726              		.thumb_func
 3727              		.fpu fpv5-sp-d16
 3729              	lwip_netconn_do_recv:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 109


 3730              	.LFB177:
1447:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
 3731              		.loc 1 1447 0
 3732              		.cfi_startproc
 3733              		@ args = 0, pretend = 0, frame = 0
 3734              		@ frame_needed = 0, uses_anonymous_args = 0
 3735              	.LVL463:
 3736 0000 70B5     		push	{r4, r5, r6, lr}
 3737              	.LCFI28:
 3738              		.cfi_def_cfa_offset 16
 3739              		.cfi_offset 4, -16
 3740              		.cfi_offset 5, -12
 3741              		.cfi_offset 6, -8
 3742              		.cfi_offset 14, -4
 3743 0002 0646     		mov	r6, r0
 3744              	.LVL464:
1450:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (msg->conn->pcb.tcp != NULL) {
 3745              		.loc 1 1450 0
 3746 0004 0023     		movs	r3, #0
 3747 0006 0371     		strb	r3, [r0, #4]
1451:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_TCP) {
 3748              		.loc 1 1451 0
 3749 0008 0368     		ldr	r3, [r0]
 3750 000a 5A68     		ldr	r2, [r3, #4]
 3751 000c 22B1     		cbz	r2, .L374
1452:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       u32_t remaining = msg->msg.r.len;
 3752              		.loc 1 1452 0
 3753 000e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3754 0010 03F0F003 		and	r3, r3, #240
 3755 0014 102B     		cmp	r3, #16
 3756 0016 0FD0     		beq	.L381
 3757              	.LVL465:
 3758              	.L374:
1461:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3759              		.loc 1 1461 0
 3760 0018 3368     		ldr	r3, [r6]
 3761 001a 63B1     		cbz	r3, .L373
 3762              	.LBB29:
1461:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3763              		.loc 1 1461 0 is_stmt 0 discriminator 1
 3764 001c FFF7FEFF 		bl	sys_arch_protect
 3765              	.LVL466:
 3766 0020 3368     		ldr	r3, [r6]
 3767 0022 93F90820 		ldrsb	r2, [r3, #8]
 3768 0026 12F10C0F 		cmn	r2, #12
 3769 002a 02DB     		blt	.L378
1461:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3770              		.loc 1 1461 0 discriminator 2
 3771 002c 96F90420 		ldrsb	r2, [r6, #4]
 3772 0030 1A72     		strb	r2, [r3, #8]
 3773              	.L378:
1461:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3774              		.loc 1 1461 0 discriminator 4
 3775 0032 FFF7FEFF 		bl	sys_arch_unprotect
 3776              	.LVL467:
 3777              	.L373:
 3778 0036 70BD     		pop	{r4, r5, r6, pc}
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 110


 3779              	.LVL468:
 3780              	.L381:
 3781              	.LBE29:
 3782              	.LBB30:
1453:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       do {
 3783              		.loc 1 1453 0 is_stmt 1
 3784 0038 8468     		ldr	r4, [r0, #8]
 3785              	.LVL469:
 3786 003a 08E0     		b	.L376
 3787              	.LVL470:
 3788              	.L379:
 3789              	.LBB31:
1455:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         tcp_recved(msg->conn->pcb.tcp, recved);
 3790              		.loc 1 1455 0
 3791 003c 4FF6FF75 		movw	r5, #65535
 3792              	.L375:
 3793              	.LVL471:
1456:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         remaining -= recved;
 3794              		.loc 1 1456 0 discriminator 4
 3795 0040 3368     		ldr	r3, [r6]
 3796 0042 2946     		mov	r1, r5
 3797 0044 5868     		ldr	r0, [r3, #4]
 3798 0046 FFF7FEFF 		bl	tcp_recved
 3799              	.LVL472:
 3800              	.LBE31:
1458:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 3801              		.loc 1 1458 0 discriminator 4
 3802 004a 641B     		subs	r4, r4, r5
 3803              	.LVL473:
 3804 004c E4D0     		beq	.L374
 3805              	.LVL474:
 3806              	.L376:
 3807              	.LBB32:
1455:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         tcp_recved(msg->conn->pcb.tcp, recved);
 3808              		.loc 1 1455 0
 3809 004e B4F5803F 		cmp	r4, #65536
 3810 0052 F3D2     		bcs	.L379
1455:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         tcp_recved(msg->conn->pcb.tcp, recved);
 3811              		.loc 1 1455 0 is_stmt 0 discriminator 1
 3812 0054 A5B2     		uxth	r5, r4
 3813 0056 F3E7     		b	.L375
 3814              	.LBE32:
 3815              	.LBE30:
 3816              		.cfi_endproc
 3817              	.LFE177:
 3819              		.section	.text.lwip_netconn_do_write,"ax",%progbits
 3820              		.align	1
 3821              		.global	lwip_netconn_do_write
 3822              		.syntax unified
 3823              		.thumb
 3824              		.thumb_func
 3825              		.fpu fpv5-sp-d16
 3827              	lwip_netconn_do_write:
 3828              	.LFB179:
1652:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
 3829              		.loc 1 1652 0 is_stmt 1
 3830              		.cfi_startproc
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 111


 3831              		@ args = 0, pretend = 0, frame = 0
 3832              		@ frame_needed = 0, uses_anonymous_args = 0
 3833              	.LVL475:
 3834 0000 38B5     		push	{r3, r4, r5, lr}
 3835              	.LCFI29:
 3836              		.cfi_def_cfa_offset 16
 3837              		.cfi_offset 3, -16
 3838              		.cfi_offset 4, -12
 3839              		.cfi_offset 5, -8
 3840              		.cfi_offset 14, -4
 3841 0002 0446     		mov	r4, r0
 3842              	.LVL476:
1655:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = msg->conn->last_err;
 3843              		.loc 1 1655 0
 3844 0004 0368     		ldr	r3, [r0]
 3845 0006 93F90820 		ldrsb	r2, [r3, #8]
 3846 000a 12F10C0F 		cmn	r2, #12
 3847 000e 0FDA     		bge	.L383
1656:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 3848              		.loc 1 1656 0
 3849 0010 0271     		strb	r2, [r0, #4]
 3850              	.L384:
1697:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3851              		.loc 1 1697 0
 3852 0012 63B1     		cbz	r3, .L382
 3853              	.LBB33:
1697:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3854              		.loc 1 1697 0 is_stmt 0 discriminator 1
 3855 0014 FFF7FEFF 		bl	sys_arch_protect
 3856              	.LVL477:
 3857 0018 2368     		ldr	r3, [r4]
 3858 001a 93F90820 		ldrsb	r2, [r3, #8]
 3859 001e 12F10C0F 		cmn	r2, #12
 3860 0022 02DB     		blt	.L393
1697:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3861              		.loc 1 1697 0 discriminator 2
 3862 0024 94F90420 		ldrsb	r2, [r4, #4]
 3863 0028 1A72     		strb	r2, [r3, #8]
 3864              	.L393:
1697:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3865              		.loc 1 1697 0 discriminator 4
 3866 002a FFF7FEFF 		bl	sys_arch_unprotect
 3867              	.LVL478:
 3868              	.L382:
 3869 002e 38BD     		pop	{r3, r4, r5, pc}
 3870              	.LVL479:
 3871              	.L383:
 3872              	.LBE33:
1658:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 3873              		.loc 1 1658 0 is_stmt 1
 3874 0030 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 3875 0032 02F0F002 		and	r2, r2, #240
 3876 0036 102A     		cmp	r2, #16
 3877 0038 02D0     		beq	.L395
1693:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* (LWIP_UDP || LWIP_RAW) */
 3878              		.loc 1 1693 0
 3879 003a FA22     		movs	r2, #250
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 112


 3880 003c 0271     		strb	r2, [r0, #4]
 3881 003e E8E7     		b	.L384
 3882              	.L395:
1660:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* netconn is connecting, closing or in blocking write */
 3883              		.loc 1 1660 0
 3884 0040 5A78     		ldrb	r2, [r3, #1]	@ zero_extendqisi2
 3885 0042 12B1     		cbz	r2, .L386
1662:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else if (msg->conn->pcb.tcp != NULL) {
 3886              		.loc 1 1662 0
 3887 0044 FB22     		movs	r2, #251
 3888 0046 0271     		strb	r2, [r0, #4]
 3889 0048 E3E7     		b	.L384
 3890              	.L386:
1663:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->state = NETCONN_WRITE;
 3891              		.loc 1 1663 0
 3892 004a 5A68     		ldr	r2, [r3, #4]
 3893 004c 002A     		cmp	r2, #0
 3894 004e 48D0     		beq	.L387
1664:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* set all the variables used by lwip_netconn_do_writemore */
 3895              		.loc 1 1664 0
 3896 0050 0122     		movs	r2, #1
 3897 0052 5A70     		strb	r2, [r3, #1]
1666:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->conn->write_offset == 0);
 3898              		.loc 1 1666 0
 3899 0054 0368     		ldr	r3, [r0]
 3900 0056 5A6A     		ldr	r2, [r3, #36]
 3901 0058 002A     		cmp	r2, #0
 3902 005a 36D0     		beq	.L396
 3903              	.L388:
1666:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->conn->write_offset == 0);
 3904              		.loc 1 1666 0 is_stmt 0 discriminator 3
 3905 005c 224B     		ldr	r3, .L398
 3906 005e 40F28362 		movw	r2, #1667
 3907 0062 2249     		ldr	r1, .L398+4
 3908 0064 2248     		ldr	r0, .L398+8
 3909              	.LVL480:
 3910 0066 FFF7FEFF 		bl	printf
 3911              	.LVL481:
 3912              	.L389:
1668:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->current_msg = msg;
 3913              		.loc 1 1668 0 is_stmt 1
 3914 006a E368     		ldr	r3, [r4, #12]
 3915 006c 002B     		cmp	r3, #0
 3916 006e 30D0     		beq	.L397
 3917              	.L390:
1669:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->write_offset = 0;
 3918              		.loc 1 1669 0
 3919 0070 2368     		ldr	r3, [r4]
 3920 0072 5C62     		str	r4, [r3, #36]
1670:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
 3921              		.loc 1 1670 0
 3922 0074 2368     		ldr	r3, [r4]
 3923 0076 0021     		movs	r1, #0
 3924 0078 1962     		str	r1, [r3, #32]
1672:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LWIP_ASSERT("state!", msg->conn->state == NETCONN_WRITE);
 3925              		.loc 1 1672 0
 3926 007a 2068     		ldr	r0, [r4]
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 113


 3927 007c FFF7FEFF 		bl	lwip_netconn_do_writemore
 3928              	.LVL482:
 3929 0080 0028     		cmp	r0, #0
 3930 0082 D4D0     		beq	.L382
1673:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           UNLOCK_TCPIP_CORE();
 3931              		.loc 1 1673 0
 3932 0084 2368     		ldr	r3, [r4]
 3933 0086 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 3934 0088 012B     		cmp	r3, #1
 3935 008a 06D0     		beq	.L392
1673:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           UNLOCK_TCPIP_CORE();
 3936              		.loc 1 1673 0 is_stmt 0 discriminator 1
 3937 008c 164B     		ldr	r3, .L398
 3938 008e 40F28962 		movw	r2, #1673
 3939 0092 1849     		ldr	r1, .L398+12
 3940 0094 1648     		ldr	r0, .L398+8
 3941 0096 FFF7FEFF 		bl	printf
 3942              	.LVL483:
 3943              	.L392:
1674:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           sys_arch_sem_wait(LWIP_API_MSG_SEM(msg), 0);
 3944              		.loc 1 1674 0 is_stmt 1
 3945 009a 174D     		ldr	r5, .L398+16
 3946 009c 2846     		mov	r0, r5
 3947 009e FFF7FEFF 		bl	sys_mutex_unlock
 3948              	.LVL484:
1675:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LOCK_TCPIP_CORE();
 3949              		.loc 1 1675 0
 3950 00a2 2068     		ldr	r0, [r4]
 3951 00a4 0021     		movs	r1, #0
 3952 00a6 0C30     		adds	r0, r0, #12
 3953 00a8 FFF7FEFF 		bl	sys_arch_sem_wait
 3954              	.LVL485:
1676:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LWIP_ASSERT("state!", msg->conn->state != NETCONN_WRITE);
 3955              		.loc 1 1676 0
 3956 00ac 2846     		mov	r0, r5
 3957 00ae FFF7FEFF 		bl	sys_mutex_lock
 3958              	.LVL486:
1677:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
 3959              		.loc 1 1677 0
 3960 00b2 2368     		ldr	r3, [r4]
 3961 00b4 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 3962 00b6 012B     		cmp	r3, #1
 3963 00b8 B9D1     		bne	.L382
1677:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
 3964              		.loc 1 1677 0 is_stmt 0 discriminator 1
 3965 00ba 0B4B     		ldr	r3, .L398
 3966 00bc 40F28D62 		movw	r2, #1677
 3967 00c0 0C49     		ldr	r1, .L398+12
 3968 00c2 0B48     		ldr	r0, .L398+8
 3969 00c4 FFF7FEFF 		bl	printf
 3970              	.LVL487:
 3971 00c8 38BD     		pop	{r3, r4, r5, pc}
 3972              	.LVL488:
 3973              	.L396:
1666:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->conn->write_offset == 0);
 3974              		.loc 1 1666 0 is_stmt 1 discriminator 2
 3975 00ca 1B6A     		ldr	r3, [r3, #32]
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 114


 3976 00cc 002B     		cmp	r3, #0
 3977 00ce CCD0     		beq	.L389
 3978 00d0 C4E7     		b	.L388
 3979              	.LVL489:
 3980              	.L397:
1668:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->current_msg = msg;
 3981              		.loc 1 1668 0 discriminator 1
 3982 00d2 054B     		ldr	r3, .L398
 3983 00d4 40F28462 		movw	r2, #1668
 3984 00d8 0849     		ldr	r1, .L398+20
 3985 00da 0548     		ldr	r0, .L398+8
 3986 00dc FFF7FEFF 		bl	printf
 3987              	.LVL490:
 3988 00e0 C6E7     		b	.L390
 3989              	.LVL491:
 3990              	.L387:
1686:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 3991              		.loc 1 1686 0
 3992 00e2 F522     		movs	r2, #245
 3993 00e4 0271     		strb	r2, [r0, #4]
 3994 00e6 94E7     		b	.L384
 3995              	.L399:
 3996              		.align	2
 3997              	.L398:
 3998 00e8 00000000 		.word	.LC0
 3999 00ec 34000000 		.word	.LC32
 4000 00f0 54000000 		.word	.LC2
 4001 00f4 50000000 		.word	.LC33
 4002 00f8 00000000 		.word	lock_tcpip_core
 4003 00fc 00000000 		.word	.LC35
 4004              		.cfi_endproc
 4005              	.LFE179:
 4007              		.section	.text.lwip_netconn_do_getaddr,"ax",%progbits
 4008              		.align	1
 4009              		.global	lwip_netconn_do_getaddr
 4010              		.syntax unified
 4011              		.thumb
 4012              		.thumb_func
 4013              		.fpu fpv5-sp-d16
 4015              	lwip_netconn_do_getaddr:
 4016              	.LFB180:
1708:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
 4017              		.loc 1 1708 0
 4018              		.cfi_startproc
 4019              		@ args = 0, pretend = 0, frame = 0
 4020              		@ frame_needed = 0, uses_anonymous_args = 0
 4021              	.LVL492:
 4022 0000 10B5     		push	{r4, lr}
 4023              	.LCFI30:
 4024              		.cfi_def_cfa_offset 8
 4025              		.cfi_offset 4, -8
 4026              		.cfi_offset 14, -4
 4027 0002 0446     		mov	r4, r0
 4028              	.LVL493:
1711:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->msg.ad.local) {
 4029              		.loc 1 1711 0
 4030 0004 0368     		ldr	r3, [r0]
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 115


 4031 0006 5B68     		ldr	r3, [r3, #4]
 4032 0008 002B     		cmp	r3, #0
 4033 000a 4ED0     		beq	.L401
1712:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       ip_addr_copy(API_EXPR_DEREF(msg->msg.ad.ipaddr),
 4034              		.loc 1 1712 0
 4035 000c 027C     		ldrb	r2, [r0, #16]	@ zero_extendqisi2
 4036 000e 9AB1     		cbz	r2, .L402
1713:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->pcb.ip->local_ip);
 4037              		.loc 1 1713 0
 4038 0010 8268     		ldr	r2, [r0, #8]
 4039 0012 1B68     		ldr	r3, [r3]
 4040 0014 1360     		str	r3, [r2]
 4041              	.L403:
1720:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     switch (NETCONNTYPE_GROUP(msg->conn->type)) {
 4042              		.loc 1 1720 0
 4043 0016 0023     		movs	r3, #0
 4044 0018 2371     		strb	r3, [r4, #4]
1721:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
 4045              		.loc 1 1721 0
 4046 001a 2268     		ldr	r2, [r4]
 4047 001c 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 4048 001e 03F0F003 		and	r3, r3, #240
 4049 0022 102B     		cmp	r3, #16
 4050 0024 18D0     		beq	.L405
 4051 0026 202B     		cmp	r3, #32
 4052 0028 28D1     		bne	.L415
1734:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         API_EXPR_DEREF(msg->msg.ad.port) = msg->conn->pcb.udp->local_port;
 4053              		.loc 1 1734 0
 4054 002a 237C     		ldrb	r3, [r4, #16]	@ zero_extendqisi2
 4055 002c 43B1     		cbz	r3, .L407
1735:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
 4056              		.loc 1 1735 0
 4057 002e E368     		ldr	r3, [r4, #12]
 4058 0030 5268     		ldr	r2, [r2, #4]
 4059 0032 528A     		ldrh	r2, [r2, #18]
 4060 0034 1A80     		strh	r2, [r3]	@ movhi
 4061 0036 28E0     		b	.L408
 4062              	.L402:
1716:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->pcb.ip->remote_ip);
 4063              		.loc 1 1716 0
 4064 0038 8268     		ldr	r2, [r0, #8]
 4065 003a 5B68     		ldr	r3, [r3, #4]
 4066 003c 1360     		str	r3, [r2]
 4067 003e EAE7     		b	.L403
 4068              	.L407:
1737:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->err = ERR_CONN;
 4069              		.loc 1 1737 0
 4070 0040 5368     		ldr	r3, [r2, #4]
 4071 0042 1A7C     		ldrb	r2, [r3, #16]	@ zero_extendqisi2
 4072 0044 12F0040F 		tst	r2, #4
 4073 0048 02D1     		bne	.L409
1738:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         } else {
 4074              		.loc 1 1738 0
 4075 004a F523     		movs	r3, #245
 4076 004c 2371     		strb	r3, [r4, #4]
 4077 004e 1CE0     		b	.L408
 4078              	.L409:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 116


1740:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
 4079              		.loc 1 1740 0
 4080 0050 E268     		ldr	r2, [r4, #12]
 4081 0052 9B8A     		ldrh	r3, [r3, #20]
 4082 0054 1380     		strh	r3, [r2]	@ movhi
 4083 0056 18E0     		b	.L408
 4084              	.L405:
1747:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           ((msg->conn->pcb.tcp->state == CLOSED) || (msg->conn->pcb.tcp->state == LISTEN))) {
 4085              		.loc 1 1747 0
 4086 0058 237C     		ldrb	r3, [r4, #16]	@ zero_extendqisi2
 4087 005a 1BB9     		cbnz	r3, .L410
1748:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* pcb is not connected and remote name is requested */
 4088              		.loc 1 1748 0 discriminator 1
 4089 005c 5168     		ldr	r1, [r2, #4]
 4090 005e 097D     		ldrb	r1, [r1, #20]	@ zero_extendqisi2
1747:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           ((msg->conn->pcb.tcp->state == CLOSED) || (msg->conn->pcb.tcp->state == LISTEN))) {
 4091              		.loc 1 1747 0 discriminator 1
 4092 0060 0129     		cmp	r1, #1
 4093 0062 05D9     		bls	.L417
 4094              	.L410:
1752:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 4095              		.loc 1 1752 0
 4096 0064 E168     		ldr	r1, [r4, #12]
 4097 0066 33B1     		cbz	r3, .L411
1752:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 4098              		.loc 1 1752 0 is_stmt 0 discriminator 1
 4099 0068 5368     		ldr	r3, [r2, #4]
 4100 006a DB8A     		ldrh	r3, [r3, #22]
 4101              	.L412:
1752:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 4102              		.loc 1 1752 0 discriminator 4
 4103 006c 0B80     		strh	r3, [r1]	@ movhi
 4104 006e 0CE0     		b	.L408
 4105              	.L417:
1750:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
 4106              		.loc 1 1750 0 is_stmt 1
 4107 0070 F523     		movs	r3, #245
 4108 0072 2371     		strb	r3, [r4, #4]
 4109 0074 09E0     		b	.L408
 4110              	.L411:
1752:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 4111              		.loc 1 1752 0 discriminator 2
 4112 0076 5368     		ldr	r3, [r2, #4]
 4113 0078 1B8B     		ldrh	r3, [r3, #24]
 4114 007a F7E7     		b	.L412
 4115              	.L415:
1757:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       break;
 4116              		.loc 1 1757 0 discriminator 1
 4117 007c 0C4B     		ldr	r3, .L418
 4118 007e 40F2DD62 		movw	r2, #1757
 4119 0082 0C49     		ldr	r1, .L418+4
 4120 0084 0C48     		ldr	r0, .L418+8
 4121              	.LVL494:
 4122 0086 FFF7FEFF 		bl	printf
 4123              	.LVL495:
 4124              	.L408:
1763:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 117


 4125              		.loc 1 1763 0
 4126 008a 2368     		ldr	r3, [r4]
 4127 008c 63B1     		cbz	r3, .L400
 4128              	.LBB34:
1763:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 4129              		.loc 1 1763 0 is_stmt 0 discriminator 1
 4130 008e FFF7FEFF 		bl	sys_arch_protect
 4131              	.LVL496:
 4132 0092 2368     		ldr	r3, [r4]
 4133 0094 93F90820 		ldrsb	r2, [r3, #8]
 4134 0098 12F10C0F 		cmn	r2, #12
 4135 009c 02DB     		blt	.L414
1763:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 4136              		.loc 1 1763 0 discriminator 2
 4137 009e 94F90420 		ldrsb	r2, [r4, #4]
 4138 00a2 1A72     		strb	r2, [r3, #8]
 4139              	.L414:
1763:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 4140              		.loc 1 1763 0 discriminator 4
 4141 00a4 FFF7FEFF 		bl	sys_arch_unprotect
 4142              	.LVL497:
 4143              	.L400:
 4144 00a8 10BD     		pop	{r4, pc}
 4145              	.LVL498:
 4146              	.L401:
 4147              	.LBE34:
1761:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 4148              		.loc 1 1761 0 is_stmt 1
 4149 00aa F523     		movs	r3, #245
 4150 00ac 0371     		strb	r3, [r0, #4]
 4151 00ae ECE7     		b	.L408
 4152              	.L419:
 4153              		.align	2
 4154              	.L418:
 4155 00b0 00000000 		.word	.LC0
 4156 00b4 00000000 		.word	.LC36
 4157 00b8 54000000 		.word	.LC2
 4158              		.cfi_endproc
 4159              	.LFE180:
 4161              		.section	.text.lwip_netconn_do_close,"ax",%progbits
 4162              		.align	1
 4163              		.global	lwip_netconn_do_close
 4164              		.syntax unified
 4165              		.thumb
 4166              		.thumb_func
 4167              		.fpu fpv5-sp-d16
 4169              	lwip_netconn_do_close:
 4170              	.LFB181:
1775:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
 4171              		.loc 1 1775 0
 4172              		.cfi_startproc
 4173              		@ args = 0, pretend = 0, frame = 0
 4174              		@ frame_needed = 0, uses_anonymous_args = 0
 4175              	.LVL499:
 4176 0000 38B5     		push	{r3, r4, r5, lr}
 4177              	.LCFI31:
 4178              		.cfi_def_cfa_offset 16
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 118


 4179              		.cfi_offset 3, -16
 4180              		.cfi_offset 4, -12
 4181              		.cfi_offset 5, -8
 4182              		.cfi_offset 14, -4
 4183 0002 0446     		mov	r4, r0
 4184              	.LVL500:
1779:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* First check if this is a TCP netconn and if it is in a correct state
 4185              		.loc 1 1779 0
 4186 0004 0068     		ldr	r0, [r0]
 4187              	.LVL501:
 4188 0006 4278     		ldrb	r2, [r0, #1]	@ zero_extendqisi2
 4189              	.LVL502:
1782:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_TCP) &&
 4190              		.loc 1 1782 0
 4191 0008 4368     		ldr	r3, [r0, #4]
 4192 000a 23B1     		cbz	r3, .L421
1783:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       ((msg->msg.sd.shut == NETCONN_SHUT_RDWR) || (state != NETCONN_LISTEN))) {
 4193              		.loc 1 1783 0 discriminator 1
 4194 000c 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
1782:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_TCP) &&
 4195              		.loc 1 1782 0 discriminator 1
 4196 000e 03F0F003 		and	r3, r3, #240
 4197 0012 102B     		cmp	r3, #16
 4198 0014 10D0     		beq	.L433
 4199              	.L421:
1840:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 4200              		.loc 1 1840 0
 4201 0016 F523     		movs	r3, #245
 4202 0018 2371     		strb	r3, [r4, #4]
 4203              	.L424:
1842:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 4204              		.loc 1 1842 0
 4205 001a 60B1     		cbz	r0, .L420
 4206              	.LBB35:
1842:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 4207              		.loc 1 1842 0 is_stmt 0 discriminator 1
 4208 001c FFF7FEFF 		bl	sys_arch_protect
 4209              	.LVL503:
 4210 0020 2368     		ldr	r3, [r4]
 4211 0022 93F90820 		ldrsb	r2, [r3, #8]
 4212 0026 12F10C0F 		cmn	r2, #12
 4213 002a 02DB     		blt	.L431
1842:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 4214              		.loc 1 1842 0 discriminator 2
 4215 002c 94F90420 		ldrsb	r2, [r4, #4]
 4216 0030 1A72     		strb	r2, [r3, #8]
 4217              	.L431:
1842:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 4218              		.loc 1 1842 0 discriminator 4
 4219 0032 FFF7FEFF 		bl	sys_arch_unprotect
 4220              	.LVL504:
 4221              	.L420:
 4222 0036 38BD     		pop	{r3, r4, r5, pc}
 4223              	.LVL505:
 4224              	.L433:
 4225              	.LBE35:
1784:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* Check if we are in a connected state */
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 119


 4226              		.loc 1 1784 0 is_stmt 1
 4227 0038 237A     		ldrb	r3, [r4, #8]	@ zero_extendqisi2
1783:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       ((msg->msg.sd.shut == NETCONN_SHUT_RDWR) || (state != NETCONN_LISTEN))) {
 4228              		.loc 1 1783 0
 4229 003a 032B     		cmp	r3, #3
 4230 003c 01D0     		beq	.L422
1784:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* Check if we are in a connected state */
 4231              		.loc 1 1784 0
 4232 003e 022A     		cmp	r2, #2
 4233 0040 E9D0     		beq	.L421
 4234              	.L422:
1786:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* TCP connect in progress: cannot shutdown */
 4235              		.loc 1 1786 0
 4236 0042 032A     		cmp	r2, #3
 4237 0044 3DD0     		beq	.L434
1789:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_NETCONN_FULLDUPLEX
 4238              		.loc 1 1789 0
 4239 0046 012A     		cmp	r2, #1
 4240 0048 3ED0     		beq	.L435
1815:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* Drain and delete mboxes */
 4241              		.loc 1 1815 0
 4242 004a 13F0010F 		tst	r3, #1
 4243 004e 3ED1     		bne	.L436
 4244              	.LVL506:
 4245              	.L426:
1819:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->write_offset == 0);
 4246              		.loc 1 1819 0
 4247 0050 2368     		ldr	r3, [r4]
 4248 0052 5A6A     		ldr	r2, [r3, #36]
 4249 0054 002A     		cmp	r2, #0
 4250 0056 3DD0     		beq	.L437
 4251              	.L427:
1819:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->write_offset == 0);
 4252              		.loc 1 1819 0 is_stmt 0 discriminator 3
 4253 0058 204B     		ldr	r3, .L438
 4254 005a 40F21C72 		movw	r2, #1820
 4255 005e 2049     		ldr	r1, .L438+4
 4256 0060 2048     		ldr	r0, .L438+8
 4257 0062 FFF7FEFF 		bl	printf
 4258              	.LVL507:
 4259              	.L428:
1821:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->conn->current_msg = msg;
 4260              		.loc 1 1821 0 is_stmt 1
 4261 0066 2368     		ldr	r3, [r4]
 4262 0068 0422     		movs	r2, #4
 4263 006a 5A70     		strb	r2, [r3, #1]
1822:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
 4264              		.loc 1 1822 0
 4265 006c 2368     		ldr	r3, [r4]
 4266 006e 5C62     		str	r4, [r3, #36]
1824:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         LWIP_ASSERT("state!", msg->conn->state == NETCONN_CLOSE);
 4267              		.loc 1 1824 0
 4268 0070 0021     		movs	r1, #0
 4269 0072 2068     		ldr	r0, [r4]
 4270 0074 FFF7FEFF 		bl	lwip_netconn_do_close_internal
 4271              	.LVL508:
 4272 0078 0028     		cmp	r0, #0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 120


 4273 007a DCD0     		beq	.L420
1825:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         UNLOCK_TCPIP_CORE();
 4274              		.loc 1 1825 0
 4275 007c 2368     		ldr	r3, [r4]
 4276 007e 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 4277 0080 042B     		cmp	r3, #4
 4278 0082 06D0     		beq	.L430
1825:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         UNLOCK_TCPIP_CORE();
 4279              		.loc 1 1825 0 is_stmt 0 discriminator 1
 4280 0084 154B     		ldr	r3, .L438
 4281 0086 40F22172 		movw	r2, #1825
 4282 008a 1749     		ldr	r1, .L438+12
 4283 008c 1548     		ldr	r0, .L438+8
 4284 008e FFF7FEFF 		bl	printf
 4285              	.LVL509:
 4286              	.L430:
1826:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         sys_arch_sem_wait(LWIP_API_MSG_SEM(msg), 0);
 4287              		.loc 1 1826 0 is_stmt 1
 4288 0092 164D     		ldr	r5, .L438+16
 4289 0094 2846     		mov	r0, r5
 4290 0096 FFF7FEFF 		bl	sys_mutex_unlock
 4291              	.LVL510:
1827:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         LOCK_TCPIP_CORE();
 4292              		.loc 1 1827 0
 4293 009a 2068     		ldr	r0, [r4]
 4294 009c 0021     		movs	r1, #0
 4295 009e 0C30     		adds	r0, r0, #12
 4296 00a0 FFF7FEFF 		bl	sys_arch_sem_wait
 4297              	.LVL511:
1828:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         LWIP_ASSERT("state!", msg->conn->state == NETCONN_NONE);
 4298              		.loc 1 1828 0
 4299 00a4 2846     		mov	r0, r5
 4300 00a6 FFF7FEFF 		bl	sys_mutex_lock
 4301              	.LVL512:
1829:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 4302              		.loc 1 1829 0
 4303 00aa 2368     		ldr	r3, [r4]
 4304 00ac 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 4305 00ae 002B     		cmp	r3, #0
 4306 00b0 C1D0     		beq	.L420
1829:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 4307              		.loc 1 1829 0 is_stmt 0 discriminator 1
 4308 00b2 0A4B     		ldr	r3, .L438
 4309 00b4 40F22572 		movw	r2, #1829
 4310 00b8 0B49     		ldr	r1, .L438+12
 4311 00ba 0A48     		ldr	r0, .L438+8
 4312 00bc FFF7FEFF 		bl	printf
 4313              	.LVL513:
 4314 00c0 38BD     		pop	{r3, r4, r5, pc}
 4315              	.LVL514:
 4316              	.L434:
1788:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else if (state == NETCONN_WRITE) {
 4317              		.loc 1 1788 0 is_stmt 1
 4318 00c2 F523     		movs	r3, #245
 4319 00c4 2371     		strb	r3, [r4, #4]
 4320 00c6 A8E7     		b	.L424
 4321              	.L435:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 121


1812:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else {
 4322              		.loc 1 1812 0
 4323 00c8 FB23     		movs	r3, #251
 4324 00ca 2371     		strb	r3, [r4, #4]
 4325 00cc A5E7     		b	.L424
 4326              	.L436:
1817:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 4327              		.loc 1 1817 0
 4328 00ce FFF7FEFF 		bl	netconn_drain
 4329              	.LVL515:
 4330 00d2 BDE7     		b	.L426
 4331              	.L437:
1819:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->write_offset == 0);
 4332              		.loc 1 1819 0 discriminator 2
 4333 00d4 1B6A     		ldr	r3, [r3, #32]
 4334 00d6 002B     		cmp	r3, #0
 4335 00d8 C5D0     		beq	.L428
 4336 00da BDE7     		b	.L427
 4337              	.L439:
 4338              		.align	2
 4339              	.L438:
 4340 00dc 00000000 		.word	.LC0
 4341 00e0 34000000 		.word	.LC32
 4342 00e4 54000000 		.word	.LC2
 4343 00e8 50000000 		.word	.LC33
 4344 00ec 00000000 		.word	lock_tcpip_core
 4345              		.cfi_endproc
 4346              	.LFE181:
 4348              		.section	.text.lwip_netconn_do_gethostbyname,"ax",%progbits
 4349              		.align	1
 4350              		.global	lwip_netconn_do_gethostbyname
 4351              		.syntax unified
 4352              		.thumb
 4353              		.thumb_func
 4354              		.fpu fpv5-sp-d16
 4356              	lwip_netconn_do_gethostbyname:
 4357              	.LFB183:
1924:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1925:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1926:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1927:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Execute a DNS query
1928:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_gethostbyname
1929:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1930:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param arg the dns_api_msg pointing to the query
1931:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1932:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
1933:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_gethostbyname(void *arg)
1934:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 4358              		.loc 1 1934 0
 4359              		.cfi_startproc
 4360              		@ args = 0, pretend = 0, frame = 0
 4361              		@ frame_needed = 0, uses_anonymous_args = 0
 4362              	.LVL516:
 4363 0000 30B5     		push	{r4, r5, lr}
 4364              	.LCFI32:
 4365              		.cfi_def_cfa_offset 12
 4366              		.cfi_offset 4, -12
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 122


 4367              		.cfi_offset 5, -8
 4368              		.cfi_offset 14, -4
 4369 0002 83B0     		sub	sp, sp, #12
 4370              	.LCFI33:
 4371              		.cfi_def_cfa_offset 24
 4372 0004 0446     		mov	r4, r0
 4373              	.LVL517:
1935:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct dns_api_msg *msg = (struct dns_api_msg*)arg;
1936:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   u8_t addrtype =
1937:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_IPV4 && LWIP_IPV6
1938:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->dns_addrtype;
1939:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else
1940:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     LWIP_DNS_ADDRTYPE_DEFAULT;
1941:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
1942:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1943:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   API_EXPR_DEREF(msg->err) = dns_gethostbyname_addrtype(msg->name,
 4374              		.loc 1 1943 0
 4375 0006 C568     		ldr	r5, [r0, #12]
 4376 0008 0023     		movs	r3, #0
 4377 000a 0093     		str	r3, [sp]
 4378 000c 0346     		mov	r3, r0
 4379 000e 084A     		ldr	r2, .L443
 4380 0010 4168     		ldr	r1, [r0, #4]
 4381 0012 0068     		ldr	r0, [r0]
 4382              	.LVL518:
 4383 0014 FFF7FEFF 		bl	dns_gethostbyname_addrtype
 4384              	.LVL519:
 4385 0018 2870     		strb	r0, [r5]
1944:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     API_EXPR_REF(msg->addr), lwip_netconn_do_dns_found, msg, addrtype);
1945:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (API_EXPR_DEREF(msg->err) != ERR_INPROGRESS) {
 4386              		.loc 1 1945 0
 4387 001a E368     		ldr	r3, [r4, #12]
 4388 001c 93F90030 		ldrsb	r3, [r3]
 4389 0020 13F1050F 		cmn	r3, #5
 4390 0024 02D0     		beq	.L440
1946:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* on error or immediate success, wake up the application
1947:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****      * task waiting in netconn_gethostbyname */
1948:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_sem_signal(API_EXPR_REF_SEM(msg->sem));
 4391              		.loc 1 1948 0
 4392 0026 A068     		ldr	r0, [r4, #8]
 4393 0028 FFF7FEFF 		bl	sys_sem_signal
 4394              	.LVL520:
 4395              	.L440:
1949:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1950:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 4396              		.loc 1 1950 0
 4397 002c 03B0     		add	sp, sp, #12
 4398              	.LCFI34:
 4399              		.cfi_def_cfa_offset 12
 4400              		@ sp needed
 4401 002e 30BD     		pop	{r4, r5, pc}
 4402              	.LVL521:
 4403              	.L444:
 4404              		.align	2
 4405              	.L443:
 4406 0030 00000000 		.word	lwip_netconn_do_dns_found
 4407              		.cfi_endproc
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 123


 4408              	.LFE183:
 4410              		.comm	netconn_aborted,1,1
 4411              		.section	.rodata.err_tcp.str1.4,"aMS",%progbits,1
 4412              		.align	2
 4413              	.LC6:
 4414 0000 636F6E6E 		.ascii	"conn != NULL\000"
 4414      20213D20 
 4414      4E554C4C 
 4414      00
 4415 000d 000000   		.space	3
 4416              	.LC7:
 4417 0010 636F6E6E 		.ascii	"conn->current_msg != NULL\000"
 4417      2D3E6375 
 4417      7272656E 
 4417      745F6D73 
 4417      6720213D 
 4418 002a 0000     		.space	2
 4419              	.LC8:
 4420 002c 696E6176 		.ascii	"inavlid op_completed_sem\000"
 4420      6C696420 
 4420      6F705F63 
 4420      6F6D706C 
 4420      65746564 
 4421 0045 000000   		.space	3
 4422              	.LC9:
 4423 0048 636F6E6E 		.ascii	"conn->current_msg == NULL\000"
 4423      2D3E6375 
 4423      7272656E 
 4423      745F6D73 
 4423      67203D3D 
 4424              		.section	.rodata.lwip_netconn_do_close_internal.str1.4,"aMS",%progbits,1
 4425              		.align	2
 4426              	.LC17:
 4427 0000 696E7661 		.ascii	"invalid conn\000"
 4427      6C696420 
 4427      636F6E6E 
 4427      00
 4428 000d 000000   		.space	3
 4429              	.LC18:
 4430 0010 74686973 		.ascii	"this is for tcp netconns only\000"
 4430      20697320 
 4430      666F7220 
 4430      74637020 
 4430      6E657463 
 4431 002e 0000     		.space	2
 4432              	.LC19:
 4433 0030 636F6E6E 		.ascii	"conn must be in state NETCONN_CLOSE\000"
 4433      206D7573 
 4433      74206265 
 4433      20696E20 
 4433      73746174 
 4434              	.LC20:
 4435 0054 70636220 		.ascii	"pcb already closed\000"
 4435      616C7265 
 4435      61647920 
 4435      636C6F73 
 4435      656400
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 124


 4436 0067 00       		.space	1
 4437              	.LC21:
 4438 0068 436C6F73 		.ascii	"Closing a listen pcb may not fail!\000"
 4438      696E6720 
 4438      61206C69 
 4438      7374656E 
 4438      20706362 
 4439 008b 00       		.space	1
 4440              	.LC22:
 4441 008c 65727220 		.ascii	"err != ERR_OK\000"
 4441      213D2045 
 4441      52525F4F 
 4441      4B00
 4442              		.section	.rodata.lwip_netconn_do_connect.str1.4,"aMS",%progbits,1
 4443              		.align	2
 4444              	.LC34:
 4445 0000 496E7661 		.ascii	"Invalid netconn type\000"
 4445      6C696420 
 4445      6E657463 
 4445      6F6E6E20 
 4445      74797065 
 4446              		.section	.rodata.lwip_netconn_do_connected.str1.4,"aMS",%progbits,1
 4447              		.align	2
 4448              	.LC10:
 4449 0000 636F6E6E 		.ascii	"conn->state == NETCONN_CONNECT\000"
 4449      2D3E7374 
 4449      61746520 
 4449      3D3D204E 
 4449      4554434F 
 4450 001f 00       		.space	1
 4451              	.LC11:
 4452 0020 28636F6E 		.ascii	"(conn->current_msg != NULL) || conn->in_non_blockin"
 4452      6E2D3E63 
 4452      75727265 
 4452      6E745F6D 
 4452      73672021 
 4453 0053 675F636F 		.ascii	"g_connect\000"
 4453      6E6E6563 
 4453      7400
 4454 005d 000000   		.space	3
 4455              	.LC12:
 4456 0060 626C6F63 		.ascii	"blocking connect state error\000"
 4456      6B696E67 
 4456      20636F6E 
 4456      6E656374 
 4456      20737461 
 4457              		.section	.rodata.lwip_netconn_do_delconn.str1.4,"aMS",%progbits,1
 4458              		.align	2
 4459              	.LC30:
 4460 0000 6E657463 		.ascii	"netconn state error\000"
 4460      6F6E6E20 
 4460      73746174 
 4460      65206572 
 4460      726F7200 
 4461              	.LC31:
 4462 0014 626C6F63 		.ascii	"blocking connect in progress\000"
 4462      6B696E67 
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 125


 4462      20636F6E 
 4462      6E656374 
 4462      20696E20 
 4463 0031 000000   		.space	3
 4464              	.LC32:
 4465 0034 616C7265 		.ascii	"already writing or closing\000"
 4465      61647920 
 4465      77726974 
 4465      696E6720 
 4465      6F722063 
 4466 004f 00       		.space	1
 4467              	.LC33:
 4468 0050 73746174 		.ascii	"state!\000"
 4468      652100
 4469              		.section	.rodata.lwip_netconn_do_getaddr.str1.4,"aMS",%progbits,1
 4470              		.align	2
 4471              	.LC36:
 4472 0000 696E7661 		.ascii	"invalid netconn_type\000"
 4472      6C696420 
 4472      6E657463 
 4472      6F6E6E5F 
 4472      74797065 
 4473              		.section	.rodata.lwip_netconn_do_write.str1.4,"aMS",%progbits,1
 4474              		.align	2
 4475              	.LC35:
 4476 0000 6D73672D 		.ascii	"msg->msg.w.len != 0\000"
 4476      3E6D7367 
 4476      2E772E6C 
 4476      656E2021 
 4476      3D203000 
 4477              		.section	.rodata.lwip_netconn_do_writemore.str1.4,"aMS",%progbits,1
 4478              		.align	2
 4479              	.LC13:
 4480 0000 636F6E6E 		.ascii	"conn->state == NETCONN_WRITE\000"
 4480      2D3E7374 
 4480      61746520 
 4480      3D3D204E 
 4480      4554434F 
 4481 001d 000000   		.space	3
 4482              	.LC14:
 4483 0020 636F6E6E 		.ascii	"conn->pcb.tcp != NULL\000"
 4483      2D3E7063 
 4483      622E7463 
 4483      7020213D 
 4483      204E554C 
 4484 0036 0000     		.space	2
 4485              	.LC15:
 4486 0038 636F6E6E 		.ascii	"conn->write_offset < conn->current_msg->msg.w.len\000"
 4486      2D3E7772 
 4486      6974655F 
 4486      6F666673 
 4486      6574203C 
 4487 006a 0000     		.space	2
 4488              	.LC16:
 4489 006c 6C776970 		.ascii	"lwip_netconn_do_writemore: invalid length!\000"
 4489      5F6E6574 
 4489      636F6E6E 
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 126


 4489      5F646F5F 
 4489      77726974 
 4490              		.section	.rodata.netconn_alloc.str1.4,"aMS",%progbits,1
 4491              		.align	2
 4492              	.LC26:
 4493 0000 6E657463 		.ascii	"netconn_alloc: undefined netconn_type\000"
 4493      6F6E6E5F 
 4493      616C6C6F 
 4493      633A2075 
 4493      6E646566 
 4494              		.section	.rodata.netconn_free.str1.4,"aMS",%progbits,1
 4495              		.align	2
 4496              	.LC27:
 4497 0000 50434220 		.ascii	"PCB must be deallocated outside this function\000"
 4497      6D757374 
 4497      20626520 
 4497      6465616C 
 4497      6C6F6361 
 4498 002e 0000     		.space	2
 4499              	.LC28:
 4500 0030 72656376 		.ascii	"recvmbox must be deallocated before calling this fu"
 4500      6D626F78 
 4500      206D7573 
 4500      74206265 
 4500      20646561 
 4501 0063 6E637469 		.ascii	"nction\000"
 4501      6F6E00
 4502 006a 0000     		.space	2
 4503              	.LC29:
 4504 006c 61636365 		.ascii	"acceptmbox must be deallocated before calling this "
 4504      70746D62 
 4504      6F78206D 
 4504      75737420 
 4504      62652064 
 4505 009f 66756E63 		.ascii	"function\000"
 4505      74696F6E 
 4505      00
 4506              		.section	.rodata.pcb_new.str1.4,"aMS",%progbits,1
 4507              		.align	2
 4508              	.LC5:
 4509 0000 7063625F 		.ascii	"pcb_new: pcb already allocated\000"
 4509      6E65773A 
 4509      20706362 
 4509      20616C72 
 4509      65616479 
 4510              		.section	.rodata.recv_tcp.str1.4,"aMS",%progbits,1
 4511              		.align	2
 4512              	.LC23:
 4513 0000 72656376 		.ascii	"recv_tcp must have a pcb argument\000"
 4513      5F746370 
 4513      206D7573 
 4513      74206861 
 4513      76652061 
 4514 0022 0000     		.space	2
 4515              	.LC24:
 4516 0024 72656376 		.ascii	"recv_tcp must have an argument\000"
 4516      5F746370 
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 127


 4516      206D7573 
 4516      74206861 
 4516      76652061 
 4517 0043 00       		.space	1
 4518              	.LC25:
 4519 0044 72656376 		.ascii	"recv_tcp: recv for wrong pcb!\000"
 4519      5F746370 
 4519      3A207265 
 4519      63762066 
 4519      6F722077 
 4520              		.section	.rodata.recv_udp.str1.4,"aMS",%progbits,1
 4521              		.align	2
 4522              	.LC0:
 4523 0000 4D696464 		.ascii	"Middlewares/Third_Party/LwIP/src/api/api_msg.c\000"
 4523      6C657761 
 4523      7265732F 
 4523      54686972 
 4523      645F5061 
 4524 002f 00       		.space	1
 4525              	.LC1:
 4526 0030 72656376 		.ascii	"recv_udp must have a pcb argument\000"
 4526      5F756470 
 4526      206D7573 
 4526      74206861 
 4526      76652061 
 4527 0052 0000     		.space	2
 4528              	.LC2:
 4529 0054 41737365 		.ascii	"Assertion \"%s\" failed at line %d in %s\012\000"
 4529      7274696F 
 4529      6E202225 
 4529      73222066 
 4529      61696C65 
 4530              	.LC3:
 4531 007c 72656376 		.ascii	"recv_udp must have an argument\000"
 4531      5F756470 
 4531      206D7573 
 4531      74206861 
 4531      76652061 
 4532 009b 00       		.space	1
 4533              	.LC4:
 4534 009c 72656376 		.ascii	"recv_udp: recv for wrong pcb!\000"
 4534      5F756470 
 4534      3A207265 
 4534      63762066 
 4534      6F722077 
 4535              		.text
 4536              	.Letext0:
 4537              		.file 2 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\machine\\_default_types.h"
 4538              		.file 3 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\sys\\_stdint.h"
 4539              		.file 4 "Drivers/CMSIS/Include/core_cm7.h"
 4540              		.file 5 "Drivers/CMSIS/Device/ST/STM32F7xx/Include/system_stm32f7xx.h"
 4541              		.file 6 "c:\\gcc_toolchain\\6_2017-q1-update\\lib\\gcc\\arm-none-eabi\\6.3.1\\include\\stddef.h"
 4542              		.file 7 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\sys\\lock.h"
 4543              		.file 8 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\sys\\_types.h"
 4544              		.file 9 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\sys\\reent.h"
 4545              		.file 10 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\stdlib.h"
 4546              		.file 11 "Middlewares/Third_Party/LwIP/system/arch/cc.h"
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 128


 4547              		.file 12 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\time.h"
 4548              		.file 13 "Middlewares/Third_Party/LwIP/src/include/lwip/arch.h"
 4549              		.file 14 "Middlewares/Third_Party/LwIP/src/include/lwip/ip4_addr.h"
 4550              		.file 15 "Middlewares/Third_Party/LwIP/src/include/lwip/ip_addr.h"
 4551              		.file 16 "Middlewares/Third_Party/LwIP/src/include/lwip/err.h"
 4552              		.file 17 "Middlewares/Third_Party/FreeRTOS/Source/include/queue.h"
 4553              		.file 18 "Middlewares/Third_Party/FreeRTOS/Source/include/semphr.h"
 4554              		.file 19 "Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.h"
 4555              		.file 20 "Middlewares/Third_Party/LwIP/system/arch/sys_arch.h"
 4556              		.file 21 "Middlewares/Third_Party/LwIP/src/include/lwip/pbuf.h"
 4557              		.file 22 "Middlewares/Third_Party/LwIP/src/include/lwip/memp.h"
 4558              		.file 23 "Middlewares/Third_Party/LwIP/src/include/lwip/priv/memp_priv.h"
 4559              		.file 24 "Middlewares/Third_Party/LwIP/src/include/lwip/netif.h"
 4560              		.file 25 "Middlewares/Third_Party/LwIP/src/include/lwip/netbuf.h"
 4561              		.file 26 "Middlewares/Third_Party/LwIP/src/include/lwip/api.h"
 4562              		.file 27 "Middlewares/Third_Party/LwIP/src/include/lwip/ip.h"
 4563              		.file 28 "Middlewares/Third_Party/LwIP/src/include/lwip/tcp.h"
 4564              		.file 29 "Middlewares/Third_Party/LwIP/src/include/lwip/udp.h"
 4565              		.file 30 "Middlewares/Third_Party/LwIP/src/include/lwip/priv/api_msg.h"
 4566              		.file 31 "Middlewares/Third_Party/LwIP/src/include/lwip/timeouts.h"
 4567              		.file 32 "Middlewares/Third_Party/LwIP/src/include/lwip/tcpip.h"
 4568              		.file 33 "Middlewares/Third_Party/LwIP/src/include/lwip/prot/ip4.h"
 4569              		.file 34 "Middlewares/Third_Party/LwIP/src/include/lwip/dns.h"
 4570              		.file 35 "Middlewares/Third_Party/LwIP/src/include/lwip/sys.h"
 4571              		.file 36 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\stdio.h"
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 129


DEFINED SYMBOLS
                            *ABS*:00000000 api_msg.c
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:18     .text.recv_udp:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:24     .text.recv_udp:00000000 recv_udp
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:185    .text.recv_udp:000000bc $d
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:194    .text.setup_tcp:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:200    .text.setup_tcp:00000000 setup_tcp
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:247    .text.setup_tcp:00000030 $d
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:1997   .text.recv_tcp:00000000 recv_tcp
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:1894   .text.sent_tcp:00000000 sent_tcp
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:1784   .text.poll_tcp:00000000 poll_tcp
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:376    .text.err_tcp:00000000 err_tcp
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:255    .text.pcb_new:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:261    .text.pcb_new:00000000 pcb_new
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:362    .text.pcb_new:00000078 $d
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:370    .text.err_tcp:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:617    .text.err_tcp:00000128 $d
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:629    .text.lwip_netconn_do_connected:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:635    .text.lwip_netconn_do_connected:00000000 lwip_netconn_do_connected
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:815    .text.lwip_netconn_do_connected:000000e0 $d
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:824    .text.lwip_netconn_do_dns_found:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:830    .text.lwip_netconn_do_dns_found:00000000 lwip_netconn_do_dns_found
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:875    .text.lwip_netconn_do_writemore:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:881    .text.lwip_netconn_do_writemore:00000000 lwip_netconn_do_writemore
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:1310   .text.lwip_netconn_do_writemore:00000214 $d
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:1322   .text.lwip_netconn_do_close_internal:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:1328   .text.lwip_netconn_do_close_internal:00000000 lwip_netconn_do_close_internal
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:1762   .text.lwip_netconn_do_close_internal:00000220 $d
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:1778   .text.poll_tcp:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:1881   .text.poll_tcp:00000074 $d
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:1888   .text.sent_tcp:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:1984   .text.sent_tcp:00000068 $d
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:1991   .text.recv_tcp:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:2160   .text.recv_tcp:000000bc $d
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:2169   .text.lwip_netconn_do_newconn:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:2176   .text.lwip_netconn_do_newconn:00000000 lwip_netconn_do_newconn
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:2230   .text.netconn_alloc:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:2237   .text.netconn_alloc:00000000 netconn_alloc
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:2344   .text.netconn_alloc:00000080 $d
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:2351   .text.netconn_free:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:2358   .text.netconn_free:00000000 netconn_free
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:2434   .text.netconn_free:00000064 $d
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:2443   .text.netconn_drain:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:2449   .text.netconn_drain:00000000 netconn_drain
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:2585   .text.netconn_drain:000000a0 $d
                            *COM*:00000001 netconn_aborted
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:2590   .text.accept_function:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:2596   .text.accept_function:00000000 accept_function
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:2798   .text.accept_function:000000fc $d
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:2803   .text.lwip_netconn_do_delconn:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:2810   .text.lwip_netconn_do_delconn:00000000 lwip_netconn_do_delconn
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:3053   .text.lwip_netconn_do_delconn:00000154 $d
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:3064   .text.lwip_netconn_do_bind:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:3071   .text.lwip_netconn_do_bind:00000000 lwip_netconn_do_bind
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:3153   .text.lwip_netconn_do_connect:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:3160   .text.lwip_netconn_do_connect:00000000 lwip_netconn_do_connect
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:3351   .text.lwip_netconn_do_connect:00000100 $d
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 130


C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:3361   .text.lwip_netconn_do_disconnect:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:3368   .text.lwip_netconn_do_disconnect:00000000 lwip_netconn_do_disconnect
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:3429   .text.lwip_netconn_do_listen:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:3436   .text.lwip_netconn_do_listen:00000000 lwip_netconn_do_listen
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:3628   .text.lwip_netconn_do_listen:000000ec $d
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:3633   .text.lwip_netconn_do_send:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:3640   .text.lwip_netconn_do_send:00000000 lwip_netconn_do_send
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:3722   .text.lwip_netconn_do_recv:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:3729   .text.lwip_netconn_do_recv:00000000 lwip_netconn_do_recv
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:3820   .text.lwip_netconn_do_write:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:3827   .text.lwip_netconn_do_write:00000000 lwip_netconn_do_write
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:3998   .text.lwip_netconn_do_write:000000e8 $d
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:4008   .text.lwip_netconn_do_getaddr:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:4015   .text.lwip_netconn_do_getaddr:00000000 lwip_netconn_do_getaddr
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:4155   .text.lwip_netconn_do_getaddr:000000b0 $d
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:4162   .text.lwip_netconn_do_close:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:4169   .text.lwip_netconn_do_close:00000000 lwip_netconn_do_close
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:4340   .text.lwip_netconn_do_close:000000dc $d
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:4349   .text.lwip_netconn_do_gethostbyname:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:4356   .text.lwip_netconn_do_gethostbyname:00000000 lwip_netconn_do_gethostbyname
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:4406   .text.lwip_netconn_do_gethostbyname:00000030 $d
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:4412   .rodata.err_tcp.str1.4:00000000 $d
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:4425   .rodata.lwip_netconn_do_close_internal.str1.4:00000000 $d
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:4443   .rodata.lwip_netconn_do_connect.str1.4:00000000 $d
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:4447   .rodata.lwip_netconn_do_connected.str1.4:00000000 $d
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:4458   .rodata.lwip_netconn_do_delconn.str1.4:00000000 $d
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:4470   .rodata.lwip_netconn_do_getaddr.str1.4:00000000 $d
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:4474   .rodata.lwip_netconn_do_write.str1.4:00000000 $d
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:4478   .rodata.lwip_netconn_do_writemore.str1.4:00000000 $d
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:4491   .rodata.netconn_alloc.str1.4:00000000 $d
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:4495   .rodata.netconn_free.str1.4:00000000 $d
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:4507   .rodata.pcb_new.str1.4:00000000 $d
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:4511   .rodata.recv_tcp.str1.4:00000000 $d
C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s:4521   .rodata.recv_udp.str1.4:00000000 $d
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
printf
sys_mbox_valid
memp_malloc
sys_mbox_trypost
pbuf_free
netbuf_delete
tcp_arg
tcp_recv
tcp_sent
tcp_poll
tcp_err
udp_new_ip_type
udp_recv
tcp_new_ip_type
sys_arch_protect
sys_arch_unprotect
sys_sem_valid
sys_sem_signal
tcp_write
tcp_output
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccGUCMdj.s 			page 131


tcp_close
tcp_accept
tcp_shutdown
tcp_abort
tcp_recved
sys_mbox_new
sys_sem_new
sys_mbox_set_invalid
memp_free
sys_mbox_free
sys_sem_free
sys_sem_set_invalid
sys_arch_mbox_tryfetch
udp_remove
sys_mutex_unlock
sys_arch_sem_wait
sys_mutex_lock
lock_tcpip_core
udp_bind
tcp_bind
udp_connect
tcp_connect
udp_disconnect
tcp_listen_with_backlog_and_err
udp_send
udp_sendto
dns_gethostbyname_addrtype
